{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4e2a\u4eba\u5b66\u4e60\u7b14\u8bb0 There is only one heroism in the world: to see the world as it is and to love it","title":"Home"},{"location":"#_1","text":"There is only one heroism in the world: to see the world as it is and to love it","title":"\u4e2a\u4eba\u5b66\u4e60\u7b14\u8bb0"},{"location":"chart/flowchart/","text":"\u6d41\u7a0b\u56fe","title":"Flowchart"},{"location":"chart/flowchart/#_1","text":"","title":"\u6d41\u7a0b\u56fe"},{"location":"chart/uml/","text":"uml\u56fe http://www.uml.org.cn/oobject/200901203.asp https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80 \u65f6\u5e8f\u56fe","title":"Uml"},{"location":"chart/uml/#uml","text":"http://www.uml.org.cn/oobject/200901203.asp https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80 \u65f6\u5e8f\u56fe","title":"uml\u56fe"},{"location":"cplus/cplus1_grammer/","text":"c++\u3000\u7b2c\u4e00\u7ae0 \u57fa\u7840\u8bed\u6cd5,\u63a7\u5236\u6d41\u7a0b,\u6570\u636e\u7c7b\u578b \u4e00 \u5b9a\u4e49\u53d8\u91cf: double a = 2.0 \u4e8c \u63a7\u5236\u6d41\u7a0b: if ...else void control () { int a = 10 ; if ( a 5 ) { cout ok endl ; } else { cout not ok endl ; } } switch:\u8868\u8fbe\u5f0f\u53ea\u80fd\u662f\u6574\u578b\uff0c\u5b57\u7b26\u578b\uff0c\u679a\u4e3e\u578b void control () { int a = 10 ; if ( a 5 ) { cout ok endl ; } else { cout not ok endl ; } } for..i for ( int i = 0 ; i 10 ; ++ i ) { cout hello ; } while int test = 0 ; while ( test 100 ) { test ++ ; cout test \\t ; } \u4e09 \u6570\u636e\u7c7b\u578b int ,char,bool,float,double,int[],double amp;,char*,enum + \u6574\u6570\u7c7b\u578b:int \u6240\u6709\u7684c++\u7f16\u8bd1\u5668\u90fd\u5e94\u8be5\u6ee1\u8db3c++\u6807\u51c6\u6240\u89c4\u5b9a\u7684\u6574\u6570\u957f\u5ea6\u5173\u7cfb\u5f0f: char short int int long int \u5b57\u7b26\u578b:char char ch = A ; cout ch endl ; \u503c\u5f97\u6ce8\u610f\u7684\u662fASCII\u7801\u5e76\u4e0d\u662f\u6700\u7ec8\u6807\u51c6\uff0c\u6240\u4ee5\u4e3a\u4e86\u4ee3\u7801\u7684\u53ef\u79fb\u690d\u6027\uff0c\u4e0d\u8981\u7528\u6570\u5b57\u5bf9\u5b57\u7b26\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c\u3002 \u679a\u4e3e\u578b:enum enum Week { Mon , Tue , Wed , Thu , Fri , Sta , Sun }; Week mon = Tue ; cout mon endl ; \u679a\u4e3e\u4e00\u91cf\u5b9a\u4e49\u4e0d\u80fd\u6539\u53d8\uff0c\u6240\u4ee5\u5e38\u7528\u6765\u4ee3\u66ff\u6574\u6570\u5e38\u91cf\uff0c\u4f5c\u7528\u66f4\u4f18\u7684\u662f\u5e38\u91cf\u9700\u8981\u521d\u59cb\u5316\uff0c\u800c\u679a\u4e3e\u662f\u4e00\u79cd\u7c7b\u578b\uff0c\u65e0\u987b\u5b9a\u4e49\u5176\u5b9e\u4f53\u3002 \u5e03\u5c14\u578b:bool :\u975e0\u4e3a\u771f \u8fd8\u6709:float,double,int[],double ,char* c-\u4e32 c-\u4e32 :\u4ecec\u8bed\u8a00\u4e2d\u5ef6\u7eed\u7684\u5b57\u7b26\u6570\u7ec4\uff0c\u4ee50\u7ed3\u5c3e\u3002\u5b57\u7b26\u957f\u5ea6\u8981\u52a01. const char str = Hello ; char str = Hello ; //\u5b57\u7b26\u4e32\u5e38\u91cf\u8d4b\u4e88char\u6307\u9488\u9519\u8befdeprecated conversion from string constant to \u2018char\u2019 char str = Hello ; //\u6307\u9488\u5730\u5740\u8d4b\u4e88char\u7c7b\u578b\u9519\u8befinvalid conversion from \u2018const char\u2019 to \u2018char\u2019 cout * str endl ; //Hello cout str endl ; //Hello cout str endl ; //Hello const char chars = s , chars1 = s ; cout ( chars == chars1 ) endl ; //true char is_char [] = s , is_char1 [] = s ; cout ( is_char == is_char1 ) endl ; //false string s = hello , s1 = hello ; cout ( s == s1 ) endl ; //true \u5728\u6bd4\u8f83\u540c\u4e2a\u5b57\u7b26\u76f8\u540c\u7684c-\u4e32\u662f\u7528==\u4f1a\u4e0d\u76f8\u7b49\uff0c\u56e0\u4e3a\u662f\u6307\u5411\u4e24\u4e2a\u4e0d\u540c\u4f4d\u7f6e\u7684\u6307\u9488\u3002\u800c\u5e94\u8be5\u7528strcmp string: string\u662f\u4e00\u79cd\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u64cd\u4f5c\u3002\u4e0d\u50cf\u5b57\u7b26\u6307\u9488\u4e00\u6837\u86cb\u75bc\u3002 string a , s1 = hello ; string s2 = 123 ; //\u6bd4\u8f83 cout ( a == s1 ) endl ; //false a = s1 ; cout ( a == s1 ) endl ; //true //\u8fde\u63a5 cout ( a + s2 ) endl ; //\u67e5\u627e cout ( a . find ( e )) endl \u6570\u7ec4: \u5b9a\u4e49\u683c\u5f0f: \u7c7b\u578b\u540d \u6570\u7ec4\u540d[\u5e38\u91cf\u8868\u8fbe\u5f0f] int arr1 [ 3 ] = { 1 }; int arr2 [ 3 ]; void arrays () { int arr3 [ 3 ] = { 1 }; int arr4 [ 3 ]; static int arr5 [ 3 ]; int i = 0 ; for ( i = 0 ; i 3 ; ++ i ) { cout arr1 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr2 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr3 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr4 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr5 [ i ] \\t ; } \u5168\u5c40\u6570\u7ec4\u548c\u9759\u6001\u6570\u7ec4\u672a\u521d\u59cb\u5316\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u4e3a\u6e05\u96f6\uff0c\u5c40\u90e8\u6570\u7ec4\u672a\u521d\u59cb\u5316\u4f1a\u51fa\u73b0\u968f\u673a\u6570\u3002 vector\u5bb9\u5668 void vectors () { vector int ve ; for ( int i = 0 ; i 10 ; ++ i ) { ve . push_back ( i ); } vector int :: iterator p = ve . begin (); for (; p ve . end (); p ++ ) { cout * p ; } }","title":"\u57fa\u7840\u8bed\u6cd5"},{"location":"cplus/cplus1_grammer/#c","text":"","title":"c++\u3000\u7b2c\u4e00\u7ae0 \u57fa\u7840\u8bed\u6cd5,\u63a7\u5236\u6d41\u7a0b,\u6570\u636e\u7c7b\u578b"},{"location":"cplus/cplus1_grammer/#_1","text":"double a = 2.0","title":"\u4e00 \u5b9a\u4e49\u53d8\u91cf:"},{"location":"cplus/cplus1_grammer/#_2","text":"if ...else void control () { int a = 10 ; if ( a 5 ) { cout ok endl ; } else { cout not ok endl ; } } switch:\u8868\u8fbe\u5f0f\u53ea\u80fd\u662f\u6574\u578b\uff0c\u5b57\u7b26\u578b\uff0c\u679a\u4e3e\u578b void control () { int a = 10 ; if ( a 5 ) { cout ok endl ; } else { cout not ok endl ; } } for..i for ( int i = 0 ; i 10 ; ++ i ) { cout hello ; } while int test = 0 ; while ( test 100 ) { test ++ ; cout test \\t ; }","title":"\u4e8c \u63a7\u5236\u6d41\u7a0b:"},{"location":"cplus/cplus1_grammer/#_3","text":"int ,char,bool,float,double,int[],double amp;,char*,enum + \u6574\u6570\u7c7b\u578b:int \u6240\u6709\u7684c++\u7f16\u8bd1\u5668\u90fd\u5e94\u8be5\u6ee1\u8db3c++\u6807\u51c6\u6240\u89c4\u5b9a\u7684\u6574\u6570\u957f\u5ea6\u5173\u7cfb\u5f0f: char short int int long int \u5b57\u7b26\u578b:char char ch = A ; cout ch endl ; \u503c\u5f97\u6ce8\u610f\u7684\u662fASCII\u7801\u5e76\u4e0d\u662f\u6700\u7ec8\u6807\u51c6\uff0c\u6240\u4ee5\u4e3a\u4e86\u4ee3\u7801\u7684\u53ef\u79fb\u690d\u6027\uff0c\u4e0d\u8981\u7528\u6570\u5b57\u5bf9\u5b57\u7b26\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c\u3002 \u679a\u4e3e\u578b:enum enum Week { Mon , Tue , Wed , Thu , Fri , Sta , Sun }; Week mon = Tue ; cout mon endl ; \u679a\u4e3e\u4e00\u91cf\u5b9a\u4e49\u4e0d\u80fd\u6539\u53d8\uff0c\u6240\u4ee5\u5e38\u7528\u6765\u4ee3\u66ff\u6574\u6570\u5e38\u91cf\uff0c\u4f5c\u7528\u66f4\u4f18\u7684\u662f\u5e38\u91cf\u9700\u8981\u521d\u59cb\u5316\uff0c\u800c\u679a\u4e3e\u662f\u4e00\u79cd\u7c7b\u578b\uff0c\u65e0\u987b\u5b9a\u4e49\u5176\u5b9e\u4f53\u3002 \u5e03\u5c14\u578b:bool :\u975e0\u4e3a\u771f \u8fd8\u6709:float,double,int[],double ,char* c-\u4e32 c-\u4e32 :\u4ecec\u8bed\u8a00\u4e2d\u5ef6\u7eed\u7684\u5b57\u7b26\u6570\u7ec4\uff0c\u4ee50\u7ed3\u5c3e\u3002\u5b57\u7b26\u957f\u5ea6\u8981\u52a01. const char str = Hello ; char str = Hello ; //\u5b57\u7b26\u4e32\u5e38\u91cf\u8d4b\u4e88char\u6307\u9488\u9519\u8befdeprecated conversion from string constant to \u2018char\u2019 char str = Hello ; //\u6307\u9488\u5730\u5740\u8d4b\u4e88char\u7c7b\u578b\u9519\u8befinvalid conversion from \u2018const char\u2019 to \u2018char\u2019 cout * str endl ; //Hello cout str endl ; //Hello cout str endl ; //Hello const char chars = s , chars1 = s ; cout ( chars == chars1 ) endl ; //true char is_char [] = s , is_char1 [] = s ; cout ( is_char == is_char1 ) endl ; //false string s = hello , s1 = hello ; cout ( s == s1 ) endl ; //true \u5728\u6bd4\u8f83\u540c\u4e2a\u5b57\u7b26\u76f8\u540c\u7684c-\u4e32\u662f\u7528==\u4f1a\u4e0d\u76f8\u7b49\uff0c\u56e0\u4e3a\u662f\u6307\u5411\u4e24\u4e2a\u4e0d\u540c\u4f4d\u7f6e\u7684\u6307\u9488\u3002\u800c\u5e94\u8be5\u7528strcmp string: string\u662f\u4e00\u79cd\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u64cd\u4f5c\u3002\u4e0d\u50cf\u5b57\u7b26\u6307\u9488\u4e00\u6837\u86cb\u75bc\u3002 string a , s1 = hello ; string s2 = 123 ; //\u6bd4\u8f83 cout ( a == s1 ) endl ; //false a = s1 ; cout ( a == s1 ) endl ; //true //\u8fde\u63a5 cout ( a + s2 ) endl ; //\u67e5\u627e cout ( a . find ( e )) endl \u6570\u7ec4: \u5b9a\u4e49\u683c\u5f0f: \u7c7b\u578b\u540d \u6570\u7ec4\u540d[\u5e38\u91cf\u8868\u8fbe\u5f0f] int arr1 [ 3 ] = { 1 }; int arr2 [ 3 ]; void arrays () { int arr3 [ 3 ] = { 1 }; int arr4 [ 3 ]; static int arr5 [ 3 ]; int i = 0 ; for ( i = 0 ; i 3 ; ++ i ) { cout arr1 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr2 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr3 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr4 [ i ] \\t ; } cout endl ; for ( i = 0 ; i 3 ; ++ i ) { cout arr5 [ i ] \\t ; } \u5168\u5c40\u6570\u7ec4\u548c\u9759\u6001\u6570\u7ec4\u672a\u521d\u59cb\u5316\uff0c\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u4e3a\u6e05\u96f6\uff0c\u5c40\u90e8\u6570\u7ec4\u672a\u521d\u59cb\u5316\u4f1a\u51fa\u73b0\u968f\u673a\u6570\u3002 vector\u5bb9\u5668 void vectors () { vector int ve ; for ( int i = 0 ; i 10 ; ++ i ) { ve . push_back ( i ); } vector int :: iterator p = ve . begin (); for (; p ve . end (); p ++ ) { cout * p ; } }","title":"\u4e09 \u6570\u636e\u7c7b\u578b"},{"location":"cplus/cplus2_class/","text":"c++ \u7b2c\u4e8c\u7ae0 \u9762\u5411\u5bf9\u8c61\u7f16\u7a0b \u4e00 \u7c7b \u7c7b\u540e\u9762\u8981\u52a0\u4e0a\u5206\u53f7 Student { private : int age ; int sex ; public : void setAge ( int age ); void printAge (); }; \u4e00\u822c\u4e3a\u4e86\u66f4\u597d\u7ec4\u7ec7\u4ee3\u7801\uff0c\u5728\u5934\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7c7b\u58f0\u660e\uff0c\u5728cpp\u4e2d\u5b9e\u73b0\u7c7b\u5b9a\u4e49 Student.h Student { private : int age ; int sex ; public : void setAge ( int age ); void printAge (); void friend friends ( Student amp ; a ); }; #include stdio.h #include stdafx.h void Student :: setAge ( int ages ){ age = ages ; } void Student :: printAge (){ printf ( %d , age ); } void friends ( Student amp ; stu ){ printf ( %d , stu . age ); } \u6784\u9020\u51fd\u6570\u548c\u6790\u6784\u51fd\u6570 \u6784\u9020\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c :\u7c7b\u540d(); \u6790\u6784\u51fd\u6570\u58f0\u660e : ~\u7c7b\u540d(); #ifndef _SCHOOL_BOY_H_ #define _SCHOOL_BOY_H_ #include Student.h SchoolBoy : public Student { public : void sayHi (); SchoolBoy (); ~ SchoolBoy (); }; #endif #include stdafx.h #include SchoolBoy.h #include iostream SchoolBoy :: SchoolBoy (){ printf ( %s \\n , init schoolboy ); } SchoolBoy ::~ SchoolBoy (){ std :: cout bye \\n ; } void SchoolBoy :: sayHi (){ printf ( %s \\n , hi ); } \u4e8c \u53cb\u5143 \u662f\u4e00\u79cd\u5b9a\u4e49\u5728\u7c7b\u5916\u90e8\u7684\u666e\u901a\u51fd\u6570\u6216\u7c7b\uff0c\u4f46\u5b83\u9700\u8981\u5728\u7c7b\u4f53\u5185\u8fdb\u884c\u8bf4\u660e\uff0c\u4e3a\u4e86\u4e0e\u8be5\u7c7b\u7684\u6210\u5458\u51fd\u6570\u52a0\u4ee5\u533a\u522b\uff0c\u5728\u8bf4\u660e\u65f6\u524d\u9762\u52a0\u4ee5\u5173\u952e\u5b57friend\u3002\u53cb\u5143\u4e0d\u662f\u6210\u5458\u51fd\u6570\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u8bbf\u95ee\u7c7b\u4e2d\u7684\u79c1\u6709\u6210\u5458\u3002\u53cb\u5143\u7684\u4f5c\u7528\u5728\u4e8e\u63d0\u9ad8\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\uff0c\u4f46\u662f\uff0c\u5b83\u7834\u574f\u4e86\u7c7b\u7684\u5c01\u88c5\u6027\u548c\u9690\u85cf\u6027\uff0c\u4f7f\u5f97\u975e\u6210\u5458\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u7c7b\u7684\u79c1\u6709\u6210\u5458 1. \u53cb\u5143\u51fd\u6570 \u8bed\u6cd5\u4e0e\u666e\u901a\u51fd\u6570\u76f8\u540c\uff0c\u8c03\u7528\u4e5f\u76f8\u540c\uff0c\u4e0e\u6210\u5458\u51fd\u6570\u4e0d\u540c\u7684\u662f\u5b83\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u7c7b,\u4f46\u5b83\u80fd\u591f\u5f15\u7528\u7c7b\u4e2d\u7684\u79c1\u6709\u6210\u5458\u3002\u5982 void friend friends(Student amp;a); \u8fd9\u4e2a\u53cb\u5143\u51fd\u6570\u53ef\u4ee5\u8bbf\u95eeStudent\u7684\u79c1\u6709\u6210\u5458age. 2. \u53cb\u5143\u7c7b \u53cb\u5143\u7c7b\u7684\u6240\u6709\u6210\u5458\u51fd\u6570\u90fd\u662f\u53e6\u4e00\u4e2a\u7c7b\u7684\u53cb\u5143\u51fd\u6570\uff0c\u90fd\u53ef\u4ee5\u8bbf\u95ee\u53e6\u4e00\u4e2a\u7c7b\u4e2d\u7684\u9690\u85cf\u4fe1\u606f\uff08\u5305\u62ec\u79c1\u6709\u6210\u5458\u548c\u4fdd\u62a4\u6210\u5458\uff09\u3002\u5f53\u5e0c\u671b\u4e00\u4e2a\u7c7b\u53ef\u4ee5\u5b58\u53d6\u53e6\u4e00\u4e2a\u7c7b\u7684\u79c1\u6709\u6210\u5458\u65f6\uff0c\u53ef\u4ee5\u5c06\u8be5\u7c7b\u58f0\u660e\u4e3a\u53e6\u4e00\u7c7b\u7684\u53cb\u5143\u7c7b\u3002\u5b9a\u4e49\u53cb\u5143\u7c7b\u7684\u8bed\u53e5\u683c\u5f0f\u5982\u4e0b\uff1a friend class \u7c7b\u540d; \u5176\u4e2d\uff1afriend\u548cclass\u662f\u5173\u952e\u5b57\uff0c\u7c7b\u540d\u5fc5\u987b\u662f\u7a0b\u5e8f\u4e2d\u7684\u4e00\u4e2a\u5df2\u5b9a\u4e49\u8fc7\u7684\u7c7b\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u8bed\u53e5\u8bf4\u660e\u7c7bB\u662f\u7c7bA\u7684\u53cb\u5143\u7c7b\uff1a class A { public : friend class B ; }; \u7ecf\u8fc7\u4ee5\u4e0a\u8bf4\u660e\u540e\uff0c\u7c7bB\u7684\u6240\u6709\u6210\u5458\u51fd\u6570\u90fd\u662f\u7c7bA\u7684\u53cb\u5143\u51fd\u6570\uff0c\u80fd\u5b58\u53d6\u7c7bA\u7684\u79c1\u6709\u6210\u5458\u548c\u4fdd\u62a4\u6210\u5458\u3002 3. \u4f7f\u7528\u53cb\u5143\u7c7b\u65f6\u6ce8\u610f\uff1a \u53cb\u5143\u5173\u7cfb\u4e0d\u80fd\u88ab\u7ee7\u627f\u3002 \u53cb\u5143\u5173\u7cfb\u662f\u5355\u5411\u7684\uff0c\u4e0d\u5177\u6709\u4ea4\u6362\u6027\u3002\u82e5\u7c7bB\u662f\u7c7bA\u7684\u53cb\u5143\uff0c\u7c7bA\u4e0d\u4e00\u5b9a\u662f\u7c7bB\u7684\u53cb\u5143\uff0c\u8981\u770b\u5728\u7c7b\u4e2d\u662f\u5426\u6709\u76f8\u5e94\u7684\u58f0\u660e\u3002 \u53cb\u5143\u5173\u7cfb\u4e0d\u5177\u6709\u4f20\u9012\u6027\u3002\u82e5\u7c7bB\u662f\u7c7bA\u7684\u53cb\u5143\uff0c\u7c7bC\u662fB\u7684\u53cb\u5143\uff0c\u7c7bC\u4e0d\u4e00\u5b9a\u662f\u7c7bA\u7684\u53cb\u5143\uff0c\u540c\u6837\u8981\u770b\u7c7b\u4e2d\u662f\u5426\u6709\u76f8\u5e94\u7684\u7533\u660e 4. \u6210\u5458\u8bbf\u95ee\u63a7\u5236\u7b26 public :\u65e0\u4efb\u4f55\u9650\u5236 private :\u53ea\u80fd\u88ab\u7c7b\u58f0\u660e\u4e2d\u7684\u6210\u5458\u51fd\u6570\u548c\u53cb\u5143\u8bbf\u95ee\u3002 protected :\u53ef\u4ee5\u88ab1.\u8be5\u7c7b\u4e2d\u7684\u51fd\u6570\u30012.\u5176\u53cb\u5143\u51fd\u6570\u8bbf\u95ee 3.\u5b50\u7c7b\u7684\u51fd\u6570\u3002\u4f46\u4e0d\u80fd\u88ab\u8be5\u7c7b\u7684\u5bf9\u8c61\u8bbf\u95ee. \u4e09 \u7ee7\u627f \u4f7f\u7528 : \u6765\u8868\u793a\u7ee7\u627f,\u591a\u91cd\u7ee7\u627f\u7528 , \u53f7\u6765\u9694\u5f00 #ifndef _SCHOOL_BOY_H_ #define _SCHOOL_BOY_H_ #include Student.h SchoolBoy : public Student { public : void sayHi (); }; #endif // _SCHOOL_BOY_H_ \u6d3e\u751f\u7c7b\u7ee7\u627f\u8bbf\u95ee\u6743\u9650 1.\u5982\u679c\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u65f6\u4f7f\u7528\u7684\u7ee7\u627f\u9650\u5b9a\u7b26\u662fpublic\uff0c\u90a3\u4e48 \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684public\u6210\u5458\uff0c\u5141\u8bb8\u7c7b\u4ee5\u5916\u7684\u4ee3\u7801\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458 \u7236\u7c7b\u7684private\u6210\u5458\u4ecd\u65e7\u662f\u7236\u7c7b\u7684private\u6210\u5458\uff0c\u5b50\u7c7b\u6210\u5458\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\uff1b \u7236\u7c7b\u7684protected\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684protected\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b 2.\u5982\u679c\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u65f6\u4f7f\u7528\u7684\u7ee7\u627f\u9650\u5b9a\u7b26\u662fprivate\uff0c\u90a3\u4e48 \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684private\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b \u7236\u7c7b\u7684private\u6210\u5458\u4ecd\u65e7\u662f\u7236\u7c7b\u7684private\u6210\u5458\uff0c\u5b50\u7c7b\u6210\u5458\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\uff1b \u7236\u7c7b\u7684protected\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684private\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b 3.\u5982\u679c\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u65f6\u4f7f\u7528\u7684\u7ee7\u627f\u9650\u5b9a\u7b26\u662fprotected\uff0c\u90a3\u4e48 \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684protected\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b \u7236\u7c7b\u7684private\u6210\u5458\u4ecd\u65e7\u662f\u7236\u7c7b\u7684private\u6210\u5458\uff0c\u5b50\u7c7b\u6210\u5458\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\uff1b \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684protected\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b","title":"\u7c7b"},{"location":"cplus/cplus2_class/#c","text":"","title":"c++ \u7b2c\u4e8c\u7ae0 \u9762\u5411\u5bf9\u8c61\u7f16\u7a0b"},{"location":"cplus/cplus2_class/#_1","text":"\u7c7b\u540e\u9762\u8981\u52a0\u4e0a\u5206\u53f7 Student { private : int age ; int sex ; public : void setAge ( int age ); void printAge (); }; \u4e00\u822c\u4e3a\u4e86\u66f4\u597d\u7ec4\u7ec7\u4ee3\u7801\uff0c\u5728\u5934\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7c7b\u58f0\u660e\uff0c\u5728cpp\u4e2d\u5b9e\u73b0\u7c7b\u5b9a\u4e49 Student.h Student { private : int age ; int sex ; public : void setAge ( int age ); void printAge (); void friend friends ( Student amp ; a ); }; #include stdio.h #include stdafx.h void Student :: setAge ( int ages ){ age = ages ; } void Student :: printAge (){ printf ( %d , age ); } void friends ( Student amp ; stu ){ printf ( %d , stu . age ); } \u6784\u9020\u51fd\u6570\u548c\u6790\u6784\u51fd\u6570 \u6784\u9020\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c :\u7c7b\u540d(); \u6790\u6784\u51fd\u6570\u58f0\u660e : ~\u7c7b\u540d(); #ifndef _SCHOOL_BOY_H_ #define _SCHOOL_BOY_H_ #include Student.h SchoolBoy : public Student { public : void sayHi (); SchoolBoy (); ~ SchoolBoy (); }; #endif #include stdafx.h #include SchoolBoy.h #include iostream SchoolBoy :: SchoolBoy (){ printf ( %s \\n , init schoolboy ); } SchoolBoy ::~ SchoolBoy (){ std :: cout bye \\n ; } void SchoolBoy :: sayHi (){ printf ( %s \\n , hi ); }","title":"\u4e00 \u7c7b"},{"location":"cplus/cplus2_class/#_2","text":"\u662f\u4e00\u79cd\u5b9a\u4e49\u5728\u7c7b\u5916\u90e8\u7684\u666e\u901a\u51fd\u6570\u6216\u7c7b\uff0c\u4f46\u5b83\u9700\u8981\u5728\u7c7b\u4f53\u5185\u8fdb\u884c\u8bf4\u660e\uff0c\u4e3a\u4e86\u4e0e\u8be5\u7c7b\u7684\u6210\u5458\u51fd\u6570\u52a0\u4ee5\u533a\u522b\uff0c\u5728\u8bf4\u660e\u65f6\u524d\u9762\u52a0\u4ee5\u5173\u952e\u5b57friend\u3002\u53cb\u5143\u4e0d\u662f\u6210\u5458\u51fd\u6570\uff0c\u4f46\u662f\u5b83\u53ef\u4ee5\u8bbf\u95ee\u7c7b\u4e2d\u7684\u79c1\u6709\u6210\u5458\u3002\u53cb\u5143\u7684\u4f5c\u7528\u5728\u4e8e\u63d0\u9ad8\u7a0b\u5e8f\u7684\u8fd0\u884c\u6548\u7387\uff0c\u4f46\u662f\uff0c\u5b83\u7834\u574f\u4e86\u7c7b\u7684\u5c01\u88c5\u6027\u548c\u9690\u85cf\u6027\uff0c\u4f7f\u5f97\u975e\u6210\u5458\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u7c7b\u7684\u79c1\u6709\u6210\u5458 1. \u53cb\u5143\u51fd\u6570 \u8bed\u6cd5\u4e0e\u666e\u901a\u51fd\u6570\u76f8\u540c\uff0c\u8c03\u7528\u4e5f\u76f8\u540c\uff0c\u4e0e\u6210\u5458\u51fd\u6570\u4e0d\u540c\u7684\u662f\u5b83\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u7c7b,\u4f46\u5b83\u80fd\u591f\u5f15\u7528\u7c7b\u4e2d\u7684\u79c1\u6709\u6210\u5458\u3002\u5982 void friend friends(Student amp;a); \u8fd9\u4e2a\u53cb\u5143\u51fd\u6570\u53ef\u4ee5\u8bbf\u95eeStudent\u7684\u79c1\u6709\u6210\u5458age. 2. \u53cb\u5143\u7c7b \u53cb\u5143\u7c7b\u7684\u6240\u6709\u6210\u5458\u51fd\u6570\u90fd\u662f\u53e6\u4e00\u4e2a\u7c7b\u7684\u53cb\u5143\u51fd\u6570\uff0c\u90fd\u53ef\u4ee5\u8bbf\u95ee\u53e6\u4e00\u4e2a\u7c7b\u4e2d\u7684\u9690\u85cf\u4fe1\u606f\uff08\u5305\u62ec\u79c1\u6709\u6210\u5458\u548c\u4fdd\u62a4\u6210\u5458\uff09\u3002\u5f53\u5e0c\u671b\u4e00\u4e2a\u7c7b\u53ef\u4ee5\u5b58\u53d6\u53e6\u4e00\u4e2a\u7c7b\u7684\u79c1\u6709\u6210\u5458\u65f6\uff0c\u53ef\u4ee5\u5c06\u8be5\u7c7b\u58f0\u660e\u4e3a\u53e6\u4e00\u7c7b\u7684\u53cb\u5143\u7c7b\u3002\u5b9a\u4e49\u53cb\u5143\u7c7b\u7684\u8bed\u53e5\u683c\u5f0f\u5982\u4e0b\uff1a friend class \u7c7b\u540d; \u5176\u4e2d\uff1afriend\u548cclass\u662f\u5173\u952e\u5b57\uff0c\u7c7b\u540d\u5fc5\u987b\u662f\u7a0b\u5e8f\u4e2d\u7684\u4e00\u4e2a\u5df2\u5b9a\u4e49\u8fc7\u7684\u7c7b\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u8bed\u53e5\u8bf4\u660e\u7c7bB\u662f\u7c7bA\u7684\u53cb\u5143\u7c7b\uff1a class A { public : friend class B ; }; \u7ecf\u8fc7\u4ee5\u4e0a\u8bf4\u660e\u540e\uff0c\u7c7bB\u7684\u6240\u6709\u6210\u5458\u51fd\u6570\u90fd\u662f\u7c7bA\u7684\u53cb\u5143\u51fd\u6570\uff0c\u80fd\u5b58\u53d6\u7c7bA\u7684\u79c1\u6709\u6210\u5458\u548c\u4fdd\u62a4\u6210\u5458\u3002 3. \u4f7f\u7528\u53cb\u5143\u7c7b\u65f6\u6ce8\u610f\uff1a \u53cb\u5143\u5173\u7cfb\u4e0d\u80fd\u88ab\u7ee7\u627f\u3002 \u53cb\u5143\u5173\u7cfb\u662f\u5355\u5411\u7684\uff0c\u4e0d\u5177\u6709\u4ea4\u6362\u6027\u3002\u82e5\u7c7bB\u662f\u7c7bA\u7684\u53cb\u5143\uff0c\u7c7bA\u4e0d\u4e00\u5b9a\u662f\u7c7bB\u7684\u53cb\u5143\uff0c\u8981\u770b\u5728\u7c7b\u4e2d\u662f\u5426\u6709\u76f8\u5e94\u7684\u58f0\u660e\u3002 \u53cb\u5143\u5173\u7cfb\u4e0d\u5177\u6709\u4f20\u9012\u6027\u3002\u82e5\u7c7bB\u662f\u7c7bA\u7684\u53cb\u5143\uff0c\u7c7bC\u662fB\u7684\u53cb\u5143\uff0c\u7c7bC\u4e0d\u4e00\u5b9a\u662f\u7c7bA\u7684\u53cb\u5143\uff0c\u540c\u6837\u8981\u770b\u7c7b\u4e2d\u662f\u5426\u6709\u76f8\u5e94\u7684\u7533\u660e 4. \u6210\u5458\u8bbf\u95ee\u63a7\u5236\u7b26 public :\u65e0\u4efb\u4f55\u9650\u5236 private :\u53ea\u80fd\u88ab\u7c7b\u58f0\u660e\u4e2d\u7684\u6210\u5458\u51fd\u6570\u548c\u53cb\u5143\u8bbf\u95ee\u3002 protected :\u53ef\u4ee5\u88ab1.\u8be5\u7c7b\u4e2d\u7684\u51fd\u6570\u30012.\u5176\u53cb\u5143\u51fd\u6570\u8bbf\u95ee 3.\u5b50\u7c7b\u7684\u51fd\u6570\u3002\u4f46\u4e0d\u80fd\u88ab\u8be5\u7c7b\u7684\u5bf9\u8c61\u8bbf\u95ee.","title":"\u4e8c \u53cb\u5143"},{"location":"cplus/cplus2_class/#_3","text":"\u4f7f\u7528 : \u6765\u8868\u793a\u7ee7\u627f,\u591a\u91cd\u7ee7\u627f\u7528 , \u53f7\u6765\u9694\u5f00 #ifndef _SCHOOL_BOY_H_ #define _SCHOOL_BOY_H_ #include Student.h SchoolBoy : public Student { public : void sayHi (); }; #endif // _SCHOOL_BOY_H_","title":"\u4e09 \u7ee7\u627f"},{"location":"cplus/cplus2_class/#_4","text":"1.\u5982\u679c\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u65f6\u4f7f\u7528\u7684\u7ee7\u627f\u9650\u5b9a\u7b26\u662fpublic\uff0c\u90a3\u4e48 \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684public\u6210\u5458\uff0c\u5141\u8bb8\u7c7b\u4ee5\u5916\u7684\u4ee3\u7801\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458 \u7236\u7c7b\u7684private\u6210\u5458\u4ecd\u65e7\u662f\u7236\u7c7b\u7684private\u6210\u5458\uff0c\u5b50\u7c7b\u6210\u5458\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\uff1b \u7236\u7c7b\u7684protected\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684protected\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b 2.\u5982\u679c\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u65f6\u4f7f\u7528\u7684\u7ee7\u627f\u9650\u5b9a\u7b26\u662fprivate\uff0c\u90a3\u4e48 \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684private\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b \u7236\u7c7b\u7684private\u6210\u5458\u4ecd\u65e7\u662f\u7236\u7c7b\u7684private\u6210\u5458\uff0c\u5b50\u7c7b\u6210\u5458\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\uff1b \u7236\u7c7b\u7684protected\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684private\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b 3.\u5982\u679c\u5b50\u7c7b\u4ece\u7236\u7c7b\u7ee7\u627f\u65f6\u4f7f\u7528\u7684\u7ee7\u627f\u9650\u5b9a\u7b26\u662fprotected\uff0c\u90a3\u4e48 \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684protected\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b \u7236\u7c7b\u7684private\u6210\u5458\u4ecd\u65e7\u662f\u7236\u7c7b\u7684private\u6210\u5458\uff0c\u5b50\u7c7b\u6210\u5458\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\uff1b \u7236\u7c7b\u7684public\u6210\u5458\u6210\u4e3a\u5b50\u7c7b\u7684protected\u6210\u5458\uff0c\u53ea\u5141\u8bb8\u5b50\u7c7b\u6210\u5458\u8bbf\u95ee\uff1b","title":"\u6d3e\u751f\u7c7b\u7ee7\u627f\u8bbf\u95ee\u6743\u9650"},{"location":"cplus/cplus3_memory/","text":"C++ \u7b2c\u4e09\u7ae0 \u5185\u5b58\u5206\u914d\u65b9\u5f0f\u53ca\u6307\u9488 \u4e00 c++\u5185\u5b58\u5206\u914d\u65b9\u5f0f \u5728c++\u4e2d\uff0c\u5185\u5b58\u5206\u914d\u4e3a5\u4e2a\u533a,\u5206\u522b\u4e3a\u6808,\u5806,\u81ea\u7531\u5b58\u50a8\u533a,\u9759\u6001\u6570\u636e\u533a,\u5e38\u91cf\u5b58\u50a8\u533a. \u6808 \uff0c\u5b58\u50a8\u5355\u5143\u81ea\u52a8\u88ab\u91ca\u653e,\u91cc\u9762\u7684\u53d8\u91cf\u901a\u5e38\u662f\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u53c2\u6570\u7b49\u3002 \u5806 \uff0c\u5c31\u662f\u90a3\u4e9b\u7531 new \u5206\u914d\u7684\u5185\u5b58\u5757\uff0c\u4ed6\u4eec\u7684\u91ca\u653e\u7f16\u8bd1\u5668\u4e0d\u53bb\u7ba1\uff0c\u7531\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u53bb\u63a7\u5236\uff0c\u4e00\u822c\u4e00\u4e2a new \u5c31\u8981\u5bf9\u5e94\u4e00\u4e2a delete \u3002\u5982\u679c\u7a0b\u5e8f\u5458\u6ca1\u6709\u91ca\u653e\u6389\uff0c\u90a3\u4e48\u5728\u7a0b\u5e8f\u7ed3\u675f\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u56de\u6536\u3002\u5806\u53ef\u4ee5\u52a8\u6001\u5730\u6269\u5c55\u548c\u6536\u7f29\u3002 \u81ea\u7531\u5b58\u50a8\u533a \uff0c\u5c31\u662f\u90a3\u4e9b\u7531 malloc \u7b49\u5206\u914d\u7684\u5185\u5b58\u5757\uff0c\u4ed6\u548c\u5806\u662f\u5341\u5206\u76f8\u4f3c\u7684\uff0c\u4e0d\u8fc7\u5b83\u662f\u7528 free \u6765\u7ed3\u675f\u81ea\u5df1\u7684\u751f\u547d\u7684 \u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a \uff0c\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u88ab\u5206\u914d\u5230\u540c\u4e00\u5757\u5185\u5b58\u4e2d\uff0c\u5728\u4ee5\u524d\u7684 C \u8bed\u8a00\u4e2d\uff0c\u5168\u5c40\u53d8\u91cf\u53c8\u5206\u4e3a\u521d\u59cb\u5316\u7684\u548c\u672a\u521d\u59cb\u5316\u7684\uff08\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u5728\u4e00\u5757\u533a\u57df\uff0c\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u4e0e\u9759\u6001\u53d8\u91cf\u5728\u76f8\u90bb\u7684\u53e6\u4e00\u5757\u533a\u57df\uff0c\u540c\u65f6\u672a\u88ab\u521d\u59cb\u5316\u7684\u5bf9\u8c61\u5b58\u50a8\u533a\u53ef\u4ee5\u901a\u8fc7 void* \u6765\u8bbf\u95ee\u548c\u64cd\u7eb5\uff0c\u7a0b\u5e8f\u7ed3\u675f\u540e\u7531\u7cfb\u7edf\u81ea\u884c\u91ca\u653e\uff09\uff0c\u5728 C++ \u91cc\u9762\u6ca1\u6709\u8fd9\u4e2a\u533a\u5206\u4e86\uff0c\u4ed6\u4eec\u5171\u540c\u5360\u7528\u540c\u4e00\u5757\u5185\u5b58\u533a\u3002 \u5e38\u91cf\u5b58\u50a8\u533a \uff0c\u8fd9\u662f\u4e00\u5757\u6bd4\u8f83\u7279\u6b8a\u7684\u5b58\u50a8\u533a\uff0c\u4ed6\u4eec\u91cc\u9762\u5b58\u653e\u7684\u662f\u5e38\u91cf\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\uff08\u5f53\u7136\uff0c\u4f60\u8981\u901a\u8fc7\u975e\u6b63\u5f53\u624b\u6bb5\u4e5f\u53ef\u4ee5\u4fee\u6539\uff0c\u800c\u4e14\u65b9\u6cd5\u5f88\u591a\uff09 \u4e8c \u5806\u548c\u6808\u7a76\u7adf\u6709\u4ec0\u4e48\u533a\u522b\uff1f \u4e3b\u8981\u7684\u533a\u522b\u7531\u4ee5\u4e0b\u51e0\u70b9: \u7ba1\u7406\u65b9\u5f0f\u4e0d\u540c \u7a7a\u95f4\u5927\u5c0f\u4e0d\u540c \u80fd\u5426\u4ea7\u751f\u788e\u7247\u4e0d\u540c \u751f\u957f\u65b9\u5411\u4e0d\u540c \u5206\u914d\u65b9\u5f0f\u4e0d\u540c \u5206\u914d\u6548\u7387\u4e0d\u540c \u7ba1\u7406\u65b9\u5f0f \uff1a \u5bf9\u4e8e\u6808\u6765\u8bb2\uff0c\u662f\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u7ba1\u7406\uff0c\u65e0\u9700\u6211\u4eec\u624b\u5de5\u63a7\u5236\uff1b\u5bf9\u4e8e\u5806\u6765\u8bf4\uff0c\u91ca\u653e\u5de5\u4f5c\u7531\u7a0b\u5e8f\u5458\u63a7\u5236\uff0c\u5bb9\u6613\u4ea7\u751f\u5185\u5b58\u6cc4\u9732. \u7a7a\u95f4\u5927\u5c0f \uff1a\u5806\u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\u57fa\u672c\u65e0\u9650\u5236\uff0c\u6808\u7684\u7533\u8bf7\u5185\u5b58\u57281M\u5de6\u53f3 \u788e\u7247\u95ee\u9898 \uff1a\u5806\u4e0a\u7684\u5185\u5b58\u5206\u914d\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u6bcf\u6b21 new \u548c delete \u4f1a\u5bfc\u81f4\u7a7a\u95f4\u7684\u4e0d\u8fde\u7eed\uff0c\u800c\u6808\u7ed3\u6784\u662f\u5148\u8fdb\u540e\u51fa\u4e0d\u4f1a\u6709\u8fd9\u79cd\u7ed3\u679c\u3002 \u751f\u957f\u65b9\u5411 \uff1a\u5bf9\u4e8e\u5806\u6765\u8bb2\uff0c\u751f\u957f\u65b9\u5411\u662f\u5411\u4e0a\u7684\uff0c\u4e5f\u5c31\u662f\u5411\u7740\u5185\u5b58\u5730\u5740\u589e\u52a0\u7684\u65b9\u5411\uff1b\u5bf9\u4e8e\u6808\u6765\u8bb2\uff0c\u5b83\u7684\u751f\u957f\u65b9\u5411\u662f\u5411\u4e0b\u7684\uff0c\u662f\u5411\u7740\u5185\u5b58\u5730\u5740\u51cf\u5c0f\u7684\u65b9\u5411\u589e\u957f\u3002 \u5206\u914d\u65b9\u5f0f \uff1a\u5806\u90fd\u662f\u52a8\u6001\u5206\u914d\u7684\uff0c\u6ca1\u6709\u9759\u6001\u5206\u914d\u7684\u5806\u3002\u6808\u67092\u79cd\u5206\u914d\u65b9\u5f0f\uff1a\u9759\u6001\u5206\u914d\u548c\u52a8\u6001\u5206\u914d\u3002\u9759\u6001\u5206\u914d\u662f\u7f16\u8bd1\u5668\u5b8c\u6210\u7684\uff0c\u6bd4\u5982\u5c40\u90e8\u53d8\u91cf\u7684\u5206\u914d\u3002\u52a8\u6001\u5206\u914d\u7531 malloc \u51fd\u6570\u8fdb\u884c\u5206\u914d\uff0c\u4f46\u662f\u6808\u7684\u52a8\u6001\u5206\u914d\u548c\u5806\u662f\u4e0d\u540c\u7684\uff0c\u4ed6\u7684\u52a8\u6001\u5206\u914d\u662f\u7531\u7f16\u8bd1\u5668\u8fdb\u884c\u91ca\u653e\uff0c\u65e0\u9700\u6211\u4eec\u624b\u5de5\u5b9e\u73b0\u3002 \u5206\u914d\u6548\u7387 \uff1a\u6808\u662f\u673a\u5668\u7cfb\u7edf\u63d0\u4f9b\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8ba1\u7b97\u673a\u4f1a\u5728\u5e95\u5c42\u5bf9\u6808\u63d0\u4f9b\u652f\u6301\uff1a\u5206\u914d\u4e13\u95e8\u7684\u5bc4\u5b58\u5668\u5b58\u653e\u6808\u7684\u5730\u5740\uff0c\u538b\u6808\u51fa\u6808\u90fd\u6709\u4e13\u95e8\u7684\u6307\u4ee4\u6267\u884c\uff0c\u8fd9\u5c31\u51b3\u5b9a\u4e86\u6808\u7684\u6548\u7387\u6bd4\u8f83\u9ad8\u3002\u5806\u5219\u662f C/C++ \u51fd\u6570\u5e93\u63d0\u4f9b\u7684\uff0c\u5b83\u7684\u673a\u5236\u662f\u5f88\u590d\u6742\u7684\uff0c\u4f8b\u5982\u4e3a\u4e86\u5206\u914d\u4e00\u5757\u5185\u5b58\uff0c\u5e93\u51fd\u6570\u4f1a\u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\uff08\u5177\u4f53\u7684\u7b97\u6cd5\u53ef\u4ee5\u53c2\u8003\u6570\u636e\u7ed3\u6784/\u64cd\u4f5c\u7cfb\u7edf\uff09\u5728\u5806\u5185\u5b58\u4e2d\u641c\u7d22\u53ef\u7528\u7684\u8db3\u591f\u5927\u5c0f\u7684\u7a7a\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u8db3\u591f\u5927\u5c0f\u7684\u7a7a\u95f4\uff08\u53ef\u80fd\u662f\u7531\u4e8e\u5185\u5b58\u788e\u7247\u592a\u591a\uff09\uff0c\u5c31\u6709\u53ef\u80fd\u8c03\u7528\u7cfb\u7edf\u529f\u80fd\u53bb\u589e\u52a0\u7a0b\u5e8f\u6570\u636e\u6bb5\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u8fd9\u6837\u5c31\u6709\u673a\u4f1a\u5206\u5230\u8db3\u591f\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u7136\u540e\u8fdb\u884c\u8fd4\u56de\u3002\u663e\u7136\uff0c\u5806\u7684\u6548\u7387\u6bd4\u6808\u8981\u4f4e\u5f97\u591a\u3002 \u4e09 \u6307\u9488 \u5f15\u7528 \u503c \u5b9a\u4e49 \u6307\u9488\u5b9a\u4e49: int * p; \u5b9a\u4e49\u53d8\u91cf: int p; \u5b9a\u4e49\u5f15\u7528: int p = p ; int a = 6 ; int b ; //\u6307\u9488 b = a ; //\u5730\u5740\u4f20\u9012 cout a endl ; //\u5730\u57400034FBBC cout a endl ; //\u503c 6 cout b endl ; //\u5730\u57400034FBBC cout b endl ; //\u503c 6 cout ( b == a ) endl ; //true \u5730\u5740\u76f8\u540c b = 7 ; //\u66f4\u6539\u6307\u9488\u6307\u5411\u7684\u7a7a\u95f4\u7684\u503c cout a endl ; //\u503c 7 cout b endl ; //\u503c 7 int c = a ; //\u5b9a\u4e49\u5f15\u7528 cout c endl ; //\u503c7 cout c endl ; //\u5730\u57400034FBBC int d = 0 ; b = d ; cout * b endl ; //\u503c0 cout b endl ; //\u5730\u57400038FBC0 \u5f15\u7528\u4e0e\u6307\u9488\u533a\u522b \u5f15\u7528\u5fc5\u987b\u5728\u5b9a\u4e49\u65f6\u521d\u59cb\u5316\uff0c\u6307\u9488\u53ef\u4ee5\u5148\u58f0\u660e\u540e\u521d\u59cb\u5316\u3002 \u5f15\u7528\u4e0d\u80fd\u6709NULL\u5f15\u7528\uff0c\u6307\u9488\u53ef\u4ee5\u4e3aNULL \u5f15\u7528\u4e00\u5b9a\u521d\u59cb\u5316\u4e0d\u80fd\u518d\u6307\u5411\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u6307\u9488\u53ef\u4ee5\u6539\u53d8\u6240\u6307\u5bf9\u8c61\u3002 \u5f15\u7528\u4e0d\u5360\u5185\u5b58\uff0c\u53ea\u662f\u53d8\u91cf\u7684\u4e00\u4e2a\u522b\u540d\uff0c\u6307\u9488\u4f1a\u5728\u6808\u533a\u5f00\u8f9f\u4e00\u4e2a4byte\u7684\u5185\u5b58\u533a\u3002 \u56fe\u793a\u6307\u9488\u5185\u5b58\u5206\u5e03: c++ \u4f20\u503c\uff0c\u4f20\u5740\uff0c\u4f20\u5f15\u7528 void swap ( int a , int b ); void swap2 ( int amp ; x , int amp ; y ); void swap3 ( int * a , int * b ); int _tmain ( int argc , _TCHAR * argv []) { int a = 1 , b = 2 ; swap ( a , b ); //\u4f20\u503c ,\u53c2\u6570\u4e3a\u503c\u62f7\u8d1d,\u5916\u90e8\u53d8\u91cf\u4e0d\u4f1a\u6539\u53d8\u503c cout a endl ; //1 cout b endl ; //2 int amp ; m = a ; int amp ; n = b ; swap2 ( m , n ); //\u4f20\u5f15\u7528,\u503c\u6539\u53d8 cout a endl ; //2 cout b endl ; //1 int * k = amp ; a ; int * j = amp ; b ; swap3 ( k , j ); //\u4f20\u6307\u9488,\u503c\u6539\u53d8 cout a endl ; //1 cout b endl ; //2 return 0 ; } void swap ( int a , int b ){ int temp = a ; a = b ; b = a ; } void swap2 ( int amp ; x , int amp ; y ) { int temp ; temp = x ; x = y ; y = temp ; } void swap3 ( int * a , int * b ){ int temp = * a ; * a = * b ; * b = temp ; } java\u7684\u4f20\u503c\uff0c\u4f20\u5f15\u7528 public class Test { /** * @param ss */ public static void main ( String [] ss ) { int a = 1 ; int b = 2 ; change ( a , b ); System . out . println ( a ); //1 System . out . println ( b ); //2 String m = new String ( m ); String n = new String ( n ); change2 ( m , n ); System . out . println ( m ); //m System . out . println ( n ); //n } private static void change2 ( String pa1 , String pa2 ) { String temp = pa1 ; pa1 = pa2 ; pa2 = temp ; } private static void change ( int a , int b ) { int temp = a ; a = b ; b = temp ; } } java\u7684\u4f20\u503c\u4f20\u5f15\u7528\u90fd\u4e0d\u4f1a\u6539\u53d8,\u4ea4\u6362\u4e24\u4e2a\u5f15\u7528\u53c2\u6570\u4e0d\u53d8\u539f\u56e0\u5982\u4e0b: m,n\u4e3a\u5916\u90e8\u53d8\u91cfnew\u4e4b\u540e\u5728\u5806\u533a\u4ea7\u751f\u4e24\u4e2a\u5185\u5b58\u533a\u3002chang2\u65b9\u6cd5\u6240\u505a\u7684\u662f\u590d\u5236\u5f15\u7528\uff0c\u5c06\u590d\u5236\u7684\u5f15\u7528\u6307\u5411\u5bf9\u8c61\u6539\u53d8\u4e86\uff0c\u5916\u90e8\u53d8\u91cfm,n\u5374\u6ca1\u6709\u53d1\u751f\u6307\u5411\u6539\u53d8. \u56db c++\u5e38\u89c1\u5185\u5b58\u9519\u8bef \u5185\u5b58\u5206\u914d\u672a\u6210\u529f\uff0c\u5374\u4f7f\u7528\u4e86\u5b83 ,\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u5185\u5b58\u4e4b\u524d\u662f\u68c0\u6d4b\u4e00\u4e0b\u6307\u9488\u662f\u5426\u4e3aNULL t = ( struct btree * ) malloc ( sizeof ( struct btree )); if ( t == NULL ) { printf ( \u5185\u5b58\u5206\u914d\u5931\u8d25! \\n ); exit ( EXIT_FAILURE ); } \u6ca1\u6709\u521d\u59cb\u5316\u7684\u6982\u5ff5 \u8bef\u8ba4\u4e3a\u5185\u5b58\u7684\u7f3a\u7701\u521d\u503c\u5168\u4e3a0,\u5bfc\u81f4\u5f15\u7528\u521d\u503c\u9519\u8bef ,java\u7684\u4f1a\u57fa\u672c\u6570\u636e\u7c7b\u578b\u6210\u5458\u53d1\u751f\u4f1a\u521d\u59cb\u5316\u5bf9\u5e94\u7684\u503c\u3002 \u5fd8\u8bb0\u91ca\u653e\u5185\u5b58\uff0c\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f \u542b\u6709\u8fd9\u79cd\u9519\u8bef\u7684\u51fd\u6570\u6bcf\u88ab\u8c03\u7528\u4e00\u6b21\u5c31\u4e22\u5931\u4e00\u5757\u5185\u5b58\u3002\u521a\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u5185\u5b58\u5145\u8db3\uff0c\u4f60\u770b\u4e0d\u5230\u9519\u8bef\u3002\u7ec8\u6709\u4e00\u6b21\u7a0b\u5e8f\u7a81\u7136\u6b7b\u6389\uff0c\u7cfb\u7edf\u51fa\u73b0\u63d0\u793a:\u5185\u5b58\u8017\u5c3d \u52a8\u6001\u5185\u5b58\u7684\u7533\u8bf7\u4e0e\u91ca\u653e\u5fc5\u987b\u914d\u5bf9\uff0c\u7a0b\u5e8f\u4e2dmalloc\u548cfree\u7684\u4f7f\u7528\u6b21\u6570\u4e00\u5b9a\u8981\u76f8\u540c\uff0c\u5426\u5219\u80af\u5b9a\u6709\u9519\u8bef \u91ca\u653e\u4e86\u5185\u5b58\u5374\u7ee7\u7eed\u4f7f\u7528\u5b83 \u7a0b\u5e8f\u4e2d\u7684\u5bf9\u8c61\u8c03\u7528\u5173\u7cfb\u8fc7\u4e8e\u590d\u6742\uff0c\u5b9e\u5728\u96be\u4ee5\u641e\u6e05\u695a\u67d0\u4e2a\u5bf9\u8c61\u7a76\u7adf\u662f\u5426\u5df2\u7ecf\u91ca\u653e\u4e86\u5185\u5b58\uff0c\u6b64\u65f6\u5e94\u8be5\u91cd\u65b0\u8bbe\u8ba1\u6570\u636e\u7ed3\u6784\uff0c\u4ece\u6839\u672c\u4e0a\u89e3\u51b3\u5bf9\u8c61\u7ba1\u7406\u7684\u6df7\u4e71\u5c40\u9762 \u51fd\u6570\u7684reture\u8bed\u53e5\u5199\u9519\u4e86\uff0c\u6ce8\u610f\u4e0d\u8981\u8fd4\u56de\u6307\u5411\"\u6808\u5185\u5b58\"\u7684\u201c\u6307\u9488\u201d\u6216\u8005\u201c\u5f15\u7528\u201d\uff0c\u56e0\u4e3a\u8be5\u5185\u5b58\u5728\u51fd\u6570\u4f53\u7ed3\u675f\u65f6\u88ab\u81ea\u52a8\u9500\u6bc1 // ConsoleApplication2.cpp : \u5b9a\u4e49\u63a7\u5236\u53f0\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002 // #include stdafx.h #include vld.h #include Student.h #include iostream using namespace std ; Student * func3 (); int _tmain ( int argc , _TCHAR * argv []) { Student * dss = func3 (); cout ( dss == NULL ) endl ; delete dss ; //\u6307\u9488ptr\u6307\u5411\u4e86\u4e00\u4e2a\u53ef\u80fd\u5df2\u7ecf\u65e0\u6548\u7684\u5730\u5740\uff0c\u5371\u9669 return 0 ; } Student * func3 () { Student my ; //\u5bf9\u8c61my\u5b58\u653e\u5728\u685f\u4e0a\uff0c\u9000\u51fa\u51fd\u6570\u4f53\u4ee5\u540e\u6539\u5730\u5740\u5c31\u53ef\u80fd\u65e0\u6548\u4e86\u3002 Student* ptr = amp;my; //\u6307\u9488ptr\u6307\u5411\u4e86\u4e00\u4e2a\u53ef\u80fd\u5df2\u7ecf\u65e0\u6548\u7684\u5730\u5740\uff0c\u5371\u9669\u3002 //cout ptr endl; return ptr ; } \u4f7f\u7528 free \u6216 delete \u91ca\u653e\u4e86\u5185\u5b58\u540e\uff0c\u6ca1\u6709\u5c06\u6307\u9488\u8bbe\u7f6e\u4e3aNULL\u3002\u5bfc\u81f4\u4ea7\u751f\u201c\u91ce\u6307\u9488\u201d \u89c4\u5219 \u7528 malloc \u6216 new \u7533\u8bf7\u5185\u5b58\u4e4b\u540e\uff0c\u5e94\u8be5\u7acb\u5373\u68c0\u67e5\u6307\u9488\u662f\u5426\u4e3aNULL\u3002\u9632\u6b62\u4f7f\u7528\u6307\u9488\u4e3aNULL\u7684\u5185\u5b58 \u4e0d\u8981\u5fd8\u8bb0\u4e3a\u6570\u7ec4\u548c\u52a8\u6001\u5185\u5b58\u8d4b\u521d\u503c\u3002\u9632\u6b62\u5c06\u672a\u88ab\u521d\u59cb\u5316\u7684\u5185\u5b58\u4f5c\u4e3a\u53f3\u503c\u4f7f\u7528 \u907f\u514d\u6570\u7ec4\u6216\u8005\u6307\u9488\u7684\u4e0b\u6807\u8d8a\u754c\uff0c\u7279\u522b\u8981\u5f53\u5fc3\u53d1\u751f\u201c\u591a1\u201d\u6216\u8005\u201c\u5c111\u201d\u7684\u64cd\u4f5c \u52a8\u6001\u5185\u5b58\u7684\u7533\u8bf7\u4e0e\u91ca\u653e\u5fc5\u987b\u914d\u5bf9\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f \u7528 free \u6216 delete \u91ca\u653e\u5185\u5b58\u4e4b\u540e\uff0c\u7acb\u5373\u5c06\u6307\u9488\u8bbe\u7f6e\u4e3aNULL\uff0c\u9632\u6b62\u4ea7\u751f\u201c\u91ce\u6307\u9488\u201d","title":"\u5185\u5b58\u5206\u914d"},{"location":"cplus/cplus3_memory/#c","text":"","title":"C++ \u7b2c\u4e09\u7ae0 \u5185\u5b58\u5206\u914d\u65b9\u5f0f\u53ca\u6307\u9488"},{"location":"cplus/cplus3_memory/#c_1","text":"\u5728c++\u4e2d\uff0c\u5185\u5b58\u5206\u914d\u4e3a5\u4e2a\u533a,\u5206\u522b\u4e3a\u6808,\u5806,\u81ea\u7531\u5b58\u50a8\u533a,\u9759\u6001\u6570\u636e\u533a,\u5e38\u91cf\u5b58\u50a8\u533a. \u6808 \uff0c\u5b58\u50a8\u5355\u5143\u81ea\u52a8\u88ab\u91ca\u653e,\u91cc\u9762\u7684\u53d8\u91cf\u901a\u5e38\u662f\u5c40\u90e8\u53d8\u91cf\u3001\u51fd\u6570\u53c2\u6570\u7b49\u3002 \u5806 \uff0c\u5c31\u662f\u90a3\u4e9b\u7531 new \u5206\u914d\u7684\u5185\u5b58\u5757\uff0c\u4ed6\u4eec\u7684\u91ca\u653e\u7f16\u8bd1\u5668\u4e0d\u53bb\u7ba1\uff0c\u7531\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u53bb\u63a7\u5236\uff0c\u4e00\u822c\u4e00\u4e2a new \u5c31\u8981\u5bf9\u5e94\u4e00\u4e2a delete \u3002\u5982\u679c\u7a0b\u5e8f\u5458\u6ca1\u6709\u91ca\u653e\u6389\uff0c\u90a3\u4e48\u5728\u7a0b\u5e8f\u7ed3\u675f\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u56de\u6536\u3002\u5806\u53ef\u4ee5\u52a8\u6001\u5730\u6269\u5c55\u548c\u6536\u7f29\u3002 \u81ea\u7531\u5b58\u50a8\u533a \uff0c\u5c31\u662f\u90a3\u4e9b\u7531 malloc \u7b49\u5206\u914d\u7684\u5185\u5b58\u5757\uff0c\u4ed6\u548c\u5806\u662f\u5341\u5206\u76f8\u4f3c\u7684\uff0c\u4e0d\u8fc7\u5b83\u662f\u7528 free \u6765\u7ed3\u675f\u81ea\u5df1\u7684\u751f\u547d\u7684 \u5168\u5c40/\u9759\u6001\u5b58\u50a8\u533a \uff0c\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u88ab\u5206\u914d\u5230\u540c\u4e00\u5757\u5185\u5b58\u4e2d\uff0c\u5728\u4ee5\u524d\u7684 C \u8bed\u8a00\u4e2d\uff0c\u5168\u5c40\u53d8\u91cf\u53c8\u5206\u4e3a\u521d\u59cb\u5316\u7684\u548c\u672a\u521d\u59cb\u5316\u7684\uff08\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf\u5728\u4e00\u5757\u533a\u57df\uff0c\u672a\u521d\u59cb\u5316\u7684\u5168\u5c40\u53d8\u91cf\u4e0e\u9759\u6001\u53d8\u91cf\u5728\u76f8\u90bb\u7684\u53e6\u4e00\u5757\u533a\u57df\uff0c\u540c\u65f6\u672a\u88ab\u521d\u59cb\u5316\u7684\u5bf9\u8c61\u5b58\u50a8\u533a\u53ef\u4ee5\u901a\u8fc7 void* \u6765\u8bbf\u95ee\u548c\u64cd\u7eb5\uff0c\u7a0b\u5e8f\u7ed3\u675f\u540e\u7531\u7cfb\u7edf\u81ea\u884c\u91ca\u653e\uff09\uff0c\u5728 C++ \u91cc\u9762\u6ca1\u6709\u8fd9\u4e2a\u533a\u5206\u4e86\uff0c\u4ed6\u4eec\u5171\u540c\u5360\u7528\u540c\u4e00\u5757\u5185\u5b58\u533a\u3002 \u5e38\u91cf\u5b58\u50a8\u533a \uff0c\u8fd9\u662f\u4e00\u5757\u6bd4\u8f83\u7279\u6b8a\u7684\u5b58\u50a8\u533a\uff0c\u4ed6\u4eec\u91cc\u9762\u5b58\u653e\u7684\u662f\u5e38\u91cf\uff0c\u4e0d\u5141\u8bb8\u4fee\u6539\uff08\u5f53\u7136\uff0c\u4f60\u8981\u901a\u8fc7\u975e\u6b63\u5f53\u624b\u6bb5\u4e5f\u53ef\u4ee5\u4fee\u6539\uff0c\u800c\u4e14\u65b9\u6cd5\u5f88\u591a\uff09","title":"\u4e00  c++\u5185\u5b58\u5206\u914d\u65b9\u5f0f"},{"location":"cplus/cplus3_memory/#_1","text":"\u4e3b\u8981\u7684\u533a\u522b\u7531\u4ee5\u4e0b\u51e0\u70b9: \u7ba1\u7406\u65b9\u5f0f\u4e0d\u540c \u7a7a\u95f4\u5927\u5c0f\u4e0d\u540c \u80fd\u5426\u4ea7\u751f\u788e\u7247\u4e0d\u540c \u751f\u957f\u65b9\u5411\u4e0d\u540c \u5206\u914d\u65b9\u5f0f\u4e0d\u540c \u5206\u914d\u6548\u7387\u4e0d\u540c \u7ba1\u7406\u65b9\u5f0f \uff1a \u5bf9\u4e8e\u6808\u6765\u8bb2\uff0c\u662f\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u7ba1\u7406\uff0c\u65e0\u9700\u6211\u4eec\u624b\u5de5\u63a7\u5236\uff1b\u5bf9\u4e8e\u5806\u6765\u8bf4\uff0c\u91ca\u653e\u5de5\u4f5c\u7531\u7a0b\u5e8f\u5458\u63a7\u5236\uff0c\u5bb9\u6613\u4ea7\u751f\u5185\u5b58\u6cc4\u9732. \u7a7a\u95f4\u5927\u5c0f \uff1a\u5806\u5185\u5b58\u7a7a\u95f4\u5927\u5c0f\u57fa\u672c\u65e0\u9650\u5236\uff0c\u6808\u7684\u7533\u8bf7\u5185\u5b58\u57281M\u5de6\u53f3 \u788e\u7247\u95ee\u9898 \uff1a\u5806\u4e0a\u7684\u5185\u5b58\u5206\u914d\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u6bcf\u6b21 new \u548c delete \u4f1a\u5bfc\u81f4\u7a7a\u95f4\u7684\u4e0d\u8fde\u7eed\uff0c\u800c\u6808\u7ed3\u6784\u662f\u5148\u8fdb\u540e\u51fa\u4e0d\u4f1a\u6709\u8fd9\u79cd\u7ed3\u679c\u3002 \u751f\u957f\u65b9\u5411 \uff1a\u5bf9\u4e8e\u5806\u6765\u8bb2\uff0c\u751f\u957f\u65b9\u5411\u662f\u5411\u4e0a\u7684\uff0c\u4e5f\u5c31\u662f\u5411\u7740\u5185\u5b58\u5730\u5740\u589e\u52a0\u7684\u65b9\u5411\uff1b\u5bf9\u4e8e\u6808\u6765\u8bb2\uff0c\u5b83\u7684\u751f\u957f\u65b9\u5411\u662f\u5411\u4e0b\u7684\uff0c\u662f\u5411\u7740\u5185\u5b58\u5730\u5740\u51cf\u5c0f\u7684\u65b9\u5411\u589e\u957f\u3002 \u5206\u914d\u65b9\u5f0f \uff1a\u5806\u90fd\u662f\u52a8\u6001\u5206\u914d\u7684\uff0c\u6ca1\u6709\u9759\u6001\u5206\u914d\u7684\u5806\u3002\u6808\u67092\u79cd\u5206\u914d\u65b9\u5f0f\uff1a\u9759\u6001\u5206\u914d\u548c\u52a8\u6001\u5206\u914d\u3002\u9759\u6001\u5206\u914d\u662f\u7f16\u8bd1\u5668\u5b8c\u6210\u7684\uff0c\u6bd4\u5982\u5c40\u90e8\u53d8\u91cf\u7684\u5206\u914d\u3002\u52a8\u6001\u5206\u914d\u7531 malloc \u51fd\u6570\u8fdb\u884c\u5206\u914d\uff0c\u4f46\u662f\u6808\u7684\u52a8\u6001\u5206\u914d\u548c\u5806\u662f\u4e0d\u540c\u7684\uff0c\u4ed6\u7684\u52a8\u6001\u5206\u914d\u662f\u7531\u7f16\u8bd1\u5668\u8fdb\u884c\u91ca\u653e\uff0c\u65e0\u9700\u6211\u4eec\u624b\u5de5\u5b9e\u73b0\u3002 \u5206\u914d\u6548\u7387 \uff1a\u6808\u662f\u673a\u5668\u7cfb\u7edf\u63d0\u4f9b\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8ba1\u7b97\u673a\u4f1a\u5728\u5e95\u5c42\u5bf9\u6808\u63d0\u4f9b\u652f\u6301\uff1a\u5206\u914d\u4e13\u95e8\u7684\u5bc4\u5b58\u5668\u5b58\u653e\u6808\u7684\u5730\u5740\uff0c\u538b\u6808\u51fa\u6808\u90fd\u6709\u4e13\u95e8\u7684\u6307\u4ee4\u6267\u884c\uff0c\u8fd9\u5c31\u51b3\u5b9a\u4e86\u6808\u7684\u6548\u7387\u6bd4\u8f83\u9ad8\u3002\u5806\u5219\u662f C/C++ \u51fd\u6570\u5e93\u63d0\u4f9b\u7684\uff0c\u5b83\u7684\u673a\u5236\u662f\u5f88\u590d\u6742\u7684\uff0c\u4f8b\u5982\u4e3a\u4e86\u5206\u914d\u4e00\u5757\u5185\u5b58\uff0c\u5e93\u51fd\u6570\u4f1a\u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\uff08\u5177\u4f53\u7684\u7b97\u6cd5\u53ef\u4ee5\u53c2\u8003\u6570\u636e\u7ed3\u6784/\u64cd\u4f5c\u7cfb\u7edf\uff09\u5728\u5806\u5185\u5b58\u4e2d\u641c\u7d22\u53ef\u7528\u7684\u8db3\u591f\u5927\u5c0f\u7684\u7a7a\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u8db3\u591f\u5927\u5c0f\u7684\u7a7a\u95f4\uff08\u53ef\u80fd\u662f\u7531\u4e8e\u5185\u5b58\u788e\u7247\u592a\u591a\uff09\uff0c\u5c31\u6709\u53ef\u80fd\u8c03\u7528\u7cfb\u7edf\u529f\u80fd\u53bb\u589e\u52a0\u7a0b\u5e8f\u6570\u636e\u6bb5\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u8fd9\u6837\u5c31\u6709\u673a\u4f1a\u5206\u5230\u8db3\u591f\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u7136\u540e\u8fdb\u884c\u8fd4\u56de\u3002\u663e\u7136\uff0c\u5806\u7684\u6548\u7387\u6bd4\u6808\u8981\u4f4e\u5f97\u591a\u3002","title":"\u4e8c \u5806\u548c\u6808\u7a76\u7adf\u6709\u4ec0\u4e48\u533a\u522b\uff1f"},{"location":"cplus/cplus3_memory/#_2","text":"\u5b9a\u4e49 \u6307\u9488\u5b9a\u4e49: int * p; \u5b9a\u4e49\u53d8\u91cf: int p; \u5b9a\u4e49\u5f15\u7528: int p = p ; int a = 6 ; int b ; //\u6307\u9488 b = a ; //\u5730\u5740\u4f20\u9012 cout a endl ; //\u5730\u57400034FBBC cout a endl ; //\u503c 6 cout b endl ; //\u5730\u57400034FBBC cout b endl ; //\u503c 6 cout ( b == a ) endl ; //true \u5730\u5740\u76f8\u540c b = 7 ; //\u66f4\u6539\u6307\u9488\u6307\u5411\u7684\u7a7a\u95f4\u7684\u503c cout a endl ; //\u503c 7 cout b endl ; //\u503c 7 int c = a ; //\u5b9a\u4e49\u5f15\u7528 cout c endl ; //\u503c7 cout c endl ; //\u5730\u57400034FBBC int d = 0 ; b = d ; cout * b endl ; //\u503c0 cout b endl ; //\u5730\u57400038FBC0 \u5f15\u7528\u4e0e\u6307\u9488\u533a\u522b \u5f15\u7528\u5fc5\u987b\u5728\u5b9a\u4e49\u65f6\u521d\u59cb\u5316\uff0c\u6307\u9488\u53ef\u4ee5\u5148\u58f0\u660e\u540e\u521d\u59cb\u5316\u3002 \u5f15\u7528\u4e0d\u80fd\u6709NULL\u5f15\u7528\uff0c\u6307\u9488\u53ef\u4ee5\u4e3aNULL \u5f15\u7528\u4e00\u5b9a\u521d\u59cb\u5316\u4e0d\u80fd\u518d\u6307\u5411\u5176\u4ed6\u5bf9\u8c61\uff0c\u800c\u6307\u9488\u53ef\u4ee5\u6539\u53d8\u6240\u6307\u5bf9\u8c61\u3002 \u5f15\u7528\u4e0d\u5360\u5185\u5b58\uff0c\u53ea\u662f\u53d8\u91cf\u7684\u4e00\u4e2a\u522b\u540d\uff0c\u6307\u9488\u4f1a\u5728\u6808\u533a\u5f00\u8f9f\u4e00\u4e2a4byte\u7684\u5185\u5b58\u533a\u3002 \u56fe\u793a\u6307\u9488\u5185\u5b58\u5206\u5e03: c++ \u4f20\u503c\uff0c\u4f20\u5740\uff0c\u4f20\u5f15\u7528 void swap ( int a , int b ); void swap2 ( int amp ; x , int amp ; y ); void swap3 ( int * a , int * b ); int _tmain ( int argc , _TCHAR * argv []) { int a = 1 , b = 2 ; swap ( a , b ); //\u4f20\u503c ,\u53c2\u6570\u4e3a\u503c\u62f7\u8d1d,\u5916\u90e8\u53d8\u91cf\u4e0d\u4f1a\u6539\u53d8\u503c cout a endl ; //1 cout b endl ; //2 int amp ; m = a ; int amp ; n = b ; swap2 ( m , n ); //\u4f20\u5f15\u7528,\u503c\u6539\u53d8 cout a endl ; //2 cout b endl ; //1 int * k = amp ; a ; int * j = amp ; b ; swap3 ( k , j ); //\u4f20\u6307\u9488,\u503c\u6539\u53d8 cout a endl ; //1 cout b endl ; //2 return 0 ; } void swap ( int a , int b ){ int temp = a ; a = b ; b = a ; } void swap2 ( int amp ; x , int amp ; y ) { int temp ; temp = x ; x = y ; y = temp ; } void swap3 ( int * a , int * b ){ int temp = * a ; * a = * b ; * b = temp ; } java\u7684\u4f20\u503c\uff0c\u4f20\u5f15\u7528 public class Test { /** * @param ss */ public static void main ( String [] ss ) { int a = 1 ; int b = 2 ; change ( a , b ); System . out . println ( a ); //1 System . out . println ( b ); //2 String m = new String ( m ); String n = new String ( n ); change2 ( m , n ); System . out . println ( m ); //m System . out . println ( n ); //n } private static void change2 ( String pa1 , String pa2 ) { String temp = pa1 ; pa1 = pa2 ; pa2 = temp ; } private static void change ( int a , int b ) { int temp = a ; a = b ; b = temp ; } } java\u7684\u4f20\u503c\u4f20\u5f15\u7528\u90fd\u4e0d\u4f1a\u6539\u53d8,\u4ea4\u6362\u4e24\u4e2a\u5f15\u7528\u53c2\u6570\u4e0d\u53d8\u539f\u56e0\u5982\u4e0b: m,n\u4e3a\u5916\u90e8\u53d8\u91cfnew\u4e4b\u540e\u5728\u5806\u533a\u4ea7\u751f\u4e24\u4e2a\u5185\u5b58\u533a\u3002chang2\u65b9\u6cd5\u6240\u505a\u7684\u662f\u590d\u5236\u5f15\u7528\uff0c\u5c06\u590d\u5236\u7684\u5f15\u7528\u6307\u5411\u5bf9\u8c61\u6539\u53d8\u4e86\uff0c\u5916\u90e8\u53d8\u91cfm,n\u5374\u6ca1\u6709\u53d1\u751f\u6307\u5411\u6539\u53d8.","title":"\u4e09  \u6307\u9488 \u5f15\u7528 \u503c"},{"location":"cplus/cplus3_memory/#c_2","text":"\u5185\u5b58\u5206\u914d\u672a\u6210\u529f\uff0c\u5374\u4f7f\u7528\u4e86\u5b83 ,\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u5185\u5b58\u4e4b\u524d\u662f\u68c0\u6d4b\u4e00\u4e0b\u6307\u9488\u662f\u5426\u4e3aNULL t = ( struct btree * ) malloc ( sizeof ( struct btree )); if ( t == NULL ) { printf ( \u5185\u5b58\u5206\u914d\u5931\u8d25! \\n ); exit ( EXIT_FAILURE ); } \u6ca1\u6709\u521d\u59cb\u5316\u7684\u6982\u5ff5 \u8bef\u8ba4\u4e3a\u5185\u5b58\u7684\u7f3a\u7701\u521d\u503c\u5168\u4e3a0,\u5bfc\u81f4\u5f15\u7528\u521d\u503c\u9519\u8bef ,java\u7684\u4f1a\u57fa\u672c\u6570\u636e\u7c7b\u578b\u6210\u5458\u53d1\u751f\u4f1a\u521d\u59cb\u5316\u5bf9\u5e94\u7684\u503c\u3002 \u5fd8\u8bb0\u91ca\u653e\u5185\u5b58\uff0c\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f \u542b\u6709\u8fd9\u79cd\u9519\u8bef\u7684\u51fd\u6570\u6bcf\u88ab\u8c03\u7528\u4e00\u6b21\u5c31\u4e22\u5931\u4e00\u5757\u5185\u5b58\u3002\u521a\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u5185\u5b58\u5145\u8db3\uff0c\u4f60\u770b\u4e0d\u5230\u9519\u8bef\u3002\u7ec8\u6709\u4e00\u6b21\u7a0b\u5e8f\u7a81\u7136\u6b7b\u6389\uff0c\u7cfb\u7edf\u51fa\u73b0\u63d0\u793a:\u5185\u5b58\u8017\u5c3d \u52a8\u6001\u5185\u5b58\u7684\u7533\u8bf7\u4e0e\u91ca\u653e\u5fc5\u987b\u914d\u5bf9\uff0c\u7a0b\u5e8f\u4e2dmalloc\u548cfree\u7684\u4f7f\u7528\u6b21\u6570\u4e00\u5b9a\u8981\u76f8\u540c\uff0c\u5426\u5219\u80af\u5b9a\u6709\u9519\u8bef \u91ca\u653e\u4e86\u5185\u5b58\u5374\u7ee7\u7eed\u4f7f\u7528\u5b83 \u7a0b\u5e8f\u4e2d\u7684\u5bf9\u8c61\u8c03\u7528\u5173\u7cfb\u8fc7\u4e8e\u590d\u6742\uff0c\u5b9e\u5728\u96be\u4ee5\u641e\u6e05\u695a\u67d0\u4e2a\u5bf9\u8c61\u7a76\u7adf\u662f\u5426\u5df2\u7ecf\u91ca\u653e\u4e86\u5185\u5b58\uff0c\u6b64\u65f6\u5e94\u8be5\u91cd\u65b0\u8bbe\u8ba1\u6570\u636e\u7ed3\u6784\uff0c\u4ece\u6839\u672c\u4e0a\u89e3\u51b3\u5bf9\u8c61\u7ba1\u7406\u7684\u6df7\u4e71\u5c40\u9762 \u51fd\u6570\u7684reture\u8bed\u53e5\u5199\u9519\u4e86\uff0c\u6ce8\u610f\u4e0d\u8981\u8fd4\u56de\u6307\u5411\"\u6808\u5185\u5b58\"\u7684\u201c\u6307\u9488\u201d\u6216\u8005\u201c\u5f15\u7528\u201d\uff0c\u56e0\u4e3a\u8be5\u5185\u5b58\u5728\u51fd\u6570\u4f53\u7ed3\u675f\u65f6\u88ab\u81ea\u52a8\u9500\u6bc1 // ConsoleApplication2.cpp : \u5b9a\u4e49\u63a7\u5236\u53f0\u5e94\u7528\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\u3002 // #include stdafx.h #include vld.h #include Student.h #include iostream using namespace std ; Student * func3 (); int _tmain ( int argc , _TCHAR * argv []) { Student * dss = func3 (); cout ( dss == NULL ) endl ; delete dss ; //\u6307\u9488ptr\u6307\u5411\u4e86\u4e00\u4e2a\u53ef\u80fd\u5df2\u7ecf\u65e0\u6548\u7684\u5730\u5740\uff0c\u5371\u9669 return 0 ; } Student * func3 () { Student my ; //\u5bf9\u8c61my\u5b58\u653e\u5728\u685f\u4e0a\uff0c\u9000\u51fa\u51fd\u6570\u4f53\u4ee5\u540e\u6539\u5730\u5740\u5c31\u53ef\u80fd\u65e0\u6548\u4e86\u3002 Student* ptr = amp;my; //\u6307\u9488ptr\u6307\u5411\u4e86\u4e00\u4e2a\u53ef\u80fd\u5df2\u7ecf\u65e0\u6548\u7684\u5730\u5740\uff0c\u5371\u9669\u3002 //cout ptr endl; return ptr ; } \u4f7f\u7528 free \u6216 delete \u91ca\u653e\u4e86\u5185\u5b58\u540e\uff0c\u6ca1\u6709\u5c06\u6307\u9488\u8bbe\u7f6e\u4e3aNULL\u3002\u5bfc\u81f4\u4ea7\u751f\u201c\u91ce\u6307\u9488\u201d \u89c4\u5219 \u7528 malloc \u6216 new \u7533\u8bf7\u5185\u5b58\u4e4b\u540e\uff0c\u5e94\u8be5\u7acb\u5373\u68c0\u67e5\u6307\u9488\u662f\u5426\u4e3aNULL\u3002\u9632\u6b62\u4f7f\u7528\u6307\u9488\u4e3aNULL\u7684\u5185\u5b58 \u4e0d\u8981\u5fd8\u8bb0\u4e3a\u6570\u7ec4\u548c\u52a8\u6001\u5185\u5b58\u8d4b\u521d\u503c\u3002\u9632\u6b62\u5c06\u672a\u88ab\u521d\u59cb\u5316\u7684\u5185\u5b58\u4f5c\u4e3a\u53f3\u503c\u4f7f\u7528 \u907f\u514d\u6570\u7ec4\u6216\u8005\u6307\u9488\u7684\u4e0b\u6807\u8d8a\u754c\uff0c\u7279\u522b\u8981\u5f53\u5fc3\u53d1\u751f\u201c\u591a1\u201d\u6216\u8005\u201c\u5c111\u201d\u7684\u64cd\u4f5c \u52a8\u6001\u5185\u5b58\u7684\u7533\u8bf7\u4e0e\u91ca\u653e\u5fc5\u987b\u914d\u5bf9\uff0c\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f \u7528 free \u6216 delete \u91ca\u653e\u5185\u5b58\u4e4b\u540e\uff0c\u7acb\u5373\u5c06\u6307\u9488\u8bbe\u7f6e\u4e3aNULL\uff0c\u9632\u6b62\u4ea7\u751f\u201c\u91ce\u6307\u9488\u201d","title":"\u56db c++\u5e38\u89c1\u5185\u5b58\u9519\u8bef"},{"location":"cplus/cplus4_complier/","text":"c++ \u7b2c\u56db\u7ae0 \u7f16\u8bd1\u8fc7\u7a0b \u4e00 \u8bed\u8a00\u7c7b\u578b\u6982\u5ff5 \u89e3\u91ca\u578b\u8bed\u8a00 :\u5728\u8fd0\u884c\u671f\u9010\u884c\u89e3\u91ca\u6e90\u7801\u4e3a\u673a\u5668\u7801,\u5982javascript. \u7f16\u8bd1\u578b\u8bed\u8a00 :\u5728\u7f16\u8bd1\u671f\u4e00\u6b21\u6027\u5c06\u6e90\u7801\u8f6c\u6362\u6210\u673a\u5668\u7801\u7684\u8bed\u8a00\uff0c\u5e73\u53f0\u4f9d\u8d56\u6027\u8f83\u9ad8\u3002\u5982c,c++. \u50cfjava,actionscript\u3002\u8fd9\u79cd\u5219\u5c5e\u4e8e\u6df7\u5408\u578b\u7684\u8bed\u8a00\u4e86\uff0cjava\u7f16\u8bd1\u6210\u7684\u5e76\u975e\u673a\u5668\u7801\uff0c\u7531jvm\u53bb\u89e3\u91ca\u6240\u751f\u6210\u7684java\u5b57\u8282\u7801\uff0c\u800cactioncript\u4e5f\u6709avm\u7c7b\u4f3c\u7684\u89e3\u91ca\u5668\u3002 \u52a8\u6001\u8bed\u8a00 :\u5728\u8fd0\u884c\u671f\u624d\u53bb\u68c0\u6d4b\u6570\u636e\u7c7b\u578b\u7684\u8bed\u8a00\u3002\u50cfjavascript. \u9759\u6001\u8bed\u8a00 :\u5728\u7f16\u8bd1\u671f\u68c0\u67e5\u6570\u636e\u7c7b\u578b,\u5982c,c++\u7b49. \u4e8c c++\u7f16\u8bd1\u8fc7\u7a0b \u9884\u5904\u7406 : \u5bf9\u9884\u5904\u7406\u6307\u4ee4\u4f5c\u4e00\u4e9b\u66ff\u6362\u64cd\u4f5c,\u5904\u7406#include,#define,#if\u7b49\uff0c\u8fd8\u6709\u6ce8\u91ca\u7684\u5220\u9664\u5de5\u4f5c. \u7f16\u8bd1 :\u5c06\u9884\u5904\u7406\u6587\u4ef6\u8fdb\u884c\u8fdb\u884c\u4e00\u7cfb\u5217 \u8bcd\u6cd5\u5206\u6790 \uff08 lex \uff09\u3001 \u8bed\u6cd5\u5206\u6790 \uff08 yacc \uff09\u3001 \u8bed\u4e49\u5206\u6790 \u53ca \u4f18\u5316 \u540e\u751f\u6210\u6c47\u7f16\u4ee3\u7801 \u6c47\u7f16 :\u6c47\u7f16\u4ee3\u7801\u5230\u76ee\u6807\u6587\u4ef6, \u76ee\u6807\u6587\u4ef6 \u4ee5\u673a\u5668\u7801\u7684\u5f62\u5f0f\u5305\u542b\u4e86 \u7f16\u8bd1\u5355\u5143 (\u6bcf\u4e00\u4e2acpp\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u7f16\u8bd1\u5355\u5143)\u91cc\u6240\u6709\u7684\u4ee3\u7801\u548c\u6570\u636e\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u7684\u4fe1\u606f. \u76ee\u6807\u6587\u4ef6\u9664\u4e86\u81ea\u5df1\u6570\u636e\u548c\u4e8c\u8fdb\u5236\u5916\u8fd8\u63d0\u4f9b\u4e09\u4e2a\u8868: \u672a\u89e3\u51b3\u7b26\u53f7\u8868 :\u88ab\u7f16\u8bd1\u5355\u5143\u5f15\u7528\u5374\u4e0d\u5b9a\u4e49\u5728\u5176\u4e2d\u7684\u7b26\u53f7\u548c\u5730\u5740. \u5bfc\u51fa\u7b26\u53f7\u8868 : \u5b9a\u4e49\u5728\u4e9b\u7f16\u8bd1\u5355\u5143\u5e76\u63d0\u4f9b\u7ed9\u5176\u4ed6\u7f16\u8bd1\u5355\u5143\u7684\u7b26\u53f7\u548c\u5730\u5740. \u5730\u5740\u91cd\u5b9a\u5411\u8868 :\u672c\u7f16\u8bd1\u5355\u5143\u5bf9\u81ea\u8eab\u5f15\u7528\u7684\u8bb0\u5f55. \u94fe\u63a5 :\u5c06\u591a\u4e2a\u76ee\u6807\u6587\u4ef6,\u5e93\uff0c\u94fe\u63a5\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 \u94fe\u63a5\u5668\u8fdb\u884c\u94fe\u63a5\u65f6\uff0c\u5148\u786e\u5b9a\u5404\u4e2a\u7f16\u8bd1\u5355\u5143\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u904d\u5386\u7f16\u8bd1\u5355\u5143\u7684\u672a\u89e3\u51b3\u7b26\u53f7\u8868\uff0c\u5e76\u4e14\u5728\u6240\u6709\u5bfc\u51fa\u7b26\u53f7\u8868\u65f6\u67e5\u627e\u5339\u914d\u7684\u7b26\u53f7\u5e76\u586b\u4e0a\u5730\u5740\u3002\u6700\u540e\u5c06\u76ee\u6807\u6587\u4ef6\u7684\u5185\u5bb9\u5199\u5728\u5404\u81ea\u7684\u4f4d\u7f6e\u4e0a\u3002\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u5c31\u94fe\u63a5\u5b8c\u6210\u4e86\u3002 \u4e09 java\u7f16\u8bd1\u8fc7\u7a0b\u4e0ec++\u7684\u533a\u522b c++\u7f16\u8bd1\u4ee3\u7801\u65f6\uff0c\u4f9d\u636e\u7279\u5b9a\u5e73\u53f0\u5c06\u672a\u89e3\u51b3\u7b26\u8868\u8f6c\u6362\u4e3a\u7279\u5b9a\u7684\u7684\u5185\u5b58\u504f\u79fb\u91cf\uff0c\u5e73\u53f0\u4f9d\u8d56\u6027\u8f83\u5f3a. java\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u5668\u5374\u4e0d\u786e\u5b9a\u5185\u5b58\u5e03\u5c40\u3002\u800c\u662f\u5728\u8fd0\u884c\u671f\uff0c\u5728\u4ee3\u7801\u901a\u7528classLoader\u8f7d\u5165\u5b8c\u6210\uff0c\u6821\u9a8c\u5b8c\u4ee3\u7801\u540e\u624d\u786e\u5b9a\u4e86\u5185\u5b58\u5e03\u5c40.\u5728\u8fd0\u884c\u671f\u901a\u8fc7\u67e5\u8868\u7684\u65b9\u5f0f\u6765\u786e\u5b9a\u4e00\u4e2a\u65b9\u6cd5\u6240\u5728\u7684\u5730\u5740\u3002\u8fd9\u624d\u662fjava\u4e00\u6b21\u7f16\u8bd1\uff0c\u5230\u5904\u8fd0\u884c\u7684\u539f\u56e0. http://www.cnblogs.com/hongfenglee/archive/2012/02/18/2356808.html http://www.xue5.com/Developer/C++/738463_2.html http://blog.163.com/zhaoxin851055@126/blog/static/81129298200987112318323/ http://developer.51cto.com/art/201009/226884.htm","title":"\u7f16\u8bd1\u8fc7\u7a0b"},{"location":"cplus/cplus4_complier/#c","text":"","title":"c++ \u7b2c\u56db\u7ae0  \u7f16\u8bd1\u8fc7\u7a0b"},{"location":"cplus/cplus4_complier/#_1","text":"\u89e3\u91ca\u578b\u8bed\u8a00 :\u5728\u8fd0\u884c\u671f\u9010\u884c\u89e3\u91ca\u6e90\u7801\u4e3a\u673a\u5668\u7801,\u5982javascript. \u7f16\u8bd1\u578b\u8bed\u8a00 :\u5728\u7f16\u8bd1\u671f\u4e00\u6b21\u6027\u5c06\u6e90\u7801\u8f6c\u6362\u6210\u673a\u5668\u7801\u7684\u8bed\u8a00\uff0c\u5e73\u53f0\u4f9d\u8d56\u6027\u8f83\u9ad8\u3002\u5982c,c++. \u50cfjava,actionscript\u3002\u8fd9\u79cd\u5219\u5c5e\u4e8e\u6df7\u5408\u578b\u7684\u8bed\u8a00\u4e86\uff0cjava\u7f16\u8bd1\u6210\u7684\u5e76\u975e\u673a\u5668\u7801\uff0c\u7531jvm\u53bb\u89e3\u91ca\u6240\u751f\u6210\u7684java\u5b57\u8282\u7801\uff0c\u800cactioncript\u4e5f\u6709avm\u7c7b\u4f3c\u7684\u89e3\u91ca\u5668\u3002 \u52a8\u6001\u8bed\u8a00 :\u5728\u8fd0\u884c\u671f\u624d\u53bb\u68c0\u6d4b\u6570\u636e\u7c7b\u578b\u7684\u8bed\u8a00\u3002\u50cfjavascript. \u9759\u6001\u8bed\u8a00 :\u5728\u7f16\u8bd1\u671f\u68c0\u67e5\u6570\u636e\u7c7b\u578b,\u5982c,c++\u7b49.","title":"\u4e00 \u8bed\u8a00\u7c7b\u578b\u6982\u5ff5"},{"location":"cplus/cplus4_complier/#c_1","text":"\u9884\u5904\u7406 : \u5bf9\u9884\u5904\u7406\u6307\u4ee4\u4f5c\u4e00\u4e9b\u66ff\u6362\u64cd\u4f5c,\u5904\u7406#include,#define,#if\u7b49\uff0c\u8fd8\u6709\u6ce8\u91ca\u7684\u5220\u9664\u5de5\u4f5c. \u7f16\u8bd1 :\u5c06\u9884\u5904\u7406\u6587\u4ef6\u8fdb\u884c\u8fdb\u884c\u4e00\u7cfb\u5217 \u8bcd\u6cd5\u5206\u6790 \uff08 lex \uff09\u3001 \u8bed\u6cd5\u5206\u6790 \uff08 yacc \uff09\u3001 \u8bed\u4e49\u5206\u6790 \u53ca \u4f18\u5316 \u540e\u751f\u6210\u6c47\u7f16\u4ee3\u7801 \u6c47\u7f16 :\u6c47\u7f16\u4ee3\u7801\u5230\u76ee\u6807\u6587\u4ef6, \u76ee\u6807\u6587\u4ef6 \u4ee5\u673a\u5668\u7801\u7684\u5f62\u5f0f\u5305\u542b\u4e86 \u7f16\u8bd1\u5355\u5143 (\u6bcf\u4e00\u4e2acpp\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u7f16\u8bd1\u5355\u5143)\u91cc\u6240\u6709\u7684\u4ee3\u7801\u548c\u6570\u636e\uff0c\u4ee5\u53ca\u4e00\u4e9b\u5176\u4ed6\u7684\u4fe1\u606f. \u76ee\u6807\u6587\u4ef6\u9664\u4e86\u81ea\u5df1\u6570\u636e\u548c\u4e8c\u8fdb\u5236\u5916\u8fd8\u63d0\u4f9b\u4e09\u4e2a\u8868: \u672a\u89e3\u51b3\u7b26\u53f7\u8868 :\u88ab\u7f16\u8bd1\u5355\u5143\u5f15\u7528\u5374\u4e0d\u5b9a\u4e49\u5728\u5176\u4e2d\u7684\u7b26\u53f7\u548c\u5730\u5740. \u5bfc\u51fa\u7b26\u53f7\u8868 : \u5b9a\u4e49\u5728\u4e9b\u7f16\u8bd1\u5355\u5143\u5e76\u63d0\u4f9b\u7ed9\u5176\u4ed6\u7f16\u8bd1\u5355\u5143\u7684\u7b26\u53f7\u548c\u5730\u5740. \u5730\u5740\u91cd\u5b9a\u5411\u8868 :\u672c\u7f16\u8bd1\u5355\u5143\u5bf9\u81ea\u8eab\u5f15\u7528\u7684\u8bb0\u5f55. \u94fe\u63a5 :\u5c06\u591a\u4e2a\u76ee\u6807\u6587\u4ef6,\u5e93\uff0c\u94fe\u63a5\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 \u94fe\u63a5\u5668\u8fdb\u884c\u94fe\u63a5\u65f6\uff0c\u5148\u786e\u5b9a\u5404\u4e2a\u7f16\u8bd1\u5355\u5143\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u904d\u5386\u7f16\u8bd1\u5355\u5143\u7684\u672a\u89e3\u51b3\u7b26\u53f7\u8868\uff0c\u5e76\u4e14\u5728\u6240\u6709\u5bfc\u51fa\u7b26\u53f7\u8868\u65f6\u67e5\u627e\u5339\u914d\u7684\u7b26\u53f7\u5e76\u586b\u4e0a\u5730\u5740\u3002\u6700\u540e\u5c06\u76ee\u6807\u6587\u4ef6\u7684\u5185\u5bb9\u5199\u5728\u5404\u81ea\u7684\u4f4d\u7f6e\u4e0a\u3002\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u5c31\u94fe\u63a5\u5b8c\u6210\u4e86\u3002","title":"\u4e8c c++\u7f16\u8bd1\u8fc7\u7a0b"},{"location":"cplus/cplus4_complier/#javac","text":"c++\u7f16\u8bd1\u4ee3\u7801\u65f6\uff0c\u4f9d\u636e\u7279\u5b9a\u5e73\u53f0\u5c06\u672a\u89e3\u51b3\u7b26\u8868\u8f6c\u6362\u4e3a\u7279\u5b9a\u7684\u7684\u5185\u5b58\u504f\u79fb\u91cf\uff0c\u5e73\u53f0\u4f9d\u8d56\u6027\u8f83\u5f3a. java\u7f16\u8bd1\u5668\u5728\u7f16\u8bd1\u5668\u5374\u4e0d\u786e\u5b9a\u5185\u5b58\u5e03\u5c40\u3002\u800c\u662f\u5728\u8fd0\u884c\u671f\uff0c\u5728\u4ee3\u7801\u901a\u7528classLoader\u8f7d\u5165\u5b8c\u6210\uff0c\u6821\u9a8c\u5b8c\u4ee3\u7801\u540e\u624d\u786e\u5b9a\u4e86\u5185\u5b58\u5e03\u5c40.\u5728\u8fd0\u884c\u671f\u901a\u8fc7\u67e5\u8868\u7684\u65b9\u5f0f\u6765\u786e\u5b9a\u4e00\u4e2a\u65b9\u6cd5\u6240\u5728\u7684\u5730\u5740\u3002\u8fd9\u624d\u662fjava\u4e00\u6b21\u7f16\u8bd1\uff0c\u5230\u5904\u8fd0\u884c\u7684\u539f\u56e0. http://www.cnblogs.com/hongfenglee/archive/2012/02/18/2356808.html http://www.xue5.com/Developer/C++/738463_2.html http://blog.163.com/zhaoxin851055@126/blog/static/81129298200987112318323/ http://developer.51cto.com/art/201009/226884.htm","title":"\u4e09 java\u7f16\u8bd1\u8fc7\u7a0b\u4e0ec++\u7684\u533a\u522b"},{"location":"cplus/cplus5_const/","text":"c++ \u7b2c\u4e94\u7ae0 const 1 \u4fee\u9970\u666e\u901a\u53d8\u91cf\u548c\u6307\u9488 double d1 = 2 ; double d2 = 4 ; const double cptr = d1 ; cptr = d2 ; //\u4e0d\u80fd\u4fee\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u503c\uff0c\u800c\u53ef\u4ee5\u66f4\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u5730\u5740 double const cptr1 = d1 ; cptr1 = d2 ; //\u53ef\u4ee5\u4fee\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u503c\uff0c\u4e0d\u53ef\u4ee5\u66f4\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u5730\u5740 const double const cptr2 = d1 ; //\u4e24\u4e2a\u90fd\u4e0d\u80fd\u4fee\u6539 \u5982\u679cconst\u4f4d\u4e8e \u7684\u5de6\u4fa7\uff0c\u5219const\u5c31\u662f\u7528\u6765\u4fee\u9970\u6307\u9488\u6240\u6307\u5411\u7684\u53d8\u91cf\uff0c\u5373\u6307\u9488\u6307\u5411\u4e3a\u5e38\u91cf\uff1b \u5982\u679cconst\u4f4d\u4e8e \u7684\u53f3\u4fa7\uff0cconst\u5c31\u662f\u4fee\u9970\u6307\u9488\u672c\u8eab\uff0c\u5373\u6307\u9488\u672c\u8eab\u662f\u5e38\u91cf\u3002 2 const\u4fee\u9970\u51fd\u6570\u53c2\u6570 const\u4fee\u9970\u51fd\u6570\u53c2\u6570\u662f\u5b83\u6700\u5e7f\u6cdb\u7684\u4e00\u79cd\u7528\u9014\uff0c\u5b83\u8868\u793a\u51fd\u6570\u4f53\u4e2d\u4e0d\u80fd\u4fee\u6539\u53c2\u6570\u7684\u503c(\u5305\u62ec\u53c2\u6570\u672c\u8eab\u7684\u503c\u6216\u8005\u53c2\u6570\u5176\u4e2d\u5305\u542b\u7684\u503c) void function(const int Var); //\u4f20\u9012\u8fc7\u6765\u7684\u53c2\u6570\u5728\u51fd\u6570\u5185\u4e0d\u53ef\u4ee5\u6539\u53d8(\u65e0\u610f\u4e49\uff0c\u56e0\u4e3aVar\u672c\u8eab\u5c31\u662f\u5f62\u53c2\uff0c\u6211\u4eec\u7684\u76ee\u7684\u662f\u51fd\u6570\u5185\u4e0d\u6539\u53d8\u4f20\u9012\u8fc7\u6765\u7684\u5185\u5bb9\u5c31\u597d\u4e86\uff0c\u8fd9\u4e2a\u6ca1\u6709\u8fbe\u5230\u76ee\u7684\uff0c\u4f1a\u4e34\u65f6\u590d\u5236\u4e00\u4e2a_Var\u53d8\u91cf\uff0c\u539f\u59cb\u53d8\u91cf\u6839\u672c\u4e0d\u4f1a\u6539\u53d8\u7684) void function(const char* Var); //\u53c2\u6570\u6307\u9488\u6240\u6307\u5185\u5bb9\u4e3a\u5e38\u91cf\u4e0d\u53ef\u53d8 void function(char* const Var); //\u53c2\u6570\u6307\u9488\u672c\u8eab\u4e3a\u5e38\u91cf\u4e0d\u53ef\u53d8(\u4e5f\u65e0\u610f\u4e49,\u56e0\u4e3achar* Var\u4e5f\u662f\u5f62\u53c2\uff0c\u6211\u4eec\u7684\u76ee\u7684\u662f\u51fd\u6570\u5185\u4e0d\u6539\u53d8\u4f20\u9012\u8fc7\u6765\u7684\u5185\u5bb9\u5c31\u597d\u4e86\uff0c\u8fd9\u4e2a\u6ca1\u6709\u8fbe\u5230\u76ee\u7684\uff0c\u8fd8\u662f\u53ef\u4ee5\u6539\u53d8\u6307\u9488\u6240\u6307\u5411\u7684\u5185\u5bb9) \u5bf9\u4e8e\u975e\u5185\u90e8\u6570\u636e\u7c7b\u578b\u7684\u53c2\u6570\u800c\u8a00\uff0c\u8c61 void function(A a) \u8fd9\u6837\u58f0\u660e\u7684\u51fd\u6570\u6ce8\u5b9a\u6548\u7387\u6bd4\u8f83\u5e95\u3002\u56e0\u4e3a\u51fd\u6570\u4f53\u5185\u5c06\u4ea7\u751fA \u7c7b\u578b\u7684\u4e34\u65f6\u5bf9\u8c61\u7528\u4e8e\u590d\u5236\u53c2\u6570a\uff0c\u800c\u4e34\u65f6\u5bf9\u8c61\u7684\u6784\u9020\u3001\u590d\u5236\u3001\u6790\u6784\u8fc7\u7a0b\u90fd\u5c06\u6d88\u8017\u65f6\u95f4\u3002 \u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u53ef\u4ee5\u5c06\u51fd\u6570\u58f0\u660e\u6539\u4e3avoid function(A a)\uff0c\u56e0\u4e3a\u201c\u5f15\u7528\u4f20\u9012\u201d\u4ec5\u501f\u7528\u4e00\u4e0b\u53c2\u6570\u7684\u522b\u540d\u800c\u5df2\uff0c\u4e0d\u9700\u8981\u4ea7\u751f\u4e34\u65f6\u5bf9\u8c61\u3002\u4f46\u662f\u51fd\u6570void function(A a) \u5b58\u5728\u4e00\u4e2a\u7f3a\u70b9\uff1a \u201c\u5f15\u7528\u4f20\u9012\u201d\u6709\u53ef\u80fd\u6539\u53d8\u53c2\u6570a\uff0c\u8fd9\u662f\u6211\u4eec\u4e0d\u671f\u671b\u7684\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5f88\u5bb9\u6613\uff0c\u52a0const\u4fee\u9970\u5373\u53ef void function(const A a); 3 const\u4fee\u9970\u7c7b\u5bf9\u8c61/\u5bf9\u8c61\u6307\u9488/\u5bf9\u8c61\u5f15\u7528 const\u4fee\u9970\u7c7b\u5bf9\u8c61\u8868\u793a\u8be5\u5bf9\u8c61\u4e3a\u5e38\u91cf\u5bf9\u8c61\uff0c\u5176\u4e2d\u7684\u4efb\u4f55\u6210\u5458\u90fd\u4e0d\u80fd\u88ab\u4fee\u6539\u3002\u5bf9\u4e8e\u5bf9\u8c61\u6307\u9488\u548c\u5bf9\u8c61\u5f15\u7528\u4e5f\u662f\u4e00\u6837\u3002const\u4fee\u9970\u7684\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684\u4efb\u4f55\u975econst\u6210\u5458\u51fd\u6570\u90fd\u4e0d\u80fd\u88ab\u8c03\u7528\uff0c\u56e0\u4e3a\u4efb\u4f55\u975econst\u6210\u5458\u51fd\u6570\u4f1a\u6709\u4fee\u6539\u6210\u5458\u53d8\u91cf\u7684\u4f01\u56fe\u3002\u4f8b\u5982\uff1a class AAA { void func1 (); void func2 () const ; }; constAAA aObj ; aObj . func1 (); \u00d7 aObj . func2 (); \u6b63\u786e const AAA aObj = new AAA (); aObj - func1 (); \u00d7 aObj - func2 (); \u6b63\u786e 4 const\u4fee\u9970\u6210\u5458\u53d8\u91cf const\u4fee\u9970\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u8868\u793a\u6210\u5458\u5e38\u91cf\uff0c\u4e0d\u80fd\u88ab\u4fee\u6539\uff0c\u540c\u65f6\u5b83\u53ea\u80fd\u5728\u521d\u59cb\u5316\u5217\u8868\u4e2d\u8d4b\u503c\u3002 class A { const int nValue ; //\u6210\u5458\u5e38\u91cf\u4e0d\u80fd\u88ab\u4fee\u6539 A ( int x ) : nValue ( x ) {}; //\u53ea\u80fd\u5728\u521d\u59cb\u5316\u5217\u8868\u4e2d\u8d4b\u503c \uff0c\u8fd9\u4e2a\u9700\u8981\u6ce8\u610f }; 5 const\u4fee\u9970\u6210\u5458\u51fd\u6570 const\u4fee\u9970\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u5219\u8be5\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u4fee\u6539\u7c7b\u4e2d\u4efb\u4f55\u975econst\u6210\u5458\u51fd\u6570\u3002\u4e00\u822c\u5199\u5728\u51fd\u6570\u7684\u6700\u540e\u6765\u4fee\u9970\u3002 class A { void function () const ; }; \u5bf9\u4e8econst\u7c7b\u5bf9\u8c61/\u6307\u9488/\u5f15\u7528\uff0c\u53ea\u80fd\u8c03\u7528\u7c7b\u7684const\u6210\u5458\u51fd\u6570\uff0c\u56e0\u6b64\uff0cconst\u4fee\u9970\u6210\u5458\u51fd\u6570\u7684\u6700\u91cd\u8981\u4f5c\u7528\u5c31\u662f\u9650\u5236\u5bf9\u4e8econst\u5bf9\u8c61\u7684\u4f7f\u7528\u3002 6 const\u5e38\u91cf\u4e0edefine\u5b8f\u5b9a\u4e49\u7684\u533a\u522b \u7f16\u8bd1\u5668\u5904\u7406\u65b9\u5f0f\u4e0d\u540cdefine\u5b8f\u662f\u5728\u9884\u5904\u7406\u9636\u6bb5\u5c55\u5f00\u3002const\u5e38\u91cf\u662f\u7f16\u8bd1\u8fd0\u884c\u9636\u6bb5\u4f7f\u7528\u3002 \u7c7b\u578b\u548c\u5b89\u5168\u68c0\u67e5\u4e0d\u540cdefine\u5b8f\u6ca1\u6709\u7c7b\u578b\uff0c\u4e0d\u505a\u4efb\u4f55\u7c7b\u578b\u68c0\u67e5\uff0c\u4ec5\u4ec5\u662f\u5c55\u5f00\u3002const\u5e38\u91cf\u6709\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u5728\u7f16\u8bd1\u9636\u6bb5\u4f1a\u6267\u884c\u7c7b\u578b\u68c0\u67e5\u3002 \u5b58\u50a8\u65b9\u5f0f\u4e0d\u540cdefine\u5b8f\u4ec5\u4ec5\u662f\u5c55\u5f00\uff0c\u6709\u591a\u5c11\u5730\u65b9\u4f7f\u7528\uff0c\u5c31\u5c55\u5f00\u591a\u5c11\u6b21\uff0c\u4e0d\u4f1a\u5206\u914d\u5185\u5b58\u3002const\u5e38\u91cf\u4f1a\u5728\u5185\u5b58\u4e2d\u5206\u914d(\u53ef\u4ee5\u662f\u5806\u4e2d\u4e5f\u53ef\u4ee5\u662f\u6808\u4e2d)\u3002","title":"\u5e38\u91cf\u4fee\u9970\u7b26"},{"location":"cplus/cplus5_const/#c-const","text":"","title":"c++ \u7b2c\u4e94\u7ae0 const"},{"location":"cplus/cplus5_const/#1","text":"double d1 = 2 ; double d2 = 4 ; const double cptr = d1 ; cptr = d2 ; //\u4e0d\u80fd\u4fee\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u503c\uff0c\u800c\u53ef\u4ee5\u66f4\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u5730\u5740 double const cptr1 = d1 ; cptr1 = d2 ; //\u53ef\u4ee5\u4fee\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u503c\uff0c\u4e0d\u53ef\u4ee5\u66f4\u6539\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u5730\u5740 const double const cptr2 = d1 ; //\u4e24\u4e2a\u90fd\u4e0d\u80fd\u4fee\u6539 \u5982\u679cconst\u4f4d\u4e8e \u7684\u5de6\u4fa7\uff0c\u5219const\u5c31\u662f\u7528\u6765\u4fee\u9970\u6307\u9488\u6240\u6307\u5411\u7684\u53d8\u91cf\uff0c\u5373\u6307\u9488\u6307\u5411\u4e3a\u5e38\u91cf\uff1b \u5982\u679cconst\u4f4d\u4e8e \u7684\u53f3\u4fa7\uff0cconst\u5c31\u662f\u4fee\u9970\u6307\u9488\u672c\u8eab\uff0c\u5373\u6307\u9488\u672c\u8eab\u662f\u5e38\u91cf\u3002","title":"1 \u4fee\u9970\u666e\u901a\u53d8\u91cf\u548c\u6307\u9488"},{"location":"cplus/cplus5_const/#2-const","text":"const\u4fee\u9970\u51fd\u6570\u53c2\u6570\u662f\u5b83\u6700\u5e7f\u6cdb\u7684\u4e00\u79cd\u7528\u9014\uff0c\u5b83\u8868\u793a\u51fd\u6570\u4f53\u4e2d\u4e0d\u80fd\u4fee\u6539\u53c2\u6570\u7684\u503c(\u5305\u62ec\u53c2\u6570\u672c\u8eab\u7684\u503c\u6216\u8005\u53c2\u6570\u5176\u4e2d\u5305\u542b\u7684\u503c) void function(const int Var); //\u4f20\u9012\u8fc7\u6765\u7684\u53c2\u6570\u5728\u51fd\u6570\u5185\u4e0d\u53ef\u4ee5\u6539\u53d8(\u65e0\u610f\u4e49\uff0c\u56e0\u4e3aVar\u672c\u8eab\u5c31\u662f\u5f62\u53c2\uff0c\u6211\u4eec\u7684\u76ee\u7684\u662f\u51fd\u6570\u5185\u4e0d\u6539\u53d8\u4f20\u9012\u8fc7\u6765\u7684\u5185\u5bb9\u5c31\u597d\u4e86\uff0c\u8fd9\u4e2a\u6ca1\u6709\u8fbe\u5230\u76ee\u7684\uff0c\u4f1a\u4e34\u65f6\u590d\u5236\u4e00\u4e2a_Var\u53d8\u91cf\uff0c\u539f\u59cb\u53d8\u91cf\u6839\u672c\u4e0d\u4f1a\u6539\u53d8\u7684) void function(const char* Var); //\u53c2\u6570\u6307\u9488\u6240\u6307\u5185\u5bb9\u4e3a\u5e38\u91cf\u4e0d\u53ef\u53d8 void function(char* const Var); //\u53c2\u6570\u6307\u9488\u672c\u8eab\u4e3a\u5e38\u91cf\u4e0d\u53ef\u53d8(\u4e5f\u65e0\u610f\u4e49,\u56e0\u4e3achar* Var\u4e5f\u662f\u5f62\u53c2\uff0c\u6211\u4eec\u7684\u76ee\u7684\u662f\u51fd\u6570\u5185\u4e0d\u6539\u53d8\u4f20\u9012\u8fc7\u6765\u7684\u5185\u5bb9\u5c31\u597d\u4e86\uff0c\u8fd9\u4e2a\u6ca1\u6709\u8fbe\u5230\u76ee\u7684\uff0c\u8fd8\u662f\u53ef\u4ee5\u6539\u53d8\u6307\u9488\u6240\u6307\u5411\u7684\u5185\u5bb9) \u5bf9\u4e8e\u975e\u5185\u90e8\u6570\u636e\u7c7b\u578b\u7684\u53c2\u6570\u800c\u8a00\uff0c\u8c61 void function(A a) \u8fd9\u6837\u58f0\u660e\u7684\u51fd\u6570\u6ce8\u5b9a\u6548\u7387\u6bd4\u8f83\u5e95\u3002\u56e0\u4e3a\u51fd\u6570\u4f53\u5185\u5c06\u4ea7\u751fA \u7c7b\u578b\u7684\u4e34\u65f6\u5bf9\u8c61\u7528\u4e8e\u590d\u5236\u53c2\u6570a\uff0c\u800c\u4e34\u65f6\u5bf9\u8c61\u7684\u6784\u9020\u3001\u590d\u5236\u3001\u6790\u6784\u8fc7\u7a0b\u90fd\u5c06\u6d88\u8017\u65f6\u95f4\u3002 \u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u53ef\u4ee5\u5c06\u51fd\u6570\u58f0\u660e\u6539\u4e3avoid function(A a)\uff0c\u56e0\u4e3a\u201c\u5f15\u7528\u4f20\u9012\u201d\u4ec5\u501f\u7528\u4e00\u4e0b\u53c2\u6570\u7684\u522b\u540d\u800c\u5df2\uff0c\u4e0d\u9700\u8981\u4ea7\u751f\u4e34\u65f6\u5bf9\u8c61\u3002\u4f46\u662f\u51fd\u6570void function(A a) \u5b58\u5728\u4e00\u4e2a\u7f3a\u70b9\uff1a \u201c\u5f15\u7528\u4f20\u9012\u201d\u6709\u53ef\u80fd\u6539\u53d8\u53c2\u6570a\uff0c\u8fd9\u662f\u6211\u4eec\u4e0d\u671f\u671b\u7684\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5f88\u5bb9\u6613\uff0c\u52a0const\u4fee\u9970\u5373\u53ef void function(const A a);","title":"2 const\u4fee\u9970\u51fd\u6570\u53c2\u6570"},{"location":"cplus/cplus5_const/#3-const","text":"const\u4fee\u9970\u7c7b\u5bf9\u8c61\u8868\u793a\u8be5\u5bf9\u8c61\u4e3a\u5e38\u91cf\u5bf9\u8c61\uff0c\u5176\u4e2d\u7684\u4efb\u4f55\u6210\u5458\u90fd\u4e0d\u80fd\u88ab\u4fee\u6539\u3002\u5bf9\u4e8e\u5bf9\u8c61\u6307\u9488\u548c\u5bf9\u8c61\u5f15\u7528\u4e5f\u662f\u4e00\u6837\u3002const\u4fee\u9970\u7684\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u7684\u4efb\u4f55\u975econst\u6210\u5458\u51fd\u6570\u90fd\u4e0d\u80fd\u88ab\u8c03\u7528\uff0c\u56e0\u4e3a\u4efb\u4f55\u975econst\u6210\u5458\u51fd\u6570\u4f1a\u6709\u4fee\u6539\u6210\u5458\u53d8\u91cf\u7684\u4f01\u56fe\u3002\u4f8b\u5982\uff1a class AAA { void func1 (); void func2 () const ; }; constAAA aObj ; aObj . func1 (); \u00d7 aObj . func2 (); \u6b63\u786e const AAA aObj = new AAA (); aObj - func1 (); \u00d7 aObj - func2 (); \u6b63\u786e","title":"3 const\u4fee\u9970\u7c7b\u5bf9\u8c61/\u5bf9\u8c61\u6307\u9488/\u5bf9\u8c61\u5f15\u7528"},{"location":"cplus/cplus5_const/#4-const","text":"const\u4fee\u9970\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u8868\u793a\u6210\u5458\u5e38\u91cf\uff0c\u4e0d\u80fd\u88ab\u4fee\u6539\uff0c\u540c\u65f6\u5b83\u53ea\u80fd\u5728\u521d\u59cb\u5316\u5217\u8868\u4e2d\u8d4b\u503c\u3002 class A { const int nValue ; //\u6210\u5458\u5e38\u91cf\u4e0d\u80fd\u88ab\u4fee\u6539 A ( int x ) : nValue ( x ) {}; //\u53ea\u80fd\u5728\u521d\u59cb\u5316\u5217\u8868\u4e2d\u8d4b\u503c \uff0c\u8fd9\u4e2a\u9700\u8981\u6ce8\u610f };","title":"4 const\u4fee\u9970\u6210\u5458\u53d8\u91cf"},{"location":"cplus/cplus5_const/#5-const","text":"const\u4fee\u9970\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u5219\u8be5\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u4fee\u6539\u7c7b\u4e2d\u4efb\u4f55\u975econst\u6210\u5458\u51fd\u6570\u3002\u4e00\u822c\u5199\u5728\u51fd\u6570\u7684\u6700\u540e\u6765\u4fee\u9970\u3002 class A { void function () const ; }; \u5bf9\u4e8econst\u7c7b\u5bf9\u8c61/\u6307\u9488/\u5f15\u7528\uff0c\u53ea\u80fd\u8c03\u7528\u7c7b\u7684const\u6210\u5458\u51fd\u6570\uff0c\u56e0\u6b64\uff0cconst\u4fee\u9970\u6210\u5458\u51fd\u6570\u7684\u6700\u91cd\u8981\u4f5c\u7528\u5c31\u662f\u9650\u5236\u5bf9\u4e8econst\u5bf9\u8c61\u7684\u4f7f\u7528\u3002","title":"5 const\u4fee\u9970\u6210\u5458\u51fd\u6570"},{"location":"cplus/cplus5_const/#6-constdefine","text":"\u7f16\u8bd1\u5668\u5904\u7406\u65b9\u5f0f\u4e0d\u540cdefine\u5b8f\u662f\u5728\u9884\u5904\u7406\u9636\u6bb5\u5c55\u5f00\u3002const\u5e38\u91cf\u662f\u7f16\u8bd1\u8fd0\u884c\u9636\u6bb5\u4f7f\u7528\u3002 \u7c7b\u578b\u548c\u5b89\u5168\u68c0\u67e5\u4e0d\u540cdefine\u5b8f\u6ca1\u6709\u7c7b\u578b\uff0c\u4e0d\u505a\u4efb\u4f55\u7c7b\u578b\u68c0\u67e5\uff0c\u4ec5\u4ec5\u662f\u5c55\u5f00\u3002const\u5e38\u91cf\u6709\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u5728\u7f16\u8bd1\u9636\u6bb5\u4f1a\u6267\u884c\u7c7b\u578b\u68c0\u67e5\u3002 \u5b58\u50a8\u65b9\u5f0f\u4e0d\u540cdefine\u5b8f\u4ec5\u4ec5\u662f\u5c55\u5f00\uff0c\u6709\u591a\u5c11\u5730\u65b9\u4f7f\u7528\uff0c\u5c31\u5c55\u5f00\u591a\u5c11\u6b21\uff0c\u4e0d\u4f1a\u5206\u914d\u5185\u5b58\u3002const\u5e38\u91cf\u4f1a\u5728\u5185\u5b58\u4e2d\u5206\u914d(\u53ef\u4ee5\u662f\u5806\u4e2d\u4e5f\u53ef\u4ee5\u662f\u6808\u4e2d)\u3002","title":"6 const\u5e38\u91cf\u4e0edefine\u5b8f\u5b9a\u4e49\u7684\u533a\u522b"},{"location":"cplus/cplus_win/","text":"c++\u3000windows\u3000\u73af\u5883\u642d\u5efa \u4e00\u3000\u5b89\u88c5mingw-get-inst \u8fd9\u4e2a\u662fc++\u7684win\u4e0a\u7684\u7f16\u8bd1\u73af\u5883.\u4e0b\u8f7d\u5730\u5740: http://sourceforge.net/projects/mingw/files/ \u5b83\u4f1a\u81ea\u52a8\u8054\u7f51\u4e0b\u8f7d\u5305 \u5b89\u88c5\u5b8c\u540e\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u6253\u5f00\u73af\u5883\u53d8\u91cf\uff0c\u6dfb\u52a0mingw_home\u53d8\u91cf\uff0c\u5185\u5bb9 x:\\Program Files\\MinGW \u8bbe\u7f6epath\u53d8\u91cf\uff0c\u7f16\u8f91path\u53d8\u91cf\u6dfb\u52a0 %mingw_home%\\bin;%mingw_home%\\msys\\1.0\\bin; \u6dfb\u52a0LIBRARY_PATH\u53d8\u91cf\uff0c\u5185\u5bb9 %mingw_home%\\lib \u6dfb\u52a0C_INCLUDE_PATH\u53d8\u91cf\uff0c\u5185\u5bb9 %mingw_home%\\include \u6539\u540d,\u5c06mingw\u7684bin\u76ee\u5f55\u4e0b\u7684mingw32-make.exe\u62f7\u8d1d\u4e00\u4efd\u6539\u540d\u4e3amake.exe \u91cd\u542f\u7535\u8111\u3002 \u4e8c \u4e0b\u8f7d\u3000eclipse for c/c++ \u6211\u4e0b\u8f7d\u7684\u662f eclipse-cpp-juno-SR2-win32 http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/junosr2 \u89e3\u538b\u4e4b\u540e\u6253\u5f00\uff0c\u914d\u7f6e\u5982\u4e0b. \u4e09\u3000hello,world \u65b0\u5efac++\u5de5\u7a0b,\u9009\u62e9MinGW GCC \u7f16\u8bd1\u8fd0\u884c.\u7f16\u8bd1\u70b9\u51fb\u9524\u5b50\uff0c\u8fd0\u884c\u70b9\u51fb\u4e09\u89d2\u5f62\u7684\u6309\u94ae\u3002","title":"c++\u73af\u5883\u642d\u5efa(Win)"},{"location":"cplus/cplus_win/#c-windows","text":"","title":"c++\u3000windows\u3000\u73af\u5883\u642d\u5efa"},{"location":"cplus/cplus_win/#mingw-get-inst","text":"\u8fd9\u4e2a\u662fc++\u7684win\u4e0a\u7684\u7f16\u8bd1\u73af\u5883.\u4e0b\u8f7d\u5730\u5740: http://sourceforge.net/projects/mingw/files/ \u5b83\u4f1a\u81ea\u52a8\u8054\u7f51\u4e0b\u8f7d\u5305 \u5b89\u88c5\u5b8c\u540e\u914d\u7f6e\u73af\u5883\u53d8\u91cf \u6253\u5f00\u73af\u5883\u53d8\u91cf\uff0c\u6dfb\u52a0mingw_home\u53d8\u91cf\uff0c\u5185\u5bb9 x:\\Program Files\\MinGW \u8bbe\u7f6epath\u53d8\u91cf\uff0c\u7f16\u8f91path\u53d8\u91cf\u6dfb\u52a0 %mingw_home%\\bin;%mingw_home%\\msys\\1.0\\bin; \u6dfb\u52a0LIBRARY_PATH\u53d8\u91cf\uff0c\u5185\u5bb9 %mingw_home%\\lib \u6dfb\u52a0C_INCLUDE_PATH\u53d8\u91cf\uff0c\u5185\u5bb9 %mingw_home%\\include \u6539\u540d,\u5c06mingw\u7684bin\u76ee\u5f55\u4e0b\u7684mingw32-make.exe\u62f7\u8d1d\u4e00\u4efd\u6539\u540d\u4e3amake.exe \u91cd\u542f\u7535\u8111\u3002","title":"\u4e00\u3000\u5b89\u88c5mingw-get-inst"},{"location":"cplus/cplus_win/#eclipse-for-cc","text":"\u6211\u4e0b\u8f7d\u7684\u662f eclipse-cpp-juno-SR2-win32 http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/junosr2 \u89e3\u538b\u4e4b\u540e\u6253\u5f00\uff0c\u914d\u7f6e\u5982\u4e0b. \u4e09\u3000hello,world \u65b0\u5efac++\u5de5\u7a0b,\u9009\u62e9MinGW GCC \u7f16\u8bd1\u8fd0\u884c.\u7f16\u8bd1\u70b9\u51fb\u9524\u5b50\uff0c\u8fd0\u884c\u70b9\u51fb\u4e09\u89d2\u5f62\u7684\u6309\u94ae\u3002","title":"\u4e8c \u4e0b\u8f7d\u3000eclipse for c/c++"},{"location":"data_algorithms/algorithms1_intro/","text":"\u6392\u5e8f\u7b97\u6cd5\u4ecb\u7ecd \u7b97\u6cd5\u5206\u6790 https://zh.wikipedia.org/wiki/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95#.E7.A9.A9.E5.AE.9A.E6.80.A7 http://algorithm.yuanbin.me/zh-hans/basics_sorting/ \u590d\u6742\u5ea6 \u65f6\u95f4\u590d\u6742\u5ea6 :\u6267\u884c\u65f6\u95f4(\u6bd4\u8f83\u548c\u4ea4\u6362\u6b21\u6570) \u7a7a\u95f4\u590d\u6742\u5ea6 :\u6240\u6d88\u8017\u7684\u989d\u5916\u5185\u5b58\u7a7a\u95f4 \u4f7f\u7528\u5c0f\u5806\u6808\u6216\u8868 \u4f7f\u7528\u94fe\u8868\u6216\u6307\u9488\u3001\u6570\u7ec4\u7d22\u5f15\u6765\u4ee3\u8868\u6570\u636e \u6392\u5e8f\u6570\u636e\u7684\u526f\u672c \u7a33\u5b9a\u6027 \u76f8\u540c\u503c\u7684\u9879\u6392\u5e8f\u65f6\u4f4d\u7f6e\u4e0d\u4f1a\u53d8\u5316\u5c31\u662f\u7a33\u5b9a\u7684 \u7a33\u5b9a\u7684\u6392\u5e8f \u5192\u6ce1\u6392\u5e8f\uff08bubble sort\uff09\u2014 O(n2) \u9e21\u5c3e\u9152\u6392\u5e8f\uff08cocktail sort\uff09\u2014O(n2) \u6876\u6392\u5e8f\uff08bucket sort\uff09\u2014O(n)\uff1b\u9700\u8981O(k)\u989d\u5916\u7a7a\u95f4 \u8ba1\u6570\u6392\u5e8f\uff08counting sort\uff09\u2014O(n+k)\uff1b\u9700\u8981O(n+k)\u989d\u5916\u7a7a\u95f4 \u5f52\u5e76\u6392\u5e8f\uff08merge sort\uff09\u2014O(n log n)\uff1b\u9700\u8981O(n)\u989d\u5916\u7a7a\u95f4 \u539f\u5730\u5f52\u5e76\u6392\u5e8f\u2014 O(n log2 n)\u5982\u679c\u4f7f\u7528\u6700\u4f73\u7684\u73b0\u5728\u7248\u672c \u4e8c\u53c9\u6392\u5e8f\u6811\u6392\u5e8f\uff08binary tree sort\uff09\u2014 O(n log n)\u671f\u671b\u65f6\u95f4\uff1bO(n2)\u6700\u574f\u65f6\u95f4\uff1b\u9700\u8981O(n)\u989d\u5916\u7a7a\u95f4 \u9e3d\u5de2\u6392\u5e8f\uff08pigeonhole sort\uff09\u2014O(n+k)\uff1b\u9700\u8981O(k)\u989d\u5916\u7a7a\u95f4 \u57fa\u6570\u6392\u5e8f\uff08radix sort\uff09\u2014O(n\u00b7k)\uff1b\u9700\u8981O(n)\u989d\u5916\u7a7a\u95f4 \u4f8f\u5112\u6392\u5e8f\uff08gnome sort\uff09\u2014 O(n2) \u56fe\u4e66\u9986\u6392\u5e8f\uff08library sort\uff09\u2014 O(n log n)\u671f\u671b\u65f6\u95f4\uff1bO(n2)\u6700\u574f\u65f6\u95f4\uff1b\u9700\u8981(1+\u03b5)n\u989d\u5916\u7a7a\u95f4 \u5757\u6392\u5e8f\uff08block sort\uff09\u2014 O(n log n) \u4e0d\u7a33\u5b9a\u7684\u6392\u5e8f \u9009\u62e9\u6392\u5e8f\uff08selection sort\uff09\u2014O(n2) \u63d2\u5165\u6392\u5e8f\uff08insertion sort\uff09\u2014O(n2) \u5e0c\u5c14\u6392\u5e8f\uff08shell sort\uff09\u2014O(n log2 n)\u5982\u679c\u4f7f\u7528\u6700\u4f73\u7684\u73b0\u5728\u7248\u672c Clover\u6392\u5e8f\u7b97\u6cd5\uff08Clover sort\uff09\u2014O(n)\u671f\u671b\u65f6\u95f4\uff0cO(n2)\u6700\u574f\u60c5\u51b5 \u68b3\u6392\u5e8f\u2014 O(n log n) \u5806\u6392\u5e8f\uff08heap sort\uff09\u2014O(n log n) \u5e73\u6ed1\u6392\u5e8f\uff08smooth sort\uff09\u2014 O(n log n) \u5feb\u901f\u6392\u5e8f\uff08quick sort\uff09\u2014O(n log n)\u671f\u671b\u65f6\u95f4\uff0cO(n2)\u6700\u574f\u60c5\u51b5\uff1b\u5bf9\u4e8e\u5927\u7684\u3001\u968f\u673a\u6570\u5217\u8868\u4e00\u822c\u76f8\u4fe1\u662f\u6700\u5feb\u7684\u5df2\u77e5\u6392\u5e8f \u5185\u7701\u6392\u5e8f\uff08introsort\uff09\u2014O(n log n) \u8010\u5fc3\u6392\u5e8f\uff08patience sort\uff09\u2014O(n log n + k)\u6700\u574f\u60c5\u51b5\u65f6\u95f4\uff0c\u9700\u8981\u989d\u5916\u7684O(n + k)\u7a7a\u95f4\uff0c\u4e5f\u9700\u8981\u627e\u5230\u6700\u957f\u7684\u9012\u589e\u5b50\u5e8f\u5217\uff08longest increasing subsequence\uff09 \u5206\u7c7b","title":"\u6392\u5e8f\u7b97\u6cd5\u4ecb\u7ecd"},{"location":"data_algorithms/algorithms1_intro/#_1","text":"","title":"\u6392\u5e8f\u7b97\u6cd5\u4ecb\u7ecd"},{"location":"data_algorithms/algorithms1_intro/#_2","text":"https://zh.wikipedia.org/wiki/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95#.E7.A9.A9.E5.AE.9A.E6.80.A7 http://algorithm.yuanbin.me/zh-hans/basics_sorting/","title":"\u7b97\u6cd5\u5206\u6790"},{"location":"data_algorithms/algorithms1_intro/#_3","text":"\u65f6\u95f4\u590d\u6742\u5ea6 :\u6267\u884c\u65f6\u95f4(\u6bd4\u8f83\u548c\u4ea4\u6362\u6b21\u6570) \u7a7a\u95f4\u590d\u6742\u5ea6 :\u6240\u6d88\u8017\u7684\u989d\u5916\u5185\u5b58\u7a7a\u95f4 \u4f7f\u7528\u5c0f\u5806\u6808\u6216\u8868 \u4f7f\u7528\u94fe\u8868\u6216\u6307\u9488\u3001\u6570\u7ec4\u7d22\u5f15\u6765\u4ee3\u8868\u6570\u636e \u6392\u5e8f\u6570\u636e\u7684\u526f\u672c","title":"\u590d\u6742\u5ea6"},{"location":"data_algorithms/algorithms1_intro/#_4","text":"\u76f8\u540c\u503c\u7684\u9879\u6392\u5e8f\u65f6\u4f4d\u7f6e\u4e0d\u4f1a\u53d8\u5316\u5c31\u662f\u7a33\u5b9a\u7684 \u7a33\u5b9a\u7684\u6392\u5e8f \u5192\u6ce1\u6392\u5e8f\uff08bubble sort\uff09\u2014 O(n2) \u9e21\u5c3e\u9152\u6392\u5e8f\uff08cocktail sort\uff09\u2014O(n2) \u6876\u6392\u5e8f\uff08bucket sort\uff09\u2014O(n)\uff1b\u9700\u8981O(k)\u989d\u5916\u7a7a\u95f4 \u8ba1\u6570\u6392\u5e8f\uff08counting sort\uff09\u2014O(n+k)\uff1b\u9700\u8981O(n+k)\u989d\u5916\u7a7a\u95f4 \u5f52\u5e76\u6392\u5e8f\uff08merge sort\uff09\u2014O(n log n)\uff1b\u9700\u8981O(n)\u989d\u5916\u7a7a\u95f4 \u539f\u5730\u5f52\u5e76\u6392\u5e8f\u2014 O(n log2 n)\u5982\u679c\u4f7f\u7528\u6700\u4f73\u7684\u73b0\u5728\u7248\u672c \u4e8c\u53c9\u6392\u5e8f\u6811\u6392\u5e8f\uff08binary tree sort\uff09\u2014 O(n log n)\u671f\u671b\u65f6\u95f4\uff1bO(n2)\u6700\u574f\u65f6\u95f4\uff1b\u9700\u8981O(n)\u989d\u5916\u7a7a\u95f4 \u9e3d\u5de2\u6392\u5e8f\uff08pigeonhole sort\uff09\u2014O(n+k)\uff1b\u9700\u8981O(k)\u989d\u5916\u7a7a\u95f4 \u57fa\u6570\u6392\u5e8f\uff08radix sort\uff09\u2014O(n\u00b7k)\uff1b\u9700\u8981O(n)\u989d\u5916\u7a7a\u95f4 \u4f8f\u5112\u6392\u5e8f\uff08gnome sort\uff09\u2014 O(n2) \u56fe\u4e66\u9986\u6392\u5e8f\uff08library sort\uff09\u2014 O(n log n)\u671f\u671b\u65f6\u95f4\uff1bO(n2)\u6700\u574f\u65f6\u95f4\uff1b\u9700\u8981(1+\u03b5)n\u989d\u5916\u7a7a\u95f4 \u5757\u6392\u5e8f\uff08block sort\uff09\u2014 O(n log n) \u4e0d\u7a33\u5b9a\u7684\u6392\u5e8f \u9009\u62e9\u6392\u5e8f\uff08selection sort\uff09\u2014O(n2) \u63d2\u5165\u6392\u5e8f\uff08insertion sort\uff09\u2014O(n2) \u5e0c\u5c14\u6392\u5e8f\uff08shell sort\uff09\u2014O(n log2 n)\u5982\u679c\u4f7f\u7528\u6700\u4f73\u7684\u73b0\u5728\u7248\u672c Clover\u6392\u5e8f\u7b97\u6cd5\uff08Clover sort\uff09\u2014O(n)\u671f\u671b\u65f6\u95f4\uff0cO(n2)\u6700\u574f\u60c5\u51b5 \u68b3\u6392\u5e8f\u2014 O(n log n) \u5806\u6392\u5e8f\uff08heap sort\uff09\u2014O(n log n) \u5e73\u6ed1\u6392\u5e8f\uff08smooth sort\uff09\u2014 O(n log n) \u5feb\u901f\u6392\u5e8f\uff08quick sort\uff09\u2014O(n log n)\u671f\u671b\u65f6\u95f4\uff0cO(n2)\u6700\u574f\u60c5\u51b5\uff1b\u5bf9\u4e8e\u5927\u7684\u3001\u968f\u673a\u6570\u5217\u8868\u4e00\u822c\u76f8\u4fe1\u662f\u6700\u5feb\u7684\u5df2\u77e5\u6392\u5e8f \u5185\u7701\u6392\u5e8f\uff08introsort\uff09\u2014O(n log n) \u8010\u5fc3\u6392\u5e8f\uff08patience sort\uff09\u2014O(n log n + k)\u6700\u574f\u60c5\u51b5\u65f6\u95f4\uff0c\u9700\u8981\u989d\u5916\u7684O(n + k)\u7a7a\u95f4\uff0c\u4e5f\u9700\u8981\u627e\u5230\u6700\u957f\u7684\u9012\u589e\u5b50\u5e8f\u5217\uff08longest increasing subsequence\uff09","title":"\u7a33\u5b9a\u6027"},{"location":"data_algorithms/algorithms1_intro/#_5","text":"","title":"\u5206\u7c7b"},{"location":"docker/docker/","text":"docker https://www.gitbook.com/book/yeasy/docker_practice/details https://docs.docker.com/docker-for-mac/ http://docs.daocloud.io/allen-docker/ http://dockone.io/article/1302 http://gold.xitu.io/entry/56dd5d0fdf0eea0055b44a73 https://www.shiyanlou.com/questions/3307 https://icymint.me/2016/07/23/ShrinkDockerImages/ https://www.iron.io/microcontainers-tiny-portable-containers/ https://hub.docker.com/u/frolvlad/ \u4e09\u4e2a\u57fa\u672c\u6982\u5ff5 Docker \u5305\u62ec\u4e09\u4e2a\u57fa\u672c\u6982\u5ff5 \u955c\u50cf\uff08Image\uff09 Docker \u955c\u50cf\uff08Image\uff09\u5c31\u662f\u4e00\u4e2a\u53ea\u8bfb\u7684\u6a21\u677f\u3002 \u4f8b\u5982\uff1a\u4e00\u4e2a\u955c\u50cf\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u5b8c\u6574\u7684 ubuntu \u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\uff0c\u91cc\u9762\u4ec5\u5b89\u88c5\u4e86 Apache \u6216\u7528\u6237\u9700\u8981\u7684\u5176\u5b83\u5e94\u7528\u7a0b\u5e8f\u3002 \u5bb9\u5668\uff08Container\uff09 \u4ed3\u5e93\uff08Repository\uff09 mac docker boot2docker docker-machine tooldocker(docker-toolbox) docker for mac \u547d\u4ee4 launchctl list \u67e5\u770b\u542f\u52a8\u5217\u8868 \u8bbe\u7f6eDocker Hub\u52a0\u901f https://www.daocloud.io/mirror#accelerator-doc \u53f3\u952e\u70b9\u51fb\u684c\u9762\u9876\u680f\u7684 docker \u56fe\u6807\uff0c\u9009\u62e9 Preferences \uff0c\u5728 Advanced \u6807\u7b7e\u4e0b\u7684 Registry mirrors \u5217\u8868\u4e2d\u52a0\u5165\u4e0b\u9762\u7684\u955c\u50cf\u5730\u5740: http://xxx.m.daocloud.io \u70b9\u51fb Apply Restart \u6309\u94ae\u4f7f\u8bbe\u7f6e\u751f\u6548\u3002 \u955c\u50cf\u4ed3\u5e93 https://c.163.com/hub#/m/home/ https://hub.tenxcloud.com/ docker\u547d\u4ee4 docker pull ubuntu:12.04 \u62c9\u53d6\u955c\u50cf docker info docker ps docker start webserver \u5f00\u542f\u5bb9\u5668 docker run -d -p 80:80 --name webserver nginx \u5efa\u7acb\u5bb9\u5668 docker run -t -i ubuntu:12.04 /bin/bash \u8fd0\u884cubuntu\u955c\u50cf\u5e76\u6253\u5f00bash docker images \u5217\u51fa\u955c\u50cf docker rm -f webserver \u5220\u9664\u5bb9\u5668 docker rmi ngnix \u5220\u9664\u4e0b\u8f7d\u7684\u955c\u50cf https://docs.docker.com/compose/completion/ https://forums.docker.com/t/command-to-remove-all-unused-images/20/7","title":"Docker"},{"location":"docker/docker/#docker","text":"https://www.gitbook.com/book/yeasy/docker_practice/details https://docs.docker.com/docker-for-mac/ http://docs.daocloud.io/allen-docker/ http://dockone.io/article/1302 http://gold.xitu.io/entry/56dd5d0fdf0eea0055b44a73 https://www.shiyanlou.com/questions/3307 https://icymint.me/2016/07/23/ShrinkDockerImages/ https://www.iron.io/microcontainers-tiny-portable-containers/ https://hub.docker.com/u/frolvlad/","title":"docker"},{"location":"docker/docker/#_1","text":"Docker \u5305\u62ec\u4e09\u4e2a\u57fa\u672c\u6982\u5ff5","title":"\u4e09\u4e2a\u57fa\u672c\u6982\u5ff5"},{"location":"docker/docker/#image","text":"Docker \u955c\u50cf\uff08Image\uff09\u5c31\u662f\u4e00\u4e2a\u53ea\u8bfb\u7684\u6a21\u677f\u3002 \u4f8b\u5982\uff1a\u4e00\u4e2a\u955c\u50cf\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u5b8c\u6574\u7684 ubuntu \u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\uff0c\u91cc\u9762\u4ec5\u5b89\u88c5\u4e86 Apache \u6216\u7528\u6237\u9700\u8981\u7684\u5176\u5b83\u5e94\u7528\u7a0b\u5e8f\u3002","title":"\u955c\u50cf\uff08Image\uff09"},{"location":"docker/docker/#container","text":"","title":"\u5bb9\u5668\uff08Container\uff09"},{"location":"docker/docker/#repository","text":"","title":"\u4ed3\u5e93\uff08Repository\uff09"},{"location":"docker/docker/#mac-docker","text":"boot2docker docker-machine tooldocker(docker-toolbox) docker for mac","title":"mac docker"},{"location":"docker/docker/#_2","text":"launchctl list \u67e5\u770b\u542f\u52a8\u5217\u8868","title":"\u547d\u4ee4"},{"location":"docker/docker/#docker-hub","text":"https://www.daocloud.io/mirror#accelerator-doc \u53f3\u952e\u70b9\u51fb\u684c\u9762\u9876\u680f\u7684 docker \u56fe\u6807\uff0c\u9009\u62e9 Preferences \uff0c\u5728 Advanced \u6807\u7b7e\u4e0b\u7684 Registry mirrors \u5217\u8868\u4e2d\u52a0\u5165\u4e0b\u9762\u7684\u955c\u50cf\u5730\u5740: http://xxx.m.daocloud.io \u70b9\u51fb Apply Restart \u6309\u94ae\u4f7f\u8bbe\u7f6e\u751f\u6548\u3002","title":"\u8bbe\u7f6eDocker Hub\u52a0\u901f"},{"location":"docker/docker/#_3","text":"https://c.163.com/hub#/m/home/ https://hub.tenxcloud.com/","title":"\u955c\u50cf\u4ed3\u5e93"},{"location":"docker/docker/#docker_1","text":"docker pull ubuntu:12.04 \u62c9\u53d6\u955c\u50cf docker info docker ps docker start webserver \u5f00\u542f\u5bb9\u5668 docker run -d -p 80:80 --name webserver nginx \u5efa\u7acb\u5bb9\u5668 docker run -t -i ubuntu:12.04 /bin/bash \u8fd0\u884cubuntu\u955c\u50cf\u5e76\u6253\u5f00bash docker images \u5217\u51fa\u955c\u50cf docker rm -f webserver \u5220\u9664\u5bb9\u5668 docker rmi ngnix \u5220\u9664\u4e0b\u8f7d\u7684\u955c\u50cf https://docs.docker.com/compose/completion/ https://forums.docker.com/t/command-to-remove-all-unused-images/20/7","title":"docker\u547d\u4ee4"},{"location":"game_server/skynet/","text":"\u5927\u7eb2 skynet\u7b80\u4ecb skynet \u76ee\u5f55\u8fd0\u884c\u65f6 sproto https://github.com/skynetclub/book/blob/master/SUMMARY.md http://www.outsky.org/code/skynet-message-queue.html http://forthxu.com/blog/skynet.html","title":"\u5927\u7eb2"},{"location":"game_server/skynet/#_1","text":"skynet\u7b80\u4ecb skynet \u76ee\u5f55\u8fd0\u884c\u65f6 sproto https://github.com/skynetclub/book/blob/master/SUMMARY.md http://www.outsky.org/code/skynet-message-queue.html http://forthxu.com/blog/skynet.html","title":"\u5927\u7eb2"},{"location":"game_server/skynet/skynet_build/","text":"Skynet \u5165\u95e8 skynet \u73b0\u5728\u9ed8\u8ba4\u4f7f\u7528\u4e86\u81ea\u5e26\u7684 lua5.3 \u7248\u672c,\u5bf9\u5b98\u65b9\u7684\u539f\u7248\u6709\u4e9b\u5b9a\u5236\u5316\u7684\u5730\u65b9, \u8fd9\u91cc \u662f\u4e3b\u8981\u4fee\u6539\u5185\u5bb9. \u591a\u4e2alua\u7684vm\u4e2d\u5171\u4eabProto\u5bf9\u8c61 \u5171\u4eabstring\u8868 \u8fd8\u6709\u4e00\u4e9b\u4e3a\u4e86debug\u7684\u4fee\u6539 \u7f16\u8bd1skynet #clone\u9879\u76ee git clone https://github.com/cloudwu/skynet.git cd skynet #\u7f16\u8bd1\uff0c\u5e73\u53f0\u7c7b\u578blinux, macosx, freebsd make linux \u53ef\u80fd\u8981\u7684\u4f9d\u8d56\u5e93 autoconf readline ncurses gcc 4.6.0 \u6d4b\u8bd5 #\u4e00\u4e2a\u7ec8\u7aef\u542f\u52a8skynet\u670d\u52a1 ./skynet examples/config #\u53e6\u4e00\u4e2a\u7ec8\u7aef\u6765\u7528socket\u6765\u8fde\u63a5skynet ./3rd/lua/lua examples/client.lua \u76ee\u5f55\u7ed3\u6784 \u251c\u2500\u2500 3rd #\u7b2c\u4e09\u65b9\u5e93\u5982lua,jemalloc \u251c\u2500\u2500 Makefile \u251c\u2500\u2500 examples #\u793a\u4f8b\u4ee3\u7801 \u251c\u2500\u2500 lualib # lua\u5e93 \u251c\u2500\u2500 lualib-src # c\u5199\u7684\u5bfc\u51fa\u7ed9lua\u7528\u7684\u5e93 \u251c\u2500\u2500 platform.mk #make\u5e73\u53f0\u73af\u5883\u5b9a\u4e49 \u251c\u2500\u2500 service # lua\u670d\u52a1 \u251c\u2500\u2500 service-src # c\u670d\u52a1 \u251c\u2500\u2500 skynet-src # skynet\u6838\u5fc3\u4ee3\u7801 \u2514\u2500\u2500 test #\u6d4b\u8bd5\u4ee3\u7801","title":"skynet\u5feb\u901f\u5165\u95e8"},{"location":"game_server/skynet/skynet_build/#skynet","text":"skynet \u73b0\u5728\u9ed8\u8ba4\u4f7f\u7528\u4e86\u81ea\u5e26\u7684 lua5.3 \u7248\u672c,\u5bf9\u5b98\u65b9\u7684\u539f\u7248\u6709\u4e9b\u5b9a\u5236\u5316\u7684\u5730\u65b9, \u8fd9\u91cc \u662f\u4e3b\u8981\u4fee\u6539\u5185\u5bb9. \u591a\u4e2alua\u7684vm\u4e2d\u5171\u4eabProto\u5bf9\u8c61 \u5171\u4eabstring\u8868 \u8fd8\u6709\u4e00\u4e9b\u4e3a\u4e86debug\u7684\u4fee\u6539","title":"Skynet \u5165\u95e8"},{"location":"game_server/skynet/skynet_build/#skynet_1","text":"#clone\u9879\u76ee git clone https://github.com/cloudwu/skynet.git cd skynet #\u7f16\u8bd1\uff0c\u5e73\u53f0\u7c7b\u578blinux, macosx, freebsd make linux","title":"\u7f16\u8bd1skynet"},{"location":"game_server/skynet/skynet_build/#_1","text":"autoconf readline ncurses gcc 4.6.0","title":"\u53ef\u80fd\u8981\u7684\u4f9d\u8d56\u5e93"},{"location":"game_server/skynet/skynet_build/#_2","text":"#\u4e00\u4e2a\u7ec8\u7aef\u542f\u52a8skynet\u670d\u52a1 ./skynet examples/config #\u53e6\u4e00\u4e2a\u7ec8\u7aef\u6765\u7528socket\u6765\u8fde\u63a5skynet ./3rd/lua/lua examples/client.lua","title":"\u6d4b\u8bd5"},{"location":"game_server/skynet/skynet_build/#_3","text":"\u251c\u2500\u2500 3rd #\u7b2c\u4e09\u65b9\u5e93\u5982lua,jemalloc \u251c\u2500\u2500 Makefile \u251c\u2500\u2500 examples #\u793a\u4f8b\u4ee3\u7801 \u251c\u2500\u2500 lualib # lua\u5e93 \u251c\u2500\u2500 lualib-src # c\u5199\u7684\u5bfc\u51fa\u7ed9lua\u7528\u7684\u5e93 \u251c\u2500\u2500 platform.mk #make\u5e73\u53f0\u73af\u5883\u5b9a\u4e49 \u251c\u2500\u2500 service # lua\u670d\u52a1 \u251c\u2500\u2500 service-src # c\u670d\u52a1 \u251c\u2500\u2500 skynet-src # skynet\u6838\u5fc3\u4ee3\u7801 \u2514\u2500\u2500 test #\u6d4b\u8bd5\u4ee3\u7801","title":"\u76ee\u5f55\u7ed3\u6784"},{"location":"game_server/skynet/skynet_intro/","text":"skynet\u7b80\u4ecb skynet\u662f\u4e91\u98ce\u5f00\u6e90\u7684\u6e38\u620f\u670d\u52a1\u5668\u6846\u67b6\u3002\u8981\u4e86\u89e3skynet\u53ef\u4ee5\u5148\u4ece\u535a\u5ba2\u548cgithub\u7684\u4ee3\u7801example\u5165\u624b https://github.com/cloudwu/skynet/ https://github.com/cloudwu/skynet/wiki http://blog.codingnow.com/ \u8fd9\u4e2a\u6846\u67b6\u6709\u4ec0\u4e48\u7279\u70b9\u5462? \u5355\u8fdb\u7a0b\u591a\u8fdb\u7a0b\u6a21\u578b \u6838\u5fc3\u6846\u67b6\u903b\u8f91\u5c01\u88c5\u5728 c \u5c42,\u5d4c\u5165\u4e86 lua \u652f\u6301 \u670d\u52a1\u6982\u5ff5,\u5373\u5355\u4e2a\u63d0\u4f9b\u903b\u8f91\u652f\u6301\u7684 lua \u865a\u62df\u673a\u9694\u79bb\u73af\u5883,\u5404\u670d\u52a1\u901a\u8fc7\u6d88\u606f\u961f\u5217\u7684\u65b9\u5f0f\u901a\u8baf \u5f15\u5165\u534f\u7a0b\u5b9e\u73b0\u540c\u6b65\u7f16\u7a0b \u7f51\u7edc\u90e8\u5206\u5b9e\u73b0\u4e86\u5c01\u88c5\u4e86 epoll \u7b49io\u6a21\u578b. \u4e24\u79cd\u96c6\u7fa4\u6a21\u5f0f \u7c7b google protobuffers \u7684 sproto \u901a\u8baf\u534f\u8bae \u6570\u636e\u5e93 redis , mongo , mysql \u7b49\u6269\u5c55\u652f\u6301","title":"skynet\u7b80\u4ecb"},{"location":"game_server/skynet/skynet_intro/#skynet","text":"skynet\u662f\u4e91\u98ce\u5f00\u6e90\u7684\u6e38\u620f\u670d\u52a1\u5668\u6846\u67b6\u3002\u8981\u4e86\u89e3skynet\u53ef\u4ee5\u5148\u4ece\u535a\u5ba2\u548cgithub\u7684\u4ee3\u7801example\u5165\u624b https://github.com/cloudwu/skynet/ https://github.com/cloudwu/skynet/wiki http://blog.codingnow.com/","title":"skynet\u7b80\u4ecb"},{"location":"game_server/skynet/skynet_intro/#_1","text":"\u5355\u8fdb\u7a0b\u591a\u8fdb\u7a0b\u6a21\u578b \u6838\u5fc3\u6846\u67b6\u903b\u8f91\u5c01\u88c5\u5728 c \u5c42,\u5d4c\u5165\u4e86 lua \u652f\u6301 \u670d\u52a1\u6982\u5ff5,\u5373\u5355\u4e2a\u63d0\u4f9b\u903b\u8f91\u652f\u6301\u7684 lua \u865a\u62df\u673a\u9694\u79bb\u73af\u5883,\u5404\u670d\u52a1\u901a\u8fc7\u6d88\u606f\u961f\u5217\u7684\u65b9\u5f0f\u901a\u8baf \u5f15\u5165\u534f\u7a0b\u5b9e\u73b0\u540c\u6b65\u7f16\u7a0b \u7f51\u7edc\u90e8\u5206\u5b9e\u73b0\u4e86\u5c01\u88c5\u4e86 epoll \u7b49io\u6a21\u578b. \u4e24\u79cd\u96c6\u7fa4\u6a21\u5f0f \u7c7b google protobuffers \u7684 sproto \u901a\u8baf\u534f\u8bae \u6570\u636e\u5e93 redis , mongo , mysql \u7b49\u6269\u5c55\u652f\u6301","title":"\u8fd9\u4e2a\u6846\u67b6\u6709\u4ec0\u4e48\u7279\u70b9\u5462?"},{"location":"ide/Xcode/","text":"\u4e0b\u8f7d apple\u5b98\u65b9\u4e0b\u8f7d https://developer.apple.com/downloads/ \u7f51\u53cb\u4e0b\u8f7d\u7684\u539f\u7248\u955c\u50cf http://blog.csdn.net/zhangao0086/article/details/38491271 \u9a8c\u8bc1xcode\u662f\u5426\u662f\u6b63\u7248 spctl --assess --verbose /Applications/Xcode.app \u51fa\u73b0 /Applications/Xcode.app: accepted source=Apple System \u5219\u662f\u5b98\u65b9\u6765\u6e90 Xcode\u5e38\u7528\u7684\u5feb\u6377\u952e cmd + shift + o \u5feb\u901f\u67e5\u627e\u7c7b\uff0c\u53ef\u4ee5\u5feb\u901f\u8df3\u5230\u6307\u5b9a\u7c7b\u7684\u6e90\u7801\u4e2d ctrl + 6 \u5217\u51fa\u5f53\u524d\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u65b9\u6cd5 cmd + 1 \u5207\u6362\u6210Project Navigator cmd + ctrl + up \u5728.h\u548c.m\u6587\u4ef6\u4e4b\u95f4\u5207\u6362 cmd + enter \u5207\u6362\u6210standard editor cmd + opt + enter \u5207\u6362\u6210 assistant editor cmd + shift + y \u5207\u6362console View\u7684\u73b0\u5b9e\u6216\u9690\u85cf cmd + 0 \u9690\u85cf\u5de6\u8fb9\u5f97\u5bfc\u822a\u533a cmd +opt + 0 \u9690\u85cf\u53f3\u8fb9\u7684\u5de5\u5177\u533a cmd + ctrl + Left/Right \u5230\u4e0a/\u4e0b\u4e00\u6b21\u7f16\u8f91\u7684\u4f4d\u7f6e cmd + opt +j \u8df3\u8f6c\u5230\u6587\u4ef6\u8fc7\u6ee4\u533a cmd + shift +F \u5728\u5de5\u7a0b\u4e2d\u67e5\u627e cmd + R \u8fd0\u884c cmd + b \u7f16\u8bd1 cmd +shift + k \u6e05\u7a7a\u7f16\u8bd1\u597d\u7684\u6587\u4ef6 cmd + . \u7ed3\u675f\u672c\u6b21\u8c03\u8bd5 ESC \u8c03\u51fa\u4ee3\u7801\u8865\u5168\u529f\u80fd cmd + t \u65b0\u5efa\u4e00\u4e2atab\u680f cmd + shift + [ \u5728tab\u680f\u4e4b\u95f4\u5207\u6362 cmd + \u5355\u51fb \u67e5\u770b\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0 opt + \u5355\u51fb \u67e5\u770b\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0 Xcode \u8bbe\u7f6e\u53ca\u95ee\u9898 \u8bbe\u7f6e Xcode Release\u7248\u672c -- manager Schement \u66f4\u6539\u771f\u673a\u8c03\u8bd5os\u7248\u672c PROJECT -- Build Settings -- Deployment -- IOS Deployment Target Xcode\u7f16\u7801 \u6253\u5f00Xcode\u7684Preferences-----Text Editing---Editing----Default text encoding \u5b89\u88c5Xcode \u63d2\u4ef6\u7ba1\u7406\u5668: mkdir -p ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins; curl -L http://goo.gl/xfmmt | tar xv -C ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins \u95ee\u9898 xcode5 ios7 framework not found IOKit \u89e3\u51b3\u529e\u6cd5\uff0c\u6253\u5f00\u7ec8\u7aef\uff1a cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.0.sdk/System/Library/Frameworks/IOKit.framework sudo ln -s Versions/A/IOKit Choose a destination with a supported architecture in order to run on this device. \u5176\u5b9e\u53ea\u8981\u628a\u7f16\u8bd1\u5668\u6539\u6210\u73b0\u5728\u7684LLVM\u5373\u53ef\u3002 \u4fee\u6539\u4f4d\u7f6eProject- Build Settings - Build Options. \u4f7f\u7528Xcode5 SVN \u51fa\u73b0\u95ee\u9898 The operation couldn\u2019t be completed. (NSURLErrorDomain error -1012.) \u89e3\u51b3\u65b9\u6cd5\uff1a \u6253\u5f00\u7ec8\u7aef \u7136\u540e\u8f93\u5165\u5982\u4e0b\u547d\u4ee4 svn ls xxxx (xxx\u662f\u4f60SVN Server\u7684\u5730\u5740) \u8fd9\u91cc\u8be2\u95ee\u4f60\u662f\u5426\u5141\u8bb8\u8fd9\u4e2a\u5730\u5740\u7684\u8bbf\u95ee\uff0c\u6211\u4eec\u8f93\u5165 \u201c p \u201d\uff0c\u7136\u540e\u56de\u8f66\u5373\u53ef\u3002 \u9a8c\u8bc1\u662f\u5426OK\u7684\u65b9\u6cd5\uff1a \u518d\u6b21\u63a7\u5236\u53f0\u8f93\u5165 svn ls xxxx \u5f53\u4e0d\u518d\u63d0\u793a\u8ba9\u4f60\u9009\u62e9\u662f\u5426\u5141\u8bb8\u7684\u63d0\u793a\uff0c\u800c\u662f\u76f4\u63a5\u63a7\u5236\u53f0\u51fa\u73b0\u5982\u4e0b\u4fe1\u606f\uff0c\u8bf4\u660eOK\u4e86","title":"xcode  \u914d\u7f6e"},{"location":"ide/Xcode/#_1","text":"apple\u5b98\u65b9\u4e0b\u8f7d https://developer.apple.com/downloads/ \u7f51\u53cb\u4e0b\u8f7d\u7684\u539f\u7248\u955c\u50cf http://blog.csdn.net/zhangao0086/article/details/38491271","title":"\u4e0b\u8f7d"},{"location":"ide/Xcode/#xcode","text":"spctl --assess --verbose /Applications/Xcode.app \u51fa\u73b0 /Applications/Xcode.app: accepted source=Apple System \u5219\u662f\u5b98\u65b9\u6765\u6e90","title":"\u9a8c\u8bc1xcode\u662f\u5426\u662f\u6b63\u7248"},{"location":"ide/Xcode/#xcode_1","text":"cmd + shift + o \u5feb\u901f\u67e5\u627e\u7c7b\uff0c\u53ef\u4ee5\u5feb\u901f\u8df3\u5230\u6307\u5b9a\u7c7b\u7684\u6e90\u7801\u4e2d ctrl + 6 \u5217\u51fa\u5f53\u524d\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u65b9\u6cd5 cmd + 1 \u5207\u6362\u6210Project Navigator cmd + ctrl + up \u5728.h\u548c.m\u6587\u4ef6\u4e4b\u95f4\u5207\u6362 cmd + enter \u5207\u6362\u6210standard editor cmd + opt + enter \u5207\u6362\u6210 assistant editor cmd + shift + y \u5207\u6362console View\u7684\u73b0\u5b9e\u6216\u9690\u85cf cmd + 0 \u9690\u85cf\u5de6\u8fb9\u5f97\u5bfc\u822a\u533a cmd +opt + 0 \u9690\u85cf\u53f3\u8fb9\u7684\u5de5\u5177\u533a cmd + ctrl + Left/Right \u5230\u4e0a/\u4e0b\u4e00\u6b21\u7f16\u8f91\u7684\u4f4d\u7f6e cmd + opt +j \u8df3\u8f6c\u5230\u6587\u4ef6\u8fc7\u6ee4\u533a cmd + shift +F \u5728\u5de5\u7a0b\u4e2d\u67e5\u627e cmd + R \u8fd0\u884c cmd + b \u7f16\u8bd1 cmd +shift + k \u6e05\u7a7a\u7f16\u8bd1\u597d\u7684\u6587\u4ef6 cmd + . \u7ed3\u675f\u672c\u6b21\u8c03\u8bd5 ESC \u8c03\u51fa\u4ee3\u7801\u8865\u5168\u529f\u80fd cmd + t \u65b0\u5efa\u4e00\u4e2atab\u680f cmd + shift + [ \u5728tab\u680f\u4e4b\u95f4\u5207\u6362 cmd + \u5355\u51fb \u67e5\u770b\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0 opt + \u5355\u51fb \u67e5\u770b\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0","title":"Xcode\u5e38\u7528\u7684\u5feb\u6377\u952e"},{"location":"ide/Xcode/#xcode_2","text":"","title":"Xcode  \u8bbe\u7f6e\u53ca\u95ee\u9898"},{"location":"ide/Xcode/#_2","text":"Xcode Release\u7248\u672c -- manager Schement \u66f4\u6539\u771f\u673a\u8c03\u8bd5os\u7248\u672c PROJECT -- Build Settings -- Deployment -- IOS Deployment Target Xcode\u7f16\u7801 \u6253\u5f00Xcode\u7684Preferences-----Text Editing---Editing----Default text encoding \u5b89\u88c5Xcode \u63d2\u4ef6\u7ba1\u7406\u5668: mkdir -p ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins; curl -L http://goo.gl/xfmmt | tar xv -C ~/Library/Application\\ Support/Developer/Shared/Xcode/Plug-ins","title":"\u8bbe\u7f6e"},{"location":"ide/Xcode/#_3","text":"xcode5 ios7 framework not found IOKit \u89e3\u51b3\u529e\u6cd5\uff0c\u6253\u5f00\u7ec8\u7aef\uff1a cd /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.0.sdk/System/Library/Frameworks/IOKit.framework sudo ln -s Versions/A/IOKit Choose a destination with a supported architecture in order to run on this device. \u5176\u5b9e\u53ea\u8981\u628a\u7f16\u8bd1\u5668\u6539\u6210\u73b0\u5728\u7684LLVM\u5373\u53ef\u3002 \u4fee\u6539\u4f4d\u7f6eProject- Build Settings - Build Options. \u4f7f\u7528Xcode5 SVN \u51fa\u73b0\u95ee\u9898 The operation couldn\u2019t be completed. (NSURLErrorDomain error -1012.) \u89e3\u51b3\u65b9\u6cd5\uff1a \u6253\u5f00\u7ec8\u7aef \u7136\u540e\u8f93\u5165\u5982\u4e0b\u547d\u4ee4 svn ls xxxx (xxx\u662f\u4f60SVN Server\u7684\u5730\u5740) \u8fd9\u91cc\u8be2\u95ee\u4f60\u662f\u5426\u5141\u8bb8\u8fd9\u4e2a\u5730\u5740\u7684\u8bbf\u95ee\uff0c\u6211\u4eec\u8f93\u5165 \u201c p \u201d\uff0c\u7136\u540e\u56de\u8f66\u5373\u53ef\u3002 \u9a8c\u8bc1\u662f\u5426OK\u7684\u65b9\u6cd5\uff1a \u518d\u6b21\u63a7\u5236\u53f0\u8f93\u5165 svn ls xxxx \u5f53\u4e0d\u518d\u63d0\u793a\u8ba9\u4f60\u9009\u62e9\u662f\u5426\u5141\u8bb8\u7684\u63d0\u793a\uff0c\u800c\u662f\u76f4\u63a5\u63a7\u5236\u53f0\u51fa\u73b0\u5982\u4e0b\u4fe1\u606f\uff0c\u8bf4\u660eOK\u4e86","title":"\u95ee\u9898"},{"location":"ide/autohotkey/","text":"autohotkey \u591a\u5c4f \u8bbe\u7f6e\u9f20\u6807\u8fdb\u51fa\u5c4f\u5e55\u65b9\u5411: \u63a7\u5236\u9762\u677f\\\u6240\u6709\u63a7\u5236\u9762\u677f\u9879\\\u663e\u793a\\\u5c4f\u5e55\u5206\u8fa8\u7387\\\u66f4\u6539\u663e\u793a\u5668\u5916\u89c2,\u5c06\u53cc\u5c4f\u5e55\u7684\u4f4d\u7f6e\u8c03\u6574 \u5c06\u4e00\u4e2a\u6d3b\u52a8\u7a97\u53e3\u5207\u6362\u5230\u4e0b\u4e00\u663e\u793a\u5668 win + \u5de6\u7bad\u5934/\u53f3\u7bad\u5934 \u5c06\u4e00\u4e2a\u6d3b\u52a8\u7a97\u53e3\u5927\u5316/\u5c0f\u5316 win + \u4e0a\u7bad\u5934/\u4e0b\u7bad\u5934 \u5c06\u9f20\u6807\u5207\u6362\u5230\u4e0b\u4e00\u5c4f\u5e55\u534a\u6fc0\u6d3b\u5176\u4f4d\u7f6e\u4e0b\u7684\u7a97\u53e3 \u591a\u5c4f\u4e0b\u5feb\u6377\u952e\u7ed1\u5b9a\u5207\u6362\u7a97\u53e3 \u53cc\u5c4f\u6280\u5de7 windows: http://dualmonitortool.sourceforge.net/dmt_swapscreen.html http://www.ntwind.com/software/vistaswitcher.html https://www.realtimesoft.com/ultramon/download.asp mac: https://zhuanlan.zhihu.com/p/20258341 https://itunes.apple.com/us/app/witch/id412485838?mt=12 autohotkey https://autohotkey.com/ http://hahack.com/codes/ahk-awesome/ https://xbeta.info/autohotkey-guide-2.htm#toc1 http://ahkcn.github.io/docs/AutoHotkey.htm","title":"Autohotkey"},{"location":"ide/autohotkey/#autohotkey","text":"","title":"autohotkey"},{"location":"ide/autohotkey/#_1","text":"\u8bbe\u7f6e\u9f20\u6807\u8fdb\u51fa\u5c4f\u5e55\u65b9\u5411: \u63a7\u5236\u9762\u677f\\\u6240\u6709\u63a7\u5236\u9762\u677f\u9879\\\u663e\u793a\\\u5c4f\u5e55\u5206\u8fa8\u7387\\\u66f4\u6539\u663e\u793a\u5668\u5916\u89c2,\u5c06\u53cc\u5c4f\u5e55\u7684\u4f4d\u7f6e\u8c03\u6574 \u5c06\u4e00\u4e2a\u6d3b\u52a8\u7a97\u53e3\u5207\u6362\u5230\u4e0b\u4e00\u663e\u793a\u5668 win + \u5de6\u7bad\u5934/\u53f3\u7bad\u5934 \u5c06\u4e00\u4e2a\u6d3b\u52a8\u7a97\u53e3\u5927\u5316/\u5c0f\u5316 win + \u4e0a\u7bad\u5934/\u4e0b\u7bad\u5934 \u5c06\u9f20\u6807\u5207\u6362\u5230\u4e0b\u4e00\u5c4f\u5e55\u534a\u6fc0\u6d3b\u5176\u4f4d\u7f6e\u4e0b\u7684\u7a97\u53e3 \u591a\u5c4f\u4e0b\u5feb\u6377\u952e\u7ed1\u5b9a\u5207\u6362\u7a97\u53e3","title":"\u591a\u5c4f"},{"location":"ide/autohotkey/#_2","text":"windows: http://dualmonitortool.sourceforge.net/dmt_swapscreen.html http://www.ntwind.com/software/vistaswitcher.html https://www.realtimesoft.com/ultramon/download.asp mac: https://zhuanlan.zhihu.com/p/20258341 https://itunes.apple.com/us/app/witch/id412485838?mt=12","title":"\u53cc\u5c4f\u6280\u5de7"},{"location":"ide/autohotkey/#autohotkey_1","text":"https://autohotkey.com/ http://hahack.com/codes/ahk-awesome/ https://xbeta.info/autohotkey-guide-2.htm#toc1 http://ahkcn.github.io/docs/AutoHotkey.htm","title":"autohotkey"},{"location":"ide/beyond_compare/","text":"Beyond Compare 4 \u5e8f\u5217\u53f7 http://onhax.net/beyond-compare/ http://onhax.net/beyond-compare-pro-serial-key-is-herelatest/ Serial Key","title":"Beyond compare"},{"location":"ide/beyond_compare/#beyond-compare-4","text":"http://onhax.net/beyond-compare/ http://onhax.net/beyond-compare-pro-serial-key-is-herelatest/ Serial Key","title":"Beyond Compare 4 \u5e8f\u5217\u53f7"},{"location":"ide/sublimetext/","text":"sublimeText 3 \u914d\u7f6e \u6587\u6863 https://www.sublimetext.com/docs/3/ http://docs.sublimetext.info/en/latest/index.html https://sublime-undocs-zh.readthedocs.io/en/latest/index.html http://sweetme.at/2013/08/08/sublime-text-keyboard-shortcuts/ Package Control\u4f7f\u7528 \u5b89\u88c5Package Control ctrl+~ \u6253\u5f00\u5bfc\u5165\u6846 sublimeText3 : import urllib.request , os ; pf = Package Control.sublime-package ; ipp = sublime . installed_packages_path (); urllib . request . install_opener ( urllib . request . build_opener ( urllib . request . ProxyHandler ()) ); open ( os . path . join ( ipp , pf ), wb ) . write ( urllib . request . urlopen ( http://sublime.wbond.net/ + pf . replace ( , %20 )) . read ()) \u7528Package Control\u5b89\u88c5\u63d2\u4ef6\u7684\u65b9\u6cd5\uff1a \u6309\u4e0b Ctrl+Shift+P \u8c03\u51fa\u547d\u4ee4\u9762\u677f,\u8f93\u5165 install \u8c03\u51fa Install Package \u9009\u9879\u5e76\u56de\u8f66,\u7136\u540e\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u8981\u5b89\u88c5\u7684\u63d2\u4ef6\u3002 \u63d2\u4ef6\u5217\u8868: https://packagecontrol.io \u5176\u5b83\u529f\u80fd Add Repository : \u4ece\u6307\u5b9agit\u4e0a\u5b89\u88c5\u63d2\u4ef6\uff0c\u9700\u7ed9\u51fa\u4e00\u4e2agit\u5e93\u76ee\u5f55,\u5982 https://github.com/username/repo Remove Package : \u79fb\u9664\u63d2\u4ef6,\u5b89\u88c5\u7684\u63d2\u4ef6\u5217\u8868\u8bb0\u5f55\u5728: Packages/User/Package Control.sublime-settings ,\u6211\u7684\u672c\u5730\u76ee\u5f55\u662f: Sublime Text Build 3114 x64\\Data\\Packages\\User Enable Package : \u542f\u7528\u63d2\u4ef6 Disable Package : \u7981\u7528\u63d2\u4ef6 Discover Packages : \u6253\u5f00web\u7ad9\u67e5\u627e Upgrade/Overwrite All Packages : \u5347\u7ea7\u5e76\u8986\u76d6\u6240\u6709package\uff0c\u5305\u62ec\u4e0d\u662f\u901a\u8fc7package control\u5b89\u88c5\u7684 Upgrade Package : \u5217\u51fa\u53ef\u4f9b\u5347\u7ea7\u7684package Data \u76ee\u5f55 ==================== Windows : :file: %APPDATA%\\\\Sublime Text 3 OS X : :file: ~/Library/Application Support/Sublime Text 3 * Linux : :file: ~/.config/sublime-text-3 \u914d\u7f6e \u5b57\u4f53 Preferences- File Setting-User \uff0c\u6253\u5f00\u914d\u7f6e\u6587\u4ef6\uff0c\u770b\u91cc\u9762\u6709\u6ca1font_face\u914d\u7f6e\u9879\uff0c\u6709\u5c31\u76f4\u63a5\u6539\uff0c\u6ca1\u6709\u5c31\u81ea\u5df1\u52a0\u4e0a\uff0c\u53ef\u80fd\u7684\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a { color_scheme : Packages/Color Scheme - Default/Black-Pearl2.tmTheme , font_face : \u5fae\u8f6f\u96c5\u9ed1 , font_size : 10.0 } \u914d\u8272: http://colorsublime.com/ \u6280\u5de7 \u600e\u6837\u628a\u5b57\u7b26\u66ff\u6362\u6210\u6362\u884c \u6253\u5f00\u6b63\u5219\u5339\u914d\u6a21\u5f0f\u8f93\u5165: \\n \u6bcf\u884c\u7684\u4ee3\u7801\u90fd\u88ab\u7528\u6846\u6846\u4f4f \u5728Anaconda\u8bbe\u7f6e\u91cc\u627e\u5230pep8\u628atrue\u6539\u4e3afalse jump-to-previous-cursor-position-shortcut to jump back: Alt + - to jump forward: Alt + Shift + - or through Goto menu. ( SublimeText 3 , build 3114 ) Open the console and type sublime.log_commands ( True ) sublime.log_input ( True ) \u7f29\u8fdb\u8bbe\u7f6e http://feliving.github.io/Sublime-Text-3-Documentation/indentation.html \u5feb\u6377\u952e Win ctrl+` \u547d\u4ee4\u5bfc\u5165 ctrl+shift+p \u5e38\u7528\u547d\u4ee4 ctrl+p \u6587\u4ef6\u5207\u6362 ctrl +r \u67e5\u770b\u7c7b\u7684\u65b9\u6cd5 Ctrl+L \u9009\u62e9\u6574\u884c\uff08\u6309\u4f4f-\u7ee7\u7eed\u9009\u62e9\u4e0b\u884c\uff09 Ctrl+KK \u4ece\u5149\u6807\u5904\u5220\u9664\u81f3\u884c\u5c3e Ctrl+Shift+K \u5220\u9664\u6574\u884c Ctrl+Shift+D \u590d\u5236\u5149\u6807\u6240\u5728\u6574\u884c\uff0c\u63d2\u5165\u5728\u8be5\u884c\u4e4b\u524d Ctrl+J \u5408\u5e76\u884c\uff08\u5df2\u9009\u62e9\u9700\u8981\u5408\u5e76\u7684\u591a\u884c\u65f6\uff09 Ctrl+KU \u6539\u4e3a\u5927\u5199 Ctrl+KL \u6539\u4e3a\u5c0f\u5199 Ctrl+D \u9009\u8bcd \uff08\u6309\u4f4f-\u7ee7\u7eed\u9009\u62e9\u4e0b\u4e2a\u76f8\u540c\u7684\u5b57\u7b26\u4e32\uff09 Ctrl+M \u5149\u6807\u79fb\u52a8\u81f3\u62ec\u53f7\u5185\u5f00\u59cb\u6216\u7ed3\u675f\u7684\u4f4d\u7f6e Ctrl+Shift+M \u9009\u62e9\u62ec\u53f7\u5185\u7684\u5185\u5bb9\uff08\u6309\u4f4f-\u7ee7\u7eed\u9009\u62e9\u7236\u62ec\u53f7\uff09 Ctrl+/ \u6ce8\u91ca\u6574\u884c\uff08\u5982\u5df2\u9009\u62e9\u5185\u5bb9\uff0c\u540c\u201cCtrl+Shift+/\u201d\u6548\u679c\uff09 Ctrl+Shift+/ \u6ce8\u91ca\u5df2\u9009\u62e9\u5185\u5bb9 Ctrl+Space \u81ea\u52a8\u5b8c\u6210\uff08win\u4e0e\u7cfb\u7edf\u5feb\u6377\u952e\u51b2\u7a81\uff0c\u9700\u4fee\u6539\uff09 Ctrl+Z \u64a4\u9500 Ctrl+Y \u6062\u590d\u64a4\u9500 Ctrl+Shift+V \u7c98\u8d34\u5e76\u81ea\u52a8\u7f29\u8fdb\uff08\u5176\u5b83\u5144\u5f1f\u5199\u7684\uff0c\u5b9e\u6d4bwin\u7cfb\u7edf\u81ea\u52a8\u7f29\u8fdb\u65e0\u6548\uff09 Ctrl+M \u5149\u6807\u8df3\u81f3\u5bf9\u5e94\u7684\u62ec\u53f7 Alt+. \u95ed\u5408\u5f53\u524d\u6807\u7b7e Ctrl+Shift+A \u9009\u62e9\u5149\u6807\u4f4d\u7f6e\u7236\u6807\u7b7e\u5bf9\u513f Ctrl+Shift+[ \u6298\u53e0\u4ee3\u7801 Ctrl+Shift+] \u5c55\u5f00\u4ee3\u7801 Ctrl+KT \u6298\u53e0\u5c5e\u6027 Ctrl+K0 \u5c55\u5f00\u6240\u6709 Ctrl+U \u8f6f\u64a4\u9500 Ctrl+T \u8bcd\u4e92\u6362 Shift+Tab \u53bb\u9664\u7f29\u8fdb Ctrl+Shift+UP \u4e0e\u4e0a\u884c\u4e92\u6362 Ctrl+Shift+DOWN \u4e0e\u4e0b\u884c\u4e92\u6362 Ctrl+K Backspace \u4ece\u5149\u6807\u5904\u5220\u9664\u81f3\u884c\u9996 Ctrl+Enter \u63d2\u5165\u884c\u540e Ctrl+Shift Enter \u63d2\u5165\u884c\u524d F9 \u884c\u6392\u5e8f\uff08\u6309a-z\uff09 ALT+SHIFT+2 \u5206\u5c4f Ctrl + Home - to the beginning of the file Ctrl + End - to the end of the fil \u5149\u6807\u79fb\u52a8\u5230\u9996\u5c3e\u8bbe\u7f6e { keys : [ ctrl+k , ctrl+h ], command : move_to , args : { to : bol , extend : false } } , { keys : [ ctrl+k , ctrl+e ], command : move_to , args : { to : eol , extend : false } } \u5149\u6807\u79fb\u52a8\u5230\u6587\u4ef6\u5934\u5c3e ctrl+home :\u6587\u4ef6\u5934 ctrl+ end :\u6587\u4ef6\u5c3e \u5149\u6807\u79fb\u52a8 ctrl+enter #\u53e6\u8d77\u4e00\u884c ctrl+\u7bad\u5934\u4e0a #\u9501\u5b9a\u5f53\u524d\u884c\u5411\u4e0a\u79fb\u52a8 ctrl+ - #\u5149\u6807\u79fb\u5355\u8bcd cacel build { keys : [ ctrl+shift+c ], command : exec , args : { kill : true } } Mac \u2318\u21e7P \u547d\u4ee4\u63d0\u793a \u2303G \u524d\u5f80\u884c \u2318K/B \u5f00\u5173\u4fa7\u680f \u2318L \u9009\u62e9\u884c (\u91cd\u590d\u6309\u4e0b\u5c06\u4e0b\u4e00\u884c\u52a0\u5165\u9009\u62e9) \u2303\u21e7K \u5220\u9664\u884c \u2318\u21e7D \u590d\u5236(\u591a)\u884c \u2318KU \u6539\u4e3a\u5927\u5199 \u2318KL \u6539\u4e3a\u5c0f\u5199 \u2318 / \u6ce8\u91ca \u2318\u2325 / \u5757\u6ce8\u91ca \u2303M \u8df3\u8f6c\u81f3\u5bf9\u5e94\u7684\u62ec\u53f7 + \u2318F \u67e5\u627e \u2318\u2325F \u66ff\u6362 \u2318\u2325G \u67e5\u627e\u4e0b\u4e00\u4e2a\u7b26\u5408\u5f53\u524d\u6240\u9009\u7684\u5185\u5bb9 \u2318\u2303G \u67e5\u627e\u6240\u6709\u7b26\u5408\u5f53\u524d\u6240\u9009\u7684\u5185\u5bb9\u8fdb\u884c\u591a\u91cd\u7f16\u8f91 \u2318\u21e7F \u5728\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u4e2d\u8fdb\u884c\u67e5\u627e \u2318\u23252 \u53cc\u5217\u62c6\u5206\u7a97\u53e3 \u2303[1,2,3,4] \u7126\u70b9\u79fb\u52a8\u81f3\u76f8\u5e94\u7ec4 \u2303\u21e7[1,2,3,4] \u5c06\u5f53\u524d\u6587\u4ef6\u79fb\u52a8\u81f3\u76f8\u5e94\u7ec4 \u5e38\u7528\u63d2\u4ef6: auto-save \u53ef\u4ee5\u81ea\u52a8\u4fdd\u5b58\u8f93\u5165\u5185\u5bb9\u7684\u63d2\u4ef6,\u6211\u7684\u914d\u7f6e\u5982\u4e0b,\u4fee\u65395\u79d2\u540e\u65e0\u64cd\u4f5c\u5219\u81ea\u52a8\u4fdd\u5b58: { auto_save_on_modified : true , auto_save_delay_in_seconds : 5 , } Chinese\u200bTranslator \u7ffb\u8bd1\u63d2\u4ef6,\u9009\u4e2d\u4e2d\u6587\u7ffb\u8bd1\u6210\u82f1\u6587,\u82f1\u6587\u7ffb\u8bd1\u6210\u4e2d\u6587 \u5feb\u6377\u952e \u9009\u4e2d\u7ffb\u8bd1: ctrl+shift+c \u91cd\u65b0\u7ed1\u5b9a: //translate { keys : [ ctrl+shift+t ], command : translate }, BracketHighlighter \u6807\u7b7e\u5339\u914d Colorsublime \u914d\u7f6e\u7ba1\u7406\u5668 + Colorsublime:Browser Theme :\u6253\u5f00colorsublime\u7f51\u7ad9\u6d4f\u89c8 + Colorsublime:Install Theme : \u5b89\u88c5\u914d\u8272\u65b9\u6848 Convert\u200bTo\u200bUTF8 \u4e0d\u89e3\u91ca,\u8f6c\u6362\u7f16\u7801: \u201cFile Set File Encoding to Emmet \u524d\u7aef\u7801\u5b57\u795e\u5668 FavoriteFiles sublime \u4e66\u7b7e\u589e\u5f3a\u7248,\u539f\u7406\u5c31\u662f\u628a\u8981\u5173\u6ce8\u7684\u6587\u4ef6\u5206\u7ec4\u4fdd\u5b58\u5230\u4e00\u4e2ajson\u6587\u4ef6\u4e2d + FavoriteFiles:add file(s) : \u6dfb\u52a0\u5230\u7ec4\u91cc + FavoriteFiles:open file: \u6253\u5f00\u4e66\u7b7e\u4e2d\u6587\u4ef6 + FavoriteFiles:remove file(s) : \u79fb\u9664\u6587\u4ef6 File\u200bDiffs \u6bd4\u8f83\u6587\u4ef6,\u5e73\u65f6\u5355\u6587\u4ef6\u7528\u8fd9\u4e2a,\u76ee\u5f55\u8f83\u591a\u65f6\u7528 beyond compare file_diff_menu : \u663e\u793a\u6bd4\u8f83\u83dc\u5355\u9879,\u9ed8\u8ba4\u5feb\u6377\u952e: ctrl+shift+d . file_diff_clipboard :\u4e0e\u526a\u8d34\u677f\u4e2d\u7684\u5185\u5bb9\u6bd4\u8f83 file_diff_selections : \u4e0e\u9009\u4e2d\u5185\u5bb9\u6bd4\u8f83 file_diff_tab : \u4e0e\u6807\u7b7e\u9875\u4e2d\u6587\u4ef6\u6bd4\u8f83 file_diff_previous : \u5f53\u524d\u6587\u4ef6\u4e0e\u4e0a\u6b21\u6fc0\u6d3b\u7684\u6587\u4ef6\u6bd4\u8f83 FileHeader github : https://github.com/shiyanhui/FileHeader FileHeader\u662f\u4e00\u4e2a\u4e3a\u6587\u4ef6\u6dfb\u52a0\u6587\u4ef6\u5934\u548cbody\u7684\u63d2\u4ef6,fileHander\u91c7\u7528\u4e86Jinja2\u7684\u6a21\u677f,\u7406\u8bba\u4e0a\u652f\u6301\u6240\u6709\u8bed\u8a00.\u9ed8\u8ba4\u7684\u6a21\u677f\u5728 FileHeader-- template \u4e2d,\u8bbe\u8ba1\u5206\u4e3a header \u548c body \u4e24\u4e2a\u6587\u4ef6\u5939, header \u548c\u5b9a\u4e49\u4e00\u822c\u5982\u4e0b: # -*- coding: utf-8 -*- # @Author: {{ author }} # @Date: {{ create_time }} # @Last Modified by: {{ last_modified_by }} # @Last Modified time: {{ last_modified_time }} \u81ea\u5b9a\u4e49\u6a21\u677f \u8981\u81ea\u5b9a\u4e49\u6a21\u677f\u53ef\u4ee5\u5728\u8bbe\u7f6e\u4e2d\u8bbe\u7f6e custom_template_header_path \u548c custom_template_body_path \u8def\u5f84,\u4e0d\u8981\u76f4\u63a5\u4fee\u6539 FileHeader-- template \u4e2d\u7684\u6a21\u677f. \u5feb\u6377\u952e \u65b0\u6587\u4ef6: OS X: super+alt+n ,Windows , Linux : ctrl+alt+n \u65e7\u6587\u4ef6: OS X: super+alt+a ,Windows , Linux : ctrl+alt+a FindKeyConflicts \u67e5\u627e sublime \u5feb\u6377\u952e\u51b2\u7a81\u7684\u63d2\u4ef6: \u4f7f\u7528 ctrl+shift+p \u8c03\u51fa\u547d\u4ee4\u9762\u677f,\u9009\u62e9 FindKeyConflicts: All Key Maps to Quick Panel ,\u8f93\u5165\u8981\u67e5\u627e\u7684\u51b2\u7a81\u952e,\u6bd4\u5982: ctrl+shift+c \u56de\u8f66,\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b: ------------- Entry Details ------------- [ctrl+shift+c] translate ChineseTranslator convert_to_utf8 ConvertToUTF8 copy_path Path Tools git_commit_amend SublimeGit [{ operand : text.git-status , key : selector , operator : equal }] repl_clear SublimeREPL [{ operand : true, key : setting.repl , operator : equal }] copy_path User Gist \u4ee3\u7801\u7247\u6bb5\u7ba1\u7406 + Create Public Gist :\u521b\u5efa\u516c\u5171\u7247\u6bb5 + Create Private Gist :\u521b\u5efa\u79c1\u6709\u7247\u6bb5 + Update File :\u66f4\u65b0\u7247\u6bb5 + Open Gist :\u6253\u5f00\u4ee3\u7801\u7247\u6bb5 + Insert Gist :\u63d2\u5165\u7247\u6bb5 + Add File :\u6dfb\u52a0\u6587\u4ef6 HexViewer hex\u67e5\u770b\u7f16\u8f91\u5de5\u5177 Hex Viewer: Toggle Hex View \u6253\u5f00hex\u754c\u9762 Hex Viewer: Show Hex Inspector \u9759\u6001\u5206\u6790 Hex Viewer: Go to Offset \u8df3\u8f6c\u5230\u504f\u79fb\u70b9 Hex Viewer: Show Hex Edit Panel \u663e\u793a\u7f16\u8f91\u9762\u677f Hex Viewer: Discard All Edits \u653e\u5f03\u6240\u6709\u7f16\u8f91 Hex Viewer: Export Bin \u5bfc\u51fa\u4e8c\u8fdb\u5236\u6587\u4ef6 Hex Viewer: Get Checksum \u6821\u9a8c\u7b97\u6cd5,\u6709md5\u7b49 Hex Viewer: Generate Hash \u7b97hash\u503c HTML-CSS-JS Prettify \u4ee3\u7801\u683c\u5f0f\u5316\u63d2\u4ef6,\u9700\u8981 nodejs \u652f\u6301 \u5feb\u6377\u952e: Cmd+Shift+H IMESupport \u6821\u6b63\u8f93\u5165\u6cd5\u4f4d\u7f6e JsFormat js\u4ee3\u7801\u683c\u5f0f\u5316 MarkdownEditing sublime \u4e0b markdown \u7f16\u8f91 OmniMarkupPreviewer sublime \u4e0b markdown \u9884\u89c8\u5de5\u5177 https://github.com/timonwong/OmniMarkupPreviewer http://macplay.leanote.com/post/%E8%BF%91%E4%B9%8E%E5%AE%8C%E7%BE%8E%E7%9A%84-Markdown-%E5%86%99%E4%BD%9C%E4%BD%93%E9%AA%8C-Sublime-Text-3-OmniMarkupPreviewer Material Theme \u4e00\u76f4\u5728\u7528\u7684\u4e3b\u9898 OmniMarkupPreviewer sublime \u4e0b markdown \u9884\u89c8\u63d2\u4ef6 Open Folder \u4fa7\u8fb9\u680f\u6253\u5f00\u6587\u4ef6\u5939 Open URL \u9009\u4e2d\u7f51\u5740\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 Path Tools \u8def\u5f84\u62f7\u8d1d\u63d2\u5165\u5de5\u5177 + Insert File Path \u63d2\u5165\u8def\u5f84 E:\\git\\hexo\\source\\_posts\\ sublimeText 2,3 \u914d\u7f6e.md + Insert File Directory \u63d2\u5165\u76ee\u5f55 E:\\git\\hexo\\source\\_posts + Insert File Name \u63d2\u5165\u6587\u4ef6\u540d sublimeText 2,3 \u914d\u7f6e.md + Insert Path Relative to Project \u63d2\u5165\u76f8\u5bf9\u8def\u5f84 \\hexo\\source\\_posts\\ sublimeText 2,3 \u914d\u7f6e.md + Insert Directory Relative to Project \u63d2\u5165\u76f8\u5bf9\u76ee\u5f55 \\hexo\\source\\_posts + Copy File Path \u590d\u5236\u6587\u4ef6\u8def\u5f84 + Copy File Directory \u590d\u5236\u6587\u4ef6\u76ee\u5f55 + Copy File Name \u590d\u5236\u6587\u4ef6\u540d Path Translator win,linux\u98ce\u683c\u8def\u5f84\u4e92\u8f6c / , \\ Side\u200bBar\u200bFolders \u6587\u4ef6\u5939\u5feb\u901f\u5207\u6362 SideBarGit sidebar git\u7ba1\u7406 SublimeGit git\u7ba1\u7406 SublimeAStyleFormatter c++/java\u4ee3\u7801\u683c\u5f0f\u5316 Terminal \u6253\u5f00\u7ec8\u7aef TortoiseSVN svn\u7ba1\u7406 TrailingSpaces \u53bb\u9664\u7a7a\u683c View In Browser \u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 DoxyDoxygen \u6ce8\u91ca\u751f\u6210\u5de5\u5177 \u6388\u6743 \u7834\u89e3\u7248: https://sublimecrack.wordpress.com/2015/06/07/sublime_text3_crack/ http://haojian138.blog.163.com/blog/static/212643110201393010438357// \u7834\u89e3\u5206\u6790: http://www.cnblogs.com/cdh49/p/3653144.html \u6ce8\u518c\u7801 github \u641c\u7d22 EA7E Single User License \u6d4b\u8bd5\u7248\u672c: 3117 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Michael Barnes Single User License EA7E-821385 8A353C41 872A0D5C DF9B2950 AFF6F667 C458EA6D 8EA3C286 98D1D650 131A97AB AA919AEC EF20E143 B361B1E7 4C8B7F04 B085E65E 2F5F5360 8489D422 FB8FC1AA 93F6323C FD7F7544 3F39C318 D95E6480 FCCC7561 8A4A1741 68FA4223 ADCEDE07 200C25BE DBBC4855 C4CFB774 C5EC138C 0FEC1CEF D9DCECEC D3A5DAD1 01316C36 \u2014\u2014 END LICENSE \u2014\u2014 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Nicolas Hennion Single User License EA7E-866075 8A01AA83 1D668D24 4484AEBC 3B04512C 827B0DE5 69E9B07A A39ACCC0 F95F5410 729D5639 4C37CECB B2522FB3 8D37FDC1 72899363 BBA441AC A5F47F08 6CD3B3FE CEFB3783 B2E1BA96 71AAF7B4 AFB61B1D 0CC513E7 52FF2333 9F726D2C CDE53B4A 810C0D4F E1F419A3 CDA0832B 8440565A 35BF00F6 4CA9F869 ED10E245 469C233E \u2014\u2014 END LICENSE \u2014\u2014 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Anthony Sansone Single User License EA7E-878563 28B9A648 42B99D8A F2E3E9E0 16DE076E E218B3DC F3606379 C33C1526 E8B58964 B2CB3F63 BDF901BE D31424D2 082891B5 F7058694 55FA46D8 EFC11878 0868F093 B17CAFE7 63A78881 86B78E38 0F146238 BAE22DBB D4EC71A1 0EC2E701 C7F9C648 5CF29CA3 1CB14285 19A46991 E9A98676 14FD4777 2D8A0AB6 A444EE0D CA009B54 \u2014\u2014 END LICENSE \u2014\u2014 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Alexey Plutalov Single User License EA7E-860776 3DC19CC1 134CDF23 504DC871 2DE5CE55 585DC8A6 253BB0D9 637C87A2 D8D0BA85 AAE574AD BA7D6DA9 2B9773F2 324C5DEF 17830A4E FBCF9D1D 182406E9 F883EA87 E585BBA1 2538C270 E2E857C2 194283CA 7234FF9E D0392F93 1D16E021 F1914917 63909E12 203C0169 3F08FFC8 86D06EA8 73DDAEF0 AC559F30 A6A67947 B60104C6 \u2014\u2014 END LICENSE \u2014\u2014 ----- BEGIN LICENSE ----- Free Communities Consultoria em Inform\u00e1tica Ltda Single User License EA7E-801302 C154C122 4EFA4415 F1AAEBCC 315F3A7D 2580735A 7955AA57 850ABD88 72A1DDD8 8D2CE060 CF980C29 890D74F2 53131895 281E324E 98EA1FEF 7FF69A12 17CA7784 490862AF 833E133D FD22141D D8C89B94 4C10A4D2 24693D70 AE37C18F 72EF0BE5 1ED60704 651BC71F 16CA1B77 496A0B19 463EDFF9 6BEB1861 CA5BAD96 89D0118E ------ END LICENSE ------ ----- BEGIN LICENSE ----- Peter Halliday Single User License EA7E-855988 3997BFF0 2856413A 7A555954 67069B78 06D8CE12 63EAF079 AD039757 79E16D13 C555AD90 465CBE53 10F6DFC4 D3A3C611 411106F8 0CFEB15F 0A7BB891 111F5ED2 C6AA8429 77913528 FA6291A9 B88D4550 F1D6AB13 BF9153BC 91B4DFFE D296CFE0 C1D8EB22 13D5F14E 75A699EC 49EDDC23 D89D0F9B D240B10A A3712467 09DE7870 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Fred Zirdung Single User License EA7E-844672 6089C0EC 22936E1A 1EADEBE2 B8654BBA 5C98FFA6 C0FD1599 0364779B 071C74FB EEFE9EAB 92B3D867 CD1B32FE D190269F 6FC08F8F 8D24191D 32828465 942CE58E AECE5307 08B62229 D788560A 6E0AAC4B 48A2D9EE 24FD8CAA 07BEBDF2 28EA86D4 CCB96084 6C34CAD2 E8A04F39 3B5A3CBC 3B668BB7 C94D0B4B 847D6D7F 4BC07375 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Wixel Single User License EA7E-848235 103D2969 8700C7ED 8173CF61 537000C0 EB3C7ECB 5E750F17 6B42B67C A190090B 7669164F C6F371A8 5A1D88D5 BDD0DA70 C065892B 7CC1BB2B 1C8B8C7C F08E7789 7C2A5241 35F86328 4C8F70D9 C023D7C2 11245C36 59A730DB 72BDB9A7 D5B20304 90E90E72 9F08CA25 73F49C20 179D938E 5BC8BEDA 13457A69 39E6265F 233767F9 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Daniel Russel Single User License EA7E-917420 9327EC62 44020C2A 45172A68 12FE13F1 1D22245B 680892EE F551F8EB C183D032 8B4EDB4B 479CB7E4 07E42EDD A780021D 56BADF42 AC05238B 023B47B1 EBA1B7DE 6DF9A383 159F32AE 04EBE100 1278B1D2 52E81B60 C68AA2E8 F84A20BE FE7990EB 5D44E4B6 16369263 1DDAACBC 280FF19E 86CF4319 0B8615A8 4FF0512E B123B8EC ------ END LICENSE ------ ----- BEGIN LICENSE ----- Peter Eriksson Single User License EA7E-890068 8E107C71 3100D6FC 2AC805BF 9E627C77 72E710D7 43392469 D06A2F5B F9304FBD F5AB4DB2 7A95F172 FE68E300 42745819 E94AB2DF C1893094 ECABADC8 71FEE764 20224821 3EABF931 745AF882 87AD0A4B 33C6E377 0210D712 CD2B1178 82601542 C7FD8098 F45D2824 BC7DFB38 F1EBD38A D7A3AFE0 96F938EA 2D90BD72 9E34CDF0 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Ryan Clark Single User License EA7E-812479 2158A7DE B690A7A3 8EC04710 006A5EEB 34E77CA3 9C82C81F 0DB6371B 79704E6F 93F36655 B031503A 03257CCC 01B20F60 D304FA8D B1B4F0AF 8A76C7BA 0FA94D55 56D46BCE 5237A341 CD837F30 4D60772D 349B1179 A996F826 90CDB73C 24D41245 FD032C30 AD5E7241 4EAA66ED 167D91FB 55896B16 EA125C81 F550AF6B A6820916 ------ END LICENSE ------","title":"sublimetext"},{"location":"ide/sublimetext/#sublimetext-3","text":"","title":"sublimeText 3 \u914d\u7f6e"},{"location":"ide/sublimetext/#_1","text":"https://www.sublimetext.com/docs/3/ http://docs.sublimetext.info/en/latest/index.html https://sublime-undocs-zh.readthedocs.io/en/latest/index.html http://sweetme.at/2013/08/08/sublime-text-keyboard-shortcuts/","title":"\u6587\u6863"},{"location":"ide/sublimetext/#package-control","text":"","title":"Package Control\u4f7f\u7528"},{"location":"ide/sublimetext/#package-control_1","text":"ctrl+~ \u6253\u5f00\u5bfc\u5165\u6846 sublimeText3 : import urllib.request , os ; pf = Package Control.sublime-package ; ipp = sublime . installed_packages_path (); urllib . request . install_opener ( urllib . request . build_opener ( urllib . request . ProxyHandler ()) ); open ( os . path . join ( ipp , pf ), wb ) . write ( urllib . request . urlopen ( http://sublime.wbond.net/ + pf . replace ( , %20 )) . read ())","title":"\u5b89\u88c5Package Control"},{"location":"ide/sublimetext/#package-control_2","text":"\u6309\u4e0b Ctrl+Shift+P \u8c03\u51fa\u547d\u4ee4\u9762\u677f,\u8f93\u5165 install \u8c03\u51fa Install Package \u9009\u9879\u5e76\u56de\u8f66,\u7136\u540e\u5728\u5217\u8868\u4e2d\u9009\u4e2d\u8981\u5b89\u88c5\u7684\u63d2\u4ef6\u3002 \u63d2\u4ef6\u5217\u8868: https://packagecontrol.io","title":"\u7528Package Control\u5b89\u88c5\u63d2\u4ef6\u7684\u65b9\u6cd5\uff1a"},{"location":"ide/sublimetext/#_2","text":"Add Repository : \u4ece\u6307\u5b9agit\u4e0a\u5b89\u88c5\u63d2\u4ef6\uff0c\u9700\u7ed9\u51fa\u4e00\u4e2agit\u5e93\u76ee\u5f55,\u5982 https://github.com/username/repo Remove Package : \u79fb\u9664\u63d2\u4ef6,\u5b89\u88c5\u7684\u63d2\u4ef6\u5217\u8868\u8bb0\u5f55\u5728: Packages/User/Package Control.sublime-settings ,\u6211\u7684\u672c\u5730\u76ee\u5f55\u662f: Sublime Text Build 3114 x64\\Data\\Packages\\User Enable Package : \u542f\u7528\u63d2\u4ef6 Disable Package : \u7981\u7528\u63d2\u4ef6 Discover Packages : \u6253\u5f00web\u7ad9\u67e5\u627e Upgrade/Overwrite All Packages : \u5347\u7ea7\u5e76\u8986\u76d6\u6240\u6709package\uff0c\u5305\u62ec\u4e0d\u662f\u901a\u8fc7package control\u5b89\u88c5\u7684 Upgrade Package : \u5217\u51fa\u53ef\u4f9b\u5347\u7ea7\u7684package","title":"\u5176\u5b83\u529f\u80fd"},{"location":"ide/sublimetext/#data","text":"==================== Windows : :file: %APPDATA%\\\\Sublime Text 3 OS X : :file: ~/Library/Application Support/Sublime Text 3 * Linux : :file: ~/.config/sublime-text-3","title":"Data\u76ee\u5f55"},{"location":"ide/sublimetext/#_3","text":"","title":"\u914d\u7f6e"},{"location":"ide/sublimetext/#_4","text":"Preferences- File Setting-User \uff0c\u6253\u5f00\u914d\u7f6e\u6587\u4ef6\uff0c\u770b\u91cc\u9762\u6709\u6ca1font_face\u914d\u7f6e\u9879\uff0c\u6709\u5c31\u76f4\u63a5\u6539\uff0c\u6ca1\u6709\u5c31\u81ea\u5df1\u52a0\u4e0a\uff0c\u53ef\u80fd\u7684\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a { color_scheme : Packages/Color Scheme - Default/Black-Pearl2.tmTheme , font_face : \u5fae\u8f6f\u96c5\u9ed1 , font_size : 10.0 }","title":"\u5b57\u4f53"},{"location":"ide/sublimetext/#_5","text":"http://colorsublime.com/","title":"\u914d\u8272:"},{"location":"ide/sublimetext/#_6","text":"","title":"\u6280\u5de7"},{"location":"ide/sublimetext/#_7","text":"\u6253\u5f00\u6b63\u5219\u5339\u914d\u6a21\u5f0f\u8f93\u5165: \\n","title":"\u600e\u6837\u628a\u5b57\u7b26\u66ff\u6362\u6210\u6362\u884c"},{"location":"ide/sublimetext/#_8","text":"\u5728Anaconda\u8bbe\u7f6e\u91cc\u627e\u5230pep8\u628atrue\u6539\u4e3afalse","title":"\u6bcf\u884c\u7684\u4ee3\u7801\u90fd\u88ab\u7528\u6846\u6846\u4f4f"},{"location":"ide/sublimetext/#jump-to-previous-cursor-position-shortcut","text":"to jump back: Alt + - to jump forward: Alt + Shift + - or through Goto menu. ( SublimeText 3 , build 3114 )","title":"jump-to-previous-cursor-position-shortcut"},{"location":"ide/sublimetext/#open-the-console-and-type","text":"sublime.log_commands ( True ) sublime.log_input ( True )","title":"Open the console and type"},{"location":"ide/sublimetext/#_9","text":"http://feliving.github.io/Sublime-Text-3-Documentation/indentation.html","title":"\u7f29\u8fdb\u8bbe\u7f6e"},{"location":"ide/sublimetext/#_10","text":"","title":"\u5feb\u6377\u952e"},{"location":"ide/sublimetext/#win","text":"ctrl+` \u547d\u4ee4\u5bfc\u5165 ctrl+shift+p \u5e38\u7528\u547d\u4ee4 ctrl+p \u6587\u4ef6\u5207\u6362 ctrl +r \u67e5\u770b\u7c7b\u7684\u65b9\u6cd5 Ctrl+L \u9009\u62e9\u6574\u884c\uff08\u6309\u4f4f-\u7ee7\u7eed\u9009\u62e9\u4e0b\u884c\uff09 Ctrl+KK \u4ece\u5149\u6807\u5904\u5220\u9664\u81f3\u884c\u5c3e Ctrl+Shift+K \u5220\u9664\u6574\u884c Ctrl+Shift+D \u590d\u5236\u5149\u6807\u6240\u5728\u6574\u884c\uff0c\u63d2\u5165\u5728\u8be5\u884c\u4e4b\u524d Ctrl+J \u5408\u5e76\u884c\uff08\u5df2\u9009\u62e9\u9700\u8981\u5408\u5e76\u7684\u591a\u884c\u65f6\uff09 Ctrl+KU \u6539\u4e3a\u5927\u5199 Ctrl+KL \u6539\u4e3a\u5c0f\u5199 Ctrl+D \u9009\u8bcd \uff08\u6309\u4f4f-\u7ee7\u7eed\u9009\u62e9\u4e0b\u4e2a\u76f8\u540c\u7684\u5b57\u7b26\u4e32\uff09 Ctrl+M \u5149\u6807\u79fb\u52a8\u81f3\u62ec\u53f7\u5185\u5f00\u59cb\u6216\u7ed3\u675f\u7684\u4f4d\u7f6e Ctrl+Shift+M \u9009\u62e9\u62ec\u53f7\u5185\u7684\u5185\u5bb9\uff08\u6309\u4f4f-\u7ee7\u7eed\u9009\u62e9\u7236\u62ec\u53f7\uff09 Ctrl+/ \u6ce8\u91ca\u6574\u884c\uff08\u5982\u5df2\u9009\u62e9\u5185\u5bb9\uff0c\u540c\u201cCtrl+Shift+/\u201d\u6548\u679c\uff09 Ctrl+Shift+/ \u6ce8\u91ca\u5df2\u9009\u62e9\u5185\u5bb9 Ctrl+Space \u81ea\u52a8\u5b8c\u6210\uff08win\u4e0e\u7cfb\u7edf\u5feb\u6377\u952e\u51b2\u7a81\uff0c\u9700\u4fee\u6539\uff09 Ctrl+Z \u64a4\u9500 Ctrl+Y \u6062\u590d\u64a4\u9500 Ctrl+Shift+V \u7c98\u8d34\u5e76\u81ea\u52a8\u7f29\u8fdb\uff08\u5176\u5b83\u5144\u5f1f\u5199\u7684\uff0c\u5b9e\u6d4bwin\u7cfb\u7edf\u81ea\u52a8\u7f29\u8fdb\u65e0\u6548\uff09 Ctrl+M \u5149\u6807\u8df3\u81f3\u5bf9\u5e94\u7684\u62ec\u53f7 Alt+. \u95ed\u5408\u5f53\u524d\u6807\u7b7e Ctrl+Shift+A \u9009\u62e9\u5149\u6807\u4f4d\u7f6e\u7236\u6807\u7b7e\u5bf9\u513f Ctrl+Shift+[ \u6298\u53e0\u4ee3\u7801 Ctrl+Shift+] \u5c55\u5f00\u4ee3\u7801 Ctrl+KT \u6298\u53e0\u5c5e\u6027 Ctrl+K0 \u5c55\u5f00\u6240\u6709 Ctrl+U \u8f6f\u64a4\u9500 Ctrl+T \u8bcd\u4e92\u6362 Shift+Tab \u53bb\u9664\u7f29\u8fdb Ctrl+Shift+UP \u4e0e\u4e0a\u884c\u4e92\u6362 Ctrl+Shift+DOWN \u4e0e\u4e0b\u884c\u4e92\u6362 Ctrl+K Backspace \u4ece\u5149\u6807\u5904\u5220\u9664\u81f3\u884c\u9996 Ctrl+Enter \u63d2\u5165\u884c\u540e Ctrl+Shift Enter \u63d2\u5165\u884c\u524d F9 \u884c\u6392\u5e8f\uff08\u6309a-z\uff09 ALT+SHIFT+2 \u5206\u5c4f Ctrl + Home - to the beginning of the file Ctrl + End - to the end of the fil","title":"Win"},{"location":"ide/sublimetext/#_11","text":"{ keys : [ ctrl+k , ctrl+h ], command : move_to , args : { to : bol , extend : false } } , { keys : [ ctrl+k , ctrl+e ], command : move_to , args : { to : eol , extend : false } }","title":"\u5149\u6807\u79fb\u52a8\u5230\u9996\u5c3e\u8bbe\u7f6e"},{"location":"ide/sublimetext/#_12","text":"ctrl+home :\u6587\u4ef6\u5934 ctrl+ end :\u6587\u4ef6\u5c3e","title":"\u5149\u6807\u79fb\u52a8\u5230\u6587\u4ef6\u5934\u5c3e"},{"location":"ide/sublimetext/#_13","text":"ctrl+enter #\u53e6\u8d77\u4e00\u884c ctrl+\u7bad\u5934\u4e0a #\u9501\u5b9a\u5f53\u524d\u884c\u5411\u4e0a\u79fb\u52a8 ctrl+ - #\u5149\u6807\u79fb\u5355\u8bcd","title":"\u5149\u6807\u79fb\u52a8"},{"location":"ide/sublimetext/#cacel-build","text":"{ keys : [ ctrl+shift+c ], command : exec , args : { kill : true } }","title":"cacel build"},{"location":"ide/sublimetext/#mac","text":"\u2318\u21e7P \u547d\u4ee4\u63d0\u793a \u2303G \u524d\u5f80\u884c \u2318K/B \u5f00\u5173\u4fa7\u680f \u2318L \u9009\u62e9\u884c (\u91cd\u590d\u6309\u4e0b\u5c06\u4e0b\u4e00\u884c\u52a0\u5165\u9009\u62e9) \u2303\u21e7K \u5220\u9664\u884c \u2318\u21e7D \u590d\u5236(\u591a)\u884c \u2318KU \u6539\u4e3a\u5927\u5199 \u2318KL \u6539\u4e3a\u5c0f\u5199 \u2318 / \u6ce8\u91ca \u2318\u2325 / \u5757\u6ce8\u91ca \u2303M \u8df3\u8f6c\u81f3\u5bf9\u5e94\u7684\u62ec\u53f7 + \u2318F \u67e5\u627e \u2318\u2325F \u66ff\u6362 \u2318\u2325G \u67e5\u627e\u4e0b\u4e00\u4e2a\u7b26\u5408\u5f53\u524d\u6240\u9009\u7684\u5185\u5bb9 \u2318\u2303G \u67e5\u627e\u6240\u6709\u7b26\u5408\u5f53\u524d\u6240\u9009\u7684\u5185\u5bb9\u8fdb\u884c\u591a\u91cd\u7f16\u8f91 \u2318\u21e7F \u5728\u6240\u6709\u6253\u5f00\u7684\u6587\u4ef6\u4e2d\u8fdb\u884c\u67e5\u627e \u2318\u23252 \u53cc\u5217\u62c6\u5206\u7a97\u53e3 \u2303[1,2,3,4] \u7126\u70b9\u79fb\u52a8\u81f3\u76f8\u5e94\u7ec4 \u2303\u21e7[1,2,3,4] \u5c06\u5f53\u524d\u6587\u4ef6\u79fb\u52a8\u81f3\u76f8\u5e94\u7ec4","title":"Mac"},{"location":"ide/sublimetext/#_14","text":"","title":"\u5e38\u7528\u63d2\u4ef6:"},{"location":"ide/sublimetext/#auto-save","text":"\u53ef\u4ee5\u81ea\u52a8\u4fdd\u5b58\u8f93\u5165\u5185\u5bb9\u7684\u63d2\u4ef6,\u6211\u7684\u914d\u7f6e\u5982\u4e0b,\u4fee\u65395\u79d2\u540e\u65e0\u64cd\u4f5c\u5219\u81ea\u52a8\u4fdd\u5b58: { auto_save_on_modified : true , auto_save_delay_in_seconds : 5 , }","title":"auto-save"},{"location":"ide/sublimetext/#chinesetranslator","text":"\u7ffb\u8bd1\u63d2\u4ef6,\u9009\u4e2d\u4e2d\u6587\u7ffb\u8bd1\u6210\u82f1\u6587,\u82f1\u6587\u7ffb\u8bd1\u6210\u4e2d\u6587","title":"Chinese\u200bTranslator"},{"location":"ide/sublimetext/#_15","text":"\u9009\u4e2d\u7ffb\u8bd1: ctrl+shift+c \u91cd\u65b0\u7ed1\u5b9a: //translate { keys : [ ctrl+shift+t ], command : translate },","title":"\u5feb\u6377\u952e"},{"location":"ide/sublimetext/#brackethighlighter","text":"\u6807\u7b7e\u5339\u914d","title":"BracketHighlighter"},{"location":"ide/sublimetext/#colorsublime","text":"\u914d\u7f6e\u7ba1\u7406\u5668 + Colorsublime:Browser Theme :\u6253\u5f00colorsublime\u7f51\u7ad9\u6d4f\u89c8 + Colorsublime:Install Theme : \u5b89\u88c5\u914d\u8272\u65b9\u6848","title":"Colorsublime"},{"location":"ide/sublimetext/#converttoutf8","text":"\u4e0d\u89e3\u91ca,\u8f6c\u6362\u7f16\u7801: \u201cFile Set File Encoding to","title":"Convert\u200bTo\u200bUTF8"},{"location":"ide/sublimetext/#emmet","text":"\u524d\u7aef\u7801\u5b57\u795e\u5668","title":"Emmet"},{"location":"ide/sublimetext/#favoritefiles","text":"sublime \u4e66\u7b7e\u589e\u5f3a\u7248,\u539f\u7406\u5c31\u662f\u628a\u8981\u5173\u6ce8\u7684\u6587\u4ef6\u5206\u7ec4\u4fdd\u5b58\u5230\u4e00\u4e2ajson\u6587\u4ef6\u4e2d + FavoriteFiles:add file(s) : \u6dfb\u52a0\u5230\u7ec4\u91cc + FavoriteFiles:open file: \u6253\u5f00\u4e66\u7b7e\u4e2d\u6587\u4ef6 + FavoriteFiles:remove file(s) : \u79fb\u9664\u6587\u4ef6","title":"FavoriteFiles"},{"location":"ide/sublimetext/#filediffs","text":"\u6bd4\u8f83\u6587\u4ef6,\u5e73\u65f6\u5355\u6587\u4ef6\u7528\u8fd9\u4e2a,\u76ee\u5f55\u8f83\u591a\u65f6\u7528 beyond compare file_diff_menu : \u663e\u793a\u6bd4\u8f83\u83dc\u5355\u9879,\u9ed8\u8ba4\u5feb\u6377\u952e: ctrl+shift+d . file_diff_clipboard :\u4e0e\u526a\u8d34\u677f\u4e2d\u7684\u5185\u5bb9\u6bd4\u8f83 file_diff_selections : \u4e0e\u9009\u4e2d\u5185\u5bb9\u6bd4\u8f83 file_diff_tab : \u4e0e\u6807\u7b7e\u9875\u4e2d\u6587\u4ef6\u6bd4\u8f83 file_diff_previous : \u5f53\u524d\u6587\u4ef6\u4e0e\u4e0a\u6b21\u6fc0\u6d3b\u7684\u6587\u4ef6\u6bd4\u8f83","title":"File\u200bDiffs"},{"location":"ide/sublimetext/#fileheader","text":"github : https://github.com/shiyanhui/FileHeader FileHeader\u662f\u4e00\u4e2a\u4e3a\u6587\u4ef6\u6dfb\u52a0\u6587\u4ef6\u5934\u548cbody\u7684\u63d2\u4ef6,fileHander\u91c7\u7528\u4e86Jinja2\u7684\u6a21\u677f,\u7406\u8bba\u4e0a\u652f\u6301\u6240\u6709\u8bed\u8a00.\u9ed8\u8ba4\u7684\u6a21\u677f\u5728 FileHeader-- template \u4e2d,\u8bbe\u8ba1\u5206\u4e3a header \u548c body \u4e24\u4e2a\u6587\u4ef6\u5939, header \u548c\u5b9a\u4e49\u4e00\u822c\u5982\u4e0b: # -*- coding: utf-8 -*- # @Author: {{ author }} # @Date: {{ create_time }} # @Last Modified by: {{ last_modified_by }} # @Last Modified time: {{ last_modified_time }}","title":"FileHeader"},{"location":"ide/sublimetext/#_16","text":"\u8981\u81ea\u5b9a\u4e49\u6a21\u677f\u53ef\u4ee5\u5728\u8bbe\u7f6e\u4e2d\u8bbe\u7f6e custom_template_header_path \u548c custom_template_body_path \u8def\u5f84,\u4e0d\u8981\u76f4\u63a5\u4fee\u6539 FileHeader-- template \u4e2d\u7684\u6a21\u677f.","title":"\u81ea\u5b9a\u4e49\u6a21\u677f"},{"location":"ide/sublimetext/#_17","text":"\u65b0\u6587\u4ef6: OS X: super+alt+n ,Windows , Linux : ctrl+alt+n \u65e7\u6587\u4ef6: OS X: super+alt+a ,Windows , Linux : ctrl+alt+a","title":"\u5feb\u6377\u952e"},{"location":"ide/sublimetext/#findkeyconflicts","text":"\u67e5\u627e sublime \u5feb\u6377\u952e\u51b2\u7a81\u7684\u63d2\u4ef6:","title":"FindKeyConflicts"},{"location":"ide/sublimetext/#_18","text":"ctrl+shift+p \u8c03\u51fa\u547d\u4ee4\u9762\u677f,\u9009\u62e9 FindKeyConflicts: All Key Maps to Quick Panel ,\u8f93\u5165\u8981\u67e5\u627e\u7684\u51b2\u7a81\u952e,\u6bd4\u5982: ctrl+shift+c \u56de\u8f66,\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b: ------------- Entry Details ------------- [ctrl+shift+c] translate ChineseTranslator convert_to_utf8 ConvertToUTF8 copy_path Path Tools git_commit_amend SublimeGit [{ operand : text.git-status , key : selector , operator : equal }] repl_clear SublimeREPL [{ operand : true, key : setting.repl , operator : equal }] copy_path User","title":"\u4f7f\u7528"},{"location":"ide/sublimetext/#gist","text":"\u4ee3\u7801\u7247\u6bb5\u7ba1\u7406 + Create Public Gist :\u521b\u5efa\u516c\u5171\u7247\u6bb5 + Create Private Gist :\u521b\u5efa\u79c1\u6709\u7247\u6bb5 + Update File :\u66f4\u65b0\u7247\u6bb5 + Open Gist :\u6253\u5f00\u4ee3\u7801\u7247\u6bb5 + Insert Gist :\u63d2\u5165\u7247\u6bb5 + Add File :\u6dfb\u52a0\u6587\u4ef6","title":"Gist"},{"location":"ide/sublimetext/#hexviewer","text":"hex\u67e5\u770b\u7f16\u8f91\u5de5\u5177 Hex Viewer: Toggle Hex View \u6253\u5f00hex\u754c\u9762 Hex Viewer: Show Hex Inspector \u9759\u6001\u5206\u6790 Hex Viewer: Go to Offset \u8df3\u8f6c\u5230\u504f\u79fb\u70b9 Hex Viewer: Show Hex Edit Panel \u663e\u793a\u7f16\u8f91\u9762\u677f Hex Viewer: Discard All Edits \u653e\u5f03\u6240\u6709\u7f16\u8f91 Hex Viewer: Export Bin \u5bfc\u51fa\u4e8c\u8fdb\u5236\u6587\u4ef6 Hex Viewer: Get Checksum \u6821\u9a8c\u7b97\u6cd5,\u6709md5\u7b49 Hex Viewer: Generate Hash \u7b97hash\u503c","title":"HexViewer"},{"location":"ide/sublimetext/#html-css-js-prettify","text":"\u4ee3\u7801\u683c\u5f0f\u5316\u63d2\u4ef6,\u9700\u8981 nodejs \u652f\u6301 \u5feb\u6377\u952e: Cmd+Shift+H","title":"HTML-CSS-JS Prettify"},{"location":"ide/sublimetext/#imesupport","text":"\u6821\u6b63\u8f93\u5165\u6cd5\u4f4d\u7f6e","title":"IMESupport"},{"location":"ide/sublimetext/#jsformat","text":"js\u4ee3\u7801\u683c\u5f0f\u5316","title":"JsFormat"},{"location":"ide/sublimetext/#markdownediting","text":"sublime \u4e0b markdown \u7f16\u8f91","title":"MarkdownEditing"},{"location":"ide/sublimetext/#omnimarkuppreviewer","text":"sublime \u4e0b markdown \u9884\u89c8\u5de5\u5177 https://github.com/timonwong/OmniMarkupPreviewer http://macplay.leanote.com/post/%E8%BF%91%E4%B9%8E%E5%AE%8C%E7%BE%8E%E7%9A%84-Markdown-%E5%86%99%E4%BD%9C%E4%BD%93%E9%AA%8C-Sublime-Text-3-OmniMarkupPreviewer","title":"OmniMarkupPreviewer"},{"location":"ide/sublimetext/#material-theme","text":"\u4e00\u76f4\u5728\u7528\u7684\u4e3b\u9898","title":"Material Theme"},{"location":"ide/sublimetext/#omnimarkuppreviewer_1","text":"sublime \u4e0b markdown \u9884\u89c8\u63d2\u4ef6","title":"OmniMarkupPreviewer"},{"location":"ide/sublimetext/#open-folder","text":"\u4fa7\u8fb9\u680f\u6253\u5f00\u6587\u4ef6\u5939","title":"Open Folder"},{"location":"ide/sublimetext/#open-url","text":"\u9009\u4e2d\u7f51\u5740\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00","title":"Open URL"},{"location":"ide/sublimetext/#path-tools","text":"\u8def\u5f84\u62f7\u8d1d\u63d2\u5165\u5de5\u5177 + Insert File Path \u63d2\u5165\u8def\u5f84 E:\\git\\hexo\\source\\_posts\\ sublimeText 2,3 \u914d\u7f6e.md + Insert File Directory \u63d2\u5165\u76ee\u5f55 E:\\git\\hexo\\source\\_posts + Insert File Name \u63d2\u5165\u6587\u4ef6\u540d sublimeText 2,3 \u914d\u7f6e.md + Insert Path Relative to Project \u63d2\u5165\u76f8\u5bf9\u8def\u5f84 \\hexo\\source\\_posts\\ sublimeText 2,3 \u914d\u7f6e.md + Insert Directory Relative to Project \u63d2\u5165\u76f8\u5bf9\u76ee\u5f55 \\hexo\\source\\_posts + Copy File Path \u590d\u5236\u6587\u4ef6\u8def\u5f84 + Copy File Directory \u590d\u5236\u6587\u4ef6\u76ee\u5f55 + Copy File Name \u590d\u5236\u6587\u4ef6\u540d","title":"Path Tools"},{"location":"ide/sublimetext/#path-translator","text":"win,linux\u98ce\u683c\u8def\u5f84\u4e92\u8f6c / , \\","title":"Path Translator"},{"location":"ide/sublimetext/#sidebarfolders","text":"\u6587\u4ef6\u5939\u5feb\u901f\u5207\u6362","title":"Side\u200bBar\u200bFolders"},{"location":"ide/sublimetext/#sidebargit","text":"sidebar git\u7ba1\u7406","title":"SideBarGit"},{"location":"ide/sublimetext/#sublimegit","text":"git\u7ba1\u7406","title":"SublimeGit"},{"location":"ide/sublimetext/#sublimeastyleformatter","text":"c++/java\u4ee3\u7801\u683c\u5f0f\u5316","title":"SublimeAStyleFormatter"},{"location":"ide/sublimetext/#terminal","text":"\u6253\u5f00\u7ec8\u7aef","title":"Terminal"},{"location":"ide/sublimetext/#tortoisesvn","text":"svn\u7ba1\u7406","title":"TortoiseSVN"},{"location":"ide/sublimetext/#trailingspaces","text":"\u53bb\u9664\u7a7a\u683c","title":"TrailingSpaces"},{"location":"ide/sublimetext/#view-in-browser","text":"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00","title":"View In Browser"},{"location":"ide/sublimetext/#doxydoxygen","text":"\u6ce8\u91ca\u751f\u6210\u5de5\u5177","title":"DoxyDoxygen"},{"location":"ide/sublimetext/#_19","text":"","title":"\u6388\u6743"},{"location":"ide/sublimetext/#_20","text":"https://sublimecrack.wordpress.com/2015/06/07/sublime_text3_crack/ http://haojian138.blog.163.com/blog/static/212643110201393010438357//","title":"\u7834\u89e3\u7248:"},{"location":"ide/sublimetext/#_21","text":"http://www.cnblogs.com/cdh49/p/3653144.html","title":"\u7834\u89e3\u5206\u6790:"},{"location":"ide/sublimetext/#_22","text":"github \u641c\u7d22 EA7E Single User License \u6d4b\u8bd5\u7248\u672c: 3117 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Michael Barnes Single User License EA7E-821385 8A353C41 872A0D5C DF9B2950 AFF6F667 C458EA6D 8EA3C286 98D1D650 131A97AB AA919AEC EF20E143 B361B1E7 4C8B7F04 B085E65E 2F5F5360 8489D422 FB8FC1AA 93F6323C FD7F7544 3F39C318 D95E6480 FCCC7561 8A4A1741 68FA4223 ADCEDE07 200C25BE DBBC4855 C4CFB774 C5EC138C 0FEC1CEF D9DCECEC D3A5DAD1 01316C36 \u2014\u2014 END LICENSE \u2014\u2014 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Nicolas Hennion Single User License EA7E-866075 8A01AA83 1D668D24 4484AEBC 3B04512C 827B0DE5 69E9B07A A39ACCC0 F95F5410 729D5639 4C37CECB B2522FB3 8D37FDC1 72899363 BBA441AC A5F47F08 6CD3B3FE CEFB3783 B2E1BA96 71AAF7B4 AFB61B1D 0CC513E7 52FF2333 9F726D2C CDE53B4A 810C0D4F E1F419A3 CDA0832B 8440565A 35BF00F6 4CA9F869 ED10E245 469C233E \u2014\u2014 END LICENSE \u2014\u2014 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Anthony Sansone Single User License EA7E-878563 28B9A648 42B99D8A F2E3E9E0 16DE076E E218B3DC F3606379 C33C1526 E8B58964 B2CB3F63 BDF901BE D31424D2 082891B5 F7058694 55FA46D8 EFC11878 0868F093 B17CAFE7 63A78881 86B78E38 0F146238 BAE22DBB D4EC71A1 0EC2E701 C7F9C648 5CF29CA3 1CB14285 19A46991 E9A98676 14FD4777 2D8A0AB6 A444EE0D CA009B54 \u2014\u2014 END LICENSE \u2014\u2014 \u2014\u2013 BEGIN LICENSE \u2014\u2013 Alexey Plutalov Single User License EA7E-860776 3DC19CC1 134CDF23 504DC871 2DE5CE55 585DC8A6 253BB0D9 637C87A2 D8D0BA85 AAE574AD BA7D6DA9 2B9773F2 324C5DEF 17830A4E FBCF9D1D 182406E9 F883EA87 E585BBA1 2538C270 E2E857C2 194283CA 7234FF9E D0392F93 1D16E021 F1914917 63909E12 203C0169 3F08FFC8 86D06EA8 73DDAEF0 AC559F30 A6A67947 B60104C6 \u2014\u2014 END LICENSE \u2014\u2014 ----- BEGIN LICENSE ----- Free Communities Consultoria em Inform\u00e1tica Ltda Single User License EA7E-801302 C154C122 4EFA4415 F1AAEBCC 315F3A7D 2580735A 7955AA57 850ABD88 72A1DDD8 8D2CE060 CF980C29 890D74F2 53131895 281E324E 98EA1FEF 7FF69A12 17CA7784 490862AF 833E133D FD22141D D8C89B94 4C10A4D2 24693D70 AE37C18F 72EF0BE5 1ED60704 651BC71F 16CA1B77 496A0B19 463EDFF9 6BEB1861 CA5BAD96 89D0118E ------ END LICENSE ------ ----- BEGIN LICENSE ----- Peter Halliday Single User License EA7E-855988 3997BFF0 2856413A 7A555954 67069B78 06D8CE12 63EAF079 AD039757 79E16D13 C555AD90 465CBE53 10F6DFC4 D3A3C611 411106F8 0CFEB15F 0A7BB891 111F5ED2 C6AA8429 77913528 FA6291A9 B88D4550 F1D6AB13 BF9153BC 91B4DFFE D296CFE0 C1D8EB22 13D5F14E 75A699EC 49EDDC23 D89D0F9B D240B10A A3712467 09DE7870 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Fred Zirdung Single User License EA7E-844672 6089C0EC 22936E1A 1EADEBE2 B8654BBA 5C98FFA6 C0FD1599 0364779B 071C74FB EEFE9EAB 92B3D867 CD1B32FE D190269F 6FC08F8F 8D24191D 32828465 942CE58E AECE5307 08B62229 D788560A 6E0AAC4B 48A2D9EE 24FD8CAA 07BEBDF2 28EA86D4 CCB96084 6C34CAD2 E8A04F39 3B5A3CBC 3B668BB7 C94D0B4B 847D6D7F 4BC07375 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Wixel Single User License EA7E-848235 103D2969 8700C7ED 8173CF61 537000C0 EB3C7ECB 5E750F17 6B42B67C A190090B 7669164F C6F371A8 5A1D88D5 BDD0DA70 C065892B 7CC1BB2B 1C8B8C7C F08E7789 7C2A5241 35F86328 4C8F70D9 C023D7C2 11245C36 59A730DB 72BDB9A7 D5B20304 90E90E72 9F08CA25 73F49C20 179D938E 5BC8BEDA 13457A69 39E6265F 233767F9 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Daniel Russel Single User License EA7E-917420 9327EC62 44020C2A 45172A68 12FE13F1 1D22245B 680892EE F551F8EB C183D032 8B4EDB4B 479CB7E4 07E42EDD A780021D 56BADF42 AC05238B 023B47B1 EBA1B7DE 6DF9A383 159F32AE 04EBE100 1278B1D2 52E81B60 C68AA2E8 F84A20BE FE7990EB 5D44E4B6 16369263 1DDAACBC 280FF19E 86CF4319 0B8615A8 4FF0512E B123B8EC ------ END LICENSE ------ ----- BEGIN LICENSE ----- Peter Eriksson Single User License EA7E-890068 8E107C71 3100D6FC 2AC805BF 9E627C77 72E710D7 43392469 D06A2F5B F9304FBD F5AB4DB2 7A95F172 FE68E300 42745819 E94AB2DF C1893094 ECABADC8 71FEE764 20224821 3EABF931 745AF882 87AD0A4B 33C6E377 0210D712 CD2B1178 82601542 C7FD8098 F45D2824 BC7DFB38 F1EBD38A D7A3AFE0 96F938EA 2D90BD72 9E34CDF0 ------ END LICENSE ------ ----- BEGIN LICENSE ----- Ryan Clark Single User License EA7E-812479 2158A7DE B690A7A3 8EC04710 006A5EEB 34E77CA3 9C82C81F 0DB6371B 79704E6F 93F36655 B031503A 03257CCC 01B20F60 D304FA8D B1B4F0AF 8A76C7BA 0FA94D55 56D46BCE 5237A341 CD837F30 4D60772D 349B1179 A996F826 90CDB73C 24D41245 FD032C30 AD5E7241 4EAA66ED 167D91FB 55896B16 EA125C81 F550AF6B A6820916 ------ END LICENSE ------","title":"\u6ce8\u518c\u7801"},{"location":"ide/vim/","text":"vim \u5165\u95e8 \u542f\u52a8Vim\u540e\uff0cvim\u5728 Normal \u6a21\u5f0f\u4e0b\u3002 \u8ba9\u6211\u4eec\u8fdb\u5165 Insert \u6a21\u5f0f\uff0c\u8bf7\u6309\u4e0b\u952e i \u6b64\u65f6\uff0c\u4f60\u53ef\u4ee5\u8f93\u5165\u6587\u672c\u4e86\uff0c\u5c31\u50cf\u4f60\u7528\u201c\u8bb0\u4e8b\u672c\u201d\u4e00\u6837\u3002 \u5982\u679c\u4f60\u60f3\u8fd4\u56de Normal \u6a21\u5f0f\uff0c\u8bf7\u6309 ESC \u952e\u3002 \u73b0\u5728\uff0c\u4f60\u77e5\u9053\u5982\u4f55\u5728 Insert \u548c Normal \u6a21\u5f0f\u4e0b\u5207\u6362\u4e86\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u547d\u4ee4\uff1a i \u2192 Insert \u6a21\u5f0f\uff0c\u6309 ESC \u56de\u5230 Normal \u6a21\u5f0f. x \u2192 \u5220\u5f53\u524d\u5149\u6807\u6240\u5728\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 :wq \u2192 \u5b58\u76d8 + \u9000\u51fa (:w \u5b58\u76d8, :q \u9000\u51fa) \uff08\u9648\u7693\u6ce8\uff1a:w \u540e\u53ef\u4ee5\u8ddf\u6587\u4ef6\u540d\uff09 dd \u2192 \u5220\u9664\u5f53\u524d\u884c\uff0c\u5e76\u628a\u5220\u9664\u7684\u884c\u5b58\u5230\u526a\u8d34\u677f\u91cc p \u2192 \u7c98\u8d34\u526a\u8d34\u677f hjkl (\u5f3a\u4f8b\u63a8\u8350\u4f7f\u7528\u5176\u79fb\u52a8\u5149\u6807\uff0c\u4f46\u4e0d\u5fc5\u9700) \u2192\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5149\u6807\u952e (\u2190\u2193\u2191\u2192). \u6ce8: j \u5c31\u50cf\u4e0b\u7bad\u5934\u3002 :help command \u2192 \u663e\u793a\u76f8\u5173\u547d\u4ee4\u7684\u5e2e\u52a9\u3002\u4f60\u4e5f\u53ef\u4ee5\u5c31\u8f93\u5165 :help \u800c\u4e0d\u8ddf\u547d\u4ee4\u3002\uff08\u9648\u7693\u6ce8\uff1a\u9000\u51fa\u5e2e\u52a9\u9700\u8981\u8f93\u5165:q\uff09 \u7f16\u8f91\u547d\u4ee4 \u5404\u79cd\u63d2\u5165\u6a21\u5f0f a \u2192 \u5728\u5149\u6807\u540e\u63d2\u5165 o \u2192 \u5728\u5f53\u524d\u884c\u540e\u63d2\u5165\u4e00\u4e2a\u65b0\u884c O \u2192 \u5728\u5f53\u524d\u884c\u524d\u63d2\u5165\u4e00\u4e2a\u65b0\u884c cw \u2192 \u66ff\u6362\u4ece\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u540e\u5230\u4e00\u4e2a\u5355\u8bcd\u7ed3\u5c3e\u7684\u5b57\u7b26 \u7b80\u5355\u7684\u79fb\u52a8\u5149\u6807 0 \u2192 \u6570\u5b57\u96f6\uff0c\u5230\u884c\u5934 ^ \u2192 \u5230\u672c\u884c\u7b2c\u4e00\u4e2a\u4e0d\u662fblank\u5b57\u7b26\u7684\u4f4d\u7f6e\uff08\u6240\u8c13blank\u5b57\u7b26\u5c31\u662f\u7a7a\u683c\uff0ctab\uff0c\u6362\u884c\uff0c\u56de\u8f66\u7b49\uff09 $ \u2192 \u5230\u672c\u884c\u884c\u5c3e g_ \u2192 \u5230\u672c\u884c\u6700\u540e\u4e00\u4e2a\u4e0d\u662fblank\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002 /pattern \u2192 \u641c\u7d22 pattern \u7684\u5b57\u7b26\u4e32\uff08\u9648\u7693\u6ce8\uff1a\u5982\u679c\u641c\u7d22\u51fa\u591a\u4e2a\u5339\u914d\uff0c\u53ef\u6309n\u952e\u5230\u4e0b\u4e00\u4e2a\uff09 \u62f7\u8d1d/\u7c98\u8d34 P \u2192 \u7c98\u8d34 yy \u2192 \u62f7\u8d1d\u5f53\u524d\u884c\u5f53\u884c\u4e8e ddP Undo/Redo u \u2192 undo C-r \u2192 redo \u6253\u5f00/\u4fdd\u5b58/\u9000\u51fa/\u6539\u53d8\u6587\u4ef6 :e \u2192 \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6 :w \u2192 \u5b58\u76d8 :saveas path/to/file \u2192 \u53e6\u5b58\u4e3a :x\uff0c ZZ \u6216 :wq \u2192 \u4fdd\u5b58\u5e76\u9000\u51fa (:x \u8868\u793a\u4ec5\u5728\u9700\u8981\u65f6\u4fdd\u5b58\uff0cZZ\u4e0d\u9700\u8981\u8f93\u5165\u5192\u53f7\u5e76\u56de\u8f66) :q! \u2192 \u9000\u51fa\u4e0d\u4fdd\u5b58 :qa! \u5f3a\u884c\u9000\u51fa\u6240\u6709\u7684\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\uff0c\u5c31\u7b97\u522b\u7684\u6587\u4ef6\u6709\u66f4\u6539\u3002 :bn, :bp \u2192 \u4f60\u53ef\u4ee5\u540c\u65f6\u6253\u5f00\u5f88\u591a\u6587\u4ef6\uff0c\u4f7f\u7528\u8fd9\u4e24\u4e2a\u547d\u4ee4\u6765\u5207\u6362\u4e0b\u4e00\u4e2a\u6216\u4e0a\u4e00\u4e2a\u6587\u4ef6\u3002\uff08\u9648\u7693\u6ce8\uff1a\u6211\u559c\u6b22\u4f7f\u7528:n\u5230\u4e0b\u4e00\u4e2a\u6587\u4ef6\uff09 \u67e5\u627e / \u2192 \u5f00\u59cb\u67e5\u627e,n\u67e5\u627e\u4e0b\u4e00\u4e2a,N\u5411\u4e0a\u67e5\u627e \u8fdb\u9636 . \u2192 (\u5c0f\u6570\u70b9) \u53ef\u4ee5\u91cd\u590d\u4e0a\u4e00\u6b21\u7684\u547d\u4ee4 N command \u2192 \u91cd\u590d\u67d0\u4e2a\u547d\u4ee4N\u6b21 2dd \u2192 \u5220\u96642\u884c 3p \u2192 \u7c98\u8d34\u6587\u672c3\u6b21 \u5149\u6807\u79fb\u52a8\u66f4\u6709\u6548\u7387 5G or :5 \u2192 \u5230\u7b2c N \u884c gg \u2192 \u5230\u7b2c\u4e00\u884c\u3002\uff08\u9648\u7693\u6ce8\uff1a\u76f8\u5f53\u4e8e1G\uff0c\u6216 :1\uff09 G \u2192 \u5230\u6700\u540e\u4e00\u884c\u3002 \u6309\u5355\u8bcd\u79fb\u52a8\uff1a w \u2192 \u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5f00\u5934\u3002 e \u2192 \u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u7ed3\u5c3e\u3002 % : \u5339\u914d\u62ec\u53f7\u79fb\u52a8\uff0c\u5305\u62ec (, {, [. \uff08\u9648\u7693\u6ce8\uff1a\u4f60\u9700\u8981\u628a\u5149\u6807\u5148\u79fb\u5230\u62ec\u53f7\u4e0a\uff09 \\* \u548c # : \u5339\u914d\u5149\u6807\u5f53\u524d\u6240\u5728\u7684\u5355\u8bcd\uff0c\u79fb\u52a8\u5149\u6807\u5230\u4e0b\u4e00\u4e2a\uff08\u6216\u4e0a\u4e00\u4e2a\uff09\u5339\u914d\u5355\u8bcd\uff08*\u662f\u4e0b\u4e00\u4e2a\uff0c#\u662f\u4e0a\u4e00\u4e2a\uff09 \u66f4\u5feb\u7684\u62f7\u8d1d 0y$ / yy : \u62f7\u8d1d\u5f53\u524d\u884c ye :\u4ece\u5f53\u524d\u4f4d\u7f6e\u62f7\u8d1d\u5230\u672c\u5355\u8bcd\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26 y2/foo :\u62f7\u8d1d2\u4e2a \u201cfoo\u201d \u4e4b\u95f4\u7684\u5b57\u7b26\u4e32 \u9ad8\u7ea7 \u5728\u5f53\u524d\u884c\u4e0a\u79fb\u52a8\u5149\u6807: 0 ^ $ f F t T , ; 0 \u2192 \u5230\u884c\u5934 ^ \u2192 \u5230\u672c\u884c\u7684\u7b2c\u4e00\u4e2a\u975eblank\u5b57\u7b26 $ \u2192 \u5230\u884c\u5c3e g_ \u2192 \u5230\u672c\u884c\u6700\u540e\u4e00\u4e2a\u4e0d\u662fblank\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002 fa \u2192 \u5230\u4e0b\u4e00\u4e2a\u4e3aa\u7684\u5b57\u7b26\u5904\uff0c\u4f60\u4e5f\u53ef\u4ee5fs\u5230\u4e0b\u4e00\u4e2a\u4e3as\u7684\u5b57\u7b26\u3002 t, \u2192 \u5230\u9017\u53f7\u524d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002\u9017\u53f7\u53ef\u4ee5\u53d8\u6210\u5176\u5b83\u5b57\u7b26\u3002 3fa \u2192 \u5728\u5f53\u524d\u884c\u67e5\u627e\u7b2c\u4e09\u4e2a\u51fa\u73b0\u7684a\u3002 F \u548c T \u2192 \u548c f \u548c t \u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u662f\u76f8\u53cd\u65b9\u5411 \u5220\u9664\u6240\u6709\u5185\u5bb9: dt :\u2192 \u5220\u9664\u6240\u6709\u7684\u5185\u5bb9\uff0c\u76f4\u5230\u9047\u5230\u53cc\u5f15\u53f7 \u6309ggdG :%d \u79fb\u52a8 h,j,k,l : \u5de6\uff0c\u4e0b\uff0c\u4e0a\uff0c\u53f3\u3002 w : \u4e0b\u4e00\u4e2a\u8bcd\u7684\u8bcd\u9996\u3002 e :\u4e0b\u4e00\u4e2a\u8bcd\u7684\u8bcd\u5c3e\u3002 b :\u4e0a\u4e00\u4e2a\u8bcd\u7684\u8bcd\u9996\u3002 : v \u6a21\u5f0f\u9009\u4e2d\u540e\u8fdb\u884c\u7f29\u8fdb\u3002 \u8df3\u8f6c\uff1a % : \u53ef\u4ee5\u5339\u914d{},\"\",(),[]\u4e4b\u95f4\u8df3\u8f6c\u3002 H\u3001M\u3001L \uff1a\u76f4\u63a5\u8df3\u8f6c\u5230\u5f53\u524d\u5c4f\u5e55\u7684\u9876\u90e8\u3001\u4e2d\u90e8\u3001\u5e95\u90e8\u3002 nH \uff1a\u8df3\u8f6c\u5230\u5f53\u524d\u5c4f\u7684\u7b2cn\u884c\u3002 nL \uff1a\u8df3\u8f6c\u5230\u5f53\u524d\u5c4f\u7684\u5012\u6570\u7b2cn\u884c\u3002 zt : \u5f53\u524d\u7f16\u8f91\u884c\u7f6e\u4e3a\u5c4f\u9876\u3002 zz : \u5f53\u524d\u7f16\u8f91\u884c\u7f6e\u4e3a\u5c4f\u4e2d\u3002 zb : \u5f53\u524d\u7f16\u8f91\u884c\u7f6e\u4e3a\u5c4f\u5e95\u3002 G \uff1a\u76f4\u63a5\u8df3\u8f6c\u5230\u6587\u4ef6\u7684\u5e95\u90e8\u3002 gg : \u8df3\u8f6c\u5230\u6587\u4ef6\u9996\u3002 () :\u8df3\u8f6c\u5230\u5f53\u524d\u7684\u884c\u9996\u3001\u884c\u5c3e\u3002 {} \uff1a\u5411\u4e0a\u3001\u5411\u4e0b\u8df3\u8f6c\u5230\u6700\u8fd1\u7684\u7a7a\u884c\u3002 [{ \uff1a\u8df3\u8f6c\u5230\u76ee\u524d\u533a\u5757\u5f00\u5934\u3002 ]} \uff1a\u8df3\u8f6c\u5230\u76ee\u524d\u533a\u5757\u7ed3\u5c3e\u3002 0 : \u8df3\u8f6c\u5230\u884c\u9996\u3002 $ : \u8df3\u8f6c\u5230\u884c\u5c3e\u3002 2$ : \u8df3\u8f6c\u5230\u4e0b\u4e00\u884c\u7684\u884c\u5c3e\u3002 n \uff1a\u8df3\u8f6c\u5230\u8be5\u884c\u7684\u7b2c n \u4e2a\u4f4d\u7f6e\u3002 15G : ,\u8df3\u8f6c\u523015\u884c\u3002 :15 \uff1a\u8df3\u8f6c\u523015\u884c\u3002 ctrl+b : \u5411\u540e\u7ffb\u4e00\u9875\u3002 ctrl+f \uff1a\u5411\u524d\u7ffb\u4e00\u9875\u3002 ctrl+u : \u5411\u540e\u7ffb\u534a\u9875\u3002 ctrl+d : \u5411\u524d\u7ffb\u534a\u9875\u3002 ctry+e : \u4e0b\u6eda\u4e00\u884c\u3002 \u9009\u62e9\uff1a V : \u9009\u62e9\u4e00\u884c\u3002 ^V : \u77e9\u5f62\u9009\u62e9\u3002 v3w : \u9009\u62e9\u4e09\u4e2a\u5b57\u7b26\u3002 \u7f16\u8f91 \u65b0\u589e\uff1a i : \u5149\u6807\u524d\u63d2\u5165\u3002 I : \u5728\u5f53\u524d\u884c\u9996\u63d2\u5165\u3002 a : \u5149\u6807\u540e\u63d2\u5165\u3002 A : \u5f53\u524d\u884c\u5c3e\u63d2\u5165\u3002 O : \u5728\u5f53\u524d\u884c\u4e4b\u524d\u63d2\u5165\u65b0\u884c\u3002 o : \u5728\u5f53\u524d\u884c\u4e4b\u540e\u63d2\u5165\u65b0\u884c\u3002 \u4fee\u6539 c (change) \u4e3a\u4e3b\uff1a r : \u66ff\u6362\u5149\u6807\u6240\u5728\u5904\u7684\u5b57\u7b26\u3002 R \uff1a\u66ff\u6362\u5149\u6807\u6240\u5230\u4e4b\u5904\u7684\u5b57\u7b26\u3002 cw : \u66f4\u6539\u5149\u6807\u6240\u5728\u5904\u7684\u5b57\u5230\u5b57\u5c3e\u5904\u3002 c3w : \u4fee\u65393\u4e2a\u5b57\u7b26\u3002 C \uff1a\u4fee\u6539\u5230\u884c\u5c3e\u3002 ci' \uff1a\u4fee\u6539\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 di' \uff1a\u5220\u9664\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 yi' \uff1a\u590d\u5236\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 vi' \uff1a\u9009\u4e2d\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 s``\uff1a\u66ff\u6362\u5f53\u524d\u4e00\u4e2a\u5149\u6807\u6240\u5904\u5b57\u7b26\u3002 1S \uff1a\u5220\u96641\u884c\uff0c\u5e76\u4ee5\u65b0\u6587\u672c\u4ee3\u66ff\u3002 \u5220\u9664 d(delete) \u4e3a\u4e3b\uff1a D \uff1a\u5220\u9664\u5230\u884c\u5c3e\u3002 X : \u6bcf\u6309\u4e00\u6b21\uff0c\u5220\u9664\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u7684\u524d\u9762\u4e00\u4e2a\u5b57\u7b26\u3002 x : \u6bcf\u6309\u4e00\u6b21\uff0c\u5220\u9664\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u7684\u540e\u9762\u4e00\u4e2a\u5b57\u7b26\u3002 6x : \u5220\u9664\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u540e\u97626\u4e2a\u5b57\u7b26\u3002 d^ : \u5220\u81f3\u884c\u9996\u3002 d$ : \u5220\u81f3\u884c\u5c3e\u3002 dd :(\u526a\u5207)\u5220\u9664\u5149\u6807\u6240\u5728\u884c\u3002 dw : \u5220\u9664\u4e00\u4e2a\u5355\u8bcd/\u5149\u6807\u4e4b\u540e\u7684\u5355\u8bcd\u5269\u4f59\u90e8\u5206\u3002 d4w : \u5220\u96644\u4e2aword\u3002 1dd : \u4ece\u5149\u6807\u6240\u5728\u884c\u5f00\u59cb\u5220\u96641\u884c\u3002 daB : \u5220\u9664{}\u53ca\u5176\u5185\u7684\u5185\u5bb9\u3002 diB : \u5220\u9664{}\u4e2d\u7684\u5185\u5bb9\u3002 n1,n2 d \uff1a\u5c06n1,n2\u884c\u4e4b\u95f4\u7684\u5185\u5bb9\u5220\u9664\u3002 \u67e5\u627e\uff1a / \uff1a \u8f93\u5165\u5173\u952e\u5b57\uff0c\u53d1\u73b0\u4e0d\u662f\u8981\u627e\u7684\uff0c\u76f4\u63a5\u5728\u6309n\uff0c\u5411\u540e\u67e5\u627e\u76f4\u5230\u627e\u5230\u4e3a\u6b62\u3002 ? \uff1a \u8f93\u5165\u5173\u952e\u5b57\uff0c\u53d1\u73b0\u4e0d\u662f\u8981\u627e\u7684\uff0c\u76f4\u63a5\u5728\u6309n\uff0c\u5411\u524d\u67e5\u627e\u76f4\u5230\u627e\u5230\u4e3a\u6b62\u3002 * : \u5728\u5f53\u524d\u9875\u5411\u540e\u67e5\u627e\u540c\u4e00\u5b57\u3002 \u590d\u5236 y(yank)\u4e3a\u4e3b\uff1a yw : \u5c06\u5149\u6807\u6240\u5728\u4e4b\u5904\u5230\u5b57\u5c3e\u7684\u5b57\u7b26\u590d\u5236\u5230\u7f13\u51b2\u533a\u4e2d\u3002 5yw : \u590d\u52365\u4e2a\u5b57\u5230\u7f13\u51b2\u533a\u3002 Y \uff1a\u76f8\u5f53\u4e8eyy, \u590d\u5236\u6574\u884c\u3002 5yy :\u8868\u793a\u590d\u5236\u4ece\u5149\u6807\u6240\u5728\u7684\u8be5\u884c\u5f80\u4e0b\u65705\u884c\u6587\u5b57\u3002 p : \u7c98\u8d34\u3002\u6240\u6709\u4e0ey\u76f8\u5173\u7684\u64cd\u4f5c\u5fc5\u7528p\u6765\u7ed3\u5408\u7c98\u8d34\u3002 n1,n2 co n3 \uff1a\u590d\u5236\u7b2cn1\u884c\u5230\u7b2cn2\u884c\u4e4b\u95f4\u7684\u5185\u5bb9\u5230\u7b2cn3\u884c\u540e\u9762\u3002 :normal kVyp \uff1a\u590d\u5236\u4e0a\u4e00\u884c \u5927\u5c0f\u5199\u8f6c\u6362\uff1a gUU : \u5c06\u5f53\u524d\u884c\u7684\u5b57\u6bcd\u6539\u4e3a\u5927\u5199\u3002 guu : \u5c06\u5f53\u524d\u884c\u7684\u5b57\u6bcd\u6539\u4e3a\u5c0f\u5199\u3002 gUw : \u5c06\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5355\u8bcd\u6539\u4e3a\u5927\u5199\u3002 guw : \u5c06\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5355\u8bcd\u6539\u4e3a\u5c0f\u5199\u3002 gg : \u5149\u6807\u5230\u6587\u4ef6\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002 gu : \u628a\u9009\u62e9\u8303\u56f4\u5168\u90e8\u5c0f\u5199\u3002 G : \u5230\u6587\u4ef6\u7ed3\u675f\u3002 \u5176\u5b83\uff1a J \uff1a\u5f53\u524d\u884c\u548c\u4e0b\u4e00\u884c\u5408\u5e76\u6210\u4e00\u884c\u3002 \u79fb\u52a8\uff1a n1,n2 m n3 \uff1a\u5c06n1\u884c\u5230n2\u884c\u4e4b\u95f4\u7684\u5185\u5bb9\u79fb\u81f3n3\u884c\u4e0b\u3002 \u9000\u51fa w filename : \u4fdd\u5b58\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6filename wq filename : \u4fdd\u5b58\u540e\u9000\u51fa\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6filename q \uff1a\u9000\u51fa\u4e0d\u4fdd\u5b58\u3002 \u7f13\u51b2\u533a\u64cd\u4f5c :buffers / :ls \u5217\u793a\u7f13\u51b2\u533a\u72b6\u6001 :buffer \u7f16\u8f91\u6307\u5b9a\u7f13\u51b2\u533a :ball \u7f16\u8f91\u6240\u6709\u7f13\u51b2\u533a :bn[ext] \u5230\u4e0b\u4e00\u7f13\u51b2\u533a :bp[revious] \u5230\u524d\u4e00\u7f13\u51b2\u533a :blast \u5230\u6700\u540e\u4e00\u4e2a\u7f13\u51b2\u533a :bfirst \u5230\u7b2c\u4e00\u4e2a\u7f13\u51b2\u533a :badd \u589e\u52a0\u7f13\u51b2\u533a :bd[elete] \u5220\u9664\u7f13\u51b2\u533a :bunload \u5378\u8f7d\u7f13\u51b2\u533a \u7a97\u53e3\u64cd\u4f5c ctrl+w p : \u5728\u4e24\u4e2a\u5206\u5272\u7a97\u53e3\u4e4b\u95f4\u6765\u56de\u5207\u6362\u3002 ctrl+w j : \u8df3\u5230\u4e0b\u9762\u7684\u5206\u5272\u7a97 ctrl+w h : \u8df3\u5230\u5de6\u8fb9\u7684\u5206\u5272\u7a97\u3002 ctrl+w k : \u8df3\u5230\u4e0a\u9762\u7684\u5206\u5272\u7a97\u3002 ctrl+w l : \u8df3\u5230\u53f3\u8fb9\u7684\u5206\u5272\u7a97\u3002 ctrl+w c : \u5173\u95ed\u5f53\u524d\u7a97\u53e3 ctrl+W s : \u4e0a\u4e0b\u5206\u5272\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6 ctrl+w v : \u5de6\u53f3\u5206\u5272\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6 \u653e\u4e24\u5f20\u901f\u8bb0\u56fe","title":"vim"},{"location":"ide/vim/#vim","text":"","title":"vim"},{"location":"ide/vim/#_1","text":"\u542f\u52a8Vim\u540e\uff0cvim\u5728 Normal \u6a21\u5f0f\u4e0b\u3002 \u8ba9\u6211\u4eec\u8fdb\u5165 Insert \u6a21\u5f0f\uff0c\u8bf7\u6309\u4e0b\u952e i \u6b64\u65f6\uff0c\u4f60\u53ef\u4ee5\u8f93\u5165\u6587\u672c\u4e86\uff0c\u5c31\u50cf\u4f60\u7528\u201c\u8bb0\u4e8b\u672c\u201d\u4e00\u6837\u3002 \u5982\u679c\u4f60\u60f3\u8fd4\u56de Normal \u6a21\u5f0f\uff0c\u8bf7\u6309 ESC \u952e\u3002 \u73b0\u5728\uff0c\u4f60\u77e5\u9053\u5982\u4f55\u5728 Insert \u548c Normal \u6a21\u5f0f\u4e0b\u5207\u6362\u4e86\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u547d\u4ee4\uff1a i \u2192 Insert \u6a21\u5f0f\uff0c\u6309 ESC \u56de\u5230 Normal \u6a21\u5f0f. x \u2192 \u5220\u5f53\u524d\u5149\u6807\u6240\u5728\u7684\u4e00\u4e2a\u5b57\u7b26\u3002 :wq \u2192 \u5b58\u76d8 + \u9000\u51fa (:w \u5b58\u76d8, :q \u9000\u51fa) \uff08\u9648\u7693\u6ce8\uff1a:w \u540e\u53ef\u4ee5\u8ddf\u6587\u4ef6\u540d\uff09 dd \u2192 \u5220\u9664\u5f53\u524d\u884c\uff0c\u5e76\u628a\u5220\u9664\u7684\u884c\u5b58\u5230\u526a\u8d34\u677f\u91cc p \u2192 \u7c98\u8d34\u526a\u8d34\u677f hjkl (\u5f3a\u4f8b\u63a8\u8350\u4f7f\u7528\u5176\u79fb\u52a8\u5149\u6807\uff0c\u4f46\u4e0d\u5fc5\u9700) \u2192\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5149\u6807\u952e (\u2190\u2193\u2191\u2192). \u6ce8: j \u5c31\u50cf\u4e0b\u7bad\u5934\u3002 :help command \u2192 \u663e\u793a\u76f8\u5173\u547d\u4ee4\u7684\u5e2e\u52a9\u3002\u4f60\u4e5f\u53ef\u4ee5\u5c31\u8f93\u5165 :help \u800c\u4e0d\u8ddf\u547d\u4ee4\u3002\uff08\u9648\u7693\u6ce8\uff1a\u9000\u51fa\u5e2e\u52a9\u9700\u8981\u8f93\u5165:q\uff09","title":"\u5165\u95e8"},{"location":"ide/vim/#_2","text":"\u5404\u79cd\u63d2\u5165\u6a21\u5f0f a \u2192 \u5728\u5149\u6807\u540e\u63d2\u5165 o \u2192 \u5728\u5f53\u524d\u884c\u540e\u63d2\u5165\u4e00\u4e2a\u65b0\u884c O \u2192 \u5728\u5f53\u524d\u884c\u524d\u63d2\u5165\u4e00\u4e2a\u65b0\u884c cw \u2192 \u66ff\u6362\u4ece\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u540e\u5230\u4e00\u4e2a\u5355\u8bcd\u7ed3\u5c3e\u7684\u5b57\u7b26 \u7b80\u5355\u7684\u79fb\u52a8\u5149\u6807 0 \u2192 \u6570\u5b57\u96f6\uff0c\u5230\u884c\u5934 ^ \u2192 \u5230\u672c\u884c\u7b2c\u4e00\u4e2a\u4e0d\u662fblank\u5b57\u7b26\u7684\u4f4d\u7f6e\uff08\u6240\u8c13blank\u5b57\u7b26\u5c31\u662f\u7a7a\u683c\uff0ctab\uff0c\u6362\u884c\uff0c\u56de\u8f66\u7b49\uff09 $ \u2192 \u5230\u672c\u884c\u884c\u5c3e g_ \u2192 \u5230\u672c\u884c\u6700\u540e\u4e00\u4e2a\u4e0d\u662fblank\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002 /pattern \u2192 \u641c\u7d22 pattern \u7684\u5b57\u7b26\u4e32\uff08\u9648\u7693\u6ce8\uff1a\u5982\u679c\u641c\u7d22\u51fa\u591a\u4e2a\u5339\u914d\uff0c\u53ef\u6309n\u952e\u5230\u4e0b\u4e00\u4e2a\uff09 \u62f7\u8d1d/\u7c98\u8d34 P \u2192 \u7c98\u8d34 yy \u2192 \u62f7\u8d1d\u5f53\u524d\u884c\u5f53\u884c\u4e8e ddP Undo/Redo u \u2192 undo C-r \u2192 redo \u6253\u5f00/\u4fdd\u5b58/\u9000\u51fa/\u6539\u53d8\u6587\u4ef6 :e \u2192 \u6253\u5f00\u4e00\u4e2a\u6587\u4ef6 :w \u2192 \u5b58\u76d8 :saveas path/to/file \u2192 \u53e6\u5b58\u4e3a :x\uff0c ZZ \u6216 :wq \u2192 \u4fdd\u5b58\u5e76\u9000\u51fa (:x \u8868\u793a\u4ec5\u5728\u9700\u8981\u65f6\u4fdd\u5b58\uff0cZZ\u4e0d\u9700\u8981\u8f93\u5165\u5192\u53f7\u5e76\u56de\u8f66) :q! \u2192 \u9000\u51fa\u4e0d\u4fdd\u5b58 :qa! \u5f3a\u884c\u9000\u51fa\u6240\u6709\u7684\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\uff0c\u5c31\u7b97\u522b\u7684\u6587\u4ef6\u6709\u66f4\u6539\u3002 :bn, :bp \u2192 \u4f60\u53ef\u4ee5\u540c\u65f6\u6253\u5f00\u5f88\u591a\u6587\u4ef6\uff0c\u4f7f\u7528\u8fd9\u4e24\u4e2a\u547d\u4ee4\u6765\u5207\u6362\u4e0b\u4e00\u4e2a\u6216\u4e0a\u4e00\u4e2a\u6587\u4ef6\u3002\uff08\u9648\u7693\u6ce8\uff1a\u6211\u559c\u6b22\u4f7f\u7528:n\u5230\u4e0b\u4e00\u4e2a\u6587\u4ef6\uff09 \u67e5\u627e / \u2192 \u5f00\u59cb\u67e5\u627e,n\u67e5\u627e\u4e0b\u4e00\u4e2a,N\u5411\u4e0a\u67e5\u627e","title":"\u7f16\u8f91\u547d\u4ee4"},{"location":"ide/vim/#_3","text":". \u2192 (\u5c0f\u6570\u70b9) \u53ef\u4ee5\u91cd\u590d\u4e0a\u4e00\u6b21\u7684\u547d\u4ee4 N command \u2192 \u91cd\u590d\u67d0\u4e2a\u547d\u4ee4N\u6b21 2dd \u2192 \u5220\u96642\u884c 3p \u2192 \u7c98\u8d34\u6587\u672c3\u6b21","title":"\u8fdb\u9636"},{"location":"ide/vim/#_4","text":"5G or :5 \u2192 \u5230\u7b2c N \u884c gg \u2192 \u5230\u7b2c\u4e00\u884c\u3002\uff08\u9648\u7693\u6ce8\uff1a\u76f8\u5f53\u4e8e1G\uff0c\u6216 :1\uff09 G \u2192 \u5230\u6700\u540e\u4e00\u884c\u3002 \u6309\u5355\u8bcd\u79fb\u52a8\uff1a w \u2192 \u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5f00\u5934\u3002 e \u2192 \u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u7ed3\u5c3e\u3002 % : \u5339\u914d\u62ec\u53f7\u79fb\u52a8\uff0c\u5305\u62ec (, {, [. \uff08\u9648\u7693\u6ce8\uff1a\u4f60\u9700\u8981\u628a\u5149\u6807\u5148\u79fb\u5230\u62ec\u53f7\u4e0a\uff09 \\* \u548c # : \u5339\u914d\u5149\u6807\u5f53\u524d\u6240\u5728\u7684\u5355\u8bcd\uff0c\u79fb\u52a8\u5149\u6807\u5230\u4e0b\u4e00\u4e2a\uff08\u6216\u4e0a\u4e00\u4e2a\uff09\u5339\u914d\u5355\u8bcd\uff08*\u662f\u4e0b\u4e00\u4e2a\uff0c#\u662f\u4e0a\u4e00\u4e2a\uff09","title":"\u5149\u6807\u79fb\u52a8\u66f4\u6709\u6548\u7387"},{"location":"ide/vim/#_5","text":"0y$ / yy : \u62f7\u8d1d\u5f53\u524d\u884c ye :\u4ece\u5f53\u524d\u4f4d\u7f6e\u62f7\u8d1d\u5230\u672c\u5355\u8bcd\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26 y2/foo :\u62f7\u8d1d2\u4e2a \u201cfoo\u201d \u4e4b\u95f4\u7684\u5b57\u7b26\u4e32","title":"\u66f4\u5feb\u7684\u62f7\u8d1d"},{"location":"ide/vim/#_6","text":"\u5728\u5f53\u524d\u884c\u4e0a\u79fb\u52a8\u5149\u6807: 0 ^ $ f F t T , ; 0 \u2192 \u5230\u884c\u5934 ^ \u2192 \u5230\u672c\u884c\u7684\u7b2c\u4e00\u4e2a\u975eblank\u5b57\u7b26 $ \u2192 \u5230\u884c\u5c3e g_ \u2192 \u5230\u672c\u884c\u6700\u540e\u4e00\u4e2a\u4e0d\u662fblank\u5b57\u7b26\u7684\u4f4d\u7f6e\u3002 fa \u2192 \u5230\u4e0b\u4e00\u4e2a\u4e3aa\u7684\u5b57\u7b26\u5904\uff0c\u4f60\u4e5f\u53ef\u4ee5fs\u5230\u4e0b\u4e00\u4e2a\u4e3as\u7684\u5b57\u7b26\u3002 t, \u2192 \u5230\u9017\u53f7\u524d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002\u9017\u53f7\u53ef\u4ee5\u53d8\u6210\u5176\u5b83\u5b57\u7b26\u3002 3fa \u2192 \u5728\u5f53\u524d\u884c\u67e5\u627e\u7b2c\u4e09\u4e2a\u51fa\u73b0\u7684a\u3002 F \u548c T \u2192 \u548c f \u548c t \u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u662f\u76f8\u53cd\u65b9\u5411 \u5220\u9664\u6240\u6709\u5185\u5bb9: dt :\u2192 \u5220\u9664\u6240\u6709\u7684\u5185\u5bb9\uff0c\u76f4\u5230\u9047\u5230\u53cc\u5f15\u53f7 \u6309ggdG :%d","title":"\u9ad8\u7ea7"},{"location":"ide/vim/#_7","text":"h,j,k,l : \u5de6\uff0c\u4e0b\uff0c\u4e0a\uff0c\u53f3\u3002 w : \u4e0b\u4e00\u4e2a\u8bcd\u7684\u8bcd\u9996\u3002 e :\u4e0b\u4e00\u4e2a\u8bcd\u7684\u8bcd\u5c3e\u3002 b :\u4e0a\u4e00\u4e2a\u8bcd\u7684\u8bcd\u9996\u3002 : v \u6a21\u5f0f\u9009\u4e2d\u540e\u8fdb\u884c\u7f29\u8fdb\u3002","title":"\u79fb\u52a8"},{"location":"ide/vim/#_8","text":"% : \u53ef\u4ee5\u5339\u914d{},\"\",(),[]\u4e4b\u95f4\u8df3\u8f6c\u3002 H\u3001M\u3001L \uff1a\u76f4\u63a5\u8df3\u8f6c\u5230\u5f53\u524d\u5c4f\u5e55\u7684\u9876\u90e8\u3001\u4e2d\u90e8\u3001\u5e95\u90e8\u3002 nH \uff1a\u8df3\u8f6c\u5230\u5f53\u524d\u5c4f\u7684\u7b2cn\u884c\u3002 nL \uff1a\u8df3\u8f6c\u5230\u5f53\u524d\u5c4f\u7684\u5012\u6570\u7b2cn\u884c\u3002 zt : \u5f53\u524d\u7f16\u8f91\u884c\u7f6e\u4e3a\u5c4f\u9876\u3002 zz : \u5f53\u524d\u7f16\u8f91\u884c\u7f6e\u4e3a\u5c4f\u4e2d\u3002 zb : \u5f53\u524d\u7f16\u8f91\u884c\u7f6e\u4e3a\u5c4f\u5e95\u3002 G \uff1a\u76f4\u63a5\u8df3\u8f6c\u5230\u6587\u4ef6\u7684\u5e95\u90e8\u3002 gg : \u8df3\u8f6c\u5230\u6587\u4ef6\u9996\u3002 () :\u8df3\u8f6c\u5230\u5f53\u524d\u7684\u884c\u9996\u3001\u884c\u5c3e\u3002 {} \uff1a\u5411\u4e0a\u3001\u5411\u4e0b\u8df3\u8f6c\u5230\u6700\u8fd1\u7684\u7a7a\u884c\u3002 [{ \uff1a\u8df3\u8f6c\u5230\u76ee\u524d\u533a\u5757\u5f00\u5934\u3002 ]} \uff1a\u8df3\u8f6c\u5230\u76ee\u524d\u533a\u5757\u7ed3\u5c3e\u3002 0 : \u8df3\u8f6c\u5230\u884c\u9996\u3002 $ : \u8df3\u8f6c\u5230\u884c\u5c3e\u3002 2$ : \u8df3\u8f6c\u5230\u4e0b\u4e00\u884c\u7684\u884c\u5c3e\u3002 n \uff1a\u8df3\u8f6c\u5230\u8be5\u884c\u7684\u7b2c n \u4e2a\u4f4d\u7f6e\u3002 15G : ,\u8df3\u8f6c\u523015\u884c\u3002 :15 \uff1a\u8df3\u8f6c\u523015\u884c\u3002 ctrl+b : \u5411\u540e\u7ffb\u4e00\u9875\u3002 ctrl+f \uff1a\u5411\u524d\u7ffb\u4e00\u9875\u3002 ctrl+u : \u5411\u540e\u7ffb\u534a\u9875\u3002 ctrl+d : \u5411\u524d\u7ffb\u534a\u9875\u3002 ctry+e : \u4e0b\u6eda\u4e00\u884c\u3002","title":"\u8df3\u8f6c\uff1a"},{"location":"ide/vim/#_9","text":"V : \u9009\u62e9\u4e00\u884c\u3002 ^V : \u77e9\u5f62\u9009\u62e9\u3002 v3w : \u9009\u62e9\u4e09\u4e2a\u5b57\u7b26\u3002","title":"\u9009\u62e9\uff1a"},{"location":"ide/vim/#_10","text":"\u65b0\u589e\uff1a i : \u5149\u6807\u524d\u63d2\u5165\u3002 I : \u5728\u5f53\u524d\u884c\u9996\u63d2\u5165\u3002 a : \u5149\u6807\u540e\u63d2\u5165\u3002 A : \u5f53\u524d\u884c\u5c3e\u63d2\u5165\u3002 O : \u5728\u5f53\u524d\u884c\u4e4b\u524d\u63d2\u5165\u65b0\u884c\u3002 o : \u5728\u5f53\u524d\u884c\u4e4b\u540e\u63d2\u5165\u65b0\u884c\u3002 \u4fee\u6539 c (change) \u4e3a\u4e3b\uff1a r : \u66ff\u6362\u5149\u6807\u6240\u5728\u5904\u7684\u5b57\u7b26\u3002 R \uff1a\u66ff\u6362\u5149\u6807\u6240\u5230\u4e4b\u5904\u7684\u5b57\u7b26\u3002 cw : \u66f4\u6539\u5149\u6807\u6240\u5728\u5904\u7684\u5b57\u5230\u5b57\u5c3e\u5904\u3002 c3w : \u4fee\u65393\u4e2a\u5b57\u7b26\u3002 C \uff1a\u4fee\u6539\u5230\u884c\u5c3e\u3002 ci' \uff1a\u4fee\u6539\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 di' \uff1a\u5220\u9664\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 yi' \uff1a\u590d\u5236\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 vi' \uff1a\u9009\u4e2d\u914d\u5bf9\u6807\u70b9\u7b26\u53f7\u4e2d\u7684\u6587\u672c\u5185\u5bb9\u3002 s``\uff1a\u66ff\u6362\u5f53\u524d\u4e00\u4e2a\u5149\u6807\u6240\u5904\u5b57\u7b26\u3002 1S \uff1a\u5220\u96641\u884c\uff0c\u5e76\u4ee5\u65b0\u6587\u672c\u4ee3\u66ff\u3002 \u5220\u9664 d(delete) \u4e3a\u4e3b\uff1a D \uff1a\u5220\u9664\u5230\u884c\u5c3e\u3002 X : \u6bcf\u6309\u4e00\u6b21\uff0c\u5220\u9664\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u7684\u524d\u9762\u4e00\u4e2a\u5b57\u7b26\u3002 x : \u6bcf\u6309\u4e00\u6b21\uff0c\u5220\u9664\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u7684\u540e\u9762\u4e00\u4e2a\u5b57\u7b26\u3002 6x : \u5220\u9664\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u540e\u97626\u4e2a\u5b57\u7b26\u3002 d^ : \u5220\u81f3\u884c\u9996\u3002 d$ : \u5220\u81f3\u884c\u5c3e\u3002 dd :(\u526a\u5207)\u5220\u9664\u5149\u6807\u6240\u5728\u884c\u3002 dw : \u5220\u9664\u4e00\u4e2a\u5355\u8bcd/\u5149\u6807\u4e4b\u540e\u7684\u5355\u8bcd\u5269\u4f59\u90e8\u5206\u3002 d4w : \u5220\u96644\u4e2aword\u3002 1dd : \u4ece\u5149\u6807\u6240\u5728\u884c\u5f00\u59cb\u5220\u96641\u884c\u3002 daB : \u5220\u9664{}\u53ca\u5176\u5185\u7684\u5185\u5bb9\u3002 diB : \u5220\u9664{}\u4e2d\u7684\u5185\u5bb9\u3002 n1,n2 d \uff1a\u5c06n1,n2\u884c\u4e4b\u95f4\u7684\u5185\u5bb9\u5220\u9664\u3002 \u67e5\u627e\uff1a / \uff1a \u8f93\u5165\u5173\u952e\u5b57\uff0c\u53d1\u73b0\u4e0d\u662f\u8981\u627e\u7684\uff0c\u76f4\u63a5\u5728\u6309n\uff0c\u5411\u540e\u67e5\u627e\u76f4\u5230\u627e\u5230\u4e3a\u6b62\u3002 ? \uff1a \u8f93\u5165\u5173\u952e\u5b57\uff0c\u53d1\u73b0\u4e0d\u662f\u8981\u627e\u7684\uff0c\u76f4\u63a5\u5728\u6309n\uff0c\u5411\u524d\u67e5\u627e\u76f4\u5230\u627e\u5230\u4e3a\u6b62\u3002 * : \u5728\u5f53\u524d\u9875\u5411\u540e\u67e5\u627e\u540c\u4e00\u5b57\u3002 \u590d\u5236 y(yank)\u4e3a\u4e3b\uff1a yw : \u5c06\u5149\u6807\u6240\u5728\u4e4b\u5904\u5230\u5b57\u5c3e\u7684\u5b57\u7b26\u590d\u5236\u5230\u7f13\u51b2\u533a\u4e2d\u3002 5yw : \u590d\u52365\u4e2a\u5b57\u5230\u7f13\u51b2\u533a\u3002 Y \uff1a\u76f8\u5f53\u4e8eyy, \u590d\u5236\u6574\u884c\u3002 5yy :\u8868\u793a\u590d\u5236\u4ece\u5149\u6807\u6240\u5728\u7684\u8be5\u884c\u5f80\u4e0b\u65705\u884c\u6587\u5b57\u3002 p : \u7c98\u8d34\u3002\u6240\u6709\u4e0ey\u76f8\u5173\u7684\u64cd\u4f5c\u5fc5\u7528p\u6765\u7ed3\u5408\u7c98\u8d34\u3002 n1,n2 co n3 \uff1a\u590d\u5236\u7b2cn1\u884c\u5230\u7b2cn2\u884c\u4e4b\u95f4\u7684\u5185\u5bb9\u5230\u7b2cn3\u884c\u540e\u9762\u3002 :normal kVyp \uff1a\u590d\u5236\u4e0a\u4e00\u884c \u5927\u5c0f\u5199\u8f6c\u6362\uff1a gUU : \u5c06\u5f53\u524d\u884c\u7684\u5b57\u6bcd\u6539\u4e3a\u5927\u5199\u3002 guu : \u5c06\u5f53\u524d\u884c\u7684\u5b57\u6bcd\u6539\u4e3a\u5c0f\u5199\u3002 gUw : \u5c06\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5355\u8bcd\u6539\u4e3a\u5927\u5199\u3002 guw : \u5c06\u5f53\u524d\u5149\u6807\u4e0b\u7684\u5355\u8bcd\u6539\u4e3a\u5c0f\u5199\u3002 gg : \u5149\u6807\u5230\u6587\u4ef6\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002 gu : \u628a\u9009\u62e9\u8303\u56f4\u5168\u90e8\u5c0f\u5199\u3002 G : \u5230\u6587\u4ef6\u7ed3\u675f\u3002 \u5176\u5b83\uff1a J \uff1a\u5f53\u524d\u884c\u548c\u4e0b\u4e00\u884c\u5408\u5e76\u6210\u4e00\u884c\u3002 \u79fb\u52a8\uff1a n1,n2 m n3 \uff1a\u5c06n1\u884c\u5230n2\u884c\u4e4b\u95f4\u7684\u5185\u5bb9\u79fb\u81f3n3\u884c\u4e0b\u3002","title":"\u7f16\u8f91"},{"location":"ide/vim/#_11","text":"w filename : \u4fdd\u5b58\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6filename wq filename : \u4fdd\u5b58\u540e\u9000\u51fa\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6filename q \uff1a\u9000\u51fa\u4e0d\u4fdd\u5b58\u3002","title":"\u9000\u51fa"},{"location":"ide/vim/#_12","text":":buffers / :ls \u5217\u793a\u7f13\u51b2\u533a\u72b6\u6001 :buffer \u7f16\u8f91\u6307\u5b9a\u7f13\u51b2\u533a :ball \u7f16\u8f91\u6240\u6709\u7f13\u51b2\u533a :bn[ext] \u5230\u4e0b\u4e00\u7f13\u51b2\u533a :bp[revious] \u5230\u524d\u4e00\u7f13\u51b2\u533a :blast \u5230\u6700\u540e\u4e00\u4e2a\u7f13\u51b2\u533a :bfirst \u5230\u7b2c\u4e00\u4e2a\u7f13\u51b2\u533a :badd \u589e\u52a0\u7f13\u51b2\u533a :bd[elete] \u5220\u9664\u7f13\u51b2\u533a :bunload \u5378\u8f7d\u7f13\u51b2\u533a","title":"\u7f13\u51b2\u533a\u64cd\u4f5c"},{"location":"ide/vim/#_13","text":"ctrl+w p : \u5728\u4e24\u4e2a\u5206\u5272\u7a97\u53e3\u4e4b\u95f4\u6765\u56de\u5207\u6362\u3002 ctrl+w j : \u8df3\u5230\u4e0b\u9762\u7684\u5206\u5272\u7a97 ctrl+w h : \u8df3\u5230\u5de6\u8fb9\u7684\u5206\u5272\u7a97\u3002 ctrl+w k : \u8df3\u5230\u4e0a\u9762\u7684\u5206\u5272\u7a97\u3002 ctrl+w l : \u8df3\u5230\u53f3\u8fb9\u7684\u5206\u5272\u7a97\u3002 ctrl+w c : \u5173\u95ed\u5f53\u524d\u7a97\u53e3 ctrl+W s : \u4e0a\u4e0b\u5206\u5272\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6 ctrl+w v : \u5de6\u53f3\u5206\u5272\u5f53\u524d\u6253\u5f00\u7684\u6587\u4ef6","title":"\u7a97\u53e3\u64cd\u4f5c"},{"location":"ide/vim/#_14","text":"","title":"\u653e\u4e24\u5f20\u901f\u8bb0\u56fe"},{"location":"ide/vim_ide/","text":"vim\u63d2\u4ef6 vim\u6210\u4e3aide\u57fa\u7840\u529f\u80fd \u79fb\u52a8\u5230\u4e0b\u4e00\u884c\u9996 + \u6574\u6bb5\u7f29\u8fdb ` \u6574\u7bc7\u4ee3\u7801\u8fdb\u884c\u6392\u7248: \u5149\u6807\u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934\uff0c\u7136\u540e\u6309 =G \u5373\u53ef\u3002 \u5bf9\u6307\u5b9a\u884c\u53cd\u7f29\u8fdb: :1,10 \u53ef\u89c6\u6a21\u5f0f\u4e0b\u64cd\u4f5c: v \u6a21\u5f0f\u9009\u4e2d\uff0c\u7136\u540e\u6309 [Shift+, \u6216 .] \uff0c\u5c31\u662f\u8f93\u5165 \u53cd\u7f29\u8fdb \u7f29\u8fdb \u5757\u6ce8\u91ca \u4f7f\u7528\u67e5\u627e\u66ff\u6362\u7684\u65b9\u6cd5 \u5728linux\u4e2d\uff0c\u6587\u672c\u6bcf\u4e00\u884c\u7684\u8d77\u59cb\u6807\u5fd7\u662f^\uff0c\u7ed3\u675f\u6807\u5fd7\u4e3a$\uff0c\u56e0\u6b64\u4f7f\u7528vim\u641c\u7d22^\u5e76\u66ff\u6362\u4e3a^#\u5373\u53ef\u3002 :10,20s/^/#/g #\u53d6\u6d88\u6ce8\u91ca\u4e3a :10,20s/^#//g \u6216\u8005\u7528 nerdcommenter \u63d2\u4ef6 \u4efb\u610f\u6587\u4ef6\u5bfc\u822a ctrlp: https://github.com/ctrlpvim/ctrlp.vim \u7cbe\u786e\u67e5\u627e\u66ff\u6362 \u591a\u6587\u4ef6\u67e5\u627e\u66ff\u6362 vimgrep \u9009\u62e9 v \u6a21\u5f0f \u590d\u5236 yy \u7c98\u8d34 p \u67e5\u627e ack(\u641c\u7d22): https://github.com/mileszs/ack.vim fuzzysearch(\u6a21\u7cca\u67e5\u627e) https://github.com/ggVGc/vim-fuzzysearch \u66ff\u6362 \u5149\u6807\u5b9a\u4f4d \u63d2\u4ef6 vimfiler(\u6587\u4ef6\u6811): https://github.com/Shougo/vimfiler.vim nerdtree(\u6587\u4ef6\u6811): https://github.com/scrooloose/nerdtree wildfire(\u5feb\u901f\u9009\u62e9\u4ee3\u7801) https://github.com/gcmt/wildfire.vim vim-surround(\u5feb\u901f\u52a0\u53cc\u5f15\u53f7) https://github.com/tpope/vim-surround","title":"Vim ide"},{"location":"ide/vim_ide/#vim","text":"","title":"vim\u63d2\u4ef6"},{"location":"ide/vim_ide/#vimide","text":"","title":"vim\u6210\u4e3aide\u57fa\u7840\u529f\u80fd"},{"location":"ide/vim_ide/#_1","text":"","title":"\u79fb\u52a8\u5230\u4e0b\u4e00\u884c\u9996+"},{"location":"ide/vim_ide/#_2","text":"\u6574\u7bc7\u4ee3\u7801\u8fdb\u884c\u6392\u7248: \u5149\u6807\u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934\uff0c\u7136\u540e\u6309 =G \u5373\u53ef\u3002 \u5bf9\u6307\u5b9a\u884c\u53cd\u7f29\u8fdb: :1,10 \u53ef\u89c6\u6a21\u5f0f\u4e0b\u64cd\u4f5c: v \u6a21\u5f0f\u9009\u4e2d\uff0c\u7136\u540e\u6309 [Shift+, \u6216 .] \uff0c\u5c31\u662f\u8f93\u5165 \u53cd\u7f29\u8fdb \u7f29\u8fdb","title":"\u6574\u6bb5\u7f29\u8fdb `"},{"location":"ide/vim_ide/#_3","text":"\u4f7f\u7528\u67e5\u627e\u66ff\u6362\u7684\u65b9\u6cd5 \u5728linux\u4e2d\uff0c\u6587\u672c\u6bcf\u4e00\u884c\u7684\u8d77\u59cb\u6807\u5fd7\u662f^\uff0c\u7ed3\u675f\u6807\u5fd7\u4e3a$\uff0c\u56e0\u6b64\u4f7f\u7528vim\u641c\u7d22^\u5e76\u66ff\u6362\u4e3a^#\u5373\u53ef\u3002 :10,20s/^/#/g #\u53d6\u6d88\u6ce8\u91ca\u4e3a :10,20s/^#//g \u6216\u8005\u7528 nerdcommenter \u63d2\u4ef6","title":"\u5757\u6ce8\u91ca"},{"location":"ide/vim_ide/#_4","text":"ctrlp: https://github.com/ctrlpvim/ctrlp.vim","title":"\u4efb\u610f\u6587\u4ef6\u5bfc\u822a"},{"location":"ide/vim_ide/#_5","text":"","title":"\u7cbe\u786e\u67e5\u627e\u66ff\u6362"},{"location":"ide/vim_ide/#_6","text":"vimgrep","title":"\u591a\u6587\u4ef6\u67e5\u627e\u66ff\u6362"},{"location":"ide/vim_ide/#_7","text":"v \u6a21\u5f0f","title":"\u9009\u62e9"},{"location":"ide/vim_ide/#_8","text":"yy","title":"\u590d\u5236"},{"location":"ide/vim_ide/#_9","text":"p","title":"\u7c98\u8d34"},{"location":"ide/vim_ide/#_10","text":"ack(\u641c\u7d22): https://github.com/mileszs/ack.vim fuzzysearch(\u6a21\u7cca\u67e5\u627e) https://github.com/ggVGc/vim-fuzzysearch","title":"\u67e5\u627e"},{"location":"ide/vim_ide/#_11","text":"","title":"\u66ff\u6362"},{"location":"ide/vim_ide/#_12","text":"","title":"\u5149\u6807\u5b9a\u4f4d"},{"location":"ide/vim_ide/#_13","text":"vimfiler(\u6587\u4ef6\u6811): https://github.com/Shougo/vimfiler.vim nerdtree(\u6587\u4ef6\u6811): https://github.com/scrooloose/nerdtree wildfire(\u5feb\u901f\u9009\u62e9\u4ee3\u7801) https://github.com/gcmt/wildfire.vim vim-surround(\u5feb\u901f\u52a0\u53cc\u5f15\u53f7) https://github.com/tpope/vim-surround","title":"\u63d2\u4ef6"},{"location":"linux/makefile/","text":"A Simple Makefile Tutorial \u51e0\u4e2a\u6982\u5ff5 target PHONY \u4f2a\u76ee\u6807 notdir (\u53bb\u9664\u8def\u5f84) patsubst (\u66ff\u6362\u901a\u914d\u7b26) wildcard (\u6269\u5c55\u901a\u914d\u7b26) Makefile\u5728\u53d8\u91cf\u7684\u5b9a\u4e49\u548c\u51fd\u6570\u5f15\u7528\u65f6\uff0c\u901a\u914d\u7b26\u5c06\u5931\u6548\u3002\u9700\u8981\u4f7f\u7528\u51fd\u6570\u201cwildcard\u201d\uff0c\u5b83\u7684\u7528\u6cd5\u662f\uff1a$(wildcard PATTERN...) #\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7684.c\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\u5e76\u6700\u540e\u8fde\u63a5\u6210\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 objects : = $( patsubst %.c,%.o, $( wildcard *.c )) foo : $( objects ) cc -o foo $( objects ) install\u547d\u4ee4 #\u590d\u5236\u5e76\u6539\u53d8\u6743\u9650 install -p -m 0755 skynet/3rd/lua/lua $( BIN_DIR ) /lua","title":"Makefile"},{"location":"linux/makefile/#a-simple-makefile-tutorial","text":"","title":"A Simple Makefile Tutorial"},{"location":"linux/makefile/#_1","text":"","title":"\u51e0\u4e2a\u6982\u5ff5"},{"location":"linux/makefile/#target","text":"","title":"target"},{"location":"linux/makefile/#phony","text":"","title":"PHONY \u4f2a\u76ee\u6807"},{"location":"linux/makefile/#notdir","text":"","title":"notdir (\u53bb\u9664\u8def\u5f84)"},{"location":"linux/makefile/#patsubst","text":"","title":"patsubst (\u66ff\u6362\u901a\u914d\u7b26)"},{"location":"linux/makefile/#wildcard","text":"Makefile\u5728\u53d8\u91cf\u7684\u5b9a\u4e49\u548c\u51fd\u6570\u5f15\u7528\u65f6\uff0c\u901a\u914d\u7b26\u5c06\u5931\u6548\u3002\u9700\u8981\u4f7f\u7528\u51fd\u6570\u201cwildcard\u201d\uff0c\u5b83\u7684\u7528\u6cd5\u662f\uff1a$(wildcard PATTERN...) #\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7684.c\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\u5e76\u6700\u540e\u8fde\u63a5\u6210\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 objects : = $( patsubst %.c,%.o, $( wildcard *.c )) foo : $( objects ) cc -o foo $( objects )","title":"wildcard (\u6269\u5c55\u901a\u914d\u7b26)"},{"location":"linux/makefile/#install","text":"#\u590d\u5236\u5e76\u6539\u53d8\u6743\u9650 install -p -m 0755 skynet/3rd/lua/lua $( BIN_DIR ) /lua","title":"install\u547d\u4ee4"},{"location":"lua/lua1_data/","text":"\u57fa\u672c\u6982\u5ff5 \u6587\u6863 lua5.1 : http://www.codingnow.com/2000/download/lua_manual.html lua5.3 : http://cloudwu.github.io/lua53doc/ \u503c\u4e0e\u7c7b\u578b Lua \u4e2d\u6709\u516b\u79cd\u57fa\u672c\u7c7b\u578b\uff1a nil \u3001 boolean \u3001 number \u3001 string \u3001 function \u3001 userdata \u3001 thread \u548c table userdata \u7c7b\u578b\u5141\u8bb8\u5c06 C \u4e2d\u7684\u6570\u636e\u4fdd\u5b58\u5728 Lua \u53d8\u91cf\u4e2d \u73af\u5883\u4e0e\u5168\u5c40\u73af\u5883 upvalue \u5f53\u6267\u884c\u5b8cg1 = f1(1979)\u540e\uff0c\u5c40\u90e8\u53d8\u91cfn\u7684\u751f\u547d\u672c\u8be5\u7ed3\u675f\uff0c\u4f46\u56e0\u4e3a\u5b83\u5df2\u7ecf\u6210\u4e86\u5185\u5d4c\u51fd\u6570f2(\u5b83\u53c8\u88ab\u8d4b\u7ed9\u4e86\u53d8\u91cfg1)\u7684upvalue local function f1 ( n ) -- \u51fd\u6570\u53c2\u6570\u4e5f\u662f\u5c40\u90e8\u53d8\u91cf local function f2 () print ( n ) -- \u5f15\u7528\u5916\u5305\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf end return f2 end g1 = f1 ( 1979 ) _ENV lua5.2\u4e2dload\u4ee3\u7801\u540e\u8fd4\u56de\u51fd\u6570\u7684upvalue.\u539f\u5148\u865a\u65e0\u7f25\u7f08\u53ea\u80fd\u901a\u8fc7 setfenv\u3001getfenv \u8bbf\u95ee\u7684\u6240\u8c13\u300c\u73af\u5883\u300d\u7ec8\u4e8e\u5b9e\u4f53\u5316\u4e3a\u4e00\u4e2a\u59cb\u7ec8\u5b58\u5728\u7684\u53d8\u91cf _ENV \u4e86 http://timothyqiu.com/archives/lua-note-sandboxes/ lua_setglobal/lua_getglobal\u90fd\u662f\u64cd\u4f5clua_State\u6ce8\u518c\u8868\u4e2dLUA_RIDX_GLOBALS\u4f2a\u7d22\u5f15\u6307\u5411\u7684\u5168\u5c40\u53d8\u91cf\u8868\uff0c\u4e0elua\u4e2d\u8bbf\u95ee_ENV['a']\u6216\u8005a\u662f\u4e0d\u540c\u7684\u3002 lua_load\u52a0\u8f7dlua\u4ee3\u7801\u540e\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u9ed8\u8ba4\u4f1a\u7ed9\u8fd9\u4e2a\u51fd\u6570\u8bbe\u7f6e\u4e00\u4e2aupvalue\u5c31\u53eb_ENV\uff0c\u8d77\u503c\u662fLUA_RIDX_GLOBALS\u7684\u5168\u5c40\u53d8\u91cf\u8868\uff0c\u4f60\u53ef\u4ee5lua_setupvalue\u8bbe\u7f6e\u8fd9\u4e2a\u51fd\u6570\u7684upvalue\uff0c\u5373\u4e0b\u68071\u7684upvalue\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u4f4d\u7f6e\u662f\u8fd9\u4e2a\u51fd\u6570\u7684_ENV\u8868\u5b58\u653e\u4f4d\u7f6e\uff08\u4f60\u53ef\u4ee5\u901a\u8fc7lua_setupvalue\u7684\u8fd4\u56de\u503c\u5370\u8bc1\u8fd9\u4e00\u70b9\uff09 _G \u5168\u5c40\u73af\u5883. lua_State\u4f1a\u5728\u521b\u5efa\u65f6\u4fdd\u8bc1LUA_RIDX_GLOBALS\u7684\u5168\u5c40\u53d8\u91cf\u8868\u4e2d\u5305\u542b\u4e00\u4e2a\u6307\u5411\u81ea\u5df1\u7684_G\u5143\u7d20\uff0c\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u5728\u4e0d\u8c03\u7528lua_setupvalue\u7684\u60c5\u51b5\u4e0b\u8be5\u8fd4\u56de\u51fd\u6570\u7684_ENV['_G']\u662f\u6307\u5411\u81ea\u5df1\u7684\uff0c\u5373LUA_RIDX_GLOBALS\u8fd9\u4e2a\u5168\u5c40\u8868\u3002\uff08\u5176\u5b9e\u4f60\u7684lua\u89e3\u91ca\u5668\u5c31\u662f\u7b80\u5355\u7684lua_load\u540epcall\u7684\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u521a\u542f\u52a8lua_State\u6765\u8bf4\u662f\u6ca1\u6709_ENV\u7684\uff0c\u662flua\u89e3\u91ca\u5668load\u4f60\u7684\u4ee3\u7801\u65f6\u81ea\u52a8\u7ed9\u5e26\u4e0a\u7684_ENV\uff0c\u5176\u503c\u662flua_state\u7684LUA_RIDX_GLOBALS\u5168\u5c40\u8868\u3002\uff09 lua_state\u542f\u52a8\u540e\u5728\u6ce8\u518c\u8868\u91ccLUA_RIDX_GLOBALS\u4e0b\u6807\u5b58\u653e\u7684\u5168\u5c40\u8868\u4e00\u5b9a\u6709\u4e00\u4e2a\u5143\u7d20\u662f\u6307\u5411\u81ea\u5df1\u7684\uff0c\u5373_G. \u9519\u8bef\u5904\u7406 \u629b\u51fa\u5f02\u5e38 error (message [, level]) : \u6355\u83b7 pcall pcall (f [, arg1, \u00b7\u00b7\u00b7]) \u4ee5\u4fdd\u62a4\u6a21\u5f0f \u8c03\u7528\u51fd\u6570 f ,\u8fd4\u56de\u503c [flag,errorinfo] ,\u8fd0\u884c\u6b63\u5e38\u662f flag \u4e3a true local function er ( ... ) error ( error ) end local flag , errorinfo = pcall ( er ) print ( flag , errorinfo ) --false ...:\\lua_error.lua:7: error xpcall xpcall (f, msgh [, arg1, \u00b7\u00b7\u00b7]) \u4e0e pcall \u533a\u522b:\u81ea\u5b9a\u4e49\u6d88\u606f\u5904\u7406,\u4e0d\u8fd4\u56de errorinfo local flag = xpcall ( function () error ( error.. ) end , function () print ( debug.traceback ()) end , 33 ) print ( flag ) --[[ stack traceback: ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12: in function ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12 [C]: in function error ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12: in function ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12 [C]: in function xpcall ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12: in main chunk [C]: ? false ]] -- debug debug.traceback :\u8f93\u51fa\u5806\u6808\u4fe1\u606f \u5143\u8868\u53ca\u5143\u65b9\u6cd5 \u5143\u8868(metatable) \u4e0ejs\u539f\u578b\u94fe(prototype)\u7c7b\u4f3c \"add\": + \u64cd\u4f5c\u3002 \u5982\u679c\u4efb\u4f55\u4e0d\u662f\u6570\u5b57\u7684\u503c\uff08\u5305\u62ec\u4e0d\u80fd\u8f6c\u6362\u4e3a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff09\u505a\u52a0\u6cd5\uff0c Lua \u5c31\u4f1a\u5c1d\u8bd5\u8c03\u7528\u5143\u65b9\u6cd5\u3002 \u9996\u5148\u3001Lua \u68c0\u67e5\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u6570\uff08\u5373\u4f7f\u5b83\u662f\u5408\u6cd5\u7684\uff09\uff0c \u5982\u679c\u8fd9\u4e2a\u64cd\u4f5c\u6570\u6ca1\u6709\u4e3a \"__add\" \u4e8b\u4ef6\u5b9a\u4e49\u5143\u65b9\u6cd5\uff0c Lua \u5c31\u4f1a\u63a5\u7740\u68c0\u67e5\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u6570\u3002 \u4e00\u65e6 Lua \u627e\u5230\u4e86\u5143\u65b9\u6cd5\uff0c \u5b83\u5c06\u628a\u4e24\u4e2a\u64cd\u4f5c\u6570\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u5143\u65b9\u6cd5\uff0c \u5143\u65b9\u6cd5\u7684\u7ed3\u679c\uff08\u8c03\u6574\u4e3a\u5355\u4e2a\u503c\uff09\u4f5c\u4e3a\u8fd9\u4e2a\u64cd\u4f5c\u7684\u7ed3\u679c\u3002 \u5982\u679c\u627e\u4e0d\u5230\u5143\u65b9\u6cd5\uff0c\u5c06\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002 local met = {} met . __add = function ( op1 , op2 ) for _ , item in pairs ( op2 ) do table.insert ( op1 , item ) end return op1 end local a = { 1 , 2 } local b = { 3 , 4 } setmetatable ( a , met ) local d = a + b for k , v in pairs ( d ) do print ( k , v ) end --[[ 1 1 2 2 3 3 4 4 ]] \"concat\": .. \uff08\u8fde\u63a5\uff09\u64cd\u4f5c\u3002 \u884c\u4e3a\u548c \"add\" \u64cd\u4f5c\u7c7b\u4f3c\uff0c \u4e0d\u540c\u7684\u662f Lua \u5728\u4efb\u4f55\u64cd\u4f5c\u6570\u5373\u4e0d\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 \u4e5f\u4e0d\u662f\u6570\u5b57\uff08\u6570\u5b57\u603b\u80fd\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\uff09\u7684\u60c5\u51b5\u4e0b\u5c1d\u8bd5\u5143\u65b9\u6cd5\u3002 \"len\": # \uff08\u53d6\u957f\u5ea6\uff09\u64cd\u4f5c\u3002 \u5982\u679c\u5bf9\u8c61\u4e0d\u662f\u5b57\u7b26\u4e32\uff0cLua \u4f1a\u5c1d\u8bd5\u5b83\u7684\u5143\u65b9\u6cd5\u3002 \u5982\u679c\u6709\u5143\u65b9\u6cd5\uff0c\u5219\u8c03\u7528\u5b83\u5e76\u5c06\u5bf9\u8c61\u4ee5\u53c2\u6570\u5f62\u5f0f\u4f20\u5165\uff0c \u800c\u8fd4\u56de\u503c\uff08\u88ab\u8c03\u6574\u4e3a\u5355\u4e2a\uff09\u5219\u4f5c\u4e3a\u7ed3\u679c\u3002 \u5982\u679c\u5bf9\u8c61\u662f\u4e00\u5f20\u8868\u4e14\u6ca1\u6709\u5143\u65b9\u6cd5\uff0c Lua \u4f7f\u7528\u8868\u7684\u53d6\u957f\u5ea6\u64cd\u4f5c\uff08\u53c2\u89c1 \u00a73.4.7\uff09\u3002 \u5176\u5b83\u60c5\u51b5\uff0c\u5747\u629b\u51fa\u9519\u8bef\u3002 \"index\": \u7d22\u5f15 table[key]\u3002 \u5f53 table \u4e0d\u662f\u8868\u6216\u662f\u8868 table \u4e2d\u4e0d\u5b58\u5728 key \u8fd9\u4e2a\u952e\u65f6\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u88ab\u89e6\u53d1\u3002 \u6b64\u65f6\uff0c\u4f1a\u8bfb\u51fa table \u76f8\u5e94\u7684\u5143\u65b9\u6cd5\u3002 \u5c3d\u7ba1\u540d\u5b57\u53d6\u6210\u8fd9\u6837\uff0c \u8fd9\u4e2a\u4e8b\u4ef6\u7684\u5143\u65b9\u6cd5\u5176\u5b9e\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u4e5f\u53ef\u4ee5\u662f\u4e00\u5f20\u8868\u3002 \u5982\u679c\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5219\u4ee5 table \u548c key \u4f5c\u4e3a\u53c2\u6570\u8c03\u7528\u5b83\u3002 \u5982\u679c\u5b83\u662f\u4e00\u5f20\u8868\uff0c\u6700\u7ec8\u7684\u7ed3\u679c\u5c31\u662f\u4ee5 key \u53d6\u7d22\u5f15\u8fd9\u5f20\u8868\u7684\u7ed3\u679c\u3002 \uff08\u8fd9\u4e2a\u7d22\u5f15\u8fc7\u7a0b\u662f\u8d70\u5e38\u89c4\u7684\u6d41\u7a0b\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7d22\u5f15\uff0c \u6240\u4ee5\u8fd9\u6b21\u7d22\u5f15\u6709\u53ef\u80fd\u5f15\u53d1\u53e6\u4e00\u6b21\u5143\u65b9\u6cd5\u3002\uff09 \"newindex\": \u7d22\u5f15\u8d4b\u503c table[key] = value \u3002 \u548c\u7d22\u5f15\u4e8b\u4ef6\u7c7b\u4f3c\uff0c\u5b83\u53d1\u751f\u5728 table \u4e0d\u662f\u8868\u6216\u662f\u8868 table \u4e2d\u4e0d\u5b58\u5728 key \u8fd9\u4e2a\u952e\u7684\u65f6\u5019\u3002 \u6b64\u65f6\uff0c\u4f1a\u8bfb\u51fa table \u76f8\u5e94\u7684\u5143\u65b9\u6cd5\u3002 \u540c\u7d22\u5f15\u8fc7\u7a0b\u90a3\u6837\uff0c \u8fd9\u4e2a\u4e8b\u4ef6\u7684\u5143\u65b9\u6cd5\u5373\u53ef\u4ee5\u662f\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u5f20\u8868\u3002 \u5982\u679c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c \u5219\u4ee5 table\u3001 key\u3001\u4ee5\u53ca value \u4e3a\u53c2\u6570\u4f20\u5165\u3002 \u5982\u679c\u662f\u4e00\u5f20\u8868\uff0c Lua \u5bf9\u8fd9\u5f20\u8868\u505a\u7d22\u5f15\u8d4b\u503c\u64cd\u4f5c\u3002 \uff08\u8fd9\u4e2a\u7d22\u5f15\u8fc7\u7a0b\u662f\u8d70\u5e38\u89c4\u7684\u6d41\u7a0b\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7d22\u5f15\u8d4b\u503c\uff0c \u6240\u4ee5\u8fd9\u6b21\u7d22\u5f15\u8d4b\u503c\u6709\u53ef\u80fd\u5f15\u53d1\u53e6\u4e00\u6b21\u5143\u65b9\u6cd5\u3002\uff09 \u4e00\u65e6\u6709\u4e86 \"newindex\" \u5143\u65b9\u6cd5\uff0c Lua \u5c31\u4e0d\u518d\u505a\u6700\u521d\u7684\u8d4b\u503c\u64cd\u4f5c\u3002 \uff08\u5982\u679c\u6709\u5fc5\u8981\uff0c\u5728\u5143\u65b9\u6cd5\u5185\u90e8\u53ef\u4ee5\u8c03\u7528 rawset \u6765\u505a\u8d4b\u503c\u3002\uff09 \"call\": \u51fd\u6570\u8c03\u7528\u64cd\u4f5c func(args)\u3002 \u5f53 Lua \u5c1d\u8bd5\u8c03\u7528\u4e00\u4e2a\u975e\u51fd\u6570\u7684\u503c\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6 \uff08\u5373 func \u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\uff09\u3002 \u67e5\u627e func \u7684\u5143\u65b9\u6cd5\uff0c \u5982\u679c\u627e\u5f97\u5230\uff0c\u5c31\u8c03\u7528\u8fd9\u4e2a\u5143\u65b9\u6cd5\uff0c func \u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u5165\uff0c\u539f\u6765\u8c03\u7528\u7684\u53c2\u6570\uff08args\uff09\u540e\u4f9d\u6b21\u6392\u5728\u540e\u9762 \u5783\u573e\u6536\u96c6 Lua \u5b9e\u73b0\u4e86\u4e00\u4e2a\u589e\u91cf\u6807\u8bb0-\u626b\u63cf\u6536\u96c6\u5668\u3002 \u5b83\u4f7f\u7528\u8fd9\u4e24\u4e2a\u6570\u5b57\u6765\u63a7\u5236\u5783\u573e\u6536\u96c6\u5faa\u73af\uff1a \u5783\u573e\u6536\u96c6\u5668\u95f4\u6b47\u7387 \u548c \u5783\u573e\u6536\u96c6\u5668\u6b65\u8fdb\u500d\u7387\u3002 \u8fd9\u4e24\u4e2a\u6570\u5b57\u90fd\u4f7f\u7528\u767e\u5206\u6570\u4e3a\u5355\u4f4d \uff08\u4f8b\u5982\uff1a\u503c 100 \u5728\u5185\u90e8\u8868\u793a 1 \uff09\u3002 \u5783\u573e\u6536\u96c6\u5668\u95f4\u6b47\u7387\u63a7\u5236\u7740\u6536\u96c6\u5668\u9700\u8981\u5728\u5f00\u542f\u65b0\u7684\u5faa\u73af\u524d\u8981\u7b49\u5f85\u591a\u4e45\u3002 \u589e\u5927\u8fd9\u4e2a\u503c\u4f1a\u51cf\u5c11\u6536\u96c6\u5668\u7684\u79ef\u6781\u6027\u3002 \u5f53\u8fd9\u4e2a\u503c\u6bd4 100 \u5c0f\u7684\u65f6\u5019\uff0c\u6536\u96c6\u5668\u5728\u5f00\u542f\u65b0\u7684\u5faa\u73af\u524d\u4e0d\u4f1a\u6709\u7b49\u5f85\u3002 \u8bbe\u7f6e\u8fd9\u4e2a\u503c\u4e3a 200 \u5c31\u4f1a\u8ba9\u6536\u96c6\u5668\u7b49\u5230\u603b\u5185\u5b58\u4f7f\u7528\u91cf\u8fbe\u5230 \u4e4b\u524d\u7684\u4e24\u500d\u65f6\u624d\u5f00\u59cb\u65b0\u7684\u5faa\u73af\u3002 \u5783\u573e\u6536\u96c6\u5668\u6b65\u8fdb\u500d\u7387\u63a7\u5236\u7740\u6536\u96c6\u5668\u8fd0\u4f5c\u901f\u5ea6\u76f8\u5bf9\u4e8e\u5185\u5b58\u5206\u914d\u901f\u5ea6\u7684\u500d\u7387\u3002 \u589e\u5927\u8fd9\u4e2a\u503c\u4e0d\u4ec5\u4f1a\u8ba9\u6536\u96c6\u5668\u66f4\u52a0\u79ef\u6781\uff0c\u8fd8\u4f1a\u589e\u52a0\u6bcf\u4e2a\u589e\u91cf\u6b65\u9aa4\u7684\u957f\u5ea6\u3002 \u4e0d\u8981\u628a\u8fd9\u4e2a\u503c\u8bbe\u5f97\u5c0f\u4e8e 100 \uff0c \u90a3\u6837\u7684\u8bdd\u6536\u96c6\u5668\u5c31\u5de5\u4f5c\u7684\u592a\u6162\u4e86\u4ee5\u81f3\u4e8e\u6c38\u8fdc\u90fd\u5e72\u4e0d\u5b8c\u4e00\u4e2a\u5faa\u73af\u3002 \u9ed8\u8ba4\u503c\u662f 200 \uff0c\u8fd9\u8868\u793a\u6536\u96c6\u5668\u4ee5\u5185\u5b58\u5206\u914d\u7684\u201c\u4e24\u500d\u201d\u901f\u5de5\u4f5c\u3002 \u5982\u679c\u4f60\u628a\u6b65\u8fdb\u500d\u7387\u8bbe\u4e3a\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6570\u5b57 \uff08\u6bd4\u4f60\u7684\u7a0b\u5e8f\u53ef\u80fd\u7528\u5230\u7684\u5b57\u8282\u6570\u8fd8\u5927 10% \uff09\uff0c \u6536\u96c6\u5668\u7684\u884c\u4e3a\u5c31\u50cf\u4e00\u4e2a stop-the-world \u6536\u96c6\u5668\u3002 \u63a5\u7740\u4f60\u82e5\u628a\u95f4\u6b47\u7387\u8bbe\u4e3a 200 \uff0c \u6536\u96c6\u5668\u7684\u884c\u4e3a\u5c31\u548c\u8fc7\u53bb\u7684 Lua \u7248\u672c\u4e00\u6837\u4e86\uff1a \u6bcf\u6b21 Lua \u4f7f\u7528\u7684\u5185\u5b58\u7ffb\u500d\u65f6\uff0c\u5c31\u505a\u4e00\u6b21\u5b8c\u6574\u7684\u6536\u96c6\u3002 \u5783\u573e\u6536\u96c6\u7684\u5143\u65b9\u6cd5 \u4f7f\u7528 C API,\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5783\u573e\u6536\u96c6\u7684\u5143\u65b9\u6cd5, __gc ,\u6765\u505a\u4e00\u4e9b\u7279\u6b8a\u7684\u8d44\u6e90\u91ca\u653e\u64cd\u4f5c,\u6bd4\u5982\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\u7b49,\u4e00\u4e2a userdata \u53ef\u88ab\u56de\u6536\uff0c\u82e5\u5b83\u7684 metatable \u4e2d\u6709 __gc \u8fd9\u4e2a\u57df\u3000\uff0c \u5783\u573e\u6536\u96c6\u5668\u5c31\u4e0d\u7acb\u5373\u6536\u56de\u5b83\u3002 \u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0cLua \u628a\u5b83\u4eec\u653e\u5230\u4e00\u4e2a\u5217\u8868\u4e2d\u3002 \u6700\u6536\u96c6\u7ed3\u675f\u540e\uff0cLua \u9488\u5bf9\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a userdata \u6267\u884c\u4e86\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\u7684\u7b49\u4ef7\u64cd\u4f5c\uff1a function gc_event ( udata ) local h = metatable ( udata ). __gc if h then h ( udata ) end end \u5728\u6bcf\u4e2a\u5783\u573e\u6536\u96c6\u5468\u671f\u7684\u7ed3\u5c3e\uff0c\u6bcf\u4e2a\u5728\u5f53\u524d\u5468\u671f\u88ab\u6536\u96c6\u8d77\u6765\u7684 userdata \u7684\u7ed3\u675f\u5b50\u4f1a\u4ee5 \u5b83\u4eec\u6784\u9020\u65f6\u7684\u9006\u5e8f\u4f9d\u6b21\u8c03\u7528\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u6536\u96c6\u5217\u8868\u4e2d\uff0c\u6700\u540e\u4e00\u4e2a\u5728\u7a0b\u5e8f\u4e2d\u88ab\u521b\u5efa\u7684 userdata \u7684 \u7ed3\u675f\u5b50\u4f1a\u88ab\u7b2c\u4e00\u4e2a\u8c03\u7528\u3002 \u53c2\u8003: http://blog.codingnow.com/cloud/LuaReferObject \u5f31\u8868 \u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u53ea\u88ab\u5f31\u5f15\u7528\u5f15\u7528\u5230\uff0c \u5783\u573e\u6536\u96c6\u5668\u5c31\u4f1a\u56de\u6536\u8fd9\u4e2a\u5bf9\u8c61 \u4e00\u5f20\u8868\u7684\u5143\u8868\u4e2d\u7684 __mode \u57df\u63a7\u5236\u7740\u8fd9\u5f20\u8868\u7684\u5f31\u5c5e\u6027\u3002 \u5f53 __mode \u57df\u662f\u4e00\u4e2a\u5305\u542b\u5b57\u7b26 'k' \u7684\u5b57\u7b26\u4e32\u65f6\uff0c\u8fd9\u5f20\u8868\u7684\u6240\u6709\u952e\u7686\u4e3a\u5f31\u5f15\u7528\u3002 \u5f53 __mode \u57df\u662f\u4e00\u4e2a\u5305\u542b\u5b57\u7b26 'v' \u7684\u5b57\u7b26\u4e32\u65f6\uff0c\u8fd9\u5f20\u8868\u7684\u6240\u6709\u503c\u7686\u4e3a\u5f31\u5f15\u7528 \u503c\u4e3a\u5f31\u8868 local weakTable = {} weakTable [ 1 ] = function () print ( i am the first element ) end weakTable [ 2 ] = function () print ( i am the second element ) end weakTable [ 3 ] = { 10 , 20 , 30 } setmetatable ( weakTable , { __mode = v }) --\u503c\u4e3a\u5f31\u8868 print ( table . getn ( weakTable )) --\u672agc\u524d3\u4e2a ele = weakTable [ 1 ] --\u7b2c\u4e00\u4e2a\u5143\u7d20\u88ab\u5f15\u7528 collectgarbage () print ( table . getn ( weakTable )) --gc\u540e\u53ea\u5269\u7b2c\u4e00\u4e2a\u5143\u7d20 ele = nil --\u5f15\u7528\u7f6e\u7a7a collectgarbage () print ( table . getn ( weakTable )) --\u5168\u90e8gc \u952e\u4e3a\u5f31\u8868 local function getkeyn ( t ) local count = 0 for k , v in pairs ( t or {}) do count = count + 1 end return count end local weakKey = {} local t1 = {} local t2 = {} weakKey [ t1 ] = 1 weakKey [ t2 ] = 2 setmetatable ( weakKey ,{ __mode = k }) --\u952e\u4e3a\u5f31\u8868 print ( getkeyn ( weakKey )) --2 t1 = nil collectgarbage () print ( getkeyn ( weakKey )) --1 \u534f\u7a0b \u652f\u6301\u534f\u7a0b\uff0c\u4e5f\u53eb \u534f\u540c\u5f0f\u591a\u7ebf\u7a0b\u3002 \u4e00\u4e2a\u534f\u7a0b\u5728 Lua \u4e2d\u4ee3\u8868\u4e86\u4e00\u6bb5\u72ec\u7acb\u7684\u6267\u884c\u7ebf\u7a0b\u3002 \u7136\u800c\uff0c\u4e0e\u591a\u7ebf\u7a0b\u7cfb\u7edf\u4e2d\u7684\u7ebf\u7a0b\u7684\u533a\u522b\u5728\u4e8e\uff0c \u534f\u7a0b\u4ec5\u5728\u663e\u5f0f\u8c03\u7528\u4e00\u4e2a\u8ba9\u51fa\uff08yield\uff09\u51fd\u6570\u65f6\u624d\u6302\u8d77\u5f53\u524d\u7684\u6267\u884c. \u63a5\u53e3 coroutine.create(f) \u51fd\u6570\u53c2\u6570[\u63a5\u53d7\u5355\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u4e3acoroutine\u7684\u4e3b\u51fd\u6570] \u51fd\u6570\u8fd4\u56de\u503c[\u8fd4\u56de\u4e00\u4e2athread\u5bf9\u8c61] \u51fd\u6570\u4f5c\u7528[\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u534f\u7a0b\uff0c\u534f\u7a0b\u7684\u4e3b\u51fd\u6570\u5b9a\u4e49\u4e86\u8be5\u534f\u7a0b\u5185\u7684\u4efb\u52a1\u6d41\u7a0b] coroutine.resume(co, [, var1, ...]) \u51fd\u6570\u53c2\u6570[\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1acoroutine.create\u7684\u8fd4\u56de\u503c\uff0c\u5373\u4e00\u4e2athread\u5bf9\u8c61] \u51fd\u6570\u53c2\u6570[\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1acoroutine\u4e2d\u6267\u884c\u9700\u8981\u7684\u53c2\u6570\uff0c\u662f\u4e00\u4e2a\u53d8\u957f\u53c2\u6570\uff0c\u53ef\u4ee5\u4f20\u4efb\u610f\u591a\u4e2a] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u6ca1\u6709\u4efb\u4f55\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56detrue\uff0c\u4e4b\u540e\u7684\u8fd4\u56de\u503c\u662f\u524d\u4e00\u4e2a\u8c03\u7528coroutine.yield\u4e2d\u4f20\u5165\u7684\u53c2\u6570\u503c] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u9047\u5230\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56defalse\uff0c\u52a0\u4e0a\u9519\u8bef\u4fe1\u606f] \u51fd\u6570\u4f5c\u7528[\u5f53\u4f60\u7b2c\u4e00\u6b21\u8c03\u7528coroutine.rusume\u65b9\u6cd5\u65f6\uff0ccoroutine\u4ece\u4e3b\u51fd\u6570\u7684\u7b2c\u4e00\u884c\u5f00\u59cb\u6267\u884c\uff0c\u4e4b\u540e\u5728coroutine\u5f00\u59cb\u6267\u884c\u540e\uff0c\u5b83\u4f1a\u4e00\u76f4\u8fd0\u884c\u5230 \u81ea\u8eab\u7ec8\u6b62\u6216\u8005\u662fcoroutine\u7684\u4e0b\u4e00\u6b21yield\u51fd\u6570] coroutine.yield(...) \u51fd\u6570\u53c2\u6570[\u53d8\u957f\u53c2\u6570] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u6ca1\u6709\u4efb\u4f55\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56detrue\uff0c\u4e4b\u540e\u7684\u8fd4\u56de\u503c\u662f\u524d\u4e00\u4e2a\u8c03\u7528coroutine.resume()\u4e2d\u4f20\u5165\u7684\u53c2\u6570\u503c] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u9047\u5230\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56defalse\uff0c\u52a0\u4e0a\u9519\u8bef\u4fe1\u606f] \u51fd\u6570\u4f5c\u7528[\u6302\u8d77\u5f53\u524d\u6267\u884c\u7684\u534f\u7a0b] coroutine.running() \u51fd\u6570\u53c2\u6570[\u7a7a] \u51fd\u6570\u8fd4\u56de\u503c[\u8fd4\u56de\u5f53\u524d\u534f\u7a0b\uff0c\u5982\u679c\u5b83\u88ab\u4e3b\u7ebf\u7a0b\u8c03\u7528\u7684\u8bdd\uff0c\u8fd4\u56denil] coroutine.status() \u51fd\u6570\u53c2\u6570[\u7a7a] \u51fd\u6570\u8fd4\u56de\u503c[\u8fd4\u56de\u5f53\u524d\u534f\u7a0b\u7684\u72b6\u6001\uff0c\u6709suspended, running, normal, dead] \u4f8b\u5b50 function foo ( a ) print ( [step2] foo , a ) return coroutine.yield ( 2 * a ) end local co = coroutine.create ( function ( a , b ) print ( [step1] co-body , a , b ) local r = foo ( a + 1 ) print ( [step4] co-body , r ) local r , s = coroutine.yield ( a + b , a - b ) print ( [step6] co-body , r , s ) return b , end end ) print ( [step3] main , coroutine.resume ( co , 1 , 10 )) print ( [step5] main , coroutine.resume ( co , r )) print ( [step7] main , coroutine.resume ( co , x , y )) print ( [step8] main , coroutine.resume ( co , x , y )) --[[ [step1] co-body 1 10 [step2] foo 2 [step3] main true 4 [step4] co-body r [step5] main true 11 -9 [step6] co-body x y [step7] main true 10 end [step8] main false cannot resume dead coroutine ]] --","title":"\u6570\u636e\u7c7b\u578b"},{"location":"lua/lua1_data/#_1","text":"","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"lua/lua1_data/#_2","text":"lua5.1 : http://www.codingnow.com/2000/download/lua_manual.html lua5.3 : http://cloudwu.github.io/lua53doc/","title":"\u6587\u6863"},{"location":"lua/lua1_data/#_3","text":"Lua \u4e2d\u6709\u516b\u79cd\u57fa\u672c\u7c7b\u578b\uff1a nil \u3001 boolean \u3001 number \u3001 string \u3001 function \u3001 userdata \u3001 thread \u548c table userdata \u7c7b\u578b\u5141\u8bb8\u5c06 C \u4e2d\u7684\u6570\u636e\u4fdd\u5b58\u5728 Lua \u53d8\u91cf\u4e2d","title":"\u503c\u4e0e\u7c7b\u578b"},{"location":"lua/lua1_data/#_4","text":"","title":"\u73af\u5883\u4e0e\u5168\u5c40\u73af\u5883"},{"location":"lua/lua1_data/#upvalue","text":"\u5f53\u6267\u884c\u5b8cg1 = f1(1979)\u540e\uff0c\u5c40\u90e8\u53d8\u91cfn\u7684\u751f\u547d\u672c\u8be5\u7ed3\u675f\uff0c\u4f46\u56e0\u4e3a\u5b83\u5df2\u7ecf\u6210\u4e86\u5185\u5d4c\u51fd\u6570f2(\u5b83\u53c8\u88ab\u8d4b\u7ed9\u4e86\u53d8\u91cfg1)\u7684upvalue local function f1 ( n ) -- \u51fd\u6570\u53c2\u6570\u4e5f\u662f\u5c40\u90e8\u53d8\u91cf local function f2 () print ( n ) -- \u5f15\u7528\u5916\u5305\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf end return f2 end g1 = f1 ( 1979 )","title":"upvalue"},{"location":"lua/lua1_data/#_env","text":"lua5.2\u4e2dload\u4ee3\u7801\u540e\u8fd4\u56de\u51fd\u6570\u7684upvalue.\u539f\u5148\u865a\u65e0\u7f25\u7f08\u53ea\u80fd\u901a\u8fc7 setfenv\u3001getfenv \u8bbf\u95ee\u7684\u6240\u8c13\u300c\u73af\u5883\u300d\u7ec8\u4e8e\u5b9e\u4f53\u5316\u4e3a\u4e00\u4e2a\u59cb\u7ec8\u5b58\u5728\u7684\u53d8\u91cf _ENV \u4e86 http://timothyqiu.com/archives/lua-note-sandboxes/ lua_setglobal/lua_getglobal\u90fd\u662f\u64cd\u4f5clua_State\u6ce8\u518c\u8868\u4e2dLUA_RIDX_GLOBALS\u4f2a\u7d22\u5f15\u6307\u5411\u7684\u5168\u5c40\u53d8\u91cf\u8868\uff0c\u4e0elua\u4e2d\u8bbf\u95ee_ENV['a']\u6216\u8005a\u662f\u4e0d\u540c\u7684\u3002 lua_load\u52a0\u8f7dlua\u4ee3\u7801\u540e\u4f1a\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u9ed8\u8ba4\u4f1a\u7ed9\u8fd9\u4e2a\u51fd\u6570\u8bbe\u7f6e\u4e00\u4e2aupvalue\u5c31\u53eb_ENV\uff0c\u8d77\u503c\u662fLUA_RIDX_GLOBALS\u7684\u5168\u5c40\u53d8\u91cf\u8868\uff0c\u4f60\u53ef\u4ee5lua_setupvalue\u8bbe\u7f6e\u8fd9\u4e2a\u51fd\u6570\u7684upvalue\uff0c\u5373\u4e0b\u68071\u7684upvalue\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u4f4d\u7f6e\u662f\u8fd9\u4e2a\u51fd\u6570\u7684_ENV\u8868\u5b58\u653e\u4f4d\u7f6e\uff08\u4f60\u53ef\u4ee5\u901a\u8fc7lua_setupvalue\u7684\u8fd4\u56de\u503c\u5370\u8bc1\u8fd9\u4e00\u70b9\uff09","title":"_ENV"},{"location":"lua/lua1_data/#_g","text":"\u5168\u5c40\u73af\u5883. lua_State\u4f1a\u5728\u521b\u5efa\u65f6\u4fdd\u8bc1LUA_RIDX_GLOBALS\u7684\u5168\u5c40\u53d8\u91cf\u8868\u4e2d\u5305\u542b\u4e00\u4e2a\u6307\u5411\u81ea\u5df1\u7684_G\u5143\u7d20\uff0c\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u5728\u4e0d\u8c03\u7528lua_setupvalue\u7684\u60c5\u51b5\u4e0b\u8be5\u8fd4\u56de\u51fd\u6570\u7684_ENV['_G']\u662f\u6307\u5411\u81ea\u5df1\u7684\uff0c\u5373LUA_RIDX_GLOBALS\u8fd9\u4e2a\u5168\u5c40\u8868\u3002\uff08\u5176\u5b9e\u4f60\u7684lua\u89e3\u91ca\u5668\u5c31\u662f\u7b80\u5355\u7684lua_load\u540epcall\u7684\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u521a\u542f\u52a8lua_State\u6765\u8bf4\u662f\u6ca1\u6709_ENV\u7684\uff0c\u662flua\u89e3\u91ca\u5668load\u4f60\u7684\u4ee3\u7801\u65f6\u81ea\u52a8\u7ed9\u5e26\u4e0a\u7684_ENV\uff0c\u5176\u503c\u662flua_state\u7684LUA_RIDX_GLOBALS\u5168\u5c40\u8868\u3002\uff09 lua_state\u542f\u52a8\u540e\u5728\u6ce8\u518c\u8868\u91ccLUA_RIDX_GLOBALS\u4e0b\u6807\u5b58\u653e\u7684\u5168\u5c40\u8868\u4e00\u5b9a\u6709\u4e00\u4e2a\u5143\u7d20\u662f\u6307\u5411\u81ea\u5df1\u7684\uff0c\u5373_G.","title":"_G"},{"location":"lua/lua1_data/#_5","text":"","title":"\u9519\u8bef\u5904\u7406"},{"location":"lua/lua1_data/#_6","text":"error (message [, level]) :","title":"\u629b\u51fa\u5f02\u5e38"},{"location":"lua/lua1_data/#_7","text":"","title":"\u6355\u83b7"},{"location":"lua/lua1_data/#pcall","text":"pcall (f [, arg1, \u00b7\u00b7\u00b7]) \u4ee5\u4fdd\u62a4\u6a21\u5f0f \u8c03\u7528\u51fd\u6570 f ,\u8fd4\u56de\u503c [flag,errorinfo] ,\u8fd0\u884c\u6b63\u5e38\u662f flag \u4e3a true local function er ( ... ) error ( error ) end local flag , errorinfo = pcall ( er ) print ( flag , errorinfo ) --false ...:\\lua_error.lua:7: error","title":"pcall"},{"location":"lua/lua1_data/#xpcall","text":"xpcall (f, msgh [, arg1, \u00b7\u00b7\u00b7]) \u4e0e pcall \u533a\u522b:\u81ea\u5b9a\u4e49\u6d88\u606f\u5904\u7406,\u4e0d\u8fd4\u56de errorinfo local flag = xpcall ( function () error ( error.. ) end , function () print ( debug.traceback ()) end , 33 ) print ( flag ) --[[ stack traceback: ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12: in function ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12 [C]: in function error ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12: in function ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12 [C]: in function xpcall ...:\\git\\code_research\\lua_study\\lua_code\\lua_error.lua:12: in main chunk [C]: ? false ]] --","title":"xpcall"},{"location":"lua/lua1_data/#debug","text":"debug.traceback :\u8f93\u51fa\u5806\u6808\u4fe1\u606f","title":"debug"},{"location":"lua/lua1_data/#_8","text":"","title":"\u5143\u8868\u53ca\u5143\u65b9\u6cd5"},{"location":"lua/lua1_data/#metatable","text":"\u4e0ejs\u539f\u578b\u94fe(prototype)\u7c7b\u4f3c \"add\": + \u64cd\u4f5c\u3002 \u5982\u679c\u4efb\u4f55\u4e0d\u662f\u6570\u5b57\u7684\u503c\uff08\u5305\u62ec\u4e0d\u80fd\u8f6c\u6362\u4e3a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff09\u505a\u52a0\u6cd5\uff0c Lua \u5c31\u4f1a\u5c1d\u8bd5\u8c03\u7528\u5143\u65b9\u6cd5\u3002 \u9996\u5148\u3001Lua \u68c0\u67e5\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u6570\uff08\u5373\u4f7f\u5b83\u662f\u5408\u6cd5\u7684\uff09\uff0c \u5982\u679c\u8fd9\u4e2a\u64cd\u4f5c\u6570\u6ca1\u6709\u4e3a \"__add\" \u4e8b\u4ef6\u5b9a\u4e49\u5143\u65b9\u6cd5\uff0c Lua \u5c31\u4f1a\u63a5\u7740\u68c0\u67e5\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u6570\u3002 \u4e00\u65e6 Lua \u627e\u5230\u4e86\u5143\u65b9\u6cd5\uff0c \u5b83\u5c06\u628a\u4e24\u4e2a\u64cd\u4f5c\u6570\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\u5143\u65b9\u6cd5\uff0c \u5143\u65b9\u6cd5\u7684\u7ed3\u679c\uff08\u8c03\u6574\u4e3a\u5355\u4e2a\u503c\uff09\u4f5c\u4e3a\u8fd9\u4e2a\u64cd\u4f5c\u7684\u7ed3\u679c\u3002 \u5982\u679c\u627e\u4e0d\u5230\u5143\u65b9\u6cd5\uff0c\u5c06\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u3002 local met = {} met . __add = function ( op1 , op2 ) for _ , item in pairs ( op2 ) do table.insert ( op1 , item ) end return op1 end local a = { 1 , 2 } local b = { 3 , 4 } setmetatable ( a , met ) local d = a + b for k , v in pairs ( d ) do print ( k , v ) end --[[ 1 1 2 2 3 3 4 4 ]] \"concat\": .. \uff08\u8fde\u63a5\uff09\u64cd\u4f5c\u3002 \u884c\u4e3a\u548c \"add\" \u64cd\u4f5c\u7c7b\u4f3c\uff0c \u4e0d\u540c\u7684\u662f Lua \u5728\u4efb\u4f55\u64cd\u4f5c\u6570\u5373\u4e0d\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 \u4e5f\u4e0d\u662f\u6570\u5b57\uff08\u6570\u5b57\u603b\u80fd\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\uff09\u7684\u60c5\u51b5\u4e0b\u5c1d\u8bd5\u5143\u65b9\u6cd5\u3002 \"len\": # \uff08\u53d6\u957f\u5ea6\uff09\u64cd\u4f5c\u3002 \u5982\u679c\u5bf9\u8c61\u4e0d\u662f\u5b57\u7b26\u4e32\uff0cLua \u4f1a\u5c1d\u8bd5\u5b83\u7684\u5143\u65b9\u6cd5\u3002 \u5982\u679c\u6709\u5143\u65b9\u6cd5\uff0c\u5219\u8c03\u7528\u5b83\u5e76\u5c06\u5bf9\u8c61\u4ee5\u53c2\u6570\u5f62\u5f0f\u4f20\u5165\uff0c \u800c\u8fd4\u56de\u503c\uff08\u88ab\u8c03\u6574\u4e3a\u5355\u4e2a\uff09\u5219\u4f5c\u4e3a\u7ed3\u679c\u3002 \u5982\u679c\u5bf9\u8c61\u662f\u4e00\u5f20\u8868\u4e14\u6ca1\u6709\u5143\u65b9\u6cd5\uff0c Lua \u4f7f\u7528\u8868\u7684\u53d6\u957f\u5ea6\u64cd\u4f5c\uff08\u53c2\u89c1 \u00a73.4.7\uff09\u3002 \u5176\u5b83\u60c5\u51b5\uff0c\u5747\u629b\u51fa\u9519\u8bef\u3002 \"index\": \u7d22\u5f15 table[key]\u3002 \u5f53 table \u4e0d\u662f\u8868\u6216\u662f\u8868 table \u4e2d\u4e0d\u5b58\u5728 key \u8fd9\u4e2a\u952e\u65f6\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u88ab\u89e6\u53d1\u3002 \u6b64\u65f6\uff0c\u4f1a\u8bfb\u51fa table \u76f8\u5e94\u7684\u5143\u65b9\u6cd5\u3002 \u5c3d\u7ba1\u540d\u5b57\u53d6\u6210\u8fd9\u6837\uff0c \u8fd9\u4e2a\u4e8b\u4ef6\u7684\u5143\u65b9\u6cd5\u5176\u5b9e\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u4e5f\u53ef\u4ee5\u662f\u4e00\u5f20\u8868\u3002 \u5982\u679c\u5b83\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5219\u4ee5 table \u548c key \u4f5c\u4e3a\u53c2\u6570\u8c03\u7528\u5b83\u3002 \u5982\u679c\u5b83\u662f\u4e00\u5f20\u8868\uff0c\u6700\u7ec8\u7684\u7ed3\u679c\u5c31\u662f\u4ee5 key \u53d6\u7d22\u5f15\u8fd9\u5f20\u8868\u7684\u7ed3\u679c\u3002 \uff08\u8fd9\u4e2a\u7d22\u5f15\u8fc7\u7a0b\u662f\u8d70\u5e38\u89c4\u7684\u6d41\u7a0b\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7d22\u5f15\uff0c \u6240\u4ee5\u8fd9\u6b21\u7d22\u5f15\u6709\u53ef\u80fd\u5f15\u53d1\u53e6\u4e00\u6b21\u5143\u65b9\u6cd5\u3002\uff09 \"newindex\": \u7d22\u5f15\u8d4b\u503c table[key] = value \u3002 \u548c\u7d22\u5f15\u4e8b\u4ef6\u7c7b\u4f3c\uff0c\u5b83\u53d1\u751f\u5728 table \u4e0d\u662f\u8868\u6216\u662f\u8868 table \u4e2d\u4e0d\u5b58\u5728 key \u8fd9\u4e2a\u952e\u7684\u65f6\u5019\u3002 \u6b64\u65f6\uff0c\u4f1a\u8bfb\u51fa table \u76f8\u5e94\u7684\u5143\u65b9\u6cd5\u3002 \u540c\u7d22\u5f15\u8fc7\u7a0b\u90a3\u6837\uff0c \u8fd9\u4e2a\u4e8b\u4ef6\u7684\u5143\u65b9\u6cd5\u5373\u53ef\u4ee5\u662f\u51fd\u6570\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u5f20\u8868\u3002 \u5982\u679c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c \u5219\u4ee5 table\u3001 key\u3001\u4ee5\u53ca value \u4e3a\u53c2\u6570\u4f20\u5165\u3002 \u5982\u679c\u662f\u4e00\u5f20\u8868\uff0c Lua \u5bf9\u8fd9\u5f20\u8868\u505a\u7d22\u5f15\u8d4b\u503c\u64cd\u4f5c\u3002 \uff08\u8fd9\u4e2a\u7d22\u5f15\u8fc7\u7a0b\u662f\u8d70\u5e38\u89c4\u7684\u6d41\u7a0b\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u7d22\u5f15\u8d4b\u503c\uff0c \u6240\u4ee5\u8fd9\u6b21\u7d22\u5f15\u8d4b\u503c\u6709\u53ef\u80fd\u5f15\u53d1\u53e6\u4e00\u6b21\u5143\u65b9\u6cd5\u3002\uff09 \u4e00\u65e6\u6709\u4e86 \"newindex\" \u5143\u65b9\u6cd5\uff0c Lua \u5c31\u4e0d\u518d\u505a\u6700\u521d\u7684\u8d4b\u503c\u64cd\u4f5c\u3002 \uff08\u5982\u679c\u6709\u5fc5\u8981\uff0c\u5728\u5143\u65b9\u6cd5\u5185\u90e8\u53ef\u4ee5\u8c03\u7528 rawset \u6765\u505a\u8d4b\u503c\u3002\uff09 \"call\": \u51fd\u6570\u8c03\u7528\u64cd\u4f5c func(args)\u3002 \u5f53 Lua \u5c1d\u8bd5\u8c03\u7528\u4e00\u4e2a\u975e\u51fd\u6570\u7684\u503c\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\u8fd9\u4e2a\u4e8b\u4ef6 \uff08\u5373 func \u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\uff09\u3002 \u67e5\u627e func \u7684\u5143\u65b9\u6cd5\uff0c \u5982\u679c\u627e\u5f97\u5230\uff0c\u5c31\u8c03\u7528\u8fd9\u4e2a\u5143\u65b9\u6cd5\uff0c func \u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u5165\uff0c\u539f\u6765\u8c03\u7528\u7684\u53c2\u6570\uff08args\uff09\u540e\u4f9d\u6b21\u6392\u5728\u540e\u9762","title":"\u5143\u8868(metatable)"},{"location":"lua/lua1_data/#_9","text":"Lua \u5b9e\u73b0\u4e86\u4e00\u4e2a\u589e\u91cf\u6807\u8bb0-\u626b\u63cf\u6536\u96c6\u5668\u3002 \u5b83\u4f7f\u7528\u8fd9\u4e24\u4e2a\u6570\u5b57\u6765\u63a7\u5236\u5783\u573e\u6536\u96c6\u5faa\u73af\uff1a \u5783\u573e\u6536\u96c6\u5668\u95f4\u6b47\u7387 \u548c \u5783\u573e\u6536\u96c6\u5668\u6b65\u8fdb\u500d\u7387\u3002 \u8fd9\u4e24\u4e2a\u6570\u5b57\u90fd\u4f7f\u7528\u767e\u5206\u6570\u4e3a\u5355\u4f4d \uff08\u4f8b\u5982\uff1a\u503c 100 \u5728\u5185\u90e8\u8868\u793a 1 \uff09\u3002 \u5783\u573e\u6536\u96c6\u5668\u95f4\u6b47\u7387\u63a7\u5236\u7740\u6536\u96c6\u5668\u9700\u8981\u5728\u5f00\u542f\u65b0\u7684\u5faa\u73af\u524d\u8981\u7b49\u5f85\u591a\u4e45\u3002 \u589e\u5927\u8fd9\u4e2a\u503c\u4f1a\u51cf\u5c11\u6536\u96c6\u5668\u7684\u79ef\u6781\u6027\u3002 \u5f53\u8fd9\u4e2a\u503c\u6bd4 100 \u5c0f\u7684\u65f6\u5019\uff0c\u6536\u96c6\u5668\u5728\u5f00\u542f\u65b0\u7684\u5faa\u73af\u524d\u4e0d\u4f1a\u6709\u7b49\u5f85\u3002 \u8bbe\u7f6e\u8fd9\u4e2a\u503c\u4e3a 200 \u5c31\u4f1a\u8ba9\u6536\u96c6\u5668\u7b49\u5230\u603b\u5185\u5b58\u4f7f\u7528\u91cf\u8fbe\u5230 \u4e4b\u524d\u7684\u4e24\u500d\u65f6\u624d\u5f00\u59cb\u65b0\u7684\u5faa\u73af\u3002 \u5783\u573e\u6536\u96c6\u5668\u6b65\u8fdb\u500d\u7387\u63a7\u5236\u7740\u6536\u96c6\u5668\u8fd0\u4f5c\u901f\u5ea6\u76f8\u5bf9\u4e8e\u5185\u5b58\u5206\u914d\u901f\u5ea6\u7684\u500d\u7387\u3002 \u589e\u5927\u8fd9\u4e2a\u503c\u4e0d\u4ec5\u4f1a\u8ba9\u6536\u96c6\u5668\u66f4\u52a0\u79ef\u6781\uff0c\u8fd8\u4f1a\u589e\u52a0\u6bcf\u4e2a\u589e\u91cf\u6b65\u9aa4\u7684\u957f\u5ea6\u3002 \u4e0d\u8981\u628a\u8fd9\u4e2a\u503c\u8bbe\u5f97\u5c0f\u4e8e 100 \uff0c \u90a3\u6837\u7684\u8bdd\u6536\u96c6\u5668\u5c31\u5de5\u4f5c\u7684\u592a\u6162\u4e86\u4ee5\u81f3\u4e8e\u6c38\u8fdc\u90fd\u5e72\u4e0d\u5b8c\u4e00\u4e2a\u5faa\u73af\u3002 \u9ed8\u8ba4\u503c\u662f 200 \uff0c\u8fd9\u8868\u793a\u6536\u96c6\u5668\u4ee5\u5185\u5b58\u5206\u914d\u7684\u201c\u4e24\u500d\u201d\u901f\u5de5\u4f5c\u3002 \u5982\u679c\u4f60\u628a\u6b65\u8fdb\u500d\u7387\u8bbe\u4e3a\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6570\u5b57 \uff08\u6bd4\u4f60\u7684\u7a0b\u5e8f\u53ef\u80fd\u7528\u5230\u7684\u5b57\u8282\u6570\u8fd8\u5927 10% \uff09\uff0c \u6536\u96c6\u5668\u7684\u884c\u4e3a\u5c31\u50cf\u4e00\u4e2a stop-the-world \u6536\u96c6\u5668\u3002 \u63a5\u7740\u4f60\u82e5\u628a\u95f4\u6b47\u7387\u8bbe\u4e3a 200 \uff0c \u6536\u96c6\u5668\u7684\u884c\u4e3a\u5c31\u548c\u8fc7\u53bb\u7684 Lua \u7248\u672c\u4e00\u6837\u4e86\uff1a \u6bcf\u6b21 Lua \u4f7f\u7528\u7684\u5185\u5b58\u7ffb\u500d\u65f6\uff0c\u5c31\u505a\u4e00\u6b21\u5b8c\u6574\u7684\u6536\u96c6\u3002","title":"\u5783\u573e\u6536\u96c6"},{"location":"lua/lua1_data/#_10","text":"\u4f7f\u7528 C API,\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5783\u573e\u6536\u96c6\u7684\u5143\u65b9\u6cd5, __gc ,\u6765\u505a\u4e00\u4e9b\u7279\u6b8a\u7684\u8d44\u6e90\u91ca\u653e\u64cd\u4f5c,\u6bd4\u5982\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\u7b49,\u4e00\u4e2a userdata \u53ef\u88ab\u56de\u6536\uff0c\u82e5\u5b83\u7684 metatable \u4e2d\u6709 __gc \u8fd9\u4e2a\u57df\u3000\uff0c \u5783\u573e\u6536\u96c6\u5668\u5c31\u4e0d\u7acb\u5373\u6536\u56de\u5b83\u3002 \u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0cLua \u628a\u5b83\u4eec\u653e\u5230\u4e00\u4e2a\u5217\u8868\u4e2d\u3002 \u6700\u6536\u96c6\u7ed3\u675f\u540e\uff0cLua \u9488\u5bf9\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a userdata \u6267\u884c\u4e86\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\u7684\u7b49\u4ef7\u64cd\u4f5c\uff1a function gc_event ( udata ) local h = metatable ( udata ). __gc if h then h ( udata ) end end \u5728\u6bcf\u4e2a\u5783\u573e\u6536\u96c6\u5468\u671f\u7684\u7ed3\u5c3e\uff0c\u6bcf\u4e2a\u5728\u5f53\u524d\u5468\u671f\u88ab\u6536\u96c6\u8d77\u6765\u7684 userdata \u7684\u7ed3\u675f\u5b50\u4f1a\u4ee5 \u5b83\u4eec\u6784\u9020\u65f6\u7684\u9006\u5e8f\u4f9d\u6b21\u8c03\u7528\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u6536\u96c6\u5217\u8868\u4e2d\uff0c\u6700\u540e\u4e00\u4e2a\u5728\u7a0b\u5e8f\u4e2d\u88ab\u521b\u5efa\u7684 userdata \u7684 \u7ed3\u675f\u5b50\u4f1a\u88ab\u7b2c\u4e00\u4e2a\u8c03\u7528\u3002 \u53c2\u8003: http://blog.codingnow.com/cloud/LuaReferObject","title":"\u5783\u573e\u6536\u96c6\u7684\u5143\u65b9\u6cd5"},{"location":"lua/lua1_data/#_11","text":"\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u53ea\u88ab\u5f31\u5f15\u7528\u5f15\u7528\u5230\uff0c \u5783\u573e\u6536\u96c6\u5668\u5c31\u4f1a\u56de\u6536\u8fd9\u4e2a\u5bf9\u8c61 \u4e00\u5f20\u8868\u7684\u5143\u8868\u4e2d\u7684 __mode \u57df\u63a7\u5236\u7740\u8fd9\u5f20\u8868\u7684\u5f31\u5c5e\u6027\u3002 \u5f53 __mode \u57df\u662f\u4e00\u4e2a\u5305\u542b\u5b57\u7b26 'k' \u7684\u5b57\u7b26\u4e32\u65f6\uff0c\u8fd9\u5f20\u8868\u7684\u6240\u6709\u952e\u7686\u4e3a\u5f31\u5f15\u7528\u3002 \u5f53 __mode \u57df\u662f\u4e00\u4e2a\u5305\u542b\u5b57\u7b26 'v' \u7684\u5b57\u7b26\u4e32\u65f6\uff0c\u8fd9\u5f20\u8868\u7684\u6240\u6709\u503c\u7686\u4e3a\u5f31\u5f15\u7528 \u503c\u4e3a\u5f31\u8868 local weakTable = {} weakTable [ 1 ] = function () print ( i am the first element ) end weakTable [ 2 ] = function () print ( i am the second element ) end weakTable [ 3 ] = { 10 , 20 , 30 } setmetatable ( weakTable , { __mode = v }) --\u503c\u4e3a\u5f31\u8868 print ( table . getn ( weakTable )) --\u672agc\u524d3\u4e2a ele = weakTable [ 1 ] --\u7b2c\u4e00\u4e2a\u5143\u7d20\u88ab\u5f15\u7528 collectgarbage () print ( table . getn ( weakTable )) --gc\u540e\u53ea\u5269\u7b2c\u4e00\u4e2a\u5143\u7d20 ele = nil --\u5f15\u7528\u7f6e\u7a7a collectgarbage () print ( table . getn ( weakTable )) --\u5168\u90e8gc \u952e\u4e3a\u5f31\u8868 local function getkeyn ( t ) local count = 0 for k , v in pairs ( t or {}) do count = count + 1 end return count end local weakKey = {} local t1 = {} local t2 = {} weakKey [ t1 ] = 1 weakKey [ t2 ] = 2 setmetatable ( weakKey ,{ __mode = k }) --\u952e\u4e3a\u5f31\u8868 print ( getkeyn ( weakKey )) --2 t1 = nil collectgarbage () print ( getkeyn ( weakKey )) --1","title":"\u5f31\u8868"},{"location":"lua/lua1_data/#_12","text":"\u652f\u6301\u534f\u7a0b\uff0c\u4e5f\u53eb \u534f\u540c\u5f0f\u591a\u7ebf\u7a0b\u3002 \u4e00\u4e2a\u534f\u7a0b\u5728 Lua \u4e2d\u4ee3\u8868\u4e86\u4e00\u6bb5\u72ec\u7acb\u7684\u6267\u884c\u7ebf\u7a0b\u3002 \u7136\u800c\uff0c\u4e0e\u591a\u7ebf\u7a0b\u7cfb\u7edf\u4e2d\u7684\u7ebf\u7a0b\u7684\u533a\u522b\u5728\u4e8e\uff0c \u534f\u7a0b\u4ec5\u5728\u663e\u5f0f\u8c03\u7528\u4e00\u4e2a\u8ba9\u51fa\uff08yield\uff09\u51fd\u6570\u65f6\u624d\u6302\u8d77\u5f53\u524d\u7684\u6267\u884c.","title":"\u534f\u7a0b"},{"location":"lua/lua1_data/#_13","text":"","title":"\u63a5\u53e3"},{"location":"lua/lua1_data/#coroutinecreatef","text":"\u51fd\u6570\u53c2\u6570[\u63a5\u53d7\u5355\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u4e3acoroutine\u7684\u4e3b\u51fd\u6570] \u51fd\u6570\u8fd4\u56de\u503c[\u8fd4\u56de\u4e00\u4e2athread\u5bf9\u8c61] \u51fd\u6570\u4f5c\u7528[\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u534f\u7a0b\uff0c\u534f\u7a0b\u7684\u4e3b\u51fd\u6570\u5b9a\u4e49\u4e86\u8be5\u534f\u7a0b\u5185\u7684\u4efb\u52a1\u6d41\u7a0b]","title":"coroutine.create(f)"},{"location":"lua/lua1_data/#coroutineresumeco-var1","text":"\u51fd\u6570\u53c2\u6570[\u7b2c\u4e00\u4e2a\u53c2\u6570\uff1acoroutine.create\u7684\u8fd4\u56de\u503c\uff0c\u5373\u4e00\u4e2athread\u5bf9\u8c61] \u51fd\u6570\u53c2\u6570[\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1acoroutine\u4e2d\u6267\u884c\u9700\u8981\u7684\u53c2\u6570\uff0c\u662f\u4e00\u4e2a\u53d8\u957f\u53c2\u6570\uff0c\u53ef\u4ee5\u4f20\u4efb\u610f\u591a\u4e2a] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u6ca1\u6709\u4efb\u4f55\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56detrue\uff0c\u4e4b\u540e\u7684\u8fd4\u56de\u503c\u662f\u524d\u4e00\u4e2a\u8c03\u7528coroutine.yield\u4e2d\u4f20\u5165\u7684\u53c2\u6570\u503c] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u9047\u5230\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56defalse\uff0c\u52a0\u4e0a\u9519\u8bef\u4fe1\u606f] \u51fd\u6570\u4f5c\u7528[\u5f53\u4f60\u7b2c\u4e00\u6b21\u8c03\u7528coroutine.rusume\u65b9\u6cd5\u65f6\uff0ccoroutine\u4ece\u4e3b\u51fd\u6570\u7684\u7b2c\u4e00\u884c\u5f00\u59cb\u6267\u884c\uff0c\u4e4b\u540e\u5728coroutine\u5f00\u59cb\u6267\u884c\u540e\uff0c\u5b83\u4f1a\u4e00\u76f4\u8fd0\u884c\u5230 \u81ea\u8eab\u7ec8\u6b62\u6216\u8005\u662fcoroutine\u7684\u4e0b\u4e00\u6b21yield\u51fd\u6570]","title":"coroutine.resume(co, [, var1, ...])"},{"location":"lua/lua1_data/#coroutineyield","text":"\u51fd\u6570\u53c2\u6570[\u53d8\u957f\u53c2\u6570] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u6ca1\u6709\u4efb\u4f55\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56detrue\uff0c\u4e4b\u540e\u7684\u8fd4\u56de\u503c\u662f\u524d\u4e00\u4e2a\u8c03\u7528coroutine.resume()\u4e2d\u4f20\u5165\u7684\u53c2\u6570\u503c] \u51fd\u6570\u8fd4\u56de\u503c[\u5982\u679c\u7a0b\u5e8f\u9047\u5230\u8fd0\u884c\u9519\u8bef\uff0c\u5219\u8fd4\u56defalse\uff0c\u52a0\u4e0a\u9519\u8bef\u4fe1\u606f] \u51fd\u6570\u4f5c\u7528[\u6302\u8d77\u5f53\u524d\u6267\u884c\u7684\u534f\u7a0b]","title":"coroutine.yield(...)"},{"location":"lua/lua1_data/#coroutinerunning","text":"\u51fd\u6570\u53c2\u6570[\u7a7a] \u51fd\u6570\u8fd4\u56de\u503c[\u8fd4\u56de\u5f53\u524d\u534f\u7a0b\uff0c\u5982\u679c\u5b83\u88ab\u4e3b\u7ebf\u7a0b\u8c03\u7528\u7684\u8bdd\uff0c\u8fd4\u56denil]","title":"coroutine.running()"},{"location":"lua/lua1_data/#coroutinestatus","text":"\u51fd\u6570\u53c2\u6570[\u7a7a] \u51fd\u6570\u8fd4\u56de\u503c[\u8fd4\u56de\u5f53\u524d\u534f\u7a0b\u7684\u72b6\u6001\uff0c\u6709suspended, running, normal, dead]","title":"coroutine.status()"},{"location":"lua/lua1_data/#_14","text":"function foo ( a ) print ( [step2] foo , a ) return coroutine.yield ( 2 * a ) end local co = coroutine.create ( function ( a , b ) print ( [step1] co-body , a , b ) local r = foo ( a + 1 ) print ( [step4] co-body , r ) local r , s = coroutine.yield ( a + b , a - b ) print ( [step6] co-body , r , s ) return b , end end ) print ( [step3] main , coroutine.resume ( co , 1 , 10 )) print ( [step5] main , coroutine.resume ( co , r )) print ( [step7] main , coroutine.resume ( co , x , y )) print ( [step8] main , coroutine.resume ( co , x , y )) --[[ [step1] co-body 1 10 [step2] foo 2 [step3] main true 4 [step4] co-body r [step5] main true 11 -9 [step6] co-body x y [step7] main true 10 end [step8] main false cannot resume dead coroutine ]] --","title":"\u4f8b\u5b50"},{"location":"lua/lua2_grammar/","text":"\u8bed\u6cd5\u5b9a\u4e49 \u53d8\u91cf math.random() \u539f\u578b\uff1a`math.random([m [, n]])` \u89e3\u91ca\uff1a\u8fd9\u4e2a\u51fd\u6570\u5c31\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4f7f\u7528ANSI C\u51fd\u6570rand\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u4f2a\u968f\u673a\u6570\u3002 + \u5f53\u4e0d\u4f20\u4efb\u4f55\u53c2\u6570\u65f6\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a[0,1)\u8303\u56f4\u5185\u7684\u771f\u5b9e\u6570\u5b57\u3002 + \u5f53\u53ea\u4f20\u5165\u6570\u5b57m\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u8303\u56f4[1,m]\u5185\u7684\u4f2a\u968f\u673a\u6574\u6570\u3002 + \u5f53\u4f20\u5165\u4e24\u4e2a\u6570\u5b57m\uff0cn\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u8303\u56f4[m,n]\u5185\u7684\u4e00\u4e2a\u4f2a\u968f\u673a\u6574\u6570\u3002","title":"Lua2 grammar"},{"location":"lua/lua2_grammar/#_1","text":"","title":"\u8bed\u6cd5\u5b9a\u4e49"},{"location":"lua/lua2_grammar/#_2","text":"","title":"\u53d8\u91cf"},{"location":"lua/lua2_grammar/#mathrandom","text":"\u539f\u578b\uff1a`math.random([m [, n]])` \u89e3\u91ca\uff1a\u8fd9\u4e2a\u51fd\u6570\u5c31\u662f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4f7f\u7528ANSI C\u51fd\u6570rand\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u4f2a\u968f\u673a\u6570\u3002 + \u5f53\u4e0d\u4f20\u4efb\u4f55\u53c2\u6570\u65f6\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a[0,1)\u8303\u56f4\u5185\u7684\u771f\u5b9e\u6570\u5b57\u3002 + \u5f53\u53ea\u4f20\u5165\u6570\u5b57m\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u8303\u56f4[1,m]\u5185\u7684\u4f2a\u968f\u673a\u6574\u6570\u3002 + \u5f53\u4f20\u5165\u4e24\u4e2a\u6570\u5b57m\uff0cn\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u8303\u56f4[m,n]\u5185\u7684\u4e00\u4e2a\u4f2a\u968f\u673a\u6574\u6570\u3002","title":"math.random()"},{"location":"lua/lua_package/","text":"lua\u521d\u63a2 \u6587\u6863 http://cloudwu.github.io/lua53doc/ \u5305\u7ba1\u7406\u5de5\u5177 luarocks $ wget http://luarocks.org/releases/luarocks-2.3.0.tar.gz $ tar zxpf luarocks-2.3.0.tar.gz $ cd luarocks-2.3.0 $ ./configure ; sudo make bootstrap $ sudo luarocks install luasocket $ lua Lua 5 .3.2 Copyright ( C ) 1994 -2015 Lua.org, PUC-Rio require socket \u52a0\u8f7d\u52a8\u6001\u94fe\u63a5\u5e93 --so\u5bfc\u51fa\u51fd\u6570\u540d\u4e3a:luaopen_skynet_core require skyet.core \u6570\u503c\u7c7b\u578b 32/64\u4f4d\u6d6e\u70b9\u6570IEEE\u7684\u6807\u51c6: s (\u7b26\u53f7\u4f4d) Exp(\u6307\u6570\u4f4d) Fraction(\u6709\u6548\u6570\u4f4d) 1bit 8bit 23bit 1bit 11bit 52bit \u5176\u4e2d:1bit\u8868\u793a\u7b26\u53f7\u4f4d(0\u8868\u793a\u6b63,1\u8868\u793a\u8d1f).8bit\u8868\u793a\u6307\u6570(0~255),\u5b9e\u9645\u6307\u6570\u53d6\u503c\u8fd8\u8981\u51cf\u53bb127,\u5373\u6307\u6570\u53d6\u503c\u533a\u95f4\u4e3a-127~128,23bit\u8868\u793a\u5c3e\u6570 \u96f6\u503c\uff1a\u6309\u4e0a\u8ff0\u7684\u6d6e\u70b9\u8868\u8ff0\u5f62\u5f0f\u5982\u679c\u6307\u6570\u90e8\u5206\u5168\u90e8\u4e3a0\uff0c\u5e76\u4e14\u5c3e\u6570\u5168\u90e8\u4e3a0\uff0c\u5219\u8868\u793a\u4e3a\u6d6e\u70b90.0\uff0c\u5e76\u4e14\u89c4\u5b9a-0 = +0 \u975e\u89c4\u683c\u5316\u503c\uff1a\u5982\u679c\u6307\u6570\u5168\u90e8\u4e3a0\uff0c\u5c3e\u6570\u975e0\uff0c\u5219\u8868\u793a\u975e\u89c4\u683c\u5316\u7684\u503c\uff0c16\u8fdb\u5236\u770b\u5230\u7684\u5c31\u662f[80xxxxxx]h\u6216\u8005[00xxxxxx]h \u65e0\u7a77\u503c\uff1a\u5982\u679c\u6307\u6570\u5168\u90e8\u4e3a1\uff0c\u5c3e\u6570\u5168\u90e8\u4e3a0\uff0c\u5219\u6839\u636e\u7b26\u53f7\u4f4d\u5206\u522b\u8868\u793a\u6b63\u65e0\u7a77\u5927\u548c\u8d1f\u65e0\u7a77\u5927\uff0c16\u8fdb\u5236\u770b\u5230\u7684\u5c31\u662f[FF800000]h\u6216\u8005[7F800000]h NAN\uff1a\u5982\u679c\u6307\u6570\u5168\u90e8\u4e3a1\uff0c\u5c3e\u6570\u975e0\uff0c\u5219\u8868\u793a\u8fd9\u4e2a\u503c\u4e0d\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u503c\uff08Not A Number\uff09\u3002NAN\u53c8\u5206\u6210\u4e24\u7c7b\uff1aQNAN\uff08Quiet NAN\uff09\u548cSNAN\uff08Singaling NAN\uff09\u3002QNAN\u4e0eSNAN\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0cQNAN\u7684\u5c3e\u6570\u90e8\u5206\u6700\u9ad8\u4f4d\u5b9a\u4e49\u4e3a1\uff0cSNAN\u6700\u9ad8\u4f4d\u5b9a\u4e49\u4e3a0\uff1bQNAN\u4e00\u822c\u8868\u793a\u672a\u5b9a\u4e49\u7684\u7b97\u672f\u8fd0\u7b97\u7ed3\u679c\uff0c\u6700\u5e38\u89c1\u7684\u83ab\u8fc7\u4e8e\u96640\u8fd0\u7b97\uff1bSNAN\u4e00\u822c\u88ab\u7528\u4e8e\u6807\u8bb0\u672a\u521d\u59cb\u5316\u7684\u503c\uff0c\u4ee5\u6b64\u6765\u6355\u83b7\u5f02\u5e38\u3002 \u4f1a\u8fd4\u56de NaN \u7684\u8fd0\u7b97\u6709\u5982\u4e0b\u4e09\u79cd\uff1a 1. \u64cd\u4f5c\u6570\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u662f NaN \u7684\u8fd0\u7b97 2. \u672a\u5b9a\u4e49\u64cd\u4f5c \u4e0b\u5217\u9664\u6cd5\u8fd0\u7b97\uff1a0/0\u3001\u221e/\u221e\u3001\u221e/\u2212\u221e\u3001\u2212\u221e/\u221e\u3001\u2212\u221e/\u2212\u221e \u4e0b\u5217\u4e58\u6cd5\u8fd0\u7b97\uff1a0\u00d7\u221e\u30010\u00d7-\u221e \u4e0b\u5217\u52a0\u6cd5\u8fd0\u7b97\uff1a\u221e + (\u2212\u221e)\u3001(\u2212\u221e) + \u221e \u4e0b\u5217\u51cf\u6cd5\u8fd0\u7b97\uff1a\u221e - (\u2212\u221e)\u3001(\u2212\u221e) - \u221e 3. \u4ea7\u751f\u590d\u6570\u7ed3\u679c\u7684\u5b9e\u6570\u8fd0\u7b97\u3002\u4f8b\u5982\uff1a \u5bf9\u8d1f\u6570\u8fdb\u884c\u5f00\u65b9\u8fd0\u7b97 \u5bf9\u8d1f\u6570\u8fdb\u884c\u5bf9\u6570\u8fd0\u7b97 \u5bf9\u6bd4-1\u5c0f\u6216\u6bd4+1\u5927\u7684\u6570\u8fdb\u884c\u53cd\u6b63\u5f26\u6216\u53cd\u4f59\u5f26\u8fd0\u7b97 INF / inf\uff1a\u8fd9\u4e2a\u503c\u8868\u793a\u201c\u65e0\u7a77\u5927 (infinity \u7684\u7f29\u5199)\u201d\uff0c\u5373\u8d85\u51fa\u4e86\u8ba1\u7b97\u673a\u53ef\u4ee5\u8868\u793a\u7684\u6d6e\u70b9\u6570\u7684\u6700\u5927\u8303\u56f4\uff08\u6216\u8005\u8bf4\u8d85\u8fc7\u4e86 double \u7c7b\u578b\u7684\u6700\u5927\u503c\uff09\u3002\u4f8b\u5982\uff0c\u5f53\u7528 0 \u9664\u4e00\u4e2a\u6574\u6570\u65f6\u4fbf\u4f1a\u5f97\u5230\u4e00\u4e2a1.#INF / inf\u503c\uff1b\u76f8\u5e94\u7684\uff0c\u5982\u679c\u7528 0 \u9664\u4e00\u4e2a\u8d1f\u6574\u6570\u4e5f\u4f1a\u5f97\u5230 -1.#INF / -inf\u503c\u3002 IND / nan\uff1a\u8fd9\u4e2a\u7684\u60c5\u51b5\u66f4\u590d\u6742\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5b83\u4eec\u6765\u81ea\u4e8e\u4efb\u4f55\u672a\u5b9a\u4e49\u7ed3\u679c\uff08\u975e\u6cd5\uff09\u7684\u6d6e\u70b9\u6570\u8fd0\u7b97\u3002\"IND\"\u662f indeterminate \u7684\u7f29\u5199\uff0c\u800c\"nan\"\u662f not a number \u7684\u7f29\u5199\u3002\u4ea7\u751f\u8fd9\u4e2a\u503c\u7684\u5e38\u89c1\u4f8b\u5b50\u6709\uff1a\u5bf9\u8d1f\u6570\u5f00\u5e73\u65b9\uff0c\u5bf9\u8d1f\u6570\u53d6\u5bf9\u6570\uff0c0.0/0.0\uff0c0.0*\u221e, \u221e/\u221e \u7b49\u3002 local function isnan ( x ) return x ~= x end print ( isnan ( 0 / 0 )) --True print ( isnan ( math.huge )) --False print ( isnan ( 0 )) --False \u591a\u5b57\u6bb5\u6392\u5e8f local a = {{ id = 1 , lv = 1 , point_type = 1 },{ id = 1 , lv = 3 , point_type = 1 },{ id = 1 , lv = 2 , point_type = 1 },{ id = 1 , lv = 2 , point_type = 2 }} table.sort ( a , function ( a , b ) if a . point_type == b . point_type then return a . lv b . lv else return a . point_type b . point_type end end )","title":"Lua package"},{"location":"lua/lua_package/#lua","text":"","title":"lua\u521d\u63a2"},{"location":"lua/lua_package/#_1","text":"http://cloudwu.github.io/lua53doc/","title":"\u6587\u6863"},{"location":"lua/lua_package/#_2","text":"","title":"\u5305\u7ba1\u7406\u5de5\u5177"},{"location":"lua/lua_package/#luarocks","text":"$ wget http://luarocks.org/releases/luarocks-2.3.0.tar.gz $ tar zxpf luarocks-2.3.0.tar.gz $ cd luarocks-2.3.0 $ ./configure ; sudo make bootstrap $ sudo luarocks install luasocket $ lua Lua 5 .3.2 Copyright ( C ) 1994 -2015 Lua.org, PUC-Rio require socket","title":"luarocks"},{"location":"lua/lua_package/#_3","text":"--so\u5bfc\u51fa\u51fd\u6570\u540d\u4e3a:luaopen_skynet_core require skyet.core","title":"\u52a0\u8f7d\u52a8\u6001\u94fe\u63a5\u5e93"},{"location":"lua/lua_package/#_4","text":"32/64\u4f4d\u6d6e\u70b9\u6570IEEE\u7684\u6807\u51c6: s (\u7b26\u53f7\u4f4d) Exp(\u6307\u6570\u4f4d) Fraction(\u6709\u6548\u6570\u4f4d) 1bit 8bit 23bit 1bit 11bit 52bit \u5176\u4e2d:1bit\u8868\u793a\u7b26\u53f7\u4f4d(0\u8868\u793a\u6b63,1\u8868\u793a\u8d1f).8bit\u8868\u793a\u6307\u6570(0~255),\u5b9e\u9645\u6307\u6570\u53d6\u503c\u8fd8\u8981\u51cf\u53bb127,\u5373\u6307\u6570\u53d6\u503c\u533a\u95f4\u4e3a-127~128,23bit\u8868\u793a\u5c3e\u6570 \u96f6\u503c\uff1a\u6309\u4e0a\u8ff0\u7684\u6d6e\u70b9\u8868\u8ff0\u5f62\u5f0f\u5982\u679c\u6307\u6570\u90e8\u5206\u5168\u90e8\u4e3a0\uff0c\u5e76\u4e14\u5c3e\u6570\u5168\u90e8\u4e3a0\uff0c\u5219\u8868\u793a\u4e3a\u6d6e\u70b90.0\uff0c\u5e76\u4e14\u89c4\u5b9a-0 = +0 \u975e\u89c4\u683c\u5316\u503c\uff1a\u5982\u679c\u6307\u6570\u5168\u90e8\u4e3a0\uff0c\u5c3e\u6570\u975e0\uff0c\u5219\u8868\u793a\u975e\u89c4\u683c\u5316\u7684\u503c\uff0c16\u8fdb\u5236\u770b\u5230\u7684\u5c31\u662f[80xxxxxx]h\u6216\u8005[00xxxxxx]h \u65e0\u7a77\u503c\uff1a\u5982\u679c\u6307\u6570\u5168\u90e8\u4e3a1\uff0c\u5c3e\u6570\u5168\u90e8\u4e3a0\uff0c\u5219\u6839\u636e\u7b26\u53f7\u4f4d\u5206\u522b\u8868\u793a\u6b63\u65e0\u7a77\u5927\u548c\u8d1f\u65e0\u7a77\u5927\uff0c16\u8fdb\u5236\u770b\u5230\u7684\u5c31\u662f[FF800000]h\u6216\u8005[7F800000]h NAN\uff1a\u5982\u679c\u6307\u6570\u5168\u90e8\u4e3a1\uff0c\u5c3e\u6570\u975e0\uff0c\u5219\u8868\u793a\u8fd9\u4e2a\u503c\u4e0d\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u503c\uff08Not A Number\uff09\u3002NAN\u53c8\u5206\u6210\u4e24\u7c7b\uff1aQNAN\uff08Quiet NAN\uff09\u548cSNAN\uff08Singaling NAN\uff09\u3002QNAN\u4e0eSNAN\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0cQNAN\u7684\u5c3e\u6570\u90e8\u5206\u6700\u9ad8\u4f4d\u5b9a\u4e49\u4e3a1\uff0cSNAN\u6700\u9ad8\u4f4d\u5b9a\u4e49\u4e3a0\uff1bQNAN\u4e00\u822c\u8868\u793a\u672a\u5b9a\u4e49\u7684\u7b97\u672f\u8fd0\u7b97\u7ed3\u679c\uff0c\u6700\u5e38\u89c1\u7684\u83ab\u8fc7\u4e8e\u96640\u8fd0\u7b97\uff1bSNAN\u4e00\u822c\u88ab\u7528\u4e8e\u6807\u8bb0\u672a\u521d\u59cb\u5316\u7684\u503c\uff0c\u4ee5\u6b64\u6765\u6355\u83b7\u5f02\u5e38\u3002 \u4f1a\u8fd4\u56de NaN \u7684\u8fd0\u7b97\u6709\u5982\u4e0b\u4e09\u79cd\uff1a 1. \u64cd\u4f5c\u6570\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u662f NaN \u7684\u8fd0\u7b97 2. \u672a\u5b9a\u4e49\u64cd\u4f5c \u4e0b\u5217\u9664\u6cd5\u8fd0\u7b97\uff1a0/0\u3001\u221e/\u221e\u3001\u221e/\u2212\u221e\u3001\u2212\u221e/\u221e\u3001\u2212\u221e/\u2212\u221e \u4e0b\u5217\u4e58\u6cd5\u8fd0\u7b97\uff1a0\u00d7\u221e\u30010\u00d7-\u221e \u4e0b\u5217\u52a0\u6cd5\u8fd0\u7b97\uff1a\u221e + (\u2212\u221e)\u3001(\u2212\u221e) + \u221e \u4e0b\u5217\u51cf\u6cd5\u8fd0\u7b97\uff1a\u221e - (\u2212\u221e)\u3001(\u2212\u221e) - \u221e 3. \u4ea7\u751f\u590d\u6570\u7ed3\u679c\u7684\u5b9e\u6570\u8fd0\u7b97\u3002\u4f8b\u5982\uff1a \u5bf9\u8d1f\u6570\u8fdb\u884c\u5f00\u65b9\u8fd0\u7b97 \u5bf9\u8d1f\u6570\u8fdb\u884c\u5bf9\u6570\u8fd0\u7b97 \u5bf9\u6bd4-1\u5c0f\u6216\u6bd4+1\u5927\u7684\u6570\u8fdb\u884c\u53cd\u6b63\u5f26\u6216\u53cd\u4f59\u5f26\u8fd0\u7b97 INF / inf\uff1a\u8fd9\u4e2a\u503c\u8868\u793a\u201c\u65e0\u7a77\u5927 (infinity \u7684\u7f29\u5199)\u201d\uff0c\u5373\u8d85\u51fa\u4e86\u8ba1\u7b97\u673a\u53ef\u4ee5\u8868\u793a\u7684\u6d6e\u70b9\u6570\u7684\u6700\u5927\u8303\u56f4\uff08\u6216\u8005\u8bf4\u8d85\u8fc7\u4e86 double \u7c7b\u578b\u7684\u6700\u5927\u503c\uff09\u3002\u4f8b\u5982\uff0c\u5f53\u7528 0 \u9664\u4e00\u4e2a\u6574\u6570\u65f6\u4fbf\u4f1a\u5f97\u5230\u4e00\u4e2a1.#INF / inf\u503c\uff1b\u76f8\u5e94\u7684\uff0c\u5982\u679c\u7528 0 \u9664\u4e00\u4e2a\u8d1f\u6574\u6570\u4e5f\u4f1a\u5f97\u5230 -1.#INF / -inf\u503c\u3002 IND / nan\uff1a\u8fd9\u4e2a\u7684\u60c5\u51b5\u66f4\u590d\u6742\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5b83\u4eec\u6765\u81ea\u4e8e\u4efb\u4f55\u672a\u5b9a\u4e49\u7ed3\u679c\uff08\u975e\u6cd5\uff09\u7684\u6d6e\u70b9\u6570\u8fd0\u7b97\u3002\"IND\"\u662f indeterminate \u7684\u7f29\u5199\uff0c\u800c\"nan\"\u662f not a number \u7684\u7f29\u5199\u3002\u4ea7\u751f\u8fd9\u4e2a\u503c\u7684\u5e38\u89c1\u4f8b\u5b50\u6709\uff1a\u5bf9\u8d1f\u6570\u5f00\u5e73\u65b9\uff0c\u5bf9\u8d1f\u6570\u53d6\u5bf9\u6570\uff0c0.0/0.0\uff0c0.0*\u221e, \u221e/\u221e \u7b49\u3002 local function isnan ( x ) return x ~= x end print ( isnan ( 0 / 0 )) --True print ( isnan ( math.huge )) --False print ( isnan ( 0 )) --False","title":"\u6570\u503c\u7c7b\u578b"},{"location":"lua/lua_package/#_5","text":"local a = {{ id = 1 , lv = 1 , point_type = 1 },{ id = 1 , lv = 3 , point_type = 1 },{ id = 1 , lv = 2 , point_type = 1 },{ id = 1 , lv = 2 , point_type = 2 }} table.sort ( a , function ( a , b ) if a . point_type == b . point_type then return a . lv b . lv else return a . point_type b . point_type end end )","title":"\u591a\u5b57\u6bb5\u6392\u5e8f"},{"location":"lua/lua_source/","text":"\u6e90\u7801\u5256\u6790 http://del.icio.us/musicode/lua","title":"Lua source"},{"location":"lua/lua_source/#_1","text":"http://del.icio.us/musicode/lua","title":"\u6e90\u7801\u5256\u6790"},{"location":"makefile/","text":"============================== \u8ddf\u6211\u4e00\u8d77\u5199Makefile (PDF\u91cd\u5236\u7248) ============================== \u7b80\u4ecb \u300a\u8ddf\u6211\u4e00\u8d77\u5199Makefile\u300b\u662f \u9648\u7693 http://coolshell.cn/haoel \u53d1\u8868\u5728\u5176CSDN\u535a\u5ba2\u4e0a\u7684\u7cfb\u5217\u6587\u7ae0\u3002\u8be5\u7cfb\u5217\u6587\u7ae0\u7ffb\u8bd1\u6574\u7406\u81ea GNU Make Manual https://www.gnu.org/software/make/manual/ \uff0c\u4e00\u76f4\u53d7\u5230\u8bfb\u8005\u7684\u63a8\u8350\uff0c\u662f\u5f88\u591a\u4eba\u5b66\u4e60Makefile\u7684\u9996\u9009\u6587\u6863\u3002\u76ee\u524d\u7f51\u7edc\u4e0a\u6d41\u4f20\u7684PDF\u7248\u672c\u591a\u4e3a\u795d\u51ac\u534e\u6574\u7406\u7684\u7248\u672c\u3002\u8fd9\u4e2a\u7248\u672c\u7684\u6392\u7248\u4e00\u822c\uff0c\u4ee3\u7801\u90e8\u5206\u6ca1\u6709\u505a\u4efb\u4f55\u8bed\u6cd5\u9ad8\u4eae\u3002 2010\u5e74\u521d\u5b66Makefile\u7684\u65f6\u5019\uff0c\u8bfb\u4e86\u524d\u51e0\u7ae0\u76ae\u6bdb\uff0c\u4e00\u76f4\u7528\u5230\u4e86\u73b0\u5728\u3002\u6700\u8fd1\u60f3\u7740\u91cd\u65b0\u5b66\u4e60\u4e00\u4e0bMakefile\uff0c\u987a\u4fbf\u5b66\u4e60\u4e00\u4e0bSphinx\uff0c\u91cd\u65b0\u5236\u4f5c\u4e00\u4e2a\u66f4\u7cbe\u7f8e\u7684PDF\u7248\u672c\u3002 \u76f8\u5173 \u4e66\u7684\u6587\u5b57\u90e8\u5206\u6765\u81ea\u4e8e Andriki http://andriki.com/mediawiki/index.php?title=Linux:%E8%B7%9F%E6%88%91%E4%B8%80%E8%B5%B7%E5%86%99Makefile __ \u63d0\u4f9b\u7684Mediawiki\u6e90\u7801\uff1b \u4f7f\u7528 Sphinx http://sphinx-doc.org/ __ \u5236\u4f5c\u6587\u6863 \u9879\u76ee\u4e3b\u9875\uff1a https://github.com/seisman/how-to-write-makefile \u7f51\u9875\u5728\u7ebf\u7248\uff1a http://seisman.github.io/how-to-write-makefile/ PDF\u4e0b\u8f7d\uff1a https://github.com/seisman/how-to-write-makefile/raw/pdf/Makefile.pdf \u672c\u5730\u7f16\u8bd1 Clone\u9879\u76ee\u5230\u672c\u5730: :: $ git clone https://github.com/seisman/how-to-write-makefile.git \u5b89\u88c5\u4f9d\u8d56: :: $ pip install -r requirements.txt \u7f16\u8bd1\u751f\u6210HTML: :: $ make html $ firefox build/html/index.html amp; \u7f16\u8bd1\u751f\u6210PDF\uff08\u8981\u6c42\u5b89\u88c5TeXLive 2015\uff09: :: $ make xelatexpdf $ evince build/latex/Makefile.pdf amp; sphinx\u4e2d\u6587\u652f\u6301 sphinx\u548creadthedocs\u7f51\u7ad9\u9ed8\u8ba4\u662f\u4e0d\u652f\u6301\u4e2d\u6587\u7684\uff0c\u56e0\u4e3a\u5bf9 conf.py \u548c Makefile \u505a\u4e86\u4e9b\u8bb8\u4fee\u6539\u3002\u8be6\u60c5\u53c2\u8003 sphinx\u751f\u6210\u4e2d\u6587PDF http://seisman.info/chinese-support-for-sphinx.html \u6216 Commit 35288db https://github.com/seisman/how-to-write-makefile/commit/35288dbcd859abf5107dd6900dca25f0d1b44db7","title":"Home"},{"location":"makefile/#_1","text":"\u300a\u8ddf\u6211\u4e00\u8d77\u5199Makefile\u300b\u662f \u9648\u7693 http://coolshell.cn/haoel \u53d1\u8868\u5728\u5176CSDN\u535a\u5ba2\u4e0a\u7684\u7cfb\u5217\u6587\u7ae0\u3002\u8be5\u7cfb\u5217\u6587\u7ae0\u7ffb\u8bd1\u6574\u7406\u81ea GNU Make Manual https://www.gnu.org/software/make/manual/ \uff0c\u4e00\u76f4\u53d7\u5230\u8bfb\u8005\u7684\u63a8\u8350\uff0c\u662f\u5f88\u591a\u4eba\u5b66\u4e60Makefile\u7684\u9996\u9009\u6587\u6863\u3002\u76ee\u524d\u7f51\u7edc\u4e0a\u6d41\u4f20\u7684PDF\u7248\u672c\u591a\u4e3a\u795d\u51ac\u534e\u6574\u7406\u7684\u7248\u672c\u3002\u8fd9\u4e2a\u7248\u672c\u7684\u6392\u7248\u4e00\u822c\uff0c\u4ee3\u7801\u90e8\u5206\u6ca1\u6709\u505a\u4efb\u4f55\u8bed\u6cd5\u9ad8\u4eae\u3002 2010\u5e74\u521d\u5b66Makefile\u7684\u65f6\u5019\uff0c\u8bfb\u4e86\u524d\u51e0\u7ae0\u76ae\u6bdb\uff0c\u4e00\u76f4\u7528\u5230\u4e86\u73b0\u5728\u3002\u6700\u8fd1\u60f3\u7740\u91cd\u65b0\u5b66\u4e60\u4e00\u4e0bMakefile\uff0c\u987a\u4fbf\u5b66\u4e60\u4e00\u4e0bSphinx\uff0c\u91cd\u65b0\u5236\u4f5c\u4e00\u4e2a\u66f4\u7cbe\u7f8e\u7684PDF\u7248\u672c\u3002","title":"\u7b80\u4ecb"},{"location":"makefile/#_2","text":"\u4e66\u7684\u6587\u5b57\u90e8\u5206\u6765\u81ea\u4e8e Andriki http://andriki.com/mediawiki/index.php?title=Linux:%E8%B7%9F%E6%88%91%E4%B8%80%E8%B5%B7%E5%86%99Makefile __ \u63d0\u4f9b\u7684Mediawiki\u6e90\u7801\uff1b \u4f7f\u7528 Sphinx http://sphinx-doc.org/ __ \u5236\u4f5c\u6587\u6863 \u9879\u76ee\u4e3b\u9875\uff1a https://github.com/seisman/how-to-write-makefile \u7f51\u9875\u5728\u7ebf\u7248\uff1a http://seisman.github.io/how-to-write-makefile/ PDF\u4e0b\u8f7d\uff1a https://github.com/seisman/how-to-write-makefile/raw/pdf/Makefile.pdf","title":"\u76f8\u5173"},{"location":"makefile/#_3","text":"Clone\u9879\u76ee\u5230\u672c\u5730: :: $ git clone https://github.com/seisman/how-to-write-makefile.git \u5b89\u88c5\u4f9d\u8d56: :: $ pip install -r requirements.txt \u7f16\u8bd1\u751f\u6210HTML: :: $ make html $ firefox build/html/index.html amp; \u7f16\u8bd1\u751f\u6210PDF\uff08\u8981\u6c42\u5b89\u88c5TeXLive 2015\uff09: :: $ make xelatexpdf $ evince build/latex/Makefile.pdf amp;","title":"\u672c\u5730\u7f16\u8bd1"},{"location":"makefile/#sphinx","text":"sphinx\u548creadthedocs\u7f51\u7ad9\u9ed8\u8ba4\u662f\u4e0d\u652f\u6301\u4e2d\u6587\u7684\uff0c\u56e0\u4e3a\u5bf9 conf.py \u548c Makefile \u505a\u4e86\u4e9b\u8bb8\u4fee\u6539\u3002\u8be6\u60c5\u53c2\u8003 sphinx\u751f\u6210\u4e2d\u6587PDF http://seisman.info/chinese-support-for-sphinx.html \u6216 Commit 35288db https://github.com/seisman/how-to-write-makefile/commit/35288dbcd859abf5107dd6900dca25f0d1b44db7","title":"sphinx\u4e2d\u6587\u652f\u6301"},{"location":"makefile/archives/","text":"====================== \u4f7f\u7528make\u66f4\u65b0\u51fd\u6570\u5e93\u6587\u4ef6 ====================== \u51fd\u6570\u5e93\u6587\u4ef6\u4e5f\u5c31\u662f\u5bf9Object\u6587\u4ef6\uff08\u7a0b\u5e8f\u7f16\u8bd1\u7684\u4e2d\u95f4\u6587\u4ef6\uff09\u7684\u6253\u5305\u6587\u4ef6\u3002\u5728Unix\u4e0b\uff0c\u4e00\u822c\u662f\u7531\u547d\u4ee4 ar \u6765\u5b8c\u6210\u6253\u5305\u5de5\u4f5c\u3002 \u51fd\u6570\u5e93\u6587\u4ef6\u7684\u6210\u5458 \u4e00\u4e2a\u51fd\u6570\u5e93\u6587\u4ef6\u7531\u591a\u4e2a\u6587\u4ef6\u7ec4\u6210\u3002\u4f60\u53ef\u4ee5\u7528\u5982\u4e0b\u683c\u5f0f\u6307\u5b9a\u51fd\u6570\u5e93\u6587\u4ef6\u53ca\u5176\u7ec4\u6210: :: archive(member) \u8fd9\u4e2a\u4e0d\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u800c\u4e00\u4e2a\u76ee\u6807\u548c\u4f9d\u8d56\u7684\u5b9a\u4e49\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u79cd\u7528\u6cd5\u57fa\u672c\u4e0a\u5c31\u662f\u4e3a\u4e86 ar \u547d\u4ee4\u6765\u670d\u52a1\u7684\u3002\u5982: :: foolib(hack.o) : hack.o ar cr foolib hack.o \u5982\u679c\u8981\u6307\u5b9a\u591a\u4e2amember\uff0c\u90a3\u5c31\u4ee5\u7a7a\u683c\u5206\u5f00\uff0c\u5982: :: foolib(hack.o kludge.o) \u5176\u7b49\u4ef7\u4e8e: :: foolib(hack.o) foolib(kludge.o) \u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528Shell\u7684\u6587\u4ef6\u901a\u914d\u7b26\u6765\u5b9a\u4e49\uff0c\u5982: :: foolib(*.o) \u51fd\u6570\u5e93\u6210\u5458\u7684\u9690\u542b\u89c4\u5219 \u5f53make\u641c\u7d22\u4e00\u4e2a\u76ee\u6807\u7684\u9690\u542b\u89c4\u5219\u65f6\uff0c\u4e00\u4e2a\u7279\u6b8a\u7684\u7279\u6027\u662f\uff0c\u5982\u679c\u8fd9\u4e2a\u76ee\u6807\u662f a(m) \u5f62\u5f0f\u7684\uff0c\u5176\u4f1a\u628a\u76ee\u6807\u53d8\u6210 (m) \u3002\u4e8e\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684\u6210\u5458\u662f %.o \u7684\u6a21\u5f0f\u5b9a\u4e49\uff0c\u5e76\u4e14\u5982\u679c\u6211\u4eec\u4f7f\u7528 make foo.a(bar.o) \u7684\u5f62\u5f0f\u8c03\u7528Makefile\u65f6\uff0c\u9690\u542b\u89c4\u5219\u4f1a\u53bb\u627e bar.o \u7684\u89c4\u5219\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49 bar.o` \u7684\u89c4\u5219\uff0c\u90a3\u4e48\u5185\u5efa\u9690\u542b\u89c4\u5219\u751f\u6548\uff0cmake\u4f1a\u53bb\u627e bar.c \u6587\u4ef6\u6765\u751f\u6210 bar .o\uff0c\u5982\u679c\u627e\u5f97\u5230\u7684\u8bdd\uff0cmake\u6267\u884c\u7684\u547d\u4ee4\u5927\u81f4\u5982\u4e0b: :: cc -c bar.c -o bar.o ar r foo.a bar.o rm -f bar.o \u8fd8\u6709\u4e00\u4e2a\u53d8\u91cf\u8981\u6ce8\u610f\u7684\u662f $% \uff0c\u8fd9\u662f\u4e13\u5c5e\u51fd\u6570\u5e93\u6587\u4ef6\u7684\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u6709\u5173\u5176\u8bf4\u660e\u8bf7\u53c2\u89c1\u201c\u81ea\u52a8\u5316\u53d8\u91cf\u201d\u4e00\u8282\u3002 \u51fd\u6570\u5e93\u6587\u4ef6\u7684\u540e\u7f00\u89c4\u5219 \u4f60\u53ef\u4ee5\u4f7f\u7528\u201c\u540e\u7f00\u89c4\u5219\u201d\u548c\u201c\u9690\u542b\u89c4\u5219\u201d\u6765\u751f\u6210\u51fd\u6570\u5e93\u6253\u5305\u6587\u4ef6\uff0c\u5982\uff1a .. code:: makefile .c.a: $ ( CC ) $ ( CFLAGS ) $ ( CPPFLAGS ) - c $ lt ; -o $*.o $ ( AR ) r $@ $ *. o $ ( RM ) $ *. o \u5176\u7b49\u6548\u4e8e\uff1a .. code:: makefile (%.o) : %. c $( CC ) $( CFLAGS ) $( CPPFLAGS ) -c $ lt ; -o $* .o $( AR ) r $@ $* .o $( RM ) $* .o \u6ce8\u610f\u4e8b\u9879 \u5728\u8fdb\u884c\u51fd\u6570\u5e93\u6253\u5305\u6587\u4ef6\u751f\u6210\u65f6\uff0c\u8bf7\u5c0f\u5fc3\u4f7f\u7528make\u7684\u5e76\u884c\u673a\u5236\uff08 -j \u53c2\u6570\uff09\u3002\u5982\u679c\u591a\u4e2a ar \u547d\u4ee4\u5728\u540c\u4e00\u65f6\u95f4\u8fd0\u884c\u5728\u540c\u4e00\u4e2a\u51fd\u6570\u5e93\u6253\u5305\u6587\u4ef6\u4e0a\uff0c\u5c31\u5f88\u6709\u53ef\u4ee5\u635f\u574f\u8fd9\u4e2a\u51fd\u6570\u5e93\u6587\u4ef6\u3002\u6240\u4ee5\uff0c\u5728make\u672a\u6765\u7684\u7248\u672c\u4e2d\uff0c\u5e94\u8be5\u63d0\u4f9b\u4e00\u79cd\u673a\u5236\u6765\u907f\u514d\u5e76\u884c\u64cd\u4f5c\u53d1\u751f\u5728\u51fd\u6570\u6253\u5305\u6587\u4ef6\u4e0a\u3002 \u4f46\u5c31\u76ee\u524d\u800c\u8a00\uff0c\u4f60\u8fd8\u662f\u5e94\u8be5\u4e0d\u8981\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528 -j \u53c2\u6570\u3002","title":"\u4f7f\u7528make\u66f4\u65b0\u51fd\u6570\u5e93\u6587\u4ef6"},{"location":"makefile/archives/#_1","text":"\u4e00\u4e2a\u51fd\u6570\u5e93\u6587\u4ef6\u7531\u591a\u4e2a\u6587\u4ef6\u7ec4\u6210\u3002\u4f60\u53ef\u4ee5\u7528\u5982\u4e0b\u683c\u5f0f\u6307\u5b9a\u51fd\u6570\u5e93\u6587\u4ef6\u53ca\u5176\u7ec4\u6210: :: archive(member) \u8fd9\u4e2a\u4e0d\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u800c\u4e00\u4e2a\u76ee\u6807\u548c\u4f9d\u8d56\u7684\u5b9a\u4e49\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u79cd\u7528\u6cd5\u57fa\u672c\u4e0a\u5c31\u662f\u4e3a\u4e86 ar \u547d\u4ee4\u6765\u670d\u52a1\u7684\u3002\u5982: :: foolib(hack.o) : hack.o ar cr foolib hack.o \u5982\u679c\u8981\u6307\u5b9a\u591a\u4e2amember\uff0c\u90a3\u5c31\u4ee5\u7a7a\u683c\u5206\u5f00\uff0c\u5982: :: foolib(hack.o kludge.o) \u5176\u7b49\u4ef7\u4e8e: :: foolib(hack.o) foolib(kludge.o) \u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528Shell\u7684\u6587\u4ef6\u901a\u914d\u7b26\u6765\u5b9a\u4e49\uff0c\u5982: :: foolib(*.o)","title":"\u51fd\u6570\u5e93\u6587\u4ef6\u7684\u6210\u5458"},{"location":"makefile/archives/#_2","text":"\u5f53make\u641c\u7d22\u4e00\u4e2a\u76ee\u6807\u7684\u9690\u542b\u89c4\u5219\u65f6\uff0c\u4e00\u4e2a\u7279\u6b8a\u7684\u7279\u6027\u662f\uff0c\u5982\u679c\u8fd9\u4e2a\u76ee\u6807\u662f a(m) \u5f62\u5f0f\u7684\uff0c\u5176\u4f1a\u628a\u76ee\u6807\u53d8\u6210 (m) \u3002\u4e8e\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684\u6210\u5458\u662f %.o \u7684\u6a21\u5f0f\u5b9a\u4e49\uff0c\u5e76\u4e14\u5982\u679c\u6211\u4eec\u4f7f\u7528 make foo.a(bar.o) \u7684\u5f62\u5f0f\u8c03\u7528Makefile\u65f6\uff0c\u9690\u542b\u89c4\u5219\u4f1a\u53bb\u627e bar.o \u7684\u89c4\u5219\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49 bar.o` \u7684\u89c4\u5219\uff0c\u90a3\u4e48\u5185\u5efa\u9690\u542b\u89c4\u5219\u751f\u6548\uff0cmake\u4f1a\u53bb\u627e bar.c \u6587\u4ef6\u6765\u751f\u6210 bar .o\uff0c\u5982\u679c\u627e\u5f97\u5230\u7684\u8bdd\uff0cmake\u6267\u884c\u7684\u547d\u4ee4\u5927\u81f4\u5982\u4e0b: :: cc -c bar.c -o bar.o ar r foo.a bar.o rm -f bar.o \u8fd8\u6709\u4e00\u4e2a\u53d8\u91cf\u8981\u6ce8\u610f\u7684\u662f $% \uff0c\u8fd9\u662f\u4e13\u5c5e\u51fd\u6570\u5e93\u6587\u4ef6\u7684\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u6709\u5173\u5176\u8bf4\u660e\u8bf7\u53c2\u89c1\u201c\u81ea\u52a8\u5316\u53d8\u91cf\u201d\u4e00\u8282\u3002","title":"\u51fd\u6570\u5e93\u6210\u5458\u7684\u9690\u542b\u89c4\u5219"},{"location":"makefile/archives/#_3","text":"\u4f60\u53ef\u4ee5\u4f7f\u7528\u201c\u540e\u7f00\u89c4\u5219\u201d\u548c\u201c\u9690\u542b\u89c4\u5219\u201d\u6765\u751f\u6210\u51fd\u6570\u5e93\u6253\u5305\u6587\u4ef6\uff0c\u5982\uff1a .. code:: makefile .c.a: $ ( CC ) $ ( CFLAGS ) $ ( CPPFLAGS ) - c $ lt ; -o $*.o $ ( AR ) r $@ $ *. o $ ( RM ) $ *. o \u5176\u7b49\u6548\u4e8e\uff1a .. code:: makefile (%.o) : %. c $( CC ) $( CFLAGS ) $( CPPFLAGS ) -c $ lt ; -o $* .o $( AR ) r $@ $* .o $( RM ) $* .o","title":"\u51fd\u6570\u5e93\u6587\u4ef6\u7684\u540e\u7f00\u89c4\u5219"},{"location":"makefile/archives/#_4","text":"\u5728\u8fdb\u884c\u51fd\u6570\u5e93\u6253\u5305\u6587\u4ef6\u751f\u6210\u65f6\uff0c\u8bf7\u5c0f\u5fc3\u4f7f\u7528make\u7684\u5e76\u884c\u673a\u5236\uff08 -j \u53c2\u6570\uff09\u3002\u5982\u679c\u591a\u4e2a ar \u547d\u4ee4\u5728\u540c\u4e00\u65f6\u95f4\u8fd0\u884c\u5728\u540c\u4e00\u4e2a\u51fd\u6570\u5e93\u6253\u5305\u6587\u4ef6\u4e0a\uff0c\u5c31\u5f88\u6709\u53ef\u4ee5\u635f\u574f\u8fd9\u4e2a\u51fd\u6570\u5e93\u6587\u4ef6\u3002\u6240\u4ee5\uff0c\u5728make\u672a\u6765\u7684\u7248\u672c\u4e2d\uff0c\u5e94\u8be5\u63d0\u4f9b\u4e00\u79cd\u673a\u5236\u6765\u907f\u514d\u5e76\u884c\u64cd\u4f5c\u53d1\u751f\u5728\u51fd\u6570\u6253\u5305\u6587\u4ef6\u4e0a\u3002 \u4f46\u5c31\u76ee\u524d\u800c\u8a00\uff0c\u4f60\u8fd8\u662f\u5e94\u8be5\u4e0d\u8981\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528 -j \u53c2\u6570\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"makefile/conditionals/","text":"============ \u4f7f\u7528\u6761\u4ef6\u5224\u65ad ============ \u4f7f\u7528\u6761\u4ef6\u5224\u65ad\uff0c\u53ef\u4ee5\u8ba9make\u6839\u636e\u8fd0\u884c\u65f6\u7684\u4e0d\u540c\u60c5\u51b5\u9009\u62e9\u4e0d\u540c\u7684\u6267\u884c\u5206\u652f\u3002\u6761\u4ef6\u8868\u8fbe\u5f0f\u53ef\u4ee5\u662f\u6bd4\u8f83\u53d8\u91cf\u7684\u503c\uff0c\u6216\u662f\u6bd4\u8f83\u53d8\u91cf\u548c\u5e38\u91cf\u7684\u503c\u3002 \u793a\u4f8b \u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u5224\u65ad $(CC) \u53d8\u91cf\u662f\u5426 gcc \uff0c\u5982\u679c\u662f\u7684\u8bdd\uff0c\u5219\u4f7f\u7528GNU\u51fd\u6570\u7f16\u8bd1\u76ee\u6807\u3002 .. code:: makefile libs_for_gcc = -lgnu normal_libs = foo : $( objects ) ifeq ($(CC),gcc) $( CC ) -o foo $( objects ) $( libs_for_gcc ) else $( CC ) -o foo $( objects ) $( normal_libs ) endif \u53ef\u89c1\uff0c\u5728\u4e0a\u9762\u793a\u4f8b\u7684\u8fd9\u4e2a\u89c4\u5219\u4e2d\uff0c\u76ee\u6807 foo \u53ef\u4ee5\u6839\u636e\u53d8\u91cf $(CC) \u503c\u6765\u9009\u53d6\u4e0d\u540c\u7684\u51fd\u6570\u5e93\u6765\u7f16\u8bd1\u7a0b\u5e8f\u3002 \u6211\u4eec\u53ef\u4ee5\u4ece\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\u770b\u5230\u4e09\u4e2a\u5173\u952e\u5b57\uff1a ifeq \u3001 else \u548c endif \u3002 ifeq \u7684\u610f\u601d\u8868\u793a\u6761\u4ef6\u8bed\u53e5\u7684\u5f00\u59cb\uff0c\u5e76\u6307\u5b9a\u4e00\u4e2a\u6761\u4ef6\u8868\u8fbe\u5f0f\uff0c\u8868\u8fbe\u5f0f\u5305\u542b\u4e24\u4e2a\u53c2\u6570\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u8868\u8fbe\u5f0f\u4ee5\u5706\u62ec\u53f7\u62ec\u8d77\u3002 else \u8868\u793a\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e3a\u5047\u7684\u60c5\u51b5\u3002 endif \u8868\u793a\u4e00\u4e2a\u6761\u4ef6\u8bed\u53e5\u7684\u7ed3\u675f\uff0c\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u8868\u8fbe\u5f0f\u90fd\u5e94\u8be5\u4ee5 endif \u7ed3\u675f\u3002 \u5f53\u6211\u4eec\u7684\u53d8\u91cf $(CC) \u503c\u662f gcc \u65f6\uff0c\u76ee\u6807 foo \u7684\u89c4\u5219\u662f\uff1a .. code:: makefile foo : $( objects ) $( CC ) -o foo $( objects ) $( libs_for_gcc ) \u800c\u5f53\u6211\u4eec\u7684\u53d8\u91cf $(CC) \u503c\u4e0d\u662f gcc \u65f6\uff08\u6bd4\u5982 cc \uff09\uff0c\u76ee\u6807 foo \u7684\u89c4\u5219\u662f\uff1a .. code:: makefile foo : $( objects ) $( CC ) -o foo $( objects ) $( normal_libs ) \u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u628a\u4e0a\u9762\u7684\u90a3\u4e2a\u4f8b\u5b50\u5199\u5f97\u66f4\u7b80\u6d01\u4e00\u4e9b\uff1a .. code:: makefile libs_for_gcc = -lgnu normal_libs = ifeq ($(CC),gcc) libs = $( libs_for_gcc ) else libs = $( normal_libs ) endif foo : $( objects ) $( CC ) -o foo $( objects ) $( libs ) \u8bed\u6cd5 \u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u4e3a: :: lt;conditional-directive gt; lt;text-if-true gt; endif \u4ee5\u53ca: :: lt;conditional-directive gt; lt;text-if-true gt; else lt;text-if-false gt; endif \u5176\u4e2d conditional-directive \u8868\u793a\u6761\u4ef6\u5173\u952e\u5b57\uff0c\u5982 ifeq \u3002\u8fd9\u4e2a\u5173\u952e\u5b57\u6709\u56db\u4e2a\u3002 \u7b2c\u4e00\u4e2a\u662f\u6211\u4eec\u524d\u9762\u6240\u89c1\u8fc7\u7684 ifeq .. code:: makefile ifeq ( lt;arg1 gt;, lt;arg2 gt;) ifeq lt;arg1 gt; lt;arg2 gt; ifeq lt;arg1 gt; lt;arg2 gt; ifeq lt;arg1 gt; lt;arg2 gt; ifeq lt;arg1 gt; lt;arg2 gt; \u6bd4\u8f83\u53c2\u6570 arg1 \u548c arg2 \u7684\u503c\u662f\u5426\u76f8\u540c\u3002\u5f53\u7136\uff0c\u53c2\u6570\u4e2d\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528make\u7684\u51fd\u6570\u3002\u5982: :: ifeq ($(strip $(foo)),) lt;text-if-empty gt; endif \u8fd9\u4e2a\u793a\u4f8b\u4e2d\u4f7f\u7528\u4e86 strip \u51fd\u6570\uff0c\u5982\u679c\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u7a7a\uff08Empty\uff09\uff0c\u90a3\u4e48 text-if-empty \u5c31\u751f\u6548\u3002 \u7b2c\u4e8c\u4e2a\u6761\u4ef6\u5173\u952e\u5b57\u662f ifneq \u3002\u8bed\u6cd5\u662f\uff1a .. code:: makefile ifneq ( lt;arg1 gt;, lt;arg2 gt;) ifneq lt;arg1 gt; lt;arg2 gt; ifneq lt;arg1 gt; lt;arg2 gt; ifneq lt;arg1 gt; lt;arg2 gt; ifneq lt;arg1 gt; lt;arg2 gt; \u5176\u6bd4\u8f83\u53c2\u6570 arg1 \u548c arg2 \u7684\u503c\u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u4e0d\u540c\uff0c\u5219\u4e3a\u771f\u3002\u548c ifeq \u7c7b\u4f3c\u3002 \u7b2c\u4e09\u4e2a\u6761\u4ef6\u5173\u952e\u5b57\u662f ifdef \u3002\u8bed\u6cd5\u662f\uff1a .. code:: makefile ifdef lt;variable-name gt; \u5982\u679c\u53d8\u91cf variable-name \u7684\u503c\u975e\u7a7a\uff0c\u90a3\u5230\u8868\u8fbe\u5f0f\u4e3a\u771f\u3002\u5426\u5219\uff0c\u8868\u8fbe\u5f0f\u4e3a\u5047\u3002\u5f53\u7136\uff0c variable-name \u540c\u6837\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u6ce8\u610f\uff0c ifdef \u53ea\u662f\u6d4b\u8bd5\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u6709\u503c\uff0c\u5176\u5e76\u4e0d\u4f1a\u628a\u53d8\u91cf\u6269\u5c55\u5230\u5f53\u524d\u4f4d\u7f6e\u3002\u8fd8\u662f\u6765\u770b\u4e24\u4e2a\u4f8b\u5b50\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile bar = foo = $(bar) ifdef foo frobozz = yes else frobozz = no endif \u793a\u4f8b\u4e8c\uff1a .. code:: makefile foo = ifdef foo frobozz = yes else frobozz = no endif \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c $(frobozz) \u503c\u662f yes \uff0c\u7b2c\u4e8c\u4e2a\u5219\u662f no \\ \u3002 \u7b2c\u56db\u4e2a\u6761\u4ef6\u5173\u952e\u5b57\u662f ifndef \u3002\u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile ifndef lt;variable-name gt; \u8fd9\u4e2a\u6211\u5c31\u4e0d\u591a\u8bf4\u4e86\uff0c\u548c ifdef` \u662f\u76f8\u53cd\u7684\u610f\u601d\u3002 \u5728 conditional-directive \u8fd9\u4e00\u884c\u4e0a\uff0c\u591a\u4f59\u7684\u7a7a\u683c\u662f\u88ab\u5141\u8bb8\u7684\uff0c\u4f46\u662f\u4e0d\u80fd\u4ee5 Tab \u952e\u505a\u4e3a\u5f00\u59cb\uff08\u4e0d\u7136\u5c31\u88ab\u8ba4\u4e3a\u662f\u547d\u4ee4\uff09\u3002\u800c\u6ce8\u91ca\u7b26 # \u540c\u6837\u4e5f\u662f\u5b89\u5168\u7684\u3002 else \u548c endif \u4e5f\u4e00\u6837\uff0c\u53ea\u8981\u4e0d\u662f\u4ee5 Tab \u952e\u5f00\u59cb\u5c31\u884c\u4e86\u3002 \u7279\u522b\u6ce8\u610f\u7684\u662f\uff0cmake\u662f\u5728\u8bfb\u53d6Makefile\u65f6\u5c31\u8ba1\u7b97\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u5e76\u6839\u636e\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u503c\u6765\u9009\u62e9\u8bed\u53e5\uff0c\u6240\u4ee5\uff0c\u4f60\u6700\u597d\u4e0d\u8981\u628a\u81ea\u52a8\u5316\u53d8\u91cf\uff08\u5982 $@ \u7b49\uff09\u653e\u5165\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\uff0c\u56e0\u4e3a\u81ea\u52a8\u5316\u53d8\u91cf\u662f\u5728\u8fd0\u884c\u65f6\u624d\u6709\u7684\u3002 \u800c\u4e14\u4e3a\u4e86\u907f\u514d\u6df7\u4e71\uff0cmake\u4e0d\u5141\u8bb8\u628a\u6574\u4e2a\u6761\u4ef6\u8bed\u53e5\u5206\u6210\u4e24\u90e8\u5206\u653e\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u4e2d\u3002","title":"\u4f7f\u7528\u6761\u4ef6\u5224\u65ad"},{"location":"makefile/conditionals/#_1","text":"\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u5224\u65ad $(CC) \u53d8\u91cf\u662f\u5426 gcc \uff0c\u5982\u679c\u662f\u7684\u8bdd\uff0c\u5219\u4f7f\u7528GNU\u51fd\u6570\u7f16\u8bd1\u76ee\u6807\u3002 .. code:: makefile libs_for_gcc = -lgnu normal_libs = foo : $( objects ) ifeq ($(CC),gcc) $( CC ) -o foo $( objects ) $( libs_for_gcc ) else $( CC ) -o foo $( objects ) $( normal_libs ) endif \u53ef\u89c1\uff0c\u5728\u4e0a\u9762\u793a\u4f8b\u7684\u8fd9\u4e2a\u89c4\u5219\u4e2d\uff0c\u76ee\u6807 foo \u53ef\u4ee5\u6839\u636e\u53d8\u91cf $(CC) \u503c\u6765\u9009\u53d6\u4e0d\u540c\u7684\u51fd\u6570\u5e93\u6765\u7f16\u8bd1\u7a0b\u5e8f\u3002 \u6211\u4eec\u53ef\u4ee5\u4ece\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\u770b\u5230\u4e09\u4e2a\u5173\u952e\u5b57\uff1a ifeq \u3001 else \u548c endif \u3002 ifeq \u7684\u610f\u601d\u8868\u793a\u6761\u4ef6\u8bed\u53e5\u7684\u5f00\u59cb\uff0c\u5e76\u6307\u5b9a\u4e00\u4e2a\u6761\u4ef6\u8868\u8fbe\u5f0f\uff0c\u8868\u8fbe\u5f0f\u5305\u542b\u4e24\u4e2a\u53c2\u6570\uff0c\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u8868\u8fbe\u5f0f\u4ee5\u5706\u62ec\u53f7\u62ec\u8d77\u3002 else \u8868\u793a\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e3a\u5047\u7684\u60c5\u51b5\u3002 endif \u8868\u793a\u4e00\u4e2a\u6761\u4ef6\u8bed\u53e5\u7684\u7ed3\u675f\uff0c\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u8868\u8fbe\u5f0f\u90fd\u5e94\u8be5\u4ee5 endif \u7ed3\u675f\u3002 \u5f53\u6211\u4eec\u7684\u53d8\u91cf $(CC) \u503c\u662f gcc \u65f6\uff0c\u76ee\u6807 foo \u7684\u89c4\u5219\u662f\uff1a .. code:: makefile foo : $( objects ) $( CC ) -o foo $( objects ) $( libs_for_gcc ) \u800c\u5f53\u6211\u4eec\u7684\u53d8\u91cf $(CC) \u503c\u4e0d\u662f gcc \u65f6\uff08\u6bd4\u5982 cc \uff09\uff0c\u76ee\u6807 foo \u7684\u89c4\u5219\u662f\uff1a .. code:: makefile foo : $( objects ) $( CC ) -o foo $( objects ) $( normal_libs ) \u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u628a\u4e0a\u9762\u7684\u90a3\u4e2a\u4f8b\u5b50\u5199\u5f97\u66f4\u7b80\u6d01\u4e00\u4e9b\uff1a .. code:: makefile libs_for_gcc = -lgnu normal_libs = ifeq ($(CC),gcc) libs = $( libs_for_gcc ) else libs = $( normal_libs ) endif foo : $( objects ) $( CC ) -o foo $( objects ) $( libs )","title":"\u793a\u4f8b"},{"location":"makefile/conditionals/#_2","text":"\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u8bed\u6cd5\u4e3a: :: lt;conditional-directive gt; lt;text-if-true gt; endif \u4ee5\u53ca: :: lt;conditional-directive gt; lt;text-if-true gt; else lt;text-if-false gt; endif \u5176\u4e2d conditional-directive \u8868\u793a\u6761\u4ef6\u5173\u952e\u5b57\uff0c\u5982 ifeq \u3002\u8fd9\u4e2a\u5173\u952e\u5b57\u6709\u56db\u4e2a\u3002 \u7b2c\u4e00\u4e2a\u662f\u6211\u4eec\u524d\u9762\u6240\u89c1\u8fc7\u7684 ifeq .. code:: makefile ifeq ( lt;arg1 gt;, lt;arg2 gt;) ifeq lt;arg1 gt; lt;arg2 gt; ifeq lt;arg1 gt; lt;arg2 gt; ifeq lt;arg1 gt; lt;arg2 gt; ifeq lt;arg1 gt; lt;arg2 gt; \u6bd4\u8f83\u53c2\u6570 arg1 \u548c arg2 \u7684\u503c\u662f\u5426\u76f8\u540c\u3002\u5f53\u7136\uff0c\u53c2\u6570\u4e2d\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528make\u7684\u51fd\u6570\u3002\u5982: :: ifeq ($(strip $(foo)),) lt;text-if-empty gt; endif \u8fd9\u4e2a\u793a\u4f8b\u4e2d\u4f7f\u7528\u4e86 strip \u51fd\u6570\uff0c\u5982\u679c\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u7a7a\uff08Empty\uff09\uff0c\u90a3\u4e48 text-if-empty \u5c31\u751f\u6548\u3002 \u7b2c\u4e8c\u4e2a\u6761\u4ef6\u5173\u952e\u5b57\u662f ifneq \u3002\u8bed\u6cd5\u662f\uff1a .. code:: makefile ifneq ( lt;arg1 gt;, lt;arg2 gt;) ifneq lt;arg1 gt; lt;arg2 gt; ifneq lt;arg1 gt; lt;arg2 gt; ifneq lt;arg1 gt; lt;arg2 gt; ifneq lt;arg1 gt; lt;arg2 gt; \u5176\u6bd4\u8f83\u53c2\u6570 arg1 \u548c arg2 \u7684\u503c\u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u4e0d\u540c\uff0c\u5219\u4e3a\u771f\u3002\u548c ifeq \u7c7b\u4f3c\u3002 \u7b2c\u4e09\u4e2a\u6761\u4ef6\u5173\u952e\u5b57\u662f ifdef \u3002\u8bed\u6cd5\u662f\uff1a .. code:: makefile ifdef lt;variable-name gt; \u5982\u679c\u53d8\u91cf variable-name \u7684\u503c\u975e\u7a7a\uff0c\u90a3\u5230\u8868\u8fbe\u5f0f\u4e3a\u771f\u3002\u5426\u5219\uff0c\u8868\u8fbe\u5f0f\u4e3a\u5047\u3002\u5f53\u7136\uff0c variable-name \u540c\u6837\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u6ce8\u610f\uff0c ifdef \u53ea\u662f\u6d4b\u8bd5\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u6709\u503c\uff0c\u5176\u5e76\u4e0d\u4f1a\u628a\u53d8\u91cf\u6269\u5c55\u5230\u5f53\u524d\u4f4d\u7f6e\u3002\u8fd8\u662f\u6765\u770b\u4e24\u4e2a\u4f8b\u5b50\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile bar = foo = $(bar) ifdef foo frobozz = yes else frobozz = no endif \u793a\u4f8b\u4e8c\uff1a .. code:: makefile foo = ifdef foo frobozz = yes else frobozz = no endif \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c $(frobozz) \u503c\u662f yes \uff0c\u7b2c\u4e8c\u4e2a\u5219\u662f no \\ \u3002 \u7b2c\u56db\u4e2a\u6761\u4ef6\u5173\u952e\u5b57\u662f ifndef \u3002\u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile ifndef lt;variable-name gt; \u8fd9\u4e2a\u6211\u5c31\u4e0d\u591a\u8bf4\u4e86\uff0c\u548c ifdef` \u662f\u76f8\u53cd\u7684\u610f\u601d\u3002 \u5728 conditional-directive \u8fd9\u4e00\u884c\u4e0a\uff0c\u591a\u4f59\u7684\u7a7a\u683c\u662f\u88ab\u5141\u8bb8\u7684\uff0c\u4f46\u662f\u4e0d\u80fd\u4ee5 Tab \u952e\u505a\u4e3a\u5f00\u59cb\uff08\u4e0d\u7136\u5c31\u88ab\u8ba4\u4e3a\u662f\u547d\u4ee4\uff09\u3002\u800c\u6ce8\u91ca\u7b26 # \u540c\u6837\u4e5f\u662f\u5b89\u5168\u7684\u3002 else \u548c endif \u4e5f\u4e00\u6837\uff0c\u53ea\u8981\u4e0d\u662f\u4ee5 Tab \u952e\u5f00\u59cb\u5c31\u884c\u4e86\u3002 \u7279\u522b\u6ce8\u610f\u7684\u662f\uff0cmake\u662f\u5728\u8bfb\u53d6Makefile\u65f6\u5c31\u8ba1\u7b97\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u5e76\u6839\u636e\u6761\u4ef6\u8868\u8fbe\u5f0f\u7684\u503c\u6765\u9009\u62e9\u8bed\u53e5\uff0c\u6240\u4ee5\uff0c\u4f60\u6700\u597d\u4e0d\u8981\u628a\u81ea\u52a8\u5316\u53d8\u91cf\uff08\u5982 $@ \u7b49\uff09\u653e\u5165\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\uff0c\u56e0\u4e3a\u81ea\u52a8\u5316\u53d8\u91cf\u662f\u5728\u8fd0\u884c\u65f6\u624d\u6709\u7684\u3002 \u800c\u4e14\u4e3a\u4e86\u907f\u514d\u6df7\u4e71\uff0cmake\u4e0d\u5141\u8bb8\u628a\u6574\u4e2a\u6761\u4ef6\u8bed\u53e5\u5206\u6210\u4e24\u90e8\u5206\u653e\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u4e2d\u3002","title":"\u8bed\u6cd5"},{"location":"makefile/functions/","text":"======== \u4f7f\u7528\u51fd\u6570 ======== \u5728Makefile\u4e2d\u53ef\u4ee5\u4f7f\u7528\u51fd\u6570\u6765\u5904\u7406\u53d8\u91cf\uff0c\u4ece\u800c\u8ba9\u6211\u4eec\u7684\u547d\u4ee4\u6216\u662f\u89c4\u5219\u66f4\u4e3a\u7684\u7075\u6d3b\u548c\u5177\u6709\u667a\u80fd\u3002make\u6240\u652f\u6301\u7684\u51fd\u6570\u4e5f\u4e0d\u7b97\u5f88\u591a\uff0c\u4e0d\u8fc7\u5df2\u7ecf\u8db3\u591f\u6211\u4eec\u7684\u64cd\u4f5c\u4e86\u3002\u51fd\u6570\u8c03\u7528\u540e\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u53ef\u4ee5\u5f53\u505a\u53d8\u91cf\u6765\u4f7f\u7528\u3002 \u51fd\u6570\u7684\u8c03\u7528\u8bed\u6cd5 \u51fd\u6570\u8c03\u7528\uff0c\u5f88\u50cf\u53d8\u91cf\u7684\u4f7f\u7528\uff0c\u4e5f\u662f\u4ee5 $ \u6765\u6807\u8bc6\u7684\uff0c\u5176\u8a9e\u6cd5\u5982\u4e0b\uff1a .. code:: makefile $( lt;function gt; lt;arguments gt;) \u6216\u662f: :: ${ lt ; function gt ; lt ; arguments gt ; } \u8fd9\u91cc\uff0c function \u5c31\u662f\u51fd\u6570\u540d\uff0cmake\u652f\u6301\u7684\u51fd\u6570\u4e0d\u591a\u3002 arguments \u4e3a\u51fd\u6570\u7684\u53c2\u6570\uff0c\u53c2\u6570\u95f4\u4ee5\u9017\u53f7 , \u5206\u9694\uff0c\u800c\u51fd\u6570\u540d\u548c\u53c2\u6570\u4e4b\u95f4\u4ee5\u201c\u7a7a\u683c\u201d\u5206\u9694\u3002\u51fd\u6570\u8c03\u7528\u4ee5 $ \u5f00\u5934\uff0c\u4ee5\u5706\u62ec\u53f7\u6216\u82b1\u62ec\u53f7\u628a\u51fd\u6570\u540d\u548c\u53c2\u6570\u62ec\u8d77\u3002\u611f\u89c9\u5f88\u50cf\u4e00\u4e2a\u53d8\u91cf\uff0c\u662f\u4e0d\u662f\uff1f\u51fd\u6570\u4e2d\u7684\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\uff0c\u4e3a\u4e86\u98ce\u683c\u7684\u7edf\u4e00\uff0c\u51fd\u6570\u548c\u53d8\u91cf\u7684\u62ec\u53f7\u6700\u597d\u4e00\u6837\uff0c\u5982\u4f7f\u7528 $(subst a,b,$(x)) \u8fd9\u6837\u7684\u5f62\u5f0f\uff0c\u800c\u4e0d\u662f $(subst a,b, ${x}) \u7684\u5f62\u5f0f\u3002\u56e0\u4e3a\u7edf\u4e00\u4f1a\u66f4\u6e05\u695a\uff0c\u4e5f\u4f1a\u51cf\u5c11\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\u3002 \u8fd8\u662f\u6765\u770b\u4e00\u4e2a\u793a\u4f8b\uff1a .. code:: makefile comma:= , empty:= space:= $(empty) $(empty) foo:= a b c bar:= $(subst $(space),$(comma),$(foo)) \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c $(comma) \u7684\u503c\u662f\u4e00\u4e2a\u9017\u53f7\u3002 $(space) \u4f7f\u7528\u4e86 $(empty) \u5b9a\u4e49\u4e86\u4e00\u4e2a\u7a7a\u683c\uff0c $(foo) \u7684\u503c\u662f a b c \uff0c $(bar) \u7684\u5b9a\u4e49\u7528\uff0c\u8c03\u7528\u4e86\u51fd\u6570 subst \uff0c\u8fd9\u662f\u4e00\u4e2a\u66ff\u6362\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u6709\u4e09\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u88ab\u66ff\u6362\u5b57\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u5b57\u4e32\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u64cd\u4f5c\u4f5c\u7528\u7684\u5b57\u4e32\u3002\u8fd9\u4e2a\u51fd\u6570\u4e5f\u5c31\u662f\u628a $(foo) \u4e2d\u7684\u7a7a\u683c\u66ff\u6362\u6210\u9017\u53f7\uff0c\u6240\u4ee5 $(bar) \\ \u7684\u503c\u662f a,b,c \u3002 \u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570 subst .. code:: makefile $(subst lt;from gt;, lt;to gt;, lt;text gt;) \u540d\u79f0\uff1a\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570 \u529f\u80fd\uff1a\u628a\u5b57\u4e32 text \u4e2d\u7684 from \u5b57\u7b26\u4e32\u66ff\u6362\u6210 to \u3002 \u8fd4\u56de\uff1a\u51fd\u6570\u8fd4\u56de\u88ab\u66ff\u6362\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(subst ee,EE,feet on the street) \u628a feet on the street \u4e2d\u7684 ee \u66ff\u6362\u6210 EE \uff0c\u8fd4\u56de\u7ed3\u679c\u662f fEEt on the strEEt \u3002 patsubst .. code:: makefile $(patsubst lt;pattern gt;, lt;replacement gt;, lt;text gt;) \u540d\u79f0\uff1a\u6a21\u5f0f\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570\u3002 \u529f\u80fd\uff1a\u67e5\u627e text \u4e2d\u7684\u5355\u8bcd\uff08\u5355\u8bcd\u4ee5\u201c\u7a7a\u683c\u201d\u3001\u201cTab\u201d\u6216\u201c\u56de\u8f66\u201d\u201c\u6362\u884c\u201d\u5206\u9694\uff09\u662f\u5426\u7b26\u5408\u6a21\u5f0f pattern \uff0c\u5982\u679c\u5339\u914d\u7684\u8bdd\uff0c\u5219\u4ee5 replacement \u66ff\u6362\u3002\u8fd9\u91cc\uff0c pattern \u53ef\u4ee5\u5305\u62ec\u901a\u914d\u7b26 % \uff0c\u8868\u793a\u4efb\u610f\u957f\u5ea6\u7684\u5b57\u4e32\u3002\u5982\u679c replacement \u4e2d\u4e5f\u5305\u542b % \uff0c\u90a3\u4e48\uff0c replacement \u4e2d\u7684\u8fd9\u4e2a % \u5c06\u662f pattern \u4e2d\u7684\u90a3\u4e2a % \u6240\u4ee3\u8868\u7684\u5b57\u4e32\u3002\uff08\u53ef\u4ee5\u7528 \\ \u6765\u8f6c\u4e49\uff0c\u4ee5 \\% \u6765\u8868\u793a\u771f\u5b9e\u542b\u4e49\u7684 % \u5b57\u7b26\uff09 \u8fd4\u56de\uff1a\u51fd\u6570\u8fd4\u56de\u88ab\u66ff\u6362\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(patsubst %.c,%.o,x.c.c bar.c) \u628a\u5b57\u4e32 x.c.c bar.c \u7b26\u5408\u6a21\u5f0f %.c \u7684\u5355\u8bcd\u66ff\u6362\u6210 %.o \uff0c\u8fd4\u56de\u7ed3\u679c\u662f x.c.o bar.o \u5907\u6ce8\uff1a\u8fd9\u548c\u6211\u4eec\u524d\u9762\u201c\u53d8\u91cf\u7ae0\u8282\u201d\u8bf4\u8fc7\u7684\u76f8\u5173\u77e5\u8bc6\u6709\u70b9\u76f8\u4f3c\u3002\u5982 $(var: pattern = replacement ;) \u76f8\u5f53\u4e8e $(patsubst pattern , replacement ,$(var)) \uff0c\u800c $(var: suffix = replacement ) \u5219\u76f8\u5f53\u4e8e $(patsubst % suffix ,% replacement ,$(var)) \u3002 \u4f8b\u5982\u6709: :: objects = foo.o bar.o baz.o\uff0c \u90a3\u4e48\uff0c $(objects:.o=.c) \u548c $(patsubst %.o,%.c,$(objects)) \u662f\u4e00\u6837\u7684\u3002 strip .. code:: makefile $(strip lt;string gt;) \u540d\u79f0\uff1a\u53bb\u7a7a\u683c\u51fd\u6570\u3002 \u529f\u80fd\uff1a\u53bb\u6389 string \u5b57\u4e32\u4e2d\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u5b57\u7b26\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u88ab\u53bb\u6389\u7a7a\u683c\u7684\u5b57\u7b26\u4e32\u503c\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(strip a b c ) \u628a\u5b57\u4e32 a b c \u53bb\u5230\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u683c\uff0c\u7ed3\u679c\u662f a b c \u3002 findstring .. code:: makefile $(findstring lt;find gt;, lt;in gt;) \u540d\u79f0\uff1a\u67e5\u627e\u5b57\u7b26\u4e32\u51fd\u6570 \u529f\u80fd\uff1a\u5728\u5b57\u4e32 in \u4e2d\u67e5\u627e find \u5b57\u4e32\u3002 \u8fd4\u56de\uff1a\u5982\u679c\u627e\u5230\uff0c\u90a3\u4e48\u8fd4\u56de find \uff0c\u5426\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(findstring a,a b c) $(findstring a,b c) \u7b2c\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de a \u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 filter .. code:: makefile $(filter lt;pattern... gt;, lt;text gt;) \u540d\u79f0\uff1a\u8fc7\u6ee4\u51fd\u6570 \u529f\u80fd\uff1a\u4ee5 pattern \u6a21\u5f0f\u8fc7\u6ee4 text \u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\uff0c\u4fdd\u7559\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5355\u8bcd\u3002\u53ef\u4ee5\u6709\u591a\u4e2a\u6a21\u5f0f\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile sources := foo.c bar.c baz.s ugh.h foo: $(sources) cc $(filter %.c %.s,$(sources)) -o foo $(filter %.c %.s,$(sources)) \u8fd4\u56de\u7684\u503c\u662f foo.c bar.c baz.s \u3002 filter-out .. code:: makefile $(filter-out lt;pattern... gt;, lt;text gt;) \u540d\u79f0\uff1a\u53cd\u8fc7\u6ee4\u51fd\u6570 \u529f\u80fd\uff1a\u4ee5 pattern \u6a21\u5f0f\u8fc7\u6ee4 text \u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\uff0c\u53bb\u9664\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5355\u8bcd\u3002\u53ef\u4ee5\u6709\u591a\u4e2a\u6a21\u5f0f\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u4e0d\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile objects=main1.o foo.o main2.o bar.o mains=main1.o main2.o $(filter-out $(mains),$(objects)) \u8fd4\u56de\u503c\u662f foo.o bar.o \u3002 sort .. code:: makefile $(sort lt;list gt;) \u540d\u79f0\uff1a\u6392\u5e8f\u51fd\u6570 \u529f\u80fd\uff1a\u7ed9\u5b57\u7b26\u4e32 list \u4e2d\u7684\u5355\u8bcd\u6392\u5e8f\uff08\u5347\u5e8f\uff09\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6392\u5e8f\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a $(sort foo bar lose) \u8fd4\u56de bar foo lose \u3002 \u5907\u6ce8\uff1a sort \u51fd\u6570\u4f1a\u53bb\u6389 list \u4e2d\u76f8\u540c\u7684\u5355\u8bcd\u3002 word .. code:: makefile $(word lt;n gt;, lt;text gt;) \u540d\u79f0\uff1a\u53d6\u5355\u8bcd\u51fd\u6570 \u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 text \u4e2d\u7b2c n \u4e2a\u5355\u8bcd\u3002\uff08\u4ece\u4e00\u5f00\u59cb\uff09 \u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 text \u4e2d\u7b2c n \u4e2a\u5355\u8bcd\u3002\u5982\u679c n \u6bd4 text \u4e2d\u7684\u5355\u8bcd\u6570\u8981\u5927\uff0c\u90a3\u4e48\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a $(word 2, foo bar baz) \u8fd4\u56de\u503c\u662f bar \u3002 wordlist .. code:: makefile $(wordlist lt;ss gt;, lt;e gt;, lt;text gt;) \u540d\u79f0\uff1a\u53d6\u5355\u8bcd\u4e32\u51fd\u6570 \u529f\u80fd\uff1a\u4ece\u5b57\u7b26\u4e32 text \u4e2d\u53d6\u4ece ss \u5f00\u59cb\u5230 e \u7684\u5355\u8bcd\u4e32\u3002 ss \u548c e \u662f\u4e00\u4e2a\u6570\u5b57\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 text \u4e2d\u4ece ss \u5230 e \u7684\u5355\u8bcd\u5b57\u4e32\u3002\u5982\u679c ss \u6bd4 text \u4e2d\u7684\u5355\u8bcd\u6570\u8981\u5927\uff0c\u90a3\u4e48\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c e \u5927\u4e8e text \u7684\u5355\u8bcd\u6570\uff0c\u90a3\u4e48\u8fd4\u56de\u4ece ss \u5f00\u59cb\uff0c\u5230 text \u7ed3\u675f\u7684\u5355\u8bcd\u4e32\u3002 \u793a\u4f8b\uff1a $(wordlist 2, 3, foo bar baz) \u8fd4\u56de\u503c\u662f bar baz \u3002 words .. code:: makefile $(words lt;text gt;) \u540d\u79f0\uff1a\u5355\u8bcd\u4e2a\u6570\u7edf\u8ba1\u51fd\u6570 \u529f\u80fd\uff1a\u7edf\u8ba1 text \u4e2d\u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\u4e2a\u6570\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de text \u4e2d\u7684\u5355\u8bcd\u6570\u3002 \u793a\u4f8b\uff1a $(words, foo bar baz) \u8fd4\u56de\u503c\u662f 3 \u3002 \u5907\u6ce8\uff1a\u5982\u679c\u6211\u4eec\u8981\u53d6 text \u4e2d\u6700\u540e\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\uff1a $(word $(words text ), text ) \u3002 firstword .. code:: makefile $(firstword lt;text gt;) \u540d\u79f0\uff1a\u9996\u5355\u8bcd\u51fd\u6570\u2014\u2014firstword\u3002 \u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 text \u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 text \u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002 \u793a\u4f8b\uff1a $(firstword foo bar) \u8fd4\u56de\u503c\u662f foo \\ \u3002 \u5907\u6ce8\uff1a\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u7528 word \u51fd\u6570\u6765\u5b9e\u73b0\uff1a $(word 1, text ) \u3002 \u4ee5\u4e0a\uff0c\u662f\u6240\u6709\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u51fd\u6570\uff0c\u5982\u679c\u642d\u914d\u6df7\u5408\u4f7f\u7528\uff0c\u53ef\u4ee5\u5b8c\u6210\u6bd4\u8f83\u590d\u6742\u7684\u529f\u80fd\u3002\u8fd9\u91cc\uff0c\u4e3e\u4e00\u4e2a\u73b0\u5b9e\u4e2d\u5e94\u7528\u7684\u4f8b\u5b50\u3002\u6211\u4eec\u77e5\u9053\uff0cmake\u4f7f\u7528 VPATH \u53d8\u91cf\u6765\u6307\u5b9a\u201c\u4f9d\u8d56\u6587\u4ef6\u201d\u7684\u641c\u7d22\u8def\u5f84\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u641c\u7d22\u8def\u5f84\u6765\u6307\u5b9a\u7f16\u8bd1\u5668\u5bf9\u5934\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\u53c2\u6570 CFLAGS \uff0c\u5982\uff1a .. code:: makefile override CFLAGS += $(patsubst %,-I%,$(subst : , , $( VPATH ) )) \u5982\u679c\u6211\u4eec\u7684 $(VPATH) \u503c\u662f src:../headers \uff0c\u90a3\u4e48 $(patsubst %,-I%,$(subst :, ,$(VPATH))) \u5c06\u8fd4\u56de -Isrc -I../headers \uff0c\u8fd9\u6b63\u662fcc\u6216gcc\u641c\u7d22\u5934\u6587\u4ef6\u8def\u5f84\u7684\u53c2\u6570\u3002 \u6587\u4ef6\u540d\u64cd\u4f5c\u51fd\u6570 \u4e0b\u9762\u6211\u4eec\u8981\u4ecb\u7ecd\u7684\u51fd\u6570\u4e3b\u8981\u662f\u5904\u7406\u6587\u4ef6\u540d\u7684\u3002\u6bcf\u4e2a\u51fd\u6570\u7684\u53c2\u6570\u5b57\u7b26\u4e32\u90fd\u4f1a\u88ab\u5f53\u505a\u4e00\u4e2a\u6216\u662f\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u540d\u6765\u5bf9\u5f85\u3002 dir .. code:: makefile $(dir lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u76ee\u5f55\u51fd\u6570\u2014\u2014dir\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u76ee\u5f55\u90e8\u5206\u3002\u76ee\u5f55\u90e8\u5206\u662f\u6307\u6700\u540e\u4e00\u4e2a\u53cd\u659c\u6760\uff08 / \uff09\u4e4b\u524d\u7684\u90e8\u5206\u3002\u5982\u679c\u6ca1\u6709\u53cd\u659c\u6760\uff0c\u90a3\u4e48\u8fd4\u56de ./ \u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u76ee\u5f55\u90e8\u5206\u3002 \u793a\u4f8b\uff1a $(dir src/foo.c hacks) \u8fd4\u56de\u503c\u662f src/ ./ \u3002 notdir .. code:: makefile $(notdir lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u6587\u4ef6\u51fd\u6570\u2014\u2014notdir\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u975e\u76ee\u5f55\u90e8\u5206\u3002\u975e\u76ee\u5f55\u90e8\u5206\u662f\u6307\u6700\u5f8c\u4e00\u4e2a\u53cd\u659c\u6760\uff08 / \uff09\u4e4b\u540e\u7684\u90e8\u5206\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u975e\u76ee\u5f55\u90e8\u5206\u3002 \u793a\u4f8b: $(notdir src/foo.c hacks) \u8fd4\u56de\u503c\u662f foo.c hacks \u3002 suffix .. code:: makefile $(suffix lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u5f8c\u7f00\u51fd\u6570\u2014\u2014suffix\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u5404\u4e2a\u6587\u4ef6\u540d\u7684\u540e\u7f00\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u540e\u7f00\u5e8f\u5217\uff0c\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a $(suffix src/foo.c src-1.0/bar.c hacks) \u8fd4\u56de\u503c\u662f .c .c \\ \u3002 basename .. code:: makefile $(basename lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u524d\u7f00\u51fd\u6570\u2014\u2014basename\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u5404\u4e2a\u6587\u4ef6\u540d\u7684\u524d\u7f00\u90e8\u5206\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u524d\u7f00\u5e8f\u5217\uff0c\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u524d\u7f00\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a $(basename src/foo.c src-1.0/bar.c hacks) \u8fd4\u56de\u503c\u662f src/foo src-1.0/bar hacks \u3002 addsuffix .. code:: makefile $(addsuffix lt;suffix gt;, lt;names... gt;) \u540d\u79f0\uff1a\u52a0\u540e\u7f00\u51fd\u6570\u2014\u2014addsuffix\u3002 \u529f\u80fd\uff1a\u628a\u540e\u7f00 suffix \u52a0\u5230 names \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u540e\u9762\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u52a0\u8fc7\u540e\u7f00\u7684\u6587\u4ef6\u540d\u5e8f\u5217\u3002 \u793a\u4f8b\uff1a $(addsuffix .c,foo bar) \u8fd4\u56de\u503c\u662f foo.c bar.c \u3002 addprefix .. code:: makefile $(addprefix lt;prefix gt;, lt;names... gt;) \u540d\u79f0\uff1a\u52a0\u524d\u7f00\u51fd\u6570\u2014\u2014addprefix\u3002 \u529f\u80fd\uff1a\u628a\u524d\u7f00 prefix \u52a0\u5230 names \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u540e\u9762\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u52a0\u8fc7\u524d\u7f00\u7684\u6587\u4ef6\u540d\u5e8f\u5217\u3002 \u793a\u4f8b\uff1a $(addprefix src/,foo bar) \u8fd4\u56de\u503c\u662f src/foo src/bar \u3002 join .. code:: makefile $(join lt;list1 gt;, lt;list2 gt;) \u540d\u79f0\uff1a\u8fde\u63a5\u51fd\u6570\u2014\u2014join\u3002 \u529f\u80fd\uff1a\u628a list2 \u4e2d\u7684\u5355\u8bcd\u5bf9\u5e94\u5730\u52a0\u5230 list1 \u7684\u5355\u8bcd\u540e\u9762\u3002\u5982\u679c list1 \u7684\u5355\u8bcd\u4e2a\u6570\u8981\u6bd4 list2 \u7684\u591a\uff0c\u90a3\u4e48\uff0c list1 \u4e2d\u7684\u591a\u51fa\u6765\u7684\u5355\u8bcd\u5c06\u4fdd\u6301\u539f\u6837\u3002\u5982\u679c list2 \u7684\u5355\u8bcd\u4e2a\u6570\u8981\u6bd4 list1 \u591a\uff0c\u90a3\u4e48\uff0c list2 \u591a\u51fa\u6765\u7684\u5355\u8bcd\u5c06\u88ab\u590d\u5236\u5230 list1 \u4e2d\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u8fde\u63a5\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a $(join aaa bbb , 111 222 333) \u8fd4\u56de\u503c\u662f aaa111 bbb222 333 \u3002 foreach \u51fd\u6570 foreach\u51fd\u6570\u548c\u522b\u7684\u51fd\u6570\u975e\u5e38\u7684\u4e0d\u4e00\u6837\u3002\u56e0\u4e3a\u8fd9\u4e2a\u51fd\u6570\u662f\u7528\u6765\u505a\u5faa\u73af\u7528\u7684\uff0cMakefile\u4e2d\u7684foreach\u51fd\u6570\u51e0\u4e4e\u662f\u4eff\u7167\u4e8eUnix\u6807\u51c6Shell\uff08/bin/sh\uff09\u4e2d\u7684for\u8bed\u53e5\uff0c\u6216\u662fC-Shell\uff08/bin/csh\uff09\u4e2d\u7684foreach\u8bed\u53e5\u800c\u6784\u5efa\u7684\u3002\u5b83\u7684\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(foreach lt;var gt;, lt;list gt;, lt;text gt;) \u8fd9\u4e2a\u51fd\u6570\u7684\u610f\u601d\u662f\uff0c\u628a\u53c2\u6570 list \u4e2d\u7684\u5355\u8bcd\u9010\u4e00\u53d6\u51fa\u653e\u5230\u53c2\u6570 var \u6240\u6307\u5b9a\u7684\u53d8\u91cf\u4e2d\uff0c\u7136\u540e\u518d\u6267\u884c text \u6240\u5305\u542b\u7684\u8868\u8fbe\u5f0f\u3002\u6bcf\u4e00\u6b21 text \u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5faa\u73af\u8fc7\u7a0b\u4e2d\uff0c text \u7684\u6240\u8fd4\u56de\u7684\u6bcf\u4e2a\u5b57\u7b26\u4e32\u4f1a\u4ee5\u7a7a\u683c\u5206\u9694\uff0c\u6700\u540e\u5f53\u6574\u4e2a\u5faa\u73af\u7ed3\u675f\u65f6\uff0c text \u6240\u8fd4\u56de\u7684\u6bcf\u4e2a\u5b57\u7b26\u4e32\u6240\u7ec4\u6210\u7684\u6574\u4e2a\u5b57\u7b26\u4e32\uff08\u4ee5\u7a7a\u683c\u5206\u9694\uff09\u5c06\u4f1a\u662fforeach\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002 \u6240\u4ee5\uff0c var \u6700\u597d\u662f\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c list \u53ef\u4ee5\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u800c text \u4e2d\u4e00\u822c\u4f1a\u4f7f\u7528 var \u8fd9\u4e2a\u53c2\u6570\u6765\u4f9d\u6b21\u679a\u4e3e list \u4e2d\u7684\u5355\u8bcd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile names := a b c d files := $(foreach n,$(names),$(n).o) \u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c $(name) \u4e2d\u7684\u5355\u8bcd\u4f1a\u88ab\u6328\u4e2a\u53d6\u51fa\uff0c\u5e76\u5b58\u5230\u53d8\u91cf n \u4e2d\uff0c $(n).o \u6bcf\u6b21\u6839\u636e $(n) \u8ba1\u7b97\u51fa\u4e00\u4e2a\u503c\uff0c\u8fd9\u4e9b\u503c\u4ee5\u7a7a\u683c\u5206\u9694\uff0c\u6700\u540e\u4f5c\u4e3aforeach\u51fd\u6570\u7684\u8fd4\u56de\uff0c\u6240\u4ee5\uff0c $(files) \u7684\u503c\u662f a.o b.o c.o d.o \u3002 \u6ce8\u610f\uff0cforeach\u4e2d\u7684 var \u53c2\u6570\u662f\u4e00\u4e2a\u4e34\u65f6\u7684\u5c40\u90e8\u53d8\u91cf\uff0cforeach\u51fd\u6570\u6267\u884c\u5b8c\u540e\uff0c\u53c2\u6570 var \u7684\u53d8\u91cf\u5c06\u4e0d\u5728\u4f5c\u7528\uff0c\u5176\u4f5c\u7528\u57df\u53ea\u5728foreach\u51fd\u6570\u5f53\u4e2d\u3002 if \u51fd\u6570 if\u51fd\u6570\u5f88\u50cfGNU\u7684make\u6240\u652f\u6301\u7684\u6761\u4ef6\u8bed\u53e5\u2014\u2014ifeq\uff08\u53c2\u89c1\u524d\u9762\u6240\u8ff0\u7684\u7ae0\u8282\uff09\uff0cif\u51fd\u6570\u7684\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(if lt;condition gt;, lt;then-part gt;) \u6216\u662f .. code:: makefile $(if lt;condition gt;, lt;then-part gt;, lt;else-part gt;) \u53ef\u89c1\uff0cif\u51fd\u6570\u53ef\u4ee5\u5305\u542b\u201celse\u201d\u90e8\u5206\uff0c\u6216\u662f\u4e0d\u542b\u3002\u5373if\u51fd\u6570\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u4e24\u4e2a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e09\u4e2a\u3002 condition \u53c2\u6570\u662fif\u7684\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u5176\u8fd4\u56de\u7684\u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c31\u76f8\u5f53\u4e8e\u8fd4\u56de\u771f\uff0c\u4e8e\u662f\uff0c then-part \u4f1a\u88ab\u8ba1\u7b97\uff0c\u5426\u5219 else-part \u4f1a\u88ab\u8ba1\u7b97\u3002 \u800cif\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\uff0c\u5982\u679c condition \u4e3a\u771f\uff08\u975e\u7a7a\u5b57\u7b26\u4e32\uff09\uff0c\u90a3\u4e2a then-part \u4f1a\u662f\u6574\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5982\u679c condition \u4e3a\u5047\uff08\u7a7a\u5b57\u7b26\u4e32\uff09\uff0c\u90a3\u4e48 else-part \u4f1a\u662f\u6574\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u6b64\u65f6\u5982\u679c else-part \u6ca1\u6709\u88ab\u5b9a\u4e49\uff0c\u90a3\u4e48\uff0c\u6574\u4e2a\u51fd\u6570\u8fd4\u56de\u7a7a\u5b57\u4e32\u3002 \u6240\u4ee5\uff0c then-part \u548c else-part \u53ea\u4f1a\u6709\u4e00\u4e2a\u88ab\u8ba1\u7b97\u3002 call\u51fd\u6570 call\u51fd\u6570\u662f\u552f\u4e00\u4e00\u4e2a\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u65b0\u7684\u53c2\u6570\u5316\u7684\u51fd\u6570\u3002\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u975e\u5e38\u590d\u6742\u7684\u8868\u8fbe\u5f0f\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u8bb8\u591a\u53c2\u6570\uff0c\u7136\u540e\u4f60\u53ef\u4ee5call\u51fd\u6570\u6765\u5411\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4f20\u9012\u53c2\u6570\u3002\u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(call lt;expression gt;, lt;parm1 gt;, lt;parm2 gt;,..., lt;parmn gt;) \u5f53make\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u65f6\uff0c expression \u53c2\u6570\u4e2d\u7684\u53d8\u91cf\uff0c\u5982 $(1) \u3001 $(2) \u7b49\uff0c\u4f1a\u88ab\u53c2\u6570 parm1 \u3001 parm2 \u3001 parm3 \u4f9d\u6b21\u53d6\u4ee3\u3002\u800c expression \u7684\u8fd4\u56de\u503c\u5c31\u662f call \u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u4f8b\u5982\uff1a .. code:: makefile reverse = $(1) $(2) foo = $(call reverse,a,b) \u90a3\u4e48\uff0c foo \u7684\u503c\u5c31\u662f a b \u3002\u5f53\u7136\uff0c\u53c2\u6570\u7684\u6b21\u5e8f\u662f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7684\uff0c\u4e0d\u4e00\u5b9a\u662f\u987a\u5e8f\u7684\uff0c\u5982\uff1a .. code:: makefile reverse = $(2) $(1) foo = $(call reverse,a,b) \u6b64\u65f6\u7684 foo \u7684\u503c\u5c31\u662f b a \u3002 \u9700\u8981\u6ce8\u610f\uff1a\u5728\u5411 call \u51fd\u6570\u4f20\u9012\u53c2\u6570\u65f6\u8981\u5c24\u5176\u6ce8\u610f\u7a7a\u683c\u7684\u4f7f\u7528\u3002call \u51fd\u6570\u5728\u5904\u7406\u53c2\u6570\u65f6\uff0c\u7b2c2\u4e2a\u53ca\u5176\u4e4b\u540e\u7684\u53c2\u6570\u4e2d\u7684\u7a7a\u683c\u4f1a\u88ab\u4fdd\u7559\uff0c\u56e0\u800c\u53ef\u80fd\u9020\u6210\u4e00\u4e9b\u5947\u602a\u7684\u6548\u679c\u3002\u56e0\u800c\u5728\u5411call\u51fd\u6570\u63d0\u4f9b\u53c2\u6570\u65f6\uff0c\u6700\u5b89\u5168\u7684\u505a\u6cd5\u662f\u53bb\u9664\u6240\u6709\u591a\u4f59\u7684\u7a7a\u683c\u3002 origin\u51fd\u6570 origin\u51fd\u6570\u4e0d\u50cf\u5176\u5b83\u7684\u51fd\u6570\uff0c\u4ed6\u5e76\u4e0d\u64cd\u4f5c\u53d8\u91cf\u7684\u503c\uff0c\u4ed6\u53ea\u662f\u544a\u8bc9\u4f60\u4f60\u7684\u8fd9\u4e2a\u53d8\u91cf\u662f\u54ea\u91cc\u6765\u7684\uff1f\u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(origin lt;variable gt;) \u6ce8\u610f\uff0c variable \u662f\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u4e0d\u5e94\u8be5\u662f\u5f15\u7528\u3002\u6240\u4ee5\u4f60\u6700\u597d\u4e0d\u8981\u5728 variable \u4e2d\u4f7f\u7528 $ \u5b57\u7b26\u3002Origin\u51fd\u6570\u4f1a\u4ee5\u5176\u8fd4\u56de\u503c\u6765\u544a\u8bc9\u4f60\u8fd9\u4e2a\u53d8\u91cf\u7684\u201c\u51fa\u751f\u60c5\u51b5\u201d\uff0c\u4e0b\u9762\uff0c\u662forigin\u51fd\u6570\u7684\u8fd4\u56de\u503c: undefined \u5982\u679c variable \u4ece\u6765\u6ca1\u6709\u5b9a\u4e49\u8fc7\uff0corigin\u51fd\u6570\u8fd4\u56de\u8fd9\u4e2a\u503c undefined default \u5982\u679c variable \u662f\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5b9a\u4e49\uff0c\u6bd4\u5982\u201cCC\u201d\u8fd9\u4e2a\u53d8\u91cf\uff0c\u8fd9\u79cd\u53d8\u91cf\u6211\u4eec\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\u3002 environment \u5982\u679c variable \u662f\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u5e76\u4e14\u5f53Makefile\u88ab\u6267\u884c\u65f6\uff0c -e \u53c2\u6570\u6ca1\u6709\u88ab\u6253\u5f00\u3002 file \u5982\u679c variable \u8fd9\u4e2a\u53d8\u91cf\u88ab\u5b9a\u4e49\u5728Makefile\u4e2d\u3002 command line \u5982\u679c variable \u8fd9\u4e2a\u53d8\u91cf\u662f\u88ab\u547d\u4ee4\u884c\u5b9a\u4e49\u7684\u3002 override \u5982\u679c variable \u662f\u88aboverride\u6307\u793a\u7b26\u91cd\u65b0\u5b9a\u4e49\u7684\u3002 automatic \u5982\u679c variable \u662f\u4e00\u4e2a\u547d\u4ee4\u8fd0\u884c\u4e2d\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u3002\u5173\u4e8e\u81ea\u52a8\u5316\u53d8\u91cf\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5bf9\u4e8e\u6211\u4eec\u7f16\u5199Makefile\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2aMakefile\u5176\u5305\u4e86\u4e00\u4e2a\u5b9a\u4e49\u6587\u4ef6Make.def\uff0c\u5728 Make.def\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53d8\u91cf\u201cbletch\u201d\uff0c\u800c\u6211\u4eec\u7684\u73af\u5883\u4e2d\u4e5f\u6709\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u201cbletch\u201d\uff0c\u6b64\u65f6\uff0c\u6211\u4eec\u60f3\u5224\u65ad\u4e00\u4e0b\uff0c\u5982\u679c\u53d8\u91cf\u6765\u6e90\u4e8e\u73af\u5883\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u628a\u4e4b\u91cd\u5b9a\u4e49\u4e86\uff0c\u5982\u679c\u6765\u6e90\u4e8eMake.def\u6216\u662f\u547d\u4ee4\u884c\u7b49\u975e\u73af\u5883\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u91cd\u65b0\u5b9a\u4e49\u5b83\u3002\u4e8e\u662f\uff0c\u5728\u6211\u4eec\u7684Makefile\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a .. code:: makefile ifdef bletch ifeq $(origin bletch) environment bletch = barf, gag, etc. endif endif \u5f53\u7136\uff0c\u4f60\u4e5f\u8bb8\u4f1a\u8bf4\uff0c\u4f7f\u7528 override \u5173\u952e\u5b57\u4e0d\u5c31\u53ef\u4ee5\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u4e2d\u7684\u53d8\u91cf\u4e86\u5417\uff1f\u4e3a\u4ec0\u4e48\u9700\u8981\u4f7f\u7528\u8fd9\u6837\u7684\u6b65\u9aa4\uff1f\u662f\u7684\uff0c\u6211\u4eec\u7528 override \u662f\u53ef\u4ee5\u8fbe\u5230\u8fd9\u6837\u7684\u6548\u679c\uff0c\u53ef\u662f override \u8fc7\u4e8e\u7c97\u66b4\uff0c\u5b83\u540c\u65f6\u4f1a\u628a\u4ece\u547d\u4ee4\u884c\u5b9a\u4e49\u7684\u53d8\u91cf\u4e5f\u8986\u76d6\u4e86\uff0c\u800c\u6211\u4eec\u53ea\u60f3\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u4f20\u6765\u7684\uff0c\u800c\u4e0d\u60f3\u91cd\u65b0\u5b9a\u4e49\u547d\u4ee4\u884c\u4f20\u6765\u7684\u3002 shell\u51fd\u6570 shell\u51fd\u6570\u4e5f\u4e0d\u50cf\u5176\u5b83\u7684\u51fd\u6570\u3002\u987e\u540d\u601d\u4e49\uff0c\u5b83\u7684\u53c2\u6570\u5e94\u8be5\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edfShell\u7684\u547d\u4ee4\u3002\u5b83\u548c\u53cd\u5f15\u53f7\u201c\u201d\u662f\u76f8\u540c\u7684\u529f\u80fd\u3002\u8fd9\u5c31\u662f\u8bf4\uff0cshell\u51fd\u6570\u628a\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u540e\u7684\u8f93\u51fa\u4f5c\u4e3a\u51fd\u6570\u8fd4\u56de\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u4ee5\u53ca\u5b57\u7b26\u4e32\u5904\u7406\u547d\u4ee4awk\uff0csed\u7b49\u7b49\u547d\u4ee4\u6765\u751f\u6210\u4e00\u4e2a\u53d8\u91cf\uff0c\u5982\uff1a .. code-block:: makefile contents := $(shell cat foo) files := $(shell echo \\*.c) \u6ce8\u610f\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u65b0\u751f\u6210\u4e00\u4e2aShell\u7a0b\u5e8f\u6765\u6267\u884c\u547d\u4ee4\uff0c\u6240\u4ee5\u4f60\u8981\u6ce8\u610f\u5176\u8fd0\u884c\u6027\u80fd\uff0c\u5982\u679c\u4f60\u7684Makefile\u4e2d\u6709\u4e00\u4e9b\u6bd4\u8f83\u590d\u6742\u7684\u89c4\u5219\uff0c\u5e76\u5927\u91cf\u4f7f\u7528\u4e86\u8fd9\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4f60\u7684\u7cfb\u7edf\u6027\u80fd\u662f\u6709\u5bb3\u7684\u3002\u7279\u522b\u662fMakefile\u7684\u9690\u6666\u7684\u89c4\u5219\u53ef\u80fd\u4f1a\u8ba9\u4f60\u7684shell\u51fd\u6570\u6267\u884c\u7684\u6b21\u6570\u6bd4\u4f60\u60f3\u50cf\u7684\u591a\u5f97\u591a\u3002 \u63a7\u5236make\u7684\u51fd\u6570 make\u63d0\u4f9b\u4e86\u4e00\u4e9b\u51fd\u6570\u6765\u63a7\u5236make\u7684\u8fd0\u884c\u3002\u901a\u5e38\uff0c\u4f60\u9700\u8981\u68c0\u6d4b\u4e00\u4e9b\u8fd0\u884cMakefile\u65f6\u7684\u8fd0\u884c\u65f6\u4fe1\u606f\uff0c\u5e76\u4e14\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u6765\u51b3\u5b9a\uff0c\u4f60\u662f\u8ba9make\u7ee7\u7eed\u6267\u884c\uff0c\u8fd8\u662f\u505c\u6b62\u3002 .. code-block:: makefile $(error lt;text ... gt;) \u4ea7\u751f\u4e00\u4e2a\u81f4\u547d\u7684\u9519\u8bef\uff0c ` \u662f\u9519\u8bef\u4fe1\u606f\u3002\u6ce8\u610f\uff0cerror\u51fd\u6570\u4e0d\u4f1a\u5728\u4e00\u88ab\u4f7f\u7528\u5c31\u4f1a\u4ea7\u751f\u9519\u8bef\u4fe1\u606f\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u628a\u5176\u5b9a\u4e49\u5728\u67d0\u4e2a\u53d8\u91cf\u4e2d\uff0c\u5e76\u5728\u540e\u7eed\u7684\u811a\u672c\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u4e5f\u662f\u53ef\u4ee5\u7684\u3002\u4f8b\u5982\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile ifdef ERROR_001 $(error error is $(ERROR_001)) endif \u793a\u4f8b\u4e8c\uff1a .. code:: makefile ERR = $( error found an error! ) .PHONY : err err : $( ERR ) \u793a\u4f8b\u4e00\u4f1a\u5728\u53d8\u91cfERROR_001\u5b9a\u4e49\u4e86\u540e\u6267\u884c\u65f6\u4ea7\u751ferror\u8c03\u7528\uff0c\u800c\u793a\u4f8b\u4e8c\u5219\u5728\u76ee\u5f55err\u88ab\u6267\u884c\u65f6\u624d\u53d1\u751ferror\u8c03\u7528\u3002 .. code:: makefile $(warning lt;text ... gt;) \u8fd9\u4e2a\u51fd\u6570\u5f88\u50cferror\u51fd\u6570\uff0c\u53ea\u662f\u5b83\u5e76\u4e0d\u4f1a\u8ba9make\u9000\u51fa\uff0c\u53ea\u662f\u8f93\u51fa\u4e00\u6bb5\u8b66\u544a\u4fe1\u606f\uff0c\u800cmake\u7ee7\u7eed\u6267\u884c\u3002","title":"\u4f7f\u7528\u51fd\u6570"},{"location":"makefile/functions/#_1","text":"\u51fd\u6570\u8c03\u7528\uff0c\u5f88\u50cf\u53d8\u91cf\u7684\u4f7f\u7528\uff0c\u4e5f\u662f\u4ee5 $ \u6765\u6807\u8bc6\u7684\uff0c\u5176\u8a9e\u6cd5\u5982\u4e0b\uff1a .. code:: makefile $( lt;function gt; lt;arguments gt;) \u6216\u662f: :: ${ lt ; function gt ; lt ; arguments gt ; } \u8fd9\u91cc\uff0c function \u5c31\u662f\u51fd\u6570\u540d\uff0cmake\u652f\u6301\u7684\u51fd\u6570\u4e0d\u591a\u3002 arguments \u4e3a\u51fd\u6570\u7684\u53c2\u6570\uff0c\u53c2\u6570\u95f4\u4ee5\u9017\u53f7 , \u5206\u9694\uff0c\u800c\u51fd\u6570\u540d\u548c\u53c2\u6570\u4e4b\u95f4\u4ee5\u201c\u7a7a\u683c\u201d\u5206\u9694\u3002\u51fd\u6570\u8c03\u7528\u4ee5 $ \u5f00\u5934\uff0c\u4ee5\u5706\u62ec\u53f7\u6216\u82b1\u62ec\u53f7\u628a\u51fd\u6570\u540d\u548c\u53c2\u6570\u62ec\u8d77\u3002\u611f\u89c9\u5f88\u50cf\u4e00\u4e2a\u53d8\u91cf\uff0c\u662f\u4e0d\u662f\uff1f\u51fd\u6570\u4e2d\u7684\u53c2\u6570\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\uff0c\u4e3a\u4e86\u98ce\u683c\u7684\u7edf\u4e00\uff0c\u51fd\u6570\u548c\u53d8\u91cf\u7684\u62ec\u53f7\u6700\u597d\u4e00\u6837\uff0c\u5982\u4f7f\u7528 $(subst a,b,$(x)) \u8fd9\u6837\u7684\u5f62\u5f0f\uff0c\u800c\u4e0d\u662f $(subst a,b, ${x}) \u7684\u5f62\u5f0f\u3002\u56e0\u4e3a\u7edf\u4e00\u4f1a\u66f4\u6e05\u695a\uff0c\u4e5f\u4f1a\u51cf\u5c11\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\u3002 \u8fd8\u662f\u6765\u770b\u4e00\u4e2a\u793a\u4f8b\uff1a .. code:: makefile comma:= , empty:= space:= $(empty) $(empty) foo:= a b c bar:= $(subst $(space),$(comma),$(foo)) \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c $(comma) \u7684\u503c\u662f\u4e00\u4e2a\u9017\u53f7\u3002 $(space) \u4f7f\u7528\u4e86 $(empty) \u5b9a\u4e49\u4e86\u4e00\u4e2a\u7a7a\u683c\uff0c $(foo) \u7684\u503c\u662f a b c \uff0c $(bar) \u7684\u5b9a\u4e49\u7528\uff0c\u8c03\u7528\u4e86\u51fd\u6570 subst \uff0c\u8fd9\u662f\u4e00\u4e2a\u66ff\u6362\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u6709\u4e09\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u88ab\u66ff\u6362\u5b57\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u5b57\u4e32\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u66ff\u6362\u64cd\u4f5c\u4f5c\u7528\u7684\u5b57\u4e32\u3002\u8fd9\u4e2a\u51fd\u6570\u4e5f\u5c31\u662f\u628a $(foo) \u4e2d\u7684\u7a7a\u683c\u66ff\u6362\u6210\u9017\u53f7\uff0c\u6240\u4ee5 $(bar) \\ \u7684\u503c\u662f a,b,c \u3002","title":"\u51fd\u6570\u7684\u8c03\u7528\u8bed\u6cd5"},{"location":"makefile/functions/#_2","text":"","title":"\u5b57\u7b26\u4e32\u5904\u7406\u51fd\u6570"},{"location":"makefile/functions/#subst","text":".. code:: makefile $(subst lt;from gt;, lt;to gt;, lt;text gt;) \u540d\u79f0\uff1a\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570 \u529f\u80fd\uff1a\u628a\u5b57\u4e32 text \u4e2d\u7684 from \u5b57\u7b26\u4e32\u66ff\u6362\u6210 to \u3002 \u8fd4\u56de\uff1a\u51fd\u6570\u8fd4\u56de\u88ab\u66ff\u6362\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(subst ee,EE,feet on the street) \u628a feet on the street \u4e2d\u7684 ee \u66ff\u6362\u6210 EE \uff0c\u8fd4\u56de\u7ed3\u679c\u662f fEEt on the strEEt \u3002","title":"subst"},{"location":"makefile/functions/#patsubst","text":".. code:: makefile $(patsubst lt;pattern gt;, lt;replacement gt;, lt;text gt;) \u540d\u79f0\uff1a\u6a21\u5f0f\u5b57\u7b26\u4e32\u66ff\u6362\u51fd\u6570\u3002 \u529f\u80fd\uff1a\u67e5\u627e text \u4e2d\u7684\u5355\u8bcd\uff08\u5355\u8bcd\u4ee5\u201c\u7a7a\u683c\u201d\u3001\u201cTab\u201d\u6216\u201c\u56de\u8f66\u201d\u201c\u6362\u884c\u201d\u5206\u9694\uff09\u662f\u5426\u7b26\u5408\u6a21\u5f0f pattern \uff0c\u5982\u679c\u5339\u914d\u7684\u8bdd\uff0c\u5219\u4ee5 replacement \u66ff\u6362\u3002\u8fd9\u91cc\uff0c pattern \u53ef\u4ee5\u5305\u62ec\u901a\u914d\u7b26 % \uff0c\u8868\u793a\u4efb\u610f\u957f\u5ea6\u7684\u5b57\u4e32\u3002\u5982\u679c replacement \u4e2d\u4e5f\u5305\u542b % \uff0c\u90a3\u4e48\uff0c replacement \u4e2d\u7684\u8fd9\u4e2a % \u5c06\u662f pattern \u4e2d\u7684\u90a3\u4e2a % \u6240\u4ee3\u8868\u7684\u5b57\u4e32\u3002\uff08\u53ef\u4ee5\u7528 \\ \u6765\u8f6c\u4e49\uff0c\u4ee5 \\% \u6765\u8868\u793a\u771f\u5b9e\u542b\u4e49\u7684 % \u5b57\u7b26\uff09 \u8fd4\u56de\uff1a\u51fd\u6570\u8fd4\u56de\u88ab\u66ff\u6362\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(patsubst %.c,%.o,x.c.c bar.c) \u628a\u5b57\u4e32 x.c.c bar.c \u7b26\u5408\u6a21\u5f0f %.c \u7684\u5355\u8bcd\u66ff\u6362\u6210 %.o \uff0c\u8fd4\u56de\u7ed3\u679c\u662f x.c.o bar.o \u5907\u6ce8\uff1a\u8fd9\u548c\u6211\u4eec\u524d\u9762\u201c\u53d8\u91cf\u7ae0\u8282\u201d\u8bf4\u8fc7\u7684\u76f8\u5173\u77e5\u8bc6\u6709\u70b9\u76f8\u4f3c\u3002\u5982 $(var: pattern = replacement ;) \u76f8\u5f53\u4e8e $(patsubst pattern , replacement ,$(var)) \uff0c\u800c $(var: suffix = replacement ) \u5219\u76f8\u5f53\u4e8e $(patsubst % suffix ,% replacement ,$(var)) \u3002 \u4f8b\u5982\u6709: :: objects = foo.o bar.o baz.o\uff0c \u90a3\u4e48\uff0c $(objects:.o=.c) \u548c $(patsubst %.o,%.c,$(objects)) \u662f\u4e00\u6837\u7684\u3002","title":"patsubst"},{"location":"makefile/functions/#strip","text":".. code:: makefile $(strip lt;string gt;) \u540d\u79f0\uff1a\u53bb\u7a7a\u683c\u51fd\u6570\u3002 \u529f\u80fd\uff1a\u53bb\u6389 string \u5b57\u4e32\u4e2d\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u5b57\u7b26\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u88ab\u53bb\u6389\u7a7a\u683c\u7684\u5b57\u7b26\u4e32\u503c\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(strip a b c ) \u628a\u5b57\u4e32 a b c \u53bb\u5230\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u683c\uff0c\u7ed3\u679c\u662f a b c \u3002","title":"strip"},{"location":"makefile/functions/#findstring","text":".. code:: makefile $(findstring lt;find gt;, lt;in gt;) \u540d\u79f0\uff1a\u67e5\u627e\u5b57\u7b26\u4e32\u51fd\u6570 \u529f\u80fd\uff1a\u5728\u5b57\u4e32 in \u4e2d\u67e5\u627e find \u5b57\u4e32\u3002 \u8fd4\u56de\uff1a\u5982\u679c\u627e\u5230\uff0c\u90a3\u4e48\u8fd4\u56de find \uff0c\u5426\u5219\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile $(findstring a,a b c) $(findstring a,b c) \u7b2c\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de a \u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32","title":"findstring"},{"location":"makefile/functions/#filter","text":".. code:: makefile $(filter lt;pattern... gt;, lt;text gt;) \u540d\u79f0\uff1a\u8fc7\u6ee4\u51fd\u6570 \u529f\u80fd\uff1a\u4ee5 pattern \u6a21\u5f0f\u8fc7\u6ee4 text \u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\uff0c\u4fdd\u7559\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5355\u8bcd\u3002\u53ef\u4ee5\u6709\u591a\u4e2a\u6a21\u5f0f\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile sources := foo.c bar.c baz.s ugh.h foo: $(sources) cc $(filter %.c %.s,$(sources)) -o foo $(filter %.c %.s,$(sources)) \u8fd4\u56de\u7684\u503c\u662f foo.c bar.c baz.s \u3002","title":"filter"},{"location":"makefile/functions/#filter-out","text":".. code:: makefile $(filter-out lt;pattern... gt;, lt;text gt;) \u540d\u79f0\uff1a\u53cd\u8fc7\u6ee4\u51fd\u6570 \u529f\u80fd\uff1a\u4ee5 pattern \u6a21\u5f0f\u8fc7\u6ee4 text \u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\uff0c\u53bb\u9664\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5355\u8bcd\u3002\u53ef\u4ee5\u6709\u591a\u4e2a\u6a21\u5f0f\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u4e0d\u7b26\u5408\u6a21\u5f0f pattern \u7684\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a .. code:: makefile objects=main1.o foo.o main2.o bar.o mains=main1.o main2.o $(filter-out $(mains),$(objects)) \u8fd4\u56de\u503c\u662f foo.o bar.o \u3002","title":"filter-out"},{"location":"makefile/functions/#sort","text":".. code:: makefile $(sort lt;list gt;) \u540d\u79f0\uff1a\u6392\u5e8f\u51fd\u6570 \u529f\u80fd\uff1a\u7ed9\u5b57\u7b26\u4e32 list \u4e2d\u7684\u5355\u8bcd\u6392\u5e8f\uff08\u5347\u5e8f\uff09\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6392\u5e8f\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a $(sort foo bar lose) \u8fd4\u56de bar foo lose \u3002 \u5907\u6ce8\uff1a sort \u51fd\u6570\u4f1a\u53bb\u6389 list \u4e2d\u76f8\u540c\u7684\u5355\u8bcd\u3002","title":"sort"},{"location":"makefile/functions/#word","text":".. code:: makefile $(word lt;n gt;, lt;text gt;) \u540d\u79f0\uff1a\u53d6\u5355\u8bcd\u51fd\u6570 \u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 text \u4e2d\u7b2c n \u4e2a\u5355\u8bcd\u3002\uff08\u4ece\u4e00\u5f00\u59cb\uff09 \u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 text \u4e2d\u7b2c n \u4e2a\u5355\u8bcd\u3002\u5982\u679c n \u6bd4 text \u4e2d\u7684\u5355\u8bcd\u6570\u8981\u5927\uff0c\u90a3\u4e48\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a $(word 2, foo bar baz) \u8fd4\u56de\u503c\u662f bar \u3002","title":"word"},{"location":"makefile/functions/#wordlist","text":".. code:: makefile $(wordlist lt;ss gt;, lt;e gt;, lt;text gt;) \u540d\u79f0\uff1a\u53d6\u5355\u8bcd\u4e32\u51fd\u6570 \u529f\u80fd\uff1a\u4ece\u5b57\u7b26\u4e32 text \u4e2d\u53d6\u4ece ss \u5f00\u59cb\u5230 e \u7684\u5355\u8bcd\u4e32\u3002 ss \u548c e \u662f\u4e00\u4e2a\u6570\u5b57\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 text \u4e2d\u4ece ss \u5230 e \u7684\u5355\u8bcd\u5b57\u4e32\u3002\u5982\u679c ss \u6bd4 text \u4e2d\u7684\u5355\u8bcd\u6570\u8981\u5927\uff0c\u90a3\u4e48\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u3002\u5982\u679c e \u5927\u4e8e text \u7684\u5355\u8bcd\u6570\uff0c\u90a3\u4e48\u8fd4\u56de\u4ece ss \u5f00\u59cb\uff0c\u5230 text \u7ed3\u675f\u7684\u5355\u8bcd\u4e32\u3002 \u793a\u4f8b\uff1a $(wordlist 2, 3, foo bar baz) \u8fd4\u56de\u503c\u662f bar baz \u3002","title":"wordlist"},{"location":"makefile/functions/#words","text":".. code:: makefile $(words lt;text gt;) \u540d\u79f0\uff1a\u5355\u8bcd\u4e2a\u6570\u7edf\u8ba1\u51fd\u6570 \u529f\u80fd\uff1a\u7edf\u8ba1 text \u4e2d\u5b57\u7b26\u4e32\u4e2d\u7684\u5355\u8bcd\u4e2a\u6570\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de text \u4e2d\u7684\u5355\u8bcd\u6570\u3002 \u793a\u4f8b\uff1a $(words, foo bar baz) \u8fd4\u56de\u503c\u662f 3 \u3002 \u5907\u6ce8\uff1a\u5982\u679c\u6211\u4eec\u8981\u53d6 text \u4e2d\u6700\u540e\u7684\u4e00\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\uff1a $(word $(words text ), text ) \u3002","title":"words"},{"location":"makefile/functions/#firstword","text":".. code:: makefile $(firstword lt;text gt;) \u540d\u79f0\uff1a\u9996\u5355\u8bcd\u51fd\u6570\u2014\u2014firstword\u3002 \u529f\u80fd\uff1a\u53d6\u5b57\u7b26\u4e32 text \u4e2d\u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32 text \u7684\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002 \u793a\u4f8b\uff1a $(firstword foo bar) \u8fd4\u56de\u503c\u662f foo \\ \u3002 \u5907\u6ce8\uff1a\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u7528 word \u51fd\u6570\u6765\u5b9e\u73b0\uff1a $(word 1, text ) \u3002 \u4ee5\u4e0a\uff0c\u662f\u6240\u6709\u7684\u5b57\u7b26\u4e32\u64cd\u4f5c\u51fd\u6570\uff0c\u5982\u679c\u642d\u914d\u6df7\u5408\u4f7f\u7528\uff0c\u53ef\u4ee5\u5b8c\u6210\u6bd4\u8f83\u590d\u6742\u7684\u529f\u80fd\u3002\u8fd9\u91cc\uff0c\u4e3e\u4e00\u4e2a\u73b0\u5b9e\u4e2d\u5e94\u7528\u7684\u4f8b\u5b50\u3002\u6211\u4eec\u77e5\u9053\uff0cmake\u4f7f\u7528 VPATH \u53d8\u91cf\u6765\u6307\u5b9a\u201c\u4f9d\u8d56\u6587\u4ef6\u201d\u7684\u641c\u7d22\u8def\u5f84\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u641c\u7d22\u8def\u5f84\u6765\u6307\u5b9a\u7f16\u8bd1\u5668\u5bf9\u5934\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\u53c2\u6570 CFLAGS \uff0c\u5982\uff1a .. code:: makefile override CFLAGS += $(patsubst %,-I%,$(subst : , , $( VPATH ) )) \u5982\u679c\u6211\u4eec\u7684 $(VPATH) \u503c\u662f src:../headers \uff0c\u90a3\u4e48 $(patsubst %,-I%,$(subst :, ,$(VPATH))) \u5c06\u8fd4\u56de -Isrc -I../headers \uff0c\u8fd9\u6b63\u662fcc\u6216gcc\u641c\u7d22\u5934\u6587\u4ef6\u8def\u5f84\u7684\u53c2\u6570\u3002","title":"firstword"},{"location":"makefile/functions/#_3","text":"\u4e0b\u9762\u6211\u4eec\u8981\u4ecb\u7ecd\u7684\u51fd\u6570\u4e3b\u8981\u662f\u5904\u7406\u6587\u4ef6\u540d\u7684\u3002\u6bcf\u4e2a\u51fd\u6570\u7684\u53c2\u6570\u5b57\u7b26\u4e32\u90fd\u4f1a\u88ab\u5f53\u505a\u4e00\u4e2a\u6216\u662f\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u540d\u6765\u5bf9\u5f85\u3002","title":"\u6587\u4ef6\u540d\u64cd\u4f5c\u51fd\u6570"},{"location":"makefile/functions/#dir","text":".. code:: makefile $(dir lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u76ee\u5f55\u51fd\u6570\u2014\u2014dir\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u76ee\u5f55\u90e8\u5206\u3002\u76ee\u5f55\u90e8\u5206\u662f\u6307\u6700\u540e\u4e00\u4e2a\u53cd\u659c\u6760\uff08 / \uff09\u4e4b\u524d\u7684\u90e8\u5206\u3002\u5982\u679c\u6ca1\u6709\u53cd\u659c\u6760\uff0c\u90a3\u4e48\u8fd4\u56de ./ \u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u76ee\u5f55\u90e8\u5206\u3002 \u793a\u4f8b\uff1a $(dir src/foo.c hacks) \u8fd4\u56de\u503c\u662f src/ ./ \u3002","title":"dir"},{"location":"makefile/functions/#notdir","text":".. code:: makefile $(notdir lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u6587\u4ef6\u51fd\u6570\u2014\u2014notdir\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u975e\u76ee\u5f55\u90e8\u5206\u3002\u975e\u76ee\u5f55\u90e8\u5206\u662f\u6307\u6700\u5f8c\u4e00\u4e2a\u53cd\u659c\u6760\uff08 / \uff09\u4e4b\u540e\u7684\u90e8\u5206\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u975e\u76ee\u5f55\u90e8\u5206\u3002 \u793a\u4f8b: $(notdir src/foo.c hacks) \u8fd4\u56de\u503c\u662f foo.c hacks \u3002","title":"notdir"},{"location":"makefile/functions/#suffix","text":".. code:: makefile $(suffix lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u5f8c\u7f00\u51fd\u6570\u2014\u2014suffix\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u5404\u4e2a\u6587\u4ef6\u540d\u7684\u540e\u7f00\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u540e\u7f00\u5e8f\u5217\uff0c\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a $(suffix src/foo.c src-1.0/bar.c hacks) \u8fd4\u56de\u503c\u662f .c .c \\ \u3002","title":"suffix"},{"location":"makefile/functions/#basename","text":".. code:: makefile $(basename lt;names... gt;) \u540d\u79f0\uff1a\u53d6\u524d\u7f00\u51fd\u6570\u2014\u2014basename\u3002 \u529f\u80fd\uff1a\u4ece\u6587\u4ef6\u540d\u5e8f\u5217 names \u4e2d\u53d6\u51fa\u5404\u4e2a\u6587\u4ef6\u540d\u7684\u524d\u7f00\u90e8\u5206\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u6587\u4ef6\u540d\u5e8f\u5217 names \u7684\u524d\u7f00\u5e8f\u5217\uff0c\u5982\u679c\u6587\u4ef6\u6ca1\u6709\u524d\u7f00\uff0c\u5219\u8fd4\u56de\u7a7a\u5b57\u4e32\u3002 \u793a\u4f8b\uff1a $(basename src/foo.c src-1.0/bar.c hacks) \u8fd4\u56de\u503c\u662f src/foo src-1.0/bar hacks \u3002","title":"basename"},{"location":"makefile/functions/#addsuffix","text":".. code:: makefile $(addsuffix lt;suffix gt;, lt;names... gt;) \u540d\u79f0\uff1a\u52a0\u540e\u7f00\u51fd\u6570\u2014\u2014addsuffix\u3002 \u529f\u80fd\uff1a\u628a\u540e\u7f00 suffix \u52a0\u5230 names \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u540e\u9762\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u52a0\u8fc7\u540e\u7f00\u7684\u6587\u4ef6\u540d\u5e8f\u5217\u3002 \u793a\u4f8b\uff1a $(addsuffix .c,foo bar) \u8fd4\u56de\u503c\u662f foo.c bar.c \u3002","title":"addsuffix"},{"location":"makefile/functions/#addprefix","text":".. code:: makefile $(addprefix lt;prefix gt;, lt;names... gt;) \u540d\u79f0\uff1a\u52a0\u524d\u7f00\u51fd\u6570\u2014\u2014addprefix\u3002 \u529f\u80fd\uff1a\u628a\u524d\u7f00 prefix \u52a0\u5230 names \u4e2d\u7684\u6bcf\u4e2a\u5355\u8bcd\u540e\u9762\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u52a0\u8fc7\u524d\u7f00\u7684\u6587\u4ef6\u540d\u5e8f\u5217\u3002 \u793a\u4f8b\uff1a $(addprefix src/,foo bar) \u8fd4\u56de\u503c\u662f src/foo src/bar \u3002","title":"addprefix"},{"location":"makefile/functions/#join","text":".. code:: makefile $(join lt;list1 gt;, lt;list2 gt;) \u540d\u79f0\uff1a\u8fde\u63a5\u51fd\u6570\u2014\u2014join\u3002 \u529f\u80fd\uff1a\u628a list2 \u4e2d\u7684\u5355\u8bcd\u5bf9\u5e94\u5730\u52a0\u5230 list1 \u7684\u5355\u8bcd\u540e\u9762\u3002\u5982\u679c list1 \u7684\u5355\u8bcd\u4e2a\u6570\u8981\u6bd4 list2 \u7684\u591a\uff0c\u90a3\u4e48\uff0c list1 \u4e2d\u7684\u591a\u51fa\u6765\u7684\u5355\u8bcd\u5c06\u4fdd\u6301\u539f\u6837\u3002\u5982\u679c list2 \u7684\u5355\u8bcd\u4e2a\u6570\u8981\u6bd4 list1 \u591a\uff0c\u90a3\u4e48\uff0c list2 \u591a\u51fa\u6765\u7684\u5355\u8bcd\u5c06\u88ab\u590d\u5236\u5230 list1 \u4e2d\u3002 \u8fd4\u56de\uff1a\u8fd4\u56de\u8fde\u63a5\u8fc7\u540e\u7684\u5b57\u7b26\u4e32\u3002 \u793a\u4f8b\uff1a $(join aaa bbb , 111 222 333) \u8fd4\u56de\u503c\u662f aaa111 bbb222 333 \u3002","title":"join"},{"location":"makefile/functions/#foreach","text":"foreach\u51fd\u6570\u548c\u522b\u7684\u51fd\u6570\u975e\u5e38\u7684\u4e0d\u4e00\u6837\u3002\u56e0\u4e3a\u8fd9\u4e2a\u51fd\u6570\u662f\u7528\u6765\u505a\u5faa\u73af\u7528\u7684\uff0cMakefile\u4e2d\u7684foreach\u51fd\u6570\u51e0\u4e4e\u662f\u4eff\u7167\u4e8eUnix\u6807\u51c6Shell\uff08/bin/sh\uff09\u4e2d\u7684for\u8bed\u53e5\uff0c\u6216\u662fC-Shell\uff08/bin/csh\uff09\u4e2d\u7684foreach\u8bed\u53e5\u800c\u6784\u5efa\u7684\u3002\u5b83\u7684\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(foreach lt;var gt;, lt;list gt;, lt;text gt;) \u8fd9\u4e2a\u51fd\u6570\u7684\u610f\u601d\u662f\uff0c\u628a\u53c2\u6570 list \u4e2d\u7684\u5355\u8bcd\u9010\u4e00\u53d6\u51fa\u653e\u5230\u53c2\u6570 var \u6240\u6307\u5b9a\u7684\u53d8\u91cf\u4e2d\uff0c\u7136\u540e\u518d\u6267\u884c text \u6240\u5305\u542b\u7684\u8868\u8fbe\u5f0f\u3002\u6bcf\u4e00\u6b21 text \u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5faa\u73af\u8fc7\u7a0b\u4e2d\uff0c text \u7684\u6240\u8fd4\u56de\u7684\u6bcf\u4e2a\u5b57\u7b26\u4e32\u4f1a\u4ee5\u7a7a\u683c\u5206\u9694\uff0c\u6700\u540e\u5f53\u6574\u4e2a\u5faa\u73af\u7ed3\u675f\u65f6\uff0c text \u6240\u8fd4\u56de\u7684\u6bcf\u4e2a\u5b57\u7b26\u4e32\u6240\u7ec4\u6210\u7684\u6574\u4e2a\u5b57\u7b26\u4e32\uff08\u4ee5\u7a7a\u683c\u5206\u9694\uff09\u5c06\u4f1a\u662fforeach\u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002 \u6240\u4ee5\uff0c var \u6700\u597d\u662f\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c list \u53ef\u4ee5\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u800c text \u4e2d\u4e00\u822c\u4f1a\u4f7f\u7528 var \u8fd9\u4e2a\u53c2\u6570\u6765\u4f9d\u6b21\u679a\u4e3e list \u4e2d\u7684\u5355\u8bcd\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile names := a b c d files := $(foreach n,$(names),$(n).o) \u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c $(name) \u4e2d\u7684\u5355\u8bcd\u4f1a\u88ab\u6328\u4e2a\u53d6\u51fa\uff0c\u5e76\u5b58\u5230\u53d8\u91cf n \u4e2d\uff0c $(n).o \u6bcf\u6b21\u6839\u636e $(n) \u8ba1\u7b97\u51fa\u4e00\u4e2a\u503c\uff0c\u8fd9\u4e9b\u503c\u4ee5\u7a7a\u683c\u5206\u9694\uff0c\u6700\u540e\u4f5c\u4e3aforeach\u51fd\u6570\u7684\u8fd4\u56de\uff0c\u6240\u4ee5\uff0c $(files) \u7684\u503c\u662f a.o b.o c.o d.o \u3002 \u6ce8\u610f\uff0cforeach\u4e2d\u7684 var \u53c2\u6570\u662f\u4e00\u4e2a\u4e34\u65f6\u7684\u5c40\u90e8\u53d8\u91cf\uff0cforeach\u51fd\u6570\u6267\u884c\u5b8c\u540e\uff0c\u53c2\u6570 var \u7684\u53d8\u91cf\u5c06\u4e0d\u5728\u4f5c\u7528\uff0c\u5176\u4f5c\u7528\u57df\u53ea\u5728foreach\u51fd\u6570\u5f53\u4e2d\u3002","title":"foreach \u51fd\u6570"},{"location":"makefile/functions/#if","text":"if\u51fd\u6570\u5f88\u50cfGNU\u7684make\u6240\u652f\u6301\u7684\u6761\u4ef6\u8bed\u53e5\u2014\u2014ifeq\uff08\u53c2\u89c1\u524d\u9762\u6240\u8ff0\u7684\u7ae0\u8282\uff09\uff0cif\u51fd\u6570\u7684\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(if lt;condition gt;, lt;then-part gt;) \u6216\u662f .. code:: makefile $(if lt;condition gt;, lt;then-part gt;, lt;else-part gt;) \u53ef\u89c1\uff0cif\u51fd\u6570\u53ef\u4ee5\u5305\u542b\u201celse\u201d\u90e8\u5206\uff0c\u6216\u662f\u4e0d\u542b\u3002\u5373if\u51fd\u6570\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u4e24\u4e2a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e09\u4e2a\u3002 condition \u53c2\u6570\u662fif\u7684\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u5176\u8fd4\u56de\u7684\u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c31\u76f8\u5f53\u4e8e\u8fd4\u56de\u771f\uff0c\u4e8e\u662f\uff0c then-part \u4f1a\u88ab\u8ba1\u7b97\uff0c\u5426\u5219 else-part \u4f1a\u88ab\u8ba1\u7b97\u3002 \u800cif\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\uff0c\u5982\u679c condition \u4e3a\u771f\uff08\u975e\u7a7a\u5b57\u7b26\u4e32\uff09\uff0c\u90a3\u4e2a then-part \u4f1a\u662f\u6574\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5982\u679c condition \u4e3a\u5047\uff08\u7a7a\u5b57\u7b26\u4e32\uff09\uff0c\u90a3\u4e48 else-part \u4f1a\u662f\u6574\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u6b64\u65f6\u5982\u679c else-part \u6ca1\u6709\u88ab\u5b9a\u4e49\uff0c\u90a3\u4e48\uff0c\u6574\u4e2a\u51fd\u6570\u8fd4\u56de\u7a7a\u5b57\u4e32\u3002 \u6240\u4ee5\uff0c then-part \u548c else-part \u53ea\u4f1a\u6709\u4e00\u4e2a\u88ab\u8ba1\u7b97\u3002","title":"if \u51fd\u6570"},{"location":"makefile/functions/#call","text":"call\u51fd\u6570\u662f\u552f\u4e00\u4e00\u4e2a\u53ef\u4ee5\u7528\u6765\u521b\u5efa\u65b0\u7684\u53c2\u6570\u5316\u7684\u51fd\u6570\u3002\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u975e\u5e38\u590d\u6742\u7684\u8868\u8fbe\u5f0f\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u8bb8\u591a\u53c2\u6570\uff0c\u7136\u540e\u4f60\u53ef\u4ee5call\u51fd\u6570\u6765\u5411\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4f20\u9012\u53c2\u6570\u3002\u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(call lt;expression gt;, lt;parm1 gt;, lt;parm2 gt;,..., lt;parmn gt;) \u5f53make\u6267\u884c\u8fd9\u4e2a\u51fd\u6570\u65f6\uff0c expression \u53c2\u6570\u4e2d\u7684\u53d8\u91cf\uff0c\u5982 $(1) \u3001 $(2) \u7b49\uff0c\u4f1a\u88ab\u53c2\u6570 parm1 \u3001 parm2 \u3001 parm3 \u4f9d\u6b21\u53d6\u4ee3\u3002\u800c expression \u7684\u8fd4\u56de\u503c\u5c31\u662f call \u51fd\u6570\u7684\u8fd4\u56de\u503c\u3002\u4f8b\u5982\uff1a .. code:: makefile reverse = $(1) $(2) foo = $(call reverse,a,b) \u90a3\u4e48\uff0c foo \u7684\u503c\u5c31\u662f a b \u3002\u5f53\u7136\uff0c\u53c2\u6570\u7684\u6b21\u5e8f\u662f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7684\uff0c\u4e0d\u4e00\u5b9a\u662f\u987a\u5e8f\u7684\uff0c\u5982\uff1a .. code:: makefile reverse = $(2) $(1) foo = $(call reverse,a,b) \u6b64\u65f6\u7684 foo \u7684\u503c\u5c31\u662f b a \u3002 \u9700\u8981\u6ce8\u610f\uff1a\u5728\u5411 call \u51fd\u6570\u4f20\u9012\u53c2\u6570\u65f6\u8981\u5c24\u5176\u6ce8\u610f\u7a7a\u683c\u7684\u4f7f\u7528\u3002call \u51fd\u6570\u5728\u5904\u7406\u53c2\u6570\u65f6\uff0c\u7b2c2\u4e2a\u53ca\u5176\u4e4b\u540e\u7684\u53c2\u6570\u4e2d\u7684\u7a7a\u683c\u4f1a\u88ab\u4fdd\u7559\uff0c\u56e0\u800c\u53ef\u80fd\u9020\u6210\u4e00\u4e9b\u5947\u602a\u7684\u6548\u679c\u3002\u56e0\u800c\u5728\u5411call\u51fd\u6570\u63d0\u4f9b\u53c2\u6570\u65f6\uff0c\u6700\u5b89\u5168\u7684\u505a\u6cd5\u662f\u53bb\u9664\u6240\u6709\u591a\u4f59\u7684\u7a7a\u683c\u3002","title":"call\u51fd\u6570"},{"location":"makefile/functions/#origin","text":"origin\u51fd\u6570\u4e0d\u50cf\u5176\u5b83\u7684\u51fd\u6570\uff0c\u4ed6\u5e76\u4e0d\u64cd\u4f5c\u53d8\u91cf\u7684\u503c\uff0c\u4ed6\u53ea\u662f\u544a\u8bc9\u4f60\u4f60\u7684\u8fd9\u4e2a\u53d8\u91cf\u662f\u54ea\u91cc\u6765\u7684\uff1f\u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile $(origin lt;variable gt;) \u6ce8\u610f\uff0c variable \u662f\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u4e0d\u5e94\u8be5\u662f\u5f15\u7528\u3002\u6240\u4ee5\u4f60\u6700\u597d\u4e0d\u8981\u5728 variable \u4e2d\u4f7f\u7528 $ \u5b57\u7b26\u3002Origin\u51fd\u6570\u4f1a\u4ee5\u5176\u8fd4\u56de\u503c\u6765\u544a\u8bc9\u4f60\u8fd9\u4e2a\u53d8\u91cf\u7684\u201c\u51fa\u751f\u60c5\u51b5\u201d\uff0c\u4e0b\u9762\uff0c\u662forigin\u51fd\u6570\u7684\u8fd4\u56de\u503c: undefined \u5982\u679c variable \u4ece\u6765\u6ca1\u6709\u5b9a\u4e49\u8fc7\uff0corigin\u51fd\u6570\u8fd4\u56de\u8fd9\u4e2a\u503c undefined default \u5982\u679c variable \u662f\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5b9a\u4e49\uff0c\u6bd4\u5982\u201cCC\u201d\u8fd9\u4e2a\u53d8\u91cf\uff0c\u8fd9\u79cd\u53d8\u91cf\u6211\u4eec\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\u3002 environment \u5982\u679c variable \u662f\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u5e76\u4e14\u5f53Makefile\u88ab\u6267\u884c\u65f6\uff0c -e \u53c2\u6570\u6ca1\u6709\u88ab\u6253\u5f00\u3002 file \u5982\u679c variable \u8fd9\u4e2a\u53d8\u91cf\u88ab\u5b9a\u4e49\u5728Makefile\u4e2d\u3002 command line \u5982\u679c variable \u8fd9\u4e2a\u53d8\u91cf\u662f\u88ab\u547d\u4ee4\u884c\u5b9a\u4e49\u7684\u3002 override \u5982\u679c variable \u662f\u88aboverride\u6307\u793a\u7b26\u91cd\u65b0\u5b9a\u4e49\u7684\u3002 automatic \u5982\u679c variable \u662f\u4e00\u4e2a\u547d\u4ee4\u8fd0\u884c\u4e2d\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u3002\u5173\u4e8e\u81ea\u52a8\u5316\u53d8\u91cf\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5bf9\u4e8e\u6211\u4eec\u7f16\u5199Makefile\u662f\u975e\u5e38\u6709\u7528\u7684\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2aMakefile\u5176\u5305\u4e86\u4e00\u4e2a\u5b9a\u4e49\u6587\u4ef6Make.def\uff0c\u5728 Make.def\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53d8\u91cf\u201cbletch\u201d\uff0c\u800c\u6211\u4eec\u7684\u73af\u5883\u4e2d\u4e5f\u6709\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u201cbletch\u201d\uff0c\u6b64\u65f6\uff0c\u6211\u4eec\u60f3\u5224\u65ad\u4e00\u4e0b\uff0c\u5982\u679c\u53d8\u91cf\u6765\u6e90\u4e8e\u73af\u5883\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u628a\u4e4b\u91cd\u5b9a\u4e49\u4e86\uff0c\u5982\u679c\u6765\u6e90\u4e8eMake.def\u6216\u662f\u547d\u4ee4\u884c\u7b49\u975e\u73af\u5883\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u91cd\u65b0\u5b9a\u4e49\u5b83\u3002\u4e8e\u662f\uff0c\u5728\u6211\u4eec\u7684Makefile\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a .. code:: makefile ifdef bletch ifeq $(origin bletch) environment bletch = barf, gag, etc. endif endif \u5f53\u7136\uff0c\u4f60\u4e5f\u8bb8\u4f1a\u8bf4\uff0c\u4f7f\u7528 override \u5173\u952e\u5b57\u4e0d\u5c31\u53ef\u4ee5\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u4e2d\u7684\u53d8\u91cf\u4e86\u5417\uff1f\u4e3a\u4ec0\u4e48\u9700\u8981\u4f7f\u7528\u8fd9\u6837\u7684\u6b65\u9aa4\uff1f\u662f\u7684\uff0c\u6211\u4eec\u7528 override \u662f\u53ef\u4ee5\u8fbe\u5230\u8fd9\u6837\u7684\u6548\u679c\uff0c\u53ef\u662f override \u8fc7\u4e8e\u7c97\u66b4\uff0c\u5b83\u540c\u65f6\u4f1a\u628a\u4ece\u547d\u4ee4\u884c\u5b9a\u4e49\u7684\u53d8\u91cf\u4e5f\u8986\u76d6\u4e86\uff0c\u800c\u6211\u4eec\u53ea\u60f3\u91cd\u65b0\u5b9a\u4e49\u73af\u5883\u4f20\u6765\u7684\uff0c\u800c\u4e0d\u60f3\u91cd\u65b0\u5b9a\u4e49\u547d\u4ee4\u884c\u4f20\u6765\u7684\u3002","title":"origin\u51fd\u6570"},{"location":"makefile/functions/#shell","text":"shell\u51fd\u6570\u4e5f\u4e0d\u50cf\u5176\u5b83\u7684\u51fd\u6570\u3002\u987e\u540d\u601d\u4e49\uff0c\u5b83\u7684\u53c2\u6570\u5e94\u8be5\u5c31\u662f\u64cd\u4f5c\u7cfb\u7edfShell\u7684\u547d\u4ee4\u3002\u5b83\u548c\u53cd\u5f15\u53f7\u201c\u201d\u662f\u76f8\u540c\u7684\u529f\u80fd\u3002\u8fd9\u5c31\u662f\u8bf4\uff0cshell\u51fd\u6570\u628a\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u540e\u7684\u8f93\u51fa\u4f5c\u4e3a\u51fd\u6570\u8fd4\u56de\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\u4ee5\u53ca\u5b57\u7b26\u4e32\u5904\u7406\u547d\u4ee4awk\uff0csed\u7b49\u7b49\u547d\u4ee4\u6765\u751f\u6210\u4e00\u4e2a\u53d8\u91cf\uff0c\u5982\uff1a .. code-block:: makefile contents := $(shell cat foo) files := $(shell echo \\*.c) \u6ce8\u610f\uff0c\u8fd9\u4e2a\u51fd\u6570\u4f1a\u65b0\u751f\u6210\u4e00\u4e2aShell\u7a0b\u5e8f\u6765\u6267\u884c\u547d\u4ee4\uff0c\u6240\u4ee5\u4f60\u8981\u6ce8\u610f\u5176\u8fd0\u884c\u6027\u80fd\uff0c\u5982\u679c\u4f60\u7684Makefile\u4e2d\u6709\u4e00\u4e9b\u6bd4\u8f83\u590d\u6742\u7684\u89c4\u5219\uff0c\u5e76\u5927\u91cf\u4f7f\u7528\u4e86\u8fd9\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4f60\u7684\u7cfb\u7edf\u6027\u80fd\u662f\u6709\u5bb3\u7684\u3002\u7279\u522b\u662fMakefile\u7684\u9690\u6666\u7684\u89c4\u5219\u53ef\u80fd\u4f1a\u8ba9\u4f60\u7684shell\u51fd\u6570\u6267\u884c\u7684\u6b21\u6570\u6bd4\u4f60\u60f3\u50cf\u7684\u591a\u5f97\u591a\u3002","title":"shell\u51fd\u6570"},{"location":"makefile/functions/#make","text":"make\u63d0\u4f9b\u4e86\u4e00\u4e9b\u51fd\u6570\u6765\u63a7\u5236make\u7684\u8fd0\u884c\u3002\u901a\u5e38\uff0c\u4f60\u9700\u8981\u68c0\u6d4b\u4e00\u4e9b\u8fd0\u884cMakefile\u65f6\u7684\u8fd0\u884c\u65f6\u4fe1\u606f\uff0c\u5e76\u4e14\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u6765\u51b3\u5b9a\uff0c\u4f60\u662f\u8ba9make\u7ee7\u7eed\u6267\u884c\uff0c\u8fd8\u662f\u505c\u6b62\u3002 .. code-block:: makefile $(error lt;text ... gt;) \u4ea7\u751f\u4e00\u4e2a\u81f4\u547d\u7684\u9519\u8bef\uff0c ` \u662f\u9519\u8bef\u4fe1\u606f\u3002\u6ce8\u610f\uff0cerror\u51fd\u6570\u4e0d\u4f1a\u5728\u4e00\u88ab\u4f7f\u7528\u5c31\u4f1a\u4ea7\u751f\u9519\u8bef\u4fe1\u606f\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u628a\u5176\u5b9a\u4e49\u5728\u67d0\u4e2a\u53d8\u91cf\u4e2d\uff0c\u5e76\u5728\u540e\u7eed\u7684\u811a\u672c\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u4e5f\u662f\u53ef\u4ee5\u7684\u3002\u4f8b\u5982\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile ifdef ERROR_001 $(error error is $(ERROR_001)) endif \u793a\u4f8b\u4e8c\uff1a .. code:: makefile ERR = $( error found an error! ) .PHONY : err err : $( ERR ) \u793a\u4f8b\u4e00\u4f1a\u5728\u53d8\u91cfERROR_001\u5b9a\u4e49\u4e86\u540e\u6267\u884c\u65f6\u4ea7\u751ferror\u8c03\u7528\uff0c\u800c\u793a\u4f8b\u4e8c\u5219\u5728\u76ee\u5f55err\u88ab\u6267\u884c\u65f6\u624d\u53d1\u751ferror\u8c03\u7528\u3002 .. code:: makefile $(warning lt;text ... gt;) \u8fd9\u4e2a\u51fd\u6570\u5f88\u50cferror\u51fd\u6570\uff0c\u53ea\u662f\u5b83\u5e76\u4e0d\u4f1a\u8ba9make\u9000\u51fa\uff0c\u53ea\u662f\u8f93\u51fa\u4e00\u6bb5\u8b66\u544a\u4fe1\u606f\uff0c\u800cmake\u7ee7\u7eed\u6267\u884c\u3002","title":"\u63a7\u5236make\u7684\u51fd\u6570"},{"location":"makefile/implicit_rules/","text":"======== \u9690\u542b\u89c4\u5219 ======== \u5728\u6211\u4eec\u4f7f\u7528Makefile\u65f6\uff0c\u6709\u4e00\u4e9b\u6211\u4eec\u4f1a\u7ecf\u5e38\u4f7f\u7528\uff0c\u800c\u4e14\u4f7f\u7528\u9891\u7387\u975e\u5e38\u9ad8\u7684\u4e1c\u897f\uff0c\u6bd4\u5982\uff0c\u6211\u4eec\u7f16\u8bd1C/C++\u7684\u6e90\u7a0b\u5e8f\u4e3a\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08Unix\u4e0b\u662f .o \u6587\u4ef6\uff0cWindows\u4e0b\u662f .obj \u6587\u4ef6\uff09\u3002\u672c\u7ae0\u8bb2\u8ff0\u7684\u5c31\u662f\u4e00\u4e9b\u5728Makefile\u4e2d\u7684\u201c\u9690\u542b\u7684\u201d\uff0c\u65e9\u5148\u7ea6\u5b9a\u4e86\u7684\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u518d\u5199\u51fa\u6765\u7684\u89c4\u5219\u3002 \u201c\u9690\u542b\u89c4\u5219\u201d\u4e5f\u5c31\u662f\u4e00\u79cd\u60ef\u4f8b\uff0cmake\u4f1a\u6309\u7167\u8fd9\u79cd\u201c\u60ef\u4f8b\u201d\u5fc3\u7167\u4e0d\u55a7\u5730\u6765\u8fd0\u884c\uff0c\u90a3\u6015\u6211\u4eec\u7684Makefile\u4e2d\u6ca1\u6709\u4e66\u5199\u8fd9\u6837\u7684\u89c4\u5219\u3002\u4f8b\u5982\uff0c\u628a .c \u6587\u4ef6\u7f16\u8bd1\u6210 .o \u6587\u4ef6\u8fd9\u4e00\u89c4\u5219\uff0c\u4f60\u6839\u672c\u5c31\u4e0d\u7528\u5199\u51fa\u6765\uff0cmake\u4f1a\u81ea\u52a8\u63a8\u5bfc\u51fa\u8fd9\u79cd\u89c4\u5219\uff0c\u5e76\u751f\u6210\u6211\u4eec\u9700\u8981\u7684 .o \u6587\u4ef6\u3002 \u201c\u9690\u542b\u89c4\u5219\u201d\u4f1a\u4f7f\u7528\u4e00\u4e9b\u6211\u4eec\u7cfb\u7edf\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u6539\u53d8\u8fd9\u4e9b\u7cfb\u7edf\u53d8\u91cf\u7684\u503c\u6765\u5b9a\u5236\u9690\u542b\u89c4\u5219\u7684\u8fd0\u884c\u65f6\u7684\u53c2\u6570\u3002\u5982\u7cfb\u7edf\u53d8\u91cf CFLAGS \u53ef\u4ee5\u63a7\u5236\u7f16\u8bd1\u65f6\u7684\u7f16\u8bd1\u5668\u53c2\u6570\u3002 \u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u201c\u6a21\u5f0f\u89c4\u5219\u201d\u7684\u65b9\u5f0f\u5199\u4e0b\u81ea\u5df1\u7684\u9690\u542b\u89c4\u5219\u3002\u7528\u201c\u540e\u7f00\u89c4\u5219\u201d\u6765\u5b9a\u4e49\u9690\u542b\u89c4\u5219\u4f1a\u6709\u8bb8\u591a\u7684\u9650\u5236\u3002\u4f7f\u7528\u201c\u6a21\u5f0f\u89c4\u5219\u201d\u4f1a\u66f4\u56de\u5f97\u667a\u80fd\u548c\u6e05\u695a\uff0c\u4f46\u201c\u540e\u7f00\u89c4\u5219\u201d\u53ef\u4ee5\u7528\u6765\u4fdd\u8bc1\u6211\u4eecMakefile\u7684\u517c\u5bb9\u6027\u3002 \u6211\u4eec\u4e86\u89e3\u4e86\u201c\u9690\u542b\u89c4\u5219\u201d\uff0c\u53ef\u4ee5\u8ba9\u5176\u4e3a\u6211\u4eec\u66f4\u597d\u7684\u670d\u52a1\uff0c\u4e5f\u4f1a\u8ba9\u6211\u4eec\u77e5\u9053\u4e00\u4e9b\u201c\u7ea6\u5b9a\u4fd7\u6210\u201d\u4e86\u7684\u4e1c\u897f\uff0c\u800c\u4e0d\u81f3\u4e8e\u4f7f\u5f97\u6211\u4eec\u5728\u8fd0\u884cMakefile\u65f6\u51fa\u73b0\u4e00\u4e9b\u6211\u4eec\u89c9\u5f97\u83ab\u540d\u5176\u5999\u7684\u4e1c\u897f\u3002\u5f53\u7136\uff0c\u4efb\u4f55\u4e8b\u7269\u90fd\u662f\u77db\u76fe\u7684\uff0c\u6c34\u80fd\u8f7d\u821f\uff0c\u4ea6\u53ef\u8986\u821f\uff0c\u6240\u4ee5\uff0c\u6709\u65f6\u5019\u201c\u9690\u542b\u89c4\u5219\u201d\u4e5f\u4f1a\u7ed9\u6211\u4eec\u9020\u6210\u4e0d\u5c0f\u7684\u9ebb\u70e6\u3002\u53ea\u6709\u4e86\u89e3\u4e86\u5b83\uff0c\u6211\u4eec\u624d\u80fd\u66f4\u597d\u5730\u4f7f\u7528\u5b83\u3002 \u4f7f\u7528\u9690\u542b\u89c4\u5219 \u5982\u679c\u8981\u4f7f\u7528\u9690\u542b\u89c4\u5219\u751f\u6210\u4f60\u9700\u8981\u7684\u76ee\u6807\uff0c\u4f60\u6240\u9700\u8981\u505a\u7684\u5c31\u662f\u4e0d\u8981\u5199\u51fa\u8fd9\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u3002\u90a3\u4e48\uff0cmake\u4f1a\u8bd5\u56fe\u53bb\u81ea\u52a8\u63a8\u5bfc\u4ea7\u751f\u8fd9\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u548c\u547d\u4ee4\uff0c\u5982\u679c make\u53ef\u4ee5\u81ea\u52a8\u63a8\u5bfc\u751f\u6210\u8fd9\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u548c\u547d\u4ee4\uff0c\u90a3\u4e48\u8fd9\u4e2a\u884c\u4e3a\u5c31\u662f\u9690\u542b\u89c4\u5219\u7684\u81ea\u52a8\u63a8\u5bfc\u3002\u5f53\u7136\uff0c\u9690\u542b\u89c4\u5219\u662fmake\u4e8b\u5148\u7ea6\u5b9a\u597d\u7684\u4e00\u4e9b\u4e1c\u897f\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e0b\u9762\u7684\u4e00\u4e2aMakefile\uff1a .. code:: makefile foo : foo . o bar . o cc \u2013 o foo foo . o bar . o $ ( CFLAGS ) $ ( LDFLAGS ) \u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\uff0c\u8fd9\u4e2aMakefile\u4e2d\u5e76\u6ca1\u6709\u5199\u4e0b\u5982\u4f55\u751f\u6210 foo.o \u548c bar.o \u8fd9\u4e24\u76ee\u6807\u7684\u89c4\u5219\u548c\u547d\u4ee4\u3002\u56e0\u4e3amake\u7684\u201c\u9690\u542b\u89c4\u5219\u201d\u529f\u80fd\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u81ea\u52a8\u53bb\u63a8\u5bfc\u8fd9\u4e24\u4e2a\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u548c\u751f\u6210\u547d\u4ee4\u3002 make\u4f1a\u5728\u81ea\u5df1\u7684\u201c\u9690\u542b\u89c4\u5219\u201d\u5e93\u4e2d\u5bfb\u627e\u53ef\u4ee5\u7528\u7684\u89c4\u5219\uff0c\u5982\u679c\u627e\u5230\uff0c\u90a3\u4e48\u5c31\u4f1a\u4f7f\u7528\u3002\u5982\u679c\u627e\u4e0d\u5230\uff0c\u90a3\u4e48\u5c31\u4f1a\u62a5\u9519\u3002\u5728\u4e0a\u9762\u7684\u90a3\u4e2a\u4f8b\u5b50\u4e2d\uff0cmake\u8c03\u7528\u7684\u9690\u542b\u89c4\u5219\u662f\uff0c\u628a .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u6587\u4ef6\u7f6e\u6210 .c \uff0c\u5e76\u4f7f\u7528C\u7684\u7f16\u8bd1\u547d\u4ee4 cc \u2013c $(CFLAGS) foo.c \u6765\u751f\u6210 foo.o \u7684\u76ee\u6807\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5b8c\u5168\u6ca1\u6709\u5fc5\u8981\u5199\u4e0b\u4e0b\u9762\u7684\u4e24\u6761\u89c4\u5219\uff1a .. code:: makefile foo.o : foo . c cc \u2013c foo.c $( CFLAGS ) bar.o : bar . c cc \u2013c bar.c $( CFLAGS ) \u56e0\u4e3a\uff0c\u8fd9\u5df2\u7ecf\u662f\u201c\u7ea6\u5b9a\u201d\u597d\u4e86\u7684\u4e8b\u4e86\uff0cmake\u548c\u6211\u4eec\u7ea6\u5b9a\u597d\u4e86\u7528C\u7f16\u8bd1\u5668 cc \u751f\u6210 .o \u6587\u4ef6\u7684\u89c4\u5219\uff0c\u8fd9\u5c31\u662f\u9690\u542b\u89c4\u5219\u3002 \u5f53\u7136\uff0c\u5982\u679c\u6211\u4eec\u4e3a .o \u6587\u4ef6\u4e66\u5199\u4e86\u81ea\u5df1\u7684\u89c4\u5219\uff0c\u90a3\u4e48make\u5c31\u4e0d\u4f1a\u81ea\u52a8\u63a8\u5bfc\u5e76\u8c03\u7528\u9690\u542b\u89c4\u5219\uff0c\u5b83\u4f1a\u6309\u7167\u6211\u4eec\u5199\u597d\u7684\u89c4\u5219\u5fe0\u5b9e\u5730\u6267\u884c\u3002 \u8fd8\u6709\uff0c\u5728make\u7684\u201c\u9690\u542b\u89c4\u5219\u5e93\u201d\u4e2d\uff0c\u6bcf\u4e00\u6761\u9690\u542b\u89c4\u5219\u90fd\u5728\u5e93\u4e2d\u6709\u5176\u987a\u5e8f\uff0c\u8d8a\u9760\u524d\u7684\u5219\u662f\u8d8a\u88ab\u7ecf\u5e38\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u6211\u4eec\u6709\u4e9b\u65f6\u5019\u5373\u4f7f\u6211\u4eec\u663e\u793a\u5730\u6307\u5b9a\u4e86\u76ee\u6807\u4f9d\u8d56\uff0cmake\u4e5f\u4e0d\u4f1a\u7ba1\u3002\u5982\u4e0b\u9762\u8fd9\u6761\u89c4\u5219\uff08\u6ca1\u6709\u547d\u4ee4\uff09\uff1a .. code:: makefile foo.o : foo.p \u4f9d\u8d56\u6587\u4ef6 foo.p \uff08Pascal\u7a0b\u5e8f\u7684\u6e90\u6587\u4ef6\uff09\u6709\u53ef\u80fd\u53d8\u5f97\u6ca1\u6709\u610f\u4e49\u3002\u5982\u679c\u76ee\u5f55\u4e0b\u5b58\u5728\u4e86 foo.c \u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u9690\u542b\u89c4\u5219\u4e00\u6837\u4f1a\u751f\u6548\uff0c\u5e76\u4f1a\u901a\u8fc7 foo.c \u8c03\u7528C\u7684\u7f16\u8bd1\u5668\u751f\u6210 foo.o \u6587\u4ef6\u3002\u56e0\u4e3a\uff0c\u5728\u9690\u542b\u89c4\u5219\u4e2d\uff0cPascal\u7684\u89c4\u5219\u51fa\u73b0\u5728C\u7684\u89c4\u5219\u4e4b\u540e\uff0c\u6240\u4ee5\uff0cmake\u627e\u5230\u53ef\u4ee5\u751f\u6210 foo.o \u7684C\u7684\u89c4\u5219\u5c31\u4e0d\u518d\u5bfb\u627e\u4e0b\u4e00\u6761\u89c4\u5219\u4e86\u3002\u5982\u679c\u4f60\u786e\u5b9e\u4e0d\u5e0c\u671b\u4efb\u4f55\u9690\u542b\u89c4\u5219\u63a8\u5bfc\uff0c\u90a3\u4e48\uff0c\u4f60\u5c31\u4e0d\u8981\u53ea\u5199\u51fa\u201c\u4f9d\u8d56\u89c4\u5219\u201d\uff0c\u800c\u4e0d\u5199\u547d\u4ee4\u3002 \u9690\u542b\u89c4\u5219\u4e00\u89c8 \u8fd9\u91cc\u6211\u4eec\u5c06\u8bb2\u8ff0\u6240\u6709\u9884\u5148\u8bbe\u7f6e\uff08\u4e5f\u5c31\u662fmake\u5185\u5efa\uff09\u7684\u9690\u542b\u89c4\u5219\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u660e\u786e\u5730\u5199\u4e0b\u89c4\u5219\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4f1a\u5728\u8fd9\u4e9b\u89c4\u5219\u4e2d\u5bfb\u627e\u6240\u9700\u8981\u89c4\u5219\u548c\u547d\u4ee4\u3002\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528make\u7684\u53c2\u6570 -r \u6216 --no-builtin-rules \u9009\u9879\u6765\u53d6\u6d88\u6240\u6709\u7684\u9884\u8bbe\u7f6e\u7684\u9690\u542b\u89c4\u5219\u3002 \u5f53\u7136\uff0c\u5373\u4f7f\u662f\u6211\u4eec\u6307\u5b9a\u4e86 -r \u53c2\u6570\uff0c\u67d0\u4e9b\u9690\u542b\u89c4\u5219\u8fd8\u662f\u4f1a\u751f\u6548\uff0c\u56e0\u4e3a\u6709\u8bb8\u591a\u7684\u9690\u542b\u89c4\u5219\u90fd\u662f\u4f7f\u7528\u4e86\u201c\u540e\u7f00\u89c4\u5219\u201d\u6765\u5b9a\u4e49\u7684\uff0c\u6240\u4ee5\uff0c\u53ea\u8981\u9690\u542b\u89c4\u5219\u4e2d\u6709 \u201c\u540e\u7f00\u5217\u8868\u201d\uff08\u4e5f\u5c31\u4e00\u7cfb\u7edf\u5b9a\u4e49\u5728\u76ee\u6807 .SUFFIXES \u7684\u4f9d\u8d56\u76ee\u6807\uff09\uff0c\u90a3\u4e48\u9690\u542b\u89c4\u5219\u5c31\u4f1a\u751f\u6548\u3002\u9ed8\u8ba4\u7684\u540e\u7f00\u5217\u8868\u662f\uff1a.out, .a, .ln, .o, .c, .cc, .C, .p, .f, .F, .r, .y, .l, .s, .S, .mod, .sym, .def, .h, .info, .dvi, .tex, .texinfo, .texi, .txinfo, .w, .ch .web, .sh, .elc, .el\u3002\u5177\u4f53\u7684\u7ec6\u8282\uff0c\u6211\u4eec\u4f1a\u5728\u540e\u9762\u8bb2\u8ff0\u3002 \u8fd8\u662f\u5148\u6765\u770b\u4e00\u770b\u5e38\u7528\u7684\u9690\u542b\u89c4\u5219\u5427\u3002 \u7f16\u8bd1C\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .c \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f $(CC) \u2013c $(CPPFLAGS) $(CFLAGS) \u7f16\u8bd1C++\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .cc \u6216\u662f n .C \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f $(CXX) \u2013c $(CPPFLAGS) $(CFLAGS) \u3002\uff08\u5efa\u8bae\u4f7f\u7528 .cc \u4f5c\u4e3aC++\u6e90\u6587\u4ef6\u7684\u540e\u7f00\uff0c\u800c\u4e0d\u662f .C \uff09 \u7f16\u8bd1Pascal\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .p \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f $(PC) \u2013c $(PFLAGS) \u3002 \u7f16\u8bd1Fortran/Ratfor\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .r \u6216 n .F \u6216 n .f \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f: .f $(FC) \u2013c $(FFLAGS) .F $(FC) \u2013c $(FFLAGS) $(CPPFLAGS) .f $(FC) \u2013c $(FFLAGS) $(RFLAGS) \u9884\u5904\u7406Fortran/Ratfor\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .f \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .r \u6216 n .F \u3002\u8fd9\u4e2a\u89c4\u5219\u53ea\u662f\u8f6c\u6362Ratfor\u6216\u6709\u9884\u5904\u7406\u7684Fortran\u7a0b\u5e8f\u5230\u4e00\u4e2a\u6807\u51c6\u7684Fortran\u7a0b\u5e8f\u3002\u5176\u4f7f\u7528\u7684\u547d\u4ee4\u662f\uff1a .F $(FC) \u2013F $(CPPFLAGS) $(FFLAGS) .r $(FC) \u2013F $(FFLAGS) $(RFLAGS) \u7f16\u8bd1Modula-2\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .sym \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .def \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(M2C) $(M2FLAGS) $(DEFFLAGS) \u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .mod \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(M2C) $(M2FLAGS) $(MODFLAGS) \u3002 \u6c47\u7f16\u548c\u6c47\u7f16\u9884\u5904\u7406\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .s \uff0c\u9ed8\u8ba4\u4f7f\u7528\u7f16\u8bd1\u54c1 as \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $ (AS) $(ASFLAGS) \u3002 n .s \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .S \uff0c\u9ed8\u8ba4\u4f7f\u7528C\u9884\u7f16\u8bd1\u5668 cpp \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(AS) $(ASFLAGS) \u3002 \u94fe\u63a5Object\u6587\u4ef6\u7684\u9690\u542b\u89c4\u5219\u3002 n \u76ee\u6807\u4f9d\u8d56\u4e8e n .o \uff0c\u901a\u8fc7\u8fd0\u884cC\u7684\u7f16\u8bd1\u5668\u6765\u8fd0\u884c\u94fe\u63a5\u7a0b\u5e8f\u751f\u6210\uff08\u4e00\u822c\u662f ld \uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(CC) $(LDFLAGS) n .o $(LOADLIBES) $(LDLIBS) \u3002\u8fd9\u4e2a\u89c4\u5219\u5bf9\u4e8e\u53ea\u6709\u4e00\u4e2a\u6e90\u6587\u4ef6\u7684\u5de5\u7a0b\u6709\u6548\uff0c\u540c\u65f6\u4e5f\u5bf9\u591a\u4e2aObject\u6587\u4ef6\uff08\u7531\u4e0d\u540c\u7684\u6e90\u6587\u4ef6\u751f\u6210\uff09\u7684\u4e5f\u6709\u6548\u3002\u4f8b\u5982\u5982\u4e0b\u89c4\u5219: :: x : y.o z.o \u5e76\u4e14 x.c \u3001 y.c \u548c z.c \u90fd\u5b58\u5728\u65f6\uff0c\u9690\u542b\u89c4\u5219\u5c06\u6267\u884c\u5982\u4e0b\u547d\u4ee4: :: cc -c x.c -o x.o cc -c y.c -o y.o cc -c z.c -o z.o cc x.o y.o z.o -o x rm -f x.o rm -f y.o rm -f z.o \u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u6e90\u6587\u4ef6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684x.c\uff09\u548c\u4f60\u7684\u76ee\u6807\u540d\u5b57\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684x\uff09\u76f8\u5173\u8054\uff0c\u90a3\u4e48\uff0c\u4f60\u6700\u597d\u5199\u51fa\u81ea\u5df1\u7684\u751f\u6210\u89c4\u5219\uff0c\u4e0d\u7136\uff0c\u9690\u542b\u89c4\u5219\u4f1a\u62a5\u9519\u7684\u3002 Yacc C\u7a0b\u5e8f\u65f6\u7684\u9690\u542b\u89c4\u5219\u3002 n .c \u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.y \uff08Yacc\u751f\u6210\u7684\u6587\u4ef6\uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(YACC) $(YFALGS) \u3002\uff08\u201cYacc\u201d\u662f\u4e00\u4e2a\u8bed\u6cd5\u5206\u6790\u5668\uff0c\u5173\u4e8e\u5176\u7ec6\u8282\u8bf7\u67e5\u770b\u76f8\u5173\u8d44\u6599\uff09 Lex C\u7a0b\u5e8f\u65f6\u7684\u9690\u542b\u89c4\u5219\u3002 n .c \u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.l \uff08Lex\u751f\u6210\u7684\u6587\u4ef6\uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(LEX) $(LFALGS) \u3002\uff08\u5173\u4e8e\u201cLex\u201d\u7684\u7ec6\u8282\u8bf7\u67e5\u770b\u76f8\u5173\u8d44\u6599\uff09 Lex Ratfor\u7a0b\u5e8f\u65f6\u7684\u9690\u542b\u89c4\u5219\u3002 n .r \u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.l \uff08Lex\u751f\u6210\u7684\u6587\u4ef6\uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(LEX) $(LFALGS) \u3002 \u4eceC\u7a0b\u5e8f\u3001Yacc\u6587\u4ef6\u6216Lex\u6587\u4ef6\u521b\u5efaLint\u5e93\u7684\u9690\u542b\u89c4\u5219\u3002 n .ln \uff08lint\u751f\u6210\u7684\u6587\u4ef6\uff09\u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.c \uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(LINT) $(LINTFALGS) $(CPPFLAGS) -i \u3002\u5bf9\u4e8e n .y \u548c n .l \u4e5f\u662f\u540c\u6837\u7684\u89c4\u5219\u3002 \u9690\u542b\u89c4\u5219\u4f7f\u7528\u7684\u53d8\u91cf \u5728\u9690\u542b\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u4e2d\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u4f7f\u7528\u4e86\u4e00\u4e9b\u9884\u5148\u8bbe\u7f6e\u7684\u53d8\u91cf\u3002\u4f60\u53ef\u4ee5\u5728\u4f60\u7684makefile\u4e2d\u6539\u53d8\u8fd9\u4e9b\u53d8\u91cf\u7684\u503c\uff0c\u6216\u662f\u5728make\u7684\u547d\u4ee4\u884c\u4e2d\u4f20\u5165\u8fd9\u4e9b\u503c\uff0c\u6216\u662f\u5728\u4f60\u7684\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e\u8fd9\u4e9b\u503c\uff0c\u65e0\u8bba\u600e\u4e48\u6837\uff0c\u53ea\u8981\u8bbe\u7f6e\u4e86\u8fd9\u4e9b\u7279\u5b9a\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u5176\u5c31\u4f1a\u5bf9\u9690\u542b\u89c4\u5219\u8d77\u4f5c\u7528\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5229\u7528make\u7684 -R \u6216 --no\u2013builtin-variables \u53c2\u6570\u6765\u53d6\u6d88\u4f60\u6240\u5b9a\u4e49\u7684\u53d8\u91cf\u5bf9\u9690\u542b\u89c4\u5219\u7684\u4f5c\u7528\u3002 \u4f8b\u5982\uff0c\u7b2c\u4e00\u6761\u9690\u542b\u89c4\u5219\u2014\u2014\u7f16\u8bd1C\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u7684\u547d\u4ee4\u662f $(CC) \u2013c $(CFLAGS) $(CPPFLAGS) \u3002Make\u9ed8\u8ba4\u7684\u7f16\u8bd1\u547d\u4ee4\u662f cc \uff0c\u5982\u679c\u4f60\u628a\u53d8\u91cf $(CC) \u91cd\u5b9a\u4e49\u6210 gcc \uff0c\u628a\u53d8\u91cf $(CFLAGS) \u91cd\u5b9a\u4e49\u6210 -g \uff0c\u90a3\u4e48\uff0c\u9690\u542b\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u5168\u90e8\u4f1a\u4ee5 gcc \u2013c -g $(CPPFLAGS) \u7684\u6837\u5b50\u6765\u6267\u884c\u4e86\u3002 \u6211\u4eec\u53ef\u4ee5\u628a\u9690\u542b\u89c4\u5219\u4e2d\u4f7f\u7528\u7684\u53d8\u91cf\u5206\u6210\u4e24\u79cd\uff1a\u4e00\u79cd\u662f\u547d\u4ee4\u76f8\u5173\u7684\uff0c\u5982 CC \uff1b\u4e00\u79cd\u662f\u53c2\u6570\u76f8\u7684\u5173\uff0c\u5982 CFLAGS \u3002\u4e0b\u9762\u662f\u6240\u6709\u9690\u542b\u89c4\u5219\u4e2d\u4f1a\u7528\u5230\u7684\u53d8\u91cf\uff1a \u5173\u4e8e\u547d\u4ee4\u7684\u53d8\u91cf\u3002 AR : \u51fd\u6570\u5e93\u6253\u5305\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f ar AS : \u6c47\u7f16\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f as CC : C\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f cc CXX : C++\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f g++ CO : \u4ece RCS\u6587\u4ef6\u4e2d\u6269\u5c55\u6587\u4ef6\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f co CPP : C\u7a0b\u5e8f\u7684\u9884\u5904\u7406\u5668\uff08\u8f93\u51fa\u662f\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f $(CC) \u2013E FC : Fortran \u548c Ratfor \u7684\u7f16\u8bd1\u5668\u548c\u9884\u5904\u7406\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f f77 GET : \u4eceSCCS\u6587\u4ef6\u4e2d\u6269\u5c55\u6587\u4ef6\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f get LEX : Lex\u65b9\u6cd5\u5206\u6790\u5668\u7a0b\u5e8f\uff08\u9488\u5bf9\u4e8eC\u6216Ratfor\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f lex PC : Pascal\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f pc YACC : Yacc\u6587\u6cd5\u5206\u6790\u5668\uff08\u9488\u5bf9\u4e8eC\u7a0b\u5e8f\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f yacc YACCR : Yacc\u6587\u6cd5\u5206\u6790\u5668\uff08\u9488\u5bf9\u4e8eRatfor\u7a0b\u5e8f\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f yacc \u2013r MAKEINFO : \u8f6c\u6362Texinfo\u6e90\u6587\u4ef6\uff08.texi\uff09\u5230Info\u6587\u4ef6\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f makeinfo TEX : \u4eceTeX\u6e90\u6587\u4ef6\u521b\u5efaTeX DVI\u6587\u4ef6\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f tex TEXI2DVI : \u4eceTexinfo\u6e90\u6587\u4ef6\u521b\u5efa\u519bTeX DVI \u6587\u4ef6\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f texi2dvi WEAVE : \u8f6c\u6362Web\u5230TeX\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f weave CWEAVE : \u8f6c\u6362C Web \u5230 TeX\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f cweave TANGLE : \u8f6c\u6362Web\u5230Pascal\u8bed\u8a00\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f tangle CTANGLE : \u8f6c\u6362C Web \u5230 C\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f ctangle RM : \u5220\u9664\u6587\u4ef6\u547d\u4ee4\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f rm \u2013f \u5173\u4e8e\u547d\u4ee4\u53c2\u6570\u7684\u53d8\u91cf \u4e0b\u9762\u7684\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u76f8\u5173\u4e0a\u9762\u7684\u547d\u4ee4\u7684\u53c2\u6570\u3002\u5982\u679c\u6ca1\u6709\u6307\u660e\u5176\u9ed8\u8ba4\u503c\uff0c\u90a3\u4e48\u5176\u9ed8\u8ba4\u503c\u90fd\u662f\u7a7a\u3002 ARFLAGS : \u51fd\u6570\u5e93\u6253\u5305\u7a0b\u5e8fAR\u547d\u4ee4\u7684\u53c2\u6570\u3002\u9ed8\u8ba4\u503c\u662f rv ASFLAGS : \u6c47\u7f16\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002\uff08\u5f53\u660e\u663e\u5730\u8c03\u7528 .s \u6216 .S \u6587\u4ef6\u65f6\uff09 CFLAGS : C\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 CXXFLAGS : C++\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 COFLAGS : RCS\u547d\u4ee4\u53c2\u6570\u3002 CPPFLAGS : C\u9884\u5904\u7406\u5668\u53c2\u6570\u3002\uff08 C \u548c Fortran \u7f16\u8bd1\u5668\u4e5f\u4f1a\u7528\u5230\uff09\u3002 FFLAGS : Fortran\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 GFLAGS : SCCS \u201cget\u201d\u7a0b\u5e8f\u53c2\u6570\u3002 LDFLAGS : \u94fe\u63a5\u5668\u53c2\u6570\u3002\uff08\u5982\uff1a ld \uff09 LFLAGS : Lex\u6587\u6cd5\u5206\u6790\u5668\u53c2\u6570\u3002 PFLAGS : Pascal\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 RFLAGS : Ratfor \u7a0b\u5e8f\u7684Fortran \u7f16\u8bd1\u5668\u53c2\u6570\u3002 YFLAGS : Yacc\u6587\u6cd5\u5206\u6790\u5668\u53c2\u6570\u3002 \u9690\u542b\u89c4\u5219\u94fe \u6709\u4e9b\u65f6\u5019\uff0c\u4e00\u4e2a\u76ee\u6807\u53ef\u80fd\u88ab\u4e00\u7cfb\u5217\u7684\u9690\u542b\u89c4\u5219\u6240\u4f5c\u7528\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a .o \u7684\u6587\u4ef6\u751f\u6210\uff0c\u53ef\u80fd\u4f1a\u662f\u5148\u88abYacc\u7684[.y]\u6587\u4ef6\u5148\u6210 .c \uff0c\u7136\u540e\u518d\u88abC\u7684\u7f16\u8bd1\u5668\u751f\u6210\u3002\u6211\u4eec\u628a\u8fd9\u4e00\u7cfb\u5217\u7684\u9690\u542b\u89c4\u5219\u53eb\u505a\u201c\u9690\u542b\u89c4\u5219\u94fe\u201d\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u6587\u4ef6 .c \u5b58\u5728\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u8c03\u7528C\u7684\u7f16\u8bd1\u5668\u7684\u9690\u542b\u89c4\u5219\uff0c\u5982\u679c\u6ca1\u6709 .c \u6587\u4ef6\uff0c\u4f46\u6709\u4e00\u4e2a .y \u6587\u4ef6\uff0c\u90a3\u4e48Yacc\u7684\u9690\u542b\u89c4\u5219\u4f1a\u88ab\u8c03\u7528\uff0c\u751f\u6210 .c \u6587\u4ef6\uff0c\u7136\u540e\uff0c\u518d\u8c03\u7528C\u7f16\u8bd1\u7684\u9690\u542b\u89c4\u5219\u6700\u7ec8\u7531 .c \u751f\u6210 .o \u6587\u4ef6\uff0c\u8fbe\u5230\u76ee\u6807\u3002 \u6211\u4eec\u628a\u8fd9\u79cd .c \u7684\u6587\u4ef6\uff08\u6216\u662f\u76ee\u6807\uff09\uff0c\u53eb\u505a\u4e2d\u95f4\u76ee\u6807\u3002\u4e0d\u7ba1\u600e\u4e48\u6837\uff0cmake\u4f1a\u52aa\u529b\u81ea\u52a8\u63a8\u5bfc\u751f\u6210\u76ee\u6807\u7684\u4e00\u5207\u65b9\u6cd5\uff0c\u4e0d\u7ba1\u4e2d\u95f4\u76ee\u6807\u6709\u591a\u5c11\uff0c\u5176\u90fd\u4f1a\u6267\u7740\u5730\u628a\u6240\u6709\u7684\u9690\u542b\u89c4\u5219\u548c\u4f60\u4e66\u5199\u7684\u89c4\u5219\u5168\u90e8\u5408\u8d77\u6765\u5206\u6790\uff0c\u52aa\u529b\u8fbe\u5230\u76ee\u6807\uff0c\u6240\u4ee5\uff0c\u6709\u4e9b\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u8ba9\u4f60\u89c9\u5f97\u5947\u602a\uff0c\u600e\u4e48\u6211\u7684\u76ee\u6807\u4f1a\u8fd9\u6837\u751f\u6210\uff1f\u600e\u4e48\u6211\u7684 makefile\u53d1\u75af\u4e86\uff1f \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u4e2d\u95f4\u76ee\u6807\uff0c\u5b83\u548c\u4e00\u822c\u7684\u76ee\u6807\u6709\u4e24\u4e2a\u5730\u65b9\u6240\u4e0d\u540c\uff1a\u7b2c\u4e00\u4e2a\u4e0d\u540c\u662f\u9664\u975e\u4e2d\u95f4\u7684\u76ee\u6807\u4e0d\u5b58\u5728\uff0c\u624d\u4f1a\u5f15\u53d1\u4e2d\u95f4\u89c4\u5219\u3002\u7b2c\u4e8c\u4e2a\u4e0d\u540c\u7684\u662f\uff0c\u53ea\u8981\u76ee\u6807\u6210\u529f\u4ea7\u751f\uff0c\u90a3\u4e48\uff0c\u4ea7\u751f\u6700\u7ec8\u76ee\u6807\u8fc7\u7a0b\u4e2d\uff0c\u6240\u4ea7\u751f\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u4f1a\u88ab\u4ee5 rm -f \u5220\u9664\u3002 \u901a\u5e38\uff0c\u4e00\u4e2a\u88abmakefile\u6307\u5b9a\u6210\u76ee\u6807\u6216\u662f\u4f9d\u8d56\u76ee\u6807\u7684\u6587\u4ef6\u4e0d\u80fd\u88ab\u5f53\u4f5c\u4e2d\u4ecb\u3002\u7136\u800c\uff0c\u4f60\u53ef\u4ee5\u660e\u663e\u5730\u8bf4\u660e\u4e00\u4e2a\u6587\u4ef6\u6216\u662f\u76ee\u6807\u662f\u4e2d\u4ecb\u76ee\u6807\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4f2a\u76ee\u6807 .INTERMEDIATE \u6765\u5f3a\u5236\u58f0\u660e\u3002\uff08\u5982\uff1a .INTERMEDIATE : mid \uff09 \u4f60\u4e5f\u53ef\u4ee5\u963b\u6b62make\u81ea\u52a8\u5220\u9664\u4e2d\u95f4\u76ee\u6807\uff0c\u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4f2a\u76ee\u6807 .SECONDARY \u6765\u5f3a\u5236\u58f0\u660e\uff08\u5982\uff1a .SECONDARY : sec \uff09\u3002\u4f60\u8fd8\u53ef\u4ee5\u628a\u4f60\u7684\u76ee\u6807\uff0c\u4ee5\u6a21\u5f0f\u7684\u65b9\u5f0f\u6765\u6307\u5b9a\uff08\u5982\uff1a %.o \uff09\u6210\u4f2a\u76ee\u6807 .PRECIOUS \u7684\u4f9d\u8d56\u76ee\u6807\uff0c\u4ee5\u4fdd\u5b58\u88ab\u9690\u542b\u89c4\u5219\u6240\u751f\u6210\u7684\u4e2d\u95f4\u6587\u4ef6\u3002 \u5728\u201c\u9690\u542b\u89c4\u5219\u94fe\u201d\u4e2d\uff0c\u7981\u6b62\u540c\u4e00\u4e2a\u76ee\u6807\u51fa\u73b0\u4e24\u6b21\u6216\u4e24\u6b21\u4ee5\u4e0a\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5c31\u53ef\u9632\u6b62\u5728make\u81ea\u52a8\u63a8\u5bfc\u65f6\u51fa\u73b0\u65e0\u9650\u9012\u5f52\u7684\u60c5\u51b5\u3002 Make\u4f1a\u4f18\u5316\u4e00\u4e9b\u7279\u6b8a\u7684\u9690\u542b\u89c4\u5219\uff0c\u800c\u4e0d\u751f\u6210\u4e2d\u95f4\u6587\u4ef6\u3002\u5982\uff0c\u4ece\u6587\u4ef6 foo.c \u751f\u6210\u76ee\u6807\u7a0b\u5e8f foo \uff0c\u6309\u9053\u7406\uff0cmake\u4f1a\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 foo.o \uff0c\u7136\u540e\u94fe\u63a5\u6210 foo \uff0c\u4f46\u5728\u5b9e\u9645\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e00\u52a8\u4f5c\u53ef\u4ee5\u88ab\u4e00\u6761 cc \u7684\u547d\u4ee4\u5b8c\u6210\uff08 cc \u2013o foo foo.c \uff09\uff0c\u4e8e\u662f\u4f18\u5316\u8fc7\u7684\u89c4\u5219\u5c31\u4e0d\u4f1a\u751f\u6210\u4e2d\u95f4\u6587\u4ef6\u3002 \u5b9a\u4e49\u6a21\u5f0f\u89c4\u5219 \u4f60\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u89c4\u5219\u6765\u5b9a\u4e49\u4e00\u4e2a\u9690\u542b\u89c4\u5219\u3002\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\u5c31\u597d\u50cf\u4e00\u4e2a\u4e00\u822c\u7684\u89c4\u5219\uff0c\u53ea\u662f\u5728\u89c4\u5219\u4e2d\uff0c\u76ee\u6807\u7684\u5b9a\u4e49\u9700\u8981\u6709 % \u5b57\u7b26\u3002 % \u7684\u610f\u601d\u662f\u8868\u793a\u4e00\u4e2a\u6216\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\u3002\u5728\u4f9d\u8d56\u76ee\u6807\u4e2d\u540c\u6837\u53ef\u4ee5\u4f7f\u7528 % \uff0c\u53ea\u662f\u4f9d\u8d56\u76ee\u6807\u4e2d\u7684 % \u7684\u53d6\u503c\uff0c\u53d6\u51b3\u4e8e\u5176\u76ee\u6807\u3002 \u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c % \u7684\u5c55\u5f00\u53d1\u751f\u5728\u53d8\u91cf\u548c\u51fd\u6570\u7684\u5c55\u5f00\u4e4b\u540e\uff0c\u53d8\u91cf\u548c\u51fd\u6570\u7684\u5c55\u5f00\u53d1\u751f\u5728make\u8f7d\u5165Makefile\u65f6\uff0c\u800c\u6a21\u5f0f\u89c4\u5219\u4e2d\u7684 % \u5219\u53d1\u751f\u5728\u8fd0\u884c\u65f6\u3002 \u6a21\u5f0f\u89c4\u5219\u4ecb\u7ecd \u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u81f3\u5c11\u5728\u89c4\u5219\u7684\u76ee\u6807\u5b9a\u4e49\u4e2d\u8981\u5305\u542b % \uff0c\u5426\u5219\uff0c\u5c31\u662f\u4e00\u822c\u7684\u89c4\u5219\u3002\u76ee\u6807\u4e2d\u7684 % \u5b9a\u4e49\u8868\u793a\u5bf9\u6587\u4ef6\u540d\u7684\u5339\u914d\uff0c % \u8868\u793a\u957f\u5ea6\u4efb\u610f\u7684\u975e\u7a7a\u5b57\u7b26\u4e32\u3002\u4f8b\u5982\uff1a %.c \u8868\u793a\u4ee5 .c \u7ed3\u5c3e\u7684\u6587\u4ef6\u540d\uff08\u6587\u4ef6\u540d\u7684\u957f\u5ea6\u81f3\u5c11\u4e3a3\uff09\uff0c\u800c s.%.c \u5219\u8868\u793a\u4ee5 s. \u5f00\u5934\uff0c .c \u7ed3\u5c3e\u7684\u6587\u4ef6\u540d\uff08\u6587\u4ef6\u540d\u7684\u957f\u5ea6\u81f3\u5c11\u4e3a5\uff09\u3002 \u5982\u679c % \u5b9a\u4e49\u5728\u76ee\u6807\u4e2d\uff0c\u90a3\u4e48\uff0c\u76ee\u6807\u4e2d\u7684 % \u7684\u503c\u51b3\u5b9a\u4e86\u4f9d\u8d56\u76ee\u6807\u4e2d\u7684 % \u7684\u503c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u76ee\u6807\u4e2d\u7684\u6a21\u5f0f\u7684 % \u51b3\u5b9a\u4e86\u4f9d\u8d56\u76ee\u6807\u4e2d % \u7684\u6837\u5b50\u3002\u4f8b\u5982\u6709\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\u5982\u4e0b\uff1a .. code:: makefile %.o : %.c ; lt;command ...... gt;; \u5176\u542b\u4e49\u662f\uff0c\u6307\u51fa\u4e86\u600e\u4e48\u4ece\u6240\u6709\u7684 .c \u6587\u4ef6\u751f\u6210\u76f8\u5e94\u7684 .o \u6587\u4ef6\u7684\u89c4\u5219\u3002\u5982\u679c\u8981\u751f\u6210\u7684\u76ee\u6807\u662f a.o b.o \uff0c\u90a3\u4e48 %c \u5c31\u662f a.c b.c \u3002 \u4e00\u65e6\u4f9d\u8d56\u76ee\u6807\u4e2d\u7684 % \u6a21\u5f0f\u88ab\u786e\u5b9a\uff0c\u90a3\u4e48\uff0cmake\u4f1a\u88ab\u8981\u6c42\u53bb\u5339\u914d\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u540d\uff0c\u4e00\u65e6\u627e\u5230\uff0cmake\u5c31\u4f1a\u89c4\u5219\u4e0b\u7684\u547d\u4ee4\uff0c\u6240\u4ee5\uff0c\u5728\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u76ee\u6807\u53ef\u80fd\u4f1a\u662f\u591a\u4e2a\u7684\uff0c\u5982\u679c\u6709\u6a21\u5f0f\u5339\u914d\u51fa\u591a\u4e2a\u76ee\u6807\uff0cmake\u5c31\u4f1a\u4ea7\u751f\u6240\u6709\u7684\u6a21\u5f0f\u76ee\u6807\uff0c\u6b64\u65f6\uff0cmake\u5173\u5fc3\u7684\u662f\u4f9d\u8d56\u7684\u6587\u4ef6\u540d\u548c\u751f\u6210\u76ee\u6807\u7684\u547d\u4ee4\u8fd9\u4e24\u4ef6\u4e8b\u3002 \u6a21\u5f0f\u89c4\u5219\u793a\u4f8b \u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u8868\u793a\u4e86,\u628a\u6240\u6709\u7684 .c \u6587\u4ef6\u90fd\u7f16\u8bd1\u6210 .o \u6587\u4ef6. .. code:: makefile %.o : %.c $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) $ lt ; - o $ @ \u5176\u4e2d\uff0c $@ \u8868\u793a\u6240\u6709\u7684\u76ee\u6807\u7684\u6328\u4e2a\u503c\uff0c $ \u8868\u793a\u4e86\u6240\u6709\u4f9d\u8d56\u76ee\u6807\u7684\u6328\u4e2a\u503c\u3002\u8fd9\u4e9b\u5947\u602a\u7684\u53d8\u91cf\u6211\u4eec\u53eb\u201c\u81ea\u52a8\u5316\u53d8\u91cf\u201d\uff0c\u540e\u9762\u4f1a\u8be6\u7ec6\u8bb2\u8ff0\u3002 \u4e0b\u9762\u7684\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6709\u4e24\u4e2a\u76ee\u6807\u662f\u6a21\u5f0f\u7684\uff1a .. code:: makefile %.tab.c %.tab.h: %.y bison - d $ lt ; \u8fd9\u6761\u89c4\u5219\u544a\u8bc9make\u628a\u6240\u6709\u7684 .y \u6587\u4ef6\u90fd\u4ee5 bison -d n .y \u6267\u884c\uff0c\u7136\u540e\u751f\u6210 n .tab.c \u548c n .tab.h \u6587\u4ef6\u3002\uff08\u5176\u4e2d\uff0c n \u8868\u793a\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26\u4e32\uff09\u3002\u5982\u679c\u6211\u4eec\u7684\u6267\u884c\u7a0b\u5e8f foo \u4f9d\u8d56\u4e8e\u6587\u4ef6 parse.tab.o \u548c scan.o \uff0c\u5e76\u4e14\u6587\u4ef6 scan.o \u4f9d\u8d56\u4e8e\u6587\u4ef6 parse.tab.h \uff0c\u5982\u679c parse.y \u6587\u4ef6\u88ab\u66f4\u65b0\u4e86\uff0c\u90a3\u4e48\u6839\u636e\u4e0a\u8ff0\u7684\u89c4\u5219\uff0c bison -d parse.y \u5c31\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\uff0c\u4e8e\u662f\uff0c parse.tab.o \u548c scan.o \u7684\u4f9d\u8d56\u6587\u4ef6\u5c31\u9f50\u4e86\u3002\uff08\u5047\u8bbe\uff0c parse.tab.o \u7531 parse.tab.c \u751f\u6210\uff0c\u548c scan.o \u7531 scan.c \u751f\u6210\uff0c\u800c foo \u7531 parse.tab.o \u548c scan.o \u94fe\u63a5\u751f\u6210\uff0c\u800c\u4e14 foo \u548c\u5176 .o \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u4e5f\u5199\u597d\uff0c\u90a3\u4e48\uff0c\u6240\u6709\u7684\u76ee\u6807\u90fd\u4f1a\u5f97\u5230\u6ee1\u8db3\uff09 \u81ea\u52a8\u5316\u53d8\u91cf \u5728\u4e0a\u8ff0\u7684\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u76ee\u6807\u548c\u4f9d\u8d56\u6587\u4ef6\u90fd\u662f\u4e00\u7cfb\u4f8b\u7684\u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u4e66\u5199\u4e00\u4e2a\u547d\u4ee4\u6765\u5b8c\u6210\u4ece\u4e0d\u540c\u7684\u4f9d\u8d56\u6587\u4ef6\u751f\u6210\u76f8\u5e94\u7684\u76ee\u6807\uff1f\u56e0\u4e3a\u5728\u6bcf\u4e00\u6b21\u7684\u5bf9\u6a21\u5f0f\u89c4\u5219\u7684\u89e3\u6790\u65f6\uff0c\u90fd\u4f1a\u662f\u4e0d\u540c\u7684\u76ee\u6807\u548c\u4f9d\u8d56\u6587\u4ef6\u3002 \u81ea\u52a8\u5316\u53d8\u91cf\u5c31\u662f\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\u3002\u5728\u524d\u9762\uff0c\u6211\u4eec\u5df2\u7ecf\u5bf9\u81ea\u52a8\u5316\u53d8\u91cf\u6709\u6240\u63d0\u6d89\uff0c\u76f8\u4fe1\u4f60\u770b\u5230\u8fd9\u91cc\u5df2\u5bf9\u5b83\u6709\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\u4e86\u3002\u6240\u8c13\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u5c31\u662f\u8fd9\u79cd\u53d8\u91cf\u4f1a\u628a\u6a21\u5f0f\u4e2d\u6240\u5b9a\u4e49\u7684\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u81ea\u52a8\u5730\u6328\u4e2a\u53d6\u51fa\uff0c\u76f4\u81f3\u6240\u6709\u7684\u7b26\u5408\u6a21\u5f0f\u7684\u6587\u4ef6\u90fd\u53d6\u5b8c\u4e86\u3002\u8fd9\u79cd\u81ea\u52a8\u5316\u53d8\u91cf\u53ea\u5e94\u51fa\u73b0\u5728\u89c4\u5219\u7684\u547d\u4ee4\u4e2d\u3002 \u4e0b\u9762\u662f\u6240\u6709\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u53ca\u5176\u8bf4\u660e\uff1a $@ : \u8868\u793a\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u6587\u4ef6\u96c6\u3002\u5728\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u5982\u679c\u6709\u591a\u4e2a\u76ee\u6807\uff0c\u90a3\u4e48\uff0c $@ \u5c31\u662f\u5339\u914d\u4e8e\u76ee\u6807\u4e2d\u6a21\u5f0f\u5b9a\u4e49\u7684\u96c6\u5408\u3002 $% : \u4ec5\u5f53\u76ee\u6807\u662f\u51fd\u6570\u5e93\u6587\u4ef6\u4e2d\uff0c\u8868\u793a\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u6210\u5458\u540d\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u76ee\u6807\u662f foo.a(bar.o) \uff0c\u90a3\u4e48\uff0c $% \u5c31\u662f bar.o \uff0c $@ \u5c31\u662f foo.a \u3002\u5982\u679c\u76ee\u6807\u4e0d\u662f\u51fd\u6570\u5e93\u6587\u4ef6\uff08Unix\u4e0b\u662f .a \uff0cWindows\u4e0b\u662f .lib \uff09\uff0c\u90a3\u4e48\uff0c\u5176\u503c\u4e3a\u7a7a\u3002 $ : \u4f9d\u8d56\u76ee\u6807\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u540d\u5b57\u3002\u5982\u679c\u4f9d\u8d56\u76ee\u6807\u662f\u4ee5\u6a21\u5f0f\uff08\u5373 % \uff09\u5b9a\u4e49\u7684\uff0c\u90a3\u4e48 $ \u5c06\u662f\u7b26\u5408\u6a21\u5f0f\u7684\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u96c6\u3002\u6ce8\u610f\uff0c\u5176\u662f\u4e00\u4e2a\u4e00\u4e2a\u53d6\u51fa\u6765\u7684\u3002 $? : \u6240\u6709\u6bd4\u76ee\u6807\u65b0\u7684\u4f9d\u8d56\u76ee\u6807\u7684\u96c6\u5408\u3002\u4ee5\u7a7a\u683c\u5206\u9694\u3002 $^ : \u6240\u6709\u7684\u4f9d\u8d56\u76ee\u6807\u7684\u96c6\u5408\u3002\u4ee5\u7a7a\u683c\u5206\u9694\u3002\u5982\u679c\u5728\u4f9d\u8d56\u76ee\u6807\u4e2d\u6709\u591a\u4e2a\u91cd\u590d\u7684\uff0c\u90a3\u4e2a\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u53bb\u9664\u91cd\u590d\u7684\u4f9d\u8d56\u76ee\u6807\uff0c\u53ea\u4fdd\u7559\u4e00\u4efd\u3002 $+ : \u8fd9\u4e2a\u53d8\u91cf\u5f88\u50cf $^ \uff0c\u4e5f\u662f\u6240\u6709\u4f9d\u8d56\u76ee\u6807\u7684\u96c6\u5408\u3002\u53ea\u662f\u5b83\u4e0d\u53bb\u9664\u91cd\u590d\u7684\u4f9d\u8d56\u76ee\u6807\u3002 $* : \u8fd9\u4e2a\u53d8\u91cf\u8868\u793a\u76ee\u6807\u6a21\u5f0f\u4e2d % \u53ca\u5176\u4e4b\u524d\u7684\u90e8\u5206\u3002\u5982\u679c\u76ee\u6807\u662f dir/a.foo.b \uff0c\u5e76\u4e14\u76ee\u6807\u7684\u6a21\u5f0f\u662f a.%.b \uff0c\u90a3\u4e48\uff0c $* \u7684\u503c\u5c31\u662f dir/a.foo \u3002\u8fd9\u4e2a\u53d8\u91cf\u5bf9\u4e8e\u6784\u9020\u6709\u5173\u8054\u7684\u6587\u4ef6\u540d\u662f\u6bd4\u8f83\u6709\u8f83\u3002\u5982\u679c\u76ee\u6807\u4e2d\u6ca1\u6709\u6a21\u5f0f\u7684\u5b9a\u4e49\uff0c\u90a3\u4e48 $* \u4e5f\u5c31\u4e0d\u80fd\u88ab\u63a8\u5bfc\u51fa\uff0c\u4f46\u662f\uff0c\u5982\u679c\u76ee\u6807\u6587\u4ef6\u7684\u540e\u7f00\u662fmake\u6240\u8bc6\u522b\u7684\uff0c\u90a3\u4e48 $* \u5c31\u662f\u9664\u4e86\u540e\u7f00\u7684\u90a3\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff1a\u5982\u679c\u76ee\u6807\u662f foo.c \uff0c\u56e0\u4e3a .c \u662fmake\u6240\u80fd\u8bc6\u522b\u7684\u540e\u7f00\u540d\uff0c\u6240\u4ee5\uff0c $* \u7684\u503c\u5c31\u662f foo \u3002\u8fd9\u4e2a\u7279\u6027\u662fGNU make\u7684\uff0c\u5f88\u6709\u53ef\u80fd\u4e0d\u517c\u5bb9\u4e8e\u5176\u5b83\u7248\u672c\u7684make\uff0c\u6240\u4ee5\uff0c\u4f60\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 $* \uff0c\u9664\u975e\u662f\u5728\u9690\u542b\u89c4\u5219\u6216\u662f\u9759\u6001\u6a21\u5f0f\u4e2d\u3002\u5982\u679c\u76ee\u6807\u4e2d\u7684\u540e\u7f00\u662fmake\u6240\u4e0d\u80fd\u8bc6\u522b\u7684\uff0c\u90a3\u4e48 $* \u5c31\u662f\u7a7a\u503c\u3002 \u5f53\u4f60\u5e0c\u671b\u53ea\u5bf9\u66f4\u65b0\u8fc7\u7684\u4f9d\u8d56\u6587\u4ef6\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c $? \u5728\u663e\u5f0f\u89c4\u5219\u4e2d\u5f88\u6709\u7528\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a\u51fd\u6570\u5e93\u6587\u4ef6\u53eb lib \uff0c\u5176\u7531\u5176\u5b83\u51e0\u4e2aobject\u6587\u4ef6\u66f4\u65b0\u3002\u90a3\u4e48\u628aobject\u6587\u4ef6\u6253\u5305\u7684\u6bd4\u8f83\u6709\u6548\u7387\u7684Makefile\u89c4\u5219\u662f\uff1a .. code:: makefile lib : foo . o bar . o lose . o win . o ar r lib $ ? \u5728\u4e0a\u8ff0\u6240\u5217\u51fa\u6765\u7684\u81ea\u52a8\u91cf\u53d8\u91cf\u4e2d\u3002\u56db\u4e2a\u53d8\u91cf\uff08 $@ \u3001 $ \u3001 $% \u3001 $* \uff09\u5728\u6269\u5c55\u65f6\u53ea\u4f1a\u6709\u4e00\u4e2a\u6587\u4ef6\uff0c\u800c\u53e6\u4e09\u4e2a\u7684\u503c\u662f\u4e00\u4e2a\u6587\u4ef6\u5217\u8868\u3002\u8fd9\u4e03\u4e2a\u81ea\u52a8\u5316\u53d8\u91cf\u8fd8\u53ef\u4ee5\u53d6\u5f97\u6587\u4ef6\u7684\u76ee\u5f55\u540d\u6216\u662f\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u7b26\u5408\u6a21\u5f0f\u7684\u6587\u4ef6\u540d\uff0c\u53ea\u9700\u8981\u642d\u914d\u4e0a D \u6216 F \u5b57\u6837\u3002\u8fd9\u662fGNU make\u4e2d\u8001\u7248\u672c\u7684\u7279\u6027\uff0c\u5728\u65b0\u7248\u672c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u51fd\u6570 dir \u6216 notdir \u5c31\u53ef\u4ee5\u505a\u5230\u4e86\u3002 D \u7684\u542b\u4e49\u5c31\u662fDirectory\uff0c\u5c31\u662f\u76ee\u5f55\uff0c F \u7684\u542b\u4e49\u5c31\u662fFile\uff0c\u5c31\u662f\u6587\u4ef6\u3002 \u4e0b\u9762\u662f\u5bf9\u4e8e\u4e0a\u9762\u7684\u4e03\u4e2a\u53d8\u91cf\u5206\u522b\u52a0\u4e0a D \u6216\u662f F \u7684\u542b\u4e49\uff1a $(@D) \u8868\u793a $@ \u7684\u76ee\u5f55\u90e8\u5206\uff08\u4e0d\u4ee5\u659c\u6760\u4f5c\u4e3a\u7ed3\u5c3e\uff09\uff0c\u5982\u679c $@ \u503c\u662f dir/foo.o \uff0c\u90a3\u4e48 $(@D) \u5c31\u662f dir \uff0c\u800c\u5982\u679c $@ \u4e2d\u6ca1\u6709\u5305\u542b\u659c\u6760\u7684\u8bdd\uff0c\u5176\u503c\u5c31\u662f . \uff08\u5f53\u524d\u76ee\u5f55\uff09\u3002 $(@F) \u8868\u793a $@ \u7684\u6587\u4ef6\u90e8\u5206\uff0c\u5982\u679c $@ \u503c\u662f dir/foo.o \uff0c\u90a3\u4e48 $(@F) \u5c31\u662f foo.o \uff0c $(@F) \u76f8\u5f53\u4e8e\u51fd\u6570 $(notdir $@) \u3002 $(*D) , $(*F) \u548c\u4e0a\u9762\u6240\u8ff0\u7684\u540c\u7406\uff0c\u4e5f\u662f\u53d6\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\u5bf9\u4e8e\u4e0a\u9762\u7684\u90a3\u4e2a\u4f8b\u5b50\uff0c $(*D) \u8fd4\u56de dir \uff0c\u800c $(*F) \u8fd4\u56de foo $(%D) , $(%F) \u5206\u522b\u8868\u793a\u4e86\u51fd\u6570\u5305\u6587\u4ef6\u6210\u5458\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\u8fd9\u5bf9\u4e8e\u5f62\u540c archive(member) \u5f62\u5f0f\u7684\u76ee\u6807\u4e2d\u7684 member \u4e2d\u5305\u542b\u4e86\u4e0d\u540c\u7684\u76ee\u5f55\u5f88\u6709\u7528\u3002 $( D) , $( F) \u5206\u522b\u8868\u793a\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002 $(^D) , $(^F) \u5206\u522b\u8868\u793a\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\uff08\u65e0\u76f8\u540c\u7684\uff09 $(+D) , $(+F) \u5206\u522b\u8868\u793a\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\uff08\u53ef\u4ee5\u6709\u76f8\u540c\u7684\uff09 $(?D) , $(?F) \u5206\u522b\u8868\u793a\u88ab\u66f4\u65b0\u7684\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002 \u6700\u540e\u60f3\u63d0\u9192\u4e00\u4e0b\u7684\u662f\uff0c\u5bf9\u4e8e $ \uff0c\u4e3a\u4e86\u907f\u514d\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u6211\u4eec\u6700\u597d\u7ed9$\u540e\u9762\u7684\u90a3\u4e2a\u7279\u5b9a\u5b57\u7b26\u90fd\u52a0\u4e0a\u5706\u62ec\u53f7\uff0c\u6bd4\u5982\uff0c $( ) \u5c31\u8981\u6bd4 $ \u8981\u597d\u4e00\u4e9b\u3002 \u8fd8\u5f97\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e9b\u53d8\u91cf\u53ea\u4f7f\u7528\u5728\u89c4\u5219\u7684\u547d\u4ee4\u4e2d\uff0c\u800c\u4e14\u4e00\u822c\u90fd\u662f\u201c\u663e\u5f0f\u89c4\u5219\u201d\u548c\u201c\u9759\u6001\u6a21\u5f0f\u89c4\u5219\u201d\uff08\u53c2\u89c1\u524d\u9762\u201c\u4e66\u5199\u89c4\u5219\u201d\u4e00\u7ae0\uff09\u3002\u5176\u5728\u9690\u542b\u89c4\u5219\u4e2d\u5e76\u6ca1\u6709\u610f\u4e49\u3002 \u6a21\u5f0f\u7684\u5339\u914d \u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u4e2a\u76ee\u6807\u7684\u6a21\u5f0f\u6709\u4e00\u4e2a\u6709\u524d\u7f00\u6216\u662f\u540e\u7f00\u7684 % \uff0c\u6216\u662f\u6ca1\u6709\u524d\u540e\u7f00\uff0c\u76f4\u63a5\u5c31\u662f\u4e00\u4e2a % \u3002\u56e0\u4e3a % \u4ee3\u8868\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u5728\u5b9a\u4e49\u597d\u4e86\u7684\u6a21\u5f0f\u4e2d\uff0c\u6211\u4eec\u628a % \u6240\u5339\u914d\u7684\u5185\u5bb9\u53eb\u505a\u201c\u830e\u201d\uff0c\u4f8b\u5982 %.c \u6240\u5339\u914d\u7684\u6587\u4ef6\u201ctest.c\u201d\u4e2d\u201ctest\u201d\u5c31\u662f\u201c\u830e\u201d\u3002\u56e0\u4e3a\u5728\u76ee\u6807\u548c\u4f9d\u8d56\u76ee\u6807\u4e2d\u540c\u65f6\u6709 % \u65f6\uff0c\u4f9d\u8d56\u76ee\u6807\u7684\u201c\u830e\u201d\u4f1a\u4f20\u7ed9\u76ee\u6807\uff0c\u5f53\u505a\u76ee\u6807\u4e2d\u7684\u201c\u830e\u201d\u3002 \u5f53\u4e00\u4e2a\u6a21\u5f0f\u5339\u914d\u5305\u542b\u6709\u659c\u6760\uff08\u5b9e\u9645\u4e5f\u4e0d\u7ecf\u5e38\u5305\u542b\uff09\u7684\u6587\u4ef6\u65f6\uff0c\u90a3\u4e48\u5728\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u65f6\uff0c\u76ee\u5f55\u90e8\u5206\u4f1a\u9996\u5148\u88ab\u79fb\u5f00\uff0c\u7136\u540e\u8fdb\u884c\u5339\u914d\uff0c\u6210\u529f\u540e\uff0c\u518d\u628a\u76ee\u5f55\u52a0\u56de\u53bb\u3002\u5728\u8fdb\u884c\u201c\u830e\u201d\u7684\u4f20\u9012\u65f6\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u8fd9\u4e2a\u6b65\u9aa4\u3002\u4f8b\u5982\u6709\u4e00\u4e2a\u6a21\u5f0f e%t \uff0c\u6587\u4ef6 src/eat \u5339\u914d\u4e8e\u8be5\u6a21\u5f0f\uff0c\u4e8e\u662f src/a \u5c31\u662f\u5176\u201c\u830e\u201d\uff0c\u5982\u679c\u8fd9\u4e2a\u6a21\u5f0f\u5b9a\u4e49\u5728\u4f9d\u8d56\u76ee\u6807\u4e2d\uff0c\u800c\u88ab\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u6a21\u5f0f\u7684\u76ee\u6807\u4e2d\u53c8\u6709\u4e2a\u6a21\u5f0f c%r \uff0c\u90a3\u4e48\uff0c\u76ee\u6807\u5c31\u662f src/car \u3002\uff08\u201c\u830e\u201d\u88ab\u4f20\u9012\uff09 \u91cd\u8f7d\u5185\u5efa\u9690\u542b\u89c4\u5219 \u4f60\u53ef\u4ee5\u91cd\u8f7d\u5185\u5efa\u7684\u9690\u542b\u89c4\u5219\uff08\u6216\u662f\u5b9a\u4e49\u4e00\u4e2a\u5168\u65b0\u7684\uff09\uff0c\u4f8b\u5982\u4f60\u53ef\u4ee5\u91cd\u65b0\u6784\u9020\u548c\u5185\u5efa\u9690\u542b\u89c4\u5219\u4e0d\u540c\u7684\u547d\u4ee4\uff0c\u5982\uff1a .. code:: makefile %.o : %.c $ ( CC ) - c $ ( CPPFLAGS ) $ ( CFLAGS ) - D $ ( date ) \u4f60\u53ef\u4ee5\u53d6\u6d88\u5185\u5efa\u7684\u9690\u542b\u89c4\u5219\uff0c\u53ea\u8981\u4e0d\u5728\u540e\u9762\u5199\u547d\u4ee4\u5c31\u884c\u3002\u5982\uff1a .. code:: makefile %.o : %.s \u540c\u6837\uff0c\u4f60\u4e5f\u53ef\u4ee5\u91cd\u65b0\u5b9a\u4e49\u4e00\u4e2a\u5168\u65b0\u7684\u9690\u542b\u89c4\u5219\uff0c\u5176\u5728\u9690\u542b\u89c4\u5219\u4e2d\u7684\u4f4d\u7f6e\u53d6\u51b3\u4e8e\u4f60\u5728\u54ea\u91cc\u5199\u4e0b\u8fd9\u4e2a\u89c4\u5219\u3002\u671d\u524d\u7684\u4f4d\u7f6e\u5c31\u9760\u524d\u3002 \u8001\u5f0f\u98ce\u683c\u7684\u201c\u540e\u7f00\u89c4\u5219\u201d \u540e\u7f00\u89c4\u5219\u662f\u4e00\u4e2a\u6bd4\u8f83\u8001\u5f0f\u7684\u5b9a\u4e49\u9690\u542b\u89c4\u5219\u7684\u65b9\u6cd5\u3002\u540e\u7f00\u89c4\u5219\u4f1a\u88ab\u6a21\u5f0f\u89c4\u5219\u9010\u6b65\u5730\u53d6\u4ee3\u3002\u56e0\u4e3a\u6a21\u5f0f\u89c4\u5219\u66f4\u5f3a\u66f4\u6e05\u6670\u3002\u4e3a\u4e86\u548c\u8001\u7248\u672c\u7684Makefile\u517c\u5bb9\uff0cGNU make\u540c\u6837\u517c\u5bb9\u4e8e\u8fd9\u4e9b\u4e1c\u897f\u3002\u540e\u7f00\u89c4\u5219\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u201c\u53cc\u540e\u7f00\u201d\u548c\u201c\u5355\u540e\u7f00\u201d\u3002 \u53cc\u540e\u7f00\u89c4\u5219\u5b9a\u4e49\u4e86\u4e00\u5bf9\u540e\u7f00\uff1a\u76ee\u6807\u6587\u4ef6\u7684\u540e\u7f00\u548c\u4f9d\u8d56\u76ee\u6807\uff08\u6e90\u6587\u4ef6\uff09\u7684\u540e\u7f00\u3002\u5982 .c.o \u76f8\u5f53\u4e8e %o : %c \u3002\u5355\u540e\u7f00\u89c4\u5219\u53ea\u5b9a\u4e49\u4e00\u4e2a\u540e\u7f00\uff0c\u4e5f\u5c31\u662f\u6e90\u6587\u4ef6\u7684\u540e\u7f00\u3002\u5982 .c \u76f8\u5f53\u4e8e % : %.c \u3002 \u540e\u7f00\u89c4\u5219\u4e2d\u6240\u5b9a\u4e49\u7684\u540e\u7f00\u5e94\u8be5\u662fmake\u6240\u8ba4\u8bc6\u7684\uff0c\u5982\u679c\u4e00\u4e2a\u540e\u7f00\u662fmake\u6240\u8ba4\u8bc6\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u89c4\u5219\u5c31\u662f\u5355\u540e\u7f00\u89c4\u5219\uff0c\u800c\u5982\u679c\u4e24\u4e2a\u8fde\u5728\u4e00\u8d77\u7684\u540e\u7f00\u90fd\u88abmake\u6240\u8ba4\u8bc6\uff0c\u90a3\u5c31\u662f\u53cc\u540e\u7f00\u89c4\u5219\u3002\u4f8b\u5982\uff1a .c \u548c .o \u90fd\u662fmake\u6240\u77e5\u9053\u3002\u56e0\u800c\uff0c\u5982\u679c\u4f60\u5b9a\u4e49\u4e86\u4e00\u4e2a\u89c4\u5219\u662f .c.o \u90a3\u4e48\u5176\u5c31\u662f\u53cc\u540e\u7f00\u89c4\u5219\uff0c\u610f\u4e49\u5c31\u662f .c \u662f\u6e90\u6587\u4ef6\u7684\u540e\u7f00\uff0c .o \u662f\u76ee\u6807\u6587\u4ef6\u7684\u540e\u7f00\u3002\u5982\u4e0b\u793a\u4f8b\uff1a .. code:: makefile .c.o: $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) - o $@ $ lt ; \u540e\u7f00\u89c4\u5219\u4e0d\u5141\u8bb8\u4efb\u4f55\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u5982\u679c\u6709\u4f9d\u8d56\u6587\u4ef6\u7684\u8bdd\uff0c\u90a3\u5c31\u4e0d\u662f\u540e\u7f00\u89c4\u5219\uff0c\u90a3\u4e9b\u540e\u7f00\u7edf\u7edf\u88ab\u8ba4\u4e3a\u662f\u6587\u4ef6\u540d\uff0c\u5982\uff1a .. code:: makefile .c.o: foo.h $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) - o $@ $ lt ; \u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5c31\u662f\u8bf4\uff0c\u6587\u4ef6 .c.o \u4f9d\u8d56\u4e8e\u6587\u4ef6 foo.h \uff0c\u800c\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u8fd9\u6837\uff1a .. code:: makefile %.o: %.c foo.h $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) - o $ @ $ lt ; \u540e\u7f00\u89c4\u5219\u4e2d\uff0c\u5982\u679c\u6ca1\u6709\u547d\u4ee4\uff0c\u90a3\u662f\u6beb\u65e0\u610f\u4e49\u7684\u3002\u56e0\u4e3a\u4ed6\u4e5f\u4e0d\u4f1a\u79fb\u53bb\u5185\u5efa\u7684\u9690\u542b\u89c4\u5219\u3002 \u800c\u8981\u8ba9make\u77e5\u9053\u4e00\u4e9b\u7279\u5b9a\u7684\u540e\u7f00\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4f2a\u76ee\u6807 .SUFFIXES \u6765\u5b9a\u4e49\u6216\u662f\u5220\u9664\uff0c\u5982\uff1a .. code:: makefile .SUFFIXES: .hack .win \u628a\u540e\u7f00 .hack \u548c .win \u52a0\u5165\u540e\u7f00\u5217\u8868\u4e2d\u7684\u672b\u5c3e\u3002 .. code:: makefile .SUFFIXES: # \u5220\u9664\u9ed8\u8ba4\u7684\u540e\u7f00 .SUFFIXES: .c .o .h # \u5b9a\u4e49\u81ea\u5df1\u7684\u540e\u7f00 \u5148\u6e05\u9664\u9ed8\u8ba4\u540e\u7f00\uff0c\u540e\u5b9a\u4e49\u81ea\u5df1\u7684\u540e\u7f00\u5217\u8868\u3002 make\u7684\u53c2\u6570 -r \u6216 -no-builtin-rules \u4e5f\u4f1a\u4f7f\u7528\u5f97\u9ed8\u8ba4\u7684\u540e\u7f00\u5217\u8868\u4e3a\u7a7a\u3002\u800c\u53d8\u91cf SUFFIXE \u88ab\u7528\u6765\u5b9a\u4e49\u9ed8\u8ba4\u7684\u540e\u7f00\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u7528 .SUFFIXES \u6765\u6539\u53d8\u540e\u7f00\u5217\u8868\uff0c\u4f46\u8bf7\u4e0d\u8981\u6539\u53d8\u53d8\u91cf SUFFIXE \u7684\u503c\u3002 \u9690\u542b\u89c4\u5219\u641c\u7d22\u7b97\u6cd5 \u6bd4\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u76ee\u6807\u53eb T\u3002\u4e0b\u9762\u662f\u641c\u7d22\u76ee\u6807T\u7684\u89c4\u5219\u7684\u7b97\u6cd5\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u6ca1\u6709\u63d0\u5230\u540e\u7f00\u89c4\u5219\uff0c\u539f\u56e0\u662f\uff0c\u6240\u6709\u7684\u540e\u7f00\u89c4\u5219\u5728Makefile\u88ab\u8f7d\u5165\u5185\u5b58\u65f6\uff0c\u4f1a\u88ab\u8f6c\u6362\u6210\u6a21\u5f0f\u89c4\u5219\u3002\u5982\u679c\u76ee\u6807\u662f archive(member) \u7684\u51fd\u6570\u5e93\u6587\u4ef6\u6a21\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b97\u6cd5\u4f1a\u88ab\u8fd0\u884c\u4e24\u6b21\uff0c\u7b2c\u4e00\u6b21\u662f\u627e\u76ee\u6807T\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff0c\u90a3\u4e48\u8fdb\u5165\u7b2c\u4e8c\u6b21\uff0c\u7b2c\u4e8c\u6b21\u4f1a\u628a member \u5f53\u4f5cT\u6765\u641c\u7d22\u3002 \u628aT\u7684\u76ee\u5f55\u90e8\u5206\u5206\u79bb\u51fa\u6765\u3002\u53ebD\uff0c\u800c\u5269\u4f59\u90e8\u5206\u53ebN\u3002\uff08\u5982\uff1a\u5982\u679cT\u662f src/foo.o \uff0c\u90a3\u4e48\uff0cD\u5c31\u662f src/ \uff0cN\u5c31\u662f foo.o \uff09 \u521b\u5efa\u6240\u6709\u5339\u914d\u4e8eT\u6216\u662fN\u7684\u6a21\u5f0f\u89c4\u5219\u5217\u8868\u3002 \u5982\u679c\u5728\u6a21\u5f0f\u89c4\u5219\u5217\u8868\u4e2d\u6709\u5339\u914d\u6240\u6709\u6587\u4ef6\u7684\u6a21\u5f0f\uff0c\u5982 % \uff0c\u90a3\u4e48\u4ece\u5217\u8868\u4e2d\u79fb\u9664\u5176\u5b83\u7684\u6a21\u5f0f\u3002 \u79fb\u9664\u5217\u8868\u4e2d\u6ca1\u6709\u547d\u4ee4\u7684\u89c4\u5219\u3002 \u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5728\u5217\u8868\u4e2d\u7684\u6a21\u5f0f\u89c4\u5219\uff1a \u63a8\u5bfc\u5176\u201c\u830e\u201dS\uff0cS\u5e94\u8be5\u662fT\u6216\u662fN\u5339\u914d\u4e8e\u6a21\u5f0f\u4e2d % \u975e\u7a7a\u7684\u90e8\u5206\u3002 \u8ba1\u7b97\u4f9d\u8d56\u6587\u4ef6\u3002\u628a\u4f9d\u8d56\u6587\u4ef6\u4e2d\u7684 % \u90fd\u66ff\u6362\u6210\u201c\u830e\u201dS\u3002\u5982\u679c\u76ee\u6807\u6a21\u5f0f\u4e2d\u6ca1\u6709\u5305\u542b\u659c\u6846\u5b57\u7b26\uff0c\u800c\u628aD\u52a0\u5728\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6\u7684\u5f00\u5934\u3002 \u6d4b\u8bd5\u662f\u5426\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u90fd\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\u3002\uff08\u5982\u679c\u6709\u4e00\u4e2a\u6587\u4ef6\u88ab\u5b9a\u4e49\u6210\u53e6\u5916\u4e00\u4e2a\u89c4\u5219\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u663e\u5f0f\u89c4\u5219 \u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6587\u4ef6\u5c31\u53eb\u201c\u7406\u5f53\u5b58\u5728\u201d\uff09 \u5982\u679c\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\uff0c\u6216\u662f\u5c31\u6ca1\u6709\u4f9d\u8d56\u6587\u4ef6\u3002\u90a3\u4e48\u8fd9\u6761\u89c4\u5219\u5c06\u88ab\u91c7\u7528\uff0c\u9000\u51fa\u8be5\u7b97\u6cd5\u3002 \u5982\u679c\u7ecf\u8fc7\u7b2c5\u6b65\uff0c\u6ca1\u6709\u6a21\u5f0f\u89c4\u5219\u88ab\u627e\u5230\uff0c\u90a3\u4e48\u5c31\u505a\u66f4\u8fdb\u4e00\u6b65\u7684\u641c\u7d22\u3002\u5bf9\u4e8e\u5b58\u5728\u4e8e\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\uff1a \u5982\u679c\u89c4\u5219\u662f\u7ec8\u6b62\u89c4\u5219\uff0c\u90a3\u5c31\u5ffd\u7565\u5b83\uff0c\u7ee7\u7eed\u4e0b\u4e00\u6761\u6a21\u5f0f\u89c4\u5219\u3002 \u8ba1\u7b97\u4f9d\u8d56\u6587\u4ef6\u3002\uff08\u540c\u7b2c5\u6b65\uff09 \u6d4b\u8bd5\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u662f\u5426\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\u3002 \u5bf9\u4e8e\u4e0d\u5b58\u5728\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u9012\u5f52\u8c03\u7528\u8fd9\u4e2a\u7b97\u6cd5\u67e5\u627e\u4ed6\u662f\u5426\u53ef\u4ee5\u88ab\u9690\u542b\u89c4\u5219\u627e\u5230\u3002 \u5982\u679c\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\uff0c\u6216\u662f\u5c31\u6839\u672c\u6ca1\u6709\u4f9d\u8d56\u6587\u4ef6\u3002\u90a3\u4e48\u8fd9\u6761\u89c4\u5219\u88ab\u91c7\u7528\uff0c\u9000\u51fa\u8be5\u7b97\u6cd5\u3002 \u5982\u679c\u6ca1\u6709\u9690\u542b\u89c4\u5219\u53ef\u4ee5\u4f7f\u7528\uff0c\u67e5\u770b .DEFAULT \u89c4\u5219\uff0c\u5982\u679c\u6709\uff0c\u91c7\u7528\uff0c\u628a .DEFAULT \u7684\u547d\u4ee4\u7ed9T\u4f7f\u7528\u3002 \u4e00\u65e6\u89c4\u5219\u88ab\u627e\u5230\uff0c\u5c31\u4f1a\u6267\u884c\u5176\u76f8\u5f53\u7684\u547d\u4ee4\uff0c\u800c\u6b64\u65f6\uff0c\u6211\u4eec\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u7684\u503c\u624d\u4f1a\u751f\u6210\u3002","title":"\u9690\u542b\u89c4\u5219"},{"location":"makefile/implicit_rules/#_1","text":"\u5982\u679c\u8981\u4f7f\u7528\u9690\u542b\u89c4\u5219\u751f\u6210\u4f60\u9700\u8981\u7684\u76ee\u6807\uff0c\u4f60\u6240\u9700\u8981\u505a\u7684\u5c31\u662f\u4e0d\u8981\u5199\u51fa\u8fd9\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u3002\u90a3\u4e48\uff0cmake\u4f1a\u8bd5\u56fe\u53bb\u81ea\u52a8\u63a8\u5bfc\u4ea7\u751f\u8fd9\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u548c\u547d\u4ee4\uff0c\u5982\u679c make\u53ef\u4ee5\u81ea\u52a8\u63a8\u5bfc\u751f\u6210\u8fd9\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u548c\u547d\u4ee4\uff0c\u90a3\u4e48\u8fd9\u4e2a\u884c\u4e3a\u5c31\u662f\u9690\u542b\u89c4\u5219\u7684\u81ea\u52a8\u63a8\u5bfc\u3002\u5f53\u7136\uff0c\u9690\u542b\u89c4\u5219\u662fmake\u4e8b\u5148\u7ea6\u5b9a\u597d\u7684\u4e00\u4e9b\u4e1c\u897f\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e0b\u9762\u7684\u4e00\u4e2aMakefile\uff1a .. code:: makefile foo : foo . o bar . o cc \u2013 o foo foo . o bar . o $ ( CFLAGS ) $ ( LDFLAGS ) \u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\uff0c\u8fd9\u4e2aMakefile\u4e2d\u5e76\u6ca1\u6709\u5199\u4e0b\u5982\u4f55\u751f\u6210 foo.o \u548c bar.o \u8fd9\u4e24\u76ee\u6807\u7684\u89c4\u5219\u548c\u547d\u4ee4\u3002\u56e0\u4e3amake\u7684\u201c\u9690\u542b\u89c4\u5219\u201d\u529f\u80fd\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u81ea\u52a8\u53bb\u63a8\u5bfc\u8fd9\u4e24\u4e2a\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u548c\u751f\u6210\u547d\u4ee4\u3002 make\u4f1a\u5728\u81ea\u5df1\u7684\u201c\u9690\u542b\u89c4\u5219\u201d\u5e93\u4e2d\u5bfb\u627e\u53ef\u4ee5\u7528\u7684\u89c4\u5219\uff0c\u5982\u679c\u627e\u5230\uff0c\u90a3\u4e48\u5c31\u4f1a\u4f7f\u7528\u3002\u5982\u679c\u627e\u4e0d\u5230\uff0c\u90a3\u4e48\u5c31\u4f1a\u62a5\u9519\u3002\u5728\u4e0a\u9762\u7684\u90a3\u4e2a\u4f8b\u5b50\u4e2d\uff0cmake\u8c03\u7528\u7684\u9690\u542b\u89c4\u5219\u662f\uff0c\u628a .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u6587\u4ef6\u7f6e\u6210 .c \uff0c\u5e76\u4f7f\u7528C\u7684\u7f16\u8bd1\u547d\u4ee4 cc \u2013c $(CFLAGS) foo.c \u6765\u751f\u6210 foo.o \u7684\u76ee\u6807\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5b8c\u5168\u6ca1\u6709\u5fc5\u8981\u5199\u4e0b\u4e0b\u9762\u7684\u4e24\u6761\u89c4\u5219\uff1a .. code:: makefile foo.o : foo . c cc \u2013c foo.c $( CFLAGS ) bar.o : bar . c cc \u2013c bar.c $( CFLAGS ) \u56e0\u4e3a\uff0c\u8fd9\u5df2\u7ecf\u662f\u201c\u7ea6\u5b9a\u201d\u597d\u4e86\u7684\u4e8b\u4e86\uff0cmake\u548c\u6211\u4eec\u7ea6\u5b9a\u597d\u4e86\u7528C\u7f16\u8bd1\u5668 cc \u751f\u6210 .o \u6587\u4ef6\u7684\u89c4\u5219\uff0c\u8fd9\u5c31\u662f\u9690\u542b\u89c4\u5219\u3002 \u5f53\u7136\uff0c\u5982\u679c\u6211\u4eec\u4e3a .o \u6587\u4ef6\u4e66\u5199\u4e86\u81ea\u5df1\u7684\u89c4\u5219\uff0c\u90a3\u4e48make\u5c31\u4e0d\u4f1a\u81ea\u52a8\u63a8\u5bfc\u5e76\u8c03\u7528\u9690\u542b\u89c4\u5219\uff0c\u5b83\u4f1a\u6309\u7167\u6211\u4eec\u5199\u597d\u7684\u89c4\u5219\u5fe0\u5b9e\u5730\u6267\u884c\u3002 \u8fd8\u6709\uff0c\u5728make\u7684\u201c\u9690\u542b\u89c4\u5219\u5e93\u201d\u4e2d\uff0c\u6bcf\u4e00\u6761\u9690\u542b\u89c4\u5219\u90fd\u5728\u5e93\u4e2d\u6709\u5176\u987a\u5e8f\uff0c\u8d8a\u9760\u524d\u7684\u5219\u662f\u8d8a\u88ab\u7ecf\u5e38\u4f7f\u7528\u7684\uff0c\u6240\u4ee5\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u6211\u4eec\u6709\u4e9b\u65f6\u5019\u5373\u4f7f\u6211\u4eec\u663e\u793a\u5730\u6307\u5b9a\u4e86\u76ee\u6807\u4f9d\u8d56\uff0cmake\u4e5f\u4e0d\u4f1a\u7ba1\u3002\u5982\u4e0b\u9762\u8fd9\u6761\u89c4\u5219\uff08\u6ca1\u6709\u547d\u4ee4\uff09\uff1a .. code:: makefile foo.o : foo.p \u4f9d\u8d56\u6587\u4ef6 foo.p \uff08Pascal\u7a0b\u5e8f\u7684\u6e90\u6587\u4ef6\uff09\u6709\u53ef\u80fd\u53d8\u5f97\u6ca1\u6709\u610f\u4e49\u3002\u5982\u679c\u76ee\u5f55\u4e0b\u5b58\u5728\u4e86 foo.c \u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u9690\u542b\u89c4\u5219\u4e00\u6837\u4f1a\u751f\u6548\uff0c\u5e76\u4f1a\u901a\u8fc7 foo.c \u8c03\u7528C\u7684\u7f16\u8bd1\u5668\u751f\u6210 foo.o \u6587\u4ef6\u3002\u56e0\u4e3a\uff0c\u5728\u9690\u542b\u89c4\u5219\u4e2d\uff0cPascal\u7684\u89c4\u5219\u51fa\u73b0\u5728C\u7684\u89c4\u5219\u4e4b\u540e\uff0c\u6240\u4ee5\uff0cmake\u627e\u5230\u53ef\u4ee5\u751f\u6210 foo.o \u7684C\u7684\u89c4\u5219\u5c31\u4e0d\u518d\u5bfb\u627e\u4e0b\u4e00\u6761\u89c4\u5219\u4e86\u3002\u5982\u679c\u4f60\u786e\u5b9e\u4e0d\u5e0c\u671b\u4efb\u4f55\u9690\u542b\u89c4\u5219\u63a8\u5bfc\uff0c\u90a3\u4e48\uff0c\u4f60\u5c31\u4e0d\u8981\u53ea\u5199\u51fa\u201c\u4f9d\u8d56\u89c4\u5219\u201d\uff0c\u800c\u4e0d\u5199\u547d\u4ee4\u3002","title":"\u4f7f\u7528\u9690\u542b\u89c4\u5219"},{"location":"makefile/implicit_rules/#_2","text":"\u8fd9\u91cc\u6211\u4eec\u5c06\u8bb2\u8ff0\u6240\u6709\u9884\u5148\u8bbe\u7f6e\uff08\u4e5f\u5c31\u662fmake\u5185\u5efa\uff09\u7684\u9690\u542b\u89c4\u5219\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u660e\u786e\u5730\u5199\u4e0b\u89c4\u5219\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4f1a\u5728\u8fd9\u4e9b\u89c4\u5219\u4e2d\u5bfb\u627e\u6240\u9700\u8981\u89c4\u5219\u548c\u547d\u4ee4\u3002\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528make\u7684\u53c2\u6570 -r \u6216 --no-builtin-rules \u9009\u9879\u6765\u53d6\u6d88\u6240\u6709\u7684\u9884\u8bbe\u7f6e\u7684\u9690\u542b\u89c4\u5219\u3002 \u5f53\u7136\uff0c\u5373\u4f7f\u662f\u6211\u4eec\u6307\u5b9a\u4e86 -r \u53c2\u6570\uff0c\u67d0\u4e9b\u9690\u542b\u89c4\u5219\u8fd8\u662f\u4f1a\u751f\u6548\uff0c\u56e0\u4e3a\u6709\u8bb8\u591a\u7684\u9690\u542b\u89c4\u5219\u90fd\u662f\u4f7f\u7528\u4e86\u201c\u540e\u7f00\u89c4\u5219\u201d\u6765\u5b9a\u4e49\u7684\uff0c\u6240\u4ee5\uff0c\u53ea\u8981\u9690\u542b\u89c4\u5219\u4e2d\u6709 \u201c\u540e\u7f00\u5217\u8868\u201d\uff08\u4e5f\u5c31\u4e00\u7cfb\u7edf\u5b9a\u4e49\u5728\u76ee\u6807 .SUFFIXES \u7684\u4f9d\u8d56\u76ee\u6807\uff09\uff0c\u90a3\u4e48\u9690\u542b\u89c4\u5219\u5c31\u4f1a\u751f\u6548\u3002\u9ed8\u8ba4\u7684\u540e\u7f00\u5217\u8868\u662f\uff1a.out, .a, .ln, .o, .c, .cc, .C, .p, .f, .F, .r, .y, .l, .s, .S, .mod, .sym, .def, .h, .info, .dvi, .tex, .texinfo, .texi, .txinfo, .w, .ch .web, .sh, .elc, .el\u3002\u5177\u4f53\u7684\u7ec6\u8282\uff0c\u6211\u4eec\u4f1a\u5728\u540e\u9762\u8bb2\u8ff0\u3002 \u8fd8\u662f\u5148\u6765\u770b\u4e00\u770b\u5e38\u7528\u7684\u9690\u542b\u89c4\u5219\u5427\u3002 \u7f16\u8bd1C\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .c \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f $(CC) \u2013c $(CPPFLAGS) $(CFLAGS) \u7f16\u8bd1C++\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .cc \u6216\u662f n .C \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f $(CXX) \u2013c $(CPPFLAGS) $(CFLAGS) \u3002\uff08\u5efa\u8bae\u4f7f\u7528 .cc \u4f5c\u4e3aC++\u6e90\u6587\u4ef6\u7684\u540e\u7f00\uff0c\u800c\u4e0d\u662f .C \uff09 \u7f16\u8bd1Pascal\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .p \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f $(PC) \u2013c $(PFLAGS) \u3002 \u7f16\u8bd1Fortran/Ratfor\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .r \u6216 n .F \u6216 n .f \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f: .f $(FC) \u2013c $(FFLAGS) .F $(FC) \u2013c $(FFLAGS) $(CPPFLAGS) .f $(FC) \u2013c $(FFLAGS) $(RFLAGS) \u9884\u5904\u7406Fortran/Ratfor\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .f \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .r \u6216 n .F \u3002\u8fd9\u4e2a\u89c4\u5219\u53ea\u662f\u8f6c\u6362Ratfor\u6216\u6709\u9884\u5904\u7406\u7684Fortran\u7a0b\u5e8f\u5230\u4e00\u4e2a\u6807\u51c6\u7684Fortran\u7a0b\u5e8f\u3002\u5176\u4f7f\u7528\u7684\u547d\u4ee4\u662f\uff1a .F $(FC) \u2013F $(CPPFLAGS) $(FFLAGS) .r $(FC) \u2013F $(FFLAGS) $(RFLAGS) \u7f16\u8bd1Modula-2\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u3002 n .sym \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .def \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(M2C) $(M2FLAGS) $(DEFFLAGS) \u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .mod \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(M2C) $(M2FLAGS) $(MODFLAGS) \u3002 \u6c47\u7f16\u548c\u6c47\u7f16\u9884\u5904\u7406\u7684\u9690\u542b\u89c4\u5219\u3002 n .o \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .s \uff0c\u9ed8\u8ba4\u4f7f\u7528\u7f16\u8bd1\u54c1 as \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $ (AS) $(ASFLAGS) \u3002 n .s \u7684\u76ee\u6807\u7684\u4f9d\u8d56\u76ee\u6807\u4f1a\u81ea\u52a8\u63a8\u5bfc\u4e3a n .S \uff0c\u9ed8\u8ba4\u4f7f\u7528C\u9884\u7f16\u8bd1\u5668 cpp \uff0c\u5e76\u4e14\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(AS) $(ASFLAGS) \u3002 \u94fe\u63a5Object\u6587\u4ef6\u7684\u9690\u542b\u89c4\u5219\u3002 n \u76ee\u6807\u4f9d\u8d56\u4e8e n .o \uff0c\u901a\u8fc7\u8fd0\u884cC\u7684\u7f16\u8bd1\u5668\u6765\u8fd0\u884c\u94fe\u63a5\u7a0b\u5e8f\u751f\u6210\uff08\u4e00\u822c\u662f ld \uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(CC) $(LDFLAGS) n .o $(LOADLIBES) $(LDLIBS) \u3002\u8fd9\u4e2a\u89c4\u5219\u5bf9\u4e8e\u53ea\u6709\u4e00\u4e2a\u6e90\u6587\u4ef6\u7684\u5de5\u7a0b\u6709\u6548\uff0c\u540c\u65f6\u4e5f\u5bf9\u591a\u4e2aObject\u6587\u4ef6\uff08\u7531\u4e0d\u540c\u7684\u6e90\u6587\u4ef6\u751f\u6210\uff09\u7684\u4e5f\u6709\u6548\u3002\u4f8b\u5982\u5982\u4e0b\u89c4\u5219: :: x : y.o z.o \u5e76\u4e14 x.c \u3001 y.c \u548c z.c \u90fd\u5b58\u5728\u65f6\uff0c\u9690\u542b\u89c4\u5219\u5c06\u6267\u884c\u5982\u4e0b\u547d\u4ee4: :: cc -c x.c -o x.o cc -c y.c -o y.o cc -c z.c -o z.o cc x.o y.o z.o -o x rm -f x.o rm -f y.o rm -f z.o \u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u6e90\u6587\u4ef6\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684x.c\uff09\u548c\u4f60\u7684\u76ee\u6807\u540d\u5b57\uff08\u5982\u4e0a\u4f8b\u4e2d\u7684x\uff09\u76f8\u5173\u8054\uff0c\u90a3\u4e48\uff0c\u4f60\u6700\u597d\u5199\u51fa\u81ea\u5df1\u7684\u751f\u6210\u89c4\u5219\uff0c\u4e0d\u7136\uff0c\u9690\u542b\u89c4\u5219\u4f1a\u62a5\u9519\u7684\u3002 Yacc C\u7a0b\u5e8f\u65f6\u7684\u9690\u542b\u89c4\u5219\u3002 n .c \u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.y \uff08Yacc\u751f\u6210\u7684\u6587\u4ef6\uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(YACC) $(YFALGS) \u3002\uff08\u201cYacc\u201d\u662f\u4e00\u4e2a\u8bed\u6cd5\u5206\u6790\u5668\uff0c\u5173\u4e8e\u5176\u7ec6\u8282\u8bf7\u67e5\u770b\u76f8\u5173\u8d44\u6599\uff09 Lex C\u7a0b\u5e8f\u65f6\u7684\u9690\u542b\u89c4\u5219\u3002 n .c \u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.l \uff08Lex\u751f\u6210\u7684\u6587\u4ef6\uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(LEX) $(LFALGS) \u3002\uff08\u5173\u4e8e\u201cLex\u201d\u7684\u7ec6\u8282\u8bf7\u67e5\u770b\u76f8\u5173\u8d44\u6599\uff09 Lex Ratfor\u7a0b\u5e8f\u65f6\u7684\u9690\u542b\u89c4\u5219\u3002 n .r \u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.l \uff08Lex\u751f\u6210\u7684\u6587\u4ef6\uff09\uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(LEX) $(LFALGS) \u3002 \u4eceC\u7a0b\u5e8f\u3001Yacc\u6587\u4ef6\u6216Lex\u6587\u4ef6\u521b\u5efaLint\u5e93\u7684\u9690\u542b\u89c4\u5219\u3002 n .ln \uff08lint\u751f\u6210\u7684\u6587\u4ef6\uff09\u7684\u4f9d\u8d56\u6587\u4ef6\u88ab\u81ea\u52a8\u63a8\u5bfc\u4e3a n.c \uff0c\u5176\u751f\u6210\u547d\u4ee4\u662f\uff1a $(LINT) $(LINTFALGS) $(CPPFLAGS) -i \u3002\u5bf9\u4e8e n .y \u548c n .l \u4e5f\u662f\u540c\u6837\u7684\u89c4\u5219\u3002","title":"\u9690\u542b\u89c4\u5219\u4e00\u89c8"},{"location":"makefile/implicit_rules/#_3","text":"\u5728\u9690\u542b\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u4e2d\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u4f7f\u7528\u4e86\u4e00\u4e9b\u9884\u5148\u8bbe\u7f6e\u7684\u53d8\u91cf\u3002\u4f60\u53ef\u4ee5\u5728\u4f60\u7684makefile\u4e2d\u6539\u53d8\u8fd9\u4e9b\u53d8\u91cf\u7684\u503c\uff0c\u6216\u662f\u5728make\u7684\u547d\u4ee4\u884c\u4e2d\u4f20\u5165\u8fd9\u4e9b\u503c\uff0c\u6216\u662f\u5728\u4f60\u7684\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e\u8fd9\u4e9b\u503c\uff0c\u65e0\u8bba\u600e\u4e48\u6837\uff0c\u53ea\u8981\u8bbe\u7f6e\u4e86\u8fd9\u4e9b\u7279\u5b9a\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u5176\u5c31\u4f1a\u5bf9\u9690\u542b\u89c4\u5219\u8d77\u4f5c\u7528\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5229\u7528make\u7684 -R \u6216 --no\u2013builtin-variables \u53c2\u6570\u6765\u53d6\u6d88\u4f60\u6240\u5b9a\u4e49\u7684\u53d8\u91cf\u5bf9\u9690\u542b\u89c4\u5219\u7684\u4f5c\u7528\u3002 \u4f8b\u5982\uff0c\u7b2c\u4e00\u6761\u9690\u542b\u89c4\u5219\u2014\u2014\u7f16\u8bd1C\u7a0b\u5e8f\u7684\u9690\u542b\u89c4\u5219\u7684\u547d\u4ee4\u662f $(CC) \u2013c $(CFLAGS) $(CPPFLAGS) \u3002Make\u9ed8\u8ba4\u7684\u7f16\u8bd1\u547d\u4ee4\u662f cc \uff0c\u5982\u679c\u4f60\u628a\u53d8\u91cf $(CC) \u91cd\u5b9a\u4e49\u6210 gcc \uff0c\u628a\u53d8\u91cf $(CFLAGS) \u91cd\u5b9a\u4e49\u6210 -g \uff0c\u90a3\u4e48\uff0c\u9690\u542b\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u5168\u90e8\u4f1a\u4ee5 gcc \u2013c -g $(CPPFLAGS) \u7684\u6837\u5b50\u6765\u6267\u884c\u4e86\u3002 \u6211\u4eec\u53ef\u4ee5\u628a\u9690\u542b\u89c4\u5219\u4e2d\u4f7f\u7528\u7684\u53d8\u91cf\u5206\u6210\u4e24\u79cd\uff1a\u4e00\u79cd\u662f\u547d\u4ee4\u76f8\u5173\u7684\uff0c\u5982 CC \uff1b\u4e00\u79cd\u662f\u53c2\u6570\u76f8\u7684\u5173\uff0c\u5982 CFLAGS \u3002\u4e0b\u9762\u662f\u6240\u6709\u9690\u542b\u89c4\u5219\u4e2d\u4f1a\u7528\u5230\u7684\u53d8\u91cf\uff1a","title":"\u9690\u542b\u89c4\u5219\u4f7f\u7528\u7684\u53d8\u91cf"},{"location":"makefile/implicit_rules/#_4","text":"AR : \u51fd\u6570\u5e93\u6253\u5305\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f ar AS : \u6c47\u7f16\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f as CC : C\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f cc CXX : C++\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f g++ CO : \u4ece RCS\u6587\u4ef6\u4e2d\u6269\u5c55\u6587\u4ef6\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f co CPP : C\u7a0b\u5e8f\u7684\u9884\u5904\u7406\u5668\uff08\u8f93\u51fa\u662f\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f $(CC) \u2013E FC : Fortran \u548c Ratfor \u7684\u7f16\u8bd1\u5668\u548c\u9884\u5904\u7406\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f f77 GET : \u4eceSCCS\u6587\u4ef6\u4e2d\u6269\u5c55\u6587\u4ef6\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f get LEX : Lex\u65b9\u6cd5\u5206\u6790\u5668\u7a0b\u5e8f\uff08\u9488\u5bf9\u4e8eC\u6216Ratfor\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f lex PC : Pascal\u8bed\u8a00\u7f16\u8bd1\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f pc YACC : Yacc\u6587\u6cd5\u5206\u6790\u5668\uff08\u9488\u5bf9\u4e8eC\u7a0b\u5e8f\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f yacc YACCR : Yacc\u6587\u6cd5\u5206\u6790\u5668\uff08\u9488\u5bf9\u4e8eRatfor\u7a0b\u5e8f\uff09\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f yacc \u2013r MAKEINFO : \u8f6c\u6362Texinfo\u6e90\u6587\u4ef6\uff08.texi\uff09\u5230Info\u6587\u4ef6\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f makeinfo TEX : \u4eceTeX\u6e90\u6587\u4ef6\u521b\u5efaTeX DVI\u6587\u4ef6\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f tex TEXI2DVI : \u4eceTexinfo\u6e90\u6587\u4ef6\u521b\u5efa\u519bTeX DVI \u6587\u4ef6\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f texi2dvi WEAVE : \u8f6c\u6362Web\u5230TeX\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f weave CWEAVE : \u8f6c\u6362C Web \u5230 TeX\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f cweave TANGLE : \u8f6c\u6362Web\u5230Pascal\u8bed\u8a00\u7684\u7a0b\u5e8f\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f tangle CTANGLE : \u8f6c\u6362C Web \u5230 C\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f ctangle RM : \u5220\u9664\u6587\u4ef6\u547d\u4ee4\u3002\u9ed8\u8ba4\u547d\u4ee4\u662f rm \u2013f","title":"\u5173\u4e8e\u547d\u4ee4\u7684\u53d8\u91cf\u3002"},{"location":"makefile/implicit_rules/#_5","text":"\u4e0b\u9762\u7684\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u76f8\u5173\u4e0a\u9762\u7684\u547d\u4ee4\u7684\u53c2\u6570\u3002\u5982\u679c\u6ca1\u6709\u6307\u660e\u5176\u9ed8\u8ba4\u503c\uff0c\u90a3\u4e48\u5176\u9ed8\u8ba4\u503c\u90fd\u662f\u7a7a\u3002 ARFLAGS : \u51fd\u6570\u5e93\u6253\u5305\u7a0b\u5e8fAR\u547d\u4ee4\u7684\u53c2\u6570\u3002\u9ed8\u8ba4\u503c\u662f rv ASFLAGS : \u6c47\u7f16\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002\uff08\u5f53\u660e\u663e\u5730\u8c03\u7528 .s \u6216 .S \u6587\u4ef6\u65f6\uff09 CFLAGS : C\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 CXXFLAGS : C++\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 COFLAGS : RCS\u547d\u4ee4\u53c2\u6570\u3002 CPPFLAGS : C\u9884\u5904\u7406\u5668\u53c2\u6570\u3002\uff08 C \u548c Fortran \u7f16\u8bd1\u5668\u4e5f\u4f1a\u7528\u5230\uff09\u3002 FFLAGS : Fortran\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 GFLAGS : SCCS \u201cget\u201d\u7a0b\u5e8f\u53c2\u6570\u3002 LDFLAGS : \u94fe\u63a5\u5668\u53c2\u6570\u3002\uff08\u5982\uff1a ld \uff09 LFLAGS : Lex\u6587\u6cd5\u5206\u6790\u5668\u53c2\u6570\u3002 PFLAGS : Pascal\u8bed\u8a00\u7f16\u8bd1\u5668\u53c2\u6570\u3002 RFLAGS : Ratfor \u7a0b\u5e8f\u7684Fortran \u7f16\u8bd1\u5668\u53c2\u6570\u3002 YFLAGS : Yacc\u6587\u6cd5\u5206\u6790\u5668\u53c2\u6570\u3002","title":"\u5173\u4e8e\u547d\u4ee4\u53c2\u6570\u7684\u53d8\u91cf"},{"location":"makefile/implicit_rules/#_6","text":"\u6709\u4e9b\u65f6\u5019\uff0c\u4e00\u4e2a\u76ee\u6807\u53ef\u80fd\u88ab\u4e00\u7cfb\u5217\u7684\u9690\u542b\u89c4\u5219\u6240\u4f5c\u7528\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a .o \u7684\u6587\u4ef6\u751f\u6210\uff0c\u53ef\u80fd\u4f1a\u662f\u5148\u88abYacc\u7684[.y]\u6587\u4ef6\u5148\u6210 .c \uff0c\u7136\u540e\u518d\u88abC\u7684\u7f16\u8bd1\u5668\u751f\u6210\u3002\u6211\u4eec\u628a\u8fd9\u4e00\u7cfb\u5217\u7684\u9690\u542b\u89c4\u5219\u53eb\u505a\u201c\u9690\u542b\u89c4\u5219\u94fe\u201d\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u6587\u4ef6 .c \u5b58\u5728\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u8c03\u7528C\u7684\u7f16\u8bd1\u5668\u7684\u9690\u542b\u89c4\u5219\uff0c\u5982\u679c\u6ca1\u6709 .c \u6587\u4ef6\uff0c\u4f46\u6709\u4e00\u4e2a .y \u6587\u4ef6\uff0c\u90a3\u4e48Yacc\u7684\u9690\u542b\u89c4\u5219\u4f1a\u88ab\u8c03\u7528\uff0c\u751f\u6210 .c \u6587\u4ef6\uff0c\u7136\u540e\uff0c\u518d\u8c03\u7528C\u7f16\u8bd1\u7684\u9690\u542b\u89c4\u5219\u6700\u7ec8\u7531 .c \u751f\u6210 .o \u6587\u4ef6\uff0c\u8fbe\u5230\u76ee\u6807\u3002 \u6211\u4eec\u628a\u8fd9\u79cd .c \u7684\u6587\u4ef6\uff08\u6216\u662f\u76ee\u6807\uff09\uff0c\u53eb\u505a\u4e2d\u95f4\u76ee\u6807\u3002\u4e0d\u7ba1\u600e\u4e48\u6837\uff0cmake\u4f1a\u52aa\u529b\u81ea\u52a8\u63a8\u5bfc\u751f\u6210\u76ee\u6807\u7684\u4e00\u5207\u65b9\u6cd5\uff0c\u4e0d\u7ba1\u4e2d\u95f4\u76ee\u6807\u6709\u591a\u5c11\uff0c\u5176\u90fd\u4f1a\u6267\u7740\u5730\u628a\u6240\u6709\u7684\u9690\u542b\u89c4\u5219\u548c\u4f60\u4e66\u5199\u7684\u89c4\u5219\u5168\u90e8\u5408\u8d77\u6765\u5206\u6790\uff0c\u52aa\u529b\u8fbe\u5230\u76ee\u6807\uff0c\u6240\u4ee5\uff0c\u6709\u4e9b\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u8ba9\u4f60\u89c9\u5f97\u5947\u602a\uff0c\u600e\u4e48\u6211\u7684\u76ee\u6807\u4f1a\u8fd9\u6837\u751f\u6210\uff1f\u600e\u4e48\u6211\u7684 makefile\u53d1\u75af\u4e86\uff1f \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u4e2d\u95f4\u76ee\u6807\uff0c\u5b83\u548c\u4e00\u822c\u7684\u76ee\u6807\u6709\u4e24\u4e2a\u5730\u65b9\u6240\u4e0d\u540c\uff1a\u7b2c\u4e00\u4e2a\u4e0d\u540c\u662f\u9664\u975e\u4e2d\u95f4\u7684\u76ee\u6807\u4e0d\u5b58\u5728\uff0c\u624d\u4f1a\u5f15\u53d1\u4e2d\u95f4\u89c4\u5219\u3002\u7b2c\u4e8c\u4e2a\u4e0d\u540c\u7684\u662f\uff0c\u53ea\u8981\u76ee\u6807\u6210\u529f\u4ea7\u751f\uff0c\u90a3\u4e48\uff0c\u4ea7\u751f\u6700\u7ec8\u76ee\u6807\u8fc7\u7a0b\u4e2d\uff0c\u6240\u4ea7\u751f\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u4f1a\u88ab\u4ee5 rm -f \u5220\u9664\u3002 \u901a\u5e38\uff0c\u4e00\u4e2a\u88abmakefile\u6307\u5b9a\u6210\u76ee\u6807\u6216\u662f\u4f9d\u8d56\u76ee\u6807\u7684\u6587\u4ef6\u4e0d\u80fd\u88ab\u5f53\u4f5c\u4e2d\u4ecb\u3002\u7136\u800c\uff0c\u4f60\u53ef\u4ee5\u660e\u663e\u5730\u8bf4\u660e\u4e00\u4e2a\u6587\u4ef6\u6216\u662f\u76ee\u6807\u662f\u4e2d\u4ecb\u76ee\u6807\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4f2a\u76ee\u6807 .INTERMEDIATE \u6765\u5f3a\u5236\u58f0\u660e\u3002\uff08\u5982\uff1a .INTERMEDIATE : mid \uff09 \u4f60\u4e5f\u53ef\u4ee5\u963b\u6b62make\u81ea\u52a8\u5220\u9664\u4e2d\u95f4\u76ee\u6807\uff0c\u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4f2a\u76ee\u6807 .SECONDARY \u6765\u5f3a\u5236\u58f0\u660e\uff08\u5982\uff1a .SECONDARY : sec \uff09\u3002\u4f60\u8fd8\u53ef\u4ee5\u628a\u4f60\u7684\u76ee\u6807\uff0c\u4ee5\u6a21\u5f0f\u7684\u65b9\u5f0f\u6765\u6307\u5b9a\uff08\u5982\uff1a %.o \uff09\u6210\u4f2a\u76ee\u6807 .PRECIOUS \u7684\u4f9d\u8d56\u76ee\u6807\uff0c\u4ee5\u4fdd\u5b58\u88ab\u9690\u542b\u89c4\u5219\u6240\u751f\u6210\u7684\u4e2d\u95f4\u6587\u4ef6\u3002 \u5728\u201c\u9690\u542b\u89c4\u5219\u94fe\u201d\u4e2d\uff0c\u7981\u6b62\u540c\u4e00\u4e2a\u76ee\u6807\u51fa\u73b0\u4e24\u6b21\u6216\u4e24\u6b21\u4ee5\u4e0a\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5c31\u53ef\u9632\u6b62\u5728make\u81ea\u52a8\u63a8\u5bfc\u65f6\u51fa\u73b0\u65e0\u9650\u9012\u5f52\u7684\u60c5\u51b5\u3002 Make\u4f1a\u4f18\u5316\u4e00\u4e9b\u7279\u6b8a\u7684\u9690\u542b\u89c4\u5219\uff0c\u800c\u4e0d\u751f\u6210\u4e2d\u95f4\u6587\u4ef6\u3002\u5982\uff0c\u4ece\u6587\u4ef6 foo.c \u751f\u6210\u76ee\u6807\u7a0b\u5e8f foo \uff0c\u6309\u9053\u7406\uff0cmake\u4f1a\u7f16\u8bd1\u751f\u6210\u4e2d\u95f4\u6587\u4ef6 foo.o \uff0c\u7136\u540e\u94fe\u63a5\u6210 foo \uff0c\u4f46\u5728\u5b9e\u9645\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e00\u52a8\u4f5c\u53ef\u4ee5\u88ab\u4e00\u6761 cc \u7684\u547d\u4ee4\u5b8c\u6210\uff08 cc \u2013o foo foo.c \uff09\uff0c\u4e8e\u662f\u4f18\u5316\u8fc7\u7684\u89c4\u5219\u5c31\u4e0d\u4f1a\u751f\u6210\u4e2d\u95f4\u6587\u4ef6\u3002","title":"\u9690\u542b\u89c4\u5219\u94fe"},{"location":"makefile/implicit_rules/#_7","text":"\u4f60\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u89c4\u5219\u6765\u5b9a\u4e49\u4e00\u4e2a\u9690\u542b\u89c4\u5219\u3002\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\u5c31\u597d\u50cf\u4e00\u4e2a\u4e00\u822c\u7684\u89c4\u5219\uff0c\u53ea\u662f\u5728\u89c4\u5219\u4e2d\uff0c\u76ee\u6807\u7684\u5b9a\u4e49\u9700\u8981\u6709 % \u5b57\u7b26\u3002 % \u7684\u610f\u601d\u662f\u8868\u793a\u4e00\u4e2a\u6216\u591a\u4e2a\u4efb\u610f\u5b57\u7b26\u3002\u5728\u4f9d\u8d56\u76ee\u6807\u4e2d\u540c\u6837\u53ef\u4ee5\u4f7f\u7528 % \uff0c\u53ea\u662f\u4f9d\u8d56\u76ee\u6807\u4e2d\u7684 % \u7684\u53d6\u503c\uff0c\u53d6\u51b3\u4e8e\u5176\u76ee\u6807\u3002 \u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c % \u7684\u5c55\u5f00\u53d1\u751f\u5728\u53d8\u91cf\u548c\u51fd\u6570\u7684\u5c55\u5f00\u4e4b\u540e\uff0c\u53d8\u91cf\u548c\u51fd\u6570\u7684\u5c55\u5f00\u53d1\u751f\u5728make\u8f7d\u5165Makefile\u65f6\uff0c\u800c\u6a21\u5f0f\u89c4\u5219\u4e2d\u7684 % \u5219\u53d1\u751f\u5728\u8fd0\u884c\u65f6\u3002","title":"\u5b9a\u4e49\u6a21\u5f0f\u89c4\u5219"},{"location":"makefile/implicit_rules/#_8","text":"\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u81f3\u5c11\u5728\u89c4\u5219\u7684\u76ee\u6807\u5b9a\u4e49\u4e2d\u8981\u5305\u542b % \uff0c\u5426\u5219\uff0c\u5c31\u662f\u4e00\u822c\u7684\u89c4\u5219\u3002\u76ee\u6807\u4e2d\u7684 % \u5b9a\u4e49\u8868\u793a\u5bf9\u6587\u4ef6\u540d\u7684\u5339\u914d\uff0c % \u8868\u793a\u957f\u5ea6\u4efb\u610f\u7684\u975e\u7a7a\u5b57\u7b26\u4e32\u3002\u4f8b\u5982\uff1a %.c \u8868\u793a\u4ee5 .c \u7ed3\u5c3e\u7684\u6587\u4ef6\u540d\uff08\u6587\u4ef6\u540d\u7684\u957f\u5ea6\u81f3\u5c11\u4e3a3\uff09\uff0c\u800c s.%.c \u5219\u8868\u793a\u4ee5 s. \u5f00\u5934\uff0c .c \u7ed3\u5c3e\u7684\u6587\u4ef6\u540d\uff08\u6587\u4ef6\u540d\u7684\u957f\u5ea6\u81f3\u5c11\u4e3a5\uff09\u3002 \u5982\u679c % \u5b9a\u4e49\u5728\u76ee\u6807\u4e2d\uff0c\u90a3\u4e48\uff0c\u76ee\u6807\u4e2d\u7684 % \u7684\u503c\u51b3\u5b9a\u4e86\u4f9d\u8d56\u76ee\u6807\u4e2d\u7684 % \u7684\u503c\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u76ee\u6807\u4e2d\u7684\u6a21\u5f0f\u7684 % \u51b3\u5b9a\u4e86\u4f9d\u8d56\u76ee\u6807\u4e2d % \u7684\u6837\u5b50\u3002\u4f8b\u5982\u6709\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\u5982\u4e0b\uff1a .. code:: makefile %.o : %.c ; lt;command ...... gt;; \u5176\u542b\u4e49\u662f\uff0c\u6307\u51fa\u4e86\u600e\u4e48\u4ece\u6240\u6709\u7684 .c \u6587\u4ef6\u751f\u6210\u76f8\u5e94\u7684 .o \u6587\u4ef6\u7684\u89c4\u5219\u3002\u5982\u679c\u8981\u751f\u6210\u7684\u76ee\u6807\u662f a.o b.o \uff0c\u90a3\u4e48 %c \u5c31\u662f a.c b.c \u3002 \u4e00\u65e6\u4f9d\u8d56\u76ee\u6807\u4e2d\u7684 % \u6a21\u5f0f\u88ab\u786e\u5b9a\uff0c\u90a3\u4e48\uff0cmake\u4f1a\u88ab\u8981\u6c42\u53bb\u5339\u914d\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u540d\uff0c\u4e00\u65e6\u627e\u5230\uff0cmake\u5c31\u4f1a\u89c4\u5219\u4e0b\u7684\u547d\u4ee4\uff0c\u6240\u4ee5\uff0c\u5728\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u76ee\u6807\u53ef\u80fd\u4f1a\u662f\u591a\u4e2a\u7684\uff0c\u5982\u679c\u6709\u6a21\u5f0f\u5339\u914d\u51fa\u591a\u4e2a\u76ee\u6807\uff0cmake\u5c31\u4f1a\u4ea7\u751f\u6240\u6709\u7684\u6a21\u5f0f\u76ee\u6807\uff0c\u6b64\u65f6\uff0cmake\u5173\u5fc3\u7684\u662f\u4f9d\u8d56\u7684\u6587\u4ef6\u540d\u548c\u751f\u6210\u76ee\u6807\u7684\u547d\u4ee4\u8fd9\u4e24\u4ef6\u4e8b\u3002","title":"\u6a21\u5f0f\u89c4\u5219\u4ecb\u7ecd"},{"location":"makefile/implicit_rules/#_9","text":"\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u8868\u793a\u4e86,\u628a\u6240\u6709\u7684 .c \u6587\u4ef6\u90fd\u7f16\u8bd1\u6210 .o \u6587\u4ef6. .. code:: makefile %.o : %.c $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) $ lt ; - o $ @ \u5176\u4e2d\uff0c $@ \u8868\u793a\u6240\u6709\u7684\u76ee\u6807\u7684\u6328\u4e2a\u503c\uff0c $ \u8868\u793a\u4e86\u6240\u6709\u4f9d\u8d56\u76ee\u6807\u7684\u6328\u4e2a\u503c\u3002\u8fd9\u4e9b\u5947\u602a\u7684\u53d8\u91cf\u6211\u4eec\u53eb\u201c\u81ea\u52a8\u5316\u53d8\u91cf\u201d\uff0c\u540e\u9762\u4f1a\u8be6\u7ec6\u8bb2\u8ff0\u3002 \u4e0b\u9762\u7684\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6709\u4e24\u4e2a\u76ee\u6807\u662f\u6a21\u5f0f\u7684\uff1a .. code:: makefile %.tab.c %.tab.h: %.y bison - d $ lt ; \u8fd9\u6761\u89c4\u5219\u544a\u8bc9make\u628a\u6240\u6709\u7684 .y \u6587\u4ef6\u90fd\u4ee5 bison -d n .y \u6267\u884c\uff0c\u7136\u540e\u751f\u6210 n .tab.c \u548c n .tab.h \u6587\u4ef6\u3002\uff08\u5176\u4e2d\uff0c n \u8868\u793a\u4e00\u4e2a\u4efb\u610f\u5b57\u7b26\u4e32\uff09\u3002\u5982\u679c\u6211\u4eec\u7684\u6267\u884c\u7a0b\u5e8f foo \u4f9d\u8d56\u4e8e\u6587\u4ef6 parse.tab.o \u548c scan.o \uff0c\u5e76\u4e14\u6587\u4ef6 scan.o \u4f9d\u8d56\u4e8e\u6587\u4ef6 parse.tab.h \uff0c\u5982\u679c parse.y \u6587\u4ef6\u88ab\u66f4\u65b0\u4e86\uff0c\u90a3\u4e48\u6839\u636e\u4e0a\u8ff0\u7684\u89c4\u5219\uff0c bison -d parse.y \u5c31\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\uff0c\u4e8e\u662f\uff0c parse.tab.o \u548c scan.o \u7684\u4f9d\u8d56\u6587\u4ef6\u5c31\u9f50\u4e86\u3002\uff08\u5047\u8bbe\uff0c parse.tab.o \u7531 parse.tab.c \u751f\u6210\uff0c\u548c scan.o \u7531 scan.c \u751f\u6210\uff0c\u800c foo \u7531 parse.tab.o \u548c scan.o \u94fe\u63a5\u751f\u6210\uff0c\u800c\u4e14 foo \u548c\u5176 .o \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u4e5f\u5199\u597d\uff0c\u90a3\u4e48\uff0c\u6240\u6709\u7684\u76ee\u6807\u90fd\u4f1a\u5f97\u5230\u6ee1\u8db3\uff09","title":"\u6a21\u5f0f\u89c4\u5219\u793a\u4f8b"},{"location":"makefile/implicit_rules/#_10","text":"\u5728\u4e0a\u8ff0\u7684\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u76ee\u6807\u548c\u4f9d\u8d56\u6587\u4ef6\u90fd\u662f\u4e00\u7cfb\u4f8b\u7684\u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u4e66\u5199\u4e00\u4e2a\u547d\u4ee4\u6765\u5b8c\u6210\u4ece\u4e0d\u540c\u7684\u4f9d\u8d56\u6587\u4ef6\u751f\u6210\u76f8\u5e94\u7684\u76ee\u6807\uff1f\u56e0\u4e3a\u5728\u6bcf\u4e00\u6b21\u7684\u5bf9\u6a21\u5f0f\u89c4\u5219\u7684\u89e3\u6790\u65f6\uff0c\u90fd\u4f1a\u662f\u4e0d\u540c\u7684\u76ee\u6807\u548c\u4f9d\u8d56\u6587\u4ef6\u3002 \u81ea\u52a8\u5316\u53d8\u91cf\u5c31\u662f\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\u3002\u5728\u524d\u9762\uff0c\u6211\u4eec\u5df2\u7ecf\u5bf9\u81ea\u52a8\u5316\u53d8\u91cf\u6709\u6240\u63d0\u6d89\uff0c\u76f8\u4fe1\u4f60\u770b\u5230\u8fd9\u91cc\u5df2\u5bf9\u5b83\u6709\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\u4e86\u3002\u6240\u8c13\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u5c31\u662f\u8fd9\u79cd\u53d8\u91cf\u4f1a\u628a\u6a21\u5f0f\u4e2d\u6240\u5b9a\u4e49\u7684\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u81ea\u52a8\u5730\u6328\u4e2a\u53d6\u51fa\uff0c\u76f4\u81f3\u6240\u6709\u7684\u7b26\u5408\u6a21\u5f0f\u7684\u6587\u4ef6\u90fd\u53d6\u5b8c\u4e86\u3002\u8fd9\u79cd\u81ea\u52a8\u5316\u53d8\u91cf\u53ea\u5e94\u51fa\u73b0\u5728\u89c4\u5219\u7684\u547d\u4ee4\u4e2d\u3002 \u4e0b\u9762\u662f\u6240\u6709\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u53ca\u5176\u8bf4\u660e\uff1a $@ : \u8868\u793a\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u6587\u4ef6\u96c6\u3002\u5728\u6a21\u5f0f\u89c4\u5219\u4e2d\uff0c\u5982\u679c\u6709\u591a\u4e2a\u76ee\u6807\uff0c\u90a3\u4e48\uff0c $@ \u5c31\u662f\u5339\u914d\u4e8e\u76ee\u6807\u4e2d\u6a21\u5f0f\u5b9a\u4e49\u7684\u96c6\u5408\u3002 $% : \u4ec5\u5f53\u76ee\u6807\u662f\u51fd\u6570\u5e93\u6587\u4ef6\u4e2d\uff0c\u8868\u793a\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u6210\u5458\u540d\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e00\u4e2a\u76ee\u6807\u662f foo.a(bar.o) \uff0c\u90a3\u4e48\uff0c $% \u5c31\u662f bar.o \uff0c $@ \u5c31\u662f foo.a \u3002\u5982\u679c\u76ee\u6807\u4e0d\u662f\u51fd\u6570\u5e93\u6587\u4ef6\uff08Unix\u4e0b\u662f .a \uff0cWindows\u4e0b\u662f .lib \uff09\uff0c\u90a3\u4e48\uff0c\u5176\u503c\u4e3a\u7a7a\u3002 $ : \u4f9d\u8d56\u76ee\u6807\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u540d\u5b57\u3002\u5982\u679c\u4f9d\u8d56\u76ee\u6807\u662f\u4ee5\u6a21\u5f0f\uff08\u5373 % \uff09\u5b9a\u4e49\u7684\uff0c\u90a3\u4e48 $ \u5c06\u662f\u7b26\u5408\u6a21\u5f0f\u7684\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u96c6\u3002\u6ce8\u610f\uff0c\u5176\u662f\u4e00\u4e2a\u4e00\u4e2a\u53d6\u51fa\u6765\u7684\u3002 $? : \u6240\u6709\u6bd4\u76ee\u6807\u65b0\u7684\u4f9d\u8d56\u76ee\u6807\u7684\u96c6\u5408\u3002\u4ee5\u7a7a\u683c\u5206\u9694\u3002 $^ : \u6240\u6709\u7684\u4f9d\u8d56\u76ee\u6807\u7684\u96c6\u5408\u3002\u4ee5\u7a7a\u683c\u5206\u9694\u3002\u5982\u679c\u5728\u4f9d\u8d56\u76ee\u6807\u4e2d\u6709\u591a\u4e2a\u91cd\u590d\u7684\uff0c\u90a3\u4e2a\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u53bb\u9664\u91cd\u590d\u7684\u4f9d\u8d56\u76ee\u6807\uff0c\u53ea\u4fdd\u7559\u4e00\u4efd\u3002 $+ : \u8fd9\u4e2a\u53d8\u91cf\u5f88\u50cf $^ \uff0c\u4e5f\u662f\u6240\u6709\u4f9d\u8d56\u76ee\u6807\u7684\u96c6\u5408\u3002\u53ea\u662f\u5b83\u4e0d\u53bb\u9664\u91cd\u590d\u7684\u4f9d\u8d56\u76ee\u6807\u3002 $* : \u8fd9\u4e2a\u53d8\u91cf\u8868\u793a\u76ee\u6807\u6a21\u5f0f\u4e2d % \u53ca\u5176\u4e4b\u524d\u7684\u90e8\u5206\u3002\u5982\u679c\u76ee\u6807\u662f dir/a.foo.b \uff0c\u5e76\u4e14\u76ee\u6807\u7684\u6a21\u5f0f\u662f a.%.b \uff0c\u90a3\u4e48\uff0c $* \u7684\u503c\u5c31\u662f dir/a.foo \u3002\u8fd9\u4e2a\u53d8\u91cf\u5bf9\u4e8e\u6784\u9020\u6709\u5173\u8054\u7684\u6587\u4ef6\u540d\u662f\u6bd4\u8f83\u6709\u8f83\u3002\u5982\u679c\u76ee\u6807\u4e2d\u6ca1\u6709\u6a21\u5f0f\u7684\u5b9a\u4e49\uff0c\u90a3\u4e48 $* \u4e5f\u5c31\u4e0d\u80fd\u88ab\u63a8\u5bfc\u51fa\uff0c\u4f46\u662f\uff0c\u5982\u679c\u76ee\u6807\u6587\u4ef6\u7684\u540e\u7f00\u662fmake\u6240\u8bc6\u522b\u7684\uff0c\u90a3\u4e48 $* \u5c31\u662f\u9664\u4e86\u540e\u7f00\u7684\u90a3\u4e00\u90e8\u5206\u3002\u4f8b\u5982\uff1a\u5982\u679c\u76ee\u6807\u662f foo.c \uff0c\u56e0\u4e3a .c \u662fmake\u6240\u80fd\u8bc6\u522b\u7684\u540e\u7f00\u540d\uff0c\u6240\u4ee5\uff0c $* \u7684\u503c\u5c31\u662f foo \u3002\u8fd9\u4e2a\u7279\u6027\u662fGNU make\u7684\uff0c\u5f88\u6709\u53ef\u80fd\u4e0d\u517c\u5bb9\u4e8e\u5176\u5b83\u7248\u672c\u7684make\uff0c\u6240\u4ee5\uff0c\u4f60\u5e94\u8be5\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 $* \uff0c\u9664\u975e\u662f\u5728\u9690\u542b\u89c4\u5219\u6216\u662f\u9759\u6001\u6a21\u5f0f\u4e2d\u3002\u5982\u679c\u76ee\u6807\u4e2d\u7684\u540e\u7f00\u662fmake\u6240\u4e0d\u80fd\u8bc6\u522b\u7684\uff0c\u90a3\u4e48 $* \u5c31\u662f\u7a7a\u503c\u3002 \u5f53\u4f60\u5e0c\u671b\u53ea\u5bf9\u66f4\u65b0\u8fc7\u7684\u4f9d\u8d56\u6587\u4ef6\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c $? \u5728\u663e\u5f0f\u89c4\u5219\u4e2d\u5f88\u6709\u7528\uff0c\u4f8b\u5982\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a\u51fd\u6570\u5e93\u6587\u4ef6\u53eb lib \uff0c\u5176\u7531\u5176\u5b83\u51e0\u4e2aobject\u6587\u4ef6\u66f4\u65b0\u3002\u90a3\u4e48\u628aobject\u6587\u4ef6\u6253\u5305\u7684\u6bd4\u8f83\u6709\u6548\u7387\u7684Makefile\u89c4\u5219\u662f\uff1a .. code:: makefile lib : foo . o bar . o lose . o win . o ar r lib $ ? \u5728\u4e0a\u8ff0\u6240\u5217\u51fa\u6765\u7684\u81ea\u52a8\u91cf\u53d8\u91cf\u4e2d\u3002\u56db\u4e2a\u53d8\u91cf\uff08 $@ \u3001 $ \u3001 $% \u3001 $* \uff09\u5728\u6269\u5c55\u65f6\u53ea\u4f1a\u6709\u4e00\u4e2a\u6587\u4ef6\uff0c\u800c\u53e6\u4e09\u4e2a\u7684\u503c\u662f\u4e00\u4e2a\u6587\u4ef6\u5217\u8868\u3002\u8fd9\u4e03\u4e2a\u81ea\u52a8\u5316\u53d8\u91cf\u8fd8\u53ef\u4ee5\u53d6\u5f97\u6587\u4ef6\u7684\u76ee\u5f55\u540d\u6216\u662f\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u7b26\u5408\u6a21\u5f0f\u7684\u6587\u4ef6\u540d\uff0c\u53ea\u9700\u8981\u642d\u914d\u4e0a D \u6216 F \u5b57\u6837\u3002\u8fd9\u662fGNU make\u4e2d\u8001\u7248\u672c\u7684\u7279\u6027\uff0c\u5728\u65b0\u7248\u672c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u51fd\u6570 dir \u6216 notdir \u5c31\u53ef\u4ee5\u505a\u5230\u4e86\u3002 D \u7684\u542b\u4e49\u5c31\u662fDirectory\uff0c\u5c31\u662f\u76ee\u5f55\uff0c F \u7684\u542b\u4e49\u5c31\u662fFile\uff0c\u5c31\u662f\u6587\u4ef6\u3002 \u4e0b\u9762\u662f\u5bf9\u4e8e\u4e0a\u9762\u7684\u4e03\u4e2a\u53d8\u91cf\u5206\u522b\u52a0\u4e0a D \u6216\u662f F \u7684\u542b\u4e49\uff1a $(@D) \u8868\u793a $@ \u7684\u76ee\u5f55\u90e8\u5206\uff08\u4e0d\u4ee5\u659c\u6760\u4f5c\u4e3a\u7ed3\u5c3e\uff09\uff0c\u5982\u679c $@ \u503c\u662f dir/foo.o \uff0c\u90a3\u4e48 $(@D) \u5c31\u662f dir \uff0c\u800c\u5982\u679c $@ \u4e2d\u6ca1\u6709\u5305\u542b\u659c\u6760\u7684\u8bdd\uff0c\u5176\u503c\u5c31\u662f . \uff08\u5f53\u524d\u76ee\u5f55\uff09\u3002 $(@F) \u8868\u793a $@ \u7684\u6587\u4ef6\u90e8\u5206\uff0c\u5982\u679c $@ \u503c\u662f dir/foo.o \uff0c\u90a3\u4e48 $(@F) \u5c31\u662f foo.o \uff0c $(@F) \u76f8\u5f53\u4e8e\u51fd\u6570 $(notdir $@) \u3002 $(*D) , $(*F) \u548c\u4e0a\u9762\u6240\u8ff0\u7684\u540c\u7406\uff0c\u4e5f\u662f\u53d6\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\u5bf9\u4e8e\u4e0a\u9762\u7684\u90a3\u4e2a\u4f8b\u5b50\uff0c $(*D) \u8fd4\u56de dir \uff0c\u800c $(*F) \u8fd4\u56de foo $(%D) , $(%F) \u5206\u522b\u8868\u793a\u4e86\u51fd\u6570\u5305\u6587\u4ef6\u6210\u5458\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\u8fd9\u5bf9\u4e8e\u5f62\u540c archive(member) \u5f62\u5f0f\u7684\u76ee\u6807\u4e2d\u7684 member \u4e2d\u5305\u542b\u4e86\u4e0d\u540c\u7684\u76ee\u5f55\u5f88\u6709\u7528\u3002 $( D) , $( F) \u5206\u522b\u8868\u793a\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002 $(^D) , $(^F) \u5206\u522b\u8868\u793a\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\uff08\u65e0\u76f8\u540c\u7684\uff09 $(+D) , $(+F) \u5206\u522b\u8868\u793a\u6240\u6709\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002\uff08\u53ef\u4ee5\u6709\u76f8\u540c\u7684\uff09 $(?D) , $(?F) \u5206\u522b\u8868\u793a\u88ab\u66f4\u65b0\u7684\u4f9d\u8d56\u6587\u4ef6\u7684\u76ee\u5f55\u90e8\u5206\u548c\u6587\u4ef6\u90e8\u5206\u3002 \u6700\u540e\u60f3\u63d0\u9192\u4e00\u4e0b\u7684\u662f\uff0c\u5bf9\u4e8e $ \uff0c\u4e3a\u4e86\u907f\u514d\u4ea7\u751f\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u6211\u4eec\u6700\u597d\u7ed9$\u540e\u9762\u7684\u90a3\u4e2a\u7279\u5b9a\u5b57\u7b26\u90fd\u52a0\u4e0a\u5706\u62ec\u53f7\uff0c\u6bd4\u5982\uff0c $( ) \u5c31\u8981\u6bd4 $ \u8981\u597d\u4e00\u4e9b\u3002 \u8fd8\u5f97\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e9b\u53d8\u91cf\u53ea\u4f7f\u7528\u5728\u89c4\u5219\u7684\u547d\u4ee4\u4e2d\uff0c\u800c\u4e14\u4e00\u822c\u90fd\u662f\u201c\u663e\u5f0f\u89c4\u5219\u201d\u548c\u201c\u9759\u6001\u6a21\u5f0f\u89c4\u5219\u201d\uff08\u53c2\u89c1\u524d\u9762\u201c\u4e66\u5199\u89c4\u5219\u201d\u4e00\u7ae0\uff09\u3002\u5176\u5728\u9690\u542b\u89c4\u5219\u4e2d\u5e76\u6ca1\u6709\u610f\u4e49\u3002","title":"\u81ea\u52a8\u5316\u53d8\u91cf"},{"location":"makefile/implicit_rules/#_11","text":"\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u4e2a\u76ee\u6807\u7684\u6a21\u5f0f\u6709\u4e00\u4e2a\u6709\u524d\u7f00\u6216\u662f\u540e\u7f00\u7684 % \uff0c\u6216\u662f\u6ca1\u6709\u524d\u540e\u7f00\uff0c\u76f4\u63a5\u5c31\u662f\u4e00\u4e2a % \u3002\u56e0\u4e3a % \u4ee3\u8868\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u5728\u5b9a\u4e49\u597d\u4e86\u7684\u6a21\u5f0f\u4e2d\uff0c\u6211\u4eec\u628a % \u6240\u5339\u914d\u7684\u5185\u5bb9\u53eb\u505a\u201c\u830e\u201d\uff0c\u4f8b\u5982 %.c \u6240\u5339\u914d\u7684\u6587\u4ef6\u201ctest.c\u201d\u4e2d\u201ctest\u201d\u5c31\u662f\u201c\u830e\u201d\u3002\u56e0\u4e3a\u5728\u76ee\u6807\u548c\u4f9d\u8d56\u76ee\u6807\u4e2d\u540c\u65f6\u6709 % \u65f6\uff0c\u4f9d\u8d56\u76ee\u6807\u7684\u201c\u830e\u201d\u4f1a\u4f20\u7ed9\u76ee\u6807\uff0c\u5f53\u505a\u76ee\u6807\u4e2d\u7684\u201c\u830e\u201d\u3002 \u5f53\u4e00\u4e2a\u6a21\u5f0f\u5339\u914d\u5305\u542b\u6709\u659c\u6760\uff08\u5b9e\u9645\u4e5f\u4e0d\u7ecf\u5e38\u5305\u542b\uff09\u7684\u6587\u4ef6\u65f6\uff0c\u90a3\u4e48\u5728\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u65f6\uff0c\u76ee\u5f55\u90e8\u5206\u4f1a\u9996\u5148\u88ab\u79fb\u5f00\uff0c\u7136\u540e\u8fdb\u884c\u5339\u914d\uff0c\u6210\u529f\u540e\uff0c\u518d\u628a\u76ee\u5f55\u52a0\u56de\u53bb\u3002\u5728\u8fdb\u884c\u201c\u830e\u201d\u7684\u4f20\u9012\u65f6\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u8fd9\u4e2a\u6b65\u9aa4\u3002\u4f8b\u5982\u6709\u4e00\u4e2a\u6a21\u5f0f e%t \uff0c\u6587\u4ef6 src/eat \u5339\u914d\u4e8e\u8be5\u6a21\u5f0f\uff0c\u4e8e\u662f src/a \u5c31\u662f\u5176\u201c\u830e\u201d\uff0c\u5982\u679c\u8fd9\u4e2a\u6a21\u5f0f\u5b9a\u4e49\u5728\u4f9d\u8d56\u76ee\u6807\u4e2d\uff0c\u800c\u88ab\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u6a21\u5f0f\u7684\u76ee\u6807\u4e2d\u53c8\u6709\u4e2a\u6a21\u5f0f c%r \uff0c\u90a3\u4e48\uff0c\u76ee\u6807\u5c31\u662f src/car \u3002\uff08\u201c\u830e\u201d\u88ab\u4f20\u9012\uff09","title":"\u6a21\u5f0f\u7684\u5339\u914d"},{"location":"makefile/implicit_rules/#_12","text":"\u4f60\u53ef\u4ee5\u91cd\u8f7d\u5185\u5efa\u7684\u9690\u542b\u89c4\u5219\uff08\u6216\u662f\u5b9a\u4e49\u4e00\u4e2a\u5168\u65b0\u7684\uff09\uff0c\u4f8b\u5982\u4f60\u53ef\u4ee5\u91cd\u65b0\u6784\u9020\u548c\u5185\u5efa\u9690\u542b\u89c4\u5219\u4e0d\u540c\u7684\u547d\u4ee4\uff0c\u5982\uff1a .. code:: makefile %.o : %.c $ ( CC ) - c $ ( CPPFLAGS ) $ ( CFLAGS ) - D $ ( date ) \u4f60\u53ef\u4ee5\u53d6\u6d88\u5185\u5efa\u7684\u9690\u542b\u89c4\u5219\uff0c\u53ea\u8981\u4e0d\u5728\u540e\u9762\u5199\u547d\u4ee4\u5c31\u884c\u3002\u5982\uff1a .. code:: makefile %.o : %.s \u540c\u6837\uff0c\u4f60\u4e5f\u53ef\u4ee5\u91cd\u65b0\u5b9a\u4e49\u4e00\u4e2a\u5168\u65b0\u7684\u9690\u542b\u89c4\u5219\uff0c\u5176\u5728\u9690\u542b\u89c4\u5219\u4e2d\u7684\u4f4d\u7f6e\u53d6\u51b3\u4e8e\u4f60\u5728\u54ea\u91cc\u5199\u4e0b\u8fd9\u4e2a\u89c4\u5219\u3002\u671d\u524d\u7684\u4f4d\u7f6e\u5c31\u9760\u524d\u3002","title":"\u91cd\u8f7d\u5185\u5efa\u9690\u542b\u89c4\u5219"},{"location":"makefile/implicit_rules/#_13","text":"\u540e\u7f00\u89c4\u5219\u662f\u4e00\u4e2a\u6bd4\u8f83\u8001\u5f0f\u7684\u5b9a\u4e49\u9690\u542b\u89c4\u5219\u7684\u65b9\u6cd5\u3002\u540e\u7f00\u89c4\u5219\u4f1a\u88ab\u6a21\u5f0f\u89c4\u5219\u9010\u6b65\u5730\u53d6\u4ee3\u3002\u56e0\u4e3a\u6a21\u5f0f\u89c4\u5219\u66f4\u5f3a\u66f4\u6e05\u6670\u3002\u4e3a\u4e86\u548c\u8001\u7248\u672c\u7684Makefile\u517c\u5bb9\uff0cGNU make\u540c\u6837\u517c\u5bb9\u4e8e\u8fd9\u4e9b\u4e1c\u897f\u3002\u540e\u7f00\u89c4\u5219\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u201c\u53cc\u540e\u7f00\u201d\u548c\u201c\u5355\u540e\u7f00\u201d\u3002 \u53cc\u540e\u7f00\u89c4\u5219\u5b9a\u4e49\u4e86\u4e00\u5bf9\u540e\u7f00\uff1a\u76ee\u6807\u6587\u4ef6\u7684\u540e\u7f00\u548c\u4f9d\u8d56\u76ee\u6807\uff08\u6e90\u6587\u4ef6\uff09\u7684\u540e\u7f00\u3002\u5982 .c.o \u76f8\u5f53\u4e8e %o : %c \u3002\u5355\u540e\u7f00\u89c4\u5219\u53ea\u5b9a\u4e49\u4e00\u4e2a\u540e\u7f00\uff0c\u4e5f\u5c31\u662f\u6e90\u6587\u4ef6\u7684\u540e\u7f00\u3002\u5982 .c \u76f8\u5f53\u4e8e % : %.c \u3002 \u540e\u7f00\u89c4\u5219\u4e2d\u6240\u5b9a\u4e49\u7684\u540e\u7f00\u5e94\u8be5\u662fmake\u6240\u8ba4\u8bc6\u7684\uff0c\u5982\u679c\u4e00\u4e2a\u540e\u7f00\u662fmake\u6240\u8ba4\u8bc6\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u89c4\u5219\u5c31\u662f\u5355\u540e\u7f00\u89c4\u5219\uff0c\u800c\u5982\u679c\u4e24\u4e2a\u8fde\u5728\u4e00\u8d77\u7684\u540e\u7f00\u90fd\u88abmake\u6240\u8ba4\u8bc6\uff0c\u90a3\u5c31\u662f\u53cc\u540e\u7f00\u89c4\u5219\u3002\u4f8b\u5982\uff1a .c \u548c .o \u90fd\u662fmake\u6240\u77e5\u9053\u3002\u56e0\u800c\uff0c\u5982\u679c\u4f60\u5b9a\u4e49\u4e86\u4e00\u4e2a\u89c4\u5219\u662f .c.o \u90a3\u4e48\u5176\u5c31\u662f\u53cc\u540e\u7f00\u89c4\u5219\uff0c\u610f\u4e49\u5c31\u662f .c \u662f\u6e90\u6587\u4ef6\u7684\u540e\u7f00\uff0c .o \u662f\u76ee\u6807\u6587\u4ef6\u7684\u540e\u7f00\u3002\u5982\u4e0b\u793a\u4f8b\uff1a .. code:: makefile .c.o: $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) - o $@ $ lt ; \u540e\u7f00\u89c4\u5219\u4e0d\u5141\u8bb8\u4efb\u4f55\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u5982\u679c\u6709\u4f9d\u8d56\u6587\u4ef6\u7684\u8bdd\uff0c\u90a3\u5c31\u4e0d\u662f\u540e\u7f00\u89c4\u5219\uff0c\u90a3\u4e9b\u540e\u7f00\u7edf\u7edf\u88ab\u8ba4\u4e3a\u662f\u6587\u4ef6\u540d\uff0c\u5982\uff1a .. code:: makefile .c.o: foo.h $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) - o $@ $ lt ; \u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5c31\u662f\u8bf4\uff0c\u6587\u4ef6 .c.o \u4f9d\u8d56\u4e8e\u6587\u4ef6 foo.h \uff0c\u800c\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u8fd9\u6837\uff1a .. code:: makefile %.o: %.c foo.h $ ( CC ) - c $ ( CFLAGS ) $ ( CPPFLAGS ) - o $ @ $ lt ; \u540e\u7f00\u89c4\u5219\u4e2d\uff0c\u5982\u679c\u6ca1\u6709\u547d\u4ee4\uff0c\u90a3\u662f\u6beb\u65e0\u610f\u4e49\u7684\u3002\u56e0\u4e3a\u4ed6\u4e5f\u4e0d\u4f1a\u79fb\u53bb\u5185\u5efa\u7684\u9690\u542b\u89c4\u5219\u3002 \u800c\u8981\u8ba9make\u77e5\u9053\u4e00\u4e9b\u7279\u5b9a\u7684\u540e\u7f00\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4f2a\u76ee\u6807 .SUFFIXES \u6765\u5b9a\u4e49\u6216\u662f\u5220\u9664\uff0c\u5982\uff1a .. code:: makefile .SUFFIXES: .hack .win \u628a\u540e\u7f00 .hack \u548c .win \u52a0\u5165\u540e\u7f00\u5217\u8868\u4e2d\u7684\u672b\u5c3e\u3002 .. code:: makefile .SUFFIXES: # \u5220\u9664\u9ed8\u8ba4\u7684\u540e\u7f00 .SUFFIXES: .c .o .h # \u5b9a\u4e49\u81ea\u5df1\u7684\u540e\u7f00 \u5148\u6e05\u9664\u9ed8\u8ba4\u540e\u7f00\uff0c\u540e\u5b9a\u4e49\u81ea\u5df1\u7684\u540e\u7f00\u5217\u8868\u3002 make\u7684\u53c2\u6570 -r \u6216 -no-builtin-rules \u4e5f\u4f1a\u4f7f\u7528\u5f97\u9ed8\u8ba4\u7684\u540e\u7f00\u5217\u8868\u4e3a\u7a7a\u3002\u800c\u53d8\u91cf SUFFIXE \u88ab\u7528\u6765\u5b9a\u4e49\u9ed8\u8ba4\u7684\u540e\u7f00\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u7528 .SUFFIXES \u6765\u6539\u53d8\u540e\u7f00\u5217\u8868\uff0c\u4f46\u8bf7\u4e0d\u8981\u6539\u53d8\u53d8\u91cf SUFFIXE \u7684\u503c\u3002","title":"\u8001\u5f0f\u98ce\u683c\u7684\u201c\u540e\u7f00\u89c4\u5219\u201d"},{"location":"makefile/implicit_rules/#_14","text":"\u6bd4\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u76ee\u6807\u53eb T\u3002\u4e0b\u9762\u662f\u641c\u7d22\u76ee\u6807T\u7684\u89c4\u5219\u7684\u7b97\u6cd5\u3002\u8bf7\u6ce8\u610f\uff0c\u5728\u4e0b\u9762\uff0c\u6211\u4eec\u6ca1\u6709\u63d0\u5230\u540e\u7f00\u89c4\u5219\uff0c\u539f\u56e0\u662f\uff0c\u6240\u6709\u7684\u540e\u7f00\u89c4\u5219\u5728Makefile\u88ab\u8f7d\u5165\u5185\u5b58\u65f6\uff0c\u4f1a\u88ab\u8f6c\u6362\u6210\u6a21\u5f0f\u89c4\u5219\u3002\u5982\u679c\u76ee\u6807\u662f archive(member) \u7684\u51fd\u6570\u5e93\u6587\u4ef6\u6a21\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b97\u6cd5\u4f1a\u88ab\u8fd0\u884c\u4e24\u6b21\uff0c\u7b2c\u4e00\u6b21\u662f\u627e\u76ee\u6807T\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff0c\u90a3\u4e48\u8fdb\u5165\u7b2c\u4e8c\u6b21\uff0c\u7b2c\u4e8c\u6b21\u4f1a\u628a member \u5f53\u4f5cT\u6765\u641c\u7d22\u3002 \u628aT\u7684\u76ee\u5f55\u90e8\u5206\u5206\u79bb\u51fa\u6765\u3002\u53ebD\uff0c\u800c\u5269\u4f59\u90e8\u5206\u53ebN\u3002\uff08\u5982\uff1a\u5982\u679cT\u662f src/foo.o \uff0c\u90a3\u4e48\uff0cD\u5c31\u662f src/ \uff0cN\u5c31\u662f foo.o \uff09 \u521b\u5efa\u6240\u6709\u5339\u914d\u4e8eT\u6216\u662fN\u7684\u6a21\u5f0f\u89c4\u5219\u5217\u8868\u3002 \u5982\u679c\u5728\u6a21\u5f0f\u89c4\u5219\u5217\u8868\u4e2d\u6709\u5339\u914d\u6240\u6709\u6587\u4ef6\u7684\u6a21\u5f0f\uff0c\u5982 % \uff0c\u90a3\u4e48\u4ece\u5217\u8868\u4e2d\u79fb\u9664\u5176\u5b83\u7684\u6a21\u5f0f\u3002 \u79fb\u9664\u5217\u8868\u4e2d\u6ca1\u6709\u547d\u4ee4\u7684\u89c4\u5219\u3002 \u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5728\u5217\u8868\u4e2d\u7684\u6a21\u5f0f\u89c4\u5219\uff1a \u63a8\u5bfc\u5176\u201c\u830e\u201dS\uff0cS\u5e94\u8be5\u662fT\u6216\u662fN\u5339\u914d\u4e8e\u6a21\u5f0f\u4e2d % \u975e\u7a7a\u7684\u90e8\u5206\u3002 \u8ba1\u7b97\u4f9d\u8d56\u6587\u4ef6\u3002\u628a\u4f9d\u8d56\u6587\u4ef6\u4e2d\u7684 % \u90fd\u66ff\u6362\u6210\u201c\u830e\u201dS\u3002\u5982\u679c\u76ee\u6807\u6a21\u5f0f\u4e2d\u6ca1\u6709\u5305\u542b\u659c\u6846\u5b57\u7b26\uff0c\u800c\u628aD\u52a0\u5728\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6\u7684\u5f00\u5934\u3002 \u6d4b\u8bd5\u662f\u5426\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u90fd\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\u3002\uff08\u5982\u679c\u6709\u4e00\u4e2a\u6587\u4ef6\u88ab\u5b9a\u4e49\u6210\u53e6\u5916\u4e00\u4e2a\u89c4\u5219\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u663e\u5f0f\u89c4\u5219 \u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6587\u4ef6\u5c31\u53eb\u201c\u7406\u5f53\u5b58\u5728\u201d\uff09 \u5982\u679c\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\uff0c\u6216\u662f\u5c31\u6ca1\u6709\u4f9d\u8d56\u6587\u4ef6\u3002\u90a3\u4e48\u8fd9\u6761\u89c4\u5219\u5c06\u88ab\u91c7\u7528\uff0c\u9000\u51fa\u8be5\u7b97\u6cd5\u3002 \u5982\u679c\u7ecf\u8fc7\u7b2c5\u6b65\uff0c\u6ca1\u6709\u6a21\u5f0f\u89c4\u5219\u88ab\u627e\u5230\uff0c\u90a3\u4e48\u5c31\u505a\u66f4\u8fdb\u4e00\u6b65\u7684\u641c\u7d22\u3002\u5bf9\u4e8e\u5b58\u5728\u4e8e\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\uff1a \u5982\u679c\u89c4\u5219\u662f\u7ec8\u6b62\u89c4\u5219\uff0c\u90a3\u5c31\u5ffd\u7565\u5b83\uff0c\u7ee7\u7eed\u4e0b\u4e00\u6761\u6a21\u5f0f\u89c4\u5219\u3002 \u8ba1\u7b97\u4f9d\u8d56\u6587\u4ef6\u3002\uff08\u540c\u7b2c5\u6b65\uff09 \u6d4b\u8bd5\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u662f\u5426\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\u3002 \u5bf9\u4e8e\u4e0d\u5b58\u5728\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u9012\u5f52\u8c03\u7528\u8fd9\u4e2a\u7b97\u6cd5\u67e5\u627e\u4ed6\u662f\u5426\u53ef\u4ee5\u88ab\u9690\u542b\u89c4\u5219\u627e\u5230\u3002 \u5982\u679c\u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\u5b58\u5728\u6216\u662f\u7406\u5f53\u5b58\u5728\uff0c\u6216\u662f\u5c31\u6839\u672c\u6ca1\u6709\u4f9d\u8d56\u6587\u4ef6\u3002\u90a3\u4e48\u8fd9\u6761\u89c4\u5219\u88ab\u91c7\u7528\uff0c\u9000\u51fa\u8be5\u7b97\u6cd5\u3002 \u5982\u679c\u6ca1\u6709\u9690\u542b\u89c4\u5219\u53ef\u4ee5\u4f7f\u7528\uff0c\u67e5\u770b .DEFAULT \u89c4\u5219\uff0c\u5982\u679c\u6709\uff0c\u91c7\u7528\uff0c\u628a .DEFAULT \u7684\u547d\u4ee4\u7ed9T\u4f7f\u7528\u3002 \u4e00\u65e6\u89c4\u5219\u88ab\u627e\u5230\uff0c\u5c31\u4f1a\u6267\u884c\u5176\u76f8\u5f53\u7684\u547d\u4ee4\uff0c\u800c\u6b64\u65f6\uff0c\u6211\u4eec\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u7684\u503c\u624d\u4f1a\u751f\u6210\u3002","title":"\u9690\u542b\u89c4\u5219\u641c\u7d22\u7b97\u6cd5"},{"location":"makefile/introduction/","text":"============ makefile\u4ecb\u7ecd ============ make\u547d\u4ee4\u6267\u884c\u65f6\uff0c\u9700\u8981\u4e00\u4e2amakefile\u6587\u4ef6\uff0c\u4ee5\u544a\u8bc9make\u547d\u4ee4\u9700\u8981\u600e\u4e48\u6837\u7684\u53bb\u7f16\u8bd1\u548c\u94fe\u63a5\u7a0b\u5e8f\u3002 \u9996\u5148\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u793a\u4f8b\u6765\u8bf4\u660emakefile\u7684\u4e66\u5199\u89c4\u5219\uff0c\u4ee5\u4fbf\u7ed9\u5927\u5bb6\u4e00\u4e2a\u611f\u6027\u8ba4\u8bc6\u3002\u8fd9\u4e2a\u793a\u4f8b\u6765\u6e90\u4e8egnu\u7684make\u4f7f\u7528\u624b\u518c\uff0c\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7684\u5de5\u7a0b\u67098\u4e2ac\u6587\u4ef6\uff0c\u548c3\u4e2a\u5934\u6587\u4ef6\uff0c\u6211\u4eec\u8981\u5199\u4e00\u4e2amakefile\u6765\u544a\u8bc9make\u547d\u4ee4\u5982\u4f55\u7f16\u8bd1\u548c\u94fe\u63a5\u8fd9\u51e0\u4e2a\u6587\u4ef6\u3002\u6211\u4eec\u7684\u89c4\u5219\u662f\uff1a \u5982\u679c\u8fd9\u4e2a\u5de5\u7a0b\u6ca1\u6709\u7f16\u8bd1\u8fc7\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u6240\u6709c\u6587\u4ef6\u90fd\u8981\u7f16\u8bd1\u5e76\u88ab\u94fe\u63a5\u3002 \u5982\u679c\u8fd9\u4e2a\u5de5\u7a0b\u7684\u67d0\u51e0\u4e2ac\u6587\u4ef6\u88ab\u4fee\u6539\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u7f16\u8bd1\u88ab\u4fee\u6539\u7684c\u6587\u4ef6\uff0c\u5e76\u94fe\u63a5\u76ee\u6807\u7a0b\u5e8f\u3002 \u5982\u679c\u8fd9\u4e2a\u5de5\u7a0b\u7684\u5934\u6587\u4ef6\u88ab\u6539\u53d8\u4e86\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u7f16\u8bd1\u5f15\u7528\u4e86\u8fd9\u51e0\u4e2a\u5934\u6587\u4ef6\u7684c\u6587\u4ef6\uff0c\u5e76\u94fe\u63a5\u76ee\u6807\u7a0b\u5e8f\u3002 \u53ea\u8981\u6211\u4eec\u7684makefile\u5199\u5f97\u591f\u597d\uff0c\u6240\u6709\u7684\u8fd9\u4e00\u5207\uff0c\u6211\u4eec\u53ea\u7528\u4e00\u4e2amake\u547d\u4ee4\u5c31\u53ef\u4ee5\u5b8c\u6210\uff0cmake\u547d\u4ee4\u4f1a\u81ea\u52a8\u667a\u80fd\u5730\u6839\u636e\u5f53\u524d\u7684\u6587\u4ef6\u4fee\u6539\u7684\u60c5\u51b5\u6765\u786e\u5b9a\u54ea\u4e9b\u6587\u4ef6\u9700\u8981\u91cd\u7f16\u8bd1\uff0c\u4ece\u800c\u81ea\u52a8\u7f16\u8bd1\u6240\u9700\u8981\u7684\u6587\u4ef6\u548c\u94fe\u63a5\u76ee\u6807\u7a0b\u5e8f\u3002 makefile\u7684\u89c4\u5219 \u5728\u8bb2\u8ff0\u8fd9\u4e2amakefile\u4e4b\u524d\uff0c\u8fd8\u662f\u8ba9\u6211\u4eec\u5148\u6765\u7c97\u7565\u5730\u770b\u4e00\u770bmakefile\u7684\u89c4\u5219\u3002 .. code:: makefile target ... : prerequisites ... command ... ... target \u53ef\u4ee5\u662f\u4e00\u4e2aobject file\uff08\u76ee\u6807\u6587\u4ef6\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6267\u884c\u6587\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u662f\u4e00\u4e2a\u6807\u7b7e\uff08label\uff09\u3002\u5bf9\u4e8e\u6807\u7b7e\u8fd9\u79cd\u7279\u6027\uff0c\u5728\u540e\u7eed\u7684\u201c\u4f2a\u76ee\u6807\u201d\u7ae0\u8282\u4e2d\u4f1a\u6709\u53d9\u8ff0\u3002 prerequisites \u751f\u6210\u8be5target\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\u548c/\u6216target command \u8be5target\u8981\u6267\u884c\u7684\u547d\u4ee4\uff08\u4efb\u610f\u7684shell\u547d\u4ee4\uff09 \u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0ctarget\u8fd9\u4e00\u4e2a\u6216\u591a\u4e2a\u7684\u76ee\u6807\u6587\u4ef6\u4f9d\u8d56\u4e8eprerequisites\u4e2d\u7684\u6587\u4ef6\uff0c\u5176\u751f\u6210\u89c4\u5219\u5b9a\u4e49\u5728command\u4e2d\u3002\u8bf4\u767d\u4e00\u70b9\u5c31\u662f\u8bf4: :: prerequisites\u4e2d\u5982\u679c\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7684\u6587\u4ef6\u6bd4target\u6587\u4ef6\u8981\u65b0\u7684\u8bdd\uff0ccommand\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u5c31\u4f1a\u88ab\u6267\u884c\u3002 \u8fd9\u5c31\u662fmakefile\u7684\u89c4\u5219\uff0c\u4e5f\u5c31\u662fmakefile\u4e2d\u6700\u6838\u5fc3\u7684\u5185\u5bb9\u3002 \u8bf4\u5230\u5e95\uff0cmakefile\u7684\u4e1c\u897f\u5c31\u662f\u8fd9\u6837\u4e00\u70b9\uff0c\u597d\u50cf\u6211\u7684\u8fd9\u7bc7\u6587\u6863\u4e5f\u8be5\u7ed3\u675f\u4e86\u3002\u5475\u5475\u3002\u8fd8\u4e0d\u5c3d\u7136\uff0c\u8fd9\u662fmakefile\u7684\u4e3b\u7ebf\u548c\u6838\u5fc3\uff0c\u4f46\u8981\u5199\u597d\u4e00\u4e2amakefile\u8fd8\u4e0d\u591f\uff0c\u6211\u4f1a\u5728\u540e\u9762\u4e00\u70b9\u4e00\u70b9\u5730\u7ed3\u5408\u6211\u7684\u5de5\u4f5c\u7ecf\u9a8c\u7ed9\u4f60\u6162\u6162\u9053\u6765\u3002\u5185\u5bb9\u8fd8\u591a\u7740\u5462\u3002:) \u4e00\u4e2a\u793a\u4f8b \u6b63\u5982\u524d\u9762\u6240\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u5de5\u7a0b\u67093\u4e2a\u5934\u6587\u4ef6\u548c8\u4e2ac\u6587\u4ef6\uff0c\u4e3a\u4e86\u5b8c\u6210\u524d\u9762\u6240\u8ff0\u7684\u90a3\u4e09\u4e2a\u89c4\u5219\uff0c\u6211\u4eec\u7684makefile\u5e94\u8be5\u662f\u4e0b\u9762\u7684\u8fd9\u4e2a\u6837\u5b50\u7684\u3002 .. code:: makefile edit : main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o cc - o edit main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o main . o : main . c defs . h cc - c main . c kbd . o : kbd . c defs . h command . h cc - c kbd . c command . o : command . c defs . h command . h cc - c command . c display . o : display . c defs . h buffer . h cc - c display . c insert . o : insert . c defs . h buffer . h cc - c insert . c search . o : search . c defs . h buffer . h cc - c search . c files . o : files . c defs . h buffer . h command . h cc - c files . c utils . o : utils . c defs . h cc - c utils . c clean : rm edit main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o \u53cd\u659c\u6760\uff08 \\ \uff09\u662f\u6362\u884c\u7b26\u7684\u610f\u601d\u3002\u8fd9\u6837\u6bd4\u8f83\u4fbf\u4e8emakefile\u7684\u9605\u8bfb\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5185\u5bb9\u4fdd\u5b58\u5728\u540d\u5b57\u4e3a\u201cmakefile\u201d\u6216\u201cMakefile\u201d\u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u5728\u8be5\u76ee\u5f55\u4e0b\u76f4\u63a5\u8f93\u5165\u547d\u4ee4 make \u5c31\u53ef\u4ee5\u751f\u6210\u6267\u884c\u6587\u4ef6edit\u3002\u5982\u679c\u8981\u5220\u9664\u6267\u884c\u6587\u4ef6\u548c\u6240\u6709\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff0c\u90a3\u4e48\uff0c\u53ea\u8981\u7b80\u5355\u5730\u6267\u884c\u4e00\u4e0b make clean \u5c31\u53ef\u4ee5\u4e86\u3002 \u5728\u8fd9\u4e2amakefile\u4e2d\uff0c\u76ee\u6807\u6587\u4ef6\uff08target\uff09\u5305\u542b\uff1a\u6267\u884c\u6587\u4ef6edit\u548c\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08 *.o \uff09\uff0c\u4f9d\u8d56\u6587\u4ef6\uff08prerequisites\uff09\u5c31\u662f\u5192\u53f7\u540e\u9762\u7684\u90a3\u4e9b .c \u6587\u4ef6\u548c .h \u6587\u4ef6\u3002\u6bcf\u4e00\u4e2a .o \u6587\u4ef6\u90fd\u6709\u4e00\u7ec4\u4f9d\u8d56\u6587\u4ef6\uff0c\u800c\u8fd9\u4e9b .o \u6587\u4ef6\u53c8\u662f\u6267\u884c\u6587\u4ef6 edit \u7684\u4f9d\u8d56\u6587\u4ef6\u3002\u4f9d\u8d56\u5173\u7cfb\u7684\u5b9e\u8d28\u5c31\u662f\u8bf4\u660e\u4e86\u76ee\u6807\u6587\u4ef6\u662f\u7531\u54ea\u4e9b\u6587\u4ef6\u751f\u6210\u7684\uff0c\u6362\u8a00\u4e4b\uff0c\u76ee\u6807\u6587\u4ef6\u662f\u54ea\u4e9b\u6587\u4ef6\u66f4\u65b0\u7684\u3002 \u5728\u5b9a\u4e49\u597d\u4f9d\u8d56\u5173\u7cfb\u540e\uff0c\u540e\u7eed\u7684\u90a3\u4e00\u884c\u5b9a\u4e49\u4e86\u5982\u4f55\u751f\u6210\u76ee\u6807\u6587\u4ef6\u7684\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\uff0c\u4e00\u5b9a\u8981\u4ee5\u4e00\u4e2a Tab \u952e\u4f5c\u4e3a\u5f00\u5934\u3002\u8bb0\u4f4f\uff0cmake\u5e76\u4e0d\u7ba1\u547d\u4ee4\u662f\u600e\u4e48\u5de5\u4f5c\u7684\uff0c\u4ed6\u53ea\u7ba1\u6267\u884c\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u3002make\u4f1a\u6bd4\u8f83targets\u6587\u4ef6\u548cprerequisites\u6587\u4ef6\u7684\u4fee\u6539\u65e5\u671f\uff0c\u5982\u679cprerequisites\u6587\u4ef6\u7684\u65e5\u671f\u8981\u6bd4targets\u6587\u4ef6\u7684\u65e5\u671f\u8981\u65b0\uff0c\u6216\u8005target\u4e0d\u5b58\u5728\u7684\u8bdd\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4f1a\u6267\u884c\u540e\u7eed\u5b9a\u4e49\u7684\u547d\u4ee4\u3002 \u8fd9\u91cc\u8981\u8bf4\u660e\u4e00\u70b9\u7684\u662f\uff0c clean \u4e0d\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u53ea\u4e0d\u8fc7\u662f\u4e00\u4e2a\u52a8\u4f5c\u540d\u5b57\uff0c\u6709\u70b9\u50cfc\u8bed\u8a00\u4e2d\u7684lable\u4e00\u6837\uff0c\u5176\u5192\u53f7\u540e\u4ec0\u4e48\u4e5f\u6ca1\u6709\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4e0d\u4f1a\u81ea\u52a8\u53bb\u627e\u5b83\u7684\u4f9d\u8d56\u6027\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u81ea\u52a8\u6267\u884c\u5176\u540e\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u3002\u8981\u6267\u884c\u5176\u540e\u7684\u547d\u4ee4\uff0c\u5c31\u8981\u5728make\u547d\u4ee4\u540e\u660e\u663e\u5f97\u6307\u51fa\u8fd9\u4e2alable\u7684\u540d\u5b57\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u975e\u5e38\u6709\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2amakefile\u4e2d\u5b9a\u4e49\u4e0d\u7528\u7684\u7f16\u8bd1\u6216\u662f\u548c\u7f16\u8bd1\u65e0\u5173\u7684\u547d\u4ee4\uff0c\u6bd4\u5982\u7a0b\u5e8f\u7684\u6253\u5305\uff0c\u7a0b\u5e8f\u7684\u5907\u4efd\uff0c\u7b49\u7b49\u3002 make\u662f\u5982\u4f55\u5de5\u4f5c\u7684 \u5728\u9ed8\u8ba4\u7684\u65b9\u5f0f\u4e0b\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u53ea\u8f93\u5165 make \u547d\u4ee4\u3002\u90a3\u4e48\uff0c make\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u627e\u540d\u5b57\u53eb\u201cMakefile\u201d\u6216\u201cmakefile\u201d\u7684\u6587\u4ef6\u3002 \u5982\u679c\u627e\u5230\uff0c\u5b83\u4f1a\u627e\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\uff08target\uff09\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u4ed6\u4f1a\u627e\u5230\u201cedit\u201d\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5e76\u628a\u8fd9\u4e2a\u6587\u4ef6\u4f5c\u4e3a\u6700\u7ec8\u7684\u76ee\u6807\u6587\u4ef6\u3002 \u5982\u679cedit\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u6216\u662fedit\u6240\u4f9d\u8d56\u7684\u540e\u9762\u7684 .o \u6587\u4ef6\u7684\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u8981\u6bd4 edit \u8fd9\u4e2a\u6587\u4ef6\u65b0\uff0c\u90a3\u4e48\uff0c\u4ed6\u5c31\u4f1a\u6267\u884c\u540e\u9762\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u6765\u751f\u6210 edit \u8fd9\u4e2a\u6587\u4ef6\u3002 \u5982\u679c edit \u6240\u4f9d\u8d56\u7684 .o \u6587\u4ef6\u4e5f\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48make\u4f1a\u5728\u5f53\u524d\u6587\u4ef6\u4e2d\u627e\u76ee\u6807\u4e3a .o \u6587\u4ef6\u7684\u4f9d\u8d56\u6027\uff0c\u5982\u679c\u627e\u5230\u5219\u518d\u6839\u636e\u90a3\u4e00\u4e2a\u89c4\u5219\u751f\u6210 .o \u6587\u4ef6\u3002\uff08\u8fd9\u6709\u70b9\u50cf\u4e00\u4e2a\u5806\u6808\u7684\u8fc7\u7a0b\uff09 \u5f53\u7136\uff0c\u4f60\u7684C\u6587\u4ef6\u548cH\u6587\u4ef6\u662f\u5b58\u5728\u7684\u5566\uff0c\u4e8e\u662fmake\u4f1a\u751f\u6210 .o \u6587\u4ef6\uff0c\u7136\u540e\u518d\u7528 .o \u6587\u4ef6\u751f\u6210make\u7684\u7ec8\u6781\u4efb\u52a1\uff0c\u4e5f\u5c31\u662f\u6267\u884c\u6587\u4ef6 edit \u4e86\u3002 \u8fd9\u5c31\u662f\u6574\u4e2amake\u7684\u4f9d\u8d56\u6027\uff0cmake\u4f1a\u4e00\u5c42\u53c8\u4e00\u5c42\u5730\u53bb\u627e\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u76f4\u5230\u6700\u7ec8\u7f16\u8bd1\u51fa\u7b2c\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u3002\u5728\u627e\u5bfb\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u6bd4\u5982\u6700\u540e\u88ab\u4f9d\u8d56\u7684\u6587\u4ef6\u627e\u4e0d\u5230\uff0c\u90a3\u4e48make\u5c31\u4f1a\u76f4\u63a5\u9000\u51fa\uff0c\u5e76\u62a5\u9519\uff0c\u800c\u5bf9\u4e8e\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u7684\u9519\u8bef\uff0c\u6216\u662f\u7f16\u8bd1\u4e0d\u6210\u529f\uff0cmake\u6839\u672c\u4e0d\u7406\u3002make\u53ea\u7ba1\u6587\u4ef6\u7684\u4f9d\u8d56\u6027\uff0c\u5373\uff0c\u5982\u679c\u5728\u6211\u627e\u4e86\u4f9d\u8d56\u5173\u7cfb\u4e4b\u540e\uff0c\u5192\u53f7\u540e\u9762\u7684\u6587\u4ef6\u8fd8\u662f\u4e0d\u5728\uff0c\u90a3\u4e48\u5bf9\u4e0d\u8d77\uff0c\u6211\u5c31\u4e0d\u5de5\u4f5c\u5566\u3002 \u901a\u8fc7\u4e0a\u8ff0\u5206\u6790\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u50cfclean\u8fd9\u79cd\uff0c\u6ca1\u6709\u88ab\u7b2c\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u76f4\u63a5\u6216\u95f4\u63a5\u5173\u8054\uff0c\u90a3\u4e48\u5b83\u540e\u9762\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u5c06\u4e0d\u4f1a\u88ab\u81ea\u52a8\u6267\u884c\uff0c\u4e0d\u8fc7\uff0c\u6211\u4eec\u53ef\u4ee5\u663e\u793a\u8981make\u6267\u884c\u3002\u5373\u547d\u4ee4\u2014\u2014 make clean \uff0c\u4ee5\u6b64\u6765\u6e05\u9664\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u4ee5\u4fbf\u91cd\u7f16\u8bd1\u3002 \u4e8e\u662f\u5728\u6211\u4eec\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u8fd9\u4e2a\u5de5\u7a0b\u5df2\u88ab\u7f16\u8bd1\u8fc7\u4e86\uff0c\u5f53\u6211\u4eec\u4fee\u6539\u4e86\u5176\u4e2d\u4e00\u4e2a\u6e90\u6587\u4ef6\uff0c\u6bd4\u5982 file.c \uff0c\u90a3\u4e48\u6839\u636e\u6211\u4eec\u7684\u4f9d\u8d56\u6027\uff0c\u6211\u4eec\u7684\u76ee\u6807 file.o \u4f1a\u88ab\u91cd\u7f16\u8bd1\uff08\u4e5f\u5c31\u662f\u5728\u8fd9\u4e2a\u4f9d\u6027\u5173\u7cfb\u540e\u9762\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\uff09\uff0c\u4e8e\u662f file.o \u7684\u6587\u4ef6\u4e5f\u662f\u6700\u65b0\u7684\u5566\uff0c\u4e8e\u662f file.o \u7684\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u8981\u6bd4 edit \u8981\u65b0\uff0c\u6240\u4ee5 edit \u4e5f\u4f1a\u88ab\u91cd\u65b0\u94fe\u63a5\u4e86\uff08\u8be6\u89c1 edit \u76ee\u6807\u6587\u4ef6\u540e\u5b9a\u4e49\u7684\u547d\u4ee4\uff09\u3002 \u800c\u5982\u679c\u6211\u4eec\u6539\u53d8\u4e86 command.h \uff0c\u90a3\u4e48\uff0c kdb.o \u3001 command.o \u548c files.o \u90fd\u4f1a\u88ab\u91cd\u7f16\u8bd1\uff0c\u5e76\u4e14\uff0c edit \u4f1a\u88ab\u91cd\u94fe\u63a5\u3002 makefile\u4e2d\u4f7f\u7528\u53d8\u91cf \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5148\u8ba9\u6211\u4eec\u770b\u770bedit\u7684\u89c4\u5219\uff1a .. code:: makefile edit : main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o cc - o edit main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o \u6211\u4eec\u53ef\u4ee5\u770b\u5230 .o \u6587\u4ef6\u7684\u5b57\u7b26\u4e32\u88ab\u91cd\u590d\u4e86\u4e24\u6b21\uff0c\u5982\u679c\u6211\u4eec\u7684\u5de5\u7a0b\u9700\u8981\u52a0\u5165\u4e00\u4e2a\u65b0\u7684 .o \u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5728\u4e24\u4e2a\u5730\u65b9\u52a0\uff08\u5e94\u8be5\u662f\u4e09\u4e2a\u5730\u65b9\uff0c\u8fd8\u6709\u4e00\u4e2a\u5730\u65b9\u5728clean\u4e2d\uff09\u3002\u5f53\u7136\uff0c\u6211\u4eec\u7684makefile\u5e76\u4e0d\u590d\u6742\uff0c\u6240\u4ee5\u5728\u4e24\u4e2a\u5730\u65b9\u52a0\u4e5f\u4e0d\u7d2f\uff0c\u4f46\u5982\u679cmakefile\u53d8\u5f97\u590d\u6742\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u6709\u53ef\u80fd\u4f1a\u5fd8\u6389\u4e00\u4e2a\u9700\u8981\u52a0\u5165\u7684\u5730\u65b9\uff0c\u800c\u5bfc\u81f4\u7f16\u8bd1\u5931\u8d25\u3002\u6240\u4ee5\uff0c\u4e3a\u4e86makefile\u7684\u6613\u7ef4\u62a4\uff0c\u5728makefile\u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\u3002makefile\u7684\u53d8\u91cf\u4e5f\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7406\u89e3\u6210C\u8bed\u8a00\u4e2d\u7684\u5b8f\u53ef\u80fd\u4f1a\u66f4\u597d\u3002 \u6bd4\u5982\uff0c\u6211\u4eec\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\uff0c\u53eb objects \uff0c OBJECTS \uff0c objs \uff0c OBJS \uff0c obj \u6216\u662f OBJ \\ \uff0c\u53cd\u6b63\u4e0d\u7ba1\u4ec0\u4e48\u5566\uff0c\u53ea\u8981\u80fd\u591f\u8868\u793aobj\u6587\u4ef6\u5c31\u884c\u4e86\u3002\u6211\u4eec\u5728makefile\u4e00\u5f00\u59cb\u5c31\u8fd9\u6837\u5b9a\u4e49\uff1a .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o \u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5728\u6211\u4eec\u7684makefile\u4e2d\u4ee5 $(objects) \u7684\u65b9\u5f0f\u6765\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u4e86\uff0c\u4e8e\u662f\u6211\u4eec\u7684\u6539\u826f\u7248makefile\u5c31\u53d8\u6210\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\uff1a .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : main.c defs.h cc -c main.c kbd.o : kbd.c defs.h command.h cc -c kbd.c command.o : command.c defs.h command.h cc -c command.c display.o : display.c defs.h buffer.h cc -c display.c insert.o : insert.c defs.h buffer.h cc -c insert.c search.o : search.c defs.h buffer.h cc -c search.c files.o : files.c defs.h buffer.h command.h cc -c files.c utils.o : utils.c defs.h cc -c utils.c clean : rm edit $(objects) \u4e8e\u662f\u5982\u679c\u6709\u65b0\u7684 .o \u6587\u4ef6\u52a0\u5165\uff0c\u6211\u4eec\u53ea\u9700\u7b80\u5355\u5730\u4fee\u6539\u4e00\u4e0b objects \u53d8\u91cf\u5c31\u53ef\u4ee5\u4e86\u3002 \u5173\u4e8e\u53d8\u91cf\u66f4\u591a\u7684\u8bdd\u9898\uff0c\u6211\u4f1a\u5728\u540e\u7eed\u7ed9\u4f60\u4e00\u4e00\u9053\u6765\u3002 \u8ba9make\u81ea\u52a8\u63a8\u5bfc GNU\u7684make\u5f88\u5f3a\u5927\uff0c\u5b83\u53ef\u4ee5\u81ea\u52a8\u63a8\u5bfc\u6587\u4ef6\u4ee5\u53ca\u6587\u4ef6\u4f9d\u8d56\u5173\u7cfb\u540e\u9762\u7684\u547d\u4ee4\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u6ca1\u5fc5\u8981\u53bb\u5728\u6bcf\u4e00\u4e2a .o \u6587\u4ef6\u540e\u90fd\u5199\u4e0a\u7c7b\u4f3c\u7684\u547d\u4ee4\uff0c\u56e0\u4e3a\uff0c\u6211\u4eec\u7684make\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5e76\u81ea\u5df1\u63a8\u5bfc\u547d\u4ee4\u3002 \u53ea\u8981make\u770b\u5230\u4e00\u4e2a .o \u6587\u4ef6\uff0c\u5b83\u5c31\u4f1a\u81ea\u52a8\u7684\u628a .c \u6587\u4ef6\u52a0\u5728\u4f9d\u8d56\u5173\u7cfb\u4e2d\uff0c\u5982\u679cmake\u627e\u5230\u4e00\u4e2a whatever.o \uff0c\u90a3\u4e48 whatever.c \u5c31\u4f1a\u662f whatever.o \u7684\u4f9d\u8d56\u6587\u4ef6\u3002\u5e76\u4e14 cc -c whatever.c \u4e5f\u4f1a\u88ab\u63a8\u5bfc\u51fa\u6765\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u7684makefile\u518d\u4e5f\u4e0d\u7528\u5199\u5f97\u8fd9\u4e48\u590d\u6742\u3002\u6211\u4eec\u7684\u65b0makefile\u53c8\u51fa\u7089\u4e86\u3002 .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : defs.h kbd.o : defs.h command.h command.o : defs.h command.h display.o : defs.h buffer.h insert.o : defs.h buffer.h search.o : defs.h buffer.h files.o : defs.h buffer.h command.h utils.o : defs.h .PHONY : clean clean : rm edit $(objects) \u8fd9\u79cd\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662fmake\u7684\u201c\u9690\u6666\u89c4\u5219\u201d\u3002\u4e0a\u9762\u6587\u4ef6\u5185\u5bb9\u4e2d\uff0c .PHONY \u8868\u793a clean \u662f\u4e2a\u4f2a\u76ee\u6807\u6587\u4ef6\u3002 \u5173\u4e8e\u66f4\u4e3a\u8be6\u7ec6\u7684\u201c\u9690\u6666\u89c4\u5219\u201d\u548c\u201c\u4f2a\u76ee\u6807\u6587\u4ef6\u201d\uff0c\u6211\u4f1a\u5728\u540e\u7eed\u7ed9\u4f60\u4e00\u4e00\u9053\u6765\u3002 \u53e6\u7c7b\u98ce\u683c\u7684makefiles \u65e2\u7136\u6211\u4eec\u7684make\u53ef\u4ee5\u81ea\u52a8\u63a8\u5bfc\u547d\u4ee4\uff0c\u90a3\u4e48\u6211\u770b\u5230\u90a3\u5806 .o \u548c .h \u7684\u4f9d\u8d56\u5c31\u6709\u70b9\u4e0d\u723d\uff0c\u90a3\u4e48\u591a\u7684\u91cd\u590d\u7684 .h \uff0c\u80fd\u4e0d\u80fd\u628a\u5176\u6536\u62e2\u8d77\u6765\uff0c\u597d\u5427\uff0c\u6ca1\u6709\u95ee\u9898\uff0c\u8fd9\u4e2a\u5bf9\u4e8emake\u6765\u8bf4\u5f88\u5bb9\u6613\uff0c\u8c01\u53eb\u5b83\u63d0\u4f9b\u4e86\u81ea\u52a8\u63a8\u5bfc\u547d\u4ee4\u548c\u6587\u4ef6\u7684\u529f\u80fd\u5462\uff1f\u6765\u770b\u770b\u6700\u65b0\u98ce\u683c\u7684makefile\u5427\u3002 .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) $(objects) : defs.h kbd.o command.o files.o : command.h display.o insert.o search.o files.o : buffer.h .PHONY : clean clean : rm edit $(objects) \u8fd9\u79cd\u98ce\u683c\uff0c\u8ba9\u6211\u4eec\u7684makefile\u53d8\u5f97\u5f88\u7b80\u5355\uff0c\u4f46\u6211\u4eec\u7684\u6587\u4ef6\u4f9d\u8d56\u5173\u7cfb\u5c31\u663e\u5f97\u6709\u70b9\u51cc\u4e71\u4e86\u3002\u9c7c\u548c\u718a\u638c\u4e0d\u53ef\u517c\u5f97\u3002\u8fd8\u770b\u4f60\u7684\u559c\u597d\u4e86\u3002\u6211\u662f\u4e0d\u559c\u6b22\u8fd9\u79cd\u98ce\u683c\u7684\uff0c\u4e00\u662f\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u770b\u4e0d\u6e05\u695a\uff0c\u4e8c\u662f\u5982\u679c\u6587\u4ef6\u4e00\u591a\uff0c\u8981\u52a0\u5165\u51e0\u4e2a\u65b0\u7684 .o \u6587\u4ef6\uff0c\u90a3\u5c31\u7406\u4e0d\u6e05\u695a\u4e86\u3002 \u6e05\u7a7a\u76ee\u6807\u6587\u4ef6\u7684\u89c4\u5219 \u6bcf\u4e2aMakefile\u4e2d\u90fd\u5e94\u8be5\u5199\u4e00\u4e2a\u6e05\u7a7a\u76ee\u6807\u6587\u4ef6\uff08 .o \u548c\u6267\u884c\u6587\u4ef6\uff09\u7684\u89c4\u5219\uff0c\u8fd9\u4e0d\u4ec5\u4fbf\u4e8e\u91cd\u7f16\u8bd1\uff0c\u4e5f\u5f88\u5229\u4e8e\u4fdd\u6301\u6587\u4ef6\u7684\u6e05\u6d01\u3002\u8fd9\u662f\u4e00\u4e2a\u201c\u4fee\u517b\u201d\uff08\u5475\u5475\uff0c\u8fd8\u8bb0\u5f97\u6211\u7684\u300a\u7f16\u7a0b\u4fee\u517b\u300b\u5417\uff09\u3002\u4e00\u822c\u7684\u98ce\u683c\u90fd\u662f\uff1a .. code:: makefile clean : rm edit $ ( objects ) \u66f4\u4e3a\u7a33\u5065\u7684\u505a\u6cd5\u662f\uff1a .. code:: makefile .PHONY : clean clean : - rm edit $ ( objects ) \u524d\u9762\u8bf4\u8fc7\uff0c .PHONY \u8868\u793a clean \u662f\u4e00\u4e2a\u201c\u4f2a\u76ee\u6807\u201d\u3002\u800c\u5728 rm \u547d\u4ee4\u524d\u9762\u52a0\u4e86\u4e00\u4e2a\u5c0f\u51cf\u53f7\u7684\u610f\u601d\u5c31\u662f\uff0c\u4e5f\u8bb8\u67d0\u4e9b\u6587\u4ef6\u51fa\u73b0\u95ee\u9898\uff0c\u4f46\u4e0d\u8981\u7ba1\uff0c\u7ee7\u7eed\u505a\u540e\u9762\u7684\u4e8b\u3002\u5f53\u7136\uff0c clean \u7684\u89c4\u5219\u4e0d\u8981\u653e\u5728\u6587\u4ef6\u7684\u5f00\u5934\uff0c\u4e0d\u7136\uff0c\u8fd9\u5c31\u4f1a\u53d8\u6210make\u7684\u9ed8\u8ba4\u76ee\u6807\uff0c\u76f8\u4fe1\u8c01\u4e5f\u4e0d\u613f\u610f\u8fd9\u6837\u3002\u4e0d\u6210\u6587\u7684\u89c4\u77e9\u662f\u2014\u2014\u201cclean\u4ece\u6765\u90fd\u662f\u653e\u5728\u6587\u4ef6\u7684\u6700\u540e\u201d\u3002 \u4e0a\u9762\u5c31\u662f\u4e00\u4e2amakefile\u7684\u6982\u8c8c\uff0c\u4e5f\u662fmakefile\u7684\u57fa\u7840\uff0c\u4e0b\u9762\u8fd8\u6709\u5f88\u591amakefile\u7684\u76f8\u5173\u7ec6\u8282\uff0c\u51c6\u5907\u597d\u4e86\u5417\uff1f\u51c6\u5907\u597d\u4e86\u5c31\u6765\u3002 Makefile\u91cc\u6709\u4ec0\u4e48\uff1f Makefile\u91cc\u4e3b\u8981\u5305\u542b\u4e86\u4e94\u4e2a\u4e1c\u897f\uff1a\u663e\u5f0f\u89c4\u5219\u3001\u9690\u6666\u89c4\u5219\u3001\u53d8\u91cf\u5b9a\u4e49\u3001\u6587\u4ef6\u6307\u793a\u548c\u6ce8\u91ca\u3002 \u663e\u5f0f\u89c4\u5219\u3002\u663e\u5f0f\u89c4\u5219\u8bf4\u660e\u4e86\u5982\u4f55\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u6807\u6587\u4ef6\u3002\u8fd9\u662f\u7531Makefile\u7684\u4e66\u5199\u8005\u660e\u663e\u6307\u51fa\u8981\u751f\u6210\u7684\u6587\u4ef6\u3001\u6587\u4ef6\u7684\u4f9d\u8d56\u6587\u4ef6\u548c\u751f\u6210\u7684\u547d\u4ee4\u3002 \u9690\u6666\u89c4\u5219\u3002\u7531\u4e8e\u6211\u4eec\u7684make\u6709\u81ea\u52a8\u63a8\u5bfc\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u9690\u6666\u7684\u89c4\u5219\u53ef\u4ee5\u8ba9\u6211\u4eec\u6bd4\u8f83\u7b80\u7565\u5730\u4e66\u5199Makefile\uff0c\u8fd9\u662f\u7531make\u6240\u652f\u6301\u7684\u3002 \u53d8\u91cf\u7684\u5b9a\u4e49\u3002\u5728Makefile\u4e2d\u6211\u4eec\u8981\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u53d8\u91cf\uff0c\u53d8\u91cf\u4e00\u822c\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u6709\u70b9\u50cf\u4f60C\u8bed\u8a00\u4e2d\u7684\u5b8f\uff0c\u5f53Makefile\u88ab\u6267\u884c\u65f6\uff0c\u5176\u4e2d\u7684\u53d8\u91cf\u90fd\u4f1a\u88ab\u6269\u5c55\u5230\u76f8\u5e94\u7684\u5f15\u7528\u4f4d\u7f6e\u4e0a\u3002 \u6587\u4ef6\u6307\u793a\u3002\u5176\u5305\u62ec\u4e86\u4e09\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u5728\u4e00\u4e2aMakefile\u4e2d\u5f15\u7528\u53e6\u4e00\u4e2aMakefile\uff0c\u5c31\u50cfC\u8bed\u8a00\u4e2d\u7684include\u4e00\u6837\uff1b\u53e6\u4e00\u4e2a\u662f\u6307\u6839\u636e\u67d0\u4e9b\u60c5\u51b5\u6307\u5b9aMakefile\u4e2d\u7684\u6709\u6548\u90e8\u5206\uff0c\u5c31\u50cfC\u8bed\u8a00\u4e2d\u7684\u9884\u7f16\u8bd1#if\u4e00\u6837\uff1b\u8fd8\u6709\u5c31\u662f\u5b9a\u4e49\u4e00\u4e2a\u591a\u884c\u7684\u547d\u4ee4\u3002\u6709\u5173\u8fd9\u4e00\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u6211\u4f1a\u5728\u540e\u7eed\u7684\u90e8\u5206\u4e2d\u8bb2\u8ff0\u3002 \u6ce8\u91ca\u3002Makefile\u4e2d\u53ea\u6709\u884c\u6ce8\u91ca\uff0c\u548cUNIX\u7684Shell\u811a\u672c\u4e00\u6837\uff0c\u5176\u6ce8\u91ca\u662f\u7528 # \u5b57\u7b26\uff0c\u8fd9\u4e2a\u5c31\u50cfC/C++\u4e2d\u7684 // \u4e00\u6837\u3002\u5982\u679c\u4f60\u8981\u5728\u4f60\u7684Makefile\u4e2d\u4f7f\u7528 # \u5b57\u7b26\uff0c\u53ef\u4ee5\u7528\u53cd\u659c\u6760\u8fdb\u884c\u8f6c\u4e49\uff0c\u5982\uff1a \\# \u3002 \u6700\u540e\uff0c\u8fd8\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5728Makefile\u4e2d\u7684\u547d\u4ee4\uff0c\u5fc5\u987b\u8981\u4ee5 Tab \u952e\u5f00\u59cb\u3002 Makefile\u7684\u6587\u4ef6\u540d \u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\uff0cmake\u547d\u4ee4\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u6309\u987a\u5e8f\u627e\u5bfb\u6587\u4ef6\u540d\u4e3a\u201cGNUmakefile\u201d\u3001\u201cmakefile\u201d\u3001\u201cMakefile\u201d\u7684\u6587\u4ef6\uff0c\u627e\u5230\u4e86\u89e3\u91ca\u8fd9\u4e2a\u6587\u4ef6\u3002\u5728\u8fd9\u4e09\u4e2a\u6587\u4ef6\u540d\u4e2d\uff0c\u6700\u597d\u4f7f\u7528\u201cMakefile\u201d\u8fd9\u4e2a\u6587\u4ef6\u540d\uff0c\u56e0\u4e3a\uff0c\u8fd9\u4e2a\u6587\u4ef6\u540d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u5927\u5199\uff0c\u8fd9\u6837\u6709\u4e00\u79cd\u663e\u76ee\u7684\u611f\u89c9\u3002\u6700\u597d\u4e0d\u8981\u7528\u201cGNUmakefile\u201d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u662fGNU\u7684make\u8bc6\u522b\u7684\u3002\u6709\u53e6\u5916\u4e00\u4e9bmake\u53ea\u5bf9\u5168\u5c0f\u5199\u7684\u201cmakefile\u201d\u6587\u4ef6\u540d\u654f\u611f\uff0c\u4f46\u662f\u57fa\u672c\u4e0a\u6765\u8bf4\uff0c\u5927\u591a\u6570\u7684make\u90fd\u652f\u6301\u201cmakefile\u201d\u548c\u201cMakefile\u201d\u8fd9\u4e24\u79cd\u9ed8\u8ba4\u6587\u4ef6\u540d\u3002 \u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u522b\u7684\u6587\u4ef6\u540d\u6765\u4e66\u5199Makefile\uff0c\u6bd4\u5982\uff1a\u201cMake.Linux\u201d\uff0c\u201cMake.Solaris\u201d\uff0c\u201cMake.AIX\u201d\u7b49\uff0c\u5982\u679c\u8981\u6307\u5b9a\u7279\u5b9a\u7684Makefile\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528make\u7684 -f \u548c --file \u53c2\u6570\uff0c\u5982\uff1a make -f Make.Linux \u6216 make --file Make.AIX \u3002 \u5f15\u7528\u5176\u5b83\u7684Makefile \u5728Makefile\u4f7f\u7528 include \u5173\u952e\u5b57\u53ef\u4ee5\u628a\u522b\u7684Makefile\u5305\u542b\u8fdb\u6765\uff0c\u8fd9\u5f88\u50cfC\u8bed\u8a00\u7684 #include \uff0c\u88ab\u5305\u542b\u7684\u6587\u4ef6\u4f1a\u539f\u6a21\u539f\u6837\u7684\u653e\u5728\u5f53\u524d\u6587\u4ef6\u7684\u5305\u542b\u4f4d\u7f6e\u3002 include \u7684\u8bed\u6cd5\u662f\uff1a .. code:: makefile include lt;filename gt; filename \u53ef\u4ee5\u662f\u5f53\u524d\u64cd\u4f5c\u7cfb\u7edfShell\u7684\u6587\u4ef6\u6a21\u5f0f\uff08\u53ef\u4ee5\u5305\u542b\u8def\u5f84\u548c\u901a\u914d\u7b26\uff09\u3002 \u5728 include \u524d\u9762\u53ef\u4ee5\u6709\u4e00\u4e9b\u7a7a\u5b57\u7b26\uff0c\u4f46\u662f\u7edd\u4e0d\u80fd\u662f Tab \u952e\u5f00\u59cb\u3002 include \u548c filename \u53ef\u4ee5\u7528\u4e00\u4e2a\u6216\u591a\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u6709\u8fd9\u6837\u51e0\u4e2aMakefile\uff1a a.mk \u3001 b.mk \u3001 c.mk \uff0c\u8fd8\u6709\u4e00\u4e2a\u6587\u4ef6\u53eb foo.make \uff0c\u4ee5\u53ca\u4e00\u4e2a\u53d8\u91cf $(bar) \uff0c\u5176\u5305\u542b\u4e86 e.mk \u548c f.mk \uff0c\u90a3\u4e48\uff0c\u4e0b\u9762\u7684\u8bed\u53e5\uff1a .. code:: makefile include foo.make *.mk $(bar) \u7b49\u4ef7\u4e8e\uff1a .. code:: makefile include foo.make a.mk b.mk c.mk e.mk f.mk make\u547d\u4ee4\u5f00\u59cb\u65f6\uff0c\u4f1a\u627e\u5bfb include \u6240\u6307\u51fa\u7684\u5176\u5b83Makefile\uff0c\u5e76\u628a\u5176\u5185\u5bb9\u5b89\u7f6e\u5728\u5f53\u524d\u7684\u4f4d\u7f6e\u3002\u5c31\u597d\u50cfC/C++\u7684 #include \u6307\u4ee4\u4e00\u6837\u3002\u5982\u679c\u6587\u4ef6\u90fd\u6ca1\u6709\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\u6216\u662f\u76f8\u5bf9\u8def\u5f84\u7684\u8bdd\uff0cmake\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u9996\u5148\u5bfb\u627e\uff0c\u5982\u679c\u5f53\u524d\u76ee\u5f55\u4e0b\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\uff0cmake\u8fd8\u4f1a\u5728\u4e0b\u9762\u7684\u51e0\u4e2a\u76ee\u5f55\u4e0b\u627e\uff1a \u5982\u679cmake\u6267\u884c\u65f6\uff0c\u6709 -I \u6216 --include-dir \u53c2\u6570\uff0c\u90a3\u4e48make\u5c31\u4f1a\u5728\u8fd9\u4e2a\u53c2\u6570\u6240\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u53bb\u5bfb\u627e\u3002 \u5982\u679c\u76ee\u5f55 prefix /include \uff08\u4e00\u822c\u662f\uff1a /usr/local/bin \u6216 /usr/include \uff09\u5b58\u5728\u7684\u8bdd\uff0cmake\u4e5f\u4f1a\u53bb\u627e\u3002 \u5982\u679c\u6709\u6587\u4ef6\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff0cmake\u4f1a\u751f\u6210\u4e00\u6761\u8b66\u544a\u4fe1\u606f\uff0c\u4f46\u4e0d\u4f1a\u9a6c\u4e0a\u51fa\u73b0\u81f4\u547d\u9519\u8bef\u3002\u5b83\u4f1a\u7ee7\u7eed\u8f7d\u5165\u5176\u5b83\u7684\u6587\u4ef6\uff0c\u4e00\u65e6\u5b8c\u6210makefile\u7684\u8bfb\u53d6\uff0cmake\u4f1a\u518d\u91cd\u8bd5\u8fd9\u4e9b\u6ca1\u6709\u627e\u5230\uff0c\u6216\u662f\u4e0d\u80fd\u8bfb\u53d6\u7684\u6587\u4ef6\uff0c\u5982\u679c\u8fd8\u662f\u4e0d\u884c\uff0cmake\u624d\u4f1a\u51fa\u73b0\u4e00\u6761\u81f4\u547d\u4fe1\u606f\u3002\u5982\u679c\u4f60\u60f3\u8ba9make\u4e0d\u7406\u90a3\u4e9b\u65e0\u6cd5\u8bfb\u53d6\u7684\u6587\u4ef6\uff0c\u800c\u7ee7\u7eed\u6267\u884c\uff0c\u4f60\u53ef\u4ee5\u5728include\u524d\u52a0\u4e00\u4e2a\u51cf\u53f7\u201c-\u201d\u3002\u5982\uff1a .. code:: makefile -include lt;filename gt; \u5176\u8868\u793a\uff0c\u65e0\u8bbainclude\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u4ec0\u4e48\u9519\u8bef\uff0c\u90fd\u4e0d\u8981\u62a5\u9519\u7ee7\u7eed\u6267\u884c\u3002\u548c\u5176\u5b83\u7248\u672cmake\u517c\u5bb9\u7684\u76f8\u5173\u547d\u4ee4\u662fsinclude\uff0c\u5176\u4f5c\u7528\u548c\u8fd9\u4e00\u4e2a\u662f\u4e00\u6837\u7684\u3002 \u73af\u5883\u53d8\u91cfMAKEFILES \u5982\u679c\u4f60\u7684\u5f53\u524d\u73af\u5883\u4e2d\u5b9a\u4e49\u4e86\u73af\u5883\u53d8\u91cf MAKEFILES \uff0c\u90a3\u4e48\uff0cmake\u4f1a\u628a\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u7684\u503c\u505a\u4e00\u4e2a\u7c7b\u4f3c\u4e8e include \u7684\u52a8\u4f5c\u3002\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u7684\u503c\u662f\u5176\u5b83\u7684Makefile\uff0c\u7528\u7a7a\u683c\u5206\u9694\u3002\u53ea\u662f\uff0c\u5b83\u548c include \u4e0d\u540c\u7684\u662f\uff0c\u4ece\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u4e2d\u5f15\u5165\u7684Makefile\u7684\u201c\u76ee\u6807\u201d\u4e0d\u4f1a\u8d77\u4f5c\u7528\uff0c\u5982\u679c\u73af\u5883\u53d8\u91cf\u4e2d\u5b9a\u4e49\u7684\u6587\u4ef6\u53d1\u73b0\u9519\u8bef\uff0cmake\u4e5f\u4f1a\u4e0d\u7406\u3002 \u4f46\u662f\u5728\u8fd9\u91cc\u6211\u8fd8\u662f\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u56e0\u4e3a\u53ea\u8981\u8fd9\u4e2a\u53d8\u91cf\u4e00\u88ab\u5b9a\u4e49\uff0c\u90a3\u4e48\u5f53\u4f60\u4f7f\u7528make\u65f6\uff0c\u6240\u6709\u7684Makefile\u90fd\u4f1a\u53d7\u5230\u5b83\u7684\u5f71\u54cd\uff0c\u8fd9\u7edd\u4e0d\u662f\u4f60\u60f3\u770b\u5230\u7684\u3002\u5728\u8fd9\u91cc\u63d0\u8fd9\u4e2a\u4e8b\uff0c\u53ea\u662f\u4e3a\u4e86\u544a\u8bc9\u5927\u5bb6\uff0c\u4e5f\u8bb8\u6709\u65f6\u5019\u4f60\u7684Makefile\u51fa\u73b0\u4e86\u602a\u4e8b\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u770b\u770b\u5f53\u524d\u73af\u5883\u4e2d\u6709\u6ca1\u6709\u5b9a\u4e49\u8fd9\u4e2a\u53d8\u91cf\u3002 make\u7684\u5de5\u4f5c\u65b9\u5f0f GNU\u7684make\u5de5\u4f5c\u65f6\u7684\u6267\u884c\u6b65\u9aa4\u5982\u4e0b\uff1a\uff08\u60f3\u6765\u5176\u5b83\u7684make\u4e5f\u662f\u7c7b\u4f3c\uff09 \u8bfb\u5165\u6240\u6709\u7684Makefile\u3002 \u8bfb\u5165\u88abinclude\u7684\u5176\u5b83Makefile\u3002 \u521d\u59cb\u5316\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u3002 \u63a8\u5bfc\u9690\u6666\u89c4\u5219\uff0c\u5e76\u5206\u6790\u6240\u6709\u89c4\u5219\u3002 \u4e3a\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u521b\u5efa\u4f9d\u8d56\u5173\u7cfb\u94fe\u3002 \u6839\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u51b3\u5b9a\u54ea\u4e9b\u76ee\u6807\u8981\u91cd\u65b0\u751f\u6210\u3002 \u6267\u884c\u751f\u6210\u547d\u4ee4\u3002 1-5\u6b65\u4e3a\u7b2c\u4e00\u4e2a\u9636\u6bb5\uff0c6-7\u4e3a\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u3002\u7b2c\u4e00\u4e2a\u9636\u6bb5\u4e2d\uff0c\u5982\u679c\u5b9a\u4e49\u7684\u53d8\u91cf\u88ab\u4f7f\u7528\u4e86\uff0c\u90a3\u4e48\uff0cmake\u4f1a\u628a\u5176\u5c55\u5f00\u5728\u4f7f\u7528\u7684\u4f4d\u7f6e\u3002\u4f46make\u5e76\u4e0d\u4f1a\u5b8c\u5168\u9a6c\u4e0a\u5c55\u5f00\uff0cmake\u4f7f\u7528\u7684\u662f\u62d6\u5ef6\u6218\u672f\uff0c\u5982\u679c\u53d8\u91cf\u51fa\u73b0\u5728\u4f9d\u8d56\u5173\u7cfb\u7684\u89c4\u5219\u4e2d\uff0c\u90a3\u4e48\u4ec5\u5f53\u8fd9\u6761\u4f9d\u8d56\u88ab\u51b3\u5b9a\u8981\u4f7f\u7528\u4e86\uff0c\u53d8\u91cf\u624d\u4f1a\u5728\u5176\u5185\u90e8\u5c55\u5f00\u3002 \u5f53\u7136\uff0c\u8fd9\u4e2a\u5de5\u4f5c\u65b9\u5f0f\u4f60\u4e0d\u4e00\u5b9a\u8981\u6e05\u695a\uff0c\u4f46\u662f\u77e5\u9053\u8fd9\u4e2a\u65b9\u5f0f\u4f60\u4e5f\u4f1a\u5bf9make\u66f4\u4e3a\u719f\u6089\u3002\u6709\u4e86\u8fd9\u4e2a\u57fa\u7840\uff0c\u540e\u7eed\u90e8\u5206\u4e5f\u5c31\u5bb9\u6613\u770b\u61c2\u4e86\u3002","title":"makefile\u4ecb\u7ecd"},{"location":"makefile/introduction/#makefile","text":"\u5728\u8bb2\u8ff0\u8fd9\u4e2amakefile\u4e4b\u524d\uff0c\u8fd8\u662f\u8ba9\u6211\u4eec\u5148\u6765\u7c97\u7565\u5730\u770b\u4e00\u770bmakefile\u7684\u89c4\u5219\u3002 .. code:: makefile target ... : prerequisites ... command ... ... target \u53ef\u4ee5\u662f\u4e00\u4e2aobject file\uff08\u76ee\u6807\u6587\u4ef6\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6267\u884c\u6587\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u662f\u4e00\u4e2a\u6807\u7b7e\uff08label\uff09\u3002\u5bf9\u4e8e\u6807\u7b7e\u8fd9\u79cd\u7279\u6027\uff0c\u5728\u540e\u7eed\u7684\u201c\u4f2a\u76ee\u6807\u201d\u7ae0\u8282\u4e2d\u4f1a\u6709\u53d9\u8ff0\u3002 prerequisites \u751f\u6210\u8be5target\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\u548c/\u6216target command \u8be5target\u8981\u6267\u884c\u7684\u547d\u4ee4\uff08\u4efb\u610f\u7684shell\u547d\u4ee4\uff09 \u8fd9\u662f\u4e00\u4e2a\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0ctarget\u8fd9\u4e00\u4e2a\u6216\u591a\u4e2a\u7684\u76ee\u6807\u6587\u4ef6\u4f9d\u8d56\u4e8eprerequisites\u4e2d\u7684\u6587\u4ef6\uff0c\u5176\u751f\u6210\u89c4\u5219\u5b9a\u4e49\u5728command\u4e2d\u3002\u8bf4\u767d\u4e00\u70b9\u5c31\u662f\u8bf4: :: prerequisites\u4e2d\u5982\u679c\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7684\u6587\u4ef6\u6bd4target\u6587\u4ef6\u8981\u65b0\u7684\u8bdd\uff0ccommand\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u5c31\u4f1a\u88ab\u6267\u884c\u3002 \u8fd9\u5c31\u662fmakefile\u7684\u89c4\u5219\uff0c\u4e5f\u5c31\u662fmakefile\u4e2d\u6700\u6838\u5fc3\u7684\u5185\u5bb9\u3002 \u8bf4\u5230\u5e95\uff0cmakefile\u7684\u4e1c\u897f\u5c31\u662f\u8fd9\u6837\u4e00\u70b9\uff0c\u597d\u50cf\u6211\u7684\u8fd9\u7bc7\u6587\u6863\u4e5f\u8be5\u7ed3\u675f\u4e86\u3002\u5475\u5475\u3002\u8fd8\u4e0d\u5c3d\u7136\uff0c\u8fd9\u662fmakefile\u7684\u4e3b\u7ebf\u548c\u6838\u5fc3\uff0c\u4f46\u8981\u5199\u597d\u4e00\u4e2amakefile\u8fd8\u4e0d\u591f\uff0c\u6211\u4f1a\u5728\u540e\u9762\u4e00\u70b9\u4e00\u70b9\u5730\u7ed3\u5408\u6211\u7684\u5de5\u4f5c\u7ecf\u9a8c\u7ed9\u4f60\u6162\u6162\u9053\u6765\u3002\u5185\u5bb9\u8fd8\u591a\u7740\u5462\u3002:)","title":"makefile\u7684\u89c4\u5219"},{"location":"makefile/introduction/#_1","text":"\u6b63\u5982\u524d\u9762\u6240\u8bf4\uff0c\u5982\u679c\u4e00\u4e2a\u5de5\u7a0b\u67093\u4e2a\u5934\u6587\u4ef6\u548c8\u4e2ac\u6587\u4ef6\uff0c\u4e3a\u4e86\u5b8c\u6210\u524d\u9762\u6240\u8ff0\u7684\u90a3\u4e09\u4e2a\u89c4\u5219\uff0c\u6211\u4eec\u7684makefile\u5e94\u8be5\u662f\u4e0b\u9762\u7684\u8fd9\u4e2a\u6837\u5b50\u7684\u3002 .. code:: makefile edit : main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o cc - o edit main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o main . o : main . c defs . h cc - c main . c kbd . o : kbd . c defs . h command . h cc - c kbd . c command . o : command . c defs . h command . h cc - c command . c display . o : display . c defs . h buffer . h cc - c display . c insert . o : insert . c defs . h buffer . h cc - c insert . c search . o : search . c defs . h buffer . h cc - c search . c files . o : files . c defs . h buffer . h command . h cc - c files . c utils . o : utils . c defs . h cc - c utils . c clean : rm edit main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o \u53cd\u659c\u6760\uff08 \\ \uff09\u662f\u6362\u884c\u7b26\u7684\u610f\u601d\u3002\u8fd9\u6837\u6bd4\u8f83\u4fbf\u4e8emakefile\u7684\u9605\u8bfb\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5185\u5bb9\u4fdd\u5b58\u5728\u540d\u5b57\u4e3a\u201cmakefile\u201d\u6216\u201cMakefile\u201d\u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u5728\u8be5\u76ee\u5f55\u4e0b\u76f4\u63a5\u8f93\u5165\u547d\u4ee4 make \u5c31\u53ef\u4ee5\u751f\u6210\u6267\u884c\u6587\u4ef6edit\u3002\u5982\u679c\u8981\u5220\u9664\u6267\u884c\u6587\u4ef6\u548c\u6240\u6709\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff0c\u90a3\u4e48\uff0c\u53ea\u8981\u7b80\u5355\u5730\u6267\u884c\u4e00\u4e0b make clean \u5c31\u53ef\u4ee5\u4e86\u3002 \u5728\u8fd9\u4e2amakefile\u4e2d\uff0c\u76ee\u6807\u6587\u4ef6\uff08target\uff09\u5305\u542b\uff1a\u6267\u884c\u6587\u4ef6edit\u548c\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08 *.o \uff09\uff0c\u4f9d\u8d56\u6587\u4ef6\uff08prerequisites\uff09\u5c31\u662f\u5192\u53f7\u540e\u9762\u7684\u90a3\u4e9b .c \u6587\u4ef6\u548c .h \u6587\u4ef6\u3002\u6bcf\u4e00\u4e2a .o \u6587\u4ef6\u90fd\u6709\u4e00\u7ec4\u4f9d\u8d56\u6587\u4ef6\uff0c\u800c\u8fd9\u4e9b .o \u6587\u4ef6\u53c8\u662f\u6267\u884c\u6587\u4ef6 edit \u7684\u4f9d\u8d56\u6587\u4ef6\u3002\u4f9d\u8d56\u5173\u7cfb\u7684\u5b9e\u8d28\u5c31\u662f\u8bf4\u660e\u4e86\u76ee\u6807\u6587\u4ef6\u662f\u7531\u54ea\u4e9b\u6587\u4ef6\u751f\u6210\u7684\uff0c\u6362\u8a00\u4e4b\uff0c\u76ee\u6807\u6587\u4ef6\u662f\u54ea\u4e9b\u6587\u4ef6\u66f4\u65b0\u7684\u3002 \u5728\u5b9a\u4e49\u597d\u4f9d\u8d56\u5173\u7cfb\u540e\uff0c\u540e\u7eed\u7684\u90a3\u4e00\u884c\u5b9a\u4e49\u4e86\u5982\u4f55\u751f\u6210\u76ee\u6807\u6587\u4ef6\u7684\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4\uff0c\u4e00\u5b9a\u8981\u4ee5\u4e00\u4e2a Tab \u952e\u4f5c\u4e3a\u5f00\u5934\u3002\u8bb0\u4f4f\uff0cmake\u5e76\u4e0d\u7ba1\u547d\u4ee4\u662f\u600e\u4e48\u5de5\u4f5c\u7684\uff0c\u4ed6\u53ea\u7ba1\u6267\u884c\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u3002make\u4f1a\u6bd4\u8f83targets\u6587\u4ef6\u548cprerequisites\u6587\u4ef6\u7684\u4fee\u6539\u65e5\u671f\uff0c\u5982\u679cprerequisites\u6587\u4ef6\u7684\u65e5\u671f\u8981\u6bd4targets\u6587\u4ef6\u7684\u65e5\u671f\u8981\u65b0\uff0c\u6216\u8005target\u4e0d\u5b58\u5728\u7684\u8bdd\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4f1a\u6267\u884c\u540e\u7eed\u5b9a\u4e49\u7684\u547d\u4ee4\u3002 \u8fd9\u91cc\u8981\u8bf4\u660e\u4e00\u70b9\u7684\u662f\uff0c clean \u4e0d\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u53ea\u4e0d\u8fc7\u662f\u4e00\u4e2a\u52a8\u4f5c\u540d\u5b57\uff0c\u6709\u70b9\u50cfc\u8bed\u8a00\u4e2d\u7684lable\u4e00\u6837\uff0c\u5176\u5192\u53f7\u540e\u4ec0\u4e48\u4e5f\u6ca1\u6709\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4e0d\u4f1a\u81ea\u52a8\u53bb\u627e\u5b83\u7684\u4f9d\u8d56\u6027\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u81ea\u52a8\u6267\u884c\u5176\u540e\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u3002\u8981\u6267\u884c\u5176\u540e\u7684\u547d\u4ee4\uff0c\u5c31\u8981\u5728make\u547d\u4ee4\u540e\u660e\u663e\u5f97\u6307\u51fa\u8fd9\u4e2alable\u7684\u540d\u5b57\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u975e\u5e38\u6709\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2amakefile\u4e2d\u5b9a\u4e49\u4e0d\u7528\u7684\u7f16\u8bd1\u6216\u662f\u548c\u7f16\u8bd1\u65e0\u5173\u7684\u547d\u4ee4\uff0c\u6bd4\u5982\u7a0b\u5e8f\u7684\u6253\u5305\uff0c\u7a0b\u5e8f\u7684\u5907\u4efd\uff0c\u7b49\u7b49\u3002","title":"\u4e00\u4e2a\u793a\u4f8b"},{"location":"makefile/introduction/#make","text":"\u5728\u9ed8\u8ba4\u7684\u65b9\u5f0f\u4e0b\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u53ea\u8f93\u5165 make \u547d\u4ee4\u3002\u90a3\u4e48\uff0c make\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u627e\u540d\u5b57\u53eb\u201cMakefile\u201d\u6216\u201cmakefile\u201d\u7684\u6587\u4ef6\u3002 \u5982\u679c\u627e\u5230\uff0c\u5b83\u4f1a\u627e\u6587\u4ef6\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\uff08target\uff09\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u4ed6\u4f1a\u627e\u5230\u201cedit\u201d\u8fd9\u4e2a\u6587\u4ef6\uff0c\u5e76\u628a\u8fd9\u4e2a\u6587\u4ef6\u4f5c\u4e3a\u6700\u7ec8\u7684\u76ee\u6807\u6587\u4ef6\u3002 \u5982\u679cedit\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u6216\u662fedit\u6240\u4f9d\u8d56\u7684\u540e\u9762\u7684 .o \u6587\u4ef6\u7684\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u8981\u6bd4 edit \u8fd9\u4e2a\u6587\u4ef6\u65b0\uff0c\u90a3\u4e48\uff0c\u4ed6\u5c31\u4f1a\u6267\u884c\u540e\u9762\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u6765\u751f\u6210 edit \u8fd9\u4e2a\u6587\u4ef6\u3002 \u5982\u679c edit \u6240\u4f9d\u8d56\u7684 .o \u6587\u4ef6\u4e5f\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48make\u4f1a\u5728\u5f53\u524d\u6587\u4ef6\u4e2d\u627e\u76ee\u6807\u4e3a .o \u6587\u4ef6\u7684\u4f9d\u8d56\u6027\uff0c\u5982\u679c\u627e\u5230\u5219\u518d\u6839\u636e\u90a3\u4e00\u4e2a\u89c4\u5219\u751f\u6210 .o \u6587\u4ef6\u3002\uff08\u8fd9\u6709\u70b9\u50cf\u4e00\u4e2a\u5806\u6808\u7684\u8fc7\u7a0b\uff09 \u5f53\u7136\uff0c\u4f60\u7684C\u6587\u4ef6\u548cH\u6587\u4ef6\u662f\u5b58\u5728\u7684\u5566\uff0c\u4e8e\u662fmake\u4f1a\u751f\u6210 .o \u6587\u4ef6\uff0c\u7136\u540e\u518d\u7528 .o \u6587\u4ef6\u751f\u6210make\u7684\u7ec8\u6781\u4efb\u52a1\uff0c\u4e5f\u5c31\u662f\u6267\u884c\u6587\u4ef6 edit \u4e86\u3002 \u8fd9\u5c31\u662f\u6574\u4e2amake\u7684\u4f9d\u8d56\u6027\uff0cmake\u4f1a\u4e00\u5c42\u53c8\u4e00\u5c42\u5730\u53bb\u627e\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u76f4\u5230\u6700\u7ec8\u7f16\u8bd1\u51fa\u7b2c\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u3002\u5728\u627e\u5bfb\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u6bd4\u5982\u6700\u540e\u88ab\u4f9d\u8d56\u7684\u6587\u4ef6\u627e\u4e0d\u5230\uff0c\u90a3\u4e48make\u5c31\u4f1a\u76f4\u63a5\u9000\u51fa\uff0c\u5e76\u62a5\u9519\uff0c\u800c\u5bf9\u4e8e\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u7684\u9519\u8bef\uff0c\u6216\u662f\u7f16\u8bd1\u4e0d\u6210\u529f\uff0cmake\u6839\u672c\u4e0d\u7406\u3002make\u53ea\u7ba1\u6587\u4ef6\u7684\u4f9d\u8d56\u6027\uff0c\u5373\uff0c\u5982\u679c\u5728\u6211\u627e\u4e86\u4f9d\u8d56\u5173\u7cfb\u4e4b\u540e\uff0c\u5192\u53f7\u540e\u9762\u7684\u6587\u4ef6\u8fd8\u662f\u4e0d\u5728\uff0c\u90a3\u4e48\u5bf9\u4e0d\u8d77\uff0c\u6211\u5c31\u4e0d\u5de5\u4f5c\u5566\u3002 \u901a\u8fc7\u4e0a\u8ff0\u5206\u6790\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u50cfclean\u8fd9\u79cd\uff0c\u6ca1\u6709\u88ab\u7b2c\u4e00\u4e2a\u76ee\u6807\u6587\u4ef6\u76f4\u63a5\u6216\u95f4\u63a5\u5173\u8054\uff0c\u90a3\u4e48\u5b83\u540e\u9762\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\u5c06\u4e0d\u4f1a\u88ab\u81ea\u52a8\u6267\u884c\uff0c\u4e0d\u8fc7\uff0c\u6211\u4eec\u53ef\u4ee5\u663e\u793a\u8981make\u6267\u884c\u3002\u5373\u547d\u4ee4\u2014\u2014 make clean \uff0c\u4ee5\u6b64\u6765\u6e05\u9664\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u4ee5\u4fbf\u91cd\u7f16\u8bd1\u3002 \u4e8e\u662f\u5728\u6211\u4eec\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u8fd9\u4e2a\u5de5\u7a0b\u5df2\u88ab\u7f16\u8bd1\u8fc7\u4e86\uff0c\u5f53\u6211\u4eec\u4fee\u6539\u4e86\u5176\u4e2d\u4e00\u4e2a\u6e90\u6587\u4ef6\uff0c\u6bd4\u5982 file.c \uff0c\u90a3\u4e48\u6839\u636e\u6211\u4eec\u7684\u4f9d\u8d56\u6027\uff0c\u6211\u4eec\u7684\u76ee\u6807 file.o \u4f1a\u88ab\u91cd\u7f16\u8bd1\uff08\u4e5f\u5c31\u662f\u5728\u8fd9\u4e2a\u4f9d\u6027\u5173\u7cfb\u540e\u9762\u6240\u5b9a\u4e49\u7684\u547d\u4ee4\uff09\uff0c\u4e8e\u662f file.o \u7684\u6587\u4ef6\u4e5f\u662f\u6700\u65b0\u7684\u5566\uff0c\u4e8e\u662f file.o \u7684\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u8981\u6bd4 edit \u8981\u65b0\uff0c\u6240\u4ee5 edit \u4e5f\u4f1a\u88ab\u91cd\u65b0\u94fe\u63a5\u4e86\uff08\u8be6\u89c1 edit \u76ee\u6807\u6587\u4ef6\u540e\u5b9a\u4e49\u7684\u547d\u4ee4\uff09\u3002 \u800c\u5982\u679c\u6211\u4eec\u6539\u53d8\u4e86 command.h \uff0c\u90a3\u4e48\uff0c kdb.o \u3001 command.o \u548c files.o \u90fd\u4f1a\u88ab\u91cd\u7f16\u8bd1\uff0c\u5e76\u4e14\uff0c edit \u4f1a\u88ab\u91cd\u94fe\u63a5\u3002","title":"make\u662f\u5982\u4f55\u5de5\u4f5c\u7684"},{"location":"makefile/introduction/#makefile_1","text":"\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5148\u8ba9\u6211\u4eec\u770b\u770bedit\u7684\u89c4\u5219\uff1a .. code:: makefile edit : main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o cc - o edit main . o kbd . o command . o display . o \\ insert . o search . o files . o utils . o \u6211\u4eec\u53ef\u4ee5\u770b\u5230 .o \u6587\u4ef6\u7684\u5b57\u7b26\u4e32\u88ab\u91cd\u590d\u4e86\u4e24\u6b21\uff0c\u5982\u679c\u6211\u4eec\u7684\u5de5\u7a0b\u9700\u8981\u52a0\u5165\u4e00\u4e2a\u65b0\u7684 .o \u6587\u4ef6\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u5728\u4e24\u4e2a\u5730\u65b9\u52a0\uff08\u5e94\u8be5\u662f\u4e09\u4e2a\u5730\u65b9\uff0c\u8fd8\u6709\u4e00\u4e2a\u5730\u65b9\u5728clean\u4e2d\uff09\u3002\u5f53\u7136\uff0c\u6211\u4eec\u7684makefile\u5e76\u4e0d\u590d\u6742\uff0c\u6240\u4ee5\u5728\u4e24\u4e2a\u5730\u65b9\u52a0\u4e5f\u4e0d\u7d2f\uff0c\u4f46\u5982\u679cmakefile\u53d8\u5f97\u590d\u6742\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u6709\u53ef\u80fd\u4f1a\u5fd8\u6389\u4e00\u4e2a\u9700\u8981\u52a0\u5165\u7684\u5730\u65b9\uff0c\u800c\u5bfc\u81f4\u7f16\u8bd1\u5931\u8d25\u3002\u6240\u4ee5\uff0c\u4e3a\u4e86makefile\u7684\u6613\u7ef4\u62a4\uff0c\u5728makefile\u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\u3002makefile\u7684\u53d8\u91cf\u4e5f\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7406\u89e3\u6210C\u8bed\u8a00\u4e2d\u7684\u5b8f\u53ef\u80fd\u4f1a\u66f4\u597d\u3002 \u6bd4\u5982\uff0c\u6211\u4eec\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\uff0c\u53eb objects \uff0c OBJECTS \uff0c objs \uff0c OBJS \uff0c obj \u6216\u662f OBJ \\ \uff0c\u53cd\u6b63\u4e0d\u7ba1\u4ec0\u4e48\u5566\uff0c\u53ea\u8981\u80fd\u591f\u8868\u793aobj\u6587\u4ef6\u5c31\u884c\u4e86\u3002\u6211\u4eec\u5728makefile\u4e00\u5f00\u59cb\u5c31\u8fd9\u6837\u5b9a\u4e49\uff1a .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o \u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5728\u6211\u4eec\u7684makefile\u4e2d\u4ee5 $(objects) \u7684\u65b9\u5f0f\u6765\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u4e86\uff0c\u4e8e\u662f\u6211\u4eec\u7684\u6539\u826f\u7248makefile\u5c31\u53d8\u6210\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\uff1a .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : main.c defs.h cc -c main.c kbd.o : kbd.c defs.h command.h cc -c kbd.c command.o : command.c defs.h command.h cc -c command.c display.o : display.c defs.h buffer.h cc -c display.c insert.o : insert.c defs.h buffer.h cc -c insert.c search.o : search.c defs.h buffer.h cc -c search.c files.o : files.c defs.h buffer.h command.h cc -c files.c utils.o : utils.c defs.h cc -c utils.c clean : rm edit $(objects) \u4e8e\u662f\u5982\u679c\u6709\u65b0\u7684 .o \u6587\u4ef6\u52a0\u5165\uff0c\u6211\u4eec\u53ea\u9700\u7b80\u5355\u5730\u4fee\u6539\u4e00\u4e0b objects \u53d8\u91cf\u5c31\u53ef\u4ee5\u4e86\u3002 \u5173\u4e8e\u53d8\u91cf\u66f4\u591a\u7684\u8bdd\u9898\uff0c\u6211\u4f1a\u5728\u540e\u7eed\u7ed9\u4f60\u4e00\u4e00\u9053\u6765\u3002","title":"makefile\u4e2d\u4f7f\u7528\u53d8\u91cf"},{"location":"makefile/introduction/#make_1","text":"GNU\u7684make\u5f88\u5f3a\u5927\uff0c\u5b83\u53ef\u4ee5\u81ea\u52a8\u63a8\u5bfc\u6587\u4ef6\u4ee5\u53ca\u6587\u4ef6\u4f9d\u8d56\u5173\u7cfb\u540e\u9762\u7684\u547d\u4ee4\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u6ca1\u5fc5\u8981\u53bb\u5728\u6bcf\u4e00\u4e2a .o \u6587\u4ef6\u540e\u90fd\u5199\u4e0a\u7c7b\u4f3c\u7684\u547d\u4ee4\uff0c\u56e0\u4e3a\uff0c\u6211\u4eec\u7684make\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5e76\u81ea\u5df1\u63a8\u5bfc\u547d\u4ee4\u3002 \u53ea\u8981make\u770b\u5230\u4e00\u4e2a .o \u6587\u4ef6\uff0c\u5b83\u5c31\u4f1a\u81ea\u52a8\u7684\u628a .c \u6587\u4ef6\u52a0\u5728\u4f9d\u8d56\u5173\u7cfb\u4e2d\uff0c\u5982\u679cmake\u627e\u5230\u4e00\u4e2a whatever.o \uff0c\u90a3\u4e48 whatever.c \u5c31\u4f1a\u662f whatever.o \u7684\u4f9d\u8d56\u6587\u4ef6\u3002\u5e76\u4e14 cc -c whatever.c \u4e5f\u4f1a\u88ab\u63a8\u5bfc\u51fa\u6765\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u7684makefile\u518d\u4e5f\u4e0d\u7528\u5199\u5f97\u8fd9\u4e48\u590d\u6742\u3002\u6211\u4eec\u7684\u65b0makefile\u53c8\u51fa\u7089\u4e86\u3002 .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) main.o : defs.h kbd.o : defs.h command.h command.o : defs.h command.h display.o : defs.h buffer.h insert.o : defs.h buffer.h search.o : defs.h buffer.h files.o : defs.h buffer.h command.h utils.o : defs.h .PHONY : clean clean : rm edit $(objects) \u8fd9\u79cd\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662fmake\u7684\u201c\u9690\u6666\u89c4\u5219\u201d\u3002\u4e0a\u9762\u6587\u4ef6\u5185\u5bb9\u4e2d\uff0c .PHONY \u8868\u793a clean \u662f\u4e2a\u4f2a\u76ee\u6807\u6587\u4ef6\u3002 \u5173\u4e8e\u66f4\u4e3a\u8be6\u7ec6\u7684\u201c\u9690\u6666\u89c4\u5219\u201d\u548c\u201c\u4f2a\u76ee\u6807\u6587\u4ef6\u201d\uff0c\u6211\u4f1a\u5728\u540e\u7eed\u7ed9\u4f60\u4e00\u4e00\u9053\u6765\u3002","title":"\u8ba9make\u81ea\u52a8\u63a8\u5bfc"},{"location":"makefile/introduction/#makefiles","text":"\u65e2\u7136\u6211\u4eec\u7684make\u53ef\u4ee5\u81ea\u52a8\u63a8\u5bfc\u547d\u4ee4\uff0c\u90a3\u4e48\u6211\u770b\u5230\u90a3\u5806 .o \u548c .h \u7684\u4f9d\u8d56\u5c31\u6709\u70b9\u4e0d\u723d\uff0c\u90a3\u4e48\u591a\u7684\u91cd\u590d\u7684 .h \uff0c\u80fd\u4e0d\u80fd\u628a\u5176\u6536\u62e2\u8d77\u6765\uff0c\u597d\u5427\uff0c\u6ca1\u6709\u95ee\u9898\uff0c\u8fd9\u4e2a\u5bf9\u4e8emake\u6765\u8bf4\u5f88\u5bb9\u6613\uff0c\u8c01\u53eb\u5b83\u63d0\u4f9b\u4e86\u81ea\u52a8\u63a8\u5bfc\u547d\u4ee4\u548c\u6587\u4ef6\u7684\u529f\u80fd\u5462\uff1f\u6765\u770b\u770b\u6700\u65b0\u98ce\u683c\u7684makefile\u5427\u3002 .. code:: makefile objects = main.o kbd.o command.o display.o \\ insert.o search.o files.o utils.o edit : $(objects) cc -o edit $(objects) $(objects) : defs.h kbd.o command.o files.o : command.h display.o insert.o search.o files.o : buffer.h .PHONY : clean clean : rm edit $(objects) \u8fd9\u79cd\u98ce\u683c\uff0c\u8ba9\u6211\u4eec\u7684makefile\u53d8\u5f97\u5f88\u7b80\u5355\uff0c\u4f46\u6211\u4eec\u7684\u6587\u4ef6\u4f9d\u8d56\u5173\u7cfb\u5c31\u663e\u5f97\u6709\u70b9\u51cc\u4e71\u4e86\u3002\u9c7c\u548c\u718a\u638c\u4e0d\u53ef\u517c\u5f97\u3002\u8fd8\u770b\u4f60\u7684\u559c\u597d\u4e86\u3002\u6211\u662f\u4e0d\u559c\u6b22\u8fd9\u79cd\u98ce\u683c\u7684\uff0c\u4e00\u662f\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u770b\u4e0d\u6e05\u695a\uff0c\u4e8c\u662f\u5982\u679c\u6587\u4ef6\u4e00\u591a\uff0c\u8981\u52a0\u5165\u51e0\u4e2a\u65b0\u7684 .o \u6587\u4ef6\uff0c\u90a3\u5c31\u7406\u4e0d\u6e05\u695a\u4e86\u3002","title":"\u53e6\u7c7b\u98ce\u683c\u7684makefiles"},{"location":"makefile/introduction/#_2","text":"\u6bcf\u4e2aMakefile\u4e2d\u90fd\u5e94\u8be5\u5199\u4e00\u4e2a\u6e05\u7a7a\u76ee\u6807\u6587\u4ef6\uff08 .o \u548c\u6267\u884c\u6587\u4ef6\uff09\u7684\u89c4\u5219\uff0c\u8fd9\u4e0d\u4ec5\u4fbf\u4e8e\u91cd\u7f16\u8bd1\uff0c\u4e5f\u5f88\u5229\u4e8e\u4fdd\u6301\u6587\u4ef6\u7684\u6e05\u6d01\u3002\u8fd9\u662f\u4e00\u4e2a\u201c\u4fee\u517b\u201d\uff08\u5475\u5475\uff0c\u8fd8\u8bb0\u5f97\u6211\u7684\u300a\u7f16\u7a0b\u4fee\u517b\u300b\u5417\uff09\u3002\u4e00\u822c\u7684\u98ce\u683c\u90fd\u662f\uff1a .. code:: makefile clean : rm edit $ ( objects ) \u66f4\u4e3a\u7a33\u5065\u7684\u505a\u6cd5\u662f\uff1a .. code:: makefile .PHONY : clean clean : - rm edit $ ( objects ) \u524d\u9762\u8bf4\u8fc7\uff0c .PHONY \u8868\u793a clean \u662f\u4e00\u4e2a\u201c\u4f2a\u76ee\u6807\u201d\u3002\u800c\u5728 rm \u547d\u4ee4\u524d\u9762\u52a0\u4e86\u4e00\u4e2a\u5c0f\u51cf\u53f7\u7684\u610f\u601d\u5c31\u662f\uff0c\u4e5f\u8bb8\u67d0\u4e9b\u6587\u4ef6\u51fa\u73b0\u95ee\u9898\uff0c\u4f46\u4e0d\u8981\u7ba1\uff0c\u7ee7\u7eed\u505a\u540e\u9762\u7684\u4e8b\u3002\u5f53\u7136\uff0c clean \u7684\u89c4\u5219\u4e0d\u8981\u653e\u5728\u6587\u4ef6\u7684\u5f00\u5934\uff0c\u4e0d\u7136\uff0c\u8fd9\u5c31\u4f1a\u53d8\u6210make\u7684\u9ed8\u8ba4\u76ee\u6807\uff0c\u76f8\u4fe1\u8c01\u4e5f\u4e0d\u613f\u610f\u8fd9\u6837\u3002\u4e0d\u6210\u6587\u7684\u89c4\u77e9\u662f\u2014\u2014\u201cclean\u4ece\u6765\u90fd\u662f\u653e\u5728\u6587\u4ef6\u7684\u6700\u540e\u201d\u3002 \u4e0a\u9762\u5c31\u662f\u4e00\u4e2amakefile\u7684\u6982\u8c8c\uff0c\u4e5f\u662fmakefile\u7684\u57fa\u7840\uff0c\u4e0b\u9762\u8fd8\u6709\u5f88\u591amakefile\u7684\u76f8\u5173\u7ec6\u8282\uff0c\u51c6\u5907\u597d\u4e86\u5417\uff1f\u51c6\u5907\u597d\u4e86\u5c31\u6765\u3002","title":"\u6e05\u7a7a\u76ee\u6807\u6587\u4ef6\u7684\u89c4\u5219"},{"location":"makefile/introduction/#makefile_2","text":"Makefile\u91cc\u4e3b\u8981\u5305\u542b\u4e86\u4e94\u4e2a\u4e1c\u897f\uff1a\u663e\u5f0f\u89c4\u5219\u3001\u9690\u6666\u89c4\u5219\u3001\u53d8\u91cf\u5b9a\u4e49\u3001\u6587\u4ef6\u6307\u793a\u548c\u6ce8\u91ca\u3002 \u663e\u5f0f\u89c4\u5219\u3002\u663e\u5f0f\u89c4\u5219\u8bf4\u660e\u4e86\u5982\u4f55\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u6807\u6587\u4ef6\u3002\u8fd9\u662f\u7531Makefile\u7684\u4e66\u5199\u8005\u660e\u663e\u6307\u51fa\u8981\u751f\u6210\u7684\u6587\u4ef6\u3001\u6587\u4ef6\u7684\u4f9d\u8d56\u6587\u4ef6\u548c\u751f\u6210\u7684\u547d\u4ee4\u3002 \u9690\u6666\u89c4\u5219\u3002\u7531\u4e8e\u6211\u4eec\u7684make\u6709\u81ea\u52a8\u63a8\u5bfc\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u9690\u6666\u7684\u89c4\u5219\u53ef\u4ee5\u8ba9\u6211\u4eec\u6bd4\u8f83\u7b80\u7565\u5730\u4e66\u5199Makefile\uff0c\u8fd9\u662f\u7531make\u6240\u652f\u6301\u7684\u3002 \u53d8\u91cf\u7684\u5b9a\u4e49\u3002\u5728Makefile\u4e2d\u6211\u4eec\u8981\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u53d8\u91cf\uff0c\u53d8\u91cf\u4e00\u822c\u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u6709\u70b9\u50cf\u4f60C\u8bed\u8a00\u4e2d\u7684\u5b8f\uff0c\u5f53Makefile\u88ab\u6267\u884c\u65f6\uff0c\u5176\u4e2d\u7684\u53d8\u91cf\u90fd\u4f1a\u88ab\u6269\u5c55\u5230\u76f8\u5e94\u7684\u5f15\u7528\u4f4d\u7f6e\u4e0a\u3002 \u6587\u4ef6\u6307\u793a\u3002\u5176\u5305\u62ec\u4e86\u4e09\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u5728\u4e00\u4e2aMakefile\u4e2d\u5f15\u7528\u53e6\u4e00\u4e2aMakefile\uff0c\u5c31\u50cfC\u8bed\u8a00\u4e2d\u7684include\u4e00\u6837\uff1b\u53e6\u4e00\u4e2a\u662f\u6307\u6839\u636e\u67d0\u4e9b\u60c5\u51b5\u6307\u5b9aMakefile\u4e2d\u7684\u6709\u6548\u90e8\u5206\uff0c\u5c31\u50cfC\u8bed\u8a00\u4e2d\u7684\u9884\u7f16\u8bd1#if\u4e00\u6837\uff1b\u8fd8\u6709\u5c31\u662f\u5b9a\u4e49\u4e00\u4e2a\u591a\u884c\u7684\u547d\u4ee4\u3002\u6709\u5173\u8fd9\u4e00\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u6211\u4f1a\u5728\u540e\u7eed\u7684\u90e8\u5206\u4e2d\u8bb2\u8ff0\u3002 \u6ce8\u91ca\u3002Makefile\u4e2d\u53ea\u6709\u884c\u6ce8\u91ca\uff0c\u548cUNIX\u7684Shell\u811a\u672c\u4e00\u6837\uff0c\u5176\u6ce8\u91ca\u662f\u7528 # \u5b57\u7b26\uff0c\u8fd9\u4e2a\u5c31\u50cfC/C++\u4e2d\u7684 // \u4e00\u6837\u3002\u5982\u679c\u4f60\u8981\u5728\u4f60\u7684Makefile\u4e2d\u4f7f\u7528 # \u5b57\u7b26\uff0c\u53ef\u4ee5\u7528\u53cd\u659c\u6760\u8fdb\u884c\u8f6c\u4e49\uff0c\u5982\uff1a \\# \u3002 \u6700\u540e\uff0c\u8fd8\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5728Makefile\u4e2d\u7684\u547d\u4ee4\uff0c\u5fc5\u987b\u8981\u4ee5 Tab \u952e\u5f00\u59cb\u3002","title":"Makefile\u91cc\u6709\u4ec0\u4e48\uff1f"},{"location":"makefile/introduction/#makefile_3","text":"\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\uff0cmake\u547d\u4ee4\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u6309\u987a\u5e8f\u627e\u5bfb\u6587\u4ef6\u540d\u4e3a\u201cGNUmakefile\u201d\u3001\u201cmakefile\u201d\u3001\u201cMakefile\u201d\u7684\u6587\u4ef6\uff0c\u627e\u5230\u4e86\u89e3\u91ca\u8fd9\u4e2a\u6587\u4ef6\u3002\u5728\u8fd9\u4e09\u4e2a\u6587\u4ef6\u540d\u4e2d\uff0c\u6700\u597d\u4f7f\u7528\u201cMakefile\u201d\u8fd9\u4e2a\u6587\u4ef6\u540d\uff0c\u56e0\u4e3a\uff0c\u8fd9\u4e2a\u6587\u4ef6\u540d\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a\u5927\u5199\uff0c\u8fd9\u6837\u6709\u4e00\u79cd\u663e\u76ee\u7684\u611f\u89c9\u3002\u6700\u597d\u4e0d\u8981\u7528\u201cGNUmakefile\u201d\uff0c\u8fd9\u4e2a\u6587\u4ef6\u662fGNU\u7684make\u8bc6\u522b\u7684\u3002\u6709\u53e6\u5916\u4e00\u4e9bmake\u53ea\u5bf9\u5168\u5c0f\u5199\u7684\u201cmakefile\u201d\u6587\u4ef6\u540d\u654f\u611f\uff0c\u4f46\u662f\u57fa\u672c\u4e0a\u6765\u8bf4\uff0c\u5927\u591a\u6570\u7684make\u90fd\u652f\u6301\u201cmakefile\u201d\u548c\u201cMakefile\u201d\u8fd9\u4e24\u79cd\u9ed8\u8ba4\u6587\u4ef6\u540d\u3002 \u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u522b\u7684\u6587\u4ef6\u540d\u6765\u4e66\u5199Makefile\uff0c\u6bd4\u5982\uff1a\u201cMake.Linux\u201d\uff0c\u201cMake.Solaris\u201d\uff0c\u201cMake.AIX\u201d\u7b49\uff0c\u5982\u679c\u8981\u6307\u5b9a\u7279\u5b9a\u7684Makefile\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528make\u7684 -f \u548c --file \u53c2\u6570\uff0c\u5982\uff1a make -f Make.Linux \u6216 make --file Make.AIX \u3002","title":"Makefile\u7684\u6587\u4ef6\u540d"},{"location":"makefile/introduction/#makefile_4","text":"\u5728Makefile\u4f7f\u7528 include \u5173\u952e\u5b57\u53ef\u4ee5\u628a\u522b\u7684Makefile\u5305\u542b\u8fdb\u6765\uff0c\u8fd9\u5f88\u50cfC\u8bed\u8a00\u7684 #include \uff0c\u88ab\u5305\u542b\u7684\u6587\u4ef6\u4f1a\u539f\u6a21\u539f\u6837\u7684\u653e\u5728\u5f53\u524d\u6587\u4ef6\u7684\u5305\u542b\u4f4d\u7f6e\u3002 include \u7684\u8bed\u6cd5\u662f\uff1a .. code:: makefile include lt;filename gt; filename \u53ef\u4ee5\u662f\u5f53\u524d\u64cd\u4f5c\u7cfb\u7edfShell\u7684\u6587\u4ef6\u6a21\u5f0f\uff08\u53ef\u4ee5\u5305\u542b\u8def\u5f84\u548c\u901a\u914d\u7b26\uff09\u3002 \u5728 include \u524d\u9762\u53ef\u4ee5\u6709\u4e00\u4e9b\u7a7a\u5b57\u7b26\uff0c\u4f46\u662f\u7edd\u4e0d\u80fd\u662f Tab \u952e\u5f00\u59cb\u3002 include \u548c filename \u53ef\u4ee5\u7528\u4e00\u4e2a\u6216\u591a\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4f60\u6709\u8fd9\u6837\u51e0\u4e2aMakefile\uff1a a.mk \u3001 b.mk \u3001 c.mk \uff0c\u8fd8\u6709\u4e00\u4e2a\u6587\u4ef6\u53eb foo.make \uff0c\u4ee5\u53ca\u4e00\u4e2a\u53d8\u91cf $(bar) \uff0c\u5176\u5305\u542b\u4e86 e.mk \u548c f.mk \uff0c\u90a3\u4e48\uff0c\u4e0b\u9762\u7684\u8bed\u53e5\uff1a .. code:: makefile include foo.make *.mk $(bar) \u7b49\u4ef7\u4e8e\uff1a .. code:: makefile include foo.make a.mk b.mk c.mk e.mk f.mk make\u547d\u4ee4\u5f00\u59cb\u65f6\uff0c\u4f1a\u627e\u5bfb include \u6240\u6307\u51fa\u7684\u5176\u5b83Makefile\uff0c\u5e76\u628a\u5176\u5185\u5bb9\u5b89\u7f6e\u5728\u5f53\u524d\u7684\u4f4d\u7f6e\u3002\u5c31\u597d\u50cfC/C++\u7684 #include \u6307\u4ee4\u4e00\u6837\u3002\u5982\u679c\u6587\u4ef6\u90fd\u6ca1\u6709\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\u6216\u662f\u76f8\u5bf9\u8def\u5f84\u7684\u8bdd\uff0cmake\u4f1a\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u9996\u5148\u5bfb\u627e\uff0c\u5982\u679c\u5f53\u524d\u76ee\u5f55\u4e0b\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\uff0cmake\u8fd8\u4f1a\u5728\u4e0b\u9762\u7684\u51e0\u4e2a\u76ee\u5f55\u4e0b\u627e\uff1a \u5982\u679cmake\u6267\u884c\u65f6\uff0c\u6709 -I \u6216 --include-dir \u53c2\u6570\uff0c\u90a3\u4e48make\u5c31\u4f1a\u5728\u8fd9\u4e2a\u53c2\u6570\u6240\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u53bb\u5bfb\u627e\u3002 \u5982\u679c\u76ee\u5f55 prefix /include \uff08\u4e00\u822c\u662f\uff1a /usr/local/bin \u6216 /usr/include \uff09\u5b58\u5728\u7684\u8bdd\uff0cmake\u4e5f\u4f1a\u53bb\u627e\u3002 \u5982\u679c\u6709\u6587\u4ef6\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff0cmake\u4f1a\u751f\u6210\u4e00\u6761\u8b66\u544a\u4fe1\u606f\uff0c\u4f46\u4e0d\u4f1a\u9a6c\u4e0a\u51fa\u73b0\u81f4\u547d\u9519\u8bef\u3002\u5b83\u4f1a\u7ee7\u7eed\u8f7d\u5165\u5176\u5b83\u7684\u6587\u4ef6\uff0c\u4e00\u65e6\u5b8c\u6210makefile\u7684\u8bfb\u53d6\uff0cmake\u4f1a\u518d\u91cd\u8bd5\u8fd9\u4e9b\u6ca1\u6709\u627e\u5230\uff0c\u6216\u662f\u4e0d\u80fd\u8bfb\u53d6\u7684\u6587\u4ef6\uff0c\u5982\u679c\u8fd8\u662f\u4e0d\u884c\uff0cmake\u624d\u4f1a\u51fa\u73b0\u4e00\u6761\u81f4\u547d\u4fe1\u606f\u3002\u5982\u679c\u4f60\u60f3\u8ba9make\u4e0d\u7406\u90a3\u4e9b\u65e0\u6cd5\u8bfb\u53d6\u7684\u6587\u4ef6\uff0c\u800c\u7ee7\u7eed\u6267\u884c\uff0c\u4f60\u53ef\u4ee5\u5728include\u524d\u52a0\u4e00\u4e2a\u51cf\u53f7\u201c-\u201d\u3002\u5982\uff1a .. code:: makefile -include lt;filename gt; \u5176\u8868\u793a\uff0c\u65e0\u8bbainclude\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u4ec0\u4e48\u9519\u8bef\uff0c\u90fd\u4e0d\u8981\u62a5\u9519\u7ee7\u7eed\u6267\u884c\u3002\u548c\u5176\u5b83\u7248\u672cmake\u517c\u5bb9\u7684\u76f8\u5173\u547d\u4ee4\u662fsinclude\uff0c\u5176\u4f5c\u7528\u548c\u8fd9\u4e00\u4e2a\u662f\u4e00\u6837\u7684\u3002","title":"\u5f15\u7528\u5176\u5b83\u7684Makefile"},{"location":"makefile/introduction/#makefiles_1","text":"\u5982\u679c\u4f60\u7684\u5f53\u524d\u73af\u5883\u4e2d\u5b9a\u4e49\u4e86\u73af\u5883\u53d8\u91cf MAKEFILES \uff0c\u90a3\u4e48\uff0cmake\u4f1a\u628a\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u7684\u503c\u505a\u4e00\u4e2a\u7c7b\u4f3c\u4e8e include \u7684\u52a8\u4f5c\u3002\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u7684\u503c\u662f\u5176\u5b83\u7684Makefile\uff0c\u7528\u7a7a\u683c\u5206\u9694\u3002\u53ea\u662f\uff0c\u5b83\u548c include \u4e0d\u540c\u7684\u662f\uff0c\u4ece\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\u4e2d\u5f15\u5165\u7684Makefile\u7684\u201c\u76ee\u6807\u201d\u4e0d\u4f1a\u8d77\u4f5c\u7528\uff0c\u5982\u679c\u73af\u5883\u53d8\u91cf\u4e2d\u5b9a\u4e49\u7684\u6587\u4ef6\u53d1\u73b0\u9519\u8bef\uff0cmake\u4e5f\u4f1a\u4e0d\u7406\u3002 \u4f46\u662f\u5728\u8fd9\u91cc\u6211\u8fd8\u662f\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u56e0\u4e3a\u53ea\u8981\u8fd9\u4e2a\u53d8\u91cf\u4e00\u88ab\u5b9a\u4e49\uff0c\u90a3\u4e48\u5f53\u4f60\u4f7f\u7528make\u65f6\uff0c\u6240\u6709\u7684Makefile\u90fd\u4f1a\u53d7\u5230\u5b83\u7684\u5f71\u54cd\uff0c\u8fd9\u7edd\u4e0d\u662f\u4f60\u60f3\u770b\u5230\u7684\u3002\u5728\u8fd9\u91cc\u63d0\u8fd9\u4e2a\u4e8b\uff0c\u53ea\u662f\u4e3a\u4e86\u544a\u8bc9\u5927\u5bb6\uff0c\u4e5f\u8bb8\u6709\u65f6\u5019\u4f60\u7684Makefile\u51fa\u73b0\u4e86\u602a\u4e8b\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u770b\u770b\u5f53\u524d\u73af\u5883\u4e2d\u6709\u6ca1\u6709\u5b9a\u4e49\u8fd9\u4e2a\u53d8\u91cf\u3002","title":"\u73af\u5883\u53d8\u91cfMAKEFILES"},{"location":"makefile/introduction/#make_2","text":"GNU\u7684make\u5de5\u4f5c\u65f6\u7684\u6267\u884c\u6b65\u9aa4\u5982\u4e0b\uff1a\uff08\u60f3\u6765\u5176\u5b83\u7684make\u4e5f\u662f\u7c7b\u4f3c\uff09 \u8bfb\u5165\u6240\u6709\u7684Makefile\u3002 \u8bfb\u5165\u88abinclude\u7684\u5176\u5b83Makefile\u3002 \u521d\u59cb\u5316\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\u3002 \u63a8\u5bfc\u9690\u6666\u89c4\u5219\uff0c\u5e76\u5206\u6790\u6240\u6709\u89c4\u5219\u3002 \u4e3a\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u521b\u5efa\u4f9d\u8d56\u5173\u7cfb\u94fe\u3002 \u6839\u636e\u4f9d\u8d56\u5173\u7cfb\uff0c\u51b3\u5b9a\u54ea\u4e9b\u76ee\u6807\u8981\u91cd\u65b0\u751f\u6210\u3002 \u6267\u884c\u751f\u6210\u547d\u4ee4\u3002 1-5\u6b65\u4e3a\u7b2c\u4e00\u4e2a\u9636\u6bb5\uff0c6-7\u4e3a\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u3002\u7b2c\u4e00\u4e2a\u9636\u6bb5\u4e2d\uff0c\u5982\u679c\u5b9a\u4e49\u7684\u53d8\u91cf\u88ab\u4f7f\u7528\u4e86\uff0c\u90a3\u4e48\uff0cmake\u4f1a\u628a\u5176\u5c55\u5f00\u5728\u4f7f\u7528\u7684\u4f4d\u7f6e\u3002\u4f46make\u5e76\u4e0d\u4f1a\u5b8c\u5168\u9a6c\u4e0a\u5c55\u5f00\uff0cmake\u4f7f\u7528\u7684\u662f\u62d6\u5ef6\u6218\u672f\uff0c\u5982\u679c\u53d8\u91cf\u51fa\u73b0\u5728\u4f9d\u8d56\u5173\u7cfb\u7684\u89c4\u5219\u4e2d\uff0c\u90a3\u4e48\u4ec5\u5f53\u8fd9\u6761\u4f9d\u8d56\u88ab\u51b3\u5b9a\u8981\u4f7f\u7528\u4e86\uff0c\u53d8\u91cf\u624d\u4f1a\u5728\u5176\u5185\u90e8\u5c55\u5f00\u3002 \u5f53\u7136\uff0c\u8fd9\u4e2a\u5de5\u4f5c\u65b9\u5f0f\u4f60\u4e0d\u4e00\u5b9a\u8981\u6e05\u695a\uff0c\u4f46\u662f\u77e5\u9053\u8fd9\u4e2a\u65b9\u5f0f\u4f60\u4e5f\u4f1a\u5bf9make\u66f4\u4e3a\u719f\u6089\u3002\u6709\u4e86\u8fd9\u4e2a\u57fa\u7840\uff0c\u540e\u7eed\u90e8\u5206\u4e5f\u5c31\u5bb9\u6613\u770b\u61c2\u4e86\u3002","title":"make\u7684\u5de5\u4f5c\u65b9\u5f0f"},{"location":"makefile/invoke/","text":"=========== make \u7684\u8fd0\u884c =========== \u4e00\u822c\u6765\u8bf4\uff0c\u6700\u7b80\u5355\u7684\u5c31\u662f\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e0b\u8f93\u5165make\u547d\u4ee4\uff0cmake\u547d\u4ee4\u4f1a\u627e\u5f53\u524d\u76ee\u5f55\u7684makefile\u6765\u6267\u884c\uff0c\u4e00\u5207\u90fd\u662f\u81ea\u52a8\u7684\u3002\u4f46\u4e5f\u6709\u65f6\u4f60\u4e5f\u8bb8\u53ea\u60f3\u8ba9make\u91cd\u7f16\u8bd1\u67d0\u4e9b\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u6574\u4e2a\u5de5\u7a0b\uff0c\u800c\u53c8\u6709\u7684\u65f6\u5019\u4f60\u6709\u51e0\u5957\u7f16\u8bd1\u89c4\u5219\uff0c\u4f60\u60f3\u5728\u4e0d\u540c\u7684\u65f6\u5019\u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u8bd1\u89c4\u5219\uff0c\u7b49\u7b49\u3002\u672c\u7ae0\u8282\u5c31\u662f\u8bb2\u8ff0\u5982\u4f55\u4f7f\u7528make\u547d\u4ee4\u7684\u3002 make\u7684\u9000\u51fa\u7801 make\u547d\u4ee4\u6267\u884c\u540e\u6709\u4e09\u4e2a\u9000\u51fa\u7801\uff1a 0 \u8868\u793a\u6210\u529f\u6267\u884c\u3002 1 \u5982\u679cmake\u8fd0\u884c\u65f6\u51fa\u73b0\u4efb\u4f55\u9519\u8bef\uff0c\u5176\u8fd4\u56de1\u3002 2 \u5982\u679c\u4f60\u4f7f\u7528\u4e86make\u7684\u201c-q\u201d\u9009\u9879\uff0c\u5e76\u4e14make\u4f7f\u5f97\u4e00\u4e9b\u76ee\u6807\u4e0d\u9700\u8981\u66f4\u65b0\uff0c\u90a3\u4e48\u8fd4\u56de2\u3002 Make\u7684\u76f8\u5173\u53c2\u6570\u6211\u4eec\u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u4e2d\u8bb2\u8ff0\u3002 \u6307\u5b9aMakefile \u524d\u9762\u6211\u4eec\u8bf4\u8fc7\uff0cGNU make\u627e\u5bfb\u9ed8\u8ba4\u7684Makefile\u7684\u89c4\u5219\u662f\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u4f9d\u6b21\u627e\u4e09\u4e2a\u6587\u4ef6\u2014\u2014\u201cGNUmakefile\u201d\u3001\u201cmakefile\u201d\u548c\u201cMakefile\u201d\u3002\u5176\u6309\u987a\u5e8f\u627e\u8fd9\u4e09\u4e2a\u6587\u4ef6\uff0c\u4e00\u65e6\u627e\u5230\uff0c\u5c31\u5f00\u59cb\u8bfb\u53d6\u8fd9\u4e2a\u6587\u4ef6\u5e76\u6267\u884c\u3002 \u5f53\u524d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7ed9make\u547d\u4ee4\u6307\u5b9a\u4e00\u4e2a\u7279\u6b8a\u540d\u5b57\u7684Makefile\u3002\u8981\u8fbe\u5230\u8fd9\u4e2a\u529f\u80fd\uff0c\u6211\u4eec\u8981\u4f7f\u7528make\u7684 -f \u6216\u662f --file \u53c2\u6570\uff08 --makefile \u53c2\u6570\u4e5f\u884c\uff09\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e2amakefile\u7684\u540d\u5b57\u662f\u201chchen.mk\u201d\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u8ba9make\u6765\u6267\u884c\u8fd9\u4e2a\u6587\u4ef6\uff1a :: make \u2013f hchen.mk \u5982\u679c\u5728make\u7684\u547d\u4ee4\u884c\u662f\uff0c\u4f60\u4e0d\u53ea\u4e00\u6b21\u5730\u4f7f\u7528\u4e86 -f \u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u6240\u6709\u6307\u5b9a\u7684makefile\u5c06\u4f1a\u88ab\u8fde\u5728\u4e00\u8d77\u4f20\u9012\u7ed9make\u6267\u884c\u3002 \u6307\u5b9a\u76ee\u6807 \u4e00\u822c\u6765\u8bf4\uff0cmake\u7684\u6700\u7ec8\u76ee\u6807\u662fmakefile\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\uff0c\u800c\u5176\u5b83\u76ee\u6807\u4e00\u822c\u662f\u7531\u8fd9\u4e2a\u76ee\u6807\u8fde\u5e26\u51fa\u6765\u7684\u3002\u8fd9\u662fmake\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\u5f53\u7136\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u4f60\u7684makefile\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u662f\u7531\u8bb8\u591a\u4e2a\u76ee\u6807\u7ec4\u6210\uff0c\u4f60\u53ef\u4ee5\u6307\u793amake\uff0c\u8ba9\u5176\u5b8c\u6210\u4f60\u6240\u6307\u5b9a\u7684\u76ee\u6807\u3002\u8981\u8fbe\u5230\u8fd9\u4e00\u76ee\u7684\u5f88\u7b80\u5355\uff0c\u9700\u5728make\u547d\u4ee4\u540e\u76f4\u63a5\u8ddf\u76ee\u6807\u7684\u540d\u5b57\u5c31\u53ef\u4ee5\u5b8c\u6210\uff08\u5982\u524d\u9762\u63d0\u5230\u7684\u201cmake clean\u201d\u5f62\u5f0f\uff09 \u4efb\u4f55\u5728makefile\u4e2d\u7684\u76ee\u6807\u90fd\u53ef\u4ee5\u88ab\u6307\u5b9a\u6210\u7ec8\u6781\u76ee\u6807\uff0c\u4f46\u662f\u9664\u4e86\u4ee5 - \u6253\u5934\uff0c\u6216\u662f\u5305\u542b\u4e86 = \u7684\u76ee\u6807\uff0c\u56e0\u4e3a\u6709\u8fd9\u4e9b\u5b57\u7b26\u7684\u76ee\u6807\uff0c\u4f1a\u88ab\u89e3\u6790\u6210\u547d\u4ee4\u884c\u53c2\u6570\u6216\u662f\u53d8\u91cf\u3002\u751a\u81f3\u6ca1\u6709\u88ab\u6211\u4eec\u660e\u786e\u5199\u51fa\u6765\u7684\u76ee\u6807\u4e5f\u53ef\u4ee5\u6210\u4e3amake\u7684\u7ec8\u6781\u76ee\u6807\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981make\u53ef\u4ee5\u627e\u5230\u5176\u9690\u542b\u89c4\u5219\u63a8\u5bfc\u89c4\u5219\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9690\u542b\u76ee\u6807\u540c\u6837\u53ef\u4ee5\u88ab\u6307\u5b9a\u6210\u7ec8\u6781\u76ee\u6807\u3002 \u6709\u4e00\u4e2amake\u7684\u73af\u5883\u53d8\u91cf\u53eb MAKECMDGOALS \uff0c\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u4f1a\u5b58\u653e\u4f60\u6240\u6307\u5b9a\u7684\u7ec8\u6781\u76ee\u6807\u7684\u5217\u8868\uff0c\u5982\u679c\u5728\u547d\u4ee4\u884c\u4e0a\uff0c\u4f60\u6ca1\u6709\u6307\u5b9a\u76ee\u6807\uff0c\u90a3\u4e48\uff0c\u8fd9\u4e2a\u53d8\u91cf\u662f\u7a7a\u503c\u3002\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u8ba9\u4f60\u4f7f\u7528\u5728\u4e00\u4e9b\u6bd4\u8f83\u7279\u6b8a\u7684\u60c5\u5f62\u4e0b\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a .. code:: makefile sources = foo.c bar.c ifneq ( $(MAKECMDGOALS),clean) include $(sources:.c=.d) endif \u57fa\u4e8e\u4e0a\u9762\u7684\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u53ea\u8981\u6211\u4eec\u8f93\u5165\u7684\u547d\u4ee4\u4e0d\u662f\u201cmake clean\u201d\uff0c\u90a3\u4e48makefile\u4f1a\u81ea\u52a8\u5305\u542b\u201cfoo.d\u201d\u548c\u201cbar.d\u201d\u8fd9\u4e24\u4e2amakefile\u3002 \u4f7f\u7528\u6307\u5b9a\u7ec8\u6781\u76ee\u6807\u7684\u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u8ba9\u6211\u4eec\u7f16\u8bd1\u6211\u4eec\u7684\u7a0b\u5e8f\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile .PHONY: all all: prog1 prog2 prog3 prog4 \u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2amakefile\u4e2d\u6709\u56db\u4e2a\u9700\u8981\u7f16\u8bd1\u7684\u7a0b\u5e8f\u2014\u2014\u201cprog1\u201d\uff0c \u201cprog2\u201d\uff0c \u201cprog3\u201d\u548c \u201cprog4\u201d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201cmake all\u201d\u547d\u4ee4\u6765\u7f16\u8bd1\u6240\u6709\u7684\u76ee\u6807\uff08\u5982\u679c\u628aall\u7f6e\u6210\u7b2c\u4e00\u4e2a\u76ee\u6807\uff0c\u90a3\u4e48\u53ea\u9700\u6267\u884c\u201cmake\u201d\uff09\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u201cmake prog2\u201d\u6765\u5355\u72ec\u7f16\u8bd1\u76ee\u6807\u201cprog2\u201d\u3002 \u5373\u7136make\u53ef\u4ee5\u6307\u5b9a\u6240\u6709makefile\u4e2d\u7684\u76ee\u6807\uff0c\u90a3\u4e48\u4e5f\u5305\u62ec\u201c\u4f2a\u76ee\u6807\u201d\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u79cd\u6027\u8d28\u6765\u8ba9\u6211\u4eec\u7684makefile\u6839\u636e\u6307\u5b9a\u7684\u4e0d\u540c\u7684\u76ee\u6807\u6765\u5b8c\u6210\u4e0d\u540c\u7684\u4e8b\u3002\u5728Unix\u4e16\u754c\u4e2d\uff0c\u8f6f\u4ef6\u53d1\u5e03\u65f6\uff0c\u7279\u522b\u662fGNU\u8fd9\u79cd\u5f00\u6e90\u8f6f\u4ef6\u7684\u53d1\u5e03\u65f6\uff0c\u5176makefile\u90fd\u5305\u542b\u4e86\u7f16\u8bd1\u3001\u5b89\u88c5\u3001\u6253\u5305\u7b49\u529f\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u53c2\u7167\u8fd9\u79cd\u89c4\u5219\u6765\u4e66\u5199\u6211\u4eec\u7684makefile\u4e2d\u7684\u76ee\u6807\u3002 all:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u662f\u6240\u6709\u76ee\u6807\u7684\u76ee\u6807\uff0c\u5176\u529f\u80fd\u4e00\u822c\u662f\u7f16\u8bd1\u6240\u6709\u7684\u76ee\u6807\u3002 clean:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u5220\u9664\u6240\u6709\u88abmake\u521b\u5efa\u7684\u6587\u4ef6\u3002 install:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u5b89\u88c5\u5df2\u7f16\u8bd1\u597d\u7684\u7a0b\u5e8f\uff0c\u5176\u5b9e\u5c31\u662f\u628a\u76ee\u6807\u6267\u884c\u6587\u4ef6\u62f7\u8d1d\u5230\u6307\u5b9a\u7684\u76ee\u6807\u4e2d\u53bb\u3002 print:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u7684\u529f\u80fd\u662f\u4f8b\u51fa\u6539\u53d8\u8fc7\u7684\u6e90\u6587\u4ef6\u3002 tar:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u628a\u6e90\u7a0b\u5e8f\u6253\u5305\u5907\u4efd\u3002\u4e5f\u5c31\u662f\u4e00\u4e2atar\u6587\u4ef6\u3002 dist:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u521b\u5efa\u4e00\u4e2a\u538b\u7f29\u6587\u4ef6\uff0c\u4e00\u822c\u662f\u628atar\u6587\u4ef6\u538b\u6210Z\u6587\u4ef6\u3002\u6216\u662fgz\u6587\u4ef6\u3002 TAGS:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u66f4\u65b0\u6240\u6709\u7684\u76ee\u6807\uff0c\u4ee5\u5907\u5b8c\u6574\u5730\u91cd\u7f16\u8bd1\u4f7f\u7528\u3002 check\u548ctest:\u8fd9\u4e24\u4e2a\u4f2a\u76ee\u6807\u4e00\u822c\u7528\u6765\u6d4b\u8bd5makefile\u7684\u6d41\u7a0b\u3002 \u5f53\u7136\u4e00\u4e2a\u9879\u76ee\u7684makefile\u4e2d\u4e5f\u4e0d\u4e00\u5b9a\u8981\u4e66\u5199\u8fd9\u6837\u7684\u76ee\u6807\uff0c\u8fd9\u4e9b\u4e1c\u897f\u90fd\u662fGNU\u7684\u4e1c\u897f\uff0c\u4f46\u662f\u6211\u60f3\uff0cGNU\u641e\u51fa\u8fd9\u4e9b\u4e1c\u897f\u4e00\u5b9a\u6709\u5176\u53ef\u53d6\u4e4b\u5904\uff08\u7b49\u4f60\u7684 UNIX\u4e0b\u7684\u7a0b\u5e8f\u6587\u4ef6\u4e00\u591a\u65f6\u4f60\u5c31\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u529f\u80fd\u5f88\u6709\u7528\u4e86\uff09\uff0c\u8fd9\u91cc\u53ea\u4e0d\u8fc7\u662f\u8bf4\u660e\u4e86\uff0c\u5982\u679c\u4f60\u8981\u4e66\u5199\u8fd9\u79cd\u529f\u80fd\uff0c\u6700\u597d\u4f7f\u7528\u8fd9\u79cd\u540d\u5b57\u547d\u540d\u4f60\u7684\u76ee\u6807\uff0c\u8fd9\u6837\u89c4\u8303\u4e00\u4e9b\uff0c\u89c4\u8303\u7684\u597d\u5904\u5c31\u662f\u2014\u2014\u4e0d\u7528\u89e3\u91ca\uff0c\u5927\u5bb6\u90fd\u660e\u767d\u3002\u800c\u4e14\u5982\u679c\u4f60\u7684makefile\u4e2d\u6709\u8fd9\u4e9b\u529f\u80fd\uff0c\u4e00\u662f\u5f88\u5b9e\u7528\uff0c\u4e8c\u662f\u53ef\u4ee5\u663e\u5f97\u4f60\u7684makefile\u5f88\u4e13\u4e1a\uff08\u4e0d\u662f\u90a3\u79cd\u521d\u5b66\u8005\u7684\u4f5c\u54c1\uff09\u3002 \u68c0\u67e5\u89c4\u5219 \u6709\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u60f3\u8ba9\u6211\u4eec\u7684makefile\u4e2d\u7684\u89c4\u5219\u6267\u884c\u8d77\u6765\uff0c\u6211\u4eec\u53ea\u60f3\u68c0\u67e5\u4e00\u4e0b\u6211\u4eec\u7684\u547d\u4ee4\uff0c\u6216\u662f\u6267\u884c\u7684\u5e8f\u5217\u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528make\u547d\u4ee4\u7684\u4e0b\u8ff0\u53c2\u6570\uff1a -n , --just-print , --dry-run , --recon \u4e0d\u6267\u884c\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ea\u662f\u6253\u5370\u547d\u4ee4\uff0c\u4e0d\u7ba1\u76ee\u6807\u662f\u5426\u66f4\u65b0\uff0c\u628a\u89c4\u5219\u548c\u8fde\u5e26\u89c4\u5219\u4e0b\u7684\u547d\u4ee4\u6253\u5370\u51fa\u6765\uff0c\u4f46\u4e0d\u6267\u884c\uff0c\u8fd9\u4e9b\u53c2\u6570\u5bf9\u4e8e\u6211\u4eec\u8c03\u8bd5makefile\u5f88\u6709\u7528\u5904\u3002 -t , --touch \u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u5c31\u662f\u628a\u76ee\u6807\u6587\u4ef6\u7684\u65f6\u95f4\u66f4\u65b0\uff0c\u4f46\u4e0d\u66f4\u6539\u76ee\u6807\u6587\u4ef6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cmake\u5047\u88c5\u7f16\u8bd1\u76ee\u6807\uff0c\u4f46\u4e0d\u662f\u771f\u6b63\u7684\u7f16\u8bd1\u76ee\u6807\uff0c\u53ea\u662f\u628a\u76ee\u6807\u53d8\u6210\u5df2\u7f16\u8bd1\u8fc7\u7684\u72b6\u6001\u3002 -q , --question \u8fd9\u4e2a\u53c2\u6570\u7684\u884c\u4e3a\u662f\u627e\u76ee\u6807\u7684\u610f\u601d\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u76ee\u6807\u5b58\u5728\uff0c\u90a3\u4e48\u5176\u4ec0\u4e48\u4e5f\u4e0d\u4f1a\u8f93\u51fa\uff0c\u5f53\u7136\u4e5f\u4e0d\u4f1a\u6267\u884c\u7f16\u8bd1\uff0c\u5982\u679c\u76ee\u6807\u4e0d\u5b58\u5728\uff0c\u5176\u4f1a\u6253\u5370\u51fa\u4e00\u6761\u51fa\u9519\u4fe1\u606f\u3002 -W file , --what-if= file , --assume-new= file , --new-file= file \u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u3002\u4e00\u822c\u662f\u662f\u6e90\u6587\u4ef6\uff08\u6216\u4f9d\u8d56\u6587\u4ef6\uff09\uff0cMake\u4f1a\u6839\u636e\u89c4\u5219\u63a8\u5bfc\u6765\u8fd0\u884c\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u6587\u4ef6\u7684\u547d\u4ee4\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u548c\u201c-n\u201d\u53c2\u6570\u4e00\u540c\u4f7f\u7528\uff0c\u6765\u67e5\u770b\u8fd9\u4e2a\u4f9d\u8d56\u6587\u4ef6\u6240\u53d1\u751f\u7684\u89c4\u5219\u547d\u4ee4\u3002 \u53e6\u5916\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u7528\u6cd5\u662f\u7ed3\u5408 -p \u548c -v \u6765\u8f93\u51famakefile\u88ab\u6267\u884c\u65f6\u7684\u4fe1\u606f\uff08\u8fd9\u4e2a\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\uff09\u3002 make\u7684\u53c2\u6570 \u4e0b\u9762\u5217\u4e3e\u4e86\u6240\u6709GNU make 3.80\u7248\u7684\u53c2\u6570\u5b9a\u4e49\u3002\u5176\u5b83\u7248\u672c\u548c\u4ea7\u5546\u7684make\u5927\u540c\u5c0f\u5f02\uff0c\u4e0d\u8fc7\u5176\u5b83\u4ea7\u5546\u7684make\u7684\u5177\u4f53\u53c2\u6570\u8fd8\u662f\u8bf7\u53c2\u8003\u5404\u81ea\u7684\u4ea7\u54c1\u6587\u6863\u3002 -b , -m \u8fd9\u4e24\u4e2a\u53c2\u6570\u7684\u4f5c\u7528\u662f\u5ffd\u7565\u548c\u5176\u5b83\u7248\u672cmake\u7684\u517c\u5bb9\u6027\u3002 -B , --always-make \u8ba4\u4e3a\u6240\u6709\u7684\u76ee\u6807\u90fd\u9700\u8981\u66f4\u65b0\uff08\u91cd\u7f16\u8bd1\uff09\u3002 -C , --directory \\ =\\ \u6307\u5b9a\u8bfb\u53d6makefile\u7684\u76ee\u5f55\u3002\u5982\u679c\u6709\u591a\u4e2a\u201c-C\u201d\u53c2\u6570\uff0cmake\u7684\u89e3\u91ca\u662f\u540e\u9762\u7684\u8def\u5f84\u4ee5\u524d\u9762\u7684\u4f5c\u4e3a\u76f8\u5bf9\u8def\u5f84\uff0c\u5e76\u4ee5\u6700\u540e\u7684\u76ee\u5f55\u4f5c\u4e3a\u88ab\u6307\u5b9a\u76ee\u5f55\u3002\u5982\uff1a\u201cmake -C ~hchen/test -C prog\u201d\u7b49\u4ef7\u4e8e\u201cmake -C ~hchen/test/prog\u201d\u3002 -debug \\ [= ] \u8f93\u51famake\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u5b83\u6709\u51e0\u79cd\u4e0d\u540c\u7684\u7ea7\u522b\u53ef\u4f9b\u9009\u62e9\uff0c\u5982\u679c\u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u5c31\u662f\u8f93\u51fa\u6700\u7b80\u5355\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u4e0b\u9762\u662f \u7684\u53d6\u503c\uff1a - a: \u4e5f\u5c31\u662fall\uff0c\u8f93\u51fa\u6240\u6709\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\uff08\u4f1a\u975e\u5e38\u7684\u591a\uff09 - b: \u4e5f\u5c31\u662fbasic\uff0c\u53ea\u8f93\u51fa\u7b80\u5355\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u5373\u8f93\u51fa\u4e0d\u9700\u8981\u91cd\u7f16\u8bd1\u7684\u76ee\u6807\u3002 - v: \u4e5f\u5c31\u662fverbose\uff0c\u5728b\u9009\u9879\u7684\u7ea7\u522b\u4e4b\u4e0a\u3002\u8f93\u51fa\u7684\u4fe1\u606f\u5305\u62ec\u54ea\u4e2amakefile\u88ab\u89e3\u6790\uff0c\u4e0d\u9700\u8981\u88ab\u91cd\u7f16\u8bd1\u7684\u4f9d\u8d56\u6587\u4ef6\uff08\u6216\u662f\u4f9d\u8d56\u76ee\u6807\uff09\u7b49\u3002 - i: \u4e5f\u5c31\u662fimplicit\uff0c\u8f93\u51fa\u6240\u4ee5\u7684\u9690\u542b\u89c4\u5219\u3002 - j: \u4e5f\u5c31\u662fjobs\uff0c\u8f93\u51fa\u6267\u884c\u89c4\u5219\u4e2d\u547d\u4ee4\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5982\u547d\u4ee4\u7684PID\u3001\u8fd4\u56de\u7801\u7b49\u3002 - m: \u4e5f\u5c31\u662fmakefile\uff0c\u8f93\u51famake\u8bfb\u53d6makefile\uff0c\u66f4\u65b0makefile\uff0c\u6267\u884cmakefile\u7684\u4fe1\u606f\u3002 -d \u76f8\u5f53\u4e8e\u201c--debug=a\u201d\u3002 -e , --environment-overrides \u6307\u660e\u73af\u5883\u53d8\u91cf\u7684\u503c\u8986\u76d6makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u7684\u503c\u3002 -f \\ =\\ , --file \\ =\\ , --makefile \\ =\\ \u6307\u5b9a\u9700\u8981\u6267\u884c\u7684makefile\u3002 -h , --help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 -i , --ignore-errors \u5728\u6267\u884c\u65f6\u5ffd\u7565\u6240\u6709\u7684\u9519\u8bef\u3002 -I , --include-dir \\ =\\ \u6307\u5b9a\u4e00\u4e2a\u88ab\u5305\u542bmakefile\u7684\u641c\u7d22\u76ee\u6807\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u201c-I\u201d\u53c2\u6570\u6765\u6307\u5b9a\u591a\u4e2a\u76ee\u5f55\u3002 -j [ ], --jobs \\ [= ] \u6307\u540c\u65f6\u8fd0\u884c\u547d\u4ee4\u7684\u4e2a\u6570\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\uff0cmake\u8fd0\u884c\u547d\u4ee4\u65f6\u80fd\u8fd0\u884c\u591a\u5c11\u5c31\u8fd0\u884c\u591a\u5c11\u3002\u5982\u679c\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7684\u201c-j\u201d\u53c2\u6570\uff0c\u90a3\u4e48\u4ec5\u6700\u540e\u4e00\u4e2a\u201c-j\u201d\u624d\u662f\u6709\u6548\u7684\u3002\uff08\u6ce8\u610f\u8fd9\u4e2a\u53c2\u6570\u5728MS-DOS\u4e2d\u662f\u65e0\u7528\u7684\uff09 -k , --keep-going \u51fa\u9519\u4e5f\u4e0d\u505c\u6b62\u8fd0\u884c\u3002\u5982\u679c\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u5931\u8d25\u4e86\uff0c\u90a3\u4e48\u4f9d\u8d56\u4e8e\u5176\u4e0a\u7684\u76ee\u6807\u5c31\u4e0d\u4f1a\u88ab\u6267\u884c\u4e86\u3002 -l , --load-average \\ [= ], -max-load \\ [= ] \u6307\u5b9amake\u8fd0\u884c\u547d\u4ee4\u7684\u8d1f\u8f7d\u3002 -n , --just-print , --dry-run , --recon \u4ec5\u8f93\u51fa\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u547d\u4ee4\u5e8f\u5217\uff0c\u4f46\u5e76\u4e0d\u6267\u884c\u3002 -o , --old-file \\ =\\ , --assume-old \\ =\\ \u4e0d\u91cd\u65b0\u751f\u6210\u7684\u6307\u5b9a\u7684 \uff0c\u5373\u4f7f\u8fd9\u4e2a\u76ee\u6807\u7684\u4f9d\u8d56\u6587\u4ef6\u65b0\u4e8e\u5b83\u3002 -p , --print-data-base \u8f93\u51famakefile\u4e2d\u7684\u6240\u6709\u6570\u636e\uff0c\u5305\u62ec\u6240\u6709\u7684\u89c4\u5219\u548c\u53d8\u91cf\u3002\u8fd9\u4e2a\u53c2\u6570\u4f1a\u8ba9\u4e00\u4e2a\u7b80\u5355\u7684makefile\u90fd\u4f1a\u8f93\u51fa\u4e00\u5806\u4fe1\u606f\u3002\u5982\u679c\u4f60\u53ea\u662f\u60f3\u8f93\u51fa\u4fe1\u606f\u800c\u4e0d\u60f3\u6267\u884cmakefile\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u201cmake -qp\u201d\u547d\u4ee4\u3002\u5982\u679c\u4f60\u60f3\u67e5\u770b\u6267\u884cmakefile\u524d\u7684\u9884\u8bbe\u53d8\u91cf\u548c\u89c4\u5219\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 \u201cmake \u2013p \u2013f /dev/null\u201d\u3002\u8fd9\u4e2a\u53c2\u6570\u8f93\u51fa\u7684\u4fe1\u606f\u4f1a\u5305\u542b\u7740\u4f60\u7684makefile\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u548c\u884c\u53f7\uff0c\u6240\u4ee5\uff0c\u7528\u8fd9\u4e2a\u53c2\u6570\u6765\u8c03\u8bd5\u4f60\u7684 makefile\u4f1a\u662f\u5f88\u6709\u7528\u7684\uff0c\u7279\u522b\u662f\u5f53\u4f60\u7684\u73af\u5883\u53d8\u91cf\u5f88\u590d\u6742\u7684\u65f6\u5019\u3002 -q , --question \u4e0d\u8fd0\u884c\u547d\u4ee4\uff0c\u4e5f\u4e0d\u8f93\u51fa\u3002\u4ec5\u4ec5\u662f\u68c0\u67e5\u6240\u6307\u5b9a\u7684\u76ee\u6807\u662f\u5426\u9700\u8981\u66f4\u65b0\u3002\u5982\u679c\u662f0\u5219\u8bf4\u660e\u8981\u66f4\u65b0\uff0c\u5982\u679c\u662f2\u5219\u8bf4\u660e\u6709\u9519\u8bef\u53d1\u751f\u3002 -r , --no-builtin-rules \u7981\u6b62make\u4f7f\u7528\u4efb\u4f55\u9690\u542b\u89c4\u5219\u3002 -R , --no-builtin-variabes \u7981\u6b62make\u4f7f\u7528\u4efb\u4f55\u4f5c\u7528\u4e8e\u53d8\u91cf\u4e0a\u7684\u9690\u542b\u89c4\u5219\u3002 -s , --silent , --quiet \u5728\u547d\u4ee4\u8fd0\u884c\u65f6\u4e0d\u8f93\u51fa\u547d\u4ee4\u7684\u8f93\u51fa\u3002 -S , --no-keep-going , --stop \u53d6\u6d88\u201c-k\u201d\u9009\u9879\u7684\u4f5c\u7528\u3002\u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\uff0cmake\u7684\u9009\u9879\u662f\u4ece\u73af\u5883\u53d8\u91cf\u201cMAKEFLAGS\u201d\u4e2d\u7ee7\u627f\u4e0b\u6765\u7684\u3002\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\u6765\u8ba9\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u201c-k\u201d\u9009\u9879\u5931\u6548\u3002 -t , --touch \u76f8\u5f53\u4e8eUNIX\u7684touch\u547d\u4ee4\uff0c\u53ea\u662f\u628a\u76ee\u6807\u7684\u4fee\u6539\u65e5\u671f\u53d8\u6210\u6700\u65b0\u7684\uff0c\u4e5f\u5c31\u662f\u963b\u6b62\u751f\u6210\u76ee\u6807\u7684\u547d\u4ee4\u8fd0\u884c\u3002 -v , --version \u8f93\u51famake\u7a0b\u5e8f\u7684\u7248\u672c\u3001\u7248\u6743\u7b49\u5173\u4e8emake\u7684\u4fe1\u606f\u3002 -w , --print-directory \u8f93\u51fa\u8fd0\u884cmakefile\u4e4b\u524d\u548c\u4e4b\u540e\u7684\u4fe1\u606f\u3002\u8fd9\u4e2a\u53c2\u6570\u5bf9\u4e8e\u8ddf\u8e2a\u5d4c\u5957\u5f0f\u8c03\u7528make\u65f6\u5f88\u6709\u7528\u3002 --no-print-directory \u7981\u6b62\u201c-w\u201d\u9009\u9879\u3002 -W , --what-if \\ =\\ , --new-file \\ =\\ , --assume-file \\ =\\ \u5047\u5b9a\u76ee\u6807 ;\u9700\u8981\u66f4\u65b0\uff0c\u5982\u679c\u548c\u201c-n\u201d\u9009\u9879\u4f7f\u7528\uff0c\u90a3\u4e48\u8fd9\u4e2a\u53c2\u6570\u4f1a\u8f93\u51fa\u8be5\u76ee\u6807\u66f4\u65b0\u65f6\u7684\u8fd0\u884c\u52a8\u4f5c\u3002\u5982\u679c\u6ca1\u6709\u201c-n\u201d\u90a3\u4e48\u5c31\u50cf\u8fd0\u884cUNIX\u7684\u201ctouch\u201d\u547d\u4ee4\u4e00\u6837\uff0c\u4f7f\u5f97 ;\u7684\u4fee\u6539\u65f6\u95f4\u4e3a\u5f53\u524d\u65f6\u95f4\u3002 --warn-undefined-variables \u53ea\u8981make\u53d1\u73b0\u6709\u672a\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u5c31\u8f93\u51fa\u8b66\u544a\u4fe1\u606f\u3002","title":"make \u7684\u8fd0\u884c"},{"location":"makefile/invoke/#make","text":"make\u547d\u4ee4\u6267\u884c\u540e\u6709\u4e09\u4e2a\u9000\u51fa\u7801\uff1a 0 \u8868\u793a\u6210\u529f\u6267\u884c\u3002 1 \u5982\u679cmake\u8fd0\u884c\u65f6\u51fa\u73b0\u4efb\u4f55\u9519\u8bef\uff0c\u5176\u8fd4\u56de1\u3002 2 \u5982\u679c\u4f60\u4f7f\u7528\u4e86make\u7684\u201c-q\u201d\u9009\u9879\uff0c\u5e76\u4e14make\u4f7f\u5f97\u4e00\u4e9b\u76ee\u6807\u4e0d\u9700\u8981\u66f4\u65b0\uff0c\u90a3\u4e48\u8fd4\u56de2\u3002 Make\u7684\u76f8\u5173\u53c2\u6570\u6211\u4eec\u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u4e2d\u8bb2\u8ff0\u3002","title":"make\u7684\u9000\u51fa\u7801"},{"location":"makefile/invoke/#makefile","text":"\u524d\u9762\u6211\u4eec\u8bf4\u8fc7\uff0cGNU make\u627e\u5bfb\u9ed8\u8ba4\u7684Makefile\u7684\u89c4\u5219\u662f\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u4f9d\u6b21\u627e\u4e09\u4e2a\u6587\u4ef6\u2014\u2014\u201cGNUmakefile\u201d\u3001\u201cmakefile\u201d\u548c\u201cMakefile\u201d\u3002\u5176\u6309\u987a\u5e8f\u627e\u8fd9\u4e09\u4e2a\u6587\u4ef6\uff0c\u4e00\u65e6\u627e\u5230\uff0c\u5c31\u5f00\u59cb\u8bfb\u53d6\u8fd9\u4e2a\u6587\u4ef6\u5e76\u6267\u884c\u3002 \u5f53\u524d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7ed9make\u547d\u4ee4\u6307\u5b9a\u4e00\u4e2a\u7279\u6b8a\u540d\u5b57\u7684Makefile\u3002\u8981\u8fbe\u5230\u8fd9\u4e2a\u529f\u80fd\uff0c\u6211\u4eec\u8981\u4f7f\u7528make\u7684 -f \u6216\u662f --file \u53c2\u6570\uff08 --makefile \u53c2\u6570\u4e5f\u884c\uff09\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e2amakefile\u7684\u540d\u5b57\u662f\u201chchen.mk\u201d\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u8ba9make\u6765\u6267\u884c\u8fd9\u4e2a\u6587\u4ef6\uff1a :: make \u2013f hchen.mk \u5982\u679c\u5728make\u7684\u547d\u4ee4\u884c\u662f\uff0c\u4f60\u4e0d\u53ea\u4e00\u6b21\u5730\u4f7f\u7528\u4e86 -f \u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u6240\u6709\u6307\u5b9a\u7684makefile\u5c06\u4f1a\u88ab\u8fde\u5728\u4e00\u8d77\u4f20\u9012\u7ed9make\u6267\u884c\u3002","title":"\u6307\u5b9aMakefile"},{"location":"makefile/invoke/#_1","text":"\u4e00\u822c\u6765\u8bf4\uff0cmake\u7684\u6700\u7ec8\u76ee\u6807\u662fmakefile\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\uff0c\u800c\u5176\u5b83\u76ee\u6807\u4e00\u822c\u662f\u7531\u8fd9\u4e2a\u76ee\u6807\u8fde\u5e26\u51fa\u6765\u7684\u3002\u8fd9\u662fmake\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\u5f53\u7136\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u4f60\u7684makefile\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u662f\u7531\u8bb8\u591a\u4e2a\u76ee\u6807\u7ec4\u6210\uff0c\u4f60\u53ef\u4ee5\u6307\u793amake\uff0c\u8ba9\u5176\u5b8c\u6210\u4f60\u6240\u6307\u5b9a\u7684\u76ee\u6807\u3002\u8981\u8fbe\u5230\u8fd9\u4e00\u76ee\u7684\u5f88\u7b80\u5355\uff0c\u9700\u5728make\u547d\u4ee4\u540e\u76f4\u63a5\u8ddf\u76ee\u6807\u7684\u540d\u5b57\u5c31\u53ef\u4ee5\u5b8c\u6210\uff08\u5982\u524d\u9762\u63d0\u5230\u7684\u201cmake clean\u201d\u5f62\u5f0f\uff09 \u4efb\u4f55\u5728makefile\u4e2d\u7684\u76ee\u6807\u90fd\u53ef\u4ee5\u88ab\u6307\u5b9a\u6210\u7ec8\u6781\u76ee\u6807\uff0c\u4f46\u662f\u9664\u4e86\u4ee5 - \u6253\u5934\uff0c\u6216\u662f\u5305\u542b\u4e86 = \u7684\u76ee\u6807\uff0c\u56e0\u4e3a\u6709\u8fd9\u4e9b\u5b57\u7b26\u7684\u76ee\u6807\uff0c\u4f1a\u88ab\u89e3\u6790\u6210\u547d\u4ee4\u884c\u53c2\u6570\u6216\u662f\u53d8\u91cf\u3002\u751a\u81f3\u6ca1\u6709\u88ab\u6211\u4eec\u660e\u786e\u5199\u51fa\u6765\u7684\u76ee\u6807\u4e5f\u53ef\u4ee5\u6210\u4e3amake\u7684\u7ec8\u6781\u76ee\u6807\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981make\u53ef\u4ee5\u627e\u5230\u5176\u9690\u542b\u89c4\u5219\u63a8\u5bfc\u89c4\u5219\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9690\u542b\u76ee\u6807\u540c\u6837\u53ef\u4ee5\u88ab\u6307\u5b9a\u6210\u7ec8\u6781\u76ee\u6807\u3002 \u6709\u4e00\u4e2amake\u7684\u73af\u5883\u53d8\u91cf\u53eb MAKECMDGOALS \uff0c\u8fd9\u4e2a\u53d8\u91cf\u4e2d\u4f1a\u5b58\u653e\u4f60\u6240\u6307\u5b9a\u7684\u7ec8\u6781\u76ee\u6807\u7684\u5217\u8868\uff0c\u5982\u679c\u5728\u547d\u4ee4\u884c\u4e0a\uff0c\u4f60\u6ca1\u6709\u6307\u5b9a\u76ee\u6807\uff0c\u90a3\u4e48\uff0c\u8fd9\u4e2a\u53d8\u91cf\u662f\u7a7a\u503c\u3002\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u8ba9\u4f60\u4f7f\u7528\u5728\u4e00\u4e9b\u6bd4\u8f83\u7279\u6b8a\u7684\u60c5\u5f62\u4e0b\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a .. code:: makefile sources = foo.c bar.c ifneq ( $(MAKECMDGOALS),clean) include $(sources:.c=.d) endif \u57fa\u4e8e\u4e0a\u9762\u7684\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u53ea\u8981\u6211\u4eec\u8f93\u5165\u7684\u547d\u4ee4\u4e0d\u662f\u201cmake clean\u201d\uff0c\u90a3\u4e48makefile\u4f1a\u81ea\u52a8\u5305\u542b\u201cfoo.d\u201d\u548c\u201cbar.d\u201d\u8fd9\u4e24\u4e2amakefile\u3002 \u4f7f\u7528\u6307\u5b9a\u7ec8\u6781\u76ee\u6807\u7684\u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u8ba9\u6211\u4eec\u7f16\u8bd1\u6211\u4eec\u7684\u7a0b\u5e8f\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile .PHONY: all all: prog1 prog2 prog3 prog4 \u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2amakefile\u4e2d\u6709\u56db\u4e2a\u9700\u8981\u7f16\u8bd1\u7684\u7a0b\u5e8f\u2014\u2014\u201cprog1\u201d\uff0c \u201cprog2\u201d\uff0c \u201cprog3\u201d\u548c \u201cprog4\u201d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201cmake all\u201d\u547d\u4ee4\u6765\u7f16\u8bd1\u6240\u6709\u7684\u76ee\u6807\uff08\u5982\u679c\u628aall\u7f6e\u6210\u7b2c\u4e00\u4e2a\u76ee\u6807\uff0c\u90a3\u4e48\u53ea\u9700\u6267\u884c\u201cmake\u201d\uff09\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u201cmake prog2\u201d\u6765\u5355\u72ec\u7f16\u8bd1\u76ee\u6807\u201cprog2\u201d\u3002 \u5373\u7136make\u53ef\u4ee5\u6307\u5b9a\u6240\u6709makefile\u4e2d\u7684\u76ee\u6807\uff0c\u90a3\u4e48\u4e5f\u5305\u62ec\u201c\u4f2a\u76ee\u6807\u201d\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8fd9\u79cd\u6027\u8d28\u6765\u8ba9\u6211\u4eec\u7684makefile\u6839\u636e\u6307\u5b9a\u7684\u4e0d\u540c\u7684\u76ee\u6807\u6765\u5b8c\u6210\u4e0d\u540c\u7684\u4e8b\u3002\u5728Unix\u4e16\u754c\u4e2d\uff0c\u8f6f\u4ef6\u53d1\u5e03\u65f6\uff0c\u7279\u522b\u662fGNU\u8fd9\u79cd\u5f00\u6e90\u8f6f\u4ef6\u7684\u53d1\u5e03\u65f6\uff0c\u5176makefile\u90fd\u5305\u542b\u4e86\u7f16\u8bd1\u3001\u5b89\u88c5\u3001\u6253\u5305\u7b49\u529f\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u53c2\u7167\u8fd9\u79cd\u89c4\u5219\u6765\u4e66\u5199\u6211\u4eec\u7684makefile\u4e2d\u7684\u76ee\u6807\u3002 all:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u662f\u6240\u6709\u76ee\u6807\u7684\u76ee\u6807\uff0c\u5176\u529f\u80fd\u4e00\u822c\u662f\u7f16\u8bd1\u6240\u6709\u7684\u76ee\u6807\u3002 clean:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u5220\u9664\u6240\u6709\u88abmake\u521b\u5efa\u7684\u6587\u4ef6\u3002 install:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u5b89\u88c5\u5df2\u7f16\u8bd1\u597d\u7684\u7a0b\u5e8f\uff0c\u5176\u5b9e\u5c31\u662f\u628a\u76ee\u6807\u6267\u884c\u6587\u4ef6\u62f7\u8d1d\u5230\u6307\u5b9a\u7684\u76ee\u6807\u4e2d\u53bb\u3002 print:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u7684\u529f\u80fd\u662f\u4f8b\u51fa\u6539\u53d8\u8fc7\u7684\u6e90\u6587\u4ef6\u3002 tar:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u628a\u6e90\u7a0b\u5e8f\u6253\u5305\u5907\u4efd\u3002\u4e5f\u5c31\u662f\u4e00\u4e2atar\u6587\u4ef6\u3002 dist:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u521b\u5efa\u4e00\u4e2a\u538b\u7f29\u6587\u4ef6\uff0c\u4e00\u822c\u662f\u628atar\u6587\u4ef6\u538b\u6210Z\u6587\u4ef6\u3002\u6216\u662fgz\u6587\u4ef6\u3002 TAGS:\u8fd9\u4e2a\u4f2a\u76ee\u6807\u529f\u80fd\u662f\u66f4\u65b0\u6240\u6709\u7684\u76ee\u6807\uff0c\u4ee5\u5907\u5b8c\u6574\u5730\u91cd\u7f16\u8bd1\u4f7f\u7528\u3002 check\u548ctest:\u8fd9\u4e24\u4e2a\u4f2a\u76ee\u6807\u4e00\u822c\u7528\u6765\u6d4b\u8bd5makefile\u7684\u6d41\u7a0b\u3002 \u5f53\u7136\u4e00\u4e2a\u9879\u76ee\u7684makefile\u4e2d\u4e5f\u4e0d\u4e00\u5b9a\u8981\u4e66\u5199\u8fd9\u6837\u7684\u76ee\u6807\uff0c\u8fd9\u4e9b\u4e1c\u897f\u90fd\u662fGNU\u7684\u4e1c\u897f\uff0c\u4f46\u662f\u6211\u60f3\uff0cGNU\u641e\u51fa\u8fd9\u4e9b\u4e1c\u897f\u4e00\u5b9a\u6709\u5176\u53ef\u53d6\u4e4b\u5904\uff08\u7b49\u4f60\u7684 UNIX\u4e0b\u7684\u7a0b\u5e8f\u6587\u4ef6\u4e00\u591a\u65f6\u4f60\u5c31\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u529f\u80fd\u5f88\u6709\u7528\u4e86\uff09\uff0c\u8fd9\u91cc\u53ea\u4e0d\u8fc7\u662f\u8bf4\u660e\u4e86\uff0c\u5982\u679c\u4f60\u8981\u4e66\u5199\u8fd9\u79cd\u529f\u80fd\uff0c\u6700\u597d\u4f7f\u7528\u8fd9\u79cd\u540d\u5b57\u547d\u540d\u4f60\u7684\u76ee\u6807\uff0c\u8fd9\u6837\u89c4\u8303\u4e00\u4e9b\uff0c\u89c4\u8303\u7684\u597d\u5904\u5c31\u662f\u2014\u2014\u4e0d\u7528\u89e3\u91ca\uff0c\u5927\u5bb6\u90fd\u660e\u767d\u3002\u800c\u4e14\u5982\u679c\u4f60\u7684makefile\u4e2d\u6709\u8fd9\u4e9b\u529f\u80fd\uff0c\u4e00\u662f\u5f88\u5b9e\u7528\uff0c\u4e8c\u662f\u53ef\u4ee5\u663e\u5f97\u4f60\u7684makefile\u5f88\u4e13\u4e1a\uff08\u4e0d\u662f\u90a3\u79cd\u521d\u5b66\u8005\u7684\u4f5c\u54c1\uff09\u3002","title":"\u6307\u5b9a\u76ee\u6807"},{"location":"makefile/invoke/#_2","text":"\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u60f3\u8ba9\u6211\u4eec\u7684makefile\u4e2d\u7684\u89c4\u5219\u6267\u884c\u8d77\u6765\uff0c\u6211\u4eec\u53ea\u60f3\u68c0\u67e5\u4e00\u4e0b\u6211\u4eec\u7684\u547d\u4ee4\uff0c\u6216\u662f\u6267\u884c\u7684\u5e8f\u5217\u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528make\u547d\u4ee4\u7684\u4e0b\u8ff0\u53c2\u6570\uff1a -n , --just-print , --dry-run , --recon \u4e0d\u6267\u884c\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u53ea\u662f\u6253\u5370\u547d\u4ee4\uff0c\u4e0d\u7ba1\u76ee\u6807\u662f\u5426\u66f4\u65b0\uff0c\u628a\u89c4\u5219\u548c\u8fde\u5e26\u89c4\u5219\u4e0b\u7684\u547d\u4ee4\u6253\u5370\u51fa\u6765\uff0c\u4f46\u4e0d\u6267\u884c\uff0c\u8fd9\u4e9b\u53c2\u6570\u5bf9\u4e8e\u6211\u4eec\u8c03\u8bd5makefile\u5f88\u6709\u7528\u5904\u3002 -t , --touch \u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u5c31\u662f\u628a\u76ee\u6807\u6587\u4ef6\u7684\u65f6\u95f4\u66f4\u65b0\uff0c\u4f46\u4e0d\u66f4\u6539\u76ee\u6807\u6587\u4ef6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cmake\u5047\u88c5\u7f16\u8bd1\u76ee\u6807\uff0c\u4f46\u4e0d\u662f\u771f\u6b63\u7684\u7f16\u8bd1\u76ee\u6807\uff0c\u53ea\u662f\u628a\u76ee\u6807\u53d8\u6210\u5df2\u7f16\u8bd1\u8fc7\u7684\u72b6\u6001\u3002 -q , --question \u8fd9\u4e2a\u53c2\u6570\u7684\u884c\u4e3a\u662f\u627e\u76ee\u6807\u7684\u610f\u601d\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u76ee\u6807\u5b58\u5728\uff0c\u90a3\u4e48\u5176\u4ec0\u4e48\u4e5f\u4e0d\u4f1a\u8f93\u51fa\uff0c\u5f53\u7136\u4e5f\u4e0d\u4f1a\u6267\u884c\u7f16\u8bd1\uff0c\u5982\u679c\u76ee\u6807\u4e0d\u5b58\u5728\uff0c\u5176\u4f1a\u6253\u5370\u51fa\u4e00\u6761\u51fa\u9519\u4fe1\u606f\u3002 -W file , --what-if= file , --assume-new= file , --new-file= file \u8fd9\u4e2a\u53c2\u6570\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u6587\u4ef6\u3002\u4e00\u822c\u662f\u662f\u6e90\u6587\u4ef6\uff08\u6216\u4f9d\u8d56\u6587\u4ef6\uff09\uff0cMake\u4f1a\u6839\u636e\u89c4\u5219\u63a8\u5bfc\u6765\u8fd0\u884c\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u6587\u4ef6\u7684\u547d\u4ee4\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u53ef\u4ee5\u548c\u201c-n\u201d\u53c2\u6570\u4e00\u540c\u4f7f\u7528\uff0c\u6765\u67e5\u770b\u8fd9\u4e2a\u4f9d\u8d56\u6587\u4ef6\u6240\u53d1\u751f\u7684\u89c4\u5219\u547d\u4ee4\u3002 \u53e6\u5916\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u7528\u6cd5\u662f\u7ed3\u5408 -p \u548c -v \u6765\u8f93\u51famakefile\u88ab\u6267\u884c\u65f6\u7684\u4fe1\u606f\uff08\u8fd9\u4e2a\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\uff09\u3002","title":"\u68c0\u67e5\u89c4\u5219"},{"location":"makefile/invoke/#make_1","text":"\u4e0b\u9762\u5217\u4e3e\u4e86\u6240\u6709GNU make 3.80\u7248\u7684\u53c2\u6570\u5b9a\u4e49\u3002\u5176\u5b83\u7248\u672c\u548c\u4ea7\u5546\u7684make\u5927\u540c\u5c0f\u5f02\uff0c\u4e0d\u8fc7\u5176\u5b83\u4ea7\u5546\u7684make\u7684\u5177\u4f53\u53c2\u6570\u8fd8\u662f\u8bf7\u53c2\u8003\u5404\u81ea\u7684\u4ea7\u54c1\u6587\u6863\u3002 -b , -m \u8fd9\u4e24\u4e2a\u53c2\u6570\u7684\u4f5c\u7528\u662f\u5ffd\u7565\u548c\u5176\u5b83\u7248\u672cmake\u7684\u517c\u5bb9\u6027\u3002 -B , --always-make \u8ba4\u4e3a\u6240\u6709\u7684\u76ee\u6807\u90fd\u9700\u8981\u66f4\u65b0\uff08\u91cd\u7f16\u8bd1\uff09\u3002 -C , --directory \\ =\\ \u6307\u5b9a\u8bfb\u53d6makefile\u7684\u76ee\u5f55\u3002\u5982\u679c\u6709\u591a\u4e2a\u201c-C\u201d\u53c2\u6570\uff0cmake\u7684\u89e3\u91ca\u662f\u540e\u9762\u7684\u8def\u5f84\u4ee5\u524d\u9762\u7684\u4f5c\u4e3a\u76f8\u5bf9\u8def\u5f84\uff0c\u5e76\u4ee5\u6700\u540e\u7684\u76ee\u5f55\u4f5c\u4e3a\u88ab\u6307\u5b9a\u76ee\u5f55\u3002\u5982\uff1a\u201cmake -C ~hchen/test -C prog\u201d\u7b49\u4ef7\u4e8e\u201cmake -C ~hchen/test/prog\u201d\u3002 -debug \\ [= ] \u8f93\u51famake\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u5b83\u6709\u51e0\u79cd\u4e0d\u540c\u7684\u7ea7\u522b\u53ef\u4f9b\u9009\u62e9\uff0c\u5982\u679c\u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u5c31\u662f\u8f93\u51fa\u6700\u7b80\u5355\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u4e0b\u9762\u662f \u7684\u53d6\u503c\uff1a - a: \u4e5f\u5c31\u662fall\uff0c\u8f93\u51fa\u6240\u6709\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\uff08\u4f1a\u975e\u5e38\u7684\u591a\uff09 - b: \u4e5f\u5c31\u662fbasic\uff0c\u53ea\u8f93\u51fa\u7b80\u5355\u7684\u8c03\u8bd5\u4fe1\u606f\u3002\u5373\u8f93\u51fa\u4e0d\u9700\u8981\u91cd\u7f16\u8bd1\u7684\u76ee\u6807\u3002 - v: \u4e5f\u5c31\u662fverbose\uff0c\u5728b\u9009\u9879\u7684\u7ea7\u522b\u4e4b\u4e0a\u3002\u8f93\u51fa\u7684\u4fe1\u606f\u5305\u62ec\u54ea\u4e2amakefile\u88ab\u89e3\u6790\uff0c\u4e0d\u9700\u8981\u88ab\u91cd\u7f16\u8bd1\u7684\u4f9d\u8d56\u6587\u4ef6\uff08\u6216\u662f\u4f9d\u8d56\u76ee\u6807\uff09\u7b49\u3002 - i: \u4e5f\u5c31\u662fimplicit\uff0c\u8f93\u51fa\u6240\u4ee5\u7684\u9690\u542b\u89c4\u5219\u3002 - j: \u4e5f\u5c31\u662fjobs\uff0c\u8f93\u51fa\u6267\u884c\u89c4\u5219\u4e2d\u547d\u4ee4\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5982\u547d\u4ee4\u7684PID\u3001\u8fd4\u56de\u7801\u7b49\u3002 - m: \u4e5f\u5c31\u662fmakefile\uff0c\u8f93\u51famake\u8bfb\u53d6makefile\uff0c\u66f4\u65b0makefile\uff0c\u6267\u884cmakefile\u7684\u4fe1\u606f\u3002 -d \u76f8\u5f53\u4e8e\u201c--debug=a\u201d\u3002 -e , --environment-overrides \u6307\u660e\u73af\u5883\u53d8\u91cf\u7684\u503c\u8986\u76d6makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u7684\u503c\u3002 -f \\ =\\ , --file \\ =\\ , --makefile \\ =\\ \u6307\u5b9a\u9700\u8981\u6267\u884c\u7684makefile\u3002 -h , --help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002 -i , --ignore-errors \u5728\u6267\u884c\u65f6\u5ffd\u7565\u6240\u6709\u7684\u9519\u8bef\u3002 -I , --include-dir \\ =\\ \u6307\u5b9a\u4e00\u4e2a\u88ab\u5305\u542bmakefile\u7684\u641c\u7d22\u76ee\u6807\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u201c-I\u201d\u53c2\u6570\u6765\u6307\u5b9a\u591a\u4e2a\u76ee\u5f55\u3002 -j [ ], --jobs \\ [= ] \u6307\u540c\u65f6\u8fd0\u884c\u547d\u4ee4\u7684\u4e2a\u6570\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\uff0cmake\u8fd0\u884c\u547d\u4ee4\u65f6\u80fd\u8fd0\u884c\u591a\u5c11\u5c31\u8fd0\u884c\u591a\u5c11\u3002\u5982\u679c\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7684\u201c-j\u201d\u53c2\u6570\uff0c\u90a3\u4e48\u4ec5\u6700\u540e\u4e00\u4e2a\u201c-j\u201d\u624d\u662f\u6709\u6548\u7684\u3002\uff08\u6ce8\u610f\u8fd9\u4e2a\u53c2\u6570\u5728MS-DOS\u4e2d\u662f\u65e0\u7528\u7684\uff09 -k , --keep-going \u51fa\u9519\u4e5f\u4e0d\u505c\u6b62\u8fd0\u884c\u3002\u5982\u679c\u751f\u6210\u4e00\u4e2a\u76ee\u6807\u5931\u8d25\u4e86\uff0c\u90a3\u4e48\u4f9d\u8d56\u4e8e\u5176\u4e0a\u7684\u76ee\u6807\u5c31\u4e0d\u4f1a\u88ab\u6267\u884c\u4e86\u3002 -l , --load-average \\ [= ], -max-load \\ [= ] \u6307\u5b9amake\u8fd0\u884c\u547d\u4ee4\u7684\u8d1f\u8f7d\u3002 -n , --just-print , --dry-run , --recon \u4ec5\u8f93\u51fa\u6267\u884c\u8fc7\u7a0b\u4e2d\u7684\u547d\u4ee4\u5e8f\u5217\uff0c\u4f46\u5e76\u4e0d\u6267\u884c\u3002 -o , --old-file \\ =\\ , --assume-old \\ =\\ \u4e0d\u91cd\u65b0\u751f\u6210\u7684\u6307\u5b9a\u7684 \uff0c\u5373\u4f7f\u8fd9\u4e2a\u76ee\u6807\u7684\u4f9d\u8d56\u6587\u4ef6\u65b0\u4e8e\u5b83\u3002 -p , --print-data-base \u8f93\u51famakefile\u4e2d\u7684\u6240\u6709\u6570\u636e\uff0c\u5305\u62ec\u6240\u6709\u7684\u89c4\u5219\u548c\u53d8\u91cf\u3002\u8fd9\u4e2a\u53c2\u6570\u4f1a\u8ba9\u4e00\u4e2a\u7b80\u5355\u7684makefile\u90fd\u4f1a\u8f93\u51fa\u4e00\u5806\u4fe1\u606f\u3002\u5982\u679c\u4f60\u53ea\u662f\u60f3\u8f93\u51fa\u4fe1\u606f\u800c\u4e0d\u60f3\u6267\u884cmakefile\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u201cmake -qp\u201d\u547d\u4ee4\u3002\u5982\u679c\u4f60\u60f3\u67e5\u770b\u6267\u884cmakefile\u524d\u7684\u9884\u8bbe\u53d8\u91cf\u548c\u89c4\u5219\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 \u201cmake \u2013p \u2013f /dev/null\u201d\u3002\u8fd9\u4e2a\u53c2\u6570\u8f93\u51fa\u7684\u4fe1\u606f\u4f1a\u5305\u542b\u7740\u4f60\u7684makefile\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u548c\u884c\u53f7\uff0c\u6240\u4ee5\uff0c\u7528\u8fd9\u4e2a\u53c2\u6570\u6765\u8c03\u8bd5\u4f60\u7684 makefile\u4f1a\u662f\u5f88\u6709\u7528\u7684\uff0c\u7279\u522b\u662f\u5f53\u4f60\u7684\u73af\u5883\u53d8\u91cf\u5f88\u590d\u6742\u7684\u65f6\u5019\u3002 -q , --question \u4e0d\u8fd0\u884c\u547d\u4ee4\uff0c\u4e5f\u4e0d\u8f93\u51fa\u3002\u4ec5\u4ec5\u662f\u68c0\u67e5\u6240\u6307\u5b9a\u7684\u76ee\u6807\u662f\u5426\u9700\u8981\u66f4\u65b0\u3002\u5982\u679c\u662f0\u5219\u8bf4\u660e\u8981\u66f4\u65b0\uff0c\u5982\u679c\u662f2\u5219\u8bf4\u660e\u6709\u9519\u8bef\u53d1\u751f\u3002 -r , --no-builtin-rules \u7981\u6b62make\u4f7f\u7528\u4efb\u4f55\u9690\u542b\u89c4\u5219\u3002 -R , --no-builtin-variabes \u7981\u6b62make\u4f7f\u7528\u4efb\u4f55\u4f5c\u7528\u4e8e\u53d8\u91cf\u4e0a\u7684\u9690\u542b\u89c4\u5219\u3002 -s , --silent , --quiet \u5728\u547d\u4ee4\u8fd0\u884c\u65f6\u4e0d\u8f93\u51fa\u547d\u4ee4\u7684\u8f93\u51fa\u3002 -S , --no-keep-going , --stop \u53d6\u6d88\u201c-k\u201d\u9009\u9879\u7684\u4f5c\u7528\u3002\u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\uff0cmake\u7684\u9009\u9879\u662f\u4ece\u73af\u5883\u53d8\u91cf\u201cMAKEFLAGS\u201d\u4e2d\u7ee7\u627f\u4e0b\u6765\u7684\u3002\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\u6765\u8ba9\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u201c-k\u201d\u9009\u9879\u5931\u6548\u3002 -t , --touch \u76f8\u5f53\u4e8eUNIX\u7684touch\u547d\u4ee4\uff0c\u53ea\u662f\u628a\u76ee\u6807\u7684\u4fee\u6539\u65e5\u671f\u53d8\u6210\u6700\u65b0\u7684\uff0c\u4e5f\u5c31\u662f\u963b\u6b62\u751f\u6210\u76ee\u6807\u7684\u547d\u4ee4\u8fd0\u884c\u3002 -v , --version \u8f93\u51famake\u7a0b\u5e8f\u7684\u7248\u672c\u3001\u7248\u6743\u7b49\u5173\u4e8emake\u7684\u4fe1\u606f\u3002 -w , --print-directory \u8f93\u51fa\u8fd0\u884cmakefile\u4e4b\u524d\u548c\u4e4b\u540e\u7684\u4fe1\u606f\u3002\u8fd9\u4e2a\u53c2\u6570\u5bf9\u4e8e\u8ddf\u8e2a\u5d4c\u5957\u5f0f\u8c03\u7528make\u65f6\u5f88\u6709\u7528\u3002 --no-print-directory \u7981\u6b62\u201c-w\u201d\u9009\u9879\u3002 -W , --what-if \\ =\\ , --new-file \\ =\\ , --assume-file \\ =\\ \u5047\u5b9a\u76ee\u6807 ;\u9700\u8981\u66f4\u65b0\uff0c\u5982\u679c\u548c\u201c-n\u201d\u9009\u9879\u4f7f\u7528\uff0c\u90a3\u4e48\u8fd9\u4e2a\u53c2\u6570\u4f1a\u8f93\u51fa\u8be5\u76ee\u6807\u66f4\u65b0\u65f6\u7684\u8fd0\u884c\u52a8\u4f5c\u3002\u5982\u679c\u6ca1\u6709\u201c-n\u201d\u90a3\u4e48\u5c31\u50cf\u8fd0\u884cUNIX\u7684\u201ctouch\u201d\u547d\u4ee4\u4e00\u6837\uff0c\u4f7f\u5f97 ;\u7684\u4fee\u6539\u65f6\u95f4\u4e3a\u5f53\u524d\u65f6\u95f4\u3002 --warn-undefined-variables \u53ea\u8981make\u53d1\u73b0\u6709\u672a\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u5c31\u8f93\u51fa\u8b66\u544a\u4fe1\u606f\u3002","title":"make\u7684\u53c2\u6570"},{"location":"makefile/overview/","text":"==== \u6982\u8ff0 ==== \u8f6c\u8f7d: https://github.com/seisman/how-to-write-makefile \u4ec0\u4e48\u662fmakefile\uff1f\u6216\u8bb8\u5f88\u591aWinodws\u7684\u7a0b\u5e8f\u5458\u90fd\u4e0d\u77e5\u9053\u8fd9\u4e2a\u4e1c\u897f\uff0c\u56e0\u4e3a\u90a3\u4e9bWindows\u7684\u96c6\u6210\u5f00\u53d1\u73af\u5883\uff08integrated development environment\uff0cIDE\uff09\u90fd\u4e3a\u4f60\u505a\u4e86\u8fd9\u4e2a\u5de5\u4f5c\uff0c\u4f46\u6211\u89c9\u5f97\u8981\u4f5c\u4e00\u4e2a\u597d\u7684\u548c\u4e13\u4e1a\u7684\u7a0b\u5e8f\u5458\uff0cmakefile\u8fd8\u662f\u8981\u61c2\u3002\u8fd9\u5c31\u597d\u50cf\u73b0\u5728\u6709\u8fd9\u4e48\u591a\u7684HTML\u7f16\u8f91\u5668\uff0c\u4f46\u5982\u679c\u4f60\u60f3\u6210\u4e3a\u4e00\u4e2a\u4e13\u4e1a\u4eba\u58eb\uff0c\u4f60\u8fd8\u662f\u8981\u4e86\u89e3HTML\u7684\u6807\u7b7e\u7684\u542b\u4e49\u3002\u7279\u522b\u5728Unix\u4e0b\u7684\u8f6f\u4ef6\u7f16\u8bd1\uff0c\u4f60\u5c31\u4e0d\u80fd\u4e0d\u81ea\u5df1\u5199makefile\u4e86\uff0c\u4f1a\u4e0d\u4f1a\u5199makefile\uff0c\u4ece\u4e00\u4e2a\u4fa7\u9762\u8bf4\u660e\u4e86\u4e00\u4e2a\u4eba\u662f\u5426\u5177\u5907\u5b8c\u6210\u5927\u578b\u5de5\u7a0b\u7684\u80fd\u529b\u3002 \u56e0\u4e3a\uff0cmakefile\u5173\u7cfb\u5230\u4e86\u6574\u4e2a\u5de5\u7a0b\u7684\u7f16\u8bd1\u89c4\u5219\u3002\u4e00\u4e2a\u5de5\u7a0b\u4e2d\u7684\u6e90\u6587\u4ef6\u4e0d\u8ba1\u5176\u6570\uff0c\u5e76\u4e14\u6309\u7c7b\u578b\u3001\u529f\u80fd\u3001\u6a21\u5757\u5206\u522b\u653e\u5728\u82e5\u5e72\u4e2a\u76ee\u5f55\u4e2d\uff0cmakefile\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684\u89c4\u5219\u6765\u6307\u5b9a\uff0c\u54ea\u4e9b\u6587\u4ef6\u9700\u8981\u5148\u7f16\u8bd1\uff0c\u54ea\u4e9b\u6587\u4ef6\u9700\u8981\u540e\u7f16\u8bd1\uff0c\u54ea\u4e9b\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\uff0c\u751a\u81f3\u4e8e\u8fdb\u884c\u66f4\u590d\u6742\u7684\u529f\u80fd\u64cd\u4f5c\uff0c\u56e0\u4e3amakefile\u5c31\u50cf\u4e00\u4e2aShell\u811a\u672c\u4e00\u6837\uff0c\u5176\u4e2d\u4e5f\u53ef\u4ee5\u6267\u884c\u64cd\u4f5c\u7cfb\u7edf\u7684\u547d\u4ee4\u3002 makefile\u5e26\u6765\u7684\u597d\u5904\u5c31\u662f\u2014\u2014\u201c\u81ea\u52a8\u5316\u7f16\u8bd1\u201d\uff0c\u4e00\u65e6\u5199\u597d\uff0c\u53ea\u9700\u8981\u4e00\u4e2amake\u547d\u4ee4\uff0c\u6574\u4e2a\u5de5\u7a0b\u5b8c\u5168\u81ea\u52a8\u7f16\u8bd1\uff0c\u6781\u5927\u7684\u63d0\u9ad8\u4e86\u8f6f\u4ef6\u5f00\u53d1\u7684\u6548\u7387\u3002 make\u662f\u4e00\u4e2a\u547d\u4ee4\u5de5\u5177\uff0c\u662f\u4e00\u4e2a\u89e3\u91camakefile\u4e2d\u6307\u4ee4\u7684\u547d\u4ee4\u5de5\u5177\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5927\u591a\u6570\u7684IDE\u90fd\u6709\u8fd9\u4e2a\u547d\u4ee4\uff0c\u6bd4\u5982\uff1aDelphi\u7684make\uff0cVisual C++\u7684nmake\uff0cLinux\u4e0bGNU\u7684make\u3002\u53ef\u89c1\uff0cmakefile\u90fd\u6210\u4e3a\u4e86\u4e00\u79cd\u5728\u5de5\u7a0b\u65b9\u9762\u7684\u7f16\u8bd1\u65b9\u6cd5\u3002 \u73b0\u5728\u8bb2\u8ff0\u5982\u4f55\u5199makefile\u7684\u6587\u7ae0\u6bd4\u8f83\u5c11\uff0c\u8fd9\u662f\u6211\u60f3\u5199\u8fd9\u7bc7\u6587\u7ae0\u7684\u539f\u56e0\u3002\u5f53\u7136\uff0c\u4e0d\u540c\u4ea7\u5546\u7684make\u5404\u4e0d\u76f8\u540c\uff0c\u4e5f\u6709\u4e0d\u540c\u7684\u8bed\u6cd5\uff0c\u4f46\u5176\u672c\u8d28\u90fd\u662f\u5728 \u201c\u6587\u4ef6\u4f9d\u8d56\u6027\u201d\u4e0a\u505a\u6587\u7ae0\uff0c\u8fd9\u91cc\uff0c\u6211\u4ec5\u5bf9GNU\u7684make\u8fdb\u884c\u8bb2\u8ff0\uff0c\u6211\u7684\u73af\u5883\u662fRedHat Linux 8.0\uff0cmake\u7684\u7248\u672c\u662f3.80\u3002\u6bd5\u7adf\uff0c\u8fd9\u4e2amake\u662f\u5e94\u7528\u6700\u4e3a\u5e7f\u6cdb\u7684\uff0c\u4e5f\u662f\u7528\u5f97\u6700\u591a\u7684\u3002\u800c\u4e14\u5176\u8fd8\u662f\u6700\u9075\u5faa\u4e8eIEEE 1003.2-1992\u6807\u51c6\u7684\uff08POSIX.2\uff09\u3002 \u5728\u8fd9\u7bc7\u6587\u6863\u4e2d\uff0c\u5c06\u4ee5C/C++\u7684\u6e90\u7801\u4f5c\u4e3a\u57fa\u7840\uff0c\u6240\u4ee5\u5fc5\u7136\u6d89\u53ca\u4e00\u4e9b\u5173\u4e8eC/C++\u7684\u7f16\u8bd1\u7684\u77e5\u8bc6\u3002\u5173\u4e8e\u8fd9\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u8fd8\u8bf7\u5404\u4f4d\u67e5\u770b\u76f8\u5173\u7684\u7f16\u8bd1\u5668\u7684\u6587\u6863\u3002\u8fd9\u91cc\u6240\u9ed8\u8ba4\u7684\u7f16\u8bd1\u5668\u662fUNIX\u4e0b\u7684GCC\u548cCC\u3002 \u5173\u4e8e\u7a0b\u5e8f\u7684\u7f16\u8bd1\u548c\u94fe\u63a5 \u5728\u6b64\uff0c\u6211\u60f3\u591a\u8bf4\u5173\u4e8e\u7a0b\u5e8f\u7f16\u8bd1\u7684\u4e00\u4e9b\u89c4\u8303\u548c\u65b9\u6cd5\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u65e0\u8bba\u662fC\u8fd8\u662fC++\uff0c\u9996\u5148\u8981\u628a\u6e90\u6587\u4ef6\u7f16\u8bd1\u6210\u4e2d\u95f4\u4ee3\u7801\u6587\u4ef6\uff0c\u5728Windows\u4e0b\u4e5f\u5c31\u662f .obj \u6587\u4ef6\uff0cUNIX\u4e0b\u662f .o \u6587\u4ef6\uff0c\u5373Object File\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u53eb\u505a\u7f16\u8bd1\uff08compile\uff09\u3002\u7136\u540e\u518d\u628a\u5927\u91cf\u7684Object File\u5408\u6210\u6267\u884c\u6587\u4ef6\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u53eb\u4f5c\u94fe\u63a5\uff08link\uff09\u3002 \u7f16\u8bd1\u65f6\uff0c\u7f16\u8bd1\u5668\u9700\u8981\u7684\u662f\u8bed\u6cd5\u7684\u6b63\u786e\uff0c\u51fd\u6570\u4e0e\u53d8\u91cf\u7684\u58f0\u660e\u7684\u6b63\u786e\u3002\u5bf9\u4e8e\u540e\u8005\uff0c\u901a\u5e38\u662f\u4f60\u9700\u8981\u544a\u8bc9\u7f16\u8bd1\u5668\u5934\u6587\u4ef6\u7684\u6240\u5728\u4f4d\u7f6e\uff08\u5934\u6587\u4ef6\u4e2d\u5e94\u8be5\u53ea\u662f\u58f0\u660e\uff0c\u800c\u5b9a\u4e49\u5e94\u8be5\u653e\u5728C/C++\u6587\u4ef6\u4e2d\uff09\uff0c\u53ea\u8981\u6240\u6709\u7684\u8bed\u6cd5\u6b63\u786e\uff0c\u7f16\u8bd1\u5668\u5c31\u53ef\u4ee5\u7f16\u8bd1\u51fa\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6bcf\u4e2a\u6e90\u6587\u4ef6\u90fd\u5e94\u8be5\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08 .o \u6587\u4ef6\u6216 .obj \u6587\u4ef6\uff09\u3002 \u94fe\u63a5\u65f6\uff0c\u4e3b\u8981\u662f\u94fe\u63a5\u51fd\u6570\u548c\u5168\u5c40\u53d8\u91cf\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08 .o \u6587\u4ef6\u6216 .obj \u6587\u4ef6\uff09\u6765\u94fe\u63a5\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u94fe\u63a5\u5668\u5e76\u4e0d\u7ba1\u51fd\u6570\u6240\u5728\u7684\u6e90\u6587\u4ef6\uff0c\u53ea\u7ba1\u51fd\u6570\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08Object File\uff09\uff0c\u5728\u5927\u591a\u6570\u65f6\u5019\uff0c\u7531\u4e8e\u6e90\u6587\u4ef6\u592a\u591a\uff0c\u7f16\u8bd1\u751f\u6210\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u592a\u591a\uff0c\u800c\u5728\u94fe\u63a5\u65f6\u9700\u8981\u660e\u663e\u5730\u6307\u51fa\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u540d\uff0c\u8fd9\u5bf9\u4e8e\u7f16\u8bd1\u5f88\u4e0d\u65b9\u4fbf\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u8981\u7ed9\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u6253\u4e2a\u5305\uff0c\u5728Windows\u4e0b\u8fd9\u79cd\u5305\u53eb\u201c\u5e93\u6587\u4ef6\u201d\uff08Library File\uff09\uff0c\u4e5f\u5c31\u662f .lib \u6587\u4ef6\uff0c\u5728UNIX\u4e0b\uff0c\u662fArchive File\uff0c\u4e5f\u5c31\u662f .a \u6587\u4ef6\u3002 \u603b\u7ed3\u4e00\u4e0b\uff0c\u6e90\u6587\u4ef6\u9996\u5148\u4f1a\u751f\u6210\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff0c\u518d\u7531\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u751f\u6210\u6267\u884c\u6587\u4ef6\u3002\u5728\u7f16\u8bd1\u65f6\uff0c\u7f16\u8bd1\u5668\u53ea\u68c0\u6d4b\u7a0b\u5e8f\u8bed\u6cd5\u548c\u51fd\u6570\u3001\u53d8\u91cf\u662f\u5426\u88ab\u58f0\u660e\u3002\u5982\u679c\u51fd\u6570\u672a\u88ab\u58f0\u660e\uff0c\u7f16\u8bd1\u5668\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u8b66\u544a\uff0c\u4f46\u53ef\u4ee5\u751f\u6210Object File\u3002\u800c\u5728\u94fe\u63a5\u7a0b\u5e8f\u65f6\uff0c\u94fe\u63a5\u5668\u4f1a\u5728\u6240\u6709\u7684Object File\u4e2d\u627e\u5bfb\u51fd\u6570\u7684\u5b9e\u73b0\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u90a3\u5230\u5c31\u4f1a\u62a5\u94fe\u63a5\u9519\u8bef\u7801\uff08Linker Error\uff09\uff0c\u5728VC\u4e0b\uff0c\u8fd9\u79cd\u9519\u8bef\u4e00\u822c\u662f\uff1a Link 2001\u9519\u8bef \uff0c\u610f\u601d\u8bf4\u662f\u8bf4\uff0c\u94fe\u63a5\u5668\u672a\u80fd\u627e\u5230\u51fd\u6570\u7684\u5b9e\u73b0\u3002\u4f60\u9700\u8981\u6307\u5b9a\u51fd\u6570\u7684Object File\u3002 \u597d\uff0c\u8a00\u5f52\u6b63\u4f20\uff0cgnu\u7684make\u6709\u8bb8\u591a\u7684\u5185\u5bb9\uff0c\u95f2\u8a00\u5c11\u53d9\u3002","title":"\u6982\u8ff0"},{"location":"makefile/overview/#_1","text":"\u5728\u6b64\uff0c\u6211\u60f3\u591a\u8bf4\u5173\u4e8e\u7a0b\u5e8f\u7f16\u8bd1\u7684\u4e00\u4e9b\u89c4\u8303\u548c\u65b9\u6cd5\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u65e0\u8bba\u662fC\u8fd8\u662fC++\uff0c\u9996\u5148\u8981\u628a\u6e90\u6587\u4ef6\u7f16\u8bd1\u6210\u4e2d\u95f4\u4ee3\u7801\u6587\u4ef6\uff0c\u5728Windows\u4e0b\u4e5f\u5c31\u662f .obj \u6587\u4ef6\uff0cUNIX\u4e0b\u662f .o \u6587\u4ef6\uff0c\u5373Object File\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u53eb\u505a\u7f16\u8bd1\uff08compile\uff09\u3002\u7136\u540e\u518d\u628a\u5927\u91cf\u7684Object File\u5408\u6210\u6267\u884c\u6587\u4ef6\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u53eb\u4f5c\u94fe\u63a5\uff08link\uff09\u3002 \u7f16\u8bd1\u65f6\uff0c\u7f16\u8bd1\u5668\u9700\u8981\u7684\u662f\u8bed\u6cd5\u7684\u6b63\u786e\uff0c\u51fd\u6570\u4e0e\u53d8\u91cf\u7684\u58f0\u660e\u7684\u6b63\u786e\u3002\u5bf9\u4e8e\u540e\u8005\uff0c\u901a\u5e38\u662f\u4f60\u9700\u8981\u544a\u8bc9\u7f16\u8bd1\u5668\u5934\u6587\u4ef6\u7684\u6240\u5728\u4f4d\u7f6e\uff08\u5934\u6587\u4ef6\u4e2d\u5e94\u8be5\u53ea\u662f\u58f0\u660e\uff0c\u800c\u5b9a\u4e49\u5e94\u8be5\u653e\u5728C/C++\u6587\u4ef6\u4e2d\uff09\uff0c\u53ea\u8981\u6240\u6709\u7684\u8bed\u6cd5\u6b63\u786e\uff0c\u7f16\u8bd1\u5668\u5c31\u53ef\u4ee5\u7f16\u8bd1\u51fa\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6bcf\u4e2a\u6e90\u6587\u4ef6\u90fd\u5e94\u8be5\u5bf9\u5e94\u4e8e\u4e00\u4e2a\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08 .o \u6587\u4ef6\u6216 .obj \u6587\u4ef6\uff09\u3002 \u94fe\u63a5\u65f6\uff0c\u4e3b\u8981\u662f\u94fe\u63a5\u51fd\u6570\u548c\u5168\u5c40\u53d8\u91cf\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08 .o \u6587\u4ef6\u6216 .obj \u6587\u4ef6\uff09\u6765\u94fe\u63a5\u6211\u4eec\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u94fe\u63a5\u5668\u5e76\u4e0d\u7ba1\u51fd\u6570\u6240\u5728\u7684\u6e90\u6587\u4ef6\uff0c\u53ea\u7ba1\u51fd\u6570\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff08Object File\uff09\uff0c\u5728\u5927\u591a\u6570\u65f6\u5019\uff0c\u7531\u4e8e\u6e90\u6587\u4ef6\u592a\u591a\uff0c\u7f16\u8bd1\u751f\u6210\u7684\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u592a\u591a\uff0c\u800c\u5728\u94fe\u63a5\u65f6\u9700\u8981\u660e\u663e\u5730\u6307\u51fa\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u540d\uff0c\u8fd9\u5bf9\u4e8e\u7f16\u8bd1\u5f88\u4e0d\u65b9\u4fbf\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u8981\u7ed9\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u6253\u4e2a\u5305\uff0c\u5728Windows\u4e0b\u8fd9\u79cd\u5305\u53eb\u201c\u5e93\u6587\u4ef6\u201d\uff08Library File\uff09\uff0c\u4e5f\u5c31\u662f .lib \u6587\u4ef6\uff0c\u5728UNIX\u4e0b\uff0c\u662fArchive File\uff0c\u4e5f\u5c31\u662f .a \u6587\u4ef6\u3002 \u603b\u7ed3\u4e00\u4e0b\uff0c\u6e90\u6587\u4ef6\u9996\u5148\u4f1a\u751f\u6210\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\uff0c\u518d\u7531\u4e2d\u95f4\u76ee\u6807\u6587\u4ef6\u751f\u6210\u6267\u884c\u6587\u4ef6\u3002\u5728\u7f16\u8bd1\u65f6\uff0c\u7f16\u8bd1\u5668\u53ea\u68c0\u6d4b\u7a0b\u5e8f\u8bed\u6cd5\u548c\u51fd\u6570\u3001\u53d8\u91cf\u662f\u5426\u88ab\u58f0\u660e\u3002\u5982\u679c\u51fd\u6570\u672a\u88ab\u58f0\u660e\uff0c\u7f16\u8bd1\u5668\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u8b66\u544a\uff0c\u4f46\u53ef\u4ee5\u751f\u6210Object File\u3002\u800c\u5728\u94fe\u63a5\u7a0b\u5e8f\u65f6\uff0c\u94fe\u63a5\u5668\u4f1a\u5728\u6240\u6709\u7684Object File\u4e2d\u627e\u5bfb\u51fd\u6570\u7684\u5b9e\u73b0\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u90a3\u5230\u5c31\u4f1a\u62a5\u94fe\u63a5\u9519\u8bef\u7801\uff08Linker Error\uff09\uff0c\u5728VC\u4e0b\uff0c\u8fd9\u79cd\u9519\u8bef\u4e00\u822c\u662f\uff1a Link 2001\u9519\u8bef \uff0c\u610f\u601d\u8bf4\u662f\u8bf4\uff0c\u94fe\u63a5\u5668\u672a\u80fd\u627e\u5230\u51fd\u6570\u7684\u5b9e\u73b0\u3002\u4f60\u9700\u8981\u6307\u5b9a\u51fd\u6570\u7684Object File\u3002 \u597d\uff0c\u8a00\u5f52\u6b63\u4f20\uff0cgnu\u7684make\u6709\u8bb8\u591a\u7684\u5185\u5bb9\uff0c\u95f2\u8a00\u5c11\u53d9\u3002","title":"\u5173\u4e8e\u7a0b\u5e8f\u7684\u7f16\u8bd1\u548c\u94fe\u63a5"},{"location":"makefile/recipes/","text":"======== \u4e66\u5199\u547d\u4ee4 ======== \u6bcf\u6761\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u548c\u64cd\u4f5c\u7cfb\u7edfShell\u7684\u547d\u4ee4\u884c\u662f\u4e00\u81f4\u7684\u3002make\u4f1a\u4e00\u6309\u987a\u5e8f\u4e00\u6761\u4e00\u6761\u7684\u6267\u884c\u547d\u4ee4\uff0c\u6bcf\u6761\u547d\u4ee4\u7684\u5f00\u5934\u5fc5\u987b\u4ee5 Tab \u952e\u5f00\u5934\uff0c\u9664\u975e\uff0c\u547d\u4ee4\u662f\u7d27\u8ddf\u5728\u4f9d\u8d56\u89c4\u5219\u540e\u9762\u7684\u5206\u53f7\u540e\u7684\u3002\u5728\u547d\u4ee4\u884c\u4e4b\u95f4\u4e2d\u7684\u7a7a\u683c\u6216\u662f\u7a7a\u884c\u4f1a\u88ab\u5ffd\u7565\uff0c\u4f46\u662f\u5982\u679c\u8be5\u7a7a\u683c\u6216\u7a7a\u884c\u662f\u4ee5Tab\u952e\u5f00\u5934\u7684\uff0c\u90a3\u4e48make\u4f1a\u8ba4\u4e3a\u5176\u662f\u4e00\u4e2a\u7a7a\u547d\u4ee4\u3002 \u6211\u4eec\u5728UNIX\u4e0b\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0d\u540c\u7684Shell\uff0c\u4f46\u662fmake\u7684\u547d\u4ee4\u9ed8\u8ba4\u662f\u88ab /bin/sh \u2014\u2014UNIX\u7684\u6807\u51c6Shell\u89e3\u91ca\u6267\u884c\u7684\u3002\u9664\u975e\u4f60\u7279\u522b\u6307\u5b9a\u4e00\u4e2a\u5176\u5b83\u7684Shell\u3002Makefile\u4e2d\uff0c # \u662f\u6ce8\u91ca\u7b26\uff0c\u5f88\u50cfC/C++\u4e2d\u7684 // \uff0c\u5176\u540e\u7684\u672c\u884c\u5b57\u7b26\u90fd\u88ab\u6ce8\u91ca\u3002 \u663e\u793a\u547d\u4ee4 \u901a\u5e38\uff0cmake\u4f1a\u628a\u5176\u8981\u6267\u884c\u7684\u547d\u4ee4\u884c\u5728\u547d\u4ee4\u6267\u884c\u524d\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\u3002\u5f53\u6211\u4eec\u7528 @ \u5b57\u7b26\u5728\u547d\u4ee4\u884c\u524d\uff0c\u90a3\u4e48\uff0c\u8fd9\u4e2a\u547d\u4ee4\u5c06\u4e0d\u88abmake\u663e\u793a\u51fa\u6765\uff0c\u6700\u5177\u4ee3\u8868\u6027\u7684\u4f8b\u5b50\u662f\uff0c\u6211\u4eec\u7528\u8fd9\u4e2a\u529f\u80fd\u6765\u5411\u5c4f\u5e55\u663e\u793a\u4e00\u4e9b\u4fe1\u606f\u3002\u5982: :: @echo \u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757...... \u5f53make\u6267\u884c\u65f6\uff0c\u4f1a\u8f93\u51fa\u201c\u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757......\u201d\u5b57\u4e32\uff0c\u4f46\u4e0d\u4f1a\u8f93\u51fa\u547d\u4ee4\uff0c\u5982\u679c\u6ca1\u6709\u201c@\u201d\uff0c\u90a3\u4e48\uff0cmake\u5c06\u8f93\u51fa: :: echo \u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757...... \u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757...... \u5982\u679cmake\u6267\u884c\u65f6\uff0c\u5e26\u5165make\u53c2\u6570 -n \u6216 --just-print \uff0c\u90a3\u4e48\u5176\u53ea\u662f\u663e\u793a\u547d\u4ee4\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c\u547d\u4ee4\uff0c\u8fd9\u4e2a\u529f\u80fd\u5f88\u6709\u5229\u4e8e\u6211\u4eec\u8c03\u8bd5\u6211\u4eec\u7684Makefile\uff0c\u770b\u770b\u6211\u4eec\u4e66\u5199\u7684\u547d\u4ee4\u662f\u6267\u884c\u8d77\u6765\u662f\u4ec0\u4e48\u6837\u5b50\u7684\u6216\u662f\u4ec0\u4e48\u987a\u5e8f\u7684\u3002 \u800cmake\u53c2\u6570 -s \u6216 --silent \u6216 --quiet \u5219\u662f\u5168\u9762\u7981\u6b62\u547d\u4ee4\u7684\u663e\u793a\u3002 \u547d\u4ee4\u6267\u884c \u5f53\u4f9d\u8d56\u76ee\u6807\u65b0\u4e8e\u76ee\u6807\u65f6\uff0c\u4e5f\u5c31\u662f\u5f53\u89c4\u5219\u7684\u76ee\u6807\u9700\u8981\u88ab\u66f4\u65b0\u65f6\uff0cmake\u4f1a\u4e00\u6761\u4e00\u6761\u7684\u6267\u884c\u5176\u540e\u7684\u547d\u4ee4\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u8981\u8ba9\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u7ed3\u679c\u5e94\u7528\u5728\u4e0b\u4e00\u6761\u547d\u4ee4\u65f6\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528\u5206\u53f7\u5206\u9694\u8fd9\u4e24\u6761\u547d\u4ee4\u3002\u6bd4\u5982\u4f60\u7684\u7b2c\u4e00\u6761\u547d\u4ee4\u662fcd\u547d\u4ee4\uff0c\u4f60\u5e0c\u671b\u7b2c\u4e8c\u6761\u547d\u4ee4\u5f97\u5728cd\u4e4b\u540e\u7684\u57fa\u7840\u4e0a\u8fd0\u884c\uff0c\u90a3\u4e48\u4f60\u5c31\u4e0d\u80fd\u628a\u8fd9\u4e24\u6761\u547d\u4ee4\u5199\u5728\u4e24\u884c\u4e0a\uff0c\u800c\u5e94\u8be5\u628a\u8fd9\u4e24\u6761\u547d\u4ee4\u5199\u5728\u4e00\u884c\u4e0a\uff0c\u7528\u5206\u53f7\u5206\u9694\u3002\u5982\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile exec : cd /home/ hchen pwd \u793a\u4f8b\u4e8c\uff1a .. code:: makefile exec : cd /home/ hchen ; pwd \u5f53\u6211\u4eec\u6267\u884c make exec \u65f6\uff0c\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u7684cd\u6ca1\u6709\u4f5c\u7528\uff0cpwd\u4f1a\u6253\u5370\u51fa\u5f53\u524d\u7684Makefile\u76ee\u5f55\uff0c\u800c\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4e2d\uff0ccd\u5c31\u8d77\u4f5c\u7528\u4e86\uff0cpwd\u4f1a\u6253\u5370\u51fa\u201c/home/hchen\u201d\u3002 make\u4e00\u822c\u662f\u4f7f\u7528\u73af\u5883\u53d8\u91cfSHELL\u4e2d\u6240\u5b9a\u4e49\u7684\u7cfb\u7edfShell\u6765\u6267\u884c\u547d\u4ee4\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528UNIX\u7684\u6807\u51c6Shell\u2014\u2014/bin/sh\u6765\u6267\u884c\u547d\u4ee4\u3002\u4f46\u5728MS-DOS\u4e0b\u6709\u70b9\u7279\u6b8a\uff0c\u56e0\u4e3aMS-DOS\u4e0b\u6ca1\u6709SHELL\u73af\u5883\u53d8\u91cf\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u3002\u5982\u679c\u4f60\u6307\u5b9a\u4e86UNIX\u98ce\u683c\u7684\u76ee\u5f55\u5f62\u5f0f\uff0c\u9996\u5148\uff0cmake\u4f1a\u5728SHELL\u6240\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u627e\u5bfb\u547d\u4ee4\u89e3\u91ca\u5668\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u5176\u4f1a\u5728\u5f53\u524d\u76d8\u7b26\u4e2d\u7684\u5f53\u524d\u76ee\u5f55\u4e2d\u5bfb\u627e\uff0c\u5982\u679c\u518d\u627e\u4e0d\u5230\uff0c\u5176\u4f1a\u5728PATH\u73af\u5883\u53d8\u91cf\u4e2d\u6240\u5b9a\u4e49\u7684\u6240\u6709\u8def\u5f84\u4e2d\u5bfb\u627e\u3002MS-DOS\u4e2d\uff0c\u5982\u679c\u4f60\u5b9a\u4e49\u7684\u547d\u4ee4\u89e3\u91ca\u5668\u6ca1\u6709\u627e\u5230\uff0c\u5176\u4f1a\u7ed9\u4f60\u7684\u547d\u4ee4\u89e3\u91ca\u5668\u52a0\u4e0a\u8bf8\u5982 .exe \u3001 .com \u3001 .bat \u3001 .sh \u7b49\u540e\u7f00\u3002 \u547d\u4ee4\u51fa\u9519 \u6bcf\u5f53\u547d\u4ee4\u8fd0\u884c\u5b8c\u540e\uff0cmake\u4f1a\u68c0\u6d4b\u6bcf\u4e2a\u547d\u4ee4\u7684\u8fd4\u56de\u7801\uff0c\u5982\u679c\u547d\u4ee4\u8fd4\u56de\u6210\u529f\uff0c\u90a3\u4e48make\u4f1a\u6267\u884c\u4e0b\u4e00\u6761\u547d\u4ee4\uff0c\u5f53\u89c4\u5219\u4e2d\u6240\u6709\u7684\u547d\u4ee4\u6210\u529f\u8fd4\u56de\u540e\uff0c\u8fd9\u4e2a\u89c4\u5219\u5c31\u7b97\u662f\u6210\u529f\u5b8c\u6210\u4e86\u3002\u5982\u679c\u4e00\u4e2a\u89c4\u5219\u4e2d\u7684\u67d0\u4e2a\u547d\u4ee4\u51fa\u9519\u4e86\uff08\u547d\u4ee4\u9000\u51fa\u7801\u975e\u96f6\uff09\uff0c\u90a3\u4e48make\u5c31\u4f1a\u7ec8\u6b62\u6267\u884c\u5f53\u524d\u89c4\u5219\uff0c\u8fd9\u5c06\u6709\u53ef\u80fd\u7ec8\u6b62\u6240\u6709\u89c4\u5219\u7684\u6267\u884c\u3002 \u6709\u4e9b\u65f6\u5019\uff0c\u547d\u4ee4\u7684\u51fa\u9519\u5e76\u4e0d\u8868\u793a\u5c31\u662f\u9519\u8bef\u7684\u3002\u4f8b\u5982mkdir\u547d\u4ee4\uff0c\u6211\u4eec\u4e00\u5b9a\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u76ee\u5f55\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48mkdir\u5c31\u6210\u529f\u6267\u884c\uff0c\u4e07\u4e8b\u5927\u5409\uff0c\u5982\u679c\u76ee\u5f55\u5b58\u5728\uff0c\u90a3\u4e48\u5c31\u51fa\u9519\u4e86\u3002\u6211\u4eec\u4e4b\u6240\u4ee5\u4f7f\u7528mkdir\u7684\u610f\u601d\u5c31\u662f\u4e00\u5b9a\u8981\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u76ee\u5f55\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u4e0d\u5e0c\u671bmkdir\u51fa\u9519\u800c\u7ec8\u6b62\u89c4\u5219\u7684\u8fd0\u884c\u3002 \u4e3a\u4e86\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u5ffd\u7565\u547d\u4ee4\u7684\u51fa\u9519\uff0c\u6211\u4eec\u53ef\u4ee5\u5728Makefile\u7684\u547d\u4ee4\u884c\u524d\u52a0\u4e00\u4e2a\u51cf\u53f7 - \uff08\u5728Tab\u952e\u4e4b\u540e\uff09\uff0c\u6807\u8bb0\u4e3a\u4e0d\u7ba1\u547d\u4ee4\u51fa\u4e0d\u51fa\u9519\u90fd\u8ba4\u4e3a\u662f\u6210\u529f\u7684\u3002\u5982\uff1a .. code:: bash clean: -rm -f *.o \u8fd8\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u529e\u6cd5\u662f\uff0c\u7ed9make\u52a0\u4e0a -i \u6216\u662f --ignore-errors \u53c2\u6570\uff0c\u90a3\u4e48\uff0cMakefile\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u5ffd\u7565\u9519\u8bef\u3002\u800c\u5982\u679c\u4e00\u4e2a\u89c4\u5219\u662f\u4ee5 .IGNORE \u4f5c\u4e3a\u76ee\u6807\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u89c4\u5219\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u5c06\u4f1a\u5ffd\u7565\u9519\u8bef\u3002\u8fd9\u4e9b\u662f\u4e0d\u540c\u7ea7\u522b\u7684\u9632\u6b62\u547d\u4ee4\u51fa\u9519\u7684\u65b9\u6cd5\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e0d\u540c\u559c\u6b22\u8bbe\u7f6e\u3002 \u8fd8\u6709\u4e00\u4e2a\u8981\u63d0\u4e00\u4e0b\u7684make\u7684\u53c2\u6570\u7684\u662f -k \u6216\u662f --keep-going \uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u662f\uff0c\u5982\u679c\u67d0\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u51fa\u9519\u4e86\uff0c\u90a3\u4e48\u5c31\u7ec8\u76ee\u8be5\u89c4\u5219\u7684\u6267\u884c\uff0c\u4f46\u7ee7\u7eed\u6267\u884c\u5176\u5b83\u89c4\u5219\u3002 \u5d4c\u5957\u6267\u884cmake \u5728\u4e00\u4e9b\u5927\u7684\u5de5\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f1a\u628a\u6211\u4eec\u4e0d\u540c\u6a21\u5757\u6216\u662f\u4e0d\u540c\u529f\u80fd\u7684\u6e90\u6587\u4ef6\u653e\u5728\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6bcf\u4e2a\u76ee\u5f55\u4e2d\u90fd\u4e66\u5199\u4e00\u4e2a\u8be5\u76ee\u5f55\u7684Makefile\uff0c\u8fd9\u6709\u5229\u4e8e\u8ba9\u6211\u4eec\u7684Makefile\u53d8\u5f97\u66f4\u52a0\u5730\u7b80\u6d01\uff0c\u800c\u4e0d\u81f3\u4e8e\u628a\u6240\u6709\u7684\u4e1c\u897f\u5168\u90e8\u5199\u5728\u4e00\u4e2aMakefile\u4e2d\uff0c\u8fd9\u6837\u4f1a\u5f88\u96be\u7ef4\u62a4\u6211\u4eec\u7684Makefile\uff0c\u8fd9\u4e2a\u6280\u672f\u5bf9\u4e8e\u6211\u4eec\u6a21\u5757\u7f16\u8bd1\u548c\u5206\u6bb5\u7f16\u8bd1\u6709\u7740\u975e\u5e38\u5927\u7684\u597d\u5904\u3002 \u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5b50\u76ee\u5f55\u53ebsubdir\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6709\u4e2aMakefile\u6587\u4ef6\uff0c\u6765\u6307\u660e\u4e86\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u7f16\u8bd1\u89c4\u5219\u3002\u90a3\u4e48\u6211\u4eec\u603b\u63a7\u7684Makefile\u53ef\u4ee5\u8fd9\u6837\u4e66\u5199\uff1a .. code:: makefile subsystem : cd subdir amp ; amp ; $ ( MAKE ) \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile subsystem : $( MAKE ) -C subdir \u5b9a\u4e49$(MAKE)\u5b8f\u53d8\u91cf\u7684\u610f\u601d\u662f\uff0c\u4e5f\u8bb8\u6211\u4eec\u7684make\u9700\u8981\u4e00\u4e9b\u53c2\u6570\uff0c\u6240\u4ee5\u5b9a\u4e49\u6210\u4e00\u4e2a\u53d8\u91cf\u6bd4\u8f83\u5229\u4e8e\u7ef4\u62a4\u3002\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u7684\u610f\u601d\u90fd\u662f\u5148\u8fdb\u5165\u201csubdir\u201d\u76ee\u5f55\uff0c\u7136\u540e\u6267\u884cmake\u547d\u4ee4\u3002 \u6211\u4eec\u628a\u8fd9\u4e2aMakefile\u53eb\u505a\u201c\u603b\u63a7Makefile\u201d\uff0c\u603b\u63a7Makefile\u7684\u53d8\u91cf\u53ef\u4ee5\u4f20\u9012\u5230\u4e0b\u7ea7\u7684Makefile\u4e2d\uff08\u5982\u679c\u4f60\u663e\u793a\u7684\u58f0\u660e\uff09\uff0c\u4f46\u662f\u4e0d\u4f1a\u8986\u76d6\u4e0b\u5c42\u7684Makefile\u4e2d\u6240\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u9664\u975e\u6307\u5b9a\u4e86 -e \u53c2\u6570\u3002 \u5982\u679c\u4f60\u8981\u4f20\u9012\u53d8\u91cf\u5230\u4e0b\u7ea7Makefile\u4e2d\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u6837\u7684\u58f0\u660e: :: export lt;variable ... gt;; \u5982\u679c\u4f60\u4e0d\u60f3\u8ba9\u67d0\u4e9b\u53d8\u91cf\u4f20\u9012\u5230\u4e0b\u7ea7Makefile\u4e2d\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u8fd9\u6837\u58f0\u660e: :: unexport lt;variable ... gt;; \u5982\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile export variable = value \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable = value export variable \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile export variable := value \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable := value export variable \u793a\u4f8b\u4e8c\uff1a .. code:: makefile export variable += value \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable += value export variable \u5982\u679c\u4f60\u8981\u4f20\u9012\u6240\u6709\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\uff0c\u53ea\u8981\u4e00\u4e2aexport\u5c31\u884c\u4e86\u3002\u540e\u9762\u4ec0\u4e48\u4e5f\u4e0d\u7528\u8ddf\uff0c\u8868\u793a\u4f20\u9012\u6240\u6709\u7684\u53d8\u91cf\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6709\u4e24\u4e2a\u53d8\u91cf\uff0c\u4e00\u4e2a\u662f SHELL \uff0c\u4e00\u4e2a\u662f MAKEFLAGS \uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u4e0d\u7ba1\u4f60\u662f\u5426export\uff0c\u5176\u603b\u662f\u8981\u4f20\u9012\u5230\u4e0b\u5c42 Makefile\u4e2d\uff0c\u7279\u522b\u662f MAKEFLAGS \u53d8\u91cf\uff0c\u5176\u4e2d\u5305\u542b\u4e86make\u7684\u53c2\u6570\u4fe1\u606f\uff0c\u5982\u679c\u6211\u4eec\u6267\u884c\u201c\u603b\u63a7Makefile\u201d\u65f6\u6709make\u53c2\u6570\u6216\u662f\u5728\u4e0a\u5c42 Makefile\u4e2d\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48 MAKEFLAGS \u53d8\u91cf\u5c06\u4f1a\u662f\u8fd9\u4e9b\u53c2\u6570\uff0c\u5e76\u4f1a\u4f20\u9012\u5230\u4e0b\u5c42Makefile\u4e2d\uff0c\u8fd9\u662f\u4e00\u4e2a\u7cfb\u7edf\u7ea7\u7684\u73af\u5883\u53d8\u91cf\u3002 \u4f46\u662fmake\u547d\u4ee4\u4e2d\u7684\u6709\u51e0\u4e2a\u53c2\u6570\u5e76\u4e0d\u5f80\u4e0b\u4f20\u9012\uff0c\u5b83\u4eec\u662f -C , -f , -h , -o \u548c -W \uff08\u6709\u5173Makefile\u53c2\u6570\u7684\u7ec6\u8282\u5c06\u5728\u540e\u9762\u8bf4\u660e\uff09\uff0c\u5982\u679c\u4f60\u4e0d\u60f3\u5f80\u4e0b\u5c42\u4f20\u9012\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6765\uff1a .. code:: makefile subsystem : cd subdir amp ; amp ; $ ( MAKE ) MAKEFLAGS = \u5982\u679c\u4f60\u5b9a\u4e49\u4e86\u73af\u5883\u53d8\u91cf MAKEFLAGS \uff0c\u90a3\u4e48\u4f60\u5f97\u786e\u4fe1\u5176\u4e2d\u7684\u9009\u9879\u662f\u5927\u5bb6\u90fd\u4f1a\u7528\u5230\u7684\uff0c\u5982\u679c\u5176\u4e2d\u6709 -t , -n \u548c -q \u53c2\u6570\uff0c\u90a3\u4e48\u5c06\u4f1a\u6709\u8ba9\u4f60\u610f\u60f3\u4e0d\u5230\u7684\u7ed3\u679c\uff0c\u6216\u8bb8\u4f1a\u8ba9\u4f60\u5f02\u5e38\u5730\u6050\u614c\u3002 \u8fd8\u6709\u4e00\u4e2a\u5728\u201c\u5d4c\u5957\u6267\u884c\u201d\u4e2d\u6bd4\u8f83\u6709\u7528\u7684\u53c2\u6570\uff0c -w \u6216\u662f --print-directory \u4f1a\u5728make\u7684\u8fc7\u7a0b\u4e2d\u8f93\u51fa\u4e00\u4e9b\u4fe1\u606f\uff0c\u8ba9\u4f60\u770b\u5230\u76ee\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u3002\u6bd4\u5982\uff0c\u5982\u679c\u6211\u4eec\u7684\u4e0b\u7ea7make\u76ee\u5f55\u662f\u201c/home/hchen/gnu/make\u201d\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528 make -w \u6765\u6267\u884c\uff0c\u90a3\u4e48\u5f53\u8fdb\u5165\u8be5\u76ee\u5f55\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230: :: make : Entering directory ` /home/hchen/gnu/ make . \u800c\u5728\u5b8c\u6210\u4e0b\u5c42make\u540e\u79bb\u5f00\u76ee\u5f55\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230: :: make : Leaving directory ` /home/hchen/gnu/ make \u5f53\u4f60\u4f7f\u7528 -C \u53c2\u6570\u6765\u6307\u5b9amake\u4e0b\u5c42Makefile\u65f6\uff0c -w \u4f1a\u88ab\u81ea\u52a8\u6253\u5f00\u7684\u3002\u5982\u679c\u53c2\u6570\u4e2d\u6709 -s \uff08 --slient \uff09\u6216\u662f --no-print-directory \uff0c\u90a3\u4e48\uff0c -w \u603b\u662f\u5931\u6548\u7684\u3002 \u5b9a\u4e49\u547d\u4ee4\u5305 \u5982\u679cMakefile\u4e2d\u51fa\u73b0\u4e00\u4e9b\u76f8\u540c\u547d\u4ee4\u5e8f\u5217\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4e3a\u8fd9\u4e9b\u76f8\u540c\u7684\u547d\u4ee4\u5e8f\u5217\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u3002\u5b9a\u4e49\u8fd9\u79cd\u547d\u4ee4\u5e8f\u5217\u7684\u8bed\u6cd5\u4ee5 define \u5f00\u59cb\uff0c\u4ee5 endef \u7ed3\u675f\uff0c\u5982: :: define run-yacc yacc $(firstword $^) mv y.tab.c $@ endef \u8fd9\u91cc\uff0c\u201crun-yacc\u201d\u662f\u8fd9\u4e2a\u547d\u4ee4\u5305\u7684\u540d\u5b57\uff0c\u5176\u4e0d\u8981\u548cMakefile\u4e2d\u7684\u53d8\u91cf\u91cd\u540d\u3002\u5728 define \u548c endef \u4e2d\u7684\u4e24\u884c\u5c31\u662f\u547d\u4ee4\u5e8f\u5217\u3002\u8fd9\u4e2a\u547d\u4ee4\u5305\u4e2d\u7684\u7b2c\u4e00\u4e2a\u547d\u4ee4\u662f\u8fd0\u884cYacc\u7a0b\u5e8f\uff0c\u56e0\u4e3aYacc\u7a0b\u5e8f\u603b\u662f\u751f\u6210\u201cy.tab.c\u201d\u7684\u6587\u4ef6\uff0c\u6240\u4ee5\u7b2c\u4e8c\u884c\u7684\u547d\u4ee4\u5c31\u662f\u628a\u8fd9\u4e2a\u6587\u4ef6\u6539\u6539\u540d\u5b57\u3002\u8fd8\u662f\u628a\u8fd9\u4e2a\u547d\u4ee4\u5305\u653e\u5230\u4e00\u4e2a\u793a\u4f8b\u4e2d\u6765\u770b\u770b\u5427\u3002 .. code:: makefile foo.c : foo.y $(run-yacc) \u6211\u4eec\u53ef\u4ee5\u770b\u89c1\uff0c\u8981\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u5305\uff0c\u6211\u4eec\u5c31\u597d\u50cf\u4f7f\u7528\u53d8\u91cf\u4e00\u6837\u3002\u5728\u8fd9\u4e2a\u547d\u4ee4\u5305\u7684\u4f7f\u7528\u4e2d\uff0c\u547d\u4ee4\u5305\u201crun-yacc\u201d\u4e2d\u7684 $^ \u5c31\u662f foo.y \uff0c $@ \u5c31\u662f foo.c \uff08\u6709\u5173\u8fd9\u79cd\u4ee5 $ \u5f00\u5934\u7684\u7279\u6b8a\u53d8\u91cf\uff0c\u6211\u4eec\u4f1a\u5728\u540e\u9762\u4ecb\u7ecd\uff09\uff0cmake\u5728\u6267\u884c\u547d\u4ee4\u5305\u65f6\uff0c\u547d\u4ee4\u5305\u4e2d\u7684\u6bcf\u4e2a\u547d\u4ee4\u4f1a\u88ab\u4f9d\u6b21\u72ec\u7acb\u6267\u884c\u3002","title":"\u4e66\u5199\u547d\u4ee4"},{"location":"makefile/recipes/#_1","text":"\u901a\u5e38\uff0cmake\u4f1a\u628a\u5176\u8981\u6267\u884c\u7684\u547d\u4ee4\u884c\u5728\u547d\u4ee4\u6267\u884c\u524d\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\u3002\u5f53\u6211\u4eec\u7528 @ \u5b57\u7b26\u5728\u547d\u4ee4\u884c\u524d\uff0c\u90a3\u4e48\uff0c\u8fd9\u4e2a\u547d\u4ee4\u5c06\u4e0d\u88abmake\u663e\u793a\u51fa\u6765\uff0c\u6700\u5177\u4ee3\u8868\u6027\u7684\u4f8b\u5b50\u662f\uff0c\u6211\u4eec\u7528\u8fd9\u4e2a\u529f\u80fd\u6765\u5411\u5c4f\u5e55\u663e\u793a\u4e00\u4e9b\u4fe1\u606f\u3002\u5982: :: @echo \u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757...... \u5f53make\u6267\u884c\u65f6\uff0c\u4f1a\u8f93\u51fa\u201c\u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757......\u201d\u5b57\u4e32\uff0c\u4f46\u4e0d\u4f1a\u8f93\u51fa\u547d\u4ee4\uff0c\u5982\u679c\u6ca1\u6709\u201c@\u201d\uff0c\u90a3\u4e48\uff0cmake\u5c06\u8f93\u51fa: :: echo \u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757...... \u6b63\u5728\u7f16\u8bd1XXX\u6a21\u5757...... \u5982\u679cmake\u6267\u884c\u65f6\uff0c\u5e26\u5165make\u53c2\u6570 -n \u6216 --just-print \uff0c\u90a3\u4e48\u5176\u53ea\u662f\u663e\u793a\u547d\u4ee4\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c\u547d\u4ee4\uff0c\u8fd9\u4e2a\u529f\u80fd\u5f88\u6709\u5229\u4e8e\u6211\u4eec\u8c03\u8bd5\u6211\u4eec\u7684Makefile\uff0c\u770b\u770b\u6211\u4eec\u4e66\u5199\u7684\u547d\u4ee4\u662f\u6267\u884c\u8d77\u6765\u662f\u4ec0\u4e48\u6837\u5b50\u7684\u6216\u662f\u4ec0\u4e48\u987a\u5e8f\u7684\u3002 \u800cmake\u53c2\u6570 -s \u6216 --silent \u6216 --quiet \u5219\u662f\u5168\u9762\u7981\u6b62\u547d\u4ee4\u7684\u663e\u793a\u3002","title":"\u663e\u793a\u547d\u4ee4"},{"location":"makefile/recipes/#_2","text":"\u5f53\u4f9d\u8d56\u76ee\u6807\u65b0\u4e8e\u76ee\u6807\u65f6\uff0c\u4e5f\u5c31\u662f\u5f53\u89c4\u5219\u7684\u76ee\u6807\u9700\u8981\u88ab\u66f4\u65b0\u65f6\uff0cmake\u4f1a\u4e00\u6761\u4e00\u6761\u7684\u6267\u884c\u5176\u540e\u7684\u547d\u4ee4\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u8981\u8ba9\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u7ed3\u679c\u5e94\u7528\u5728\u4e0b\u4e00\u6761\u547d\u4ee4\u65f6\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528\u5206\u53f7\u5206\u9694\u8fd9\u4e24\u6761\u547d\u4ee4\u3002\u6bd4\u5982\u4f60\u7684\u7b2c\u4e00\u6761\u547d\u4ee4\u662fcd\u547d\u4ee4\uff0c\u4f60\u5e0c\u671b\u7b2c\u4e8c\u6761\u547d\u4ee4\u5f97\u5728cd\u4e4b\u540e\u7684\u57fa\u7840\u4e0a\u8fd0\u884c\uff0c\u90a3\u4e48\u4f60\u5c31\u4e0d\u80fd\u628a\u8fd9\u4e24\u6761\u547d\u4ee4\u5199\u5728\u4e24\u884c\u4e0a\uff0c\u800c\u5e94\u8be5\u628a\u8fd9\u4e24\u6761\u547d\u4ee4\u5199\u5728\u4e00\u884c\u4e0a\uff0c\u7528\u5206\u53f7\u5206\u9694\u3002\u5982\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile exec : cd /home/ hchen pwd \u793a\u4f8b\u4e8c\uff1a .. code:: makefile exec : cd /home/ hchen ; pwd \u5f53\u6211\u4eec\u6267\u884c make exec \u65f6\uff0c\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u7684cd\u6ca1\u6709\u4f5c\u7528\uff0cpwd\u4f1a\u6253\u5370\u51fa\u5f53\u524d\u7684Makefile\u76ee\u5f55\uff0c\u800c\u7b2c\u4e8c\u4e2a\u4f8b\u5b50\u4e2d\uff0ccd\u5c31\u8d77\u4f5c\u7528\u4e86\uff0cpwd\u4f1a\u6253\u5370\u51fa\u201c/home/hchen\u201d\u3002 make\u4e00\u822c\u662f\u4f7f\u7528\u73af\u5883\u53d8\u91cfSHELL\u4e2d\u6240\u5b9a\u4e49\u7684\u7cfb\u7edfShell\u6765\u6267\u884c\u547d\u4ee4\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528UNIX\u7684\u6807\u51c6Shell\u2014\u2014/bin/sh\u6765\u6267\u884c\u547d\u4ee4\u3002\u4f46\u5728MS-DOS\u4e0b\u6709\u70b9\u7279\u6b8a\uff0c\u56e0\u4e3aMS-DOS\u4e0b\u6ca1\u6709SHELL\u73af\u5883\u53d8\u91cf\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u6307\u5b9a\u3002\u5982\u679c\u4f60\u6307\u5b9a\u4e86UNIX\u98ce\u683c\u7684\u76ee\u5f55\u5f62\u5f0f\uff0c\u9996\u5148\uff0cmake\u4f1a\u5728SHELL\u6240\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u627e\u5bfb\u547d\u4ee4\u89e3\u91ca\u5668\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u5176\u4f1a\u5728\u5f53\u524d\u76d8\u7b26\u4e2d\u7684\u5f53\u524d\u76ee\u5f55\u4e2d\u5bfb\u627e\uff0c\u5982\u679c\u518d\u627e\u4e0d\u5230\uff0c\u5176\u4f1a\u5728PATH\u73af\u5883\u53d8\u91cf\u4e2d\u6240\u5b9a\u4e49\u7684\u6240\u6709\u8def\u5f84\u4e2d\u5bfb\u627e\u3002MS-DOS\u4e2d\uff0c\u5982\u679c\u4f60\u5b9a\u4e49\u7684\u547d\u4ee4\u89e3\u91ca\u5668\u6ca1\u6709\u627e\u5230\uff0c\u5176\u4f1a\u7ed9\u4f60\u7684\u547d\u4ee4\u89e3\u91ca\u5668\u52a0\u4e0a\u8bf8\u5982 .exe \u3001 .com \u3001 .bat \u3001 .sh \u7b49\u540e\u7f00\u3002","title":"\u547d\u4ee4\u6267\u884c"},{"location":"makefile/recipes/#_3","text":"\u6bcf\u5f53\u547d\u4ee4\u8fd0\u884c\u5b8c\u540e\uff0cmake\u4f1a\u68c0\u6d4b\u6bcf\u4e2a\u547d\u4ee4\u7684\u8fd4\u56de\u7801\uff0c\u5982\u679c\u547d\u4ee4\u8fd4\u56de\u6210\u529f\uff0c\u90a3\u4e48make\u4f1a\u6267\u884c\u4e0b\u4e00\u6761\u547d\u4ee4\uff0c\u5f53\u89c4\u5219\u4e2d\u6240\u6709\u7684\u547d\u4ee4\u6210\u529f\u8fd4\u56de\u540e\uff0c\u8fd9\u4e2a\u89c4\u5219\u5c31\u7b97\u662f\u6210\u529f\u5b8c\u6210\u4e86\u3002\u5982\u679c\u4e00\u4e2a\u89c4\u5219\u4e2d\u7684\u67d0\u4e2a\u547d\u4ee4\u51fa\u9519\u4e86\uff08\u547d\u4ee4\u9000\u51fa\u7801\u975e\u96f6\uff09\uff0c\u90a3\u4e48make\u5c31\u4f1a\u7ec8\u6b62\u6267\u884c\u5f53\u524d\u89c4\u5219\uff0c\u8fd9\u5c06\u6709\u53ef\u80fd\u7ec8\u6b62\u6240\u6709\u89c4\u5219\u7684\u6267\u884c\u3002 \u6709\u4e9b\u65f6\u5019\uff0c\u547d\u4ee4\u7684\u51fa\u9519\u5e76\u4e0d\u8868\u793a\u5c31\u662f\u9519\u8bef\u7684\u3002\u4f8b\u5982mkdir\u547d\u4ee4\uff0c\u6211\u4eec\u4e00\u5b9a\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u76ee\u5f55\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48mkdir\u5c31\u6210\u529f\u6267\u884c\uff0c\u4e07\u4e8b\u5927\u5409\uff0c\u5982\u679c\u76ee\u5f55\u5b58\u5728\uff0c\u90a3\u4e48\u5c31\u51fa\u9519\u4e86\u3002\u6211\u4eec\u4e4b\u6240\u4ee5\u4f7f\u7528mkdir\u7684\u610f\u601d\u5c31\u662f\u4e00\u5b9a\u8981\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u76ee\u5f55\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u4e0d\u5e0c\u671bmkdir\u51fa\u9519\u800c\u7ec8\u6b62\u89c4\u5219\u7684\u8fd0\u884c\u3002 \u4e3a\u4e86\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u5ffd\u7565\u547d\u4ee4\u7684\u51fa\u9519\uff0c\u6211\u4eec\u53ef\u4ee5\u5728Makefile\u7684\u547d\u4ee4\u884c\u524d\u52a0\u4e00\u4e2a\u51cf\u53f7 - \uff08\u5728Tab\u952e\u4e4b\u540e\uff09\uff0c\u6807\u8bb0\u4e3a\u4e0d\u7ba1\u547d\u4ee4\u51fa\u4e0d\u51fa\u9519\u90fd\u8ba4\u4e3a\u662f\u6210\u529f\u7684\u3002\u5982\uff1a .. code:: bash clean: -rm -f *.o \u8fd8\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u529e\u6cd5\u662f\uff0c\u7ed9make\u52a0\u4e0a -i \u6216\u662f --ignore-errors \u53c2\u6570\uff0c\u90a3\u4e48\uff0cMakefile\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u5ffd\u7565\u9519\u8bef\u3002\u800c\u5982\u679c\u4e00\u4e2a\u89c4\u5219\u662f\u4ee5 .IGNORE \u4f5c\u4e3a\u76ee\u6807\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u89c4\u5219\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u5c06\u4f1a\u5ffd\u7565\u9519\u8bef\u3002\u8fd9\u4e9b\u662f\u4e0d\u540c\u7ea7\u522b\u7684\u9632\u6b62\u547d\u4ee4\u51fa\u9519\u7684\u65b9\u6cd5\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u4e0d\u540c\u559c\u6b22\u8bbe\u7f6e\u3002 \u8fd8\u6709\u4e00\u4e2a\u8981\u63d0\u4e00\u4e0b\u7684make\u7684\u53c2\u6570\u7684\u662f -k \u6216\u662f --keep-going \uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u610f\u601d\u662f\uff0c\u5982\u679c\u67d0\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u51fa\u9519\u4e86\uff0c\u90a3\u4e48\u5c31\u7ec8\u76ee\u8be5\u89c4\u5219\u7684\u6267\u884c\uff0c\u4f46\u7ee7\u7eed\u6267\u884c\u5176\u5b83\u89c4\u5219\u3002","title":"\u547d\u4ee4\u51fa\u9519"},{"location":"makefile/recipes/#make","text":"\u5728\u4e00\u4e9b\u5927\u7684\u5de5\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f1a\u628a\u6211\u4eec\u4e0d\u540c\u6a21\u5757\u6216\u662f\u4e0d\u540c\u529f\u80fd\u7684\u6e90\u6587\u4ef6\u653e\u5728\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6bcf\u4e2a\u76ee\u5f55\u4e2d\u90fd\u4e66\u5199\u4e00\u4e2a\u8be5\u76ee\u5f55\u7684Makefile\uff0c\u8fd9\u6709\u5229\u4e8e\u8ba9\u6211\u4eec\u7684Makefile\u53d8\u5f97\u66f4\u52a0\u5730\u7b80\u6d01\uff0c\u800c\u4e0d\u81f3\u4e8e\u628a\u6240\u6709\u7684\u4e1c\u897f\u5168\u90e8\u5199\u5728\u4e00\u4e2aMakefile\u4e2d\uff0c\u8fd9\u6837\u4f1a\u5f88\u96be\u7ef4\u62a4\u6211\u4eec\u7684Makefile\uff0c\u8fd9\u4e2a\u6280\u672f\u5bf9\u4e8e\u6211\u4eec\u6a21\u5757\u7f16\u8bd1\u548c\u5206\u6bb5\u7f16\u8bd1\u6709\u7740\u975e\u5e38\u5927\u7684\u597d\u5904\u3002 \u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5b50\u76ee\u5f55\u53ebsubdir\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6709\u4e2aMakefile\u6587\u4ef6\uff0c\u6765\u6307\u660e\u4e86\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u7f16\u8bd1\u89c4\u5219\u3002\u90a3\u4e48\u6211\u4eec\u603b\u63a7\u7684Makefile\u53ef\u4ee5\u8fd9\u6837\u4e66\u5199\uff1a .. code:: makefile subsystem : cd subdir amp ; amp ; $ ( MAKE ) \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile subsystem : $( MAKE ) -C subdir \u5b9a\u4e49$(MAKE)\u5b8f\u53d8\u91cf\u7684\u610f\u601d\u662f\uff0c\u4e5f\u8bb8\u6211\u4eec\u7684make\u9700\u8981\u4e00\u4e9b\u53c2\u6570\uff0c\u6240\u4ee5\u5b9a\u4e49\u6210\u4e00\u4e2a\u53d8\u91cf\u6bd4\u8f83\u5229\u4e8e\u7ef4\u62a4\u3002\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u7684\u610f\u601d\u90fd\u662f\u5148\u8fdb\u5165\u201csubdir\u201d\u76ee\u5f55\uff0c\u7136\u540e\u6267\u884cmake\u547d\u4ee4\u3002 \u6211\u4eec\u628a\u8fd9\u4e2aMakefile\u53eb\u505a\u201c\u603b\u63a7Makefile\u201d\uff0c\u603b\u63a7Makefile\u7684\u53d8\u91cf\u53ef\u4ee5\u4f20\u9012\u5230\u4e0b\u7ea7\u7684Makefile\u4e2d\uff08\u5982\u679c\u4f60\u663e\u793a\u7684\u58f0\u660e\uff09\uff0c\u4f46\u662f\u4e0d\u4f1a\u8986\u76d6\u4e0b\u5c42\u7684Makefile\u4e2d\u6240\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u9664\u975e\u6307\u5b9a\u4e86 -e \u53c2\u6570\u3002 \u5982\u679c\u4f60\u8981\u4f20\u9012\u53d8\u91cf\u5230\u4e0b\u7ea7Makefile\u4e2d\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u6837\u7684\u58f0\u660e: :: export lt;variable ... gt;; \u5982\u679c\u4f60\u4e0d\u60f3\u8ba9\u67d0\u4e9b\u53d8\u91cf\u4f20\u9012\u5230\u4e0b\u7ea7Makefile\u4e2d\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u8fd9\u6837\u58f0\u660e: :: unexport lt;variable ... gt;; \u5982\uff1a \u793a\u4f8b\u4e00\uff1a .. code:: makefile export variable = value \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable = value export variable \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile export variable := value \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable := value export variable \u793a\u4f8b\u4e8c\uff1a .. code:: makefile export variable += value \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable += value export variable \u5982\u679c\u4f60\u8981\u4f20\u9012\u6240\u6709\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\uff0c\u53ea\u8981\u4e00\u4e2aexport\u5c31\u884c\u4e86\u3002\u540e\u9762\u4ec0\u4e48\u4e5f\u4e0d\u7528\u8ddf\uff0c\u8868\u793a\u4f20\u9012\u6240\u6709\u7684\u53d8\u91cf\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6709\u4e24\u4e2a\u53d8\u91cf\uff0c\u4e00\u4e2a\u662f SHELL \uff0c\u4e00\u4e2a\u662f MAKEFLAGS \uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u4e0d\u7ba1\u4f60\u662f\u5426export\uff0c\u5176\u603b\u662f\u8981\u4f20\u9012\u5230\u4e0b\u5c42 Makefile\u4e2d\uff0c\u7279\u522b\u662f MAKEFLAGS \u53d8\u91cf\uff0c\u5176\u4e2d\u5305\u542b\u4e86make\u7684\u53c2\u6570\u4fe1\u606f\uff0c\u5982\u679c\u6211\u4eec\u6267\u884c\u201c\u603b\u63a7Makefile\u201d\u65f6\u6709make\u53c2\u6570\u6216\u662f\u5728\u4e0a\u5c42 Makefile\u4e2d\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48 MAKEFLAGS \u53d8\u91cf\u5c06\u4f1a\u662f\u8fd9\u4e9b\u53c2\u6570\uff0c\u5e76\u4f1a\u4f20\u9012\u5230\u4e0b\u5c42Makefile\u4e2d\uff0c\u8fd9\u662f\u4e00\u4e2a\u7cfb\u7edf\u7ea7\u7684\u73af\u5883\u53d8\u91cf\u3002 \u4f46\u662fmake\u547d\u4ee4\u4e2d\u7684\u6709\u51e0\u4e2a\u53c2\u6570\u5e76\u4e0d\u5f80\u4e0b\u4f20\u9012\uff0c\u5b83\u4eec\u662f -C , -f , -h , -o \u548c -W \uff08\u6709\u5173Makefile\u53c2\u6570\u7684\u7ec6\u8282\u5c06\u5728\u540e\u9762\u8bf4\u660e\uff09\uff0c\u5982\u679c\u4f60\u4e0d\u60f3\u5f80\u4e0b\u5c42\u4f20\u9012\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6765\uff1a .. code:: makefile subsystem : cd subdir amp ; amp ; $ ( MAKE ) MAKEFLAGS = \u5982\u679c\u4f60\u5b9a\u4e49\u4e86\u73af\u5883\u53d8\u91cf MAKEFLAGS \uff0c\u90a3\u4e48\u4f60\u5f97\u786e\u4fe1\u5176\u4e2d\u7684\u9009\u9879\u662f\u5927\u5bb6\u90fd\u4f1a\u7528\u5230\u7684\uff0c\u5982\u679c\u5176\u4e2d\u6709 -t , -n \u548c -q \u53c2\u6570\uff0c\u90a3\u4e48\u5c06\u4f1a\u6709\u8ba9\u4f60\u610f\u60f3\u4e0d\u5230\u7684\u7ed3\u679c\uff0c\u6216\u8bb8\u4f1a\u8ba9\u4f60\u5f02\u5e38\u5730\u6050\u614c\u3002 \u8fd8\u6709\u4e00\u4e2a\u5728\u201c\u5d4c\u5957\u6267\u884c\u201d\u4e2d\u6bd4\u8f83\u6709\u7528\u7684\u53c2\u6570\uff0c -w \u6216\u662f --print-directory \u4f1a\u5728make\u7684\u8fc7\u7a0b\u4e2d\u8f93\u51fa\u4e00\u4e9b\u4fe1\u606f\uff0c\u8ba9\u4f60\u770b\u5230\u76ee\u524d\u7684\u5de5\u4f5c\u76ee\u5f55\u3002\u6bd4\u5982\uff0c\u5982\u679c\u6211\u4eec\u7684\u4e0b\u7ea7make\u76ee\u5f55\u662f\u201c/home/hchen/gnu/make\u201d\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528 make -w \u6765\u6267\u884c\uff0c\u90a3\u4e48\u5f53\u8fdb\u5165\u8be5\u76ee\u5f55\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230: :: make : Entering directory ` /home/hchen/gnu/ make . \u800c\u5728\u5b8c\u6210\u4e0b\u5c42make\u540e\u79bb\u5f00\u76ee\u5f55\u65f6\uff0c\u6211\u4eec\u4f1a\u770b\u5230: :: make : Leaving directory ` /home/hchen/gnu/ make \u5f53\u4f60\u4f7f\u7528 -C \u53c2\u6570\u6765\u6307\u5b9amake\u4e0b\u5c42Makefile\u65f6\uff0c -w \u4f1a\u88ab\u81ea\u52a8\u6253\u5f00\u7684\u3002\u5982\u679c\u53c2\u6570\u4e2d\u6709 -s \uff08 --slient \uff09\u6216\u662f --no-print-directory \uff0c\u90a3\u4e48\uff0c -w \u603b\u662f\u5931\u6548\u7684\u3002","title":"\u5d4c\u5957\u6267\u884cmake"},{"location":"makefile/recipes/#_4","text":"\u5982\u679cMakefile\u4e2d\u51fa\u73b0\u4e00\u4e9b\u76f8\u540c\u547d\u4ee4\u5e8f\u5217\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4e3a\u8fd9\u4e9b\u76f8\u540c\u7684\u547d\u4ee4\u5e8f\u5217\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u3002\u5b9a\u4e49\u8fd9\u79cd\u547d\u4ee4\u5e8f\u5217\u7684\u8bed\u6cd5\u4ee5 define \u5f00\u59cb\uff0c\u4ee5 endef \u7ed3\u675f\uff0c\u5982: :: define run-yacc yacc $(firstword $^) mv y.tab.c $@ endef \u8fd9\u91cc\uff0c\u201crun-yacc\u201d\u662f\u8fd9\u4e2a\u547d\u4ee4\u5305\u7684\u540d\u5b57\uff0c\u5176\u4e0d\u8981\u548cMakefile\u4e2d\u7684\u53d8\u91cf\u91cd\u540d\u3002\u5728 define \u548c endef \u4e2d\u7684\u4e24\u884c\u5c31\u662f\u547d\u4ee4\u5e8f\u5217\u3002\u8fd9\u4e2a\u547d\u4ee4\u5305\u4e2d\u7684\u7b2c\u4e00\u4e2a\u547d\u4ee4\u662f\u8fd0\u884cYacc\u7a0b\u5e8f\uff0c\u56e0\u4e3aYacc\u7a0b\u5e8f\u603b\u662f\u751f\u6210\u201cy.tab.c\u201d\u7684\u6587\u4ef6\uff0c\u6240\u4ee5\u7b2c\u4e8c\u884c\u7684\u547d\u4ee4\u5c31\u662f\u628a\u8fd9\u4e2a\u6587\u4ef6\u6539\u6539\u540d\u5b57\u3002\u8fd8\u662f\u628a\u8fd9\u4e2a\u547d\u4ee4\u5305\u653e\u5230\u4e00\u4e2a\u793a\u4f8b\u4e2d\u6765\u770b\u770b\u5427\u3002 .. code:: makefile foo.c : foo.y $(run-yacc) \u6211\u4eec\u53ef\u4ee5\u770b\u89c1\uff0c\u8981\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\u5305\uff0c\u6211\u4eec\u5c31\u597d\u50cf\u4f7f\u7528\u53d8\u91cf\u4e00\u6837\u3002\u5728\u8fd9\u4e2a\u547d\u4ee4\u5305\u7684\u4f7f\u7528\u4e2d\uff0c\u547d\u4ee4\u5305\u201crun-yacc\u201d\u4e2d\u7684 $^ \u5c31\u662f foo.y \uff0c $@ \u5c31\u662f foo.c \uff08\u6709\u5173\u8fd9\u79cd\u4ee5 $ \u5f00\u5934\u7684\u7279\u6b8a\u53d8\u91cf\uff0c\u6211\u4eec\u4f1a\u5728\u540e\u9762\u4ecb\u7ecd\uff09\uff0cmake\u5728\u6267\u884c\u547d\u4ee4\u5305\u65f6\uff0c\u547d\u4ee4\u5305\u4e2d\u7684\u6bcf\u4e2a\u547d\u4ee4\u4f1a\u88ab\u4f9d\u6b21\u72ec\u7acb\u6267\u884c\u3002","title":"\u5b9a\u4e49\u547d\u4ee4\u5305"},{"location":"makefile/rules/","text":"======== \u4e66\u5199\u89c4\u5219 ======== \u89c4\u5219\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u4f9d\u8d56\u5173\u7cfb\uff0c\u4e00\u4e2a\u662f\u751f\u6210\u76ee\u6807\u7684\u65b9\u6cd5\u3002 \u5728Makefile\u4e2d\uff0c\u89c4\u5219\u7684\u987a\u5e8f\u662f\u5f88\u91cd\u8981\u7684\uff0c\u56e0\u4e3a\uff0cMakefile\u4e2d\u53ea\u5e94\u8be5\u6709\u4e00\u4e2a\u6700\u7ec8\u76ee\u6807\uff0c\u5176\u5b83\u7684\u76ee\u6807\u90fd\u662f\u88ab\u8fd9\u4e2a\u76ee\u6807\u6240\u8fde\u5e26\u51fa\u6765\u7684\uff0c\u6240\u4ee5\u4e00\u5b9a\u8981\u8ba9make\u77e5\u9053\u4f60\u7684\u6700\u7ec8\u76ee\u6807\u662f\u4ec0\u4e48\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5b9a\u4e49\u5728Makefile\u4e2d\u7684\u76ee\u6807\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\uff0c\u4f46\u662f\u7b2c\u4e00\u6761\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u5c06\u88ab\u786e\u7acb\u4e3a\u6700\u7ec8\u7684\u76ee\u6807\u3002\u5982\u679c\u7b2c\u4e00\u6761\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u6709\u5f88\u591a\u4e2a\uff0c\u90a3\u4e48\uff0c\u7b2c\u4e00\u4e2a\u76ee\u6807\u4f1a\u6210\u4e3a\u6700\u7ec8\u7684\u76ee\u6807\u3002make\u6240\u5b8c\u6210\u7684\u4e5f\u5c31\u662f\u8fd9\u4e2a\u76ee\u6807\u3002 \u597d\u4e86\uff0c\u8fd8\u662f\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u770b\u5982\u4f55\u4e66\u5199\u89c4\u5219\u3002 \u89c4\u5219\u4e3e\u4f8b .. code:: makefile foo.o: foo.c defs.h # foo\u6a21\u5757 cc -c -g foo.c \u770b\u5230\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5404\u4f4d\u5e94\u8be5\u4e0d\u662f\u5f88\u964c\u751f\u4e86\uff0c\u524d\u9762\u4e5f\u5df2\u8bf4\u8fc7\uff0c foo.o \u662f\u6211\u4eec\u7684\u76ee\u6807\uff0c foo.c \u548c defs.h \u662f\u76ee\u6807\u6240\u4f9d\u8d56\u7684\u6e90\u6587\u4ef6\uff0c\u800c\u53ea\u6709\u4e00\u4e2a\u547d\u4ee4 cc -c -g foo.c \uff08\u4ee5Tab\u952e\u5f00\u5934\uff09\u3002\u8fd9\u4e2a\u89c4\u5219\u544a\u8bc9\u6211\u4eec\u4e24\u4ef6\u4e8b\uff1a \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c foo.o \u4f9d\u8d56\u4e8e foo.c \u548c defs.h \u7684\u6587\u4ef6\uff0c\u5982\u679c foo.c \u548c defs.h \u7684\u6587\u4ef6\u65e5\u671f\u8981\u6bd4 foo.o \u6587\u4ef6\u65e5\u671f\u8981\u65b0\uff0c\u6216\u662f foo.o \u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u4f9d\u8d56\u5173\u7cfb\u53d1\u751f\u3002 \u751f\u6210\u6216\u66f4\u65b0 foo.o \u6587\u4ef6\uff0c\u5c31\u662f\u90a3\u4e2acc\u547d\u4ee4\u3002\u5b83\u8bf4\u660e\u4e86\u5982\u4f55\u751f\u6210 foo.o \u8fd9\u4e2a\u6587\u4ef6\u3002\uff08\u5f53\u7136\uff0cfoo.c\u6587\u4ef6include\u4e86defs.h\u6587\u4ef6\uff09 \u89c4\u5219\u7684\u8bed\u6cd5 .. code:: makefile targets : prerequisites command ... \u6216\u662f\u8fd9\u6837\uff1a .. code:: makefile targets : prerequisites ; command command ... targets\u662f\u6587\u4ef6\u540d\uff0c\u4ee5\u7a7a\u683c\u5206\u5f00\uff0c\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u76ee\u6807\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f46\u4e5f\u6709\u53ef\u80fd\u662f\u591a\u4e2a\u6587\u4ef6\u3002 command\u662f\u547d\u4ee4\u884c\uff0c\u5982\u679c\u5176\u4e0d\u4e0e\u201ctarget:prerequisites\u201d\u5728\u4e00\u884c\uff0c\u90a3\u4e48\uff0c\u5fc5\u987b\u4ee5 Tab \u952e\u5f00\u5934\uff0c\u5982\u679c\u548cprerequisites\u5728\u4e00\u884c\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u5206\u53f7\u505a\u4e3a\u5206\u9694\u3002\uff08\u89c1\u4e0a\uff09 prerequisites\u4e5f\u5c31\u662f\u76ee\u6807\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\uff08\u6216\u4f9d\u8d56\u76ee\u6807\uff09\u3002\u5982\u679c\u5176\u4e2d\u7684\u67d0\u4e2a\u6587\u4ef6\u8981\u6bd4\u76ee\u6807\u6587\u4ef6\u8981\u65b0\uff0c\u90a3\u4e48\uff0c\u76ee\u6807\u5c31\u88ab\u8ba4\u4e3a\u662f\u201c\u8fc7\u65f6\u7684\u201d\uff0c\u88ab\u8ba4\u4e3a\u662f\u9700\u8981\u91cd\u751f\u6210\u7684\u3002\u8fd9\u4e2a\u5728\u524d\u9762\u5df2\u7ecf\u8bb2\u8fc7\u4e86\u3002 \u5982\u679c\u547d\u4ee4\u592a\u957f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760\uff08 \\ \uff09\u4f5c\u4e3a\u6362\u884c\u7b26\u3002make\u5bf9\u4e00\u884c\u4e0a\u6709\u591a\u5c11\u4e2a\u5b57\u7b26\u6ca1\u6709\u9650\u5236\u3002\u89c4\u5219\u544a\u8bc9make\u4e24\u4ef6\u4e8b\uff0c\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u548c\u5982\u4f55\u751f\u6210\u76ee\u6807\u6587\u4ef6\u3002 \u4e00\u822c\u6765\u8bf4\uff0cmake\u4f1a\u4ee5UNIX\u7684\u6807\u51c6Shell\uff0c\u4e5f\u5c31\u662f /bin/sh \u6765\u6267\u884c\u547d\u4ee4\u3002 \u5728\u89c4\u5219\u4e2d\u4f7f\u7528\u901a\u914d\u7b26 \u5982\u679c\u6211\u4eec\u60f3\u5b9a\u4e49\u4e00\u7cfb\u5217\u6bd4\u8f83\u7c7b\u4f3c\u7684\u6587\u4ef6\uff0c\u6211\u4eec\u5f88\u81ea\u7136\u5730\u5c31\u60f3\u8d77\u4f7f\u7528\u901a\u914d\u7b26\u3002make\u652f\u6301\u4e09\u4e2a\u901a\u914d\u7b26\uff1a * \uff0c ? \u548c ~ \u3002\u8fd9\u662f\u548cUnix\u7684B-Shell\u662f\u76f8\u540c\u7684\u3002 \u6ce2\u6d6a\u53f7\uff08 ~ \uff09\u5b57\u7b26\u5728\u6587\u4ef6\u540d\u4e2d\u4e5f\u6709\u6bd4\u8f83\u7279\u6b8a\u7684\u7528\u9014\u3002\u5982\u679c\u662f ~/test \uff0c\u8fd9\u5c31\u8868\u793a\u5f53\u524d\u7528\u6237\u7684$HOME\u76ee\u5f55\u4e0b\u7684test\u76ee\u5f55\u3002\u800c ~hchen/test \u5219\u8868\u793a\u7528\u6237hchen\u7684\u5bbf\u4e3b\u76ee\u5f55\u4e0b\u7684test\u76ee\u5f55\u3002\uff08\u8fd9\u4e9b\u90fd\u662fUnix\u4e0b\u7684\u5c0f\u77e5\u8bc6\u4e86\uff0cmake\u4e5f\u652f\u6301\uff09\u800c\u5728Windows\u6216\u662f MS-DOS\u4e0b\uff0c\u7528\u6237\u6ca1\u6709\u5bbf\u4e3b\u76ee\u5f55\uff0c\u90a3\u4e48\u6ce2\u6d6a\u53f7\u6240\u6307\u7684\u76ee\u5f55\u5219\u6839\u636e\u73af\u5883\u53d8\u91cf\u201cHOME\u201d\u800c\u5b9a\u3002 \u901a\u914d\u7b26\u4ee3\u66ff\u4e86\u4f60\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\uff0c\u5982 *.c \u8868\u793a\u6240\u6709\u540e\u7f00\u4e3ac\u7684\u6587\u4ef6\u3002\u4e00\u4e2a\u9700\u8981\u6211\u4eec\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684\u6587\u4ef6\u540d\u4e2d\u6709\u901a\u914d\u7b26\uff0c\u5982\uff1a * \uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u8f6c\u4e49\u5b57\u7b26 \\ \uff0c\u5982 \\* \u6765\u8868\u793a\u771f\u5b9e\u7684 * \u5b57\u7b26\uff0c\u800c\u4e0d\u662f\u4efb\u610f\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 \u597d\u5427\uff0c\u8fd8\u662f\u5148\u6765\u770b\u51e0\u4e2a\u4f8b\u5b50\u5427\uff1a .. code:: makefile clean : rm - f *. o \u5176\u5b9e\u5728\u8fd9\u4e2aclean:\u540e\u9762\u53ef\u4ee5\u52a0\u4e0a\u4f60\u60f3\u505a\u7684\u4e00\u4e9b\u4e8b\u60c5\uff0c\u5982\u679c\u4f60\u60f3\u770b\u5230\u5728\u7f16\u8bd1\u5b8c\u540e\u770b\u770bmain.c\u7684\u6e90\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5\u5728\u52a0\u4e0acat\u8fd9\u4e2a\u547d\u4ee4\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1a .. code:: makefile clean : cat main . c rm - f *. o \u5176\u7ed3\u679c\u4f60\u8bd5\u4e00\u4e0b\u5c31\u77e5\u9053\u7684\u3002 \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u6211\u4e0d\u4e0d\u591a\u8bf4\u4e86\uff0c\u8fd9\u662f\u64cd\u4f5c\u7cfb\u7edfShell\u6240\u652f\u6301\u7684\u901a\u914d\u7b26\u3002\u8fd9\u662f\u5728\u547d\u4ee4\u4e2d\u7684\u901a\u914d\u7b26\u3002 .. code:: makefile print: *.c lpr -p $? touch print \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u8bf4\u660e\u4e86\u901a\u914d\u7b26\u4e5f\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u89c4\u5219\u4e2d\uff0c\u76ee\u6807print\u4f9d\u8d56\u4e8e\u6240\u6709\u7684 .c \u6587\u4ef6\u3002\u5176\u4e2d\u7684 $? \u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u6211\u4f1a\u5728\u540e\u9762\u7ed9\u4f60\u8bb2\u8ff0\u3002 .. code:: makefile objects = *.o \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u8868\u793a\u4e86\u901a\u914d\u7b26\u540c\u6837\u53ef\u4ee5\u7528\u5728\u53d8\u91cf\u4e2d\u3002\u5e76\u4e0d\u662f\u8bf4 *.o \u4f1a\u5c55\u5f00\uff0c\u4e0d\uff01objects\u7684\u503c\u5c31\u662f *.o \u3002Makefile\u4e2d\u7684\u53d8\u91cf\u5176\u5b9e\u5c31\u662fC/C++\u4e2d\u7684\u5b8f\u3002\u5982\u679c\u4f60\u8981\u8ba9\u901a\u914d\u7b26\u5728\u53d8\u91cf\u4e2d\u5c55\u5f00\uff0c\u4e5f\u5c31\u662f\u8ba9objects\u7684\u503c\u662f\u6240\u6709 .o \u7684\u6587\u4ef6\u540d\u7684\u96c6\u5408\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\uff1a .. code:: makefile objects := $(wildcard *.o) \u53e6\u7ed9\u4e00\u4e2a\u53d8\u91cf\u4f7f\u7528\u901a\u914d\u7b26\u7684\u4f8b\u5b50\uff1a \u5217\u51fa\u4e00\u786e\u5b9a\u6587\u4ef6\u5939\u4e2d\u7684\u6240\u6709 .c \u6587\u4ef6\u3002 .. code:: makefile objects := $(wildcard *.c) \u5217\u51fa(1)\u4e2d\u6240\u6709\u6587\u4ef6\u5bf9\u5e94\u7684 .o \u6587\u4ef6\uff0c\u5728\uff083\uff09\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5b83\u662f\u7531make\u81ea\u52a8\u7f16\u8bd1\u51fa\u7684: :: $(patsubst %.c,%.o,$(wildcard *.c)) \u7531(1)(2)\u4e24\u6b65\uff0c\u53ef\u5199\u51fa\u7f16\u8bd1\u5e76\u94fe\u63a5\u6240\u6709 .c \u548c .o \u6587\u4ef6 .. code:: makefile objects := $(patsubst %.c,%.o,$(wildcard *.c)) foo : $(objects) cc -o foo $(objects) \u8fd9\u79cd\u7528\u6cd5\u7531\u5173\u952e\u5b57\u201cwildcard\u201d\uff0c\u201cpatsubst\u201d\u6307\u51fa\uff0c\u5173\u4e8eMakefile\u7684\u5173\u952e\u5b57\uff0c\u6211\u4eec\u5c06\u5728\u540e\u9762\u8ba8\u8bba\u3002 \u6587\u4ef6\u641c\u5bfb \u5728\u4e00\u4e9b\u5927\u7684\u5de5\u7a0b\u4e2d\uff0c\u6709\u5927\u91cf\u7684\u6e90\u6587\u4ef6\uff0c\u6211\u4eec\u901a\u5e38\u7684\u505a\u6cd5\u662f\u628a\u8fd9\u8bb8\u591a\u7684\u6e90\u6587\u4ef6\u5206\u7c7b\uff0c\u5e76\u5b58\u653e\u5728\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d\u3002\u6240\u4ee5\uff0c\u5f53make\u9700\u8981\u53bb\u627e\u5bfb\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u65f6\uff0c\u4f60\u53ef\u4ee5\u5728\u6587\u4ef6\u524d\u52a0\u4e0a\u8def\u5f84\uff0c\u4f46\u6700\u597d\u7684\u65b9\u6cd5\u662f\u628a\u4e00\u4e2a\u8def\u5f84\u544a\u8bc9make\uff0c\u8ba9make\u5728\u81ea\u52a8\u53bb\u627e\u3002 Makefile\u6587\u4ef6\u4e2d\u7684\u7279\u6b8a\u53d8\u91cf VPATH \u5c31\u662f\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\uff0c\u5982\u679c\u6ca1\u6709\u6307\u660e\u8fd9\u4e2a\u53d8\u91cf\uff0cmake\u53ea\u4f1a\u5728\u5f53\u524d\u7684\u76ee\u5f55\u4e2d\u53bb\u627e\u5bfb\u4f9d\u8d56\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6\u3002\u5982\u679c\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4f1a\u5728\u5f53\u5f53\u524d\u76ee\u5f55\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u4e0b\uff0c\u5230\u6240\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u53bb\u627e\u5bfb\u6587\u4ef6\u4e86\u3002 .. code:: makefile VPATH = src:../headers \u4e0a\u9762\u7684\u7684\u5b9a\u4e49\u6307\u5b9a\u4e24\u4e2a\u76ee\u5f55\uff0c\u201csrc\u201d\u548c\u201c../headers\u201d\uff0cmake\u4f1a\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u8fdb\u884c\u641c\u7d22\u3002\u76ee\u5f55\u7531\u201c\u5192\u53f7\u201d\u5206\u9694\u3002\uff08\u5f53\u7136\uff0c\u5f53\u524d\u76ee\u5f55\u6c38\u8fdc\u662f\u6700\u9ad8\u4f18\u5148\u641c\u7d22\u7684\u5730\u65b9\uff09 \u53e6\u4e00\u4e2a\u8bbe\u7f6e\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u7684\u65b9\u6cd5\u662f\u4f7f\u7528make\u7684\u201cvpath\u201d\u5173\u952e\u5b57\uff08\u6ce8\u610f\uff0c\u5b83\u662f\u5168\u5c0f\u5199\u7684\uff09\uff0c\u8fd9\u4e0d\u662f\u53d8\u91cf\uff0c\u8fd9\u662f\u4e00\u4e2amake\u7684\u5173\u952e\u5b57\uff0c\u8fd9\u548c\u4e0a\u9762\u63d0\u5230\u7684\u90a3\u4e2aVPATH\u53d8\u91cf\u5f88\u7c7b\u4f3c\uff0c\u4f46\u662f\u5b83\u66f4\u4e3a\u7075\u6d3b\u3002\u5b83\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u6587\u4ef6\u5728\u4e0d\u540c\u7684\u641c\u7d22\u76ee\u5f55\u4e2d\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u7075\u6d3b\u7684\u529f\u80fd\u3002\u5b83\u7684\u4f7f\u7528\u65b9\u6cd5\u6709\u4e09\u79cd\uff1a vpath pattern directories \u4e3a\u7b26\u5408\u6a21\u5f0f \u7684\u6587\u4ef6\u6307\u5b9a\u641c\u7d22\u76ee\u5f55 \u3002 vpath pattern \u6e05\u9664\u7b26\u5408\u6a21\u5f0f \u7684\u6587\u4ef6\u7684\u641c\u7d22\u76ee\u5f55\u3002 vpath \u6e05\u9664\u6240\u6709\u5df2\u88ab\u8bbe\u7f6e\u597d\u4e86\u7684\u6587\u4ef6\u641c\u7d22\u76ee\u5f55\u3002 vapth\u4f7f\u7528\u65b9\u6cd5\u4e2d\u7684 \u9700\u8981\u5305\u542b % \u5b57\u7b26\u3002 % \u7684\u610f\u601d\u662f\u5339\u914d\u96f6\u6216\u82e5\u5e72\u5b57\u7b26\uff0c\uff08\u9700\u5f15\u7528 % \uff0c\u4f7f\u7528 \\ \uff09\u4f8b\u5982\uff0c %.h \u8868\u793a\u6240\u6709\u4ee5 .h \u7ed3\u5c3e\u7684\u6587\u4ef6\u3002 \u6307\u5b9a\u4e86\u8981\u641c\u7d22\u7684\u6587\u4ef6\u96c6\uff0c\u800c \u5219\u6307\u5b9a\u4e86 pattern \u7684\u6587\u4ef6\u96c6\u7684\u641c\u7d22\u7684\u76ee\u5f55\u3002\u4f8b\u5982\uff1a .. code:: makefile vpath %.h ../headers \u8be5\u8bed\u53e5\u8868\u793a\uff0c\u8981\u6c42make\u5728\u201c../headers\u201d\u76ee\u5f55\u4e0b\u641c\u7d22\u6240\u6709\u4ee5 .h \u7ed3\u5c3e\u7684\u6587\u4ef6\u3002\uff08\u5982\u679c\u67d0\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff09 \u6211\u4eec\u53ef\u4ee5\u8fde\u7eed\u5730\u4f7f\u7528vpath\u8bed\u53e5\uff0c\u4ee5\u6307\u5b9a\u4e0d\u540c\u641c\u7d22\u7b56\u7565\u3002\u5982\u679c\u8fde\u7eed\u7684vpath\u8bed\u53e5\u4e2d\u51fa\u73b0\u4e86\u76f8\u540c\u7684 \uff0c\u6216\u662f\u88ab\u91cd\u590d\u4e86\u7684 \uff0c\u90a3\u4e48\uff0cmake\u4f1a\u6309\u7167vpath\u8bed\u53e5\u7684\u5148\u540e\u987a\u5e8f\u6765\u6267\u884c\u641c\u7d22\u3002\u5982\uff1a .. code:: makefile vpath %.c foo vpath % blish vpath %.c bar \u5176\u8868\u793a .c \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u5148\u5728\u201cfoo\u201d\u76ee\u5f55\uff0c\u7136\u540e\u662f\u201cblish\u201d\uff0c\u6700\u540e\u662f\u201cbar\u201d\u76ee\u5f55\u3002 .. code:: makefile vpath %.c foo:bar vpath % blish \u800c\u4e0a\u9762\u7684\u8bed\u53e5\u5219\u8868\u793a .c \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u5148\u5728\u201cfoo\u201d\u76ee\u5f55\uff0c\u7136\u540e\u662f\u201cbar\u201d\u76ee\u5f55\uff0c\u6700\u540e\u624d\u662f\u201cblish\u201d\u76ee\u5f55\u3002 \u4f2a\u76ee\u6807 \u6700\u65e9\u5148\u7684\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u63d0\u5230\u8fc7\u4e00\u4e2a\u201cclean\u201d\u7684\u76ee\u6807\uff0c\u8fd9\u662f\u4e00\u4e2a\u201c\u4f2a\u76ee\u6807\u201d\uff0c .. code:: makefile clean : rm *. o temp \u6b63\u50cf\u6211\u4eec\u524d\u9762\u4f8b\u5b50\u4e2d\u7684\u201cclean\u201d\u4e00\u6837\uff0c\u65e2\u7136\u6211\u4eec\u751f\u6210\u4e86\u8bb8\u591a\u6587\u4ef6\u7f16\u8bd1\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u5e94\u8be5\u63d0\u4f9b\u4e00\u4e2a\u6e05\u9664\u5b83\u4eec\u7684\u201c\u76ee\u6807\u201d\u4ee5\u5907\u5b8c\u6574\u5730\u91cd\u7f16\u8bd1\u800c\u7528\u3002 \uff08\u4ee5\u201cmake clean\u201d\u6765\u4f7f\u7528\u8be5\u76ee\u6807\uff09 \u56e0\u4e3a\uff0c\u6211\u4eec\u5e76\u4e0d\u751f\u6210\u201cclean\u201d\u8fd9\u4e2a\u6587\u4ef6\u3002\u201c\u4f2a\u76ee\u6807\u201d\u5e76\u4e0d\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u53ea\u662f\u4e00\u4e2a\u6807\u7b7e\uff0c\u7531\u4e8e\u201c\u4f2a\u76ee\u6807\u201d\u4e0d\u662f\u6587\u4ef6\uff0c\u6240\u4ee5make\u65e0\u6cd5\u751f\u6210\u5b83\u7684\u4f9d\u8d56\u5173\u7cfb\u548c\u51b3\u5b9a\u5b83\u662f\u5426\u8981\u6267\u884c\u3002\u6211\u4eec\u53ea\u6709\u901a\u8fc7\u663e\u5f0f\u5730\u6307\u660e\u8fd9\u4e2a\u201c\u76ee\u6807\u201d\u624d\u80fd\u8ba9\u5176\u751f\u6548\u3002\u5f53\u7136\uff0c\u201c\u4f2a\u76ee\u6807\u201d\u7684\u53d6\u540d\u4e0d\u80fd\u548c\u6587\u4ef6\u540d\u91cd\u540d\uff0c\u4e0d\u7136\u5176\u5c31\u5931\u53bb\u4e86\u201c\u4f2a\u76ee\u6807\u201d\u7684\u610f\u4e49\u4e86\u3002 \u5f53\u7136\uff0c\u4e3a\u4e86\u907f\u514d\u548c\u6587\u4ef6\u91cd\u540d\u7684\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0\u201c.PHONY\u201d\u6765\u663e\u5f0f\u5730\u6307\u660e\u4e00\u4e2a\u76ee\u6807\u662f\u201c\u4f2a\u76ee\u6807\u201d\uff0c\u5411make\u8bf4\u660e\uff0c\u4e0d\u7ba1\u662f\u5426\u6709\u8fd9\u4e2a\u6587\u4ef6\uff0c\u8fd9\u4e2a\u76ee\u6807\u5c31\u662f\u201c\u4f2a\u76ee\u6807\u201d\u3002 .. code:: makefile .PHONY : clean \u53ea\u8981\u6709\u8fd9\u4e2a\u58f0\u660e\uff0c\u4e0d\u7ba1\u662f\u5426\u6709\u201cclean\u201d\u6587\u4ef6\uff0c\u8981\u8fd0\u884c\u201cclean\u201d\u8fd9\u4e2a\u76ee\u6807\uff0c\u53ea\u6709\u201cmake clean\u201d\u8fd9\u6837\u3002\u4e8e\u662f\u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a .. code:: makefile .PHONY : clean clean : rm *. o temp \u4f2a\u76ee\u6807\u4e00\u822c\u6ca1\u6709\u4f9d\u8d56\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4e3a\u4f2a\u76ee\u6807\u6307\u5b9a\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\u3002\u4f2a\u76ee\u6807\u540c\u6837\u53ef\u4ee5\u4f5c\u4e3a\u201c\u9ed8\u8ba4\u76ee\u6807\u201d\uff0c\u53ea\u8981\u5c06\u5176\u653e\u5728\u7b2c\u4e00\u4e2a\u3002\u4e00\u4e2a\u793a\u4f8b\u5c31\u662f\uff0c\u5982\u679c\u4f60\u7684Makefile\u9700\u8981\u4e00\u53e3\u6c14\u751f\u6210\u82e5\u5e72\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4f46\u4f60\u53ea\u60f3\u7b80\u5355\u5730\u6572\u4e00\u4e2amake\u5b8c\u4e8b\uff0c\u5e76\u4e14\uff0c\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u90fd\u5199\u5728\u4e00\u4e2aMakefile\u4e2d\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u201c\u4f2a\u76ee\u6807\u201d\u8fd9\u4e2a\u7279\u6027\uff1a .. code:: makefile all : prog1 prog2 prog3 . PHONY : all prog1 : prog1 . o utils . o cc - o prog1 prog1 . o utils . o prog2 : prog2 . o cc - o prog2 prog2 . o prog3 : prog3 . o sort . o utils . o cc - o prog3 prog3 . o sort . o utils . o \u6211\u4eec\u77e5\u9053\uff0cMakefile\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u4f1a\u88ab\u4f5c\u4e3a\u5176\u9ed8\u8ba4\u76ee\u6807\u3002\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u201call\u201d\u7684\u4f2a\u76ee\u6807\uff0c\u5176\u4f9d\u8d56\u4e8e\u5176\u5b83\u4e09\u4e2a\u76ee\u6807\u3002\u7531\u4e8e\u9ed8\u8ba4\u76ee\u6807\u7684\u7279\u6027\u662f\uff0c\u603b\u662f\u88ab\u6267\u884c\u7684\uff0c\u4f46\u7531\u4e8e\u201call\u201d\u53c8\u662f\u4e00\u4e2a\u4f2a\u76ee\u6807\uff0c\u4f2a\u76ee\u6807\u53ea\u662f\u4e00\u4e2a\u6807\u7b7e\u4e0d\u4f1a\u751f\u6210\u6587\u4ef6\uff0c\u6240\u4ee5\u4e0d\u4f1a\u6709\u201call\u201d\u6587\u4ef6\u4ea7\u751f\u3002\u4e8e\u662f\uff0c\u5176\u5b83\u4e09\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u603b\u662f\u4f1a\u88ab\u51b3\u8bae\u3002\u4e5f\u5c31\u8fbe\u5230\u4e86\u6211\u4eec\u4e00\u53e3\u6c14\u751f\u6210\u591a\u4e2a\u76ee\u6807\u7684\u76ee\u7684\u3002 .PHONY : all \u58f0\u660e\u4e86\u201call\u201d\u8fd9\u4e2a\u76ee\u6807\u4e3a\u201c\u4f2a\u76ee\u6807\u201d\u3002\uff08\u6ce8\uff1a\u8fd9\u91cc\u7684\u663e\u5f0f \u201c.PHONY : all\u201d \u4e0d\u5199\u7684\u8bdd\u4e00\u822c\u60c5\u51b5\u4e5f\u53ef\u4ee5\u6b63\u786e\u7684\u6267\u884c\uff0c\u8fd9\u6837make\u53ef\u901a\u8fc7\u9690\u5f0f\u89c4\u5219\u63a8\u5bfc\u51fa\uff0c \u201call\u201d \u662f\u4e00\u4e2a\u4f2a\u76ee\u6807\uff0c\u6267\u884cmake\u4e0d\u4f1a\u751f\u6210\u201call\u201d\u6587\u4ef6\uff0c\u800c\u6267\u884c\u540e\u9762\u7684\u591a\u4e2a\u76ee\u6807\u3002\u5efa\u8bae\uff1a\u663e\u5f0f\u5199\u51fa\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\u3002\uff09 \u968f\u4fbf\u63d0\u4e00\u53e5\uff0c\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u76ee\u6807\u4e5f\u53ef\u4ee5\u6210\u4e3a\u4f9d\u8d56\u3002\u6240\u4ee5\uff0c\u4f2a\u76ee\u6807\u540c\u6837\u4e5f\u53ef\u6210\u4e3a\u4f9d\u8d56\u3002\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a .. code:: makefile .PHONY : cleanall cleanobj cleandiff cleanall : cleanobj cleandiff rm program cleanobj : rm *. o cleandiff : rm *. diff \u201cmake cleanall\u201d\u5c06\u6e05\u9664\u6240\u6709\u8981\u88ab\u6e05\u9664\u7684\u6587\u4ef6\u3002\u201ccleanobj\u201d\u548c\u201ccleandiff\u201d\u8fd9\u4e24\u4e2a\u4f2a\u76ee\u6807\u6709\u70b9\u50cf\u201c\u5b50\u7a0b\u5e8f\u201d\u7684\u610f\u601d\u3002\u6211\u4eec\u53ef\u4ee5\u8f93\u5165\u201cmake cleanall\u201d\u548c\u201cmake cleanobj\u201d\u548c\u201cmake cleandiff\u201d\u547d\u4ee4\u6765\u8fbe\u5230\u6e05\u9664\u4e0d\u540c\u79cd\u7c7b\u6587\u4ef6\u7684\u76ee\u7684\u3002 \u591a\u76ee\u6807 Makefile\u7684\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u53ef\u4ee5\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5176\u652f\u6301\u591a\u76ee\u6807\uff0c\u6709\u53ef\u80fd\u6211\u4eec\u7684\u591a\u4e2a\u76ee\u6807\u540c\u65f6\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u6587\u4ef6\uff0c\u5e76\u4e14\u5176\u751f\u6210\u7684\u547d\u4ee4\u5927\u4f53\u7c7b\u4f3c\u3002\u4e8e\u662f\u6211\u4eec\u5c31\u80fd\u628a\u5176\u5408\u5e76\u8d77\u6765\u3002\u5f53\u7136\uff0c\u591a\u4e2a\u76ee\u6807\u7684\u751f\u6210\u89c4\u5219\u7684\u6267\u884c\u547d\u4ee4\u4e0d\u662f\u540c\u4e00\u4e2a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u7ed9\u6211\u4eec\u5e26\u6765\u9ebb\u70e6\uff0c\u4e0d\u8fc7\u597d\u5728\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u81ea\u52a8\u5316\u53d8\u91cf $@ \uff08\u5173\u4e8e\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\uff09\uff0c\u8fd9\u4e2a\u53d8\u91cf\u8868\u793a\u7740\u76ee\u524d\u89c4\u5219\u4e2d\u6240\u6709\u7684\u76ee\u6807\u7684\u96c6\u5408\uff0c\u8fd9\u6837\u8bf4\u53ef\u80fd\u5f88\u62bd\u8c61\uff0c\u8fd8\u662f\u770b\u4e00\u4e2a\u4f8b\u5b50\u5427\u3002 .. code:: makefile bigoutput littleoutput : text.g generate text.g -$(subst output,,$@) gt; $@ \u4e0a\u8ff0\u89c4\u5219\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile bigoutput : text . g generate text . g - big gt ; bigoutput littleoutput : text . g generate text . g - little gt ; littleoutput \u5176\u4e2d\uff0c -$(subst output,,$@) \u4e2d\u7684 $ \u8868\u793a\u6267\u884c\u4e00\u4e2aMakefile\u7684\u51fd\u6570\uff0c\u51fd\u6570\u540d\u4e3asubst\uff0c\u540e\u9762\u7684\u4e3a\u53c2\u6570\u3002\u5173\u4e8e\u51fd\u6570\uff0c\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\u3002\u8fd9\u91cc\u7684\u8fd9\u4e2a\u51fd\u6570\u662f\u66ff\u6362\u5b57\u7b26\u4e32\u7684\u610f\u601d\uff0c $@ \u8868\u793a\u76ee\u6807\u7684\u96c6\u5408\uff0c\u5c31\u50cf\u4e00\u4e2a\u6570\u7ec4\uff0c $@ \u4f9d\u6b21\u53d6\u51fa\u76ee\u6807\uff0c\u5e76\u6267\u4e8e\u547d\u4ee4\u3002 \u9759\u6001\u6a21\u5f0f \u9759\u6001\u6a21\u5f0f\u53ef\u4ee5\u66f4\u52a0\u5bb9\u6613\u5730\u5b9a\u4e49\u591a\u76ee\u6807\u7684\u89c4\u5219\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u7684\u89c4\u5219\u53d8\u5f97\u66f4\u52a0\u7684\u6709\u5f39\u6027\u548c\u7075\u6d3b\u3002\u6211\u4eec\u8fd8\u662f\u5148\u6765\u770b\u4e00\u4e0b\u8bed\u6cd5\uff1a .. code:: makefile lt;targets ... gt; : lt;target-pattern gt; : lt;prereq-patterns ... gt; lt;commands gt; ... targets\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u901a\u914d\u7b26\u3002\u662f\u76ee\u6807\u7684\u4e00\u4e2a\u96c6\u5408\u3002 target-parrtern\u662f\u6307\u660e\u4e86targets\u7684\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u7684\u76ee\u6807\u96c6\u6a21\u5f0f\u3002 prereq-parrterns\u662f\u76ee\u6807\u7684\u4f9d\u8d56\u6a21\u5f0f\uff0c\u5b83\u5bf9target-parrtern\u5f62\u6210\u7684\u6a21\u5f0f\u518d\u8fdb\u884c\u4e00\u6b21\u4f9d\u8d56\u76ee\u6807\u7684\u5b9a\u4e49\u3002 \u8fd9\u6837\u63cf\u8ff0\u8fd9\u4e09\u4e2a\u4e1c\u897f\uff0c\u53ef\u80fd\u8fd8\u662f\u6ca1\u6709\u8bf4\u6e05\u695a\uff0c\u8fd8\u662f\u4e3e\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u4e00\u4e0b\u5427\u3002\u5982\u679c\u6211\u4eec\u7684 \u5b9a\u4e49\u6210 %.o \uff0c\u610f\u601d\u662f\u6211\u4eec\u7684 ;\u96c6\u5408\u4e2d\u90fd\u662f\u4ee5 .o \u7ed3\u5c3e\u7684\uff0c\u800c\u5982\u679c\u6211\u4eec\u7684 \u5b9a\u4e49\u6210 %.c \uff0c\u610f\u601d\u662f\u5bf9 \u6240\u5f62\u6210\u7684\u76ee\u6807\u96c6\u8fdb\u884c\u4e8c\u6b21\u5b9a\u4e49\uff0c\u5176\u8ba1\u7b97\u65b9\u6cd5\u662f\uff0c\u53d6 \u6a21\u5f0f\u4e2d\u7684 % \uff08\u4e5f\u5c31\u662f\u53bb\u6389\u4e86 .o \u8fd9\u4e2a\u7ed3\u5c3e\uff09\uff0c\u5e76\u4e3a\u5176\u52a0\u4e0a .c \u8fd9\u4e2a\u7ed3\u5c3e\uff0c\u5f62\u6210\u7684\u65b0\u96c6\u5408\u3002 \u6240\u4ee5\uff0c\u6211\u4eec\u7684\u201c\u76ee\u6807\u6a21\u5f0f\u201d\u6216\u662f\u201c\u4f9d\u8d56\u6a21\u5f0f\u201d\u4e2d\u90fd\u5e94\u8be5\u6709 % \u8fd9\u4e2a\u5b57\u7b26\uff0c\u5982\u679c\u4f60\u7684\u6587\u4ef6\u540d\u4e2d\u6709 % \u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760 \\ \u8fdb\u884c\u8f6c\u4e49\uff0c\u6765\u6807\u660e\u771f\u5b9e\u7684 % \u5b57\u7b26\u3002 \u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile objects = foo.o bar.o all : $( objects ) $(objects) : %. o : %. c $( CC ) -c $( CFLAGS ) $ lt ; -o $@ \u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6307\u660e\u4e86\u6211\u4eec\u7684\u76ee\u6807\u4ece$object\u4e2d\u83b7\u53d6\uff0c %.o \u8868\u660e\u8981\u6240\u6709\u4ee5 .o \u7ed3\u5c3e\u7684\u76ee\u6807\uff0c\u4e5f\u5c31\u662f foo.o bar.o \uff0c\u4e5f\u5c31\u662f\u53d8\u91cf $object \u96c6\u5408\u7684\u6a21\u5f0f\uff0c\u800c\u4f9d\u8d56\u6a21\u5f0f %.c \u5219\u53d6\u6a21\u5f0f %.o \u7684 % \uff0c\u4e5f\u5c31\u662f foo bar \uff0c\u5e76\u4e3a\u5176\u52a0\u4e0b .c \u7684\u540e\u7f00\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u7684\u4f9d\u8d56\u76ee\u6807\u5c31\u662f foo.c bar.c \u3002\u800c\u547d\u4ee4\u4e2d\u7684 $ \u548c $@ \u5219\u662f\u81ea\u52a8\u5316\u53d8\u91cf\uff0c $ \u8868\u793a\u6240\u6709\u7684\u4f9d\u8d56\u76ee\u6807\u96c6\uff08\u4e5f\u5c31\u662f foo.c bar.c \uff09\uff0c $@ \u8868\u793a\u76ee\u6807\u96c6\uff08\u4e5f\u5c31\u662f\u201cfoo.o bar.o\u201d\uff09\u3002\u4e8e\u662f\uff0c\u4e0a\u9762\u7684\u89c4\u5219\u5c55\u5f00\u540e\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u89c4\u5219\uff1a .. code:: makefile foo.o : foo . c $( CC ) -c $( CFLAGS ) foo.c -o foo.o bar.o : bar . c $( CC ) -c $( CFLAGS ) bar.c -o bar.o \u8bd5\u60f3\uff0c\u5982\u679c\u6211\u4eec\u7684 %.o \u6709\u51e0\u767e\u4e2a\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u7528\u8fd9\u79cd\u5f88\u7b80\u5355\u7684\u201c\u9759\u6001\u6a21\u5f0f\u89c4\u5219\u201d\u5c31\u53ef\u4ee5\u5199\u5b8c\u4e00\u5806\u89c4\u5219\uff0c\u5b9e\u5728\u662f\u592a\u6709\u6548\u7387\u4e86\u3002\u201c\u9759\u6001\u6a21\u5f0f\u89c4\u5219\u201d\u7684\u7528\u6cd5\u5f88\u7075\u6d3b\uff0c\u5982\u679c\u7528\u5f97\u597d\uff0c\u90a3\u4f1a\u662f\u4e00\u4e2a\u5f88\u5f3a\u5927\u7684\u529f\u80fd\u3002\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile files = foo.elc bar.o lose.o $(filter %.o,$(files)) : %. o : %. c $( CC ) -c $( CFLAGS ) $ lt ; -o $@ $(filter %.elc,$(files)) : %. elc : %. el emacs -f batch-byte-compile $ lt ; $(filter %.o,$(files))\u8868\u793a\u8c03\u7528Makefile\u7684filter\u51fd\u6570\uff0c\u8fc7\u6ee4\u201c$files\u201d\u96c6\uff0c\u53ea\u8981\u5176\u4e2d\u6a21\u5f0f\u4e3a\u201c%.o\u201d\u7684\u5185\u5bb9\u3002\u5176\u5b83\u7684\u5185\u5bb9\uff0c\u6211\u5c31\u4e0d\u7528\u591a\u8bf4\u4e86\u5427\u3002\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86Makefile\u4e2d\u66f4\u5927\u7684\u5f39\u6027\u3002 \u81ea\u52a8\u751f\u6210\u4f9d\u8d56\u6027 \u5728Makefile\u4e2d\uff0c\u6211\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u53ef\u80fd\u4f1a\u9700\u8981\u5305\u542b\u4e00\u7cfb\u5217\u7684\u5934\u6587\u4ef6\uff0c\u6bd4\u5982\uff0c\u5982\u679c\u6211\u4eec\u7684main.c\u4e2d\u6709\u4e00\u53e5 #include \"defs.h\" \uff0c\u90a3\u4e48\u6211\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u5e94\u8be5\u662f\uff1a .. code:: makefile main.o : main.c defs.h \u4f46\u662f\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u6bd4\u8f83\u5927\u578b\u7684\u5de5\u7a0b\uff0c\u4f60\u5fc5\u9700\u6e05\u695a\u54ea\u4e9bC\u6587\u4ef6\u5305\u542b\u4e86\u54ea\u4e9b\u5934\u6587\u4ef6\uff0c\u5e76\u4e14\uff0c\u4f60\u5728\u52a0\u5165\u6216\u5220\u9664\u5934\u6587\u4ef6\u65f6\uff0c\u4e5f\u9700\u8981\u5c0f\u5fc3\u5730\u4fee\u6539Makefile\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u6ca1\u6709\u7ef4\u62a4\u6027\u7684\u5de5\u4f5c\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u7e41\u91cd\u800c\u53c8\u5bb9\u6613\u51fa\u9519\u7684\u4e8b\u60c5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528C/C++\u7f16\u8bd1\u7684\u4e00\u4e2a\u529f\u80fd\u3002\u5927\u591a\u6570\u7684C/C++\u7f16\u8bd1\u5668\u90fd\u652f\u6301\u4e00\u4e2a\u201c-M\u201d\u7684\u9009\u9879\uff0c\u5373\u81ea\u52a8\u627e\u5bfb\u6e90\u6587\u4ef6\u4e2d\u5305\u542b\u7684\u5934\u6587\u4ef6\uff0c\u5e76\u751f\u6210\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4: :: cc -M main.c \u5176\u8f93\u51fa\u662f\uff1a .. code:: makefile main.o : main.c defs.h \u4e8e\u662f\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u4f60\u5c31\u4e0d\u5fc5\u518d\u624b\u52a8\u4e66\u5199\u82e5\u5e72\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u800c\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u4e86\u3002\u9700\u8981\u63d0\u9192\u4e00\u53e5\u7684\u662f\uff0c\u5982\u679c\u4f60\u4f7f\u7528GNU\u7684C/C++\u7f16\u8bd1\u5668\uff0c\u4f60\u5f97\u7528 -MM \u53c2\u6570\uff0c\u4e0d\u7136\uff0c -M \u53c2\u6570\u4f1a\u628a\u4e00\u4e9b\u6807\u51c6\u5e93\u7684\u5934\u6587\u4ef6\u4e5f\u5305\u542b\u8fdb\u6765\u3002 gcc -M main.c\u7684\u8f93\u51fa\u662f: :: main.o: main.c defs.h /usr/include/stdio.h /usr/include/features.h \\ /usr/include/sys/cdefs.h /usr/include/gnu/stubs.h \\ /usr/lib/gcc-lib/i486-suse-linux/2.95.3/include/stddef.h \\ /usr/include/bits/types.h /usr/include/bits/pthreadtypes.h \\ /usr/include/bits/sched.h /usr/include/libio.h \\ /usr/include/_G_config.h /usr/include/wchar.h \\ /usr/include/bits/wchar.h /usr/include/gconv.h \\ /usr/lib/gcc-lib/i486-suse-linux/2.95.3/include/stdarg.h \\ /usr/include/bits/stdio_lim.h gcc -MM main.c\u7684\u8f93\u51fa\u5219\u662f: :: main.o: main.c defs.h \u90a3\u4e48\uff0c\u7f16\u8bd1\u5668\u7684\u8fd9\u4e2a\u529f\u80fd\u5982\u4f55\u4e0e\u6211\u4eec\u7684Makefile\u8054\u7cfb\u5728\u4e00\u8d77\u5462\u3002\u56e0\u4e3a\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u7684Makefile\u4e5f\u8981\u6839\u636e\u8fd9\u4e9b\u6e90\u6587\u4ef6\u91cd\u65b0\u751f\u6210\uff0c\u8ba9 Makefile\u81ea\u5df2\u4f9d\u8d56\u4e8e\u6e90\u6587\u4ef6\uff1f\u8fd9\u4e2a\u529f\u80fd\u5e76\u4e0d\u73b0\u5b9e\uff0c\u4e0d\u8fc7\u6211\u4eec\u53ef\u4ee5\u6709\u5176\u5b83\u624b\u6bb5\u6765\u8fc2\u56de\u5730\u5b9e\u73b0\u8fd9\u4e00\u529f\u80fd\u3002GNU\u7ec4\u7ec7\u5efa\u8bae\u628a\u7f16\u8bd1\u5668\u4e3a\u6bcf\u4e00\u4e2a\u6e90\u6587\u4ef6\u7684\u81ea\u52a8\u751f\u6210\u7684\u4f9d\u8d56\u5173\u7cfb\u653e\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u4e3a\u6bcf\u4e00\u4e2a name.c \u7684\u6587\u4ef6\u90fd\u751f\u6210\u4e00\u4e2a name.d \u7684Makefile\u6587\u4ef6\uff0c .d \u6587\u4ef6\u4e2d\u5c31\u5b58\u653e\u5bf9\u5e94 .c \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa .c \u6587\u4ef6\u548c .d \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e76\u8ba9make\u81ea\u52a8\u66f4\u65b0\u6216\u751f\u6210 .d \u6587\u4ef6\uff0c\u5e76\u628a\u5176\u5305\u542b\u5728\u6211\u4eec\u7684\u4e3bMakefile\u4e2d\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u81ea\u52a8\u5316\u5730\u751f\u6210\u6bcf\u4e2a\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u4e86\u3002 \u8fd9\u91cc\uff0c\u6211\u4eec\u7ed9\u51fa\u4e86\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\u6765\u4ea7\u751f .d \u6587\u4ef6\uff1a .. code:: makefile %.d: %.c @ set - e ; rm - f $ @; \\ $ ( CC ) - M $ ( CPPFLAGS ) $ lt ; gt ;; $ @. $$$$ ; \\ sed s,\\($*\\)\\.o[ :]*,\\1.o $@ : ,g lt ; $ @. $$$$ gt ;; $ @; \\ rm - f $ @. $$$$ \u8fd9\u4e2a\u89c4\u5219\u7684\u610f\u601d\u662f\uff0c\u6240\u6709\u7684 .d \u6587\u4ef6\u4f9d\u8d56\u4e8e .c \u6587\u4ef6\uff0c rm -f $@ \u7684\u610f\u601d\u662f\u5220\u9664\u6240\u6709\u7684\u76ee\u6807\uff0c\u4e5f\u5c31\u662f .d \u6587\u4ef6\uff0c\u7b2c\u4e8c\u884c\u7684\u610f\u601d\u662f\uff0c\u4e3a\u6bcf\u4e2a\u4f9d\u8d56\u6587\u4ef6 $ \uff0c\u4e5f\u5c31\u662f .c \u6587\u4ef6\u751f\u6210\u4f9d\u8d56\u6587\u4ef6\uff0c $@ \u8868\u793a\u6a21\u5f0f %.d \u6587\u4ef6\uff0c\u5982\u679c\u6709\u4e00\u4e2aC\u6587\u4ef6\u662fname.c\uff0c\u90a3\u4e48 % \u5c31\u662f name \uff0c $$$$ \u610f\u4e3a\u4e00\u4e2a\u968f\u673a\u7f16\u53f7\uff0c\u7b2c\u4e8c\u884c\u751f\u6210\u7684\u6587\u4ef6\u6709\u53ef\u80fd\u662f\u201cname.d.12345\u201d\uff0c\u7b2c\u4e09\u884c\u4f7f\u7528sed\u547d\u4ee4\u505a\u4e86\u4e00\u4e2a\u66ff\u6362\uff0c\u5173\u4e8esed\u547d\u4ee4\u7684\u7528\u6cd5\u8bf7\u53c2\u770b\u76f8\u5173\u7684\u4f7f\u7528\u6587\u6863\u3002\u7b2c\u56db\u884c\u5c31\u662f\u5220\u9664\u4e34\u65f6\u6587\u4ef6\u3002 \u603b\u800c\u8a00\u4e4b\uff0c\u8fd9\u4e2a\u6a21\u5f0f\u8981\u505a\u7684\u4e8b\u5c31\u662f\u5728\u7f16\u8bd1\u5668\u751f\u6210\u7684\u4f9d\u8d56\u5173\u7cfb\u4e2d\u52a0\u5165 .d \u6587\u4ef6\u7684\u4f9d\u8d56\uff0c\u5373\u628a\u4f9d\u8d56\u5173\u7cfb\uff1a .. code:: makefile main.o : main.c defs.h \u8f6c\u6210\uff1a .. code:: makefile main.o main.d : main.c defs.h \u4e8e\u662f\uff0c\u6211\u4eec\u7684 .d \u6587\u4ef6\u4e5f\u4f1a\u81ea\u52a8\u66f4\u65b0\u4e86\uff0c\u5e76\u4f1a\u81ea\u52a8\u751f\u6210\u4e86\uff0c\u5f53\u7136\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5728\u8fd9\u4e2a .d \u6587\u4ef6\u4e2d\u52a0\u5165\u7684\u4e0d\u53ea\u662f\u4f9d\u8d56\u5173\u7cfb\uff0c\u5305\u62ec\u751f\u6210\u7684\u547d\u4ee4\u4e5f\u53ef\u4e00\u5e76\u52a0\u5165\uff0c\u8ba9\u6bcf\u4e2a .d \u6587\u4ef6\u90fd\u5305\u542b\u4e00\u4e2a\u5b8c\u8d56\u7684\u89c4\u5219\u3002\u4e00\u65e6\u6211\u4eec\u5b8c\u6210\u8fd9\u4e2a\u5de5\u4f5c\uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u8981\u628a\u8fd9\u4e9b\u81ea\u52a8\u751f\u6210\u7684\u89c4\u5219\u653e\u8fdb\u6211\u4eec\u7684\u4e3bMakefile\u4e2d\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Makefile\u7684\u201cinclude\u201d\u547d\u4ee4\uff0c\u6765\u5f15\u5165\u522b\u7684Makefile\u6587\u4ef6\uff08\u524d\u9762\u8bb2\u8fc7\uff09\uff0c\u4f8b\u5982\uff1a .. code:: makefile sources = foo.c bar.c include $(sources:.c=.d) \u4e0a\u8ff0\u8bed\u53e5\u4e2d\u7684 $(sources:.c=.d) \u4e2d\u7684 .c=.d \u7684\u610f\u601d\u662f\u505a\u4e00\u4e2a\u66ff\u6362\uff0c\u628a\u53d8\u91cf $(sources) \u6240\u6709 .c \u7684\u5b57\u4e32\u90fd\u66ff\u6362\u6210 .d \uff0c\u5173\u4e8e\u8fd9\u4e2a\u201c\u66ff\u6362\u201d\u7684\u5185\u5bb9\uff0c\u5728\u540e\u9762\u6211\u4f1a\u6709\u66f4\u4e3a\u8be6\u7ec6\u7684\u8bb2\u8ff0\u3002\u5f53\u7136\uff0c\u4f60\u5f97\u6ce8\u610f\u6b21\u5e8f\uff0c\u56e0\u4e3ainclude\u662f\u6309\u6b21\u5e8f\u6765\u8f7d\u5165\u6587\u4ef6\uff0c\u6700\u5148\u8f7d\u5165\u7684 .d \u6587\u4ef6\u4e2d\u7684\u76ee\u6807\u4f1a\u6210\u4e3a\u9ed8\u8ba4\u76ee\u6807\u3002","title":"\u4e66\u5199\u89c4\u5219"},{"location":"makefile/rules/#_1","text":".. code:: makefile foo.o: foo.c defs.h # foo\u6a21\u5757 cc -c -g foo.c \u770b\u5230\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5404\u4f4d\u5e94\u8be5\u4e0d\u662f\u5f88\u964c\u751f\u4e86\uff0c\u524d\u9762\u4e5f\u5df2\u8bf4\u8fc7\uff0c foo.o \u662f\u6211\u4eec\u7684\u76ee\u6807\uff0c foo.c \u548c defs.h \u662f\u76ee\u6807\u6240\u4f9d\u8d56\u7684\u6e90\u6587\u4ef6\uff0c\u800c\u53ea\u6709\u4e00\u4e2a\u547d\u4ee4 cc -c -g foo.c \uff08\u4ee5Tab\u952e\u5f00\u5934\uff09\u3002\u8fd9\u4e2a\u89c4\u5219\u544a\u8bc9\u6211\u4eec\u4e24\u4ef6\u4e8b\uff1a \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c foo.o \u4f9d\u8d56\u4e8e foo.c \u548c defs.h \u7684\u6587\u4ef6\uff0c\u5982\u679c foo.c \u548c defs.h \u7684\u6587\u4ef6\u65e5\u671f\u8981\u6bd4 foo.o \u6587\u4ef6\u65e5\u671f\u8981\u65b0\uff0c\u6216\u662f foo.o \u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u4f9d\u8d56\u5173\u7cfb\u53d1\u751f\u3002 \u751f\u6210\u6216\u66f4\u65b0 foo.o \u6587\u4ef6\uff0c\u5c31\u662f\u90a3\u4e2acc\u547d\u4ee4\u3002\u5b83\u8bf4\u660e\u4e86\u5982\u4f55\u751f\u6210 foo.o \u8fd9\u4e2a\u6587\u4ef6\u3002\uff08\u5f53\u7136\uff0cfoo.c\u6587\u4ef6include\u4e86defs.h\u6587\u4ef6\uff09","title":"\u89c4\u5219\u4e3e\u4f8b"},{"location":"makefile/rules/#_2","text":".. code:: makefile targets : prerequisites command ... \u6216\u662f\u8fd9\u6837\uff1a .. code:: makefile targets : prerequisites ; command command ... targets\u662f\u6587\u4ef6\u540d\uff0c\u4ee5\u7a7a\u683c\u5206\u5f00\uff0c\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u76ee\u6807\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f46\u4e5f\u6709\u53ef\u80fd\u662f\u591a\u4e2a\u6587\u4ef6\u3002 command\u662f\u547d\u4ee4\u884c\uff0c\u5982\u679c\u5176\u4e0d\u4e0e\u201ctarget:prerequisites\u201d\u5728\u4e00\u884c\uff0c\u90a3\u4e48\uff0c\u5fc5\u987b\u4ee5 Tab \u952e\u5f00\u5934\uff0c\u5982\u679c\u548cprerequisites\u5728\u4e00\u884c\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u5206\u53f7\u505a\u4e3a\u5206\u9694\u3002\uff08\u89c1\u4e0a\uff09 prerequisites\u4e5f\u5c31\u662f\u76ee\u6807\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\uff08\u6216\u4f9d\u8d56\u76ee\u6807\uff09\u3002\u5982\u679c\u5176\u4e2d\u7684\u67d0\u4e2a\u6587\u4ef6\u8981\u6bd4\u76ee\u6807\u6587\u4ef6\u8981\u65b0\uff0c\u90a3\u4e48\uff0c\u76ee\u6807\u5c31\u88ab\u8ba4\u4e3a\u662f\u201c\u8fc7\u65f6\u7684\u201d\uff0c\u88ab\u8ba4\u4e3a\u662f\u9700\u8981\u91cd\u751f\u6210\u7684\u3002\u8fd9\u4e2a\u5728\u524d\u9762\u5df2\u7ecf\u8bb2\u8fc7\u4e86\u3002 \u5982\u679c\u547d\u4ee4\u592a\u957f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760\uff08 \\ \uff09\u4f5c\u4e3a\u6362\u884c\u7b26\u3002make\u5bf9\u4e00\u884c\u4e0a\u6709\u591a\u5c11\u4e2a\u5b57\u7b26\u6ca1\u6709\u9650\u5236\u3002\u89c4\u5219\u544a\u8bc9make\u4e24\u4ef6\u4e8b\uff0c\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u548c\u5982\u4f55\u751f\u6210\u76ee\u6807\u6587\u4ef6\u3002 \u4e00\u822c\u6765\u8bf4\uff0cmake\u4f1a\u4ee5UNIX\u7684\u6807\u51c6Shell\uff0c\u4e5f\u5c31\u662f /bin/sh \u6765\u6267\u884c\u547d\u4ee4\u3002","title":"\u89c4\u5219\u7684\u8bed\u6cd5"},{"location":"makefile/rules/#_3","text":"\u5982\u679c\u6211\u4eec\u60f3\u5b9a\u4e49\u4e00\u7cfb\u5217\u6bd4\u8f83\u7c7b\u4f3c\u7684\u6587\u4ef6\uff0c\u6211\u4eec\u5f88\u81ea\u7136\u5730\u5c31\u60f3\u8d77\u4f7f\u7528\u901a\u914d\u7b26\u3002make\u652f\u6301\u4e09\u4e2a\u901a\u914d\u7b26\uff1a * \uff0c ? \u548c ~ \u3002\u8fd9\u662f\u548cUnix\u7684B-Shell\u662f\u76f8\u540c\u7684\u3002 \u6ce2\u6d6a\u53f7\uff08 ~ \uff09\u5b57\u7b26\u5728\u6587\u4ef6\u540d\u4e2d\u4e5f\u6709\u6bd4\u8f83\u7279\u6b8a\u7684\u7528\u9014\u3002\u5982\u679c\u662f ~/test \uff0c\u8fd9\u5c31\u8868\u793a\u5f53\u524d\u7528\u6237\u7684$HOME\u76ee\u5f55\u4e0b\u7684test\u76ee\u5f55\u3002\u800c ~hchen/test \u5219\u8868\u793a\u7528\u6237hchen\u7684\u5bbf\u4e3b\u76ee\u5f55\u4e0b\u7684test\u76ee\u5f55\u3002\uff08\u8fd9\u4e9b\u90fd\u662fUnix\u4e0b\u7684\u5c0f\u77e5\u8bc6\u4e86\uff0cmake\u4e5f\u652f\u6301\uff09\u800c\u5728Windows\u6216\u662f MS-DOS\u4e0b\uff0c\u7528\u6237\u6ca1\u6709\u5bbf\u4e3b\u76ee\u5f55\uff0c\u90a3\u4e48\u6ce2\u6d6a\u53f7\u6240\u6307\u7684\u76ee\u5f55\u5219\u6839\u636e\u73af\u5883\u53d8\u91cf\u201cHOME\u201d\u800c\u5b9a\u3002 \u901a\u914d\u7b26\u4ee3\u66ff\u4e86\u4f60\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\uff0c\u5982 *.c \u8868\u793a\u6240\u6709\u540e\u7f00\u4e3ac\u7684\u6587\u4ef6\u3002\u4e00\u4e2a\u9700\u8981\u6211\u4eec\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684\u6587\u4ef6\u540d\u4e2d\u6709\u901a\u914d\u7b26\uff0c\u5982\uff1a * \uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u8f6c\u4e49\u5b57\u7b26 \\ \uff0c\u5982 \\* \u6765\u8868\u793a\u771f\u5b9e\u7684 * \u5b57\u7b26\uff0c\u800c\u4e0d\u662f\u4efb\u610f\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u3002 \u597d\u5427\uff0c\u8fd8\u662f\u5148\u6765\u770b\u51e0\u4e2a\u4f8b\u5b50\u5427\uff1a .. code:: makefile clean : rm - f *. o \u5176\u5b9e\u5728\u8fd9\u4e2aclean:\u540e\u9762\u53ef\u4ee5\u52a0\u4e0a\u4f60\u60f3\u505a\u7684\u4e00\u4e9b\u4e8b\u60c5\uff0c\u5982\u679c\u4f60\u60f3\u770b\u5230\u5728\u7f16\u8bd1\u5b8c\u540e\u770b\u770bmain.c\u7684\u6e90\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5\u5728\u52a0\u4e0acat\u8fd9\u4e2a\u547d\u4ee4\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1a .. code:: makefile clean : cat main . c rm - f *. o \u5176\u7ed3\u679c\u4f60\u8bd5\u4e00\u4e0b\u5c31\u77e5\u9053\u7684\u3002 \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u6211\u4e0d\u4e0d\u591a\u8bf4\u4e86\uff0c\u8fd9\u662f\u64cd\u4f5c\u7cfb\u7edfShell\u6240\u652f\u6301\u7684\u901a\u914d\u7b26\u3002\u8fd9\u662f\u5728\u547d\u4ee4\u4e2d\u7684\u901a\u914d\u7b26\u3002 .. code:: makefile print: *.c lpr -p $? touch print \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u8bf4\u660e\u4e86\u901a\u914d\u7b26\u4e5f\u53ef\u4ee5\u5728\u6211\u4eec\u7684\u89c4\u5219\u4e2d\uff0c\u76ee\u6807print\u4f9d\u8d56\u4e8e\u6240\u6709\u7684 .c \u6587\u4ef6\u3002\u5176\u4e2d\u7684 $? \u662f\u4e00\u4e2a\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u6211\u4f1a\u5728\u540e\u9762\u7ed9\u4f60\u8bb2\u8ff0\u3002 .. code:: makefile objects = *.o \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u8868\u793a\u4e86\u901a\u914d\u7b26\u540c\u6837\u53ef\u4ee5\u7528\u5728\u53d8\u91cf\u4e2d\u3002\u5e76\u4e0d\u662f\u8bf4 *.o \u4f1a\u5c55\u5f00\uff0c\u4e0d\uff01objects\u7684\u503c\u5c31\u662f *.o \u3002Makefile\u4e2d\u7684\u53d8\u91cf\u5176\u5b9e\u5c31\u662fC/C++\u4e2d\u7684\u5b8f\u3002\u5982\u679c\u4f60\u8981\u8ba9\u901a\u914d\u7b26\u5728\u53d8\u91cf\u4e2d\u5c55\u5f00\uff0c\u4e5f\u5c31\u662f\u8ba9objects\u7684\u503c\u662f\u6240\u6709 .o \u7684\u6587\u4ef6\u540d\u7684\u96c6\u5408\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\uff1a .. code:: makefile objects := $(wildcard *.o) \u53e6\u7ed9\u4e00\u4e2a\u53d8\u91cf\u4f7f\u7528\u901a\u914d\u7b26\u7684\u4f8b\u5b50\uff1a \u5217\u51fa\u4e00\u786e\u5b9a\u6587\u4ef6\u5939\u4e2d\u7684\u6240\u6709 .c \u6587\u4ef6\u3002 .. code:: makefile objects := $(wildcard *.c) \u5217\u51fa(1)\u4e2d\u6240\u6709\u6587\u4ef6\u5bf9\u5e94\u7684 .o \u6587\u4ef6\uff0c\u5728\uff083\uff09\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5b83\u662f\u7531make\u81ea\u52a8\u7f16\u8bd1\u51fa\u7684: :: $(patsubst %.c,%.o,$(wildcard *.c)) \u7531(1)(2)\u4e24\u6b65\uff0c\u53ef\u5199\u51fa\u7f16\u8bd1\u5e76\u94fe\u63a5\u6240\u6709 .c \u548c .o \u6587\u4ef6 .. code:: makefile objects := $(patsubst %.c,%.o,$(wildcard *.c)) foo : $(objects) cc -o foo $(objects) \u8fd9\u79cd\u7528\u6cd5\u7531\u5173\u952e\u5b57\u201cwildcard\u201d\uff0c\u201cpatsubst\u201d\u6307\u51fa\uff0c\u5173\u4e8eMakefile\u7684\u5173\u952e\u5b57\uff0c\u6211\u4eec\u5c06\u5728\u540e\u9762\u8ba8\u8bba\u3002","title":"\u5728\u89c4\u5219\u4e2d\u4f7f\u7528\u901a\u914d\u7b26"},{"location":"makefile/rules/#_4","text":"\u5728\u4e00\u4e9b\u5927\u7684\u5de5\u7a0b\u4e2d\uff0c\u6709\u5927\u91cf\u7684\u6e90\u6587\u4ef6\uff0c\u6211\u4eec\u901a\u5e38\u7684\u505a\u6cd5\u662f\u628a\u8fd9\u8bb8\u591a\u7684\u6e90\u6587\u4ef6\u5206\u7c7b\uff0c\u5e76\u5b58\u653e\u5728\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d\u3002\u6240\u4ee5\uff0c\u5f53make\u9700\u8981\u53bb\u627e\u5bfb\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u65f6\uff0c\u4f60\u53ef\u4ee5\u5728\u6587\u4ef6\u524d\u52a0\u4e0a\u8def\u5f84\uff0c\u4f46\u6700\u597d\u7684\u65b9\u6cd5\u662f\u628a\u4e00\u4e2a\u8def\u5f84\u544a\u8bc9make\uff0c\u8ba9make\u5728\u81ea\u52a8\u53bb\u627e\u3002 Makefile\u6587\u4ef6\u4e2d\u7684\u7279\u6b8a\u53d8\u91cf VPATH \u5c31\u662f\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\uff0c\u5982\u679c\u6ca1\u6709\u6307\u660e\u8fd9\u4e2a\u53d8\u91cf\uff0cmake\u53ea\u4f1a\u5728\u5f53\u524d\u7684\u76ee\u5f55\u4e2d\u53bb\u627e\u5bfb\u4f9d\u8d56\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6\u3002\u5982\u679c\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\uff0cmake\u5c31\u4f1a\u5728\u5f53\u5f53\u524d\u76ee\u5f55\u627e\u4e0d\u5230\u7684\u60c5\u51b5\u4e0b\uff0c\u5230\u6240\u6307\u5b9a\u7684\u76ee\u5f55\u4e2d\u53bb\u627e\u5bfb\u6587\u4ef6\u4e86\u3002 .. code:: makefile VPATH = src:../headers \u4e0a\u9762\u7684\u7684\u5b9a\u4e49\u6307\u5b9a\u4e24\u4e2a\u76ee\u5f55\uff0c\u201csrc\u201d\u548c\u201c../headers\u201d\uff0cmake\u4f1a\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\u8fdb\u884c\u641c\u7d22\u3002\u76ee\u5f55\u7531\u201c\u5192\u53f7\u201d\u5206\u9694\u3002\uff08\u5f53\u7136\uff0c\u5f53\u524d\u76ee\u5f55\u6c38\u8fdc\u662f\u6700\u9ad8\u4f18\u5148\u641c\u7d22\u7684\u5730\u65b9\uff09 \u53e6\u4e00\u4e2a\u8bbe\u7f6e\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u7684\u65b9\u6cd5\u662f\u4f7f\u7528make\u7684\u201cvpath\u201d\u5173\u952e\u5b57\uff08\u6ce8\u610f\uff0c\u5b83\u662f\u5168\u5c0f\u5199\u7684\uff09\uff0c\u8fd9\u4e0d\u662f\u53d8\u91cf\uff0c\u8fd9\u662f\u4e00\u4e2amake\u7684\u5173\u952e\u5b57\uff0c\u8fd9\u548c\u4e0a\u9762\u63d0\u5230\u7684\u90a3\u4e2aVPATH\u53d8\u91cf\u5f88\u7c7b\u4f3c\uff0c\u4f46\u662f\u5b83\u66f4\u4e3a\u7075\u6d3b\u3002\u5b83\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u6587\u4ef6\u5728\u4e0d\u540c\u7684\u641c\u7d22\u76ee\u5f55\u4e2d\u3002\u8fd9\u662f\u4e00\u4e2a\u5f88\u7075\u6d3b\u7684\u529f\u80fd\u3002\u5b83\u7684\u4f7f\u7528\u65b9\u6cd5\u6709\u4e09\u79cd\uff1a vpath pattern directories \u4e3a\u7b26\u5408\u6a21\u5f0f \u7684\u6587\u4ef6\u6307\u5b9a\u641c\u7d22\u76ee\u5f55 \u3002 vpath pattern \u6e05\u9664\u7b26\u5408\u6a21\u5f0f \u7684\u6587\u4ef6\u7684\u641c\u7d22\u76ee\u5f55\u3002 vpath \u6e05\u9664\u6240\u6709\u5df2\u88ab\u8bbe\u7f6e\u597d\u4e86\u7684\u6587\u4ef6\u641c\u7d22\u76ee\u5f55\u3002 vapth\u4f7f\u7528\u65b9\u6cd5\u4e2d\u7684 \u9700\u8981\u5305\u542b % \u5b57\u7b26\u3002 % \u7684\u610f\u601d\u662f\u5339\u914d\u96f6\u6216\u82e5\u5e72\u5b57\u7b26\uff0c\uff08\u9700\u5f15\u7528 % \uff0c\u4f7f\u7528 \\ \uff09\u4f8b\u5982\uff0c %.h \u8868\u793a\u6240\u6709\u4ee5 .h \u7ed3\u5c3e\u7684\u6587\u4ef6\u3002 \u6307\u5b9a\u4e86\u8981\u641c\u7d22\u7684\u6587\u4ef6\u96c6\uff0c\u800c \u5219\u6307\u5b9a\u4e86 pattern \u7684\u6587\u4ef6\u96c6\u7684\u641c\u7d22\u7684\u76ee\u5f55\u3002\u4f8b\u5982\uff1a .. code:: makefile vpath %.h ../headers \u8be5\u8bed\u53e5\u8868\u793a\uff0c\u8981\u6c42make\u5728\u201c../headers\u201d\u76ee\u5f55\u4e0b\u641c\u7d22\u6240\u6709\u4ee5 .h \u7ed3\u5c3e\u7684\u6587\u4ef6\u3002\uff08\u5982\u679c\u67d0\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u6ca1\u6709\u627e\u5230\u7684\u8bdd\uff09 \u6211\u4eec\u53ef\u4ee5\u8fde\u7eed\u5730\u4f7f\u7528vpath\u8bed\u53e5\uff0c\u4ee5\u6307\u5b9a\u4e0d\u540c\u641c\u7d22\u7b56\u7565\u3002\u5982\u679c\u8fde\u7eed\u7684vpath\u8bed\u53e5\u4e2d\u51fa\u73b0\u4e86\u76f8\u540c\u7684 \uff0c\u6216\u662f\u88ab\u91cd\u590d\u4e86\u7684 \uff0c\u90a3\u4e48\uff0cmake\u4f1a\u6309\u7167vpath\u8bed\u53e5\u7684\u5148\u540e\u987a\u5e8f\u6765\u6267\u884c\u641c\u7d22\u3002\u5982\uff1a .. code:: makefile vpath %.c foo vpath % blish vpath %.c bar \u5176\u8868\u793a .c \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u5148\u5728\u201cfoo\u201d\u76ee\u5f55\uff0c\u7136\u540e\u662f\u201cblish\u201d\uff0c\u6700\u540e\u662f\u201cbar\u201d\u76ee\u5f55\u3002 .. code:: makefile vpath %.c foo:bar vpath % blish \u800c\u4e0a\u9762\u7684\u8bed\u53e5\u5219\u8868\u793a .c \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u5148\u5728\u201cfoo\u201d\u76ee\u5f55\uff0c\u7136\u540e\u662f\u201cbar\u201d\u76ee\u5f55\uff0c\u6700\u540e\u624d\u662f\u201cblish\u201d\u76ee\u5f55\u3002","title":"\u6587\u4ef6\u641c\u5bfb"},{"location":"makefile/rules/#_5","text":"\u6700\u65e9\u5148\u7684\u4e00\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u63d0\u5230\u8fc7\u4e00\u4e2a\u201cclean\u201d\u7684\u76ee\u6807\uff0c\u8fd9\u662f\u4e00\u4e2a\u201c\u4f2a\u76ee\u6807\u201d\uff0c .. code:: makefile clean : rm *. o temp \u6b63\u50cf\u6211\u4eec\u524d\u9762\u4f8b\u5b50\u4e2d\u7684\u201cclean\u201d\u4e00\u6837\uff0c\u65e2\u7136\u6211\u4eec\u751f\u6210\u4e86\u8bb8\u591a\u6587\u4ef6\u7f16\u8bd1\u6587\u4ef6\uff0c\u6211\u4eec\u4e5f\u5e94\u8be5\u63d0\u4f9b\u4e00\u4e2a\u6e05\u9664\u5b83\u4eec\u7684\u201c\u76ee\u6807\u201d\u4ee5\u5907\u5b8c\u6574\u5730\u91cd\u7f16\u8bd1\u800c\u7528\u3002 \uff08\u4ee5\u201cmake clean\u201d\u6765\u4f7f\u7528\u8be5\u76ee\u6807\uff09 \u56e0\u4e3a\uff0c\u6211\u4eec\u5e76\u4e0d\u751f\u6210\u201cclean\u201d\u8fd9\u4e2a\u6587\u4ef6\u3002\u201c\u4f2a\u76ee\u6807\u201d\u5e76\u4e0d\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u53ea\u662f\u4e00\u4e2a\u6807\u7b7e\uff0c\u7531\u4e8e\u201c\u4f2a\u76ee\u6807\u201d\u4e0d\u662f\u6587\u4ef6\uff0c\u6240\u4ee5make\u65e0\u6cd5\u751f\u6210\u5b83\u7684\u4f9d\u8d56\u5173\u7cfb\u548c\u51b3\u5b9a\u5b83\u662f\u5426\u8981\u6267\u884c\u3002\u6211\u4eec\u53ea\u6709\u901a\u8fc7\u663e\u5f0f\u5730\u6307\u660e\u8fd9\u4e2a\u201c\u76ee\u6807\u201d\u624d\u80fd\u8ba9\u5176\u751f\u6548\u3002\u5f53\u7136\uff0c\u201c\u4f2a\u76ee\u6807\u201d\u7684\u53d6\u540d\u4e0d\u80fd\u548c\u6587\u4ef6\u540d\u91cd\u540d\uff0c\u4e0d\u7136\u5176\u5c31\u5931\u53bb\u4e86\u201c\u4f2a\u76ee\u6807\u201d\u7684\u610f\u4e49\u4e86\u3002 \u5f53\u7136\uff0c\u4e3a\u4e86\u907f\u514d\u548c\u6587\u4ef6\u91cd\u540d\u7684\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u8bb0\u201c.PHONY\u201d\u6765\u663e\u5f0f\u5730\u6307\u660e\u4e00\u4e2a\u76ee\u6807\u662f\u201c\u4f2a\u76ee\u6807\u201d\uff0c\u5411make\u8bf4\u660e\uff0c\u4e0d\u7ba1\u662f\u5426\u6709\u8fd9\u4e2a\u6587\u4ef6\uff0c\u8fd9\u4e2a\u76ee\u6807\u5c31\u662f\u201c\u4f2a\u76ee\u6807\u201d\u3002 .. code:: makefile .PHONY : clean \u53ea\u8981\u6709\u8fd9\u4e2a\u58f0\u660e\uff0c\u4e0d\u7ba1\u662f\u5426\u6709\u201cclean\u201d\u6587\u4ef6\uff0c\u8981\u8fd0\u884c\u201cclean\u201d\u8fd9\u4e2a\u76ee\u6807\uff0c\u53ea\u6709\u201cmake clean\u201d\u8fd9\u6837\u3002\u4e8e\u662f\u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a .. code:: makefile .PHONY : clean clean : rm *. o temp \u4f2a\u76ee\u6807\u4e00\u822c\u6ca1\u6709\u4f9d\u8d56\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4e3a\u4f2a\u76ee\u6807\u6307\u5b9a\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\u3002\u4f2a\u76ee\u6807\u540c\u6837\u53ef\u4ee5\u4f5c\u4e3a\u201c\u9ed8\u8ba4\u76ee\u6807\u201d\uff0c\u53ea\u8981\u5c06\u5176\u653e\u5728\u7b2c\u4e00\u4e2a\u3002\u4e00\u4e2a\u793a\u4f8b\u5c31\u662f\uff0c\u5982\u679c\u4f60\u7684Makefile\u9700\u8981\u4e00\u53e3\u6c14\u751f\u6210\u82e5\u5e72\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u4f46\u4f60\u53ea\u60f3\u7b80\u5355\u5730\u6572\u4e00\u4e2amake\u5b8c\u4e8b\uff0c\u5e76\u4e14\uff0c\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u90fd\u5199\u5728\u4e00\u4e2aMakefile\u4e2d\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u201c\u4f2a\u76ee\u6807\u201d\u8fd9\u4e2a\u7279\u6027\uff1a .. code:: makefile all : prog1 prog2 prog3 . PHONY : all prog1 : prog1 . o utils . o cc - o prog1 prog1 . o utils . o prog2 : prog2 . o cc - o prog2 prog2 . o prog3 : prog3 . o sort . o utils . o cc - o prog3 prog3 . o sort . o utils . o \u6211\u4eec\u77e5\u9053\uff0cMakefile\u4e2d\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u4f1a\u88ab\u4f5c\u4e3a\u5176\u9ed8\u8ba4\u76ee\u6807\u3002\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u201call\u201d\u7684\u4f2a\u76ee\u6807\uff0c\u5176\u4f9d\u8d56\u4e8e\u5176\u5b83\u4e09\u4e2a\u76ee\u6807\u3002\u7531\u4e8e\u9ed8\u8ba4\u76ee\u6807\u7684\u7279\u6027\u662f\uff0c\u603b\u662f\u88ab\u6267\u884c\u7684\uff0c\u4f46\u7531\u4e8e\u201call\u201d\u53c8\u662f\u4e00\u4e2a\u4f2a\u76ee\u6807\uff0c\u4f2a\u76ee\u6807\u53ea\u662f\u4e00\u4e2a\u6807\u7b7e\u4e0d\u4f1a\u751f\u6210\u6587\u4ef6\uff0c\u6240\u4ee5\u4e0d\u4f1a\u6709\u201call\u201d\u6587\u4ef6\u4ea7\u751f\u3002\u4e8e\u662f\uff0c\u5176\u5b83\u4e09\u4e2a\u76ee\u6807\u7684\u89c4\u5219\u603b\u662f\u4f1a\u88ab\u51b3\u8bae\u3002\u4e5f\u5c31\u8fbe\u5230\u4e86\u6211\u4eec\u4e00\u53e3\u6c14\u751f\u6210\u591a\u4e2a\u76ee\u6807\u7684\u76ee\u7684\u3002 .PHONY : all \u58f0\u660e\u4e86\u201call\u201d\u8fd9\u4e2a\u76ee\u6807\u4e3a\u201c\u4f2a\u76ee\u6807\u201d\u3002\uff08\u6ce8\uff1a\u8fd9\u91cc\u7684\u663e\u5f0f \u201c.PHONY : all\u201d \u4e0d\u5199\u7684\u8bdd\u4e00\u822c\u60c5\u51b5\u4e5f\u53ef\u4ee5\u6b63\u786e\u7684\u6267\u884c\uff0c\u8fd9\u6837make\u53ef\u901a\u8fc7\u9690\u5f0f\u89c4\u5219\u63a8\u5bfc\u51fa\uff0c \u201call\u201d \u662f\u4e00\u4e2a\u4f2a\u76ee\u6807\uff0c\u6267\u884cmake\u4e0d\u4f1a\u751f\u6210\u201call\u201d\u6587\u4ef6\uff0c\u800c\u6267\u884c\u540e\u9762\u7684\u591a\u4e2a\u76ee\u6807\u3002\u5efa\u8bae\uff1a\u663e\u5f0f\u5199\u51fa\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\u3002\uff09 \u968f\u4fbf\u63d0\u4e00\u53e5\uff0c\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u76ee\u6807\u4e5f\u53ef\u4ee5\u6210\u4e3a\u4f9d\u8d56\u3002\u6240\u4ee5\uff0c\u4f2a\u76ee\u6807\u540c\u6837\u4e5f\u53ef\u6210\u4e3a\u4f9d\u8d56\u3002\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a .. code:: makefile .PHONY : cleanall cleanobj cleandiff cleanall : cleanobj cleandiff rm program cleanobj : rm *. o cleandiff : rm *. diff \u201cmake cleanall\u201d\u5c06\u6e05\u9664\u6240\u6709\u8981\u88ab\u6e05\u9664\u7684\u6587\u4ef6\u3002\u201ccleanobj\u201d\u548c\u201ccleandiff\u201d\u8fd9\u4e24\u4e2a\u4f2a\u76ee\u6807\u6709\u70b9\u50cf\u201c\u5b50\u7a0b\u5e8f\u201d\u7684\u610f\u601d\u3002\u6211\u4eec\u53ef\u4ee5\u8f93\u5165\u201cmake cleanall\u201d\u548c\u201cmake cleanobj\u201d\u548c\u201cmake cleandiff\u201d\u547d\u4ee4\u6765\u8fbe\u5230\u6e05\u9664\u4e0d\u540c\u79cd\u7c7b\u6587\u4ef6\u7684\u76ee\u7684\u3002","title":"\u4f2a\u76ee\u6807"},{"location":"makefile/rules/#_6","text":"Makefile\u7684\u89c4\u5219\u4e2d\u7684\u76ee\u6807\u53ef\u4ee5\u4e0d\u6b62\u4e00\u4e2a\uff0c\u5176\u652f\u6301\u591a\u76ee\u6807\uff0c\u6709\u53ef\u80fd\u6211\u4eec\u7684\u591a\u4e2a\u76ee\u6807\u540c\u65f6\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u6587\u4ef6\uff0c\u5e76\u4e14\u5176\u751f\u6210\u7684\u547d\u4ee4\u5927\u4f53\u7c7b\u4f3c\u3002\u4e8e\u662f\u6211\u4eec\u5c31\u80fd\u628a\u5176\u5408\u5e76\u8d77\u6765\u3002\u5f53\u7136\uff0c\u591a\u4e2a\u76ee\u6807\u7684\u751f\u6210\u89c4\u5219\u7684\u6267\u884c\u547d\u4ee4\u4e0d\u662f\u540c\u4e00\u4e2a\uff0c\u8fd9\u53ef\u80fd\u4f1a\u7ed9\u6211\u4eec\u5e26\u6765\u9ebb\u70e6\uff0c\u4e0d\u8fc7\u597d\u5728\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u81ea\u52a8\u5316\u53d8\u91cf $@ \uff08\u5173\u4e8e\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\uff09\uff0c\u8fd9\u4e2a\u53d8\u91cf\u8868\u793a\u7740\u76ee\u524d\u89c4\u5219\u4e2d\u6240\u6709\u7684\u76ee\u6807\u7684\u96c6\u5408\uff0c\u8fd9\u6837\u8bf4\u53ef\u80fd\u5f88\u62bd\u8c61\uff0c\u8fd8\u662f\u770b\u4e00\u4e2a\u4f8b\u5b50\u5427\u3002 .. code:: makefile bigoutput littleoutput : text.g generate text.g -$(subst output,,$@) gt; $@ \u4e0a\u8ff0\u89c4\u5219\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile bigoutput : text . g generate text . g - big gt ; bigoutput littleoutput : text . g generate text . g - little gt ; littleoutput \u5176\u4e2d\uff0c -$(subst output,,$@) \u4e2d\u7684 $ \u8868\u793a\u6267\u884c\u4e00\u4e2aMakefile\u7684\u51fd\u6570\uff0c\u51fd\u6570\u540d\u4e3asubst\uff0c\u540e\u9762\u7684\u4e3a\u53c2\u6570\u3002\u5173\u4e8e\u51fd\u6570\uff0c\u5c06\u5728\u540e\u9762\u8bb2\u8ff0\u3002\u8fd9\u91cc\u7684\u8fd9\u4e2a\u51fd\u6570\u662f\u66ff\u6362\u5b57\u7b26\u4e32\u7684\u610f\u601d\uff0c $@ \u8868\u793a\u76ee\u6807\u7684\u96c6\u5408\uff0c\u5c31\u50cf\u4e00\u4e2a\u6570\u7ec4\uff0c $@ \u4f9d\u6b21\u53d6\u51fa\u76ee\u6807\uff0c\u5e76\u6267\u4e8e\u547d\u4ee4\u3002","title":"\u591a\u76ee\u6807"},{"location":"makefile/rules/#_7","text":"\u9759\u6001\u6a21\u5f0f\u53ef\u4ee5\u66f4\u52a0\u5bb9\u6613\u5730\u5b9a\u4e49\u591a\u76ee\u6807\u7684\u89c4\u5219\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u7684\u89c4\u5219\u53d8\u5f97\u66f4\u52a0\u7684\u6709\u5f39\u6027\u548c\u7075\u6d3b\u3002\u6211\u4eec\u8fd8\u662f\u5148\u6765\u770b\u4e00\u4e0b\u8bed\u6cd5\uff1a .. code:: makefile lt;targets ... gt; : lt;target-pattern gt; : lt;prereq-patterns ... gt; lt;commands gt; ... targets\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u901a\u914d\u7b26\u3002\u662f\u76ee\u6807\u7684\u4e00\u4e2a\u96c6\u5408\u3002 target-parrtern\u662f\u6307\u660e\u4e86targets\u7684\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u7684\u76ee\u6807\u96c6\u6a21\u5f0f\u3002 prereq-parrterns\u662f\u76ee\u6807\u7684\u4f9d\u8d56\u6a21\u5f0f\uff0c\u5b83\u5bf9target-parrtern\u5f62\u6210\u7684\u6a21\u5f0f\u518d\u8fdb\u884c\u4e00\u6b21\u4f9d\u8d56\u76ee\u6807\u7684\u5b9a\u4e49\u3002 \u8fd9\u6837\u63cf\u8ff0\u8fd9\u4e09\u4e2a\u4e1c\u897f\uff0c\u53ef\u80fd\u8fd8\u662f\u6ca1\u6709\u8bf4\u6e05\u695a\uff0c\u8fd8\u662f\u4e3e\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u4e00\u4e0b\u5427\u3002\u5982\u679c\u6211\u4eec\u7684 \u5b9a\u4e49\u6210 %.o \uff0c\u610f\u601d\u662f\u6211\u4eec\u7684 ;\u96c6\u5408\u4e2d\u90fd\u662f\u4ee5 .o \u7ed3\u5c3e\u7684\uff0c\u800c\u5982\u679c\u6211\u4eec\u7684 \u5b9a\u4e49\u6210 %.c \uff0c\u610f\u601d\u662f\u5bf9 \u6240\u5f62\u6210\u7684\u76ee\u6807\u96c6\u8fdb\u884c\u4e8c\u6b21\u5b9a\u4e49\uff0c\u5176\u8ba1\u7b97\u65b9\u6cd5\u662f\uff0c\u53d6 \u6a21\u5f0f\u4e2d\u7684 % \uff08\u4e5f\u5c31\u662f\u53bb\u6389\u4e86 .o \u8fd9\u4e2a\u7ed3\u5c3e\uff09\uff0c\u5e76\u4e3a\u5176\u52a0\u4e0a .c \u8fd9\u4e2a\u7ed3\u5c3e\uff0c\u5f62\u6210\u7684\u65b0\u96c6\u5408\u3002 \u6240\u4ee5\uff0c\u6211\u4eec\u7684\u201c\u76ee\u6807\u6a21\u5f0f\u201d\u6216\u662f\u201c\u4f9d\u8d56\u6a21\u5f0f\u201d\u4e2d\u90fd\u5e94\u8be5\u6709 % \u8fd9\u4e2a\u5b57\u7b26\uff0c\u5982\u679c\u4f60\u7684\u6587\u4ef6\u540d\u4e2d\u6709 % \u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u53cd\u659c\u6760 \\ \u8fdb\u884c\u8f6c\u4e49\uff0c\u6765\u6807\u660e\u771f\u5b9e\u7684 % \u5b57\u7b26\u3002 \u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile objects = foo.o bar.o all : $( objects ) $(objects) : %. o : %. c $( CC ) -c $( CFLAGS ) $ lt ; -o $@ \u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6307\u660e\u4e86\u6211\u4eec\u7684\u76ee\u6807\u4ece$object\u4e2d\u83b7\u53d6\uff0c %.o \u8868\u660e\u8981\u6240\u6709\u4ee5 .o \u7ed3\u5c3e\u7684\u76ee\u6807\uff0c\u4e5f\u5c31\u662f foo.o bar.o \uff0c\u4e5f\u5c31\u662f\u53d8\u91cf $object \u96c6\u5408\u7684\u6a21\u5f0f\uff0c\u800c\u4f9d\u8d56\u6a21\u5f0f %.c \u5219\u53d6\u6a21\u5f0f %.o \u7684 % \uff0c\u4e5f\u5c31\u662f foo bar \uff0c\u5e76\u4e3a\u5176\u52a0\u4e0b .c \u7684\u540e\u7f00\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u7684\u4f9d\u8d56\u76ee\u6807\u5c31\u662f foo.c bar.c \u3002\u800c\u547d\u4ee4\u4e2d\u7684 $ \u548c $@ \u5219\u662f\u81ea\u52a8\u5316\u53d8\u91cf\uff0c $ \u8868\u793a\u6240\u6709\u7684\u4f9d\u8d56\u76ee\u6807\u96c6\uff08\u4e5f\u5c31\u662f foo.c bar.c \uff09\uff0c $@ \u8868\u793a\u76ee\u6807\u96c6\uff08\u4e5f\u5c31\u662f\u201cfoo.o bar.o\u201d\uff09\u3002\u4e8e\u662f\uff0c\u4e0a\u9762\u7684\u89c4\u5219\u5c55\u5f00\u540e\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u89c4\u5219\uff1a .. code:: makefile foo.o : foo . c $( CC ) -c $( CFLAGS ) foo.c -o foo.o bar.o : bar . c $( CC ) -c $( CFLAGS ) bar.c -o bar.o \u8bd5\u60f3\uff0c\u5982\u679c\u6211\u4eec\u7684 %.o \u6709\u51e0\u767e\u4e2a\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u7528\u8fd9\u79cd\u5f88\u7b80\u5355\u7684\u201c\u9759\u6001\u6a21\u5f0f\u89c4\u5219\u201d\u5c31\u53ef\u4ee5\u5199\u5b8c\u4e00\u5806\u89c4\u5219\uff0c\u5b9e\u5728\u662f\u592a\u6709\u6548\u7387\u4e86\u3002\u201c\u9759\u6001\u6a21\u5f0f\u89c4\u5219\u201d\u7684\u7528\u6cd5\u5f88\u7075\u6d3b\uff0c\u5982\u679c\u7528\u5f97\u597d\uff0c\u90a3\u4f1a\u662f\u4e00\u4e2a\u5f88\u5f3a\u5927\u7684\u529f\u80fd\u3002\u518d\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile files = foo.elc bar.o lose.o $(filter %.o,$(files)) : %. o : %. c $( CC ) -c $( CFLAGS ) $ lt ; -o $@ $(filter %.elc,$(files)) : %. elc : %. el emacs -f batch-byte-compile $ lt ; $(filter %.o,$(files))\u8868\u793a\u8c03\u7528Makefile\u7684filter\u51fd\u6570\uff0c\u8fc7\u6ee4\u201c$files\u201d\u96c6\uff0c\u53ea\u8981\u5176\u4e2d\u6a21\u5f0f\u4e3a\u201c%.o\u201d\u7684\u5185\u5bb9\u3002\u5176\u5b83\u7684\u5185\u5bb9\uff0c\u6211\u5c31\u4e0d\u7528\u591a\u8bf4\u4e86\u5427\u3002\u8fd9\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86Makefile\u4e2d\u66f4\u5927\u7684\u5f39\u6027\u3002","title":"\u9759\u6001\u6a21\u5f0f"},{"location":"makefile/rules/#_8","text":"\u5728Makefile\u4e2d\uff0c\u6211\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u53ef\u80fd\u4f1a\u9700\u8981\u5305\u542b\u4e00\u7cfb\u5217\u7684\u5934\u6587\u4ef6\uff0c\u6bd4\u5982\uff0c\u5982\u679c\u6211\u4eec\u7684main.c\u4e2d\u6709\u4e00\u53e5 #include \"defs.h\" \uff0c\u90a3\u4e48\u6211\u4eec\u7684\u4f9d\u8d56\u5173\u7cfb\u5e94\u8be5\u662f\uff1a .. code:: makefile main.o : main.c defs.h \u4f46\u662f\uff0c\u5982\u679c\u662f\u4e00\u4e2a\u6bd4\u8f83\u5927\u578b\u7684\u5de5\u7a0b\uff0c\u4f60\u5fc5\u9700\u6e05\u695a\u54ea\u4e9bC\u6587\u4ef6\u5305\u542b\u4e86\u54ea\u4e9b\u5934\u6587\u4ef6\uff0c\u5e76\u4e14\uff0c\u4f60\u5728\u52a0\u5165\u6216\u5220\u9664\u5934\u6587\u4ef6\u65f6\uff0c\u4e5f\u9700\u8981\u5c0f\u5fc3\u5730\u4fee\u6539Makefile\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u6ca1\u6709\u7ef4\u62a4\u6027\u7684\u5de5\u4f5c\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u7e41\u91cd\u800c\u53c8\u5bb9\u6613\u51fa\u9519\u7684\u4e8b\u60c5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528C/C++\u7f16\u8bd1\u7684\u4e00\u4e2a\u529f\u80fd\u3002\u5927\u591a\u6570\u7684C/C++\u7f16\u8bd1\u5668\u90fd\u652f\u6301\u4e00\u4e2a\u201c-M\u201d\u7684\u9009\u9879\uff0c\u5373\u81ea\u52a8\u627e\u5bfb\u6e90\u6587\u4ef6\u4e2d\u5305\u542b\u7684\u5934\u6587\u4ef6\uff0c\u5e76\u751f\u6210\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4: :: cc -M main.c \u5176\u8f93\u51fa\u662f\uff1a .. code:: makefile main.o : main.c defs.h \u4e8e\u662f\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u4f60\u5c31\u4e0d\u5fc5\u518d\u624b\u52a8\u4e66\u5199\u82e5\u5e72\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u800c\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u4e86\u3002\u9700\u8981\u63d0\u9192\u4e00\u53e5\u7684\u662f\uff0c\u5982\u679c\u4f60\u4f7f\u7528GNU\u7684C/C++\u7f16\u8bd1\u5668\uff0c\u4f60\u5f97\u7528 -MM \u53c2\u6570\uff0c\u4e0d\u7136\uff0c -M \u53c2\u6570\u4f1a\u628a\u4e00\u4e9b\u6807\u51c6\u5e93\u7684\u5934\u6587\u4ef6\u4e5f\u5305\u542b\u8fdb\u6765\u3002 gcc -M main.c\u7684\u8f93\u51fa\u662f: :: main.o: main.c defs.h /usr/include/stdio.h /usr/include/features.h \\ /usr/include/sys/cdefs.h /usr/include/gnu/stubs.h \\ /usr/lib/gcc-lib/i486-suse-linux/2.95.3/include/stddef.h \\ /usr/include/bits/types.h /usr/include/bits/pthreadtypes.h \\ /usr/include/bits/sched.h /usr/include/libio.h \\ /usr/include/_G_config.h /usr/include/wchar.h \\ /usr/include/bits/wchar.h /usr/include/gconv.h \\ /usr/lib/gcc-lib/i486-suse-linux/2.95.3/include/stdarg.h \\ /usr/include/bits/stdio_lim.h gcc -MM main.c\u7684\u8f93\u51fa\u5219\u662f: :: main.o: main.c defs.h \u90a3\u4e48\uff0c\u7f16\u8bd1\u5668\u7684\u8fd9\u4e2a\u529f\u80fd\u5982\u4f55\u4e0e\u6211\u4eec\u7684Makefile\u8054\u7cfb\u5728\u4e00\u8d77\u5462\u3002\u56e0\u4e3a\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u7684Makefile\u4e5f\u8981\u6839\u636e\u8fd9\u4e9b\u6e90\u6587\u4ef6\u91cd\u65b0\u751f\u6210\uff0c\u8ba9 Makefile\u81ea\u5df2\u4f9d\u8d56\u4e8e\u6e90\u6587\u4ef6\uff1f\u8fd9\u4e2a\u529f\u80fd\u5e76\u4e0d\u73b0\u5b9e\uff0c\u4e0d\u8fc7\u6211\u4eec\u53ef\u4ee5\u6709\u5176\u5b83\u624b\u6bb5\u6765\u8fc2\u56de\u5730\u5b9e\u73b0\u8fd9\u4e00\u529f\u80fd\u3002GNU\u7ec4\u7ec7\u5efa\u8bae\u628a\u7f16\u8bd1\u5668\u4e3a\u6bcf\u4e00\u4e2a\u6e90\u6587\u4ef6\u7684\u81ea\u52a8\u751f\u6210\u7684\u4f9d\u8d56\u5173\u7cfb\u653e\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u4e3a\u6bcf\u4e00\u4e2a name.c \u7684\u6587\u4ef6\u90fd\u751f\u6210\u4e00\u4e2a name.d \u7684Makefile\u6587\u4ef6\uff0c .d \u6587\u4ef6\u4e2d\u5c31\u5b58\u653e\u5bf9\u5e94 .c \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u3002 \u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa .c \u6587\u4ef6\u548c .d \u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e76\u8ba9make\u81ea\u52a8\u66f4\u65b0\u6216\u751f\u6210 .d \u6587\u4ef6\uff0c\u5e76\u628a\u5176\u5305\u542b\u5728\u6211\u4eec\u7684\u4e3bMakefile\u4e2d\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u81ea\u52a8\u5316\u5730\u751f\u6210\u6bcf\u4e2a\u6587\u4ef6\u7684\u4f9d\u8d56\u5173\u7cfb\u4e86\u3002 \u8fd9\u91cc\uff0c\u6211\u4eec\u7ed9\u51fa\u4e86\u4e00\u4e2a\u6a21\u5f0f\u89c4\u5219\u6765\u4ea7\u751f .d \u6587\u4ef6\uff1a .. code:: makefile %.d: %.c @ set - e ; rm - f $ @; \\ $ ( CC ) - M $ ( CPPFLAGS ) $ lt ; gt ;; $ @. $$$$ ; \\ sed s,\\($*\\)\\.o[ :]*,\\1.o $@ : ,g lt ; $ @. $$$$ gt ;; $ @; \\ rm - f $ @. $$$$ \u8fd9\u4e2a\u89c4\u5219\u7684\u610f\u601d\u662f\uff0c\u6240\u6709\u7684 .d \u6587\u4ef6\u4f9d\u8d56\u4e8e .c \u6587\u4ef6\uff0c rm -f $@ \u7684\u610f\u601d\u662f\u5220\u9664\u6240\u6709\u7684\u76ee\u6807\uff0c\u4e5f\u5c31\u662f .d \u6587\u4ef6\uff0c\u7b2c\u4e8c\u884c\u7684\u610f\u601d\u662f\uff0c\u4e3a\u6bcf\u4e2a\u4f9d\u8d56\u6587\u4ef6 $ \uff0c\u4e5f\u5c31\u662f .c \u6587\u4ef6\u751f\u6210\u4f9d\u8d56\u6587\u4ef6\uff0c $@ \u8868\u793a\u6a21\u5f0f %.d \u6587\u4ef6\uff0c\u5982\u679c\u6709\u4e00\u4e2aC\u6587\u4ef6\u662fname.c\uff0c\u90a3\u4e48 % \u5c31\u662f name \uff0c $$$$ \u610f\u4e3a\u4e00\u4e2a\u968f\u673a\u7f16\u53f7\uff0c\u7b2c\u4e8c\u884c\u751f\u6210\u7684\u6587\u4ef6\u6709\u53ef\u80fd\u662f\u201cname.d.12345\u201d\uff0c\u7b2c\u4e09\u884c\u4f7f\u7528sed\u547d\u4ee4\u505a\u4e86\u4e00\u4e2a\u66ff\u6362\uff0c\u5173\u4e8esed\u547d\u4ee4\u7684\u7528\u6cd5\u8bf7\u53c2\u770b\u76f8\u5173\u7684\u4f7f\u7528\u6587\u6863\u3002\u7b2c\u56db\u884c\u5c31\u662f\u5220\u9664\u4e34\u65f6\u6587\u4ef6\u3002 \u603b\u800c\u8a00\u4e4b\uff0c\u8fd9\u4e2a\u6a21\u5f0f\u8981\u505a\u7684\u4e8b\u5c31\u662f\u5728\u7f16\u8bd1\u5668\u751f\u6210\u7684\u4f9d\u8d56\u5173\u7cfb\u4e2d\u52a0\u5165 .d \u6587\u4ef6\u7684\u4f9d\u8d56\uff0c\u5373\u628a\u4f9d\u8d56\u5173\u7cfb\uff1a .. code:: makefile main.o : main.c defs.h \u8f6c\u6210\uff1a .. code:: makefile main.o main.d : main.c defs.h \u4e8e\u662f\uff0c\u6211\u4eec\u7684 .d \u6587\u4ef6\u4e5f\u4f1a\u81ea\u52a8\u66f4\u65b0\u4e86\uff0c\u5e76\u4f1a\u81ea\u52a8\u751f\u6210\u4e86\uff0c\u5f53\u7136\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5728\u8fd9\u4e2a .d \u6587\u4ef6\u4e2d\u52a0\u5165\u7684\u4e0d\u53ea\u662f\u4f9d\u8d56\u5173\u7cfb\uff0c\u5305\u62ec\u751f\u6210\u7684\u547d\u4ee4\u4e5f\u53ef\u4e00\u5e76\u52a0\u5165\uff0c\u8ba9\u6bcf\u4e2a .d \u6587\u4ef6\u90fd\u5305\u542b\u4e00\u4e2a\u5b8c\u8d56\u7684\u89c4\u5219\u3002\u4e00\u65e6\u6211\u4eec\u5b8c\u6210\u8fd9\u4e2a\u5de5\u4f5c\uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u8981\u628a\u8fd9\u4e9b\u81ea\u52a8\u751f\u6210\u7684\u89c4\u5219\u653e\u8fdb\u6211\u4eec\u7684\u4e3bMakefile\u4e2d\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Makefile\u7684\u201cinclude\u201d\u547d\u4ee4\uff0c\u6765\u5f15\u5165\u522b\u7684Makefile\u6587\u4ef6\uff08\u524d\u9762\u8bb2\u8fc7\uff09\uff0c\u4f8b\u5982\uff1a .. code:: makefile sources = foo.c bar.c include $(sources:.c=.d) \u4e0a\u8ff0\u8bed\u53e5\u4e2d\u7684 $(sources:.c=.d) \u4e2d\u7684 .c=.d \u7684\u610f\u601d\u662f\u505a\u4e00\u4e2a\u66ff\u6362\uff0c\u628a\u53d8\u91cf $(sources) \u6240\u6709 .c \u7684\u5b57\u4e32\u90fd\u66ff\u6362\u6210 .d \uff0c\u5173\u4e8e\u8fd9\u4e2a\u201c\u66ff\u6362\u201d\u7684\u5185\u5bb9\uff0c\u5728\u540e\u9762\u6211\u4f1a\u6709\u66f4\u4e3a\u8be6\u7ec6\u7684\u8bb2\u8ff0\u3002\u5f53\u7136\uff0c\u4f60\u5f97\u6ce8\u610f\u6b21\u5e8f\uff0c\u56e0\u4e3ainclude\u662f\u6309\u6b21\u5e8f\u6765\u8f7d\u5165\u6587\u4ef6\uff0c\u6700\u5148\u8f7d\u5165\u7684 .d \u6587\u4ef6\u4e2d\u7684\u76ee\u6807\u4f1a\u6210\u4e3a\u9ed8\u8ba4\u76ee\u6807\u3002","title":"\u81ea\u52a8\u751f\u6210\u4f9d\u8d56\u6027"},{"location":"makefile/variables/","text":"======== \u4f7f\u7528\u53d8\u91cf ======== \u5728Makefile\u4e2d\u7684\u5b9a\u4e49\u7684\u53d8\u91cf\uff0c\u5c31\u50cf\u662fC/C++\u8bed\u8a00\u4e2d\u7684\u5b8f\u4e00\u6837\uff0c\u4ed6\u4ee3\u8868\u4e86\u4e00\u4e2a\u6587\u672c\u5b57\u4e32\uff0c\u5728Makefile\u4e2d\u6267\u884c\u7684\u65f6\u5019\u5176\u4f1a\u81ea\u52a8\u539f\u6a21\u539f\u6837\u5730\u5c55\u5f00\u5728\u6240\u4f7f\u7528\u7684\u5730\u65b9\u3002\u5176\u4e0eC/C++\u6240\u4e0d\u540c\u7684\u662f\uff0c\u4f60\u53ef\u4ee5\u5728Makefile\u4e2d\u6539\u53d8\u5176\u503c\u3002\u5728Makefile\u4e2d\uff0c\u53d8\u91cf\u53ef\u4ee5\u4f7f\u7528\u5728\u201c\u76ee\u6807\u201d\uff0c\u201c\u4f9d\u8d56\u76ee\u6807\u201d\uff0c \u201c\u547d\u4ee4\u201d\u6216\u662fMakefile\u7684\u5176\u5b83\u90e8\u5206\u4e2d\u3002 \u53d8\u91cf\u7684\u547d\u540d\u5b57\u53ef\u4ee5\u5305\u542b\u5b57\u7b26\u3001\u6570\u5b57\uff0c\u4e0b\u5212\u7ebf\uff08\u53ef\u4ee5\u662f\u6570\u5b57\u5f00\u5934\uff09\uff0c\u4f46\u4e0d\u5e94\u8be5\u542b\u6709 : \u3001 # \u3001 = \u6216\u662f\u7a7a\u5b57\u7b26\uff08\u7a7a\u683c\u3001\u56de\u8f66\u7b49\uff09\u3002\u53d8\u91cf\u662f\u5927\u5c0f\u5199\u654f\u611f\u7684\uff0c\u201cfoo\u201d\u3001\u201cFoo\u201d\u548c\u201cFOO\u201d\u662f\u4e09\u4e2a\u4e0d\u540c\u7684\u53d8\u91cf\u540d\u3002\u4f20\u7edf\u7684Makefile\u7684\u53d8\u91cf\u540d\u662f\u5168\u5927\u5199\u7684\u547d\u540d\u65b9\u5f0f\uff0c\u4f46\u6211\u63a8\u8350\u4f7f\u7528\u5927\u5c0f\u5199\u642d\u914d\u7684\u53d8\u91cf\u540d\uff0c\u5982\uff1a MakeFlags\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u548c\u7cfb\u7edf\u7684\u53d8\u91cf\u51b2\u7a81\uff0c\u800c\u53d1\u751f\u610f\u5916\u7684\u4e8b\u60c5\u3002 \u6709\u4e00\u4e9b\u53d8\u91cf\u662f\u5f88\u5947\u602a\u5b57\u4e32\uff0c\u5982 $ \u3001 $@ \u7b49\uff0c\u8fd9\u4e9b\u662f\u81ea\u52a8\u5316\u53d8\u91cf\uff0c\u6211\u4f1a\u5728\u540e\u9762\u4ecb\u7ecd\u3002 \u53d8\u91cf\u7684\u57fa\u7840 \u53d8\u91cf\u5728\u58f0\u660e\u65f6\u9700\u8981\u7ed9\u4e88\u521d\u503c\uff0c\u800c\u5728\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u7ed9\u5728\u53d8\u91cf\u540d\u524d\u52a0\u4e0a $ \u7b26\u53f7\uff0c\u4f46\u6700\u597d\u7528\u5c0f\u62ec\u53f7 () \u6216\u662f\u5927\u62ec\u53f7 {} \u628a\u53d8\u91cf\u7ed9\u5305\u62ec\u8d77\u6765\u3002\u5982\u679c\u4f60\u8981\u4f7f\u7528\u771f\u5b9e\u7684 $ \u5b57\u7b26\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u7528 $$ \u6765\u8868\u793a\u3002 \u53d8\u91cf\u53ef\u4ee5\u4f7f\u7528\u5728\u8bb8\u591a\u5730\u65b9\uff0c\u5982\u89c4\u5219\u4e2d\u7684\u201c\u76ee\u6807\u201d\u3001\u201c\u4f9d\u8d56\u201d\u3001\u201c\u547d\u4ee4\u201d\u4ee5\u53ca\u65b0\u7684\u53d8\u91cf\u4e2d\u3002\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile objects = program.o foo.o utils.o program : $(objects) cc -o program $(objects) $(objects) : defs.h \u53d8\u91cf\u4f1a\u5728\u4f7f\u7528\u5b83\u7684\u5730\u65b9\u7cbe\u786e\u5730\u5c55\u5f00\uff0c\u5c31\u50cfC/C++\u4e2d\u7684\u5b8f\u4e00\u6837\uff0c\u4f8b\u5982\uff1a .. code:: makefile foo = c prog.o : prog.$(foo) $(foo)$(foo) -$(foo) prog.$(foo) \u5c55\u5f00\u540e\u5f97\u5230\uff1a .. code:: makefile prog.o : prog.c cc -c prog.c \u5f53\u7136\uff0c\u5343\u4e07\u4e0d\u8981\u5728\u4f60\u7684Makefile\u4e2d\u8fd9\u6837\u5e72\uff0c\u8fd9\u91cc\u53ea\u662f\u4e3e\u4e2a\u4f8b\u5b50\u6765\u8868\u660eMakefile\u4e2d\u7684\u53d8\u91cf\u5728\u4f7f\u7528\u5904\u5c55\u5f00\u7684\u771f\u5b9e\u6837\u5b50\u3002\u53ef\u89c1\u5176\u5c31\u662f\u4e00\u4e2a\u201c\u66ff\u4ee3\u201d\u7684\u539f\u7406\u3002 \u53e6\u5916\uff0c\u7ed9\u53d8\u91cf\u52a0\u4e0a\u62ec\u53f7\u5b8c\u5168\u662f\u4e3a\u4e86\u66f4\u52a0\u5b89\u5168\u5730\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u4f60\u4e0d\u60f3\u7ed9\u53d8\u91cf\u52a0\u4e0a\u62ec\u53f7\uff0c\u90a3\u4e5f\u53ef\u4ee5\uff0c\u4f46\u6211\u8fd8\u662f\u5f3a\u70c8\u5efa\u8bae\u4f60\u7ed9\u53d8\u91cf\u52a0\u4e0a\u62ec\u53f7\u3002 \u53d8\u91cf\u4e2d\u7684\u53d8\u91cf \u5728\u5b9a\u4e49\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5176\u5b83\u53d8\u91cf\u6765\u6784\u9020\u53d8\u91cf\u7684\u503c\uff0c\u5728Makefile\u4e2d\u6709\u4e24\u79cd\u65b9\u5f0f\u6765\u5728\u7528\u53d8\u91cf\u5b9a\u4e49\u53d8\u91cf\u7684\u503c\u3002 \u5148\u770b\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u7b80\u5355\u7684\u4f7f\u7528 = \u53f7\uff0c\u5728 = \u5de6\u4fa7\u662f\u53d8\u91cf\uff0c\u53f3\u4fa7\u662f\u53d8\u91cf\u7684\u503c\uff0c\u53f3\u4fa7\u53d8\u91cf\u7684\u503c\u53ef\u4ee5\u5b9a\u4e49\u5728\u6587\u4ef6\u7684\u4efb\u4f55\u4e00\u5904\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53f3\u4fa7\u4e2d\u7684\u53d8\u91cf\u4e0d\u4e00\u5b9a\u975e\u8981\u662f\u5df2\u5b9a\u4e49\u597d\u7684\u503c\uff0c\u5176\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540e\u9762\u5b9a\u4e49\u7684\u503c\u3002\u5982\uff1a .. code:: makefile foo = $(bar) bar = $(ugh) ugh = Huh? all: echo $(foo) \u6211\u4eec\u6267\u884c\u201cmake all\u201d\u5c06\u4f1a\u6253\u51fa\u53d8\u91cf $(foo) \u7684\u503c\u662f Huh? \uff08 $(foo) \u7684\u503c\u662f $(bar) \uff0c $(bar) \u7684\u503c\u662f $(ugh) \uff0c $(ugh) \u7684\u503c\u662f Huh? \uff09\u53ef\u89c1\uff0c\u53d8\u91cf\u662f\u53ef\u4ee5\u4f7f\u7528\u540e\u9762\u7684\u53d8\u91cf\u6765\u5b9a\u4e49\u7684\u3002 \u8fd9\u4e2a\u529f\u80fd\u6709\u597d\u7684\u5730\u65b9\uff0c\u4e5f\u6709\u4e0d\u597d\u7684\u5730\u65b9\uff0c\u597d\u7684\u5730\u65b9\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u53d8\u91cf\u7684\u771f\u5b9e\u503c\u63a8\u5230\u540e\u9762\u6765\u5b9a\u4e49\uff0c\u5982\uff1a .. code:: makefile CFLAGS = $(include_dirs) -O include_dirs = -Ifoo -Ibar \u5f53 CFLAGS \u5728\u547d\u4ee4\u4e2d\u88ab\u5c55\u5f00\u65f6\uff0c\u4f1a\u662f -Ifoo -Ibar -O \u3002\u4f46\u8fd9\u79cd\u5f62\u5f0f\u4e5f\u6709\u4e0d\u597d\u7684\u5730\u65b9\uff0c\u90a3\u5c31\u662f\u9012\u5f52\u5b9a\u4e49\uff0c\u5982\uff1a .. code:: makefile CFLAGS = $( CFLAGS ) -O \u6216\uff1a .. code:: makefile A = $( B ) B = $( A ) \u8fd9\u4f1a\u8ba9make\u9677\u5165\u65e0\u9650\u7684\u53d8\u91cf\u5c55\u5f00\u8fc7\u7a0b\u4e2d\u53bb\uff0c\u5f53\u7136\uff0c\u6211\u4eec\u7684make\u662f\u6709\u80fd\u529b\u68c0\u6d4b\u8fd9\u6837\u7684\u5b9a\u4e49\uff0c\u5e76\u4f1a\u62a5\u9519\u3002\u8fd8\u6709\u5c31\u662f\u5982\u679c\u5728\u53d8\u91cf\u4e2d\u4f7f\u7528\u51fd\u6570\uff0c\u90a3\u4e48\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u8ba9\u6211\u4eec\u7684make\u8fd0\u884c\u65f6\u975e\u5e38\u6162\uff0c\u66f4\u7cdf\u7cd5\u7684\u662f\uff0c\u4ed6\u4f1a\u4f7f\u7528\u5f97\u4e24\u4e2amake\u7684\u51fd\u6570\u201cwildcard\u201d\u548c\u201cshell\u201d\u53d1\u751f\u4e0d\u53ef\u9884\u77e5\u7684\u9519\u8bef\u3002\u56e0\u4e3a\u4f60\u4e0d\u4f1a\u77e5\u9053\u8fd9\u4e24\u4e2a\u51fd\u6570\u4f1a\u88ab\u8c03\u7528\u591a\u5c11\u6b21\u3002 \u4e3a\u4e86\u907f\u514d\u4e0a\u9762\u7684\u8fd9\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528make\u4e2d\u7684\u53e6\u4e00\u79cd\u7528\u53d8\u91cf\u6765\u5b9a\u4e49\u53d8\u91cf\u7684\u65b9\u6cd5\u3002\u8fd9\u79cd\u65b9\u6cd5\u4f7f\u7528\u7684\u662f := \u64cd\u4f5c\u7b26\uff0c\u5982\uff1a .. code:: makefile x := foo y := $(x) bar x := later \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile y := foo bar x := later \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\uff0c\u524d\u9762\u7684\u53d8\u91cf\u4e0d\u80fd\u4f7f\u7528\u540e\u9762\u7684\u53d8\u91cf\uff0c\u53ea\u80fd\u4f7f\u7528\u524d\u9762\u5df2\u5b9a\u4e49\u597d\u4e86\u7684\u53d8\u91cf\u3002\u5982\u679c\u662f\u8fd9\u6837\uff1a .. code:: makefile y := $(x) bar x := foo \u90a3\u4e48\uff0cy\u7684\u503c\u662f\u201cbar\u201d\uff0c\u800c\u4e0d\u662f\u201cfoo bar\u201d\u3002 \u4e0a\u9762\u90fd\u662f\u4e00\u4e9b\u6bd4\u8f83\u7b80\u5355\u7684\u53d8\u91cf\u4f7f\u7528\u4e86\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u590d\u6742\u7684\u4f8b\u5b50\uff0c\u5176\u4e2d\u5305\u62ec\u4e86make\u7684\u51fd\u6570\u3001\u6761\u4ef6\u8868\u8fbe\u5f0f\u548c\u4e00\u4e2a\u7cfb\u7edf\u53d8\u91cf\u201cMAKELEVEL\u201d\u7684\u4f7f\u7528\uff1a .. code:: makefile ifeq (0, ${ MAKELEVEL } ) cur-dir := $(shell pwd) whoami := $(shell whoami) host-type := $(shell arch) MAKE := ${ MAKE } host-type= ${ host - type } whoami= ${ whoami } endif \u5173\u4e8e\u6761\u4ef6\u8868\u8fbe\u5f0f\u548c\u51fd\u6570\uff0c\u6211\u4eec\u5728\u540e\u9762\u518d\u8bf4\uff0c\u5bf9\u4e8e\u7cfb\u7edf\u53d8\u91cf\u201cMAKELEVEL\u201d\uff0c\u5176\u610f\u601d\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684make\u6709\u4e00\u4e2a\u5d4c\u5957\u6267\u884c\u7684\u52a8\u4f5c\uff08\u53c2\u89c1\u524d\u9762\u7684\u201c\u5d4c\u5957\u4f7f\u7528make\u201d\uff09\uff0c\u90a3\u4e48\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u8bb0\u5f55\u4e86\u6211\u4eec\u7684\u5f53\u524dMakefile\u7684\u8c03\u7528\u5c42\u6570\u3002 \u4e0b\u9762\u518d\u4ecb\u7ecd\u4e24\u4e2a\u5b9a\u4e49\u53d8\u91cf\u65f6\u6211\u4eec\u9700\u8981\u77e5\u9053\u7684\uff0c\u8bf7\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u8981\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\uff0c\u5176\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\uff1a .. code:: makefile nullstring := space := $(nullstring) # end of the line nullstring\u662f\u4e00\u4e2aEmpty\u53d8\u91cf\uff0c\u5176\u4e2d\u4ec0\u4e48\u4e5f\u6ca1\u6709\uff0c\u800c\u6211\u4eec\u7684space\u7684\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\u3002\u56e0\u4e3a\u5728\u64cd\u4f5c\u7b26\u7684\u53f3\u8fb9\u662f\u5f88\u96be\u63cf\u8ff0\u4e00\u4e2a\u7a7a\u683c\u7684\uff0c\u8fd9\u91cc\u91c7\u7528\u7684\u6280\u672f\u5f88\u7ba1\u7528\uff0c\u5148\u7528\u4e00\u4e2aEmpty\u53d8\u91cf\u6765\u6807\u660e\u53d8\u91cf\u7684\u503c\u5f00\u59cb\u4e86\uff0c\u800c\u540e\u9762\u91c7\u7528\u201c#\u201d\u6ce8\u91ca\u7b26\u6765\u8868\u793a\u53d8\u91cf\u5b9a\u4e49\u7684\u7ec8\u6b62\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u51fa\u5176\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\u7684\u53d8\u91cf\u3002\u8bf7\u6ce8\u610f\u8fd9\u91cc\u5173\u4e8e\u201c#\u201d\u7684\u4f7f\u7528\uff0c\u6ce8\u91ca\u7b26\u201c#\u201d\u7684\u8fd9\u79cd\u7279\u6027\u503c\u5f97\u6211\u4eec\u6ce8\u610f\uff0c\u5982\u679c\u6211\u4eec\u8fd9\u6837\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\uff1a .. code:: makefile dir := /foo/bar # directory to put the frobs in dir\u8fd9\u4e2a\u53d8\u91cf\u7684\u503c\u662f\u201c/foo/bar\u201d\uff0c\u540e\u9762\u8fd8\u8ddf\u4e864\u4e2a\u7a7a\u683c\uff0c\u5982\u679c\u6211\u4eec\u8fd9\u6837\u4f7f\u7528\u8fd9\u6837\u53d8\u91cf\u6765\u6307\u5b9a\u522b\u7684\u76ee\u5f55\u2014\u2014\u201c$(dir)/file\u201d\u90a3\u4e48\u5c31\u5b8c\u86cb\u4e86\u3002 \u8fd8\u6709\u4e00\u4e2a\u6bd4\u8f83\u6709\u7528\u7684\u64cd\u4f5c\u7b26\u662f ?= \uff0c\u5148\u770b\u793a\u4f8b\uff1a .. code:: makefile FOO ?= bar \u5176\u542b\u4e49\u662f\uff0c\u5982\u679cFOO\u6ca1\u6709\u88ab\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\u53d8\u91cfFOO\u7684\u503c\u5c31\u662f\u201cbar\u201d\uff0c\u5982\u679cFOO\u5148\u524d\u88ab\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\u8fd9\u6761\u8bed\u5c06\u4ec0\u4e48\u4e5f\u4e0d\u505a\uff0c\u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile ifeq ($(origin FOO), undefined) FOO = bar endif \u53d8\u91cf\u9ad8\u7ea7\u7528\u6cd5 \u8fd9\u91cc\u4ecb\u7ecd\u4e24\u79cd\u53d8\u91cf\u7684\u9ad8\u7ea7\u4f7f\u7528\u65b9\u6cd5\uff0c\u7b2c\u4e00\u79cd\u662f\u53d8\u91cf\u503c\u7684\u66ff\u6362\u3002 \u6211\u4eec\u53ef\u4ee5\u66ff\u6362\u53d8\u91cf\u4e2d\u7684\u5171\u6709\u7684\u90e8\u5206\uff0c\u5176\u683c\u5f0f\u662f $(var:a=b) \u6216\u662f ${var:a=b} \uff0c\u5176\u610f\u601d\u662f\uff0c\u628a\u53d8\u91cf\u201cvar\u201d\u4e2d\u6240\u6709\u4ee5\u201ca\u201d\u5b57\u4e32\u201c\u7ed3\u5c3e\u201d\u7684\u201ca\u201d\u66ff\u6362\u6210\u201cb\u201d\u5b57\u4e32\u3002\u8fd9\u91cc\u7684\u201c\u7ed3\u5c3e\u201d\u610f\u601d\u662f\u201c\u7a7a\u683c\u201d\u6216\u662f\u201c\u7ed3\u675f\u7b26\u201d\u3002 \u8fd8\u662f\u770b\u4e00\u4e2a\u793a\u4f8b\u5427\uff1a .. code:: makefile foo := a.o b.o c.o bar := $(foo:.o=.c) \u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a $(foo) \u53d8\u91cf\uff0c\u800c\u7b2c\u4e8c\u884c\u7684\u610f\u601d\u662f\u628a $(foo) \u4e2d\u6240\u6709\u4ee5 .o \u5b57\u4e32\u201c\u7ed3\u5c3e\u201d\u5168\u90e8\u66ff\u6362\u6210 .c \uff0c\u6240\u4ee5\u6211\u4eec\u7684 $(bar) \u7684\u503c\u5c31\u662f\u201ca.c b.c c.c\u201d\u3002 \u53e6\u5916\u4e00\u79cd\u53d8\u91cf\u66ff\u6362\u7684\u6280\u672f\u662f\u4ee5\u201c\u9759\u6001\u6a21\u5f0f\u201d\uff08\u53c2\u89c1\u524d\u9762\u7ae0\u8282\uff09\u5b9a\u4e49\u7684\uff0c\u5982\uff1a .. code:: makefile foo := a.o b.o c.o bar := $(foo:%.o=%.c) \u8fd9\u4f9d\u8d56\u4e8e\u88ab\u66ff\u6362\u5b57\u4e32\u4e2d\u7684\u6709\u76f8\u540c\u7684\u6a21\u5f0f\uff0c\u6a21\u5f0f\u4e2d\u5fc5\u987b\u5305\u542b\u4e00\u4e2a % \u5b57\u7b26\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u540c\u6837\u8ba9 $(bar) \u53d8\u91cf\u7684\u503c\u4e3a\u201ca.c b.c c.c\u201d\u3002 \u7b2c\u4e8c\u79cd\u9ad8\u7ea7\u7528\u6cd5\u662f\u2014\u2014\u201c\u628a\u53d8\u91cf\u7684\u503c\u518d\u5f53\u6210\u53d8\u91cf\u201d\u3002\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile x = y y = z a := $($(x)) \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c$(x)\u7684\u503c\u662f\u201cy\u201d\uff0c\u6240\u4ee5$($(x))\u5c31\u662f$(y)\uff0c\u4e8e\u662f$(a)\u7684\u503c\u5c31\u662f\u201cz\u201d\u3002\uff08\u6ce8\u610f\uff0c\u662f\u201cx=y\u201d\uff0c\u800c\u4e0d\u662f\u201cx=$(y)\u201d\uff09 \u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u66f4\u591a\u7684\u5c42\u6b21\uff1a .. code:: makefile x = y y = z z = u a := $($($(x))) \u8fd9\u91cc\u7684 $(a) \u7684\u503c\u662f\u201cu\u201d\uff0c\u76f8\u5173\u7684\u63a8\u5bfc\u7559\u7ed9\u8bfb\u8005\u81ea\u5df1\u53bb\u505a\u5427\u3002 \u8ba9\u6211\u4eec\u518d\u590d\u6742\u4e00\u70b9\uff0c\u4f7f\u7528\u4e0a\u201c\u5728\u53d8\u91cf\u5b9a\u4e49\u4e2d\u4f7f\u7528\u53d8\u91cf\u201d\u7684\u7b2c\u4e00\u4e2a\u65b9\u5f0f\uff0c\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile x = $(y) y = z z = Hello a := $($(x)) \u8fd9\u91cc\u7684 $($(x)) \u88ab\u66ff\u6362\u6210\u4e86 $($(y)) \uff0c\u56e0\u4e3a $(y) \u503c\u662f\u201cz\u201d\uff0c\u6240\u4ee5\uff0c\u6700\u7ec8\u7ed3\u679c\u662f\uff1a a:=$(z) \uff0c\u4e5f\u5c31\u662f\u201cHello\u201d\u3002 \u518d\u590d\u6742\u4e00\u70b9\uff0c\u6211\u4eec\u518d\u52a0\u4e0a\u51fd\u6570\uff1a .. code:: makefile x = variable1 variable2 := Hello y = $(subst 1,2,$(x)) z = y a := $($($(z))) \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c $($($(z))) \u6269\u5c55\u4e3a $($(y)) \uff0c\u800c\u5176\u518d\u6b21\u88ab\u6269\u5c55\u4e3a $($(subst 1,2,$(x))) \u3002 $(x) \u7684\u503c\u662f\u201cvariable1\u201d\uff0csubst\u51fd\u6570\u628a\u201cvariable1\u201d\u4e2d\u7684\u6240\u6709\u201c1\u201d\u5b57\u4e32\u66ff\u6362\u6210\u201c2\u201d\u5b57\u4e32\uff0c\u4e8e\u662f\uff0c\u201cvariable1\u201d\u53d8\u6210 \u201cvariable2\u201d\uff0c\u518d\u53d6\u5176\u503c\uff0c\u6240\u4ee5\uff0c\u6700\u7ec8\uff0c $(a) \u7684\u503c\u5c31\u662f $(variable2) \u7684\u503c\u2014\u2014\u201cHello\u201d\u3002\uff08\u5594\uff0c\u597d\u4e0d\u5bb9\u6613\uff09 \u5728\u8fd9\u79cd\u65b9\u5f0f\u4e2d\uff0c\u6216\u8981\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u53d8\u91cf\u6765\u7ec4\u6210\u4e00\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u7136\u540e\u518d\u53d6\u5176\u503c\uff1a .. code:: makefile first_second = Hello a = first b = second all = $($a_$b) \u8fd9\u91cc\u7684 $a_$b \u7ec4\u6210\u4e86\u201cfirst_second\u201d\uff0c\u4e8e\u662f\uff0c $(all) \u7684\u503c\u5c31\u662f\u201cHello\u201d\u3002 \u518d\u6765\u770b\u770b\u7ed3\u5408\u7b2c\u4e00\u79cd\u6280\u672f\u7684\u4f8b\u5b50\uff1a .. code:: makefile a_objects := a.o b.o c.o 1_objects := 1.o 2.o 3.o sources := $($(a1)_objects:.o=.c) \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c $(a1) \u7684\u503c\u662f\u201ca\u201d\u7684\u8bdd\uff0c\u90a3\u4e48\uff0c $(sources) \u7684\u503c\u5c31\u662f\u201ca.c b.c c.c\u201d\uff1b\u5982\u679c $(a1) \u7684\u503c\u662f\u201c1\u201d\uff0c\u90a3\u4e48 $(sources) \u7684\u503c\u662f\u201c1.c 2.c 3.c\u201d\u3002 \u518d\u6765\u770b\u4e00\u4e2a\u8fd9\u79cd\u6280\u672f\u548c\u201c\u51fd\u6570\u201d\u4e0e\u201c\u6761\u4ef6\u8bed\u53e5\u201d\u4e00\u540c\u4f7f\u7528\u7684\u4f8b\u5b50\uff1a .. code:: makefile ifdef do_sort func := sort else func := strip endif bar := a d b g q c foo := $($(func) $(bar)) \u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u5982\u679c\u5b9a\u4e49\u4e86\u201cdo_sort\u201d\uff0c\u90a3\u4e48\uff1a foo := $(sort a d b g q c) \uff0c\u4e8e\u662f $(foo) \u7684\u503c\u5c31\u662f \u201ca b c d g q\u201d\uff0c\u800c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u201cdo_sort\u201d\uff0c\u90a3\u4e48\uff1a foo := $(strip a d b g q c) \uff0c\u8c03\u7528\u7684\u5c31\u662fstrip\u51fd\u6570\u3002 \u5f53\u7136\uff0c\u201c\u628a\u53d8\u91cf\u7684\u503c\u518d\u5f53\u6210\u53d8\u91cf\u201d\u8fd9\u79cd\u6280\u672f\uff0c\u540c\u6837\u53ef\u4ee5\u7528\u5728\u64cd\u4f5c\u7b26\u7684\u5de6\u8fb9: :: dir = foo $(dir)_sources := $(wildcard $(dir)/*.c) define $(dir)_print lpr $($(dir)_sources) endef \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u5b9a\u4e49\u4e86\u4e09\u4e2a\u53d8\u91cf\uff1a\u201cdir\u201d\uff0c\u201cfoo_sources\u201d\u548c\u201cfoo_print\u201d\u3002 \u8ffd\u52a0\u53d8\u91cf\u503c \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 += \u64cd\u4f5c\u7b26\u7ed9\u53d8\u91cf\u8ffd\u52a0\u503c\uff0c\u5982\uff1a .. code:: makefile objects = main.o foo.o bar.o utils.o objects += another.o \u4e8e\u662f\uff0c\u6211\u4eec\u7684 $(objects) \u503c\u53d8\u6210\uff1a\u201cmain.o foo.o bar.o utils.o another.o\u201d\uff08another.o\u88ab\u8ffd\u52a0\u8fdb\u53bb\u4e86\uff09 \u4f7f\u7528 += \u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u6a21\u62df\u4e3a\u4e0b\u9762\u7684\u8fd9\u79cd\u4f8b\u5b50\uff1a .. code:: makefile objects = main.o foo.o bar.o utils.o objects := $(objects) another.o \u6240\u4e0d\u540c\u7684\u662f\uff0c\u7528 += \u66f4\u4e3a\u7b80\u6d01\u3002 \u5982\u679c\u53d8\u91cf\u4e4b\u524d\u6ca1\u6709\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\uff0c += \u4f1a\u81ea\u52a8\u53d8\u6210 = \uff0c\u5982\u679c\u524d\u9762\u6709\u53d8\u91cf\u5b9a\u4e49\uff0c\u90a3\u4e48 += \u4f1a\u7ee7\u627f\u4e8e\u524d\u6b21\u64cd\u4f5c\u7684\u8d4b\u503c\u7b26\u3002\u5982\u679c\u524d\u4e00\u6b21\u7684\u662f := \uff0c\u90a3\u4e48 += \u4f1a\u4ee5 := \u4f5c\u4e3a\u5176\u8d4b\u503c\u7b26\uff0c\u5982\uff1a .. code:: makefile variable := value variable += more \u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable := value variable := $(variable) more \u4f46\u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5\uff1a .. code:: makefile variable = value variable += more \u7531\u4e8e\u524d\u6b21\u7684\u8d4b\u503c\u7b26\u662f = \uff0c\u6240\u4ee5 += \u4e5f\u4f1a\u4ee5 = \u6765\u505a\u4e3a\u8d4b\u503c\uff0c\u90a3\u4e48\u5c82\u4e0d\u4f1a\u53d1\u751f\u53d8\u91cf\u7684\u9012\u8865\u5f52\u5b9a\u4e49\uff0c\u8fd9\u662f\u5f88\u4e0d\u597d\u7684\uff0c\u6240\u4ee5make\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4e0d\u5fc5\u62c5\u5fc3\u8fd9\u4e2a\u95ee\u9898\u3002 override \u6307\u793a\u7b26 \u5982\u679c\u6709\u53d8\u91cf\u662f\u901a\u5e38make\u7684\u547d\u4ee4\u884c\u53c2\u6570\u8bbe\u7f6e\u7684\uff0c\u90a3\u4e48Makefile\u4e2d\u5bf9\u8fd9\u4e2a\u53d8\u91cf\u7684\u8d4b\u503c\u4f1a\u88ab\u5ffd\u7565\u3002\u5982\u679c\u4f60\u60f3\u5728Makefile\u4e2d\u8bbe\u7f6e\u8fd9\u7c7b\u53c2\u6570\u7684\u503c\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u201coverride\u201d\u6307\u793a\u7b26\u3002\u5176\u8bed\u6cd5\u662f: :: override lt;variable gt;; = lt;value gt;; override lt;variable gt;; := lt;value gt;; \u5f53\u7136\uff0c\u4f60\u8fd8\u53ef\u4ee5\u8ffd\u52a0: :: override lt;variable gt;; += lt;more text gt;; \u5bf9\u4e8e\u591a\u884c\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u6211\u4eec\u7528define\u6307\u793a\u7b26\uff0c\u5728define\u6307\u793a\u7b26\u524d\uff0c\u4e5f\u540c\u6837\u53ef\u4ee5\u4f7f\u7528override\u6307\u793a\u7b26\uff0c\u5982: :: override define foo bar endef \u591a\u884c\u53d8\u91cf \u8fd8\u6709\u4e00\u79cd\u8bbe\u7f6e\u53d8\u91cf\u503c\u7684\u65b9\u6cd5\u662f\u4f7f\u7528define\u5173\u952e\u5b57\u3002\u4f7f\u7528define\u5173\u952e\u5b57\u8bbe\u7f6e\u53d8\u91cf\u7684\u503c\u53ef\u4ee5\u6709\u6362\u884c\uff0c\u8fd9\u6709\u5229\u4e8e\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u547d\u4ee4\uff08\u524d\u9762\u6211\u4eec\u8bb2\u8fc7\u201c\u547d\u4ee4\u5305\u201d\u7684\u6280\u672f\u5c31\u662f\u5229\u7528\u8fd9\u4e2a\u5173\u952e\u5b57\uff09\u3002 define\u6307\u793a\u7b26\u540e\u9762\u8ddf\u7684\u662f\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u800c\u91cd\u8d77\u4e00\u884c\u5b9a\u4e49\u53d8\u91cf\u7684\u503c\uff0c\u5b9a\u4e49\u662f\u4ee5endef \u5173\u952e\u5b57\u7ed3\u675f\u3002\u5176\u5de5\u4f5c\u65b9\u5f0f\u548c\u201c=\u201d\u64cd\u4f5c\u7b26\u4e00\u6837\u3002\u53d8\u91cf\u7684\u503c\u53ef\u4ee5\u5305\u542b\u51fd\u6570\u3001\u547d\u4ee4\u3001\u6587\u5b57\uff0c\u6216\u662f\u5176\u5b83\u53d8\u91cf\u3002\u56e0\u4e3a\u547d\u4ee4\u9700\u8981\u4ee5[Tab]\u952e\u5f00\u5934\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u7528define\u5b9a\u4e49\u7684\u547d\u4ee4\u53d8\u91cf\u4e2d\u6ca1\u6709\u4ee5 Tab \u952e\u5f00\u5934\uff0c\u90a3\u4e48make \u5c31\u4e0d\u4f1a\u628a\u5176\u8ba4\u4e3a\u662f\u547d\u4ee4\u3002 \u4e0b\u9762\u7684\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86define\u7684\u7528\u6cd5: :: define two-lines echo foo echo $(bar) endef \u73af\u5883\u53d8\u91cf make\u8fd0\u884c\u65f6\u7684\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u53ef\u4ee5\u5728make\u5f00\u59cb\u8fd0\u884c\u65f6\u88ab\u8f7d\u5165\u5230Makefile\u6587\u4ef6\u4e2d\uff0c\u4f46\u662f\u5982\u679cMakefile\u4e2d\u5df2\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u6216\u662f\u8fd9\u4e2a\u53d8\u91cf\u7531make\u547d\u4ee4\u884c\u5e26\u5165\uff0c\u90a3\u4e48\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u7684\u503c\u5c06\u88ab\u8986\u76d6\u3002\uff08\u5982\u679cmake\u6307\u5b9a\u4e86\u201c-e\u201d\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u5c06\u8986\u76d6Makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\uff09 \u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e\u4e86 CFLAGS \u73af\u5883\u53d8\u91cf\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6240\u6709\u7684Makefile\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u4e86\u3002\u8fd9\u5bf9\u4e8e\u6211\u4eec\u4f7f\u7528\u7edf\u4e00\u7684\u7f16\u8bd1\u53c2\u6570\u6709\u6bd4\u8f83\u5927\u7684\u597d\u5904\u3002\u5982\u679cMakefile\u4e2d\u5b9a\u4e49\u4e86CFLAGS\uff0c\u90a3\u4e48\u5219\u4f1a\u4f7f\u7528Makefile\u4e2d\u7684\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u5219\u4f7f\u7528\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u7684\u503c\uff0c\u4e00\u4e2a\u5171\u6027\u548c\u4e2a\u6027\u7684\u7edf\u4e00\uff0c\u5f88\u50cf\u201c\u5168\u5c40\u53d8\u91cf\u201d\u548c\u201c\u5c40\u90e8\u53d8\u91cf\u201d\u7684\u7279\u6027\u3002 \u5f53make\u5d4c\u5957\u8c03\u7528\u65f6\uff08\u53c2\u89c1\u524d\u9762\u7684\u201c\u5d4c\u5957\u8c03\u7528\u201d\u7ae0\u8282\uff09\uff0c\u4e0a\u5c42Makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u4f1a\u4ee5\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u7684\u65b9\u5f0f\u4f20\u9012\u5230\u4e0b\u5c42\u7684Makefile \u4e2d\u3002\u5f53\u7136\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u901a\u8fc7\u547d\u4ee4\u884c\u8bbe\u7f6e\u7684\u53d8\u91cf\u4f1a\u88ab\u4f20\u9012\u3002\u800c\u5b9a\u4e49\u5728\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\uff0c\u5982\u679c\u8981\u5411\u4e0b\u5c42Makefile\u4f20\u9012\uff0c\u5219\u9700\u8981\u4f7f\u7528exprot\u5173\u952e\u5b57\u6765\u58f0\u660e\u3002\uff08\u53c2\u89c1\u524d\u9762\u7ae0\u8282\uff09 \u5f53\u7136\uff0c\u6211\u5e76\u4e0d\u63a8\u8350\u628a\u8bb8\u591a\u7684\u53d8\u91cf\u90fd\u5b9a\u4e49\u5728\u7cfb\u7edf\u73af\u5883\u4e2d\uff0c\u8fd9\u6837\uff0c\u5728\u6211\u4eec\u6267\u884c\u4e0d\u7528\u7684Makefile\u65f6\uff0c\u62e5\u6709\u7684\u662f\u540c\u4e00\u5957\u7cfb\u7edf\u53d8\u91cf\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5e26\u6765\u66f4\u591a\u7684\u9ebb\u70e6\u3002 \u76ee\u6807\u53d8\u91cf \u524d\u9762\u6211\u4eec\u6240\u8bb2\u7684\u5728Makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u90fd\u662f\u201c\u5168\u5c40\u53d8\u91cf\u201d\uff0c\u5728\u6574\u4e2a\u6587\u4ef6\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u53d8\u91cf\u3002\u5f53\u7136\uff0c\u201c\u81ea\u52a8\u5316\u53d8\u91cf\u201d\u9664\u5916\uff0c\u5982 $ \u7b49\u8fd9\u79cd\u7c7b\u91cf\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u5c31\u5c5e\u4e8e\u201c\u89c4\u5219\u578b\u53d8\u91cf\u201d\uff0c\u8fd9\u79cd\u53d8\u91cf\u7684\u503c\u4f9d\u8d56\u4e8e\u89c4\u5219\u7684\u76ee\u6807\u548c\u4f9d\u8d56\u76ee\u6807\u7684\u5b9a\u4e49\u3002 \u5f53\u7136\uff0c\u6211\u4e5f\u540c\u6837\u53ef\u4ee5\u4e3a\u67d0\u4e2a\u76ee\u6807\u8bbe\u7f6e\u5c40\u90e8\u53d8\u91cf\uff0c\u8fd9\u79cd\u53d8\u91cf\u88ab\u79f0\u4e3a\u201cTarget-specific Variable\u201d\uff0c\u5b83\u53ef\u4ee5\u548c\u201c\u5168\u5c40\u53d8\u91cf\u201d\u540c\u540d\uff0c\u56e0\u4e3a\u5b83\u7684\u4f5c\u7528\u8303\u56f4\u53ea\u5728\u8fd9\u6761\u89c4\u5219\u4ee5\u53ca\u8fde\u5e26\u89c4\u5219\u4e2d\uff0c\u6240\u4ee5\u5176\u503c\u4e5f\u53ea\u5728\u4f5c\u7528\u8303\u56f4\u5185\u6709\u6548\u3002\u800c\u4e0d\u4f1a\u5f71\u54cd\u89c4\u5219\u94fe\u4ee5\u5916\u7684\u5168\u5c40\u53d8\u91cf\u7684\u503c\u3002 \u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile lt;target ... gt; : lt;variable-assignment gt;; lt;target ... gt; : overide lt;variable-assignment gt; ;\u53ef\u4ee5\u662f\u524d\u9762\u8bb2\u8fc7\u7684\u5404\u79cd\u8d4b\u503c\u8868\u8fbe\u5f0f\uff0c\u5982 = \u3001 := \u3001 += \\ \u6216\u662f ?= \u3002\u7b2c\u4e8c\u4e2a\u8bed\u6cd5\u662f\u9488\u5bf9\u4e8emake\u547d\u4ee4\u884c\u5e26\u5165\u7684\u53d8\u91cf\uff0c\u6216\u662f\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u3002 \u8fd9\u4e2a\u7279\u6027\u975e\u5e38\u7684\u6709\u7528\uff0c\u5f53\u6211\u4eec\u8bbe\u7f6e\u4e86\u8fd9\u6837\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u4f5c\u7528\u5230\u7531\u8fd9\u4e2a\u76ee\u6807\u6240\u5f15\u53d1\u7684\u6240\u6709\u7684\u89c4\u5219\u4e2d\u53bb\u3002\u5982\uff1a .. code:: makefile prog : CFLAGS = - g prog : prog . o foo . o bar . o $ ( CC ) $ ( CFLAGS ) prog . o foo . o bar . o prog . o : prog . c $ ( CC ) $ ( CFLAGS ) prog . c foo . o : foo . c $ ( CC ) $ ( CFLAGS ) foo . c bar . o : bar . c $ ( CC ) $ ( CFLAGS ) bar . c \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u4e0d\u7ba1\u5168\u5c40\u7684 $(CFLAGS) \u7684\u503c\u662f\u4ec0\u4e48\uff0c\u5728prog\u76ee\u6807\uff0c\u4ee5\u53ca\u5176\u6240\u5f15\u53d1\u7684\u6240\u6709\u89c4\u5219\u4e2d\uff08prog.o foo.o bar.o\u7684\u89c4\u5219\uff09\uff0c $(CFLAGS) \u7684\u503c\u90fd\u662f -g \u6a21\u5f0f\u53d8\u91cf \u5728GNU\u7684make\u4e2d\uff0c\u8fd8\u652f\u6301\u6a21\u5f0f\u53d8\u91cf\uff08Pattern-specific Variable\uff09\uff0c\u901a\u8fc7\u4e0a\u9762\u7684\u76ee\u6807\u53d8\u91cf\u4e2d\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u53d8\u91cf\u53ef\u4ee5\u5b9a\u4e49\u5728\u67d0\u4e2a\u76ee\u6807\u4e0a\u3002\u6a21\u5f0f\u53d8\u91cf\u7684\u597d\u5904\u5c31\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u5b9a\u4e00\u79cd\u201c\u6a21\u5f0f\u201d\uff0c\u53ef\u4ee5\u628a\u53d8\u91cf\u5b9a\u4e49\u5728\u7b26\u5408\u8fd9\u79cd\u6a21\u5f0f\u7684\u6240\u6709\u76ee\u6807\u4e0a\u3002 \u6211\u4eec\u77e5\u9053\uff0cmake\u7684\u201c\u6a21\u5f0f\u201d\u4e00\u822c\u662f\u81f3\u5c11\u542b\u6709\u4e00\u4e2a % \u7684\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4ee5\u5982\u4e0b\u65b9\u5f0f\u7ed9\u6240\u6709\u4ee5 .o \u7ed3\u5c3e\u7684\u76ee\u6807\u5b9a\u4e49\u76ee\u6807\u53d8\u91cf\uff1a .. code:: makefile %.o : CFLAGS = -O \u540c\u6837\uff0c\u6a21\u5f0f\u53d8\u91cf\u7684\u8bed\u6cd5\u548c\u201c\u76ee\u6807\u53d8\u91cf\u201d\u4e00\u6837\uff1a .. code:: makefile lt;pattern ... gt;; : lt;variable-assignment gt;; lt;pattern ... gt;; : override lt;variable-assignment gt;; override\u540c\u6837\u662f\u9488\u5bf9\u4e8e\u7cfb\u7edf\u73af\u5883\u4f20\u5165\u7684\u53d8\u91cf\uff0c\u6216\u662fmake\u547d\u4ee4\u884c\u6307\u5b9a\u7684\u53d8\u91cf\u3002","title":"\u4f7f\u7528\u53d8\u91cf"},{"location":"makefile/variables/#_1","text":"\u53d8\u91cf\u5728\u58f0\u660e\u65f6\u9700\u8981\u7ed9\u4e88\u521d\u503c\uff0c\u800c\u5728\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u7ed9\u5728\u53d8\u91cf\u540d\u524d\u52a0\u4e0a $ \u7b26\u53f7\uff0c\u4f46\u6700\u597d\u7528\u5c0f\u62ec\u53f7 () \u6216\u662f\u5927\u62ec\u53f7 {} \u628a\u53d8\u91cf\u7ed9\u5305\u62ec\u8d77\u6765\u3002\u5982\u679c\u4f60\u8981\u4f7f\u7528\u771f\u5b9e\u7684 $ \u5b57\u7b26\uff0c\u90a3\u4e48\u4f60\u9700\u8981\u7528 $$ \u6765\u8868\u793a\u3002 \u53d8\u91cf\u53ef\u4ee5\u4f7f\u7528\u5728\u8bb8\u591a\u5730\u65b9\uff0c\u5982\u89c4\u5219\u4e2d\u7684\u201c\u76ee\u6807\u201d\u3001\u201c\u4f9d\u8d56\u201d\u3001\u201c\u547d\u4ee4\u201d\u4ee5\u53ca\u65b0\u7684\u53d8\u91cf\u4e2d\u3002\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile objects = program.o foo.o utils.o program : $(objects) cc -o program $(objects) $(objects) : defs.h \u53d8\u91cf\u4f1a\u5728\u4f7f\u7528\u5b83\u7684\u5730\u65b9\u7cbe\u786e\u5730\u5c55\u5f00\uff0c\u5c31\u50cfC/C++\u4e2d\u7684\u5b8f\u4e00\u6837\uff0c\u4f8b\u5982\uff1a .. code:: makefile foo = c prog.o : prog.$(foo) $(foo)$(foo) -$(foo) prog.$(foo) \u5c55\u5f00\u540e\u5f97\u5230\uff1a .. code:: makefile prog.o : prog.c cc -c prog.c \u5f53\u7136\uff0c\u5343\u4e07\u4e0d\u8981\u5728\u4f60\u7684Makefile\u4e2d\u8fd9\u6837\u5e72\uff0c\u8fd9\u91cc\u53ea\u662f\u4e3e\u4e2a\u4f8b\u5b50\u6765\u8868\u660eMakefile\u4e2d\u7684\u53d8\u91cf\u5728\u4f7f\u7528\u5904\u5c55\u5f00\u7684\u771f\u5b9e\u6837\u5b50\u3002\u53ef\u89c1\u5176\u5c31\u662f\u4e00\u4e2a\u201c\u66ff\u4ee3\u201d\u7684\u539f\u7406\u3002 \u53e6\u5916\uff0c\u7ed9\u53d8\u91cf\u52a0\u4e0a\u62ec\u53f7\u5b8c\u5168\u662f\u4e3a\u4e86\u66f4\u52a0\u5b89\u5168\u5730\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u4f60\u4e0d\u60f3\u7ed9\u53d8\u91cf\u52a0\u4e0a\u62ec\u53f7\uff0c\u90a3\u4e5f\u53ef\u4ee5\uff0c\u4f46\u6211\u8fd8\u662f\u5f3a\u70c8\u5efa\u8bae\u4f60\u7ed9\u53d8\u91cf\u52a0\u4e0a\u62ec\u53f7\u3002","title":"\u53d8\u91cf\u7684\u57fa\u7840"},{"location":"makefile/variables/#_2","text":"\u5728\u5b9a\u4e49\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5176\u5b83\u53d8\u91cf\u6765\u6784\u9020\u53d8\u91cf\u7684\u503c\uff0c\u5728Makefile\u4e2d\u6709\u4e24\u79cd\u65b9\u5f0f\u6765\u5728\u7528\u53d8\u91cf\u5b9a\u4e49\u53d8\u91cf\u7684\u503c\u3002 \u5148\u770b\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u7b80\u5355\u7684\u4f7f\u7528 = \u53f7\uff0c\u5728 = \u5de6\u4fa7\u662f\u53d8\u91cf\uff0c\u53f3\u4fa7\u662f\u53d8\u91cf\u7684\u503c\uff0c\u53f3\u4fa7\u53d8\u91cf\u7684\u503c\u53ef\u4ee5\u5b9a\u4e49\u5728\u6587\u4ef6\u7684\u4efb\u4f55\u4e00\u5904\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53f3\u4fa7\u4e2d\u7684\u53d8\u91cf\u4e0d\u4e00\u5b9a\u975e\u8981\u662f\u5df2\u5b9a\u4e49\u597d\u7684\u503c\uff0c\u5176\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540e\u9762\u5b9a\u4e49\u7684\u503c\u3002\u5982\uff1a .. code:: makefile foo = $(bar) bar = $(ugh) ugh = Huh? all: echo $(foo) \u6211\u4eec\u6267\u884c\u201cmake all\u201d\u5c06\u4f1a\u6253\u51fa\u53d8\u91cf $(foo) \u7684\u503c\u662f Huh? \uff08 $(foo) \u7684\u503c\u662f $(bar) \uff0c $(bar) \u7684\u503c\u662f $(ugh) \uff0c $(ugh) \u7684\u503c\u662f Huh? \uff09\u53ef\u89c1\uff0c\u53d8\u91cf\u662f\u53ef\u4ee5\u4f7f\u7528\u540e\u9762\u7684\u53d8\u91cf\u6765\u5b9a\u4e49\u7684\u3002 \u8fd9\u4e2a\u529f\u80fd\u6709\u597d\u7684\u5730\u65b9\uff0c\u4e5f\u6709\u4e0d\u597d\u7684\u5730\u65b9\uff0c\u597d\u7684\u5730\u65b9\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u53d8\u91cf\u7684\u771f\u5b9e\u503c\u63a8\u5230\u540e\u9762\u6765\u5b9a\u4e49\uff0c\u5982\uff1a .. code:: makefile CFLAGS = $(include_dirs) -O include_dirs = -Ifoo -Ibar \u5f53 CFLAGS \u5728\u547d\u4ee4\u4e2d\u88ab\u5c55\u5f00\u65f6\uff0c\u4f1a\u662f -Ifoo -Ibar -O \u3002\u4f46\u8fd9\u79cd\u5f62\u5f0f\u4e5f\u6709\u4e0d\u597d\u7684\u5730\u65b9\uff0c\u90a3\u5c31\u662f\u9012\u5f52\u5b9a\u4e49\uff0c\u5982\uff1a .. code:: makefile CFLAGS = $( CFLAGS ) -O \u6216\uff1a .. code:: makefile A = $( B ) B = $( A ) \u8fd9\u4f1a\u8ba9make\u9677\u5165\u65e0\u9650\u7684\u53d8\u91cf\u5c55\u5f00\u8fc7\u7a0b\u4e2d\u53bb\uff0c\u5f53\u7136\uff0c\u6211\u4eec\u7684make\u662f\u6709\u80fd\u529b\u68c0\u6d4b\u8fd9\u6837\u7684\u5b9a\u4e49\uff0c\u5e76\u4f1a\u62a5\u9519\u3002\u8fd8\u6709\u5c31\u662f\u5982\u679c\u5728\u53d8\u91cf\u4e2d\u4f7f\u7528\u51fd\u6570\uff0c\u90a3\u4e48\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u8ba9\u6211\u4eec\u7684make\u8fd0\u884c\u65f6\u975e\u5e38\u6162\uff0c\u66f4\u7cdf\u7cd5\u7684\u662f\uff0c\u4ed6\u4f1a\u4f7f\u7528\u5f97\u4e24\u4e2amake\u7684\u51fd\u6570\u201cwildcard\u201d\u548c\u201cshell\u201d\u53d1\u751f\u4e0d\u53ef\u9884\u77e5\u7684\u9519\u8bef\u3002\u56e0\u4e3a\u4f60\u4e0d\u4f1a\u77e5\u9053\u8fd9\u4e24\u4e2a\u51fd\u6570\u4f1a\u88ab\u8c03\u7528\u591a\u5c11\u6b21\u3002 \u4e3a\u4e86\u907f\u514d\u4e0a\u9762\u7684\u8fd9\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528make\u4e2d\u7684\u53e6\u4e00\u79cd\u7528\u53d8\u91cf\u6765\u5b9a\u4e49\u53d8\u91cf\u7684\u65b9\u6cd5\u3002\u8fd9\u79cd\u65b9\u6cd5\u4f7f\u7528\u7684\u662f := \u64cd\u4f5c\u7b26\uff0c\u5982\uff1a .. code:: makefile x := foo y := $(x) bar x := later \u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile y := foo bar x := later \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\uff0c\u524d\u9762\u7684\u53d8\u91cf\u4e0d\u80fd\u4f7f\u7528\u540e\u9762\u7684\u53d8\u91cf\uff0c\u53ea\u80fd\u4f7f\u7528\u524d\u9762\u5df2\u5b9a\u4e49\u597d\u4e86\u7684\u53d8\u91cf\u3002\u5982\u679c\u662f\u8fd9\u6837\uff1a .. code:: makefile y := $(x) bar x := foo \u90a3\u4e48\uff0cy\u7684\u503c\u662f\u201cbar\u201d\uff0c\u800c\u4e0d\u662f\u201cfoo bar\u201d\u3002 \u4e0a\u9762\u90fd\u662f\u4e00\u4e9b\u6bd4\u8f83\u7b80\u5355\u7684\u53d8\u91cf\u4f7f\u7528\u4e86\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u590d\u6742\u7684\u4f8b\u5b50\uff0c\u5176\u4e2d\u5305\u62ec\u4e86make\u7684\u51fd\u6570\u3001\u6761\u4ef6\u8868\u8fbe\u5f0f\u548c\u4e00\u4e2a\u7cfb\u7edf\u53d8\u91cf\u201cMAKELEVEL\u201d\u7684\u4f7f\u7528\uff1a .. code:: makefile ifeq (0, ${ MAKELEVEL } ) cur-dir := $(shell pwd) whoami := $(shell whoami) host-type := $(shell arch) MAKE := ${ MAKE } host-type= ${ host - type } whoami= ${ whoami } endif \u5173\u4e8e\u6761\u4ef6\u8868\u8fbe\u5f0f\u548c\u51fd\u6570\uff0c\u6211\u4eec\u5728\u540e\u9762\u518d\u8bf4\uff0c\u5bf9\u4e8e\u7cfb\u7edf\u53d8\u91cf\u201cMAKELEVEL\u201d\uff0c\u5176\u610f\u601d\u662f\uff0c\u5982\u679c\u6211\u4eec\u7684make\u6709\u4e00\u4e2a\u5d4c\u5957\u6267\u884c\u7684\u52a8\u4f5c\uff08\u53c2\u89c1\u524d\u9762\u7684\u201c\u5d4c\u5957\u4f7f\u7528make\u201d\uff09\uff0c\u90a3\u4e48\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u8bb0\u5f55\u4e86\u6211\u4eec\u7684\u5f53\u524dMakefile\u7684\u8c03\u7528\u5c42\u6570\u3002 \u4e0b\u9762\u518d\u4ecb\u7ecd\u4e24\u4e2a\u5b9a\u4e49\u53d8\u91cf\u65f6\u6211\u4eec\u9700\u8981\u77e5\u9053\u7684\uff0c\u8bf7\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u6211\u4eec\u8981\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\uff0c\u5176\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\uff1a .. code:: makefile nullstring := space := $(nullstring) # end of the line nullstring\u662f\u4e00\u4e2aEmpty\u53d8\u91cf\uff0c\u5176\u4e2d\u4ec0\u4e48\u4e5f\u6ca1\u6709\uff0c\u800c\u6211\u4eec\u7684space\u7684\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\u3002\u56e0\u4e3a\u5728\u64cd\u4f5c\u7b26\u7684\u53f3\u8fb9\u662f\u5f88\u96be\u63cf\u8ff0\u4e00\u4e2a\u7a7a\u683c\u7684\uff0c\u8fd9\u91cc\u91c7\u7528\u7684\u6280\u672f\u5f88\u7ba1\u7528\uff0c\u5148\u7528\u4e00\u4e2aEmpty\u53d8\u91cf\u6765\u6807\u660e\u53d8\u91cf\u7684\u503c\u5f00\u59cb\u4e86\uff0c\u800c\u540e\u9762\u91c7\u7528\u201c#\u201d\u6ce8\u91ca\u7b26\u6765\u8868\u793a\u53d8\u91cf\u5b9a\u4e49\u7684\u7ec8\u6b62\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u51fa\u5176\u503c\u662f\u4e00\u4e2a\u7a7a\u683c\u7684\u53d8\u91cf\u3002\u8bf7\u6ce8\u610f\u8fd9\u91cc\u5173\u4e8e\u201c#\u201d\u7684\u4f7f\u7528\uff0c\u6ce8\u91ca\u7b26\u201c#\u201d\u7684\u8fd9\u79cd\u7279\u6027\u503c\u5f97\u6211\u4eec\u6ce8\u610f\uff0c\u5982\u679c\u6211\u4eec\u8fd9\u6837\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\uff1a .. code:: makefile dir := /foo/bar # directory to put the frobs in dir\u8fd9\u4e2a\u53d8\u91cf\u7684\u503c\u662f\u201c/foo/bar\u201d\uff0c\u540e\u9762\u8fd8\u8ddf\u4e864\u4e2a\u7a7a\u683c\uff0c\u5982\u679c\u6211\u4eec\u8fd9\u6837\u4f7f\u7528\u8fd9\u6837\u53d8\u91cf\u6765\u6307\u5b9a\u522b\u7684\u76ee\u5f55\u2014\u2014\u201c$(dir)/file\u201d\u90a3\u4e48\u5c31\u5b8c\u86cb\u4e86\u3002 \u8fd8\u6709\u4e00\u4e2a\u6bd4\u8f83\u6709\u7528\u7684\u64cd\u4f5c\u7b26\u662f ?= \uff0c\u5148\u770b\u793a\u4f8b\uff1a .. code:: makefile FOO ?= bar \u5176\u542b\u4e49\u662f\uff0c\u5982\u679cFOO\u6ca1\u6709\u88ab\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\u53d8\u91cfFOO\u7684\u503c\u5c31\u662f\u201cbar\u201d\uff0c\u5982\u679cFOO\u5148\u524d\u88ab\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\u8fd9\u6761\u8bed\u5c06\u4ec0\u4e48\u4e5f\u4e0d\u505a\uff0c\u5176\u7b49\u4ef7\u4e8e\uff1a .. code:: makefile ifeq ($(origin FOO), undefined) FOO = bar endif","title":"\u53d8\u91cf\u4e2d\u7684\u53d8\u91cf"},{"location":"makefile/variables/#_3","text":"\u8fd9\u91cc\u4ecb\u7ecd\u4e24\u79cd\u53d8\u91cf\u7684\u9ad8\u7ea7\u4f7f\u7528\u65b9\u6cd5\uff0c\u7b2c\u4e00\u79cd\u662f\u53d8\u91cf\u503c\u7684\u66ff\u6362\u3002 \u6211\u4eec\u53ef\u4ee5\u66ff\u6362\u53d8\u91cf\u4e2d\u7684\u5171\u6709\u7684\u90e8\u5206\uff0c\u5176\u683c\u5f0f\u662f $(var:a=b) \u6216\u662f ${var:a=b} \uff0c\u5176\u610f\u601d\u662f\uff0c\u628a\u53d8\u91cf\u201cvar\u201d\u4e2d\u6240\u6709\u4ee5\u201ca\u201d\u5b57\u4e32\u201c\u7ed3\u5c3e\u201d\u7684\u201ca\u201d\u66ff\u6362\u6210\u201cb\u201d\u5b57\u4e32\u3002\u8fd9\u91cc\u7684\u201c\u7ed3\u5c3e\u201d\u610f\u601d\u662f\u201c\u7a7a\u683c\u201d\u6216\u662f\u201c\u7ed3\u675f\u7b26\u201d\u3002 \u8fd8\u662f\u770b\u4e00\u4e2a\u793a\u4f8b\u5427\uff1a .. code:: makefile foo := a.o b.o c.o bar := $(foo:.o=.c) \u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2a $(foo) \u53d8\u91cf\uff0c\u800c\u7b2c\u4e8c\u884c\u7684\u610f\u601d\u662f\u628a $(foo) \u4e2d\u6240\u6709\u4ee5 .o \u5b57\u4e32\u201c\u7ed3\u5c3e\u201d\u5168\u90e8\u66ff\u6362\u6210 .c \uff0c\u6240\u4ee5\u6211\u4eec\u7684 $(bar) \u7684\u503c\u5c31\u662f\u201ca.c b.c c.c\u201d\u3002 \u53e6\u5916\u4e00\u79cd\u53d8\u91cf\u66ff\u6362\u7684\u6280\u672f\u662f\u4ee5\u201c\u9759\u6001\u6a21\u5f0f\u201d\uff08\u53c2\u89c1\u524d\u9762\u7ae0\u8282\uff09\u5b9a\u4e49\u7684\uff0c\u5982\uff1a .. code:: makefile foo := a.o b.o c.o bar := $(foo:%.o=%.c) \u8fd9\u4f9d\u8d56\u4e8e\u88ab\u66ff\u6362\u5b57\u4e32\u4e2d\u7684\u6709\u76f8\u540c\u7684\u6a21\u5f0f\uff0c\u6a21\u5f0f\u4e2d\u5fc5\u987b\u5305\u542b\u4e00\u4e2a % \u5b57\u7b26\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u540c\u6837\u8ba9 $(bar) \u53d8\u91cf\u7684\u503c\u4e3a\u201ca.c b.c c.c\u201d\u3002 \u7b2c\u4e8c\u79cd\u9ad8\u7ea7\u7528\u6cd5\u662f\u2014\u2014\u201c\u628a\u53d8\u91cf\u7684\u503c\u518d\u5f53\u6210\u53d8\u91cf\u201d\u3002\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile x = y y = z a := $($(x)) \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c$(x)\u7684\u503c\u662f\u201cy\u201d\uff0c\u6240\u4ee5$($(x))\u5c31\u662f$(y)\uff0c\u4e8e\u662f$(a)\u7684\u503c\u5c31\u662f\u201cz\u201d\u3002\uff08\u6ce8\u610f\uff0c\u662f\u201cx=y\u201d\uff0c\u800c\u4e0d\u662f\u201cx=$(y)\u201d\uff09 \u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528\u66f4\u591a\u7684\u5c42\u6b21\uff1a .. code:: makefile x = y y = z z = u a := $($($(x))) \u8fd9\u91cc\u7684 $(a) \u7684\u503c\u662f\u201cu\u201d\uff0c\u76f8\u5173\u7684\u63a8\u5bfc\u7559\u7ed9\u8bfb\u8005\u81ea\u5df1\u53bb\u505a\u5427\u3002 \u8ba9\u6211\u4eec\u518d\u590d\u6742\u4e00\u70b9\uff0c\u4f7f\u7528\u4e0a\u201c\u5728\u53d8\u91cf\u5b9a\u4e49\u4e2d\u4f7f\u7528\u53d8\u91cf\u201d\u7684\u7b2c\u4e00\u4e2a\u65b9\u5f0f\uff0c\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a .. code:: makefile x = $(y) y = z z = Hello a := $($(x)) \u8fd9\u91cc\u7684 $($(x)) \u88ab\u66ff\u6362\u6210\u4e86 $($(y)) \uff0c\u56e0\u4e3a $(y) \u503c\u662f\u201cz\u201d\uff0c\u6240\u4ee5\uff0c\u6700\u7ec8\u7ed3\u679c\u662f\uff1a a:=$(z) \uff0c\u4e5f\u5c31\u662f\u201cHello\u201d\u3002 \u518d\u590d\u6742\u4e00\u70b9\uff0c\u6211\u4eec\u518d\u52a0\u4e0a\u51fd\u6570\uff1a .. code:: makefile x = variable1 variable2 := Hello y = $(subst 1,2,$(x)) z = y a := $($($(z))) \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c $($($(z))) \u6269\u5c55\u4e3a $($(y)) \uff0c\u800c\u5176\u518d\u6b21\u88ab\u6269\u5c55\u4e3a $($(subst 1,2,$(x))) \u3002 $(x) \u7684\u503c\u662f\u201cvariable1\u201d\uff0csubst\u51fd\u6570\u628a\u201cvariable1\u201d\u4e2d\u7684\u6240\u6709\u201c1\u201d\u5b57\u4e32\u66ff\u6362\u6210\u201c2\u201d\u5b57\u4e32\uff0c\u4e8e\u662f\uff0c\u201cvariable1\u201d\u53d8\u6210 \u201cvariable2\u201d\uff0c\u518d\u53d6\u5176\u503c\uff0c\u6240\u4ee5\uff0c\u6700\u7ec8\uff0c $(a) \u7684\u503c\u5c31\u662f $(variable2) \u7684\u503c\u2014\u2014\u201cHello\u201d\u3002\uff08\u5594\uff0c\u597d\u4e0d\u5bb9\u6613\uff09 \u5728\u8fd9\u79cd\u65b9\u5f0f\u4e2d\uff0c\u6216\u8981\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u53d8\u91cf\u6765\u7ec4\u6210\u4e00\u4e2a\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u7136\u540e\u518d\u53d6\u5176\u503c\uff1a .. code:: makefile first_second = Hello a = first b = second all = $($a_$b) \u8fd9\u91cc\u7684 $a_$b \u7ec4\u6210\u4e86\u201cfirst_second\u201d\uff0c\u4e8e\u662f\uff0c $(all) \u7684\u503c\u5c31\u662f\u201cHello\u201d\u3002 \u518d\u6765\u770b\u770b\u7ed3\u5408\u7b2c\u4e00\u79cd\u6280\u672f\u7684\u4f8b\u5b50\uff1a .. code:: makefile a_objects := a.o b.o c.o 1_objects := 1.o 2.o 3.o sources := $($(a1)_objects:.o=.c) \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c $(a1) \u7684\u503c\u662f\u201ca\u201d\u7684\u8bdd\uff0c\u90a3\u4e48\uff0c $(sources) \u7684\u503c\u5c31\u662f\u201ca.c b.c c.c\u201d\uff1b\u5982\u679c $(a1) \u7684\u503c\u662f\u201c1\u201d\uff0c\u90a3\u4e48 $(sources) \u7684\u503c\u662f\u201c1.c 2.c 3.c\u201d\u3002 \u518d\u6765\u770b\u4e00\u4e2a\u8fd9\u79cd\u6280\u672f\u548c\u201c\u51fd\u6570\u201d\u4e0e\u201c\u6761\u4ef6\u8bed\u53e5\u201d\u4e00\u540c\u4f7f\u7528\u7684\u4f8b\u5b50\uff1a .. code:: makefile ifdef do_sort func := sort else func := strip endif bar := a d b g q c foo := $($(func) $(bar)) \u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u5982\u679c\u5b9a\u4e49\u4e86\u201cdo_sort\u201d\uff0c\u90a3\u4e48\uff1a foo := $(sort a d b g q c) \uff0c\u4e8e\u662f $(foo) \u7684\u503c\u5c31\u662f \u201ca b c d g q\u201d\uff0c\u800c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u201cdo_sort\u201d\uff0c\u90a3\u4e48\uff1a foo := $(strip a d b g q c) \uff0c\u8c03\u7528\u7684\u5c31\u662fstrip\u51fd\u6570\u3002 \u5f53\u7136\uff0c\u201c\u628a\u53d8\u91cf\u7684\u503c\u518d\u5f53\u6210\u53d8\u91cf\u201d\u8fd9\u79cd\u6280\u672f\uff0c\u540c\u6837\u53ef\u4ee5\u7528\u5728\u64cd\u4f5c\u7b26\u7684\u5de6\u8fb9: :: dir = foo $(dir)_sources := $(wildcard $(dir)/*.c) define $(dir)_print lpr $($(dir)_sources) endef \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u5b9a\u4e49\u4e86\u4e09\u4e2a\u53d8\u91cf\uff1a\u201cdir\u201d\uff0c\u201cfoo_sources\u201d\u548c\u201cfoo_print\u201d\u3002","title":"\u53d8\u91cf\u9ad8\u7ea7\u7528\u6cd5"},{"location":"makefile/variables/#_4","text":"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 += \u64cd\u4f5c\u7b26\u7ed9\u53d8\u91cf\u8ffd\u52a0\u503c\uff0c\u5982\uff1a .. code:: makefile objects = main.o foo.o bar.o utils.o objects += another.o \u4e8e\u662f\uff0c\u6211\u4eec\u7684 $(objects) \u503c\u53d8\u6210\uff1a\u201cmain.o foo.o bar.o utils.o another.o\u201d\uff08another.o\u88ab\u8ffd\u52a0\u8fdb\u53bb\u4e86\uff09 \u4f7f\u7528 += \u64cd\u4f5c\u7b26\uff0c\u53ef\u4ee5\u6a21\u62df\u4e3a\u4e0b\u9762\u7684\u8fd9\u79cd\u4f8b\u5b50\uff1a .. code:: makefile objects = main.o foo.o bar.o utils.o objects := $(objects) another.o \u6240\u4e0d\u540c\u7684\u662f\uff0c\u7528 += \u66f4\u4e3a\u7b80\u6d01\u3002 \u5982\u679c\u53d8\u91cf\u4e4b\u524d\u6ca1\u6709\u5b9a\u4e49\u8fc7\uff0c\u90a3\u4e48\uff0c += \u4f1a\u81ea\u52a8\u53d8\u6210 = \uff0c\u5982\u679c\u524d\u9762\u6709\u53d8\u91cf\u5b9a\u4e49\uff0c\u90a3\u4e48 += \u4f1a\u7ee7\u627f\u4e8e\u524d\u6b21\u64cd\u4f5c\u7684\u8d4b\u503c\u7b26\u3002\u5982\u679c\u524d\u4e00\u6b21\u7684\u662f := \uff0c\u90a3\u4e48 += \u4f1a\u4ee5 := \u4f5c\u4e3a\u5176\u8d4b\u503c\u7b26\uff0c\u5982\uff1a .. code:: makefile variable := value variable += more \u7b49\u4ef7\u4e8e\uff1a .. code:: makefile variable := value variable := $(variable) more \u4f46\u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5\uff1a .. code:: makefile variable = value variable += more \u7531\u4e8e\u524d\u6b21\u7684\u8d4b\u503c\u7b26\u662f = \uff0c\u6240\u4ee5 += \u4e5f\u4f1a\u4ee5 = \u6765\u505a\u4e3a\u8d4b\u503c\uff0c\u90a3\u4e48\u5c82\u4e0d\u4f1a\u53d1\u751f\u53d8\u91cf\u7684\u9012\u8865\u5f52\u5b9a\u4e49\uff0c\u8fd9\u662f\u5f88\u4e0d\u597d\u7684\uff0c\u6240\u4ee5make\u4f1a\u81ea\u52a8\u4e3a\u6211\u4eec\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u4e0d\u5fc5\u62c5\u5fc3\u8fd9\u4e2a\u95ee\u9898\u3002","title":"\u8ffd\u52a0\u53d8\u91cf\u503c"},{"location":"makefile/variables/#override","text":"\u5982\u679c\u6709\u53d8\u91cf\u662f\u901a\u5e38make\u7684\u547d\u4ee4\u884c\u53c2\u6570\u8bbe\u7f6e\u7684\uff0c\u90a3\u4e48Makefile\u4e2d\u5bf9\u8fd9\u4e2a\u53d8\u91cf\u7684\u8d4b\u503c\u4f1a\u88ab\u5ffd\u7565\u3002\u5982\u679c\u4f60\u60f3\u5728Makefile\u4e2d\u8bbe\u7f6e\u8fd9\u7c7b\u53c2\u6570\u7684\u503c\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u201coverride\u201d\u6307\u793a\u7b26\u3002\u5176\u8bed\u6cd5\u662f: :: override lt;variable gt;; = lt;value gt;; override lt;variable gt;; := lt;value gt;; \u5f53\u7136\uff0c\u4f60\u8fd8\u53ef\u4ee5\u8ffd\u52a0: :: override lt;variable gt;; += lt;more text gt;; \u5bf9\u4e8e\u591a\u884c\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u6211\u4eec\u7528define\u6307\u793a\u7b26\uff0c\u5728define\u6307\u793a\u7b26\u524d\uff0c\u4e5f\u540c\u6837\u53ef\u4ee5\u4f7f\u7528override\u6307\u793a\u7b26\uff0c\u5982: :: override define foo bar endef","title":"override \u6307\u793a\u7b26"},{"location":"makefile/variables/#_5","text":"\u8fd8\u6709\u4e00\u79cd\u8bbe\u7f6e\u53d8\u91cf\u503c\u7684\u65b9\u6cd5\u662f\u4f7f\u7528define\u5173\u952e\u5b57\u3002\u4f7f\u7528define\u5173\u952e\u5b57\u8bbe\u7f6e\u53d8\u91cf\u7684\u503c\u53ef\u4ee5\u6709\u6362\u884c\uff0c\u8fd9\u6709\u5229\u4e8e\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u547d\u4ee4\uff08\u524d\u9762\u6211\u4eec\u8bb2\u8fc7\u201c\u547d\u4ee4\u5305\u201d\u7684\u6280\u672f\u5c31\u662f\u5229\u7528\u8fd9\u4e2a\u5173\u952e\u5b57\uff09\u3002 define\u6307\u793a\u7b26\u540e\u9762\u8ddf\u7684\u662f\u53d8\u91cf\u7684\u540d\u5b57\uff0c\u800c\u91cd\u8d77\u4e00\u884c\u5b9a\u4e49\u53d8\u91cf\u7684\u503c\uff0c\u5b9a\u4e49\u662f\u4ee5endef \u5173\u952e\u5b57\u7ed3\u675f\u3002\u5176\u5de5\u4f5c\u65b9\u5f0f\u548c\u201c=\u201d\u64cd\u4f5c\u7b26\u4e00\u6837\u3002\u53d8\u91cf\u7684\u503c\u53ef\u4ee5\u5305\u542b\u51fd\u6570\u3001\u547d\u4ee4\u3001\u6587\u5b57\uff0c\u6216\u662f\u5176\u5b83\u53d8\u91cf\u3002\u56e0\u4e3a\u547d\u4ee4\u9700\u8981\u4ee5[Tab]\u952e\u5f00\u5934\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u7528define\u5b9a\u4e49\u7684\u547d\u4ee4\u53d8\u91cf\u4e2d\u6ca1\u6709\u4ee5 Tab \u952e\u5f00\u5934\uff0c\u90a3\u4e48make \u5c31\u4e0d\u4f1a\u628a\u5176\u8ba4\u4e3a\u662f\u547d\u4ee4\u3002 \u4e0b\u9762\u7684\u8fd9\u4e2a\u793a\u4f8b\u5c55\u793a\u4e86define\u7684\u7528\u6cd5: :: define two-lines echo foo echo $(bar) endef","title":"\u591a\u884c\u53d8\u91cf"},{"location":"makefile/variables/#_6","text":"make\u8fd0\u884c\u65f6\u7684\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u53ef\u4ee5\u5728make\u5f00\u59cb\u8fd0\u884c\u65f6\u88ab\u8f7d\u5165\u5230Makefile\u6587\u4ef6\u4e2d\uff0c\u4f46\u662f\u5982\u679cMakefile\u4e2d\u5df2\u5b9a\u4e49\u4e86\u8fd9\u4e2a\u53d8\u91cf\uff0c\u6216\u662f\u8fd9\u4e2a\u53d8\u91cf\u7531make\u547d\u4ee4\u884c\u5e26\u5165\uff0c\u90a3\u4e48\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u7684\u503c\u5c06\u88ab\u8986\u76d6\u3002\uff08\u5982\u679cmake\u6307\u5b9a\u4e86\u201c-e\u201d\u53c2\u6570\uff0c\u90a3\u4e48\uff0c\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u5c06\u8986\u76d6Makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\uff09 \u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u8bbe\u7f6e\u4e86 CFLAGS \u73af\u5883\u53d8\u91cf\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6240\u6709\u7684Makefile\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u4e86\u3002\u8fd9\u5bf9\u4e8e\u6211\u4eec\u4f7f\u7528\u7edf\u4e00\u7684\u7f16\u8bd1\u53c2\u6570\u6709\u6bd4\u8f83\u5927\u7684\u597d\u5904\u3002\u5982\u679cMakefile\u4e2d\u5b9a\u4e49\u4e86CFLAGS\uff0c\u90a3\u4e48\u5219\u4f1a\u4f7f\u7528Makefile\u4e2d\u7684\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u5219\u4f7f\u7528\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u7684\u503c\uff0c\u4e00\u4e2a\u5171\u6027\u548c\u4e2a\u6027\u7684\u7edf\u4e00\uff0c\u5f88\u50cf\u201c\u5168\u5c40\u53d8\u91cf\u201d\u548c\u201c\u5c40\u90e8\u53d8\u91cf\u201d\u7684\u7279\u6027\u3002 \u5f53make\u5d4c\u5957\u8c03\u7528\u65f6\uff08\u53c2\u89c1\u524d\u9762\u7684\u201c\u5d4c\u5957\u8c03\u7528\u201d\u7ae0\u8282\uff09\uff0c\u4e0a\u5c42Makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u4f1a\u4ee5\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u7684\u65b9\u5f0f\u4f20\u9012\u5230\u4e0b\u5c42\u7684Makefile \u4e2d\u3002\u5f53\u7136\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u901a\u8fc7\u547d\u4ee4\u884c\u8bbe\u7f6e\u7684\u53d8\u91cf\u4f1a\u88ab\u4f20\u9012\u3002\u800c\u5b9a\u4e49\u5728\u6587\u4ef6\u4e2d\u7684\u53d8\u91cf\uff0c\u5982\u679c\u8981\u5411\u4e0b\u5c42Makefile\u4f20\u9012\uff0c\u5219\u9700\u8981\u4f7f\u7528exprot\u5173\u952e\u5b57\u6765\u58f0\u660e\u3002\uff08\u53c2\u89c1\u524d\u9762\u7ae0\u8282\uff09 \u5f53\u7136\uff0c\u6211\u5e76\u4e0d\u63a8\u8350\u628a\u8bb8\u591a\u7684\u53d8\u91cf\u90fd\u5b9a\u4e49\u5728\u7cfb\u7edf\u73af\u5883\u4e2d\uff0c\u8fd9\u6837\uff0c\u5728\u6211\u4eec\u6267\u884c\u4e0d\u7528\u7684Makefile\u65f6\uff0c\u62e5\u6709\u7684\u662f\u540c\u4e00\u5957\u7cfb\u7edf\u53d8\u91cf\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5e26\u6765\u66f4\u591a\u7684\u9ebb\u70e6\u3002","title":"\u73af\u5883\u53d8\u91cf"},{"location":"makefile/variables/#_7","text":"\u524d\u9762\u6211\u4eec\u6240\u8bb2\u7684\u5728Makefile\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u90fd\u662f\u201c\u5168\u5c40\u53d8\u91cf\u201d\uff0c\u5728\u6574\u4e2a\u6587\u4ef6\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e9b\u53d8\u91cf\u3002\u5f53\u7136\uff0c\u201c\u81ea\u52a8\u5316\u53d8\u91cf\u201d\u9664\u5916\uff0c\u5982 $ \u7b49\u8fd9\u79cd\u7c7b\u91cf\u7684\u81ea\u52a8\u5316\u53d8\u91cf\u5c31\u5c5e\u4e8e\u201c\u89c4\u5219\u578b\u53d8\u91cf\u201d\uff0c\u8fd9\u79cd\u53d8\u91cf\u7684\u503c\u4f9d\u8d56\u4e8e\u89c4\u5219\u7684\u76ee\u6807\u548c\u4f9d\u8d56\u76ee\u6807\u7684\u5b9a\u4e49\u3002 \u5f53\u7136\uff0c\u6211\u4e5f\u540c\u6837\u53ef\u4ee5\u4e3a\u67d0\u4e2a\u76ee\u6807\u8bbe\u7f6e\u5c40\u90e8\u53d8\u91cf\uff0c\u8fd9\u79cd\u53d8\u91cf\u88ab\u79f0\u4e3a\u201cTarget-specific Variable\u201d\uff0c\u5b83\u53ef\u4ee5\u548c\u201c\u5168\u5c40\u53d8\u91cf\u201d\u540c\u540d\uff0c\u56e0\u4e3a\u5b83\u7684\u4f5c\u7528\u8303\u56f4\u53ea\u5728\u8fd9\u6761\u89c4\u5219\u4ee5\u53ca\u8fde\u5e26\u89c4\u5219\u4e2d\uff0c\u6240\u4ee5\u5176\u503c\u4e5f\u53ea\u5728\u4f5c\u7528\u8303\u56f4\u5185\u6709\u6548\u3002\u800c\u4e0d\u4f1a\u5f71\u54cd\u89c4\u5219\u94fe\u4ee5\u5916\u7684\u5168\u5c40\u53d8\u91cf\u7684\u503c\u3002 \u5176\u8bed\u6cd5\u662f\uff1a .. code:: makefile lt;target ... gt; : lt;variable-assignment gt;; lt;target ... gt; : overide lt;variable-assignment gt; ;\u53ef\u4ee5\u662f\u524d\u9762\u8bb2\u8fc7\u7684\u5404\u79cd\u8d4b\u503c\u8868\u8fbe\u5f0f\uff0c\u5982 = \u3001 := \u3001 += \\ \u6216\u662f ?= \u3002\u7b2c\u4e8c\u4e2a\u8bed\u6cd5\u662f\u9488\u5bf9\u4e8emake\u547d\u4ee4\u884c\u5e26\u5165\u7684\u53d8\u91cf\uff0c\u6216\u662f\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u3002 \u8fd9\u4e2a\u7279\u6027\u975e\u5e38\u7684\u6709\u7528\uff0c\u5f53\u6211\u4eec\u8bbe\u7f6e\u4e86\u8fd9\u6837\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u4f5c\u7528\u5230\u7531\u8fd9\u4e2a\u76ee\u6807\u6240\u5f15\u53d1\u7684\u6240\u6709\u7684\u89c4\u5219\u4e2d\u53bb\u3002\u5982\uff1a .. code:: makefile prog : CFLAGS = - g prog : prog . o foo . o bar . o $ ( CC ) $ ( CFLAGS ) prog . o foo . o bar . o prog . o : prog . c $ ( CC ) $ ( CFLAGS ) prog . c foo . o : foo . c $ ( CC ) $ ( CFLAGS ) foo . c bar . o : bar . c $ ( CC ) $ ( CFLAGS ) bar . c \u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u4e0d\u7ba1\u5168\u5c40\u7684 $(CFLAGS) \u7684\u503c\u662f\u4ec0\u4e48\uff0c\u5728prog\u76ee\u6807\uff0c\u4ee5\u53ca\u5176\u6240\u5f15\u53d1\u7684\u6240\u6709\u89c4\u5219\u4e2d\uff08prog.o foo.o bar.o\u7684\u89c4\u5219\uff09\uff0c $(CFLAGS) \u7684\u503c\u90fd\u662f -g","title":"\u76ee\u6807\u53d8\u91cf"},{"location":"makefile/variables/#_8","text":"\u5728GNU\u7684make\u4e2d\uff0c\u8fd8\u652f\u6301\u6a21\u5f0f\u53d8\u91cf\uff08Pattern-specific Variable\uff09\uff0c\u901a\u8fc7\u4e0a\u9762\u7684\u76ee\u6807\u53d8\u91cf\u4e2d\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u53d8\u91cf\u53ef\u4ee5\u5b9a\u4e49\u5728\u67d0\u4e2a\u76ee\u6807\u4e0a\u3002\u6a21\u5f0f\u53d8\u91cf\u7684\u597d\u5904\u5c31\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u5b9a\u4e00\u79cd\u201c\u6a21\u5f0f\u201d\uff0c\u53ef\u4ee5\u628a\u53d8\u91cf\u5b9a\u4e49\u5728\u7b26\u5408\u8fd9\u79cd\u6a21\u5f0f\u7684\u6240\u6709\u76ee\u6807\u4e0a\u3002 \u6211\u4eec\u77e5\u9053\uff0cmake\u7684\u201c\u6a21\u5f0f\u201d\u4e00\u822c\u662f\u81f3\u5c11\u542b\u6709\u4e00\u4e2a % \u7684\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4ee5\u5982\u4e0b\u65b9\u5f0f\u7ed9\u6240\u6709\u4ee5 .o \u7ed3\u5c3e\u7684\u76ee\u6807\u5b9a\u4e49\u76ee\u6807\u53d8\u91cf\uff1a .. code:: makefile %.o : CFLAGS = -O \u540c\u6837\uff0c\u6a21\u5f0f\u53d8\u91cf\u7684\u8bed\u6cd5\u548c\u201c\u76ee\u6807\u53d8\u91cf\u201d\u4e00\u6837\uff1a .. code:: makefile lt;pattern ... gt;; : lt;variable-assignment gt;; lt;pattern ... gt;; : override lt;variable-assignment gt;; override\u540c\u6837\u662f\u9488\u5bf9\u4e8e\u7cfb\u7edf\u73af\u5883\u4f20\u5165\u7684\u53d8\u91cf\uff0c\u6216\u662fmake\u547d\u4ee4\u884c\u6307\u5b9a\u7684\u53d8\u91cf\u3002","title":"\u6a21\u5f0f\u53d8\u91cf"},{"location":"php/php1_intro/","text":"PHP web\u57fa\u7840\u51fd\u6570\u89e3\u8bfb \u4e00\u4e9b\u7528\u6cd5 error_reporting(E_ALL ^ E_NOTICE); :\u62a5\u544a\u9664E_NOTICE\u5916\u7684\u6240\u6709\u6d88\u606f @set_time_limit(0); :\u8bbe\u7f6e\u4ee3\u7801\u6700\u5927\u6267\u884c\u65f6\u95f4 \u63a7\u5236\u811a\u672c\u4e2d\u6570\u636e\u7684\u8f93\u51fa ob_start(); ob_flush(); ob_clean(); \u5b9a\u4e49\u5e38\u91cf define('IA_ROOT', str_replace(\"\\\\\",'/', dirname(__FILE__))); header header( content-type: text/html; charset=utf-8 ); //\u8bbe\u7f6e\u7f16\u7801 header( location: ./index.php ); //\u8df3\u8f6c header( location: ?refresh );//\u5237\u65b0 setcookie setcookie('action', 'env'); exit(); exit(json_encode($vars)); //\u9000\u51fa\u5e76\u8f93\u51fa\u4e00\u6bb5\u4fe1\u606f extension_loaded \u68c0\u67e5\u6a21\u5757\u662f\u5426\u5f00\u542f \u4f5c\u7528\u57df \u51fd\u6570\u4f5c\u7528\u57df,\u4e0e\u62ec\u53f7\u65e0\u5173 \u57fa\u7840\u8bed\u6cd5 ?php // \u6b64\u5904\u662f PHP \u4ee3\u7801 ? \u6ce8\u91ca ?php // \u8fd9\u662f\u5355\u884c\u6ce8\u91ca # \u8fd9\u4e5f\u662f\u5355\u884c\u6ce8\u91ca /* \u8fd9\u662f\u591a\u884c\u6ce8\u91ca\u5757 \u5b83\u6a2a\u8de8\u4e86 \u591a\u884c */ ?","title":"\u57fa\u7840\u4ecb\u7ecd"},{"location":"php/php1_intro/#php-web","text":"","title":"PHP web\u57fa\u7840\u51fd\u6570\u89e3\u8bfb"},{"location":"php/php1_intro/#_1","text":"error_reporting(E_ALL ^ E_NOTICE); :\u62a5\u544a\u9664E_NOTICE\u5916\u7684\u6240\u6709\u6d88\u606f @set_time_limit(0); :\u8bbe\u7f6e\u4ee3\u7801\u6700\u5927\u6267\u884c\u65f6\u95f4 \u63a7\u5236\u811a\u672c\u4e2d\u6570\u636e\u7684\u8f93\u51fa ob_start(); ob_flush(); ob_clean(); \u5b9a\u4e49\u5e38\u91cf define('IA_ROOT', str_replace(\"\\\\\",'/', dirname(__FILE__))); header header( content-type: text/html; charset=utf-8 ); //\u8bbe\u7f6e\u7f16\u7801 header( location: ./index.php ); //\u8df3\u8f6c header( location: ?refresh );//\u5237\u65b0 setcookie setcookie('action', 'env'); exit(); exit(json_encode($vars)); //\u9000\u51fa\u5e76\u8f93\u51fa\u4e00\u6bb5\u4fe1\u606f extension_loaded \u68c0\u67e5\u6a21\u5757\u662f\u5426\u5f00\u542f","title":"\u4e00\u4e9b\u7528\u6cd5"},{"location":"php/php1_intro/#_2","text":"\u51fd\u6570\u4f5c\u7528\u57df,\u4e0e\u62ec\u53f7\u65e0\u5173","title":"\u4f5c\u7528\u57df"},{"location":"php/php1_intro/#_3","text":"?php // \u6b64\u5904\u662f PHP \u4ee3\u7801 ?","title":"\u57fa\u7840\u8bed\u6cd5"},{"location":"php/php1_intro/#_4","text":"?php // \u8fd9\u662f\u5355\u884c\u6ce8\u91ca # \u8fd9\u4e5f\u662f\u5355\u884c\u6ce8\u91ca /* \u8fd9\u662f\u591a\u884c\u6ce8\u91ca\u5757 \u5b83\u6a2a\u8de8\u4e86 \u591a\u884c */ ?","title":"\u6ce8\u91ca"},{"location":"php/php1_mac/","text":"MAC PHP\u73af\u5883\u5b89\u88c5 \u96c6\u6210\u73af\u5883 XAMPP http://www.apachefriends.org/zh_cn/xampp.html http://www.xampps.com/ phpstudy http://www.phpstudy.net/a.php/208.html Wamp http://www.wampserver.com/en/ easyphp http://www.easyphp.org/ ampps http://www.ampps.com/ mamp https://www.mamp.info/en/ \u5b89\u88c5\u73af\u5883 php mac\u81ea\u5e26\u7684php\u8def\u5f84: /private/etc/php.ini.default for nginx: brew install php55 --with-fpm #Nginx for apache brew install php55 #Apache php-mysql brew install php55-mysql apache mac\u81ea\u5e26\u7684apache\u8def\u5f84: /etc/apache2/ \u5f00\u542fapache sudo apachectl start","title":"Php1 mac"},{"location":"php/php1_mac/#mac-php","text":"","title":"MAC PHP\u73af\u5883\u5b89\u88c5"},{"location":"php/php1_mac/#_1","text":"XAMPP http://www.apachefriends.org/zh_cn/xampp.html http://www.xampps.com/ phpstudy http://www.phpstudy.net/a.php/208.html Wamp http://www.wampserver.com/en/ easyphp http://www.easyphp.org/ ampps http://www.ampps.com/ mamp https://www.mamp.info/en/","title":"\u96c6\u6210\u73af\u5883"},{"location":"php/php1_mac/#_2","text":"","title":"\u5b89\u88c5\u73af\u5883"},{"location":"php/php1_mac/#php","text":"mac\u81ea\u5e26\u7684php\u8def\u5f84: /private/etc/php.ini.default for nginx: brew install php55 --with-fpm #Nginx for apache brew install php55 #Apache php-mysql brew install php55-mysql","title":"php"},{"location":"php/php1_mac/#apache","text":"mac\u81ea\u5e26\u7684apache\u8def\u5f84: /etc/apache2/ \u5f00\u542fapache sudo apachectl start","title":"apache"},{"location":"php/php2_data/","text":"","title":"Php2 data"},{"location":"program/tail_call/","text":"Tail_call https://en.wikipedia.org/wiki/Tail_call https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8","title":"Tail call"},{"location":"program/tail_call/#tail_call","text":"https://en.wikipedia.org/wiki/Tail_call https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8","title":"Tail_call"},{"location":"python/py1_intro/","text":"Python 3 \u5165\u95e8\u4ecb\u7ecd python \u7b80\u4ecb Python\u662f\u4e00\u79cd\u89e3\u91ca\u578b\u3001\u9762\u5411\u5bf9\u8c61\u3001\u52a8\u6001\u6570\u636e\u7c7b\u578b\u7684\u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00.\u8bbe\u8ba1\u8005\u5f00\u53d1\u65f6\u603b\u7684\u6307\u5bfc\u601d\u60f3\u662f\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u7279\u5b9a\u7684\u95ee\u9898\uff0c\u53ea\u8981\u6709\u4e00\u79cd\u6700\u597d\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u5c31\u597d\u4e86.Python\u662f\u5b8c\u5168\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u3002\u51fd\u6570\u3001\u6a21\u5757\u3001\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u90fd\u662f\u5bf9\u8c61\u3002\u5e76\u4e14\u5b8c\u5168\u652f\u6301\u7ee7\u627f\u3001\u91cd\u8f7d\u3001\u6d3e\u751f\u3001\u591a\u7ee7\u627f\uff0c\u6709\u76ca\u4e8e\u589e\u5f3a\u6e90\u4ee3\u7801\u7684\u590d\u7528\u6027\u3002Python\u652f\u6301\u91cd\u8f7d\u8fd0\u7b97\u7b26\u548c\u52a8\u6001\u7c7b\u578b,python\u5e94\u7528\u5f88\u5e7f\u6cdb(\u7cfb\u7edf\u7f16\u7a0b \u56fe\u5f62\u5904\u7406 \u6570\u5b66\u5904\u7406 \u6587\u672c\u5904\u7406 \u6570\u636e\u5e93\u7f16\u7a0b \u7f51\u7edc\u7f16\u7a0b Web\u7f16\u7a0b \u591a\u5a92\u4f53\u5e94\u7528). python 3 \u7684\u53d8\u5316 https://gist.github.com/scturtle/3060332 \u5f00\u53d1\u73af\u5883 python: http://www.python.org/getit/ IDE : eclipse + pydev \u5b89\u88c5\u5b8cpydev\u540e \u914d\u7f6epython\u89e3\u91ca\u5668 ](http://farwmarth.com/?attachment_id=471) \u8bed\u6cd5 \u7f29\u8fdb Python\u5f00\u53d1\u8005\u6709\u610f\u8ba9\u8fdd\u53cd\u4e86\u7f29\u8fdb\u89c4\u5219\u7684\u7a0b\u5e8f\u4e0d\u80fd\u901a\u8fc7\u7f16\u8bd1\uff0c\u4ee5\u6b64\u6765\u5f3a\u5236\u7a0b\u5e8f\u5458\u517b\u6210\u826f\u597d\u7684\u7f16\u7a0b\u4e60\u60ef\u3002\u5e76\u4e14\u5728Python\u8bed\u8a00\u91cc\uff0c\u7f29\u8fdb\u800c\u975e\u82b1\u62ec\u53f7\u6216\u8005\u67d0\u79cd\u5173\u952e\u5b57\uff0c\u88ab\u7528\u4e8e\u8868\u793a\u8bed\u53e5\u5757\u7684\u5f00\u59cb\u548c\u9000\u51fa\u3002\u589e\u52a0\u7f29\u8fdb\u8868\u793a\u8bed\u53e5\u5757\u7684\u5f00\u59cb\uff0c\u800c\u51cf\u5c11\u7f29\u8fdb\u5219\u8868\u793a\u8bed\u53e5\u5757\u7684\u9000\u51fa\u3002\u7f29\u8fdb\u6210\u4e3a\u4e86\u8bed\u6cd5\u7684\u4e00\u90e8\u5206\u3002\u4f8b\u5982 if age 21 : print ( \u4f60\u4e0d\u80fd\u8cb7\u9152\u3002 ) print ( \u4e0d\u904e\u4f60\u80fd\u8cb7\u53e3\u9999\u7cd6\u3002 ) print ( \u9019\u53e5\u8a71\u8655\u65bcif\u8a9e\u53e5\u584a\u7684\u5916\u9762\u3002 ) \u6839\u636ePEP\u7684\u89c4\u5b9a\uff0c\u5fc5\u987b\u4f7f\u75284\u4e2a\u7a7a\u683c\u6765\u8868\u793a\u6bcf\u7ea7\u7f29\u8fdb\u3002\u4f7f\u7528Tab\u5b57\u7b26\u548c\u5176\u5b83\u6570\u76ee\u7684\u7a7a\u683c\u867d\u7136\u90fd\u53ef\u4ee5\u7f16\u8bd1\u901a\u8fc7\uff0c\u4f46\u4e0d\u7b26\u5408\u7f16\u7801\u89c4\u8303\u3002\u652f\u6301Tab\u5b57\u7b26\u548c\u5176\u5b83\u6570\u76ee\u7684\u7a7a\u683c\u4ec5\u4ec5\u662f\u4e3a\u4e86\u517c\u5bb9\u5f88\u65e7\u7684Python\u7a0b\u5e8f\u548c\u67d0\u4e9b\u6709\u95ee\u9898\u7684\u7f16\u8f91\u5668\u3002 \u6ce8\u91ca \u6807\u793a\u6ce8\u91ca:\u4ee5 # \u53f7\u5f00\u5934\uff0c\u4e00\u884c\u90fd\u4e3a\u6ce8\u91ca\u5185\u5bb9 \u6587\u6863\u6ce8\u91ca: \u2018\u2018\u2018 \u4e09\u4e2a\u5355\u5f15\u53f7\u5f00\u5934\uff0c\u4e09\u4e2a\u5355\u5f15\u53f7\u7ed3\u5c3e \u8f93\u5165\u8f93\u51fa \u8f93\u51fa: print #\u591a\u53c2\u6570\u8f93\u51fa print ( hello , world ) #\u683c\u5f0f\u8f93\u51fa pi = 3.14 print ( %d ,haha % 3 ) \u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u8f6c\u6362\u7c7b\u578b \u8f6c\u6362\u7c7b\u578b \u542b\u4e49 d,i \u5e26\u7b26\u53f7\u7684\u5341\u8fdb\u5236\u6574\u6570 o \u4e0d\u5e26\u7b26\u53f7\u7684\u516b\u8fdb\u5236 u \u4e0d\u5e26\u7b26\u53f7\u7684\u5341\u8fdb\u5236 x \u4e0d\u5e26\u7b26\u53f7\u7684\u5341\u516d\u8fdb\u5236\uff08\u5c0f\u5199\uff09 X \u4e0d\u5e26\u7b26\u53f7\u7684\u5341\u516d\u8fdb\u5236\uff08\u5927\u5199\uff09 e \u79d1\u5b66\u8ba1\u6570\u6cd5\u8868\u793a\u7684\u6d6e\u70b9\u6570\uff08\u5c0f\u5199\uff09 E \u79d1\u5b66\u8ba1\u6570\u6cd5\u8868\u793a\u7684\u6d6e\u70b9\u6570\uff08\u5927\u5199\uff09 f,F \u5341\u8fdb\u5236\u6d6e\u70b9\u6570 g \u5982\u679c\u6307\u6570\u5927\u4e8e-4\u6216\u8005\u5c0f\u4e8e\u7cbe\u5ea6\u503c\u5219\u548ce\u76f8\u540c\uff0c\u5176\u4ed6\u60c5\u51b5\u548cf\u76f8\u540c G \u5982\u679c\u6307\u6570\u5927\u4e8e-4\u6216\u8005\u5c0f\u4e8e\u7cbe\u5ea6\u503c\u5219\u548cE\u76f8\u540c\uff0c\u5176\u4ed6\u60c5\u51b5\u548cF\u76f8\u540c C \u5355\u5b57\u7b26\uff08\u63a5\u53d7\u6574\u6570\u6216\u8005\u5355\u5b57\u7b26\u5b57\u7b26\u4e32\uff09 r \u5b57\u7b26\u4e32\uff08\u4f7f\u7528repr\u8f6c\u6362\u4efb\u610fpython\u5bf9\u8c61) |s | \u5b57\u7b26\u4e32\uff08\u4f7f\u7528str\u8f6c\u6362\u4efb\u610fpython\u5bf9\u8c61\uff09| \u8f93\u5165: input name = input ( please enter your name: ) print ( hello , name )","title":"\u8bed\u8a00\u7b80\u4ecb"},{"location":"python/py1_intro/#python-3","text":"","title":"Python 3 \u5165\u95e8\u4ecb\u7ecd"},{"location":"python/py1_intro/#python","text":"Python\u662f\u4e00\u79cd\u89e3\u91ca\u578b\u3001\u9762\u5411\u5bf9\u8c61\u3001\u52a8\u6001\u6570\u636e\u7c7b\u578b\u7684\u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00.\u8bbe\u8ba1\u8005\u5f00\u53d1\u65f6\u603b\u7684\u6307\u5bfc\u601d\u60f3\u662f\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u7279\u5b9a\u7684\u95ee\u9898\uff0c\u53ea\u8981\u6709\u4e00\u79cd\u6700\u597d\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u5c31\u597d\u4e86.Python\u662f\u5b8c\u5168\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\u3002\u51fd\u6570\u3001\u6a21\u5757\u3001\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u90fd\u662f\u5bf9\u8c61\u3002\u5e76\u4e14\u5b8c\u5168\u652f\u6301\u7ee7\u627f\u3001\u91cd\u8f7d\u3001\u6d3e\u751f\u3001\u591a\u7ee7\u627f\uff0c\u6709\u76ca\u4e8e\u589e\u5f3a\u6e90\u4ee3\u7801\u7684\u590d\u7528\u6027\u3002Python\u652f\u6301\u91cd\u8f7d\u8fd0\u7b97\u7b26\u548c\u52a8\u6001\u7c7b\u578b,python\u5e94\u7528\u5f88\u5e7f\u6cdb(\u7cfb\u7edf\u7f16\u7a0b \u56fe\u5f62\u5904\u7406 \u6570\u5b66\u5904\u7406 \u6587\u672c\u5904\u7406 \u6570\u636e\u5e93\u7f16\u7a0b \u7f51\u7edc\u7f16\u7a0b Web\u7f16\u7a0b \u591a\u5a92\u4f53\u5e94\u7528).","title":"python \u7b80\u4ecb"},{"location":"python/py1_intro/#python-3_1","text":"https://gist.github.com/scturtle/3060332","title":"python 3 \u7684\u53d8\u5316"},{"location":"python/py1_intro/#_1","text":"python: http://www.python.org/getit/ IDE : eclipse + pydev \u5b89\u88c5\u5b8cpydev\u540e \u914d\u7f6epython\u89e3\u91ca\u5668 ](http://farwmarth.com/?attachment_id=471)","title":"\u5f00\u53d1\u73af\u5883"},{"location":"python/py1_intro/#_2","text":"","title":"\u8bed\u6cd5"},{"location":"python/py1_intro/#_3","text":"Python\u5f00\u53d1\u8005\u6709\u610f\u8ba9\u8fdd\u53cd\u4e86\u7f29\u8fdb\u89c4\u5219\u7684\u7a0b\u5e8f\u4e0d\u80fd\u901a\u8fc7\u7f16\u8bd1\uff0c\u4ee5\u6b64\u6765\u5f3a\u5236\u7a0b\u5e8f\u5458\u517b\u6210\u826f\u597d\u7684\u7f16\u7a0b\u4e60\u60ef\u3002\u5e76\u4e14\u5728Python\u8bed\u8a00\u91cc\uff0c\u7f29\u8fdb\u800c\u975e\u82b1\u62ec\u53f7\u6216\u8005\u67d0\u79cd\u5173\u952e\u5b57\uff0c\u88ab\u7528\u4e8e\u8868\u793a\u8bed\u53e5\u5757\u7684\u5f00\u59cb\u548c\u9000\u51fa\u3002\u589e\u52a0\u7f29\u8fdb\u8868\u793a\u8bed\u53e5\u5757\u7684\u5f00\u59cb\uff0c\u800c\u51cf\u5c11\u7f29\u8fdb\u5219\u8868\u793a\u8bed\u53e5\u5757\u7684\u9000\u51fa\u3002\u7f29\u8fdb\u6210\u4e3a\u4e86\u8bed\u6cd5\u7684\u4e00\u90e8\u5206\u3002\u4f8b\u5982 if age 21 : print ( \u4f60\u4e0d\u80fd\u8cb7\u9152\u3002 ) print ( \u4e0d\u904e\u4f60\u80fd\u8cb7\u53e3\u9999\u7cd6\u3002 ) print ( \u9019\u53e5\u8a71\u8655\u65bcif\u8a9e\u53e5\u584a\u7684\u5916\u9762\u3002 ) \u6839\u636ePEP\u7684\u89c4\u5b9a\uff0c\u5fc5\u987b\u4f7f\u75284\u4e2a\u7a7a\u683c\u6765\u8868\u793a\u6bcf\u7ea7\u7f29\u8fdb\u3002\u4f7f\u7528Tab\u5b57\u7b26\u548c\u5176\u5b83\u6570\u76ee\u7684\u7a7a\u683c\u867d\u7136\u90fd\u53ef\u4ee5\u7f16\u8bd1\u901a\u8fc7\uff0c\u4f46\u4e0d\u7b26\u5408\u7f16\u7801\u89c4\u8303\u3002\u652f\u6301Tab\u5b57\u7b26\u548c\u5176\u5b83\u6570\u76ee\u7684\u7a7a\u683c\u4ec5\u4ec5\u662f\u4e3a\u4e86\u517c\u5bb9\u5f88\u65e7\u7684Python\u7a0b\u5e8f\u548c\u67d0\u4e9b\u6709\u95ee\u9898\u7684\u7f16\u8f91\u5668\u3002","title":"\u7f29\u8fdb"},{"location":"python/py1_intro/#_4","text":"\u6807\u793a\u6ce8\u91ca:\u4ee5 # \u53f7\u5f00\u5934\uff0c\u4e00\u884c\u90fd\u4e3a\u6ce8\u91ca\u5185\u5bb9 \u6587\u6863\u6ce8\u91ca: \u2018\u2018\u2018 \u4e09\u4e2a\u5355\u5f15\u53f7\u5f00\u5934\uff0c\u4e09\u4e2a\u5355\u5f15\u53f7\u7ed3\u5c3e","title":"\u6ce8\u91ca"},{"location":"python/py1_intro/#_5","text":"","title":"\u8f93\u5165\u8f93\u51fa"},{"location":"python/py1_intro/#print","text":"#\u591a\u53c2\u6570\u8f93\u51fa print ( hello , world ) #\u683c\u5f0f\u8f93\u51fa pi = 3.14 print ( %d ,haha % 3 )","title":"\u8f93\u51fa:print"},{"location":"python/py1_intro/#_6","text":"\u8f6c\u6362\u7c7b\u578b \u542b\u4e49 d,i \u5e26\u7b26\u53f7\u7684\u5341\u8fdb\u5236\u6574\u6570 o \u4e0d\u5e26\u7b26\u53f7\u7684\u516b\u8fdb\u5236 u \u4e0d\u5e26\u7b26\u53f7\u7684\u5341\u8fdb\u5236 x \u4e0d\u5e26\u7b26\u53f7\u7684\u5341\u516d\u8fdb\u5236\uff08\u5c0f\u5199\uff09 X \u4e0d\u5e26\u7b26\u53f7\u7684\u5341\u516d\u8fdb\u5236\uff08\u5927\u5199\uff09 e \u79d1\u5b66\u8ba1\u6570\u6cd5\u8868\u793a\u7684\u6d6e\u70b9\u6570\uff08\u5c0f\u5199\uff09 E \u79d1\u5b66\u8ba1\u6570\u6cd5\u8868\u793a\u7684\u6d6e\u70b9\u6570\uff08\u5927\u5199\uff09 f,F \u5341\u8fdb\u5236\u6d6e\u70b9\u6570 g \u5982\u679c\u6307\u6570\u5927\u4e8e-4\u6216\u8005\u5c0f\u4e8e\u7cbe\u5ea6\u503c\u5219\u548ce\u76f8\u540c\uff0c\u5176\u4ed6\u60c5\u51b5\u548cf\u76f8\u540c G \u5982\u679c\u6307\u6570\u5927\u4e8e-4\u6216\u8005\u5c0f\u4e8e\u7cbe\u5ea6\u503c\u5219\u548cE\u76f8\u540c\uff0c\u5176\u4ed6\u60c5\u51b5\u548cF\u76f8\u540c C \u5355\u5b57\u7b26\uff08\u63a5\u53d7\u6574\u6570\u6216\u8005\u5355\u5b57\u7b26\u5b57\u7b26\u4e32\uff09 r \u5b57\u7b26\u4e32\uff08\u4f7f\u7528repr\u8f6c\u6362\u4efb\u610fpython\u5bf9\u8c61) |s | \u5b57\u7b26\u4e32\uff08\u4f7f\u7528str\u8f6c\u6362\u4efb\u610fpython\u5bf9\u8c61\uff09|","title":"\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u8f6c\u6362\u7c7b\u578b"},{"location":"python/py1_intro/#input","text":"name = input ( please enter your name: ) print ( hello , name )","title":"\u8f93\u5165:input"},{"location":"python/py2_data/","text":"Python \u6570\u636e\u7c7b\u578b \u53d8\u91cf \u58f0\u660e\u53d8\u91cf,\u53d8\u91cf\u5b9a\u4e49\u65e0\u9700\u5173\u952e\u5b57,\u5fc5\u987b\u8d4b\u503c\uff0c\u4e0ejs\u4e00\u6837,\u53d8\u91cf\u4e3a\u52a8\u6001\u7c7b\u578b\uff0c\u53d8\u91cf\u7c7b\u578b\u53ef\u53d8\u5316 x = 1 x = True print ( x ) \u591a\u5143\u8d4b\u503c x , y , z = 1 , 2 , 3 \u53d8\u91cf\u4ea4\u6362\u503c x , y = y , x \u6570\u636e\u7c7b\u578b python\u6570\u636e\u7c7b\u578b\u6709\u5f88\u591a\u79cd,\u5e38\u89c1 Booleans \uff3b\u5e03\u5c14\u578b\uff3d\u6216\u4e3aTrue\uff3b\u771f\uff3d\u6216\u4e3aFalse\uff3b\u5047\uff3d\u3002 Numbers \uff3b\u6570\u503c\u578b\uff3d\u53ef\u4ee5\u662fIntegers\uff3b\u6574\u6570\uff3dFloats\uff3b\u6d6e\u70b9\u6570\uff3dFractions\uff3b\u5206\u6570\uff3d(1/2)\u751a\u81f3\u662fComplexNumber\uff3b\u590d\u6570\uff3d\u3002 Lists \uff3b\u5217\u8868\uff3d\u662f\u503c\u7684\u6709\u5e8f\u5e8f\u5217\u3002 Tuples \uff3b\u5143\u7ec4\uff3d\u662f\u6709\u5e8f\u800c\u4e0d\u53ef\u53d8\u7684\u503c\u5e8f\u5217\u3002 Sets\uff3b \u96c6\u5408\uff3d\u662f\u88c5\u6ee1\u65e0\u5e8f\u503c\u7684\u5305\u88f9\u3002 Dictionaries \uff3b\u5b57\u5178\uff3d\u662f\u952e\u503c\u5bf9\u7684\u65e0\u5e8f\u5305\u88f9\u3002 Strings \uff3b\u5b57\u7b26\u4e32\u578b\uff3d\u662fUnicode\u5b57\u7b26\u5e8f\u5217 Bytes \uff3b\u5b57\u8282\uff3d\u548cByteArrays\uff3b\u5b57\u8282\u6570\u7ec4\uff3d\uff0c\u4f8b\u5982:\u4e00\u4efdJPEG\u56fe\u50cf\u6587\u4ef6\u3002 None \u5e03\u5c14\u7c7b\u578b True \u548c False ,\u5e03\u5c14\u503c\u53ef\u4ee5\u7528 and \u3001 or \u548c not \u8fd0\u7b97 three = True True and True True True and False False False and False False 5 3 and 3 1 True \u6570\u503c\u7c7b\u578b python\u7684\u6570\u503c\u7c7b\u578b\u5305\u62ecint,float,\u5206\u6570\u7b49,int\u548cfloat\u4ec5\u901a\u8fc7\u5c0f\u6570\u70b9\u6765\u533a\u5206\u5b83\u4eec. #\u5224\u65ad\u6570\u636e\u7c7b\u578b one = 1 two = 2.0 print ( type ( one )) print ( type ( two )) #\u5224\u65ad\u662f\u5426\u662fint\u7c7b\u578b print ( isinstance ( one , float )) # \u5206\u6570 import fractions print ( fractions . Fraction ( 1 , 2 )) \u5217\u8868(\u6570\u7ec4) :\u53ef\u4ee5\u6709\u76f8\u540c\u5143\u7d20,\u6709\u5e8f a = [ a , b , c , d , e ] #\u7b2c\u4e00\u4e2a print ( a [ 0 ]) #\u5012\u6570\u7b2c\u4e00\u4e2a print ( a [ - 1 ]) #\u7b2c\u4e8c\u4e2a\u5230\u7b2c\u56db\u4e2a\uff0c(\u5305\u62ec\u524d\u4e0d\u5305\u62ec\u672b\u5c3e) print ( a [ 1 : 3 ]) #\u7b2c\u4e00\u4e2a\u5230\u7b2c\u56db\u4e2a print ( a [: 3 ]) #\u7b2c\u4e8c\u4e2a\u5230\u5012\u6570\u7b2c\u4e00\u4e2a print ( a [ 1 : - 1 ]) #\u7b2c\u56db\u4e2a\u5230\u6700\u540e print ( a [ 3 :]) #rang,a=[0,1,2,3,4] a = list ( range ( 5 )) \u8f93\u51fa: a e [ b , c ] [ a , b , c ] [ b , c , d ] [ d , e ] \u5217\u8868\u904d\u5386 x = [ 2 , 5 , 8 ] for y in x : print ( y ) \u5217\u8868\u6dfb\u52a0\u9879 : a = [ a , b , c , d , e ] a = a + [ f ] print ( a ) a . append ( True ) print ( a ) a . insert ( 0 , g ) print ( a ) a . extend ([ h ]) print ( a ) a . append ([ j ]); print ( a ) \u8f93\u51fa: [ a , b , c , d , e , f ] [ a , b , c , d , e , f , True] [ g , a , b , c , d , e , f , True] [ g , a , b , c , d , e , f , True, h ] [ g , a , b , c , d , e , f , True, h , [ j ]] \u52a0\u53f7\u8fde\u63a5\u7b26 :\u4e0d\u9002\u5408\u5904\u7406\u5927\u578b\u5217\u8868\uff0c\u5e94\u8be5\u4ed6\u662f\u521b\u5efa\u65b0\u7684\u5217\u8868\u7136\u540e\u8d4b\u503c\uff0c\u6d88\u8017\u5185\u5b58 insert :\u662f\u624d\u7d22\u5f15\u4f4d\u7f6e\u4e4b\u524d\u63d2\u5165 extend :\u53ea\u53ef\u63a5\u53d7\u5217\u8868 append :\u53ef\u63a5\u53d7\u5217\u8868\u548c\u5355\u72ec\u5143\u7d20 \u5217\u8868\u68c0\u7d22\u503c a = [ a , a , b , c , d , e ] print ( a . count ( a )) print ( a . index ( a )) print ( a in a ) count :\u8ba1\u7b97\u5143\u7d20\u51fa\u73b0\u7684\u6b21\u6570 index :\u8fd4\u56de\u5143\u7d20\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c\u4e0d\u5728\u5728\u4f1a\u5f15\u53d1\u5f02\u5e38 in :\u7528\u4e8e\u641c\u7d22\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u6b64\u5217\u8868\u4e2d\uff0c\u6bd4count\u901f\u5ea6\u5feb \u5217\u8868\u5220\u9664\u5143\u7d20: a = [ a , b , c , d , e ] a . remove ( a ) print ( a ) a . pop () print ( a ) a . pop ( 0 ) print ( a ) remove :\u5220\u9664\u6307\u5b9a\u5143\u7d20\uff0c\u5143\u7d20\u4e0d\u5728\u5728\u4f1a\u5f15\u53d1\u5f02\u5e38 pop :\u4e0d\u5e26\u53c2\u6570\u65f6 \u5220\u9664\u6700\u540e\u4e00\u4e2a\u5143\u7d20,\u7a7a\u5217\u8868\u5f15\u53d1\u5f02\u5e38 \u5143\u7ec4 :\u4e0d\u53ef\u6539\u53d8\u7684\u5217\u8868\uff0c\u7528\u4e8e\u5e38\u91cf arr = ( 1 , 2 , 3 ) a = list ( arr ) print ( a ) b = tuple ( a ) print ( b ) list :\u5c06\u5143\u7ec4\u8f6c\u6362\u6210\u5217\u8868 tuple :\u5c06\u5217\u8868\u8f6c\u6362\u6210\u5143\u7ec4 \u96c6\u5408:\u65e0\u5e8f\uff0c\u552f\u4e00 sets = { 1 , 2 , 3 , 4 } \u4fee\u6539\u96c6\u5408 add :\u53ea\u53ef\u6dfb\u52a0\u4e00\u4e2a\u53c2\u6570,\u4e0d\u80fd\u662f\u96c6\u5408,\u5217\u8868 update :\u53ea\u80fd\u662f\u96c6\u5408\u6216\u5217\u8868,\u53ef\u591a\u4e2a\u53c2\u6570 arr = [ 5 , 6 , 7 ] sets = { 1 , 2 , 3 , 4 } sets . add ( 8 ) print ( sets ) sets . update ( arr ); print ( sets ) \u5220\u9664\u96c6\u5408 discard : \u63a5\u53d7\u4e00\u4e2a\u53c2\u6570,\u4e0d\u4f1a\u5f15\u53d1\u5f02\u5e38 remove :\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570,\u4f1a\u5f15\u53d1\u5f02\u5e38 pop :\u968f\u673a\u5f39\u51fa\u4e00\u4e2a\u5143\u7d20,\u4f1a\u5f15\u53d1\u5f02\u5e38 clear :\u6e05\u9664\u6240\u6709\u503c\uff0c\u76f8\u5f53\u4e8e\u91cd\u7f6e\u96c6\u5408 sets = { 1 , 2 , 3 , 4 } sets . discard ( 1 ) print ( sets ) sets . remove ( 2 ) print ( sets ) sets . pop () print ( sets ) sets . clear () print ( sets ) \u5e38\u89c1\u96c6\u5408\u64cd\u4f5c sets = { 1 , 2 , 3 , 4 } setsA = { 4 , 5 , 6 , 7 } \u5e76\u96c6 setsB = sets . union ( setsA ) print ( setsB ) \u4ea4\u96c6 setsC = sets . intersection ( setsA ) print ( setsC ) \u53ea\u51fa\u73b0\u5728sets\u4e0d\u5728setsA\u4e2d\u7684\u5143\u7d20 setsD = sets . difference ( setsA ) print ( setsD ) \u4e24\u4e2a\u96c6\u5408\u4e0d\u76f8\u540c\u7684\u5143\u7d20\u96c6\u5408 setsE = sets . symmetric_difference ( setsA ) print ( setsE ) sets\u662f\u5426\u662fsetsA\u7684\u5b50\u96c6(sets\u5143\u7d20\u5728setsA\u4e2d\u5168\u6709) print ( sets . issubset ( setsA )) sets\u662f\u5426\u662fsetsA\u7684\u8d85\u96c6 print ( sets . issuperset ( setsA )) \u5b57\u5178:\u6709\u952e\u503c\u5bf9\u7684\u65e0\u5e8f\u96c6\u5408 \u64cd\u4f5c dic = { 1000 : 1 , 2000 : 2 } print ( dic [ 1000 ]) dic [ 1000 ] = 3 print ( dic [ 1000 ]) \u5b57\u5178\u4e0d\u5141\u8bb8\u6709\u91cd\u590d\u503c\uff0c\u5bf9\u73b0\u6709\u952e\u7684\u8d4b\u503c\u4f1a\u8986\u76d6\u65e7\u503c\u3002 \u6dfb\u52a0\u65b0\u952e\u503c\u548c\u4fee\u6539\u503c\u8bed\u6cd5\u4e00\u6837 \u904d\u5386\u5b57\u5178 dict = { a : apple , b : banana , o : orange } for i in dict : print ( dict[ %s ]= % i , dict [ i ] ) for ( k , v ) in dict . items (): print ( dict[ %s ]= % k , v ) \u5b57\u7b26\u4e32 \u683c\u5f0f\u5316 str = myname is {0} print ( str . format ( wujiyu )) dics = [ kb , mb ] \u53c2\u6570\u53ef\u4ee5\u662f\u590d\u5408\u5143\u7d201mb=1024kb strarr = 1{0[1]}=1024{0[0]} print ( strarr . format ( dics )) .1 \u4fdd\u7559\u5230\u5c0f\u6570\u70b9\u7b2c\u4e00\u4f4d print ( {0:.1f}{1} . format ( 698.24 , GB )) \u5176\u4ed6 str = Myname=2 pas=3 \u5c0f\u5199 print ( str . lower ()) \u5206\u6bb5 print ( str . split ( )) \u8ba1\u6570 print ( str . count ( a )) \u5207\u7247 print ( str [ 0 : 3 ]) Byte x = b ABC","title":"\u6570\u636e\u7c7b\u578b"},{"location":"python/py2_data/#python","text":"","title":"Python \u6570\u636e\u7c7b\u578b"},{"location":"python/py2_data/#_1","text":"\u58f0\u660e\u53d8\u91cf,\u53d8\u91cf\u5b9a\u4e49\u65e0\u9700\u5173\u952e\u5b57,\u5fc5\u987b\u8d4b\u503c\uff0c\u4e0ejs\u4e00\u6837,\u53d8\u91cf\u4e3a\u52a8\u6001\u7c7b\u578b\uff0c\u53d8\u91cf\u7c7b\u578b\u53ef\u53d8\u5316 x = 1 x = True print ( x ) \u591a\u5143\u8d4b\u503c x , y , z = 1 , 2 , 3 \u53d8\u91cf\u4ea4\u6362\u503c x , y = y , x","title":"\u53d8\u91cf"},{"location":"python/py2_data/#_2","text":"python\u6570\u636e\u7c7b\u578b\u6709\u5f88\u591a\u79cd,\u5e38\u89c1 Booleans \uff3b\u5e03\u5c14\u578b\uff3d\u6216\u4e3aTrue\uff3b\u771f\uff3d\u6216\u4e3aFalse\uff3b\u5047\uff3d\u3002 Numbers \uff3b\u6570\u503c\u578b\uff3d\u53ef\u4ee5\u662fIntegers\uff3b\u6574\u6570\uff3dFloats\uff3b\u6d6e\u70b9\u6570\uff3dFractions\uff3b\u5206\u6570\uff3d(1/2)\u751a\u81f3\u662fComplexNumber\uff3b\u590d\u6570\uff3d\u3002 Lists \uff3b\u5217\u8868\uff3d\u662f\u503c\u7684\u6709\u5e8f\u5e8f\u5217\u3002 Tuples \uff3b\u5143\u7ec4\uff3d\u662f\u6709\u5e8f\u800c\u4e0d\u53ef\u53d8\u7684\u503c\u5e8f\u5217\u3002 Sets\uff3b \u96c6\u5408\uff3d\u662f\u88c5\u6ee1\u65e0\u5e8f\u503c\u7684\u5305\u88f9\u3002 Dictionaries \uff3b\u5b57\u5178\uff3d\u662f\u952e\u503c\u5bf9\u7684\u65e0\u5e8f\u5305\u88f9\u3002 Strings \uff3b\u5b57\u7b26\u4e32\u578b\uff3d\u662fUnicode\u5b57\u7b26\u5e8f\u5217 Bytes \uff3b\u5b57\u8282\uff3d\u548cByteArrays\uff3b\u5b57\u8282\u6570\u7ec4\uff3d\uff0c\u4f8b\u5982:\u4e00\u4efdJPEG\u56fe\u50cf\u6587\u4ef6\u3002 None","title":"\u6570\u636e\u7c7b\u578b"},{"location":"python/py2_data/#_3","text":"True \u548c False ,\u5e03\u5c14\u503c\u53ef\u4ee5\u7528 and \u3001 or \u548c not \u8fd0\u7b97 three = True True and True True True and False False False and False False 5 3 and 3 1 True","title":"\u5e03\u5c14\u7c7b\u578b"},{"location":"python/py2_data/#_4","text":"python\u7684\u6570\u503c\u7c7b\u578b\u5305\u62ecint,float,\u5206\u6570\u7b49,int\u548cfloat\u4ec5\u901a\u8fc7\u5c0f\u6570\u70b9\u6765\u533a\u5206\u5b83\u4eec. #\u5224\u65ad\u6570\u636e\u7c7b\u578b one = 1 two = 2.0 print ( type ( one )) print ( type ( two )) #\u5224\u65ad\u662f\u5426\u662fint\u7c7b\u578b print ( isinstance ( one , float )) # \u5206\u6570 import fractions print ( fractions . Fraction ( 1 , 2 ))","title":"\u6570\u503c\u7c7b\u578b"},{"location":"python/py2_data/#_5","text":"a = [ a , b , c , d , e ] #\u7b2c\u4e00\u4e2a print ( a [ 0 ]) #\u5012\u6570\u7b2c\u4e00\u4e2a print ( a [ - 1 ]) #\u7b2c\u4e8c\u4e2a\u5230\u7b2c\u56db\u4e2a\uff0c(\u5305\u62ec\u524d\u4e0d\u5305\u62ec\u672b\u5c3e) print ( a [ 1 : 3 ]) #\u7b2c\u4e00\u4e2a\u5230\u7b2c\u56db\u4e2a print ( a [: 3 ]) #\u7b2c\u4e8c\u4e2a\u5230\u5012\u6570\u7b2c\u4e00\u4e2a print ( a [ 1 : - 1 ]) #\u7b2c\u56db\u4e2a\u5230\u6700\u540e print ( a [ 3 :]) #rang,a=[0,1,2,3,4] a = list ( range ( 5 )) \u8f93\u51fa: a e [ b , c ] [ a , b , c ] [ b , c , d ] [ d , e ]","title":"\u5217\u8868(\u6570\u7ec4) :\u53ef\u4ee5\u6709\u76f8\u540c\u5143\u7d20,\u6709\u5e8f"},{"location":"python/py2_data/#_6","text":"x = [ 2 , 5 , 8 ] for y in x : print ( y )","title":"\u5217\u8868\u904d\u5386"},{"location":"python/py2_data/#_7","text":"a = [ a , b , c , d , e ] a = a + [ f ] print ( a ) a . append ( True ) print ( a ) a . insert ( 0 , g ) print ( a ) a . extend ([ h ]) print ( a ) a . append ([ j ]); print ( a ) \u8f93\u51fa: [ a , b , c , d , e , f ] [ a , b , c , d , e , f , True] [ g , a , b , c , d , e , f , True] [ g , a , b , c , d , e , f , True, h ] [ g , a , b , c , d , e , f , True, h , [ j ]] \u52a0\u53f7\u8fde\u63a5\u7b26 :\u4e0d\u9002\u5408\u5904\u7406\u5927\u578b\u5217\u8868\uff0c\u5e94\u8be5\u4ed6\u662f\u521b\u5efa\u65b0\u7684\u5217\u8868\u7136\u540e\u8d4b\u503c\uff0c\u6d88\u8017\u5185\u5b58 insert :\u662f\u624d\u7d22\u5f15\u4f4d\u7f6e\u4e4b\u524d\u63d2\u5165 extend :\u53ea\u53ef\u63a5\u53d7\u5217\u8868 append :\u53ef\u63a5\u53d7\u5217\u8868\u548c\u5355\u72ec\u5143\u7d20","title":"\u5217\u8868\u6dfb\u52a0\u9879 :"},{"location":"python/py2_data/#_8","text":"a = [ a , a , b , c , d , e ] print ( a . count ( a )) print ( a . index ( a )) print ( a in a ) count :\u8ba1\u7b97\u5143\u7d20\u51fa\u73b0\u7684\u6b21\u6570 index :\u8fd4\u56de\u5143\u7d20\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u7d22\u5f15\u4f4d\u7f6e\uff0c\u4e0d\u5728\u5728\u4f1a\u5f15\u53d1\u5f02\u5e38 in :\u7528\u4e8e\u641c\u7d22\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u6b64\u5217\u8868\u4e2d\uff0c\u6bd4count\u901f\u5ea6\u5feb","title":"\u5217\u8868\u68c0\u7d22\u503c"},{"location":"python/py2_data/#_9","text":"a = [ a , b , c , d , e ] a . remove ( a ) print ( a ) a . pop () print ( a ) a . pop ( 0 ) print ( a ) remove :\u5220\u9664\u6307\u5b9a\u5143\u7d20\uff0c\u5143\u7d20\u4e0d\u5728\u5728\u4f1a\u5f15\u53d1\u5f02\u5e38 pop :\u4e0d\u5e26\u53c2\u6570\u65f6 \u5220\u9664\u6700\u540e\u4e00\u4e2a\u5143\u7d20,\u7a7a\u5217\u8868\u5f15\u53d1\u5f02\u5e38","title":"\u5217\u8868\u5220\u9664\u5143\u7d20:"},{"location":"python/py2_data/#_10","text":"arr = ( 1 , 2 , 3 ) a = list ( arr ) print ( a ) b = tuple ( a ) print ( b ) list :\u5c06\u5143\u7ec4\u8f6c\u6362\u6210\u5217\u8868 tuple :\u5c06\u5217\u8868\u8f6c\u6362\u6210\u5143\u7ec4","title":"\u5143\u7ec4 :\u4e0d\u53ef\u6539\u53d8\u7684\u5217\u8868\uff0c\u7528\u4e8e\u5e38\u91cf"},{"location":"python/py2_data/#_11","text":"sets = { 1 , 2 , 3 , 4 }","title":"\u96c6\u5408:\u65e0\u5e8f\uff0c\u552f\u4e00"},{"location":"python/py2_data/#_12","text":"add :\u53ea\u53ef\u6dfb\u52a0\u4e00\u4e2a\u53c2\u6570,\u4e0d\u80fd\u662f\u96c6\u5408,\u5217\u8868 update :\u53ea\u80fd\u662f\u96c6\u5408\u6216\u5217\u8868,\u53ef\u591a\u4e2a\u53c2\u6570 arr = [ 5 , 6 , 7 ] sets = { 1 , 2 , 3 , 4 } sets . add ( 8 ) print ( sets ) sets . update ( arr ); print ( sets )","title":"\u4fee\u6539\u96c6\u5408"},{"location":"python/py2_data/#_13","text":"discard : \u63a5\u53d7\u4e00\u4e2a\u53c2\u6570,\u4e0d\u4f1a\u5f15\u53d1\u5f02\u5e38 remove :\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570,\u4f1a\u5f15\u53d1\u5f02\u5e38 pop :\u968f\u673a\u5f39\u51fa\u4e00\u4e2a\u5143\u7d20,\u4f1a\u5f15\u53d1\u5f02\u5e38 clear :\u6e05\u9664\u6240\u6709\u503c\uff0c\u76f8\u5f53\u4e8e\u91cd\u7f6e\u96c6\u5408 sets = { 1 , 2 , 3 , 4 } sets . discard ( 1 ) print ( sets ) sets . remove ( 2 ) print ( sets ) sets . pop () print ( sets ) sets . clear () print ( sets )","title":"\u5220\u9664\u96c6\u5408"},{"location":"python/py2_data/#_14","text":"sets = { 1 , 2 , 3 , 4 } setsA = { 4 , 5 , 6 , 7 } \u5e76\u96c6 setsB = sets . union ( setsA ) print ( setsB ) \u4ea4\u96c6 setsC = sets . intersection ( setsA ) print ( setsC ) \u53ea\u51fa\u73b0\u5728sets\u4e0d\u5728setsA\u4e2d\u7684\u5143\u7d20 setsD = sets . difference ( setsA ) print ( setsD ) \u4e24\u4e2a\u96c6\u5408\u4e0d\u76f8\u540c\u7684\u5143\u7d20\u96c6\u5408 setsE = sets . symmetric_difference ( setsA ) print ( setsE ) sets\u662f\u5426\u662fsetsA\u7684\u5b50\u96c6(sets\u5143\u7d20\u5728setsA\u4e2d\u5168\u6709) print ( sets . issubset ( setsA )) sets\u662f\u5426\u662fsetsA\u7684\u8d85\u96c6 print ( sets . issuperset ( setsA ))","title":"\u5e38\u89c1\u96c6\u5408\u64cd\u4f5c"},{"location":"python/py2_data/#_15","text":"","title":"\u5b57\u5178:\u6709\u952e\u503c\u5bf9\u7684\u65e0\u5e8f\u96c6\u5408"},{"location":"python/py2_data/#_16","text":"dic = { 1000 : 1 , 2000 : 2 } print ( dic [ 1000 ]) dic [ 1000 ] = 3 print ( dic [ 1000 ]) \u5b57\u5178\u4e0d\u5141\u8bb8\u6709\u91cd\u590d\u503c\uff0c\u5bf9\u73b0\u6709\u952e\u7684\u8d4b\u503c\u4f1a\u8986\u76d6\u65e7\u503c\u3002 \u6dfb\u52a0\u65b0\u952e\u503c\u548c\u4fee\u6539\u503c\u8bed\u6cd5\u4e00\u6837","title":"\u64cd\u4f5c"},{"location":"python/py2_data/#_17","text":"dict = { a : apple , b : banana , o : orange } for i in dict : print ( dict[ %s ]= % i , dict [ i ] ) for ( k , v ) in dict . items (): print ( dict[ %s ]= % k , v )","title":"\u904d\u5386\u5b57\u5178"},{"location":"python/py2_data/#_18","text":"","title":"\u5b57\u7b26\u4e32"},{"location":"python/py2_data/#_19","text":"str = myname is {0} print ( str . format ( wujiyu )) dics = [ kb , mb ] \u53c2\u6570\u53ef\u4ee5\u662f\u590d\u5408\u5143\u7d201mb=1024kb strarr = 1{0[1]}=1024{0[0]} print ( strarr . format ( dics )) .1 \u4fdd\u7559\u5230\u5c0f\u6570\u70b9\u7b2c\u4e00\u4f4d print ( {0:.1f}{1} . format ( 698.24 , GB ))","title":"\u683c\u5f0f\u5316"},{"location":"python/py2_data/#_20","text":"str = Myname=2 pas=3 \u5c0f\u5199 print ( str . lower ()) \u5206\u6bb5 print ( str . split ( )) \u8ba1\u6570 print ( str . count ( a )) \u5207\u7247 print ( str [ 0 : 3 ])","title":"\u5176\u4ed6"},{"location":"python/py2_data/#byte","text":"x = b ABC","title":"Byte"},{"location":"python/py3_controller/","text":"python\u63a7\u5236\u6d41\u7a0b \u6761\u4ef6\u5224\u65ad if \u5224\u65ad # if if True : print ( It is True ) #if ..else age = 18 if age = 18 : print ( adlut ) else : print ( child ) #if ..elif..else v = 1 if v == 1 : print ( v1 ) elif v == 2 : print ( v2 ) else : print ( vother ) \u5faa\u73af python \u5faa\u73af\u4f5c\u7528\u5bf9\u8c61: list , tuple , dict , set , str , generator ,\u8fd9\u4e9b\u53ef\u4ee5\u76f4\u63a5\u4f5c\u7528\u4e8efor\u5faa\u73af\u7684\u5bf9\u8c61\u7edf\u79f0\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61: Iterable for \u5faa\u73af #for...in names = [ a , b , c ] for name in names : print ( name ) # \u52a0\u7d22\u5f15 for index , name in enumerate ( names ): print ( index , name ) # \u591a\u4e2a\u53d8\u91cf for x , y in [( 1 , 1 ), ( 2 , 4 ), ( 3 , 9 )]: print ( x , y ) #\u5faa\u73af\u5b57\u7b26\u4e32 fo_str = hello for word in fo_str : print ( word ) while \u5faa\u73af n = 0 while n 5 : n = n + 1 \u8868\u8fbe\u5f0f print ( 11 / 2 ) #5.5 print ( 11 // 2 ) #5 print ( - 11 // 2 ) #-6 print ( 11.0 // 2 ) #5.0 print ( 11 ** 2 ) #121 print ( 11 % 2 ) #1 / \u8fd0\u7b97\u7b26\u6267\u884c\u6d6e\u70b9\u9664\u6cd5\u3002\u5373\u4fbf\u5206\u5b50\u548c\u5206\u6bcd\u90fd\u662f int\uff0c\u5b83\u4e5f\u8fd4\u56de\u4e00\u4e2a float \u6d6e\u70b9\u6570\u3002 // \u8fd0\u7b97\u7b26\u6267\u884c\u53e4\u602a\u7684\u6574\u6570\u9664\u6cd5\u3002\u5982\u679c\u7ed3\u679c\u4e3a\u6b63\u6570\uff0c\u53ef\u5c06\u5176\u89c6\u4e3a\u671d\u5411\u5c0f\u6570\u4f4d\u53d6\u6574\uff08\u4e0d\u662f\u56db\u820d\u4e94\u5165\uff09\uff0c\u4f46\u662f\u8981\u5c0f\u5fc3\u8fd9\u4e00\u70b9\u3002 \u5f53\u6574\u6570\u9664\u4ee5\u8d1f\u6570\uff0c // \u8fd0\u7b97\u7b26\u5c06\u7ed3\u679c\u671d\u7740\u6700\u8fd1\u7684\u6574\u6570\u201c\u5411\u4e0a\u201d\u56db\u820d\u4e94\u5165\u3002\u4ece\u6570\u5b66\u89d2\u5ea6\u6765\u8bf4\uff0c\u7531\u4e8e \u22126 \u6bd4 \u22125 \u8981\u5c0f\uff0c\u5b83\u662f\u201c\u5411\u4e0b\u201d\u56db\u820d\u4e94\u5165\uff0c\u5982\u679c\u671f\u671b\u5c06\u7ed3\u679c\u53d6\u6574\u4e3a \u22125\uff0c\u5b83\u5c06\u4f1a\u8bef\u5bfc\u4f60\u3002 // \u8fd0\u7b97\u7b26\u5e76\u975e\u603b\u662f\u8fd4\u56de\u6574\u6570\u7ed3\u679c\u3002\u5982\u679c\u5206\u5b50\u6216\u8005\u5206\u6bcd\u662f float\uff0c\u5b83\u4ecd\u5c06\u671d\u7740\u6700\u8fd1\u7684\u6574\u6570\u8fdb\u884c\u56db\u820d\u4e94\u5165\uff0c\u4f46\u5b9e\u9645\u8fd4\u56de\u7684\u503c\u5c06\u4f1a\u662f float \u7c7b\u578b\u3002 ** \u8fd0\u7b97\u7b26\u7684\u610f\u601d\u662f\u201c\u8ba1\u7b97\u5e42\u201d\uff0c112\u7ed3\u679c\u4e3a 121 \u3002 % \u8fd0\u7b97\u7b26\u7ed9\u51fa\u4e86\u8fdb\u884c\u6574\u9664\u4e4b\u540e\u7684\u4f59\u6570\u300211 \u9664\u4ee5 2 \u7ed3\u679c\u4e3a 5 \u4ee5\u53ca\u4f59\u6570 1\uff0c\u56e0\u6b64\u6b64\u5904\u7684\u7ed3\u679c\u4e3a 1\u3002 7 \u4e0d\u652f\u6301\u81ea\u589e(++)\u81ea\u51cf(\u2014)","title":"\u63a7\u5236\u6d41\u7a0b"},{"location":"python/py3_controller/#python","text":"","title":"python\u63a7\u5236\u6d41\u7a0b"},{"location":"python/py3_controller/#_1","text":"","title":"\u6761\u4ef6\u5224\u65ad"},{"location":"python/py3_controller/#if","text":"# if if True : print ( It is True ) #if ..else age = 18 if age = 18 : print ( adlut ) else : print ( child ) #if ..elif..else v = 1 if v == 1 : print ( v1 ) elif v == 2 : print ( v2 ) else : print ( vother )","title":"if\u5224\u65ad"},{"location":"python/py3_controller/#_2","text":"python \u5faa\u73af\u4f5c\u7528\u5bf9\u8c61: list , tuple , dict , set , str , generator ,\u8fd9\u4e9b\u53ef\u4ee5\u76f4\u63a5\u4f5c\u7528\u4e8efor\u5faa\u73af\u7684\u5bf9\u8c61\u7edf\u79f0\u4e3a\u53ef\u8fed\u4ee3\u5bf9\u8c61: Iterable","title":"\u5faa\u73af"},{"location":"python/py3_controller/#for","text":"#for...in names = [ a , b , c ] for name in names : print ( name ) # \u52a0\u7d22\u5f15 for index , name in enumerate ( names ): print ( index , name ) # \u591a\u4e2a\u53d8\u91cf for x , y in [( 1 , 1 ), ( 2 , 4 ), ( 3 , 9 )]: print ( x , y ) #\u5faa\u73af\u5b57\u7b26\u4e32 fo_str = hello for word in fo_str : print ( word )","title":"for\u5faa\u73af"},{"location":"python/py3_controller/#while","text":"n = 0 while n 5 : n = n + 1","title":"while\u5faa\u73af"},{"location":"python/py3_controller/#_3","text":"print ( 11 / 2 ) #5.5 print ( 11 // 2 ) #5 print ( - 11 // 2 ) #-6 print ( 11.0 // 2 ) #5.0 print ( 11 ** 2 ) #121 print ( 11 % 2 ) #1 / \u8fd0\u7b97\u7b26\u6267\u884c\u6d6e\u70b9\u9664\u6cd5\u3002\u5373\u4fbf\u5206\u5b50\u548c\u5206\u6bcd\u90fd\u662f int\uff0c\u5b83\u4e5f\u8fd4\u56de\u4e00\u4e2a float \u6d6e\u70b9\u6570\u3002 // \u8fd0\u7b97\u7b26\u6267\u884c\u53e4\u602a\u7684\u6574\u6570\u9664\u6cd5\u3002\u5982\u679c\u7ed3\u679c\u4e3a\u6b63\u6570\uff0c\u53ef\u5c06\u5176\u89c6\u4e3a\u671d\u5411\u5c0f\u6570\u4f4d\u53d6\u6574\uff08\u4e0d\u662f\u56db\u820d\u4e94\u5165\uff09\uff0c\u4f46\u662f\u8981\u5c0f\u5fc3\u8fd9\u4e00\u70b9\u3002 \u5f53\u6574\u6570\u9664\u4ee5\u8d1f\u6570\uff0c // \u8fd0\u7b97\u7b26\u5c06\u7ed3\u679c\u671d\u7740\u6700\u8fd1\u7684\u6574\u6570\u201c\u5411\u4e0a\u201d\u56db\u820d\u4e94\u5165\u3002\u4ece\u6570\u5b66\u89d2\u5ea6\u6765\u8bf4\uff0c\u7531\u4e8e \u22126 \u6bd4 \u22125 \u8981\u5c0f\uff0c\u5b83\u662f\u201c\u5411\u4e0b\u201d\u56db\u820d\u4e94\u5165\uff0c\u5982\u679c\u671f\u671b\u5c06\u7ed3\u679c\u53d6\u6574\u4e3a \u22125\uff0c\u5b83\u5c06\u4f1a\u8bef\u5bfc\u4f60\u3002 // \u8fd0\u7b97\u7b26\u5e76\u975e\u603b\u662f\u8fd4\u56de\u6574\u6570\u7ed3\u679c\u3002\u5982\u679c\u5206\u5b50\u6216\u8005\u5206\u6bcd\u662f float\uff0c\u5b83\u4ecd\u5c06\u671d\u7740\u6700\u8fd1\u7684\u6574\u6570\u8fdb\u884c\u56db\u820d\u4e94\u5165\uff0c\u4f46\u5b9e\u9645\u8fd4\u56de\u7684\u503c\u5c06\u4f1a\u662f float \u7c7b\u578b\u3002 ** \u8fd0\u7b97\u7b26\u7684\u610f\u601d\u662f\u201c\u8ba1\u7b97\u5e42\u201d\uff0c112\u7ed3\u679c\u4e3a 121 \u3002 % \u8fd0\u7b97\u7b26\u7ed9\u51fa\u4e86\u8fdb\u884c\u6574\u9664\u4e4b\u540e\u7684\u4f59\u6570\u300211 \u9664\u4ee5 2 \u7ed3\u679c\u4e3a 5 \u4ee5\u53ca\u4f59\u6570 1\uff0c\u56e0\u6b64\u6b64\u5904\u7684\u7ed3\u679c\u4e3a 1\u3002 7 \u4e0d\u652f\u6301\u81ea\u589e(++)\u81ea\u51cf(\u2014)","title":"\u8868\u8fbe\u5f0f"},{"location":"python/py4_func/","text":"\u51fd\u6570 \u51fd\u6570\u7b80\u4ecb \u51fd\u6570\u5176\u5b9e\u5c31\u662f\u529f\u80fd\u7684\u62bd\u8c61,\u7528\u4e8e\u5c01\u88c5\u4ee3\u7801.python\u7684 \u5185\u7f6e\u51fd\u6570\u5217\u8868 : \u5b9a\u4e49\u51fd\u6570 #\u5b9a\u4e49\u57fa\u672c\u51fd\u6570 def mymax ( a , b ): if not isinstance ( a , ( int , float )) or not isinstance ( b , ( int , float )): raise TypeError ( bad operand type ) return a b and a or b pass print ( mymax ( 2 , 1 )) \u8fd4\u56de\u591a\u4e2a\u503c #\u8fd4\u56de\u591a\u4e2a\u503c,\u5176\u5b9e\u53ea\u662f\u591a\u4e2a\u503c\u6253\u5305\u5728\u4e00\u8d77\u8fd4\u56de,\u5c31\u662f\u4e00\u4e2atuple def returnmulti ( a , b ): return a , b c , d = returnmulti ( 1 , 2 ) print ( c , d ) \u51fd\u6570\u53c2\u6570 \u9ed8\u8ba4\u53c2\u6570 \u9ed8\u8ba4\u53c2\u6570\u5728\u4f7f\u7528\u662f\u65e0\u9700\u4f20\u5165,\u51cf\u5c11\u8c03\u7528\u7684\u590d\u6742\u6027. def power ( x , n = 2 ): s = 1 while n 0 : n = n - 1 s = s * x return s #power(5),\u76f8\u5f53\u4e8e\u8c03\u7528\u4e86power(5,2) power ( 5 ) \u4fdd\u6301\u9ed8\u8ba4\u53c2\u6570\u4e3a\u4e0d\u53d8\u5bf9\u8c61,\u6216\u8005\u662f\u5728\u5185\u90e8\u4f5c\u5224\u65ad \u9ed8\u8ba4\u53c2\u6570\u5728\u5185\u5b58\u4e2d\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61,\u6240\u4ee5\u5982\u679c\u662f\u8bbe\u7f6e\u4e3a\u53ef\u53d8\u5bf9\u8c61\u7684\u8bdd,\u4f1a\u51fa\u73b0\u53c2\u6570\u4e00\u76f4\u7d2f\u52a0\u7684\u60c5\u51b5 def de_func ( a = []): a . append ( test ) return a print ( de_func ()) print ( de_func ()) \u53ef\u53d8\u53c2\u6570 \u53ef\u53d8\u53c2\u6570\u662f\u5728\u53c2\u6570\u4e2a\u6570\u4e0d\u786e\u5b9a\u4e2a\u6570\u4e0b\u4f7f\u7528,\u7528 * \u53f7\u4ee3\u8868\u53ef\u53d8\u53c2\u6570,\u63a5\u6536\u7684\u662f\u4e00\u4e2a tuple def calc ( * numbers ): sum = 0 for n in numbers : sum = sum + n * n return sum print ( calc ( 1 , 2 )) print ( calc ( 1 , 2 , 3 )) \u5173\u952e\u5b57\u53c2\u6570 \u81ea\u52a8\u5c06\u53c2\u6570\u5c01\u88c5\u6210 dict def dict_params ( ** kw ): print ( kw ) dict_params ( a = 1 ) #output: { a : 1} \u547d\u540d\u5173\u952e\u5b57\u53c2\u6570 #\u9650\u5b9a\u53c2\u6570\u7528*\u53f7\u5206\u5272 def person ( * , city , job ): print ( city , job ) #\u53ea\u80fd\u4f20city,job\u4e24\u4e2a\u53c2\u6570 person ( city = guangzhou , job = gamedevelop ) #\u5982\u679c\u6709\u53ef\u53d8\u53c2\u6570,*\u53f7\u53ef\u7701\u7565 def person1 ( * info , city , job ): print ( info , city , job ) person1 ( 1 , 2 , city = guangzhou , job = gamedevelop ) \u53c2\u6570\u987a\u5e8f \u591a\u79cd\u53c2\u6570\u7c7b\u578b\u53ef\u4ee5\u6df7\u7528,\u4f46\u662f\u53c2\u6570\u5b9a\u4e49\u7684\u987a\u5e8f\u5fc5\u987b\u662f\uff1a\u5fc5\u9009\u53c2\u6570\u3001\u9ed8\u8ba4\u53c2\u6570\u3001\u53ef\u53d8\u53c2\u6570\u3001\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570\u548c\u5173\u952e\u5b57\u53c2\u6570 def f1 ( a , b , c = 0 , * args , ** kw ): print ( a = , a , b = , b , c = , c , args = , args , kw = , kw ) def f2 ( a , b , c = 0 , * , d , ** kw ): print ( a = , a , b = , b , c = , c , d = , d , kw = , kw ) \u9012\u5f52\u51fd\u6570 \u51fd\u6570\u8c03\u7528\u5176\u672c\u8eab\u5c31\u662f\u9012\u5f52 #\u8ba1\u7b97\u9636\u4e58 def fact ( n ): if n == 1 : return 1 return n * fact ( n - 1 ) print ( fact ( 5 )) #\u8ba1\u7b97\u8fc7\u7a0b === fact(5) === 5 * fact(4) === 5 * (4 * fact(3)) === 5 * (4 * (3 * fact(2))) === 5 * (4 * (3 * (2 * fact(1)))) === 5 * (4 * (3 * (2 * 1))) === 5 * (4 * (3 * 2)) === 5 * (4 * 6) === 5 * 24 === 120 \u533f\u540d\u51fd\u6570 lambda \u8bed\u6cd5:\u5192\u53f7\u524d\u662f\u53c2\u6570\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u9017\u53f7\u9694\u5f00\uff0c\u5192\u53f7\u53f3\u8fb9\u7684\u8fd4\u56de\u503c #\u666e\u901a\u51fd\u6570 def f ( x ): return x * 2 f ( 2 ) #lambda f = lambda x : x * 2 f ( 2 )","title":"\u51fd\u6570"},{"location":"python/py4_func/#_1","text":"","title":"\u51fd\u6570"},{"location":"python/py4_func/#_2","text":"\u51fd\u6570\u5176\u5b9e\u5c31\u662f\u529f\u80fd\u7684\u62bd\u8c61,\u7528\u4e8e\u5c01\u88c5\u4ee3\u7801.python\u7684 \u5185\u7f6e\u51fd\u6570\u5217\u8868 :","title":"\u51fd\u6570\u7b80\u4ecb"},{"location":"python/py4_func/#_3","text":"#\u5b9a\u4e49\u57fa\u672c\u51fd\u6570 def mymax ( a , b ): if not isinstance ( a , ( int , float )) or not isinstance ( b , ( int , float )): raise TypeError ( bad operand type ) return a b and a or b pass print ( mymax ( 2 , 1 ))","title":"\u5b9a\u4e49\u51fd\u6570"},{"location":"python/py4_func/#_4","text":"#\u8fd4\u56de\u591a\u4e2a\u503c,\u5176\u5b9e\u53ea\u662f\u591a\u4e2a\u503c\u6253\u5305\u5728\u4e00\u8d77\u8fd4\u56de,\u5c31\u662f\u4e00\u4e2atuple def returnmulti ( a , b ): return a , b c , d = returnmulti ( 1 , 2 ) print ( c , d )","title":"\u8fd4\u56de\u591a\u4e2a\u503c"},{"location":"python/py4_func/#_5","text":"","title":"\u51fd\u6570\u53c2\u6570"},{"location":"python/py4_func/#_6","text":"","title":"\u9ed8\u8ba4\u53c2\u6570"},{"location":"python/py4_func/#_7","text":"def power ( x , n = 2 ): s = 1 while n 0 : n = n - 1 s = s * x return s #power(5),\u76f8\u5f53\u4e8e\u8c03\u7528\u4e86power(5,2) power ( 5 )","title":"\u9ed8\u8ba4\u53c2\u6570\u5728\u4f7f\u7528\u662f\u65e0\u9700\u4f20\u5165,\u51cf\u5c11\u8c03\u7528\u7684\u590d\u6742\u6027."},{"location":"python/py4_func/#_8","text":"\u9ed8\u8ba4\u53c2\u6570\u5728\u5185\u5b58\u4e2d\u4e5f\u662f\u4e00\u4e2a\u5bf9\u8c61,\u6240\u4ee5\u5982\u679c\u662f\u8bbe\u7f6e\u4e3a\u53ef\u53d8\u5bf9\u8c61\u7684\u8bdd,\u4f1a\u51fa\u73b0\u53c2\u6570\u4e00\u76f4\u7d2f\u52a0\u7684\u60c5\u51b5 def de_func ( a = []): a . append ( test ) return a print ( de_func ()) print ( de_func ())","title":"\u4fdd\u6301\u9ed8\u8ba4\u53c2\u6570\u4e3a\u4e0d\u53d8\u5bf9\u8c61,\u6216\u8005\u662f\u5728\u5185\u90e8\u4f5c\u5224\u65ad"},{"location":"python/py4_func/#_9","text":"\u53ef\u53d8\u53c2\u6570\u662f\u5728\u53c2\u6570\u4e2a\u6570\u4e0d\u786e\u5b9a\u4e2a\u6570\u4e0b\u4f7f\u7528,\u7528 * \u53f7\u4ee3\u8868\u53ef\u53d8\u53c2\u6570,\u63a5\u6536\u7684\u662f\u4e00\u4e2a tuple def calc ( * numbers ): sum = 0 for n in numbers : sum = sum + n * n return sum print ( calc ( 1 , 2 )) print ( calc ( 1 , 2 , 3 ))","title":"\u53ef\u53d8\u53c2\u6570"},{"location":"python/py4_func/#_10","text":"\u81ea\u52a8\u5c06\u53c2\u6570\u5c01\u88c5\u6210 dict def dict_params ( ** kw ): print ( kw ) dict_params ( a = 1 ) #output: { a : 1}","title":"\u5173\u952e\u5b57\u53c2\u6570"},{"location":"python/py4_func/#_11","text":"#\u9650\u5b9a\u53c2\u6570\u7528*\u53f7\u5206\u5272 def person ( * , city , job ): print ( city , job ) #\u53ea\u80fd\u4f20city,job\u4e24\u4e2a\u53c2\u6570 person ( city = guangzhou , job = gamedevelop ) #\u5982\u679c\u6709\u53ef\u53d8\u53c2\u6570,*\u53f7\u53ef\u7701\u7565 def person1 ( * info , city , job ): print ( info , city , job ) person1 ( 1 , 2 , city = guangzhou , job = gamedevelop )","title":"\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570"},{"location":"python/py4_func/#_12","text":"\u591a\u79cd\u53c2\u6570\u7c7b\u578b\u53ef\u4ee5\u6df7\u7528,\u4f46\u662f\u53c2\u6570\u5b9a\u4e49\u7684\u987a\u5e8f\u5fc5\u987b\u662f\uff1a\u5fc5\u9009\u53c2\u6570\u3001\u9ed8\u8ba4\u53c2\u6570\u3001\u53ef\u53d8\u53c2\u6570\u3001\u547d\u540d\u5173\u952e\u5b57\u53c2\u6570\u548c\u5173\u952e\u5b57\u53c2\u6570 def f1 ( a , b , c = 0 , * args , ** kw ): print ( a = , a , b = , b , c = , c , args = , args , kw = , kw ) def f2 ( a , b , c = 0 , * , d , ** kw ): print ( a = , a , b = , b , c = , c , d = , d , kw = , kw )","title":"\u53c2\u6570\u987a\u5e8f"},{"location":"python/py4_func/#_13","text":"\u51fd\u6570\u8c03\u7528\u5176\u672c\u8eab\u5c31\u662f\u9012\u5f52 #\u8ba1\u7b97\u9636\u4e58 def fact ( n ): if n == 1 : return 1 return n * fact ( n - 1 ) print ( fact ( 5 )) #\u8ba1\u7b97\u8fc7\u7a0b === fact(5) === 5 * fact(4) === 5 * (4 * fact(3)) === 5 * (4 * (3 * fact(2))) === 5 * (4 * (3 * (2 * fact(1)))) === 5 * (4 * (3 * (2 * 1))) === 5 * (4 * (3 * 2)) === 5 * (4 * 6) === 5 * 24 === 120","title":"\u9012\u5f52\u51fd\u6570"},{"location":"python/py4_func/#lambda","text":"\u8bed\u6cd5:\u5192\u53f7\u524d\u662f\u53c2\u6570\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528\u9017\u53f7\u9694\u5f00\uff0c\u5192\u53f7\u53f3\u8fb9\u7684\u8fd4\u56de\u503c #\u666e\u901a\u51fd\u6570 def f ( x ): return x * 2 f ( 2 ) #lambda f = lambda x : x * 2 f ( 2 )","title":"\u533f\u540d\u51fd\u6570lambda"},{"location":"python/py5_step/","text":"\u5176\u4ed6\u7279\u6027 \u5207\u7247(Slice) \u5207\u7247\u5927\u5927\u7b80\u5316\u4e86\u53d6\u5143\u7d20\u7684\u64cd\u4f5c #\u8bb0\u4f4f\u5207\u7247\u5305\u542b\u5934\u4e0d\u5305\u542b\u5c3e L = [ 1 , 2 , 3 , 4 ] #\u7b2c1,2\u4e2a print ( L [ 0 : 2 ]) #\u590d\u5236\u539f\u6765\u7684list print ( L [:]) \u5217\u8868\u751f\u6210\u5f0f #\u5217\u8868\u751f\u6210\u5668-- [1, 2, 3, 4] print ( list ( range ( 1 , 5 ))) # \u751f\u62101*1,2*2... -- [1, 4, 9, 16] print ([ x * x for x in range ( 1 , 5 )]) #\u7ec4\u5408\u751f\u6210-- [ ac , ad , bc , bd ] print ([ m + n for m in ab for n in cd ]) #\u8c03\u7528\u51fd\u6570 print ([ a . upper () for a in [ a , b ]]) \u751f\u6210\u5668(generator) \u5217\u8868\u751f\u6210\u5f0f\u662f\u76f4\u63a5\u751f\u6210\u5217\u8868,\u6240\u4ee5\u5728\u751f\u6210\u5927\u5217\u8868\u4f1a\u6d88\u8017\u5927\u91cf\u7684\u5185\u5b58. rang \u751f\u6210 \u89e3\u51b3\u529e\u6cd5\u53ea\u662f\u5728\u751f\u6210\u751f\u6210\u5668\u65f6\u628a [] \u6539\u6210\u4e86 () pyton2\u7684\u5173\u952e\u5b57\u662f\u7528 xrang python3\u7684\u5173\u952e\u5b57\u8fd8\u662f\u7528 rang #python2 g = ( x * x for x in xrange ( 10 )) #python3 g = ( x * x for x in range ( 10 )) generator object genexpr at 0x00557620 print ( g ) for x in g : print ( x ) pass yield \u751f\u6210\u5668 \u57fa\u672c\u7528\u6cd5 def ye (): yield 1 yield 2 g = ye () print ( g ) for x in g : print ( x ) output is : generator object ye at 0x00473E18 1 2 yield\u4e2dreturn\u7684\u4f5c\u7528 yield \u4e2d\u65e0\u6cd5 return \u5177\u4f53\u503c\u8fde None \u503c\u90fd\u4e0d\u884c, yield \u4e2d reutrn \u662f\u7528\u6765\u4e2d\u6b62\u751f\u6210\u7684 def ye2 (): yield 1 return None yield 2 g2 = ye2 () for x in g2 : print ( x ) output is : 1 generator \u662f\u7528\u6765\u4ea7\u751f\u4e00\u7cfb\u5217\u503c\u7684 yield \u5219\u50cf\u662f generator \u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c yield \u552f\u4e00\u6240\u505a\u7684\u53e6\u4e00\u4ef6\u4e8b\u5c31\u662f\u4fdd\u5b58\u4e00\u4e2a generator \u51fd\u6570\u7684\u72b6\u6001 generator \u5c31\u662f\u4e00\u4e2a\u7279\u6b8a\u7c7b\u578b\u7684\u8fed\u4ee3\u5668\uff08 iterator \uff09 \u548c\u8fed\u4ee3\u5668\u76f8\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 next() \u6765\u4ece generator \u4e2d\u83b7\u53d6\u4e0b\u4e00\u4e2a\u503c \u901a\u8fc7\u9690\u5f0f\u5730\u8c03\u7528 next() \u6765\u5ffd\u7565\u4e00\u4e9b\u503c \u8fed\u4ee3\u5668 \u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f Iterable \u5bf9\u8c61 from collections import Iterable , Iterator print ( isinstance ([], Iterable )) print ( isinstance ([], Iterator )) print ( isinstance (( x for x in range ( 10 )), Iterable )) print ( isinstance (( x for x in range ( 10 )), Iterator )) output is : True False True True \u51e1\u662f\u53ef\u4f5c\u7528\u4e8e for \u5faa\u73af\u7684\u5bf9\u8c61\u90fd\u662f Iterable \u7c7b\u578b\uff1b \u51e1\u662f\u53ef\u4f5c\u7528\u4e8e next() \u51fd\u6570\u7684\u5bf9\u8c61\u90fd\u662f Iterator \u7c7b\u578b\uff0c\u5b83\u4eec\u8868\u793a\u4e00\u4e2a\u60f0\u6027\u8ba1\u7b97\u7684\u5e8f\u5217\uff1b \u96c6\u5408\u6570\u636e\u7c7b\u578b\u5982 list \u3001 dict \u3001 str \u7b49\u662f Iterable \u4f46\u4e0d\u662f Iterator \uff0c\u4e0d\u8fc7\u53ef\u4ee5\u901a\u8fc7 iter() \u51fd\u6570\u83b7\u5f97\u4e00\u4e2a Iterator \u5bf9\u8c61 \u5176\u5b9e for \u4e5f\u662f\u901a\u8fc7 Iterator \u6765\u5b8c\u6210\u7684 for x in [ 1 , 2 , 3 , 4 , 5 ]: print ( x ) pass #\u7b49\u4ef7\u4e8e it = iter ([ 1 , 2 , 3 , 4 , 5 ]) while True : try : x = next ( it ) print ( x ) except StopIteration : break map map() \u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u4e00\u4e2a\u662f\u51fd\u6570\uff0c\u4e00\u4e2a\u662f Iterable \uff0c map \u5c06\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u5230\u5e8f\u5217\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5e76\u628a\u7ed3\u679c\u4f5c\u4e3a\u65b0\u7684 Iterator \u8fd4\u56de def f ( x ): return x * x #r\u662f\u4e00\u4e2aIterator r = map ( f , [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 ]) print ( list ( r )) reduce reduce \u628a\u4e00\u4e2a\u51fd\u6570\u4f5c\u7528\u5728\u4e00\u4e2a\u5e8f\u5217 [x1, x2, x3, ...] \u4e0a\uff0c\u8fd9\u4e2a\u51fd\u6570\u5fc5\u987b\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c reduce \u628a\u7ed3\u679c\u7ee7\u7eed\u548c\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\u505a\u7d2f\u79ef\u8ba1\u7b97\uff0c\u5176\u6548\u679c\u5c31\u662f\uff1a reduce ( f , [ x1 , x2 , x3 , x4 ]) = f ( f ( f ( x1 , x2 ), x3 ), x4 ) from functools import reduce def add ( x , y ): return x + y print ( reduce ( add , [ 1 , 3 , 5 , 7 , 9 ])) filter filter() \u51fd\u6570\u53ef\u4ee5\u7528\u6765\u7b5b\u9009\u4e00\u4e2a\u961f\u5217 filter() \u4e5f\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u5e8f\u5217.\u548c map() \u4e0d\u540c\u7684\u662f\uff0c filter() \u628a\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u5143\u7d20,\u7136\u540e\u6839\u636e\u8fd4\u56de\u503c\u662f True \u8fd8\u662f False \u51b3\u5b9a\u4fdd\u7559\u8fd8\u662f\u4e22\u5f03\u8be5\u5143\u7d20. \u9009\u62e9\u5947\u6570: def odd ( n ): return n % 2 == 1 odd_arr = filter ( odd ,[ 1 , 2 , 3 , 4 , 5 ]) print ( odd_arr ) [1,3,5] sorted sorted() \u51fd\u6570\u7528\u4e8e\u6392\u5e8f,\u539f\u578b: sort([cmp[, key[, reverse]]]) \u6570\u5b57 #\u6570\u5b57 #\u666e\u901a\u5c0f\u5230\u5927 print ( sorted ([ 1 , 5 , 4 ])) #\u666e\u901a\u5927\u5230\u5c0f print ( sorted ([ 1 , 5 , 4 ], reverse = True )) #\u6309\u81ea\u5b9a\u4e49\u89c4\u5219,\u7edd\u5bf9\u503c print ( sorted ([ 1 , - 5 , 4 ], key = abs )) [1, 4, 5] [5, 4, 1] [1, 4, -5] \u5b57\u7b26\u4e32 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bf9\u5b57\u7b26\u4e32\u6392\u5e8f\uff0c\u662f\u6309\u7167ASCII\u7684\u5927\u5c0f\u6bd4\u8f83\u7684 \u6839\u636eASCII\u6392:0-9(\u5bf9\u5e94\u6570\u503c48-59),A-Z(\u5bf9\u5e94\u6570\u503c65-90),a-z(\u5bf9\u5e94\u6570\u503c97-122) #\u5b57\u7b26\u4e32 #\u9ed8\u8ba4ascii\u5e8f print ( sorted ([ a , C , b ])) print ( sorted ([ boat , cat , boot , too , to , To ])) #\u5ffd\u7565\u5927\u5c0f\u5199 print ( sorted ([ a , C , b ], key = str . lower )) #\u4ece\u77ed\u5230\u957f print ( sorted ([ boat , cat , boot , too , to , To ], key = len )) [ C , a , b ] [ To , boat , boot , cat , to , too ] [ a , b , C ] [ to , To , cat , too , boat , boot ] \u88c5\u9970\u5668 decorator \u5c31\u662f\u4e00\u4e2a\u8fd4\u56de\u51fd\u6570\u7684\u9ad8\u9636\u51fd\u6570,\u5728\u4e0d\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u7ed3\u6784\u4e0b\u8fd0\u884c\u65f6\u6dfb\u52a0\u529f\u80fd,\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684\u4ee3\u7406\u7c7b. import time def log ( func ): def wrapper ( * args , ** kw ): print ( call %s () % func . __name__ ) return func ( * args , ** kw ) return wrapper @log def now (): print ( time . time ()) now () call,now() 1464665858.0853982 \u5e26\u51fd\u6570\u7684\u88c5\u9970\u5668: functools.wraps : __name__ \u7b49\u5c5e\u6027\u590d\u5236\u5230 wrapper() import functools def log ( text ): def decorator ( func ): @functools.wraps ( func ) def wrapper ( * args , ** kw ): print ( %s %s (): % ( text , func . __name__ )) return func ( * args , ** kw ) return wrapper return decorator @log ( execute ) def now (): print ( time . time ()) now () execute now(): 1464666390.31384 Partial function #16\u8fdb\u5236\u8f6c\u6362\u621010\u8fdb\u5236 print ( int ( 100 , base = 16 )) print ( int ( 100 , 16 )) #\u4f7f\u7528functools.partial\u6784\u9020 import functools int2 = functools . partial ( int , base = 16 ) print ( int2 ( 100 )) 256 256 256","title":"\u6b65\u9aa4"},{"location":"python/py5_step/#_1","text":"","title":"\u5176\u4ed6\u7279\u6027"},{"location":"python/py5_step/#slice","text":"\u5207\u7247\u5927\u5927\u7b80\u5316\u4e86\u53d6\u5143\u7d20\u7684\u64cd\u4f5c #\u8bb0\u4f4f\u5207\u7247\u5305\u542b\u5934\u4e0d\u5305\u542b\u5c3e L = [ 1 , 2 , 3 , 4 ] #\u7b2c1,2\u4e2a print ( L [ 0 : 2 ]) #\u590d\u5236\u539f\u6765\u7684list print ( L [:])","title":"\u5207\u7247(Slice)"},{"location":"python/py5_step/#_2","text":"#\u5217\u8868\u751f\u6210\u5668-- [1, 2, 3, 4] print ( list ( range ( 1 , 5 ))) # \u751f\u62101*1,2*2... -- [1, 4, 9, 16] print ([ x * x for x in range ( 1 , 5 )]) #\u7ec4\u5408\u751f\u6210-- [ ac , ad , bc , bd ] print ([ m + n for m in ab for n in cd ]) #\u8c03\u7528\u51fd\u6570 print ([ a . upper () for a in [ a , b ]])","title":"\u5217\u8868\u751f\u6210\u5f0f"},{"location":"python/py5_step/#generator","text":"\u5217\u8868\u751f\u6210\u5f0f\u662f\u76f4\u63a5\u751f\u6210\u5217\u8868,\u6240\u4ee5\u5728\u751f\u6210\u5927\u5217\u8868\u4f1a\u6d88\u8017\u5927\u91cf\u7684\u5185\u5b58.","title":"\u751f\u6210\u5668(generator)"},{"location":"python/py5_step/#rang","text":"\u89e3\u51b3\u529e\u6cd5\u53ea\u662f\u5728\u751f\u6210\u751f\u6210\u5668\u65f6\u628a [] \u6539\u6210\u4e86 () pyton2\u7684\u5173\u952e\u5b57\u662f\u7528 xrang python3\u7684\u5173\u952e\u5b57\u8fd8\u662f\u7528 rang #python2 g = ( x * x for x in xrange ( 10 )) #python3 g = ( x * x for x in range ( 10 )) generator object genexpr at 0x00557620 print ( g ) for x in g : print ( x ) pass","title":"rang\u751f\u6210"},{"location":"python/py5_step/#yield","text":"","title":"yield\u751f\u6210\u5668"},{"location":"python/py5_step/#_3","text":"def ye (): yield 1 yield 2 g = ye () print ( g ) for x in g : print ( x ) output is : generator object ye at 0x00473E18 1 2","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"python/py5_step/#yieldreturn","text":"yield \u4e2d\u65e0\u6cd5 return \u5177\u4f53\u503c\u8fde None \u503c\u90fd\u4e0d\u884c, yield \u4e2d reutrn \u662f\u7528\u6765\u4e2d\u6b62\u751f\u6210\u7684 def ye2 (): yield 1 return None yield 2 g2 = ye2 () for x in g2 : print ( x ) output is : 1 generator \u662f\u7528\u6765\u4ea7\u751f\u4e00\u7cfb\u5217\u503c\u7684 yield \u5219\u50cf\u662f generator \u51fd\u6570\u7684\u8fd4\u56de\u7ed3\u679c yield \u552f\u4e00\u6240\u505a\u7684\u53e6\u4e00\u4ef6\u4e8b\u5c31\u662f\u4fdd\u5b58\u4e00\u4e2a generator \u51fd\u6570\u7684\u72b6\u6001 generator \u5c31\u662f\u4e00\u4e2a\u7279\u6b8a\u7c7b\u578b\u7684\u8fed\u4ee3\u5668\uff08 iterator \uff09 \u548c\u8fed\u4ee3\u5668\u76f8\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 next() \u6765\u4ece generator \u4e2d\u83b7\u53d6\u4e0b\u4e00\u4e2a\u503c \u901a\u8fc7\u9690\u5f0f\u5730\u8c03\u7528 next() \u6765\u5ffd\u7565\u4e00\u4e9b\u503c","title":"yield\u4e2dreturn\u7684\u4f5c\u7528"},{"location":"python/py5_step/#_4","text":"\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f Iterable \u5bf9\u8c61 from collections import Iterable , Iterator print ( isinstance ([], Iterable )) print ( isinstance ([], Iterator )) print ( isinstance (( x for x in range ( 10 )), Iterable )) print ( isinstance (( x for x in range ( 10 )), Iterator )) output is : True False True True \u51e1\u662f\u53ef\u4f5c\u7528\u4e8e for \u5faa\u73af\u7684\u5bf9\u8c61\u90fd\u662f Iterable \u7c7b\u578b\uff1b \u51e1\u662f\u53ef\u4f5c\u7528\u4e8e next() \u51fd\u6570\u7684\u5bf9\u8c61\u90fd\u662f Iterator \u7c7b\u578b\uff0c\u5b83\u4eec\u8868\u793a\u4e00\u4e2a\u60f0\u6027\u8ba1\u7b97\u7684\u5e8f\u5217\uff1b \u96c6\u5408\u6570\u636e\u7c7b\u578b\u5982 list \u3001 dict \u3001 str \u7b49\u662f Iterable \u4f46\u4e0d\u662f Iterator \uff0c\u4e0d\u8fc7\u53ef\u4ee5\u901a\u8fc7 iter() \u51fd\u6570\u83b7\u5f97\u4e00\u4e2a Iterator \u5bf9\u8c61 \u5176\u5b9e for \u4e5f\u662f\u901a\u8fc7 Iterator \u6765\u5b8c\u6210\u7684 for x in [ 1 , 2 , 3 , 4 , 5 ]: print ( x ) pass #\u7b49\u4ef7\u4e8e it = iter ([ 1 , 2 , 3 , 4 , 5 ]) while True : try : x = next ( it ) print ( x ) except StopIteration : break","title":"\u8fed\u4ee3\u5668"},{"location":"python/py5_step/#map","text":"map() \u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u4e00\u4e2a\u662f\u51fd\u6570\uff0c\u4e00\u4e2a\u662f Iterable \uff0c map \u5c06\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u5230\u5e8f\u5217\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u5e76\u628a\u7ed3\u679c\u4f5c\u4e3a\u65b0\u7684 Iterator \u8fd4\u56de def f ( x ): return x * x #r\u662f\u4e00\u4e2aIterator r = map ( f , [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 ]) print ( list ( r ))","title":"map"},{"location":"python/py5_step/#reduce","text":"reduce \u628a\u4e00\u4e2a\u51fd\u6570\u4f5c\u7528\u5728\u4e00\u4e2a\u5e8f\u5217 [x1, x2, x3, ...] \u4e0a\uff0c\u8fd9\u4e2a\u51fd\u6570\u5fc5\u987b\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c reduce \u628a\u7ed3\u679c\u7ee7\u7eed\u548c\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\u505a\u7d2f\u79ef\u8ba1\u7b97\uff0c\u5176\u6548\u679c\u5c31\u662f\uff1a reduce ( f , [ x1 , x2 , x3 , x4 ]) = f ( f ( f ( x1 , x2 ), x3 ), x4 ) from functools import reduce def add ( x , y ): return x + y print ( reduce ( add , [ 1 , 3 , 5 , 7 , 9 ]))","title":"reduce"},{"location":"python/py5_step/#filter","text":"filter() \u51fd\u6570\u53ef\u4ee5\u7528\u6765\u7b5b\u9009\u4e00\u4e2a\u961f\u5217 filter() \u4e5f\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u5e8f\u5217.\u548c map() \u4e0d\u540c\u7684\u662f\uff0c filter() \u628a\u4f20\u5165\u7684\u51fd\u6570\u4f9d\u6b21\u4f5c\u7528\u4e8e\u6bcf\u4e2a\u5143\u7d20,\u7136\u540e\u6839\u636e\u8fd4\u56de\u503c\u662f True \u8fd8\u662f False \u51b3\u5b9a\u4fdd\u7559\u8fd8\u662f\u4e22\u5f03\u8be5\u5143\u7d20. \u9009\u62e9\u5947\u6570: def odd ( n ): return n % 2 == 1 odd_arr = filter ( odd ,[ 1 , 2 , 3 , 4 , 5 ]) print ( odd_arr ) [1,3,5]","title":"filter"},{"location":"python/py5_step/#sorted","text":"sorted() \u51fd\u6570\u7528\u4e8e\u6392\u5e8f,\u539f\u578b: sort([cmp[, key[, reverse]]])","title":"sorted"},{"location":"python/py5_step/#_5","text":"#\u6570\u5b57 #\u666e\u901a\u5c0f\u5230\u5927 print ( sorted ([ 1 , 5 , 4 ])) #\u666e\u901a\u5927\u5230\u5c0f print ( sorted ([ 1 , 5 , 4 ], reverse = True )) #\u6309\u81ea\u5b9a\u4e49\u89c4\u5219,\u7edd\u5bf9\u503c print ( sorted ([ 1 , - 5 , 4 ], key = abs )) [1, 4, 5] [5, 4, 1] [1, 4, -5]","title":"\u6570\u5b57"},{"location":"python/py5_step/#_6","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bf9\u5b57\u7b26\u4e32\u6392\u5e8f\uff0c\u662f\u6309\u7167ASCII\u7684\u5927\u5c0f\u6bd4\u8f83\u7684 \u6839\u636eASCII\u6392:0-9(\u5bf9\u5e94\u6570\u503c48-59),A-Z(\u5bf9\u5e94\u6570\u503c65-90),a-z(\u5bf9\u5e94\u6570\u503c97-122) #\u5b57\u7b26\u4e32 #\u9ed8\u8ba4ascii\u5e8f print ( sorted ([ a , C , b ])) print ( sorted ([ boat , cat , boot , too , to , To ])) #\u5ffd\u7565\u5927\u5c0f\u5199 print ( sorted ([ a , C , b ], key = str . lower )) #\u4ece\u77ed\u5230\u957f print ( sorted ([ boat , cat , boot , too , to , To ], key = len )) [ C , a , b ] [ To , boat , boot , cat , to , too ] [ a , b , C ] [ to , To , cat , too , boat , boot ]","title":"\u5b57\u7b26\u4e32"},{"location":"python/py5_step/#_7","text":"decorator \u5c31\u662f\u4e00\u4e2a\u8fd4\u56de\u51fd\u6570\u7684\u9ad8\u9636\u51fd\u6570,\u5728\u4e0d\u6539\u53d8\u539f\u6709\u51fd\u6570\u7684\u7ed3\u6784\u4e0b\u8fd0\u884c\u65f6\u6dfb\u52a0\u529f\u80fd,\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684\u4ee3\u7406\u7c7b. import time def log ( func ): def wrapper ( * args , ** kw ): print ( call %s () % func . __name__ ) return func ( * args , ** kw ) return wrapper @log def now (): print ( time . time ()) now () call,now() 1464665858.0853982","title":"\u88c5\u9970\u5668"},{"location":"python/py5_step/#_8","text":"functools.wraps : __name__ \u7b49\u5c5e\u6027\u590d\u5236\u5230 wrapper() import functools def log ( text ): def decorator ( func ): @functools.wraps ( func ) def wrapper ( * args , ** kw ): print ( %s %s (): % ( text , func . __name__ )) return func ( * args , ** kw ) return wrapper return decorator @log ( execute ) def now (): print ( time . time ()) now () execute now(): 1464666390.31384","title":"\u5e26\u51fd\u6570\u7684\u88c5\u9970\u5668:"},{"location":"python/py5_step/#partial-function","text":"#16\u8fdb\u5236\u8f6c\u6362\u621010\u8fdb\u5236 print ( int ( 100 , base = 16 )) print ( int ( 100 , 16 )) #\u4f7f\u7528functools.partial\u6784\u9020 import functools int2 = functools . partial ( int , base = 16 ) print ( int2 ( 100 )) 256 256 256","title":"Partial function"},{"location":"python/py6_organize/","text":"python\u6a21\u5757\u7ec4\u7ec7 python\u6a21\u5757 \u6a21\u5757\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027 \u4e00\u4e2a abc.py \u7684\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u540d\u5b57\u53eb abc \u7684\u6a21\u5757 \u6bcf\u4e00\u4e2a\u5305\u76ee\u5f55\u4e0b\u9762\u90fd\u4f1a\u6709\u4e00\u4e2a __init__.py \u7684\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u662f\u5fc5\u987b\u5b58\u5728\u7684\uff0c\u5426\u5219\uff0cPython\u5c31\u628a\u8fd9\u4e2a\u76ee\u5f55\u5f53\u6210\u666e\u901a\u76ee\u5f55 package1 / __init__ . py subPack1 / __init__ . py module_11 . py module_12 . py module_13 . py subPack2 / __init__ . py module_21 . py module_22 . py \u6211\u4eec\u5728 module_11 . py \u4e2d\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570 : def funA (): print funcA in module_11 return \u5728\u9876\u5c42\u76ee\u5f55\uff08\u4e5f\u5c31\u662f package1 \u6240\u5728\u7684\u76ee\u5f55\uff09\u8fd0\u884c python : from package1.subPack1.module_11 import funcA funcA () ----- funcA in module_11 \u4f7f\u7528\u6a21\u5757 import \u5173\u952e\u5b57\u7528\u4e8e\u5bfc\u5165\u6a21\u5757 from \u6807\u660e\u5f15\u7528\u6a21\u5757\u8def\u5f84 import sys if __name == __main__ : print ( sys . argv ) \u6a21\u5757\u641c\u7d22\u8def\u5f84 Python\u89e3\u91ca\u5668\u4f1a\u641c\u7d22\u5f53\u524d\u76ee\u5f55\u3001\u6240\u6709\u5df2\u5b89\u88c5\u7684\u5185\u7f6e\u6a21\u5757\u548c\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u641c\u7d22\u8def\u5f84\u5b58\u653e\u5728sys\u6a21\u5757\u7684path\u53d8\u91cf\u4e2d \u6dfb\u52a0\u81ea\u5df1\u7684\u641c\u7d22\u76ee\u5f55: \u76f4\u63a5\u4fee\u6539sys.path\uff0c\u6dfb\u52a0\u8981\u641c\u7d22\u7684\u76ee\u5f55 import sys sys . path . append ( /Users/michael/my_py_scripts ) \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf PYTHONPATH","title":"\u7ec4\u7ec7"},{"location":"python/py6_organize/#python","text":"","title":"python\u6a21\u5757\u7ec4\u7ec7"},{"location":"python/py6_organize/#python_1","text":"\u6a21\u5757\u63d0\u9ad8\u4e86\u4ee3\u7801\u7684\u53ef\u7ef4\u62a4\u6027 \u4e00\u4e2a abc.py \u7684\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u540d\u5b57\u53eb abc \u7684\u6a21\u5757 \u6bcf\u4e00\u4e2a\u5305\u76ee\u5f55\u4e0b\u9762\u90fd\u4f1a\u6709\u4e00\u4e2a __init__.py \u7684\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u662f\u5fc5\u987b\u5b58\u5728\u7684\uff0c\u5426\u5219\uff0cPython\u5c31\u628a\u8fd9\u4e2a\u76ee\u5f55\u5f53\u6210\u666e\u901a\u76ee\u5f55 package1 / __init__ . py subPack1 / __init__ . py module_11 . py module_12 . py module_13 . py subPack2 / __init__ . py module_21 . py module_22 . py \u6211\u4eec\u5728 module_11 . py \u4e2d\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570 : def funA (): print funcA in module_11 return \u5728\u9876\u5c42\u76ee\u5f55\uff08\u4e5f\u5c31\u662f package1 \u6240\u5728\u7684\u76ee\u5f55\uff09\u8fd0\u884c python : from package1.subPack1.module_11 import funcA funcA () ----- funcA in module_11","title":"python\u6a21\u5757"},{"location":"python/py6_organize/#_1","text":"import \u5173\u952e\u5b57\u7528\u4e8e\u5bfc\u5165\u6a21\u5757 from \u6807\u660e\u5f15\u7528\u6a21\u5757\u8def\u5f84 import sys if __name == __main__ : print ( sys . argv )","title":"\u4f7f\u7528\u6a21\u5757"},{"location":"python/py6_organize/#_2","text":"Python\u89e3\u91ca\u5668\u4f1a\u641c\u7d22\u5f53\u524d\u76ee\u5f55\u3001\u6240\u6709\u5df2\u5b89\u88c5\u7684\u5185\u7f6e\u6a21\u5757\u548c\u7b2c\u4e09\u65b9\u6a21\u5757\uff0c\u641c\u7d22\u8def\u5f84\u5b58\u653e\u5728sys\u6a21\u5757\u7684path\u53d8\u91cf\u4e2d","title":"\u6a21\u5757\u641c\u7d22\u8def\u5f84"},{"location":"python/py6_organize/#_3","text":"","title":"\u6dfb\u52a0\u81ea\u5df1\u7684\u641c\u7d22\u76ee\u5f55:"},{"location":"python/py6_organize/#syspath","text":"import sys sys . path . append ( /Users/michael/my_py_scripts )","title":"\u76f4\u63a5\u4fee\u6539sys.path\uff0c\u6dfb\u52a0\u8981\u641c\u7d22\u7684\u76ee\u5f55"},{"location":"python/py6_organize/#pythonpath","text":"","title":"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cfPYTHONPATH"},{"location":"python/py_class/","text":"python \u7c7b,\u7ee7\u627f \u7c7b python \u662f\u5b8c\u5168\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u627f.\u6240\u6709\u6570\u636e\u7c7b\u578b\u90fd\u4e3a\u5bf9\u8c61\uff0c\u4ee5\u5f15\u7528\u8d4b\u503c \u7c7b\u7684\u5b9a\u4e49 : class DataType : pass class\u4f5c\u4e3a\u7c7b\u58f0\u660e\uff0cpass\u8868\u793a\u7f29\u8fdb\uff0c\u6ca1\u6709\u5176\u4ed6\u542b\u4e49 __init__ \u65b9\u6cd5: \u4ece\u5f62\u5f0f\u4e0a\u6765\u770b\u76f8\u5f53\u4e8ejava\u4e2d\u7684\u6784\u9020\u5668\uff0c\u5728\u7c7b\u5b9e\u4f8b\u540e\u8c03\u7528,\u4f46\u662f\u5728\u6267\u884cINIT\u65b9\u6cd5\u65f6\uff0c\u5bf9\u8c61\u5df2\u7ecf\u5b9e\u4f8b\u5316\u597d\u4e86 class DataType : def __init__ ( self ): print ( self ) flib = DataType () self \u76f8\u5f53\u4e8ejava\u4e2d\u7684this,\u6307\u5411\u8be5\u5b9e\u4f8b,\u5b9e\u4f8b\u5316\u7c7bflib =DataType() \u5e76\u4e0d\u50cfjava\u4e2d\u4e00\u6837\u4f7f\u7528\u663e\u5f0f\u7684new\u5173\u952e\u5b57 \u5b9e\u4f8b\u53d8\u91cf \u7528 self. \u53d8\u91cf\u540d\u6765\u58f0\u660e\u5b9e\u4f8b\u53d8\u91cf. class Flib : def __init__ ( self , max ): self . max = max def iter ( self ): self . a = 0 self . b = 1 return self def next ( self ): fib = self . a if fib self . max : raise StopIteration self . a , self . b = self . b , self . a + self . b return fib \u52a8\u6001\u5c5e\u6027\u4e0e\u9650\u5b9a \u52a8\u6001\u5c5e\u6027 :\u5b9e\u4f8b\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u5c5e\u6027,\u4e0d\u5f71\u54cd\u5176\u4ed6\u5b9e\u4f8b __slots__ :\u9650\u5236\u5b9e\u4f8b\u7684\u5c5e\u6027,\u5b50\u7c7b\u5b9e\u4f8b\u5141\u8bb8\u5b9a\u4e49\u7684\u5c5e\u6027\u5c31\u662f\u81ea\u8eab\u7684 __slots__ \u52a0\u4e0a\u7236\u7c7b\u7684 __slots__ class Student ( object ): __slots__ = ( name ,) docstring for Student def __init__ ( self ): super ( Student , self ) . __init__ () st = Student () st . name = far st . age = 10 #error print ( st . name ) class StudentA ( Student ): __slots__ = ( name , age ) pass sta = StudentA () st . name = far1 sta . age = 1 sta . sex = 1 #error print ( sta . age ) AttributeError: Student object has no attribute age @property class Student ( object ): #\u8bfb @property def score ( self ): return self . _score #\u5199 @score.setter def score ( self , value ): if not isinstance ( value , int ): raise ValueError ( score must be an integer! ) if value 0 or value 100 : raise ValueError ( score must between 0 ~ 100! ) self . _score = value st = Student () st . score = - 1 ValueError: score must between 0 ~ 100! \u8bbf\u95ee\u9650\u5236 \u79c1\u6709\u5c5e\u6027:\u5c5e\u6027\u7684\u540d\u79f0\u524d\u52a0\u4e0a\u4e24\u4e2a\u4e0b\u5212\u7ebf __ class Student ( object ): def __init__ ( self , name , score ): self . __name = name self . __score = score def print_score ( self ): print ( %s : %s % ( self . __name , self . __score )) bart = Student ( Bart Simpson , 98 ) bart . __name AttributeError: Student object has no attribute __name \u57fa\u7840\u65b9\u6cd5 isinstance :\u5224\u65ad\u5bf9\u8c61\u7c7b\u578b print ( isinstance ( bart , Student )) print ( isinstance ( bart , object )) True True type :\u83b7\u53d6\u5bf9\u8c61\u7c7b\u578b,\u521b\u5efa\u65b0\u7684\u7c7b\u578b def de_fun ( self , name = far ): print ( Hi, %s % name ) #type( \u7c7b\u540d ,( \u7ee7\u627f\u7c7b ,),dict(\u5c5e\u6027\u540d=\u5c5e\u6027\u503c)) Hi = type ( Hi ,( object ,), dict ( sayhi = de_fun )) hi = Hi () hi . sayhi () Hi,far type type class __main__.Hi dir :\u83b7\u5f97\u4e00\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5 hasattr , getattr :\u52a8\u6001\u83b7\u53d6\u5bf9\u8c61\u65b9\u6cd5 hasattr ( obj , power ) # \u6709\u5c5e\u6027 power \u5417\uff1f getattr ( obj , power ) # \u83b7\u53d6\u5c5e\u6027 power \u7ecf\u5178\u7c7b \u5b9a\u4e49:\u6ca1\u6709\u7ee7\u627f\u7684\u7c7b,\u6ce8\u610f\uff1a\u5982\u679c\u7ecf\u5178\u7c7b\u88ab\u4f5c\u4e3a\u7236\u7c7b\uff0c\u5b50\u7c7b\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u65f6\u4f1a\u51fa\u9519\u3002 TypeError: must be type, not classobj #\u57fa\u7c7b\uff08\u7ecf\u5178\u7c7b\uff09 class Person : def __init__ ( self ): print Hi, I am a person. #\u5b50\u7c7b class Student ( Person ): def __init__ ( self ): super ( self . __class__ , self ) . __init__ () if __name__ == __main__ : student = Student () #\u51fa\u9519\u5566\uff01TypeError: must be type, not classobj \u65b0\u5f0f\u7c7b \u5b9a\u4e49:\u6bcf\u4e2a\u7c7b\u90fd\u7ee7\u627f\u4e8e\u4e00\u4e2a\u57fa\u7c7b\uff0c\u53ef\u4ee5\u662f\u81ea\u5b9a\u4e49\u7c7b\u6216\u8005\u5176\u5b83\u7c7b\uff0c\u5982\u679c\u4ec0\u4e48\u90fd\u4e0d\u60f3\u7ee7\u627f\uff0c\u90a3\u5c31\u7ee7\u627f\u4e8eobject \u5982\u679c\u60f3\u7528super\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u8bf7\u4f7f\u7528\u65b0\u5f0f\u7c7b\uff01 #\u57fa\u7c7b\uff08\u65b0\u5f0f\u7c7b\uff09 class Person ( object ): def __init__ ( self ): print Hi, I am a person. #\u5b50\u7c7b class Student ( Person ): def __init__ ( self ): super ( self . __class__ , self ) . __init__ () if __name__ == __main__ : student = Student () \u5b9a\u5236\u7c7b __str__ :\u683c\u5f0f\u5316\u8f93\u51fa class Student ( object ): def __init__ ( self , name ): self . name = name def __str__ ( self ): return Student object (name: %s ) % self . name st = Student ( name ) print ( st ) __iter__ :\u683c\u5f0f\u5316\u8f93\u51fa \u5982\u679c\u4e00\u4e2a\u7c7b\u60f3\u88ab\u7528\u4e8e for ... in \u5faa\u73af\uff0c\u7c7b\u4f3clist\u6216tuple\u90a3\u6837\uff0c\u5c31\u5fc5\u987b\u5b9e\u73b0\u4e00\u4e2a __iter__() \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5bf9\u8c61\uff0c\u7136\u540e\uff0cPython\u7684for\u5faa\u73af\u5c31\u4f1a\u4e0d\u65ad\u8c03\u7528\u8be5\u8fed\u4ee3\u5bf9\u8c61\u7684 __next__() \u65b9\u6cd5\u62ff\u5230\u5faa\u73af\u7684\u4e0b\u4e00\u4e2a\u503c\uff0c\u76f4\u5230\u9047\u5230 StopIteration \u9519\u8bef\u65f6\u9000\u51fa\u5faa\u73af class Fib ( object ): def __init__ ( self ): self . a , self . b = 0 , 1 # \u521d\u59cb\u5316\u4e24\u4e2a\u8ba1\u6570\u5668a\uff0cb def __iter__ ( self ): return self # \u5b9e\u4f8b\u672c\u8eab\u5c31\u662f\u8fed\u4ee3\u5bf9\u8c61\uff0c\u6545\u8fd4\u56de\u81ea\u5df1 def __next__ ( self ): self . a , self . b = self . b , self . a + self . b # \u8ba1\u7b97\u4e0b\u4e00\u4e2a\u503c if self . a 100 : # \u9000\u51fa\u5faa\u73af\u7684\u6761\u4ef6 raise StopIteration (); return self . a # \u8fd4\u56de\u4e0b\u4e00\u4e2a\u503c for n in Fib (): print ( n ) __getitem__ :\u4e0b\u6807\u65b9\u5f0f\u8bbf\u95ee\u5bf9\u8c61 class GetItem ( object ): docstring for GetItem def __init__ ( self ): super ( GetItem , self ) . __init__ () def __getitem__ ( self , n ): if isinstance ( n , int ): # n\u662f\u7d22\u5f15 return n if isinstance ( n , slice ): # n\u662f\u5207\u7247 start = n . start stop = n . stop if start is None : start = 0 L = [] for x in range ( stop ): if x = start : L . append ( x ) return L getitem = GetItem () print ( getitem [ 2 ]) print ( getitem [ 0 : 2 ]) 2 [0, 1] __getattr__ :\u83b7\u53d6\u5c5e\u6027\u7684\u64cd\u4f5c class Student ( object ): def __init__ ( self ): self . name = Michael def __getattr__ ( self , attr ): if attr == score : return 99 s = Student () print ( s . score ) 99 __call__ :\u7528\u4e8e\u5b9e\u4f8b\u81ea\u8eab\u7684\u8c03\u7528 class Student ( object ): def __init__ ( self , name ): self . name = name def __call__ ( self ): print ( My name is %s . % self . name ) st = Student ( Michael ) st () print ( callable ( st )) print ( callable ( max )) print ( callable ( 1 )) My name is Michael. True True False \u76f8\u5f53\u4e8e\u91cd\u8f7d\u4e86\u62ec\u53f7\u8fd0\u7b97\u7b26,\u53ef\u4ee5\u7528callable\u6765\u5224\u65ad\u662f\u5426\u662f\u4e00\u4e2a\u53ef\u8c03\u7528\u7684\u7c7b\u578b \u7ee7\u627f \u7ee7\u627f\u8bed\u6cd5: \u7c7b(\u7236\u7c7b) Python\u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\u57fa\u672c\u7c7b\u7684constructor\uff0c\u4f60\u5f97\u4eb2\u81ea\u4e13\u95e8\u8c03\u7528\u5b83 \u53ef\u4ee5\u591a\u91cd\u7ee7\u627f class SchoolMember : Represents any school member. def __init__ ( self , name , age ): self . name = name self . age = age print (Initialized SchoolMember: %s ) % self . name def tell ( self ): Tell my details. print Name: %s Age: %s % ( self . name , self . age ), class Teacher ( SchoolMember ): Represents a teacher. def __init__ ( self , name , age , salary ): SchoolMember . __init__ ( self , name , age ) self . salary = salary print (Initialized Teacher: %s ) % self . name def tell ( self ): SchoolMember . tell ( self ) print Salary: %d % self . salary class Student ( SchoolMember ): Represents a student. def __init__ ( self , name , age , marks ): SchoolMember . __init__ ( self , name , age ) self . marks = marks print (Initialized Student: %s ) % self . name def tell ( self ): SchoolMember . tell ( self ) print Marks: %d % self . marks t = Teacher ( Mrs. Shrividya , 40 , 30000 ) s = Student ( Swaroop , 22 , 75 ) members = [ t , s ] for member in members : member . tell () # works for both Teachers and Students \u591a\u91cd\u7ee7\u627f class Mammal ( object ): def viviparity ( self ): print ( viviparity!! ) class CarnivorousMixIn ( object ): def eatmeat ( self ): print ( eat meating!! ) class Dog ( Mammal , CarnivorousMixIn ): pass dog = Dog () dog . viviparity () dog . eatmeat () viviparity!! eat meating!!","title":"\u7c7b"},{"location":"python/py_class/#python","text":"","title":"python \u7c7b,\u7ee7\u627f"},{"location":"python/py_class/#_1","text":"python \u662f\u5b8c\u5168\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5df1\u7684\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u627f.\u6240\u6709\u6570\u636e\u7c7b\u578b\u90fd\u4e3a\u5bf9\u8c61\uff0c\u4ee5\u5f15\u7528\u8d4b\u503c","title":"\u7c7b"},{"location":"python/py_class/#_2","text":"class DataType : pass class\u4f5c\u4e3a\u7c7b\u58f0\u660e\uff0cpass\u8868\u793a\u7f29\u8fdb\uff0c\u6ca1\u6709\u5176\u4ed6\u542b\u4e49","title":"\u7c7b\u7684\u5b9a\u4e49 :"},{"location":"python/py_class/#__init__","text":"\u4ece\u5f62\u5f0f\u4e0a\u6765\u770b\u76f8\u5f53\u4e8ejava\u4e2d\u7684\u6784\u9020\u5668\uff0c\u5728\u7c7b\u5b9e\u4f8b\u540e\u8c03\u7528,\u4f46\u662f\u5728\u6267\u884cINIT\u65b9\u6cd5\u65f6\uff0c\u5bf9\u8c61\u5df2\u7ecf\u5b9e\u4f8b\u5316\u597d\u4e86 class DataType : def __init__ ( self ): print ( self ) flib = DataType () self \u76f8\u5f53\u4e8ejava\u4e2d\u7684this,\u6307\u5411\u8be5\u5b9e\u4f8b,\u5b9e\u4f8b\u5316\u7c7bflib =DataType() \u5e76\u4e0d\u50cfjava\u4e2d\u4e00\u6837\u4f7f\u7528\u663e\u5f0f\u7684new\u5173\u952e\u5b57","title":"__init__\u65b9\u6cd5:"},{"location":"python/py_class/#_3","text":"\u7528 self. \u53d8\u91cf\u540d\u6765\u58f0\u660e\u5b9e\u4f8b\u53d8\u91cf. class Flib : def __init__ ( self , max ): self . max = max def iter ( self ): self . a = 0 self . b = 1 return self def next ( self ): fib = self . a if fib self . max : raise StopIteration self . a , self . b = self . b , self . a + self . b return fib","title":"\u5b9e\u4f8b\u53d8\u91cf"},{"location":"python/py_class/#_4","text":"\u52a8\u6001\u5c5e\u6027 :\u5b9e\u4f8b\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u5c5e\u6027,\u4e0d\u5f71\u54cd\u5176\u4ed6\u5b9e\u4f8b __slots__ :\u9650\u5236\u5b9e\u4f8b\u7684\u5c5e\u6027,\u5b50\u7c7b\u5b9e\u4f8b\u5141\u8bb8\u5b9a\u4e49\u7684\u5c5e\u6027\u5c31\u662f\u81ea\u8eab\u7684 __slots__ \u52a0\u4e0a\u7236\u7c7b\u7684 __slots__ class Student ( object ): __slots__ = ( name ,) docstring for Student def __init__ ( self ): super ( Student , self ) . __init__ () st = Student () st . name = far st . age = 10 #error print ( st . name ) class StudentA ( Student ): __slots__ = ( name , age ) pass sta = StudentA () st . name = far1 sta . age = 1 sta . sex = 1 #error print ( sta . age ) AttributeError: Student object has no attribute age","title":"\u52a8\u6001\u5c5e\u6027\u4e0e\u9650\u5b9a"},{"location":"python/py_class/#property","text":"class Student ( object ): #\u8bfb @property def score ( self ): return self . _score #\u5199 @score.setter def score ( self , value ): if not isinstance ( value , int ): raise ValueError ( score must be an integer! ) if value 0 or value 100 : raise ValueError ( score must between 0 ~ 100! ) self . _score = value st = Student () st . score = - 1 ValueError: score must between 0 ~ 100!","title":"@property"},{"location":"python/py_class/#_5","text":"\u79c1\u6709\u5c5e\u6027:\u5c5e\u6027\u7684\u540d\u79f0\u524d\u52a0\u4e0a\u4e24\u4e2a\u4e0b\u5212\u7ebf __ class Student ( object ): def __init__ ( self , name , score ): self . __name = name self . __score = score def print_score ( self ): print ( %s : %s % ( self . __name , self . __score )) bart = Student ( Bart Simpson , 98 ) bart . __name AttributeError: Student object has no attribute __name","title":"\u8bbf\u95ee\u9650\u5236"},{"location":"python/py_class/#_6","text":"isinstance :\u5224\u65ad\u5bf9\u8c61\u7c7b\u578b print ( isinstance ( bart , Student )) print ( isinstance ( bart , object )) True True type :\u83b7\u53d6\u5bf9\u8c61\u7c7b\u578b,\u521b\u5efa\u65b0\u7684\u7c7b\u578b def de_fun ( self , name = far ): print ( Hi, %s % name ) #type( \u7c7b\u540d ,( \u7ee7\u627f\u7c7b ,),dict(\u5c5e\u6027\u540d=\u5c5e\u6027\u503c)) Hi = type ( Hi ,( object ,), dict ( sayhi = de_fun )) hi = Hi () hi . sayhi () Hi,far type type class __main__.Hi dir :\u83b7\u5f97\u4e00\u4e2a\u5bf9\u8c61\u7684\u6240\u6709\u5c5e\u6027\u548c\u65b9\u6cd5 hasattr , getattr :\u52a8\u6001\u83b7\u53d6\u5bf9\u8c61\u65b9\u6cd5 hasattr ( obj , power ) # \u6709\u5c5e\u6027 power \u5417\uff1f getattr ( obj , power ) # \u83b7\u53d6\u5c5e\u6027 power","title":"\u57fa\u7840\u65b9\u6cd5"},{"location":"python/py_class/#_7","text":"\u5b9a\u4e49:\u6ca1\u6709\u7ee7\u627f\u7684\u7c7b,\u6ce8\u610f\uff1a\u5982\u679c\u7ecf\u5178\u7c7b\u88ab\u4f5c\u4e3a\u7236\u7c7b\uff0c\u5b50\u7c7b\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u65f6\u4f1a\u51fa\u9519\u3002 TypeError: must be type, not classobj #\u57fa\u7c7b\uff08\u7ecf\u5178\u7c7b\uff09 class Person : def __init__ ( self ): print Hi, I am a person. #\u5b50\u7c7b class Student ( Person ): def __init__ ( self ): super ( self . __class__ , self ) . __init__ () if __name__ == __main__ : student = Student () #\u51fa\u9519\u5566\uff01TypeError: must be type, not classobj","title":"\u7ecf\u5178\u7c7b"},{"location":"python/py_class/#_8","text":"\u5b9a\u4e49:\u6bcf\u4e2a\u7c7b\u90fd\u7ee7\u627f\u4e8e\u4e00\u4e2a\u57fa\u7c7b\uff0c\u53ef\u4ee5\u662f\u81ea\u5b9a\u4e49\u7c7b\u6216\u8005\u5176\u5b83\u7c7b\uff0c\u5982\u679c\u4ec0\u4e48\u90fd\u4e0d\u60f3\u7ee7\u627f\uff0c\u90a3\u5c31\u7ee7\u627f\u4e8eobject \u5982\u679c\u60f3\u7528super\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u8bf7\u4f7f\u7528\u65b0\u5f0f\u7c7b\uff01 #\u57fa\u7c7b\uff08\u65b0\u5f0f\u7c7b\uff09 class Person ( object ): def __init__ ( self ): print Hi, I am a person. #\u5b50\u7c7b class Student ( Person ): def __init__ ( self ): super ( self . __class__ , self ) . __init__ () if __name__ == __main__ : student = Student ()","title":"\u65b0\u5f0f\u7c7b"},{"location":"python/py_class/#_9","text":"__str__ :\u683c\u5f0f\u5316\u8f93\u51fa class Student ( object ): def __init__ ( self , name ): self . name = name def __str__ ( self ): return Student object (name: %s ) % self . name st = Student ( name ) print ( st ) __iter__ :\u683c\u5f0f\u5316\u8f93\u51fa \u5982\u679c\u4e00\u4e2a\u7c7b\u60f3\u88ab\u7528\u4e8e for ... in \u5faa\u73af\uff0c\u7c7b\u4f3clist\u6216tuple\u90a3\u6837\uff0c\u5c31\u5fc5\u987b\u5b9e\u73b0\u4e00\u4e2a __iter__() \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5bf9\u8c61\uff0c\u7136\u540e\uff0cPython\u7684for\u5faa\u73af\u5c31\u4f1a\u4e0d\u65ad\u8c03\u7528\u8be5\u8fed\u4ee3\u5bf9\u8c61\u7684 __next__() \u65b9\u6cd5\u62ff\u5230\u5faa\u73af\u7684\u4e0b\u4e00\u4e2a\u503c\uff0c\u76f4\u5230\u9047\u5230 StopIteration \u9519\u8bef\u65f6\u9000\u51fa\u5faa\u73af class Fib ( object ): def __init__ ( self ): self . a , self . b = 0 , 1 # \u521d\u59cb\u5316\u4e24\u4e2a\u8ba1\u6570\u5668a\uff0cb def __iter__ ( self ): return self # \u5b9e\u4f8b\u672c\u8eab\u5c31\u662f\u8fed\u4ee3\u5bf9\u8c61\uff0c\u6545\u8fd4\u56de\u81ea\u5df1 def __next__ ( self ): self . a , self . b = self . b , self . a + self . b # \u8ba1\u7b97\u4e0b\u4e00\u4e2a\u503c if self . a 100 : # \u9000\u51fa\u5faa\u73af\u7684\u6761\u4ef6 raise StopIteration (); return self . a # \u8fd4\u56de\u4e0b\u4e00\u4e2a\u503c for n in Fib (): print ( n ) __getitem__ :\u4e0b\u6807\u65b9\u5f0f\u8bbf\u95ee\u5bf9\u8c61 class GetItem ( object ): docstring for GetItem def __init__ ( self ): super ( GetItem , self ) . __init__ () def __getitem__ ( self , n ): if isinstance ( n , int ): # n\u662f\u7d22\u5f15 return n if isinstance ( n , slice ): # n\u662f\u5207\u7247 start = n . start stop = n . stop if start is None : start = 0 L = [] for x in range ( stop ): if x = start : L . append ( x ) return L getitem = GetItem () print ( getitem [ 2 ]) print ( getitem [ 0 : 2 ]) 2 [0, 1] __getattr__ :\u83b7\u53d6\u5c5e\u6027\u7684\u64cd\u4f5c class Student ( object ): def __init__ ( self ): self . name = Michael def __getattr__ ( self , attr ): if attr == score : return 99 s = Student () print ( s . score ) 99 __call__ :\u7528\u4e8e\u5b9e\u4f8b\u81ea\u8eab\u7684\u8c03\u7528 class Student ( object ): def __init__ ( self , name ): self . name = name def __call__ ( self ): print ( My name is %s . % self . name ) st = Student ( Michael ) st () print ( callable ( st )) print ( callable ( max )) print ( callable ( 1 )) My name is Michael. True True False \u76f8\u5f53\u4e8e\u91cd\u8f7d\u4e86\u62ec\u53f7\u8fd0\u7b97\u7b26,\u53ef\u4ee5\u7528callable\u6765\u5224\u65ad\u662f\u5426\u662f\u4e00\u4e2a\u53ef\u8c03\u7528\u7684\u7c7b\u578b","title":"\u5b9a\u5236\u7c7b"},{"location":"python/py_class/#_10","text":"\u7ee7\u627f\u8bed\u6cd5: \u7c7b(\u7236\u7c7b) Python\u4e0d\u4f1a\u81ea\u52a8\u8c03\u7528\u57fa\u672c\u7c7b\u7684constructor\uff0c\u4f60\u5f97\u4eb2\u81ea\u4e13\u95e8\u8c03\u7528\u5b83 \u53ef\u4ee5\u591a\u91cd\u7ee7\u627f class SchoolMember : Represents any school member. def __init__ ( self , name , age ): self . name = name self . age = age print (Initialized SchoolMember: %s ) % self . name def tell ( self ): Tell my details. print Name: %s Age: %s % ( self . name , self . age ), class Teacher ( SchoolMember ): Represents a teacher. def __init__ ( self , name , age , salary ): SchoolMember . __init__ ( self , name , age ) self . salary = salary print (Initialized Teacher: %s ) % self . name def tell ( self ): SchoolMember . tell ( self ) print Salary: %d % self . salary class Student ( SchoolMember ): Represents a student. def __init__ ( self , name , age , marks ): SchoolMember . __init__ ( self , name , age ) self . marks = marks print (Initialized Student: %s ) % self . name def tell ( self ): SchoolMember . tell ( self ) print Marks: %d % self . marks t = Teacher ( Mrs. Shrividya , 40 , 30000 ) s = Student ( Swaroop , 22 , 75 ) members = [ t , s ] for member in members : member . tell () # works for both Teachers and Students","title":"\u7ee7\u627f"},{"location":"python/py_class/#_11","text":"class Mammal ( object ): def viviparity ( self ): print ( viviparity!! ) class CarnivorousMixIn ( object ): def eatmeat ( self ): print ( eat meating!! ) class Dog ( Mammal , CarnivorousMixIn ): pass dog = Dog () dog . viviparity () dog . eatmeat () viviparity!! eat meating!!","title":"\u591a\u91cd\u7ee7\u627f"},{"location":"python/py_coroutine/","text":"\u534f\u7a0b \u5f02\u6b65IO \u7531\u4e8e\u6211\u4eec\u8981\u89e3\u51b3\u7684\u95ee\u9898\u662fCPU\u9ad8\u901f\u6267\u884c\u80fd\u529b\u548cIO\u8bbe\u5907\u7684\u9f9f\u901f\u4e25\u91cd\u4e0d\u5339\u914d\uff0c\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u53ea\u662f\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u7684\u4e00\u79cd\u65b9\u6cd5\u3002 \u53e6\u4e00\u79cd\u89e3\u51b3IO\u95ee\u9898\u7684\u65b9\u6cd5\u662f\u5f02\u6b65IO,\u5f53\u4ee3\u7801\u9700\u8981\u6267\u884c\u4e00\u4e2a\u8017\u65f6\u7684IO\u64cd\u4f5c\u65f6\uff0c\u5b83\u53ea\u53d1\u51faIO\u6307\u4ee4\uff0c\u5e76\u4e0d\u7b49\u5f85IO\u7ed3\u679c\uff0c\u7136\u540e\u5c31\u53bb\u6267\u884c\u5176\u4ed6\u4ee3\u7801\u4e86\u3002\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5f53IO\u8fd4\u56de\u7ed3\u679c\u65f6\uff0c\u518d\u901a\u77e5CPU\u8fdb\u884c\u5904\u7406 \u5f02\u6b65IO\u6a21\u578b\u9700\u8981\u4e00\u4e2a\u6d88\u606f\u5faa\u73af\uff0c\u5728\u6d88\u606f\u5faa\u73af\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u4e0d\u65ad\u5730\u91cd\u590d\u201c\u8bfb\u53d6\u6d88\u606f-\u5904\u7406\u6d88\u606f\u201d\u8fd9\u4e00\u8fc7\u7a0b loop = get_event_loop () while True : event = loop . get_event () process_event ( event ) coroutine \u534f\u7a0b \u4f7f\u7528yield\u7684\u51fd\u6570,\u82e5\u7528send\u6765\u63a7\u5236,\u5c31\u7b97coroutine\u4e86,\u82e5\u7528for\u5faa\u73af\u6765\u63a7\u5236,\u5c31\u7b97generator\u6216\u8005iterator,\u4f7f\u7528\u65b9\u6cd5\u5927\u591a\u89c1\u4e8e decorator, \u5982tornado\u4e2d\u7684gen.coroutine\u3002 def consumer (): r = while True : n = yield r if not n : return print ( [CONSUMER] Consuming %s ... % n ) r = 200 OK def produce ( c ): c . send ( None ) n = 0 while n 5 : n = n + 1 print ( [PRODUCER] Producing %s ... % n ) r = c . send ( n ) print ( [PRODUCER] Consumer return: %s % r ) c . close () c = consumer () produce ( c ) [PRODUCER] Producing 1... [CONSUMER] Consuming 1... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 2... [CONSUMER] Consuming 2... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 3... [CONSUMER] Consuming 3... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 4... [CONSUMER] Consuming 4... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 5... [CONSUMER] Consuming 5... [PRODUCER] Consumer return: 200 OK \u6ce8\u610f\u5230consumer\u51fd\u6570\u662f\u4e00\u4e2agenerator\uff0c\u628a\u4e00\u4e2aconsumer\u4f20\u5165produce\u540e\uff1a \u9996\u5148\u8c03\u7528c.send(None)\u542f\u52a8\u751f\u6210\u5668\uff1b \u7136\u540e\uff0c\u4e00\u65e6\u751f\u4ea7\u4e86\u4e1c\u897f\uff0c\u901a\u8fc7c.send(n)\u5207\u6362\u5230consumer\u6267\u884c\uff1b consumer\u901a\u8fc7yield\u62ff\u5230\u6d88\u606f\uff0c\u5904\u7406\uff0c\u53c8\u901a\u8fc7yield\u628a\u7ed3\u679c\u4f20\u56de\uff1b produce\u62ff\u5230consumer\u5904\u7406\u7684\u7ed3\u679c\uff0c\u7ee7\u7eed\u751f\u4ea7\u4e0b\u4e00\u6761\u6d88\u606f\uff1b produce\u51b3\u5b9a\u4e0d\u751f\u4ea7\u4e86\uff0c\u901a\u8fc7c.close()\u5173\u95edconsumer\uff0c\u6574\u4e2a\u8fc7\u7a0b\u7ed3\u675f\u3002 \u6574\u4e2a\u6d41\u7a0b\u65e0\u9501\uff0c\u7531\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\uff0cproduce\u548cconsumer\u534f\u4f5c\u5b8c\u6210\u4efb\u52a1\uff0c\u6240\u4ee5\u79f0\u4e3a\u201c\u534f\u7a0b\u201d\uff0c\u800c\u975e\u7ebf\u7a0b\u7684\u62a2\u5360\u5f0f\u591a\u4efb\u52a1 https://docs.python.org/3/library/asyncio-task.html http://blog.ez2learn.com/2010/07/17/talk-about-coroutine-and-gevent/ http://www.oschina.net/translate/improve-your-python-yield-and-generators-explained asyncio asyncio\u662fPython 3.4\u7248\u672c\u5f15\u5165\u7684\u6807\u51c6\u5e93\uff0c\u76f4\u63a5\u5185\u7f6e\u4e86\u5bf9\u5f02\u6b65IO\u7684\u652f\u6301\u3002 asyncio\u7684\u7f16\u7a0b\u6a21\u578b\u5c31\u662f\u4e00\u4e2a\u6d88\u606f\u5faa\u73af\u3002\u6211\u4eec\u4eceasyncio\u6a21\u5757\u4e2d\u76f4\u63a5\u83b7\u53d6\u4e00\u4e2aEventLoop\u7684\u5f15\u7528\uff0c\u7136\u540e\u628a\u9700\u8981\u6267\u884c\u7684\u534f\u7a0b\u6254\u5230EventLoop\u4e2d\u6267\u884c\uff0c\u5c31\u5b9e\u73b0\u4e86\u5f02\u6b65IO\u3002 \u7528asyncio\u5b9e\u73b0Hello world\u4ee3\u7801\u5982\u4e0b\uff1a import asyncio @asyncio.coroutine def hello (): print ( Hello world! ) # \u5f02\u6b65\u8c03\u7528asyncio.sleep(1): r = yield from asyncio . sleep ( 1 ) print ( \\ Hello again! \\ ) # \u83b7\u53d6EventLoop: loop = asyncio . get_event_loop () # \u6267\u884ccoroutine loop . run_until_complete ( hello ()) loop . close () @asyncio.coroutine \u628a\u4e00\u4e2a generator \u6807\u8bb0\u4e3a coroutine \u7c7b\u578b\uff0c\u7136\u540e\uff0c\u6211\u4eec\u5c31\u628a\u8fd9\u4e2a coroutine \u6254\u5230 EventLoop \u4e2d\u6267\u884c\u3002 hello()\u4f1a\u9996\u5148\u6253\u5370\u51faHello world!\uff0c\u7136\u540e\uff0cyield from\u8bed\u6cd5\u53ef\u4ee5\u8ba9\u6211\u4eec\u65b9\u4fbf\u5730\u8c03\u7528\u53e6\u4e00\u4e2agenerator\u3002\u7531\u4e8easyncio.sleep()\u4e5f\u662f\u4e00\u4e2acoroutine\uff0c\u6240\u4ee5\u7ebf\u7a0b\u4e0d\u4f1a\u7b49\u5f85asyncio.sleep()\uff0c\u800c\u662f\u76f4\u63a5\u4e2d\u65ad\u5e76\u6267\u884c\u4e0b\u4e00\u4e2a\u6d88\u606f\u5faa\u73af\u3002\u5f53asyncio.sleep()\u8fd4\u56de\u65f6\uff0c\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4eceyield from\u62ff\u5230\u8fd4\u56de\u503c\uff08\u6b64\u5904\u662fNone\uff09\uff0c\u7136\u540e\u63a5\u7740\u6267\u884c\u4e0b\u4e00\u884c\u8bed\u53e5\u3002 \u628aasyncio.sleep(1)\u770b\u6210\u662f\u4e00\u4e2a\u8017\u65f61\u79d2\u7684IO\u64cd\u4f5c\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u4e3b\u7ebf\u7a0b\u5e76\u672a\u7b49\u5f85\uff0c\u800c\u662f\u53bb\u6267\u884cEventLoop\u4e2d\u5176\u4ed6\u53ef\u4ee5\u6267\u884c\u7684coroutine\u4e86\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b9e\u73b0\u5e76\u53d1\u6267\u884c\u3002 \u6211\u4eec\u7528Task\u5c01\u88c5\u4e24\u4e2acoroutine\u8bd5\u8bd5\uff1a import threading import asyncio @asyncio.coroutine def hello (): print ( Hello world! ( %s ) % threading . currentThread ()) yield from asyncio . sleep ( 1 ) print ( Hello again! ( %s ) % threading . currentThread ()) loop = asyncio . get_event_loop () tasks = [ hello (), hello ()] loop . run_until_complete ( asyncio . wait ( tasks )) loop . close () Hello world! ( _MainThread(MainThread, started 140735195337472) ) Hello world! ( _MainThread(MainThread, started 140735195337472) ) (\u6682\u505c\u7ea61\u79d2) Hello again! ( _MainThread(MainThread, started 140735195337472) ) Hello again! ( _MainThread(MainThread, started 140735195337472) ) \u7531\u6253\u5370\u7684\u5f53\u524d\u7ebf\u7a0b\u540d\u79f0\u53ef\u4ee5\u770b\u51fa\uff0c\u4e24\u4e2acoroutine\u662f\u7531\u540c\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u7684\u3002 \u5982\u679c\u628aasyncio.sleep()\u6362\u6210\u771f\u6b63\u7684IO\u64cd\u4f5c\uff0c\u5219\u591a\u4e2acoroutine\u5c31\u53ef\u4ee5\u7531\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u3002 \u6211\u4eec\u7528asyncio\u7684\u5f02\u6b65\u7f51\u7edc\u8fde\u63a5\u6765\u83b7\u53d6sina\u3001sohu\u548c163\u7684\u7f51\u7ad9\u9996\u9875\uff1a import asyncio @asyncio.coroutine def wget ( host ): print ( wget %s ... % host ) connect = asyncio . open_connection ( host , 80 ) reader , writer = yield from connect header = GET / HTTP/1.0 \\r\\n Host: %s \\r\\n\\r\\n % host writer . write ( header . encode ( utf-8 )) yield from writer . drain () while True : line = yield from reader . readline () if line == b \\r\\n : break print ( %s header %s % ( host , line . decode ( utf-8 ) . rstrip ())) # Ignore the body, close the socket writer . close () loop = asyncio . get_event_loop () tasks = [ wget ( host ) for host in [ www.sina.com.cn , www.sohu.com , www.163.com ]] loop . run_until_complete ( asyncio . wait ( tasks )) loop . close () wget www.sohu.com... wget www.sina.com.cn... wget www.163.com... (\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4) (\u6253\u5370\u51fasohu\u7684header) www.sohu.com header HTTP/1.1 200 OK www.sohu.com header Content-Type: text/html ... (\u6253\u5370\u51fasina\u7684header) www.sina.com.cn header HTTP/1.1 200 OK www.sina.com.cn header Date: Wed, 20 May 2015 04:56:33 GMT ... (\u6253\u5370\u51fa163\u7684header) www.163.com header HTTP/1.0 302 Moved Temporarily www.163.com header Server: Cdn Cache Server V2.0 async/await \u7528asyncio\u63d0\u4f9b\u7684@asyncio.coroutine\u53ef\u4ee5\u628a\u4e00\u4e2agenerator\u6807\u8bb0\u4e3acoroutine\u7c7b\u578b\uff0c\u7136\u540e\u5728coroutine\u5185\u90e8\u7528yield from\u8c03\u7528\u53e6\u4e00\u4e2acoroutine\u5b9e\u73b0\u5f02\u6b65\u64cd\u4f5c\u3002 \u4e3a\u4e86\u7b80\u5316\u5e76\u66f4\u597d\u5730\u6807\u8bc6\u5f02\u6b65IO\uff0c\u4ecePython 3.5\u5f00\u59cb\u5f15\u5165\u4e86\u65b0\u7684\u8bed\u6cd5async\u548cawait\uff0c\u53ef\u4ee5\u8ba9coroutine\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\u6613\u8bfb\u3002 \u8bf7\u6ce8\u610f\uff0casync\u548cawait\u662f\u9488\u5bf9coroutine\u7684\u65b0\u8bed\u6cd5\uff0c\u8981\u4f7f\u7528\u65b0\u7684\u8bed\u6cd5\uff0c\u53ea\u9700\u8981\u505a\u4e24\u6b65\u7b80\u5355\u7684\u66ff\u6362\uff1a \u628a@asyncio.coroutine\u66ff\u6362\u4e3aasync\uff1b \u628ayield from\u66ff\u6362\u4e3aawait\u3002 \u8ba9\u6211\u4eec\u5bf9\u6bd4\u4e00\u4e0b\u4e0a\u4e00\u8282\u7684\u4ee3\u7801\uff1a @asyncio.coroutine def hello (): print ( Hello world! ) r = yield from asyncio . sleep ( 1 ) print ( Hello again! ) \u7528\u65b0\u8bed\u6cd5\u91cd\u65b0\u7f16\u5199\u5982\u4e0b\uff1a async def hello (): print ( Hello world! ) r = await asyncio . sleep ( 1 ) print ( Hello again! )","title":"\u534f\u7a0b"},{"location":"python/py_coroutine/#_1","text":"","title":"\u534f\u7a0b"},{"location":"python/py_coroutine/#io","text":"\u7531\u4e8e\u6211\u4eec\u8981\u89e3\u51b3\u7684\u95ee\u9898\u662fCPU\u9ad8\u901f\u6267\u884c\u80fd\u529b\u548cIO\u8bbe\u5907\u7684\u9f9f\u901f\u4e25\u91cd\u4e0d\u5339\u914d\uff0c\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u53ea\u662f\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u7684\u4e00\u79cd\u65b9\u6cd5\u3002 \u53e6\u4e00\u79cd\u89e3\u51b3IO\u95ee\u9898\u7684\u65b9\u6cd5\u662f\u5f02\u6b65IO,\u5f53\u4ee3\u7801\u9700\u8981\u6267\u884c\u4e00\u4e2a\u8017\u65f6\u7684IO\u64cd\u4f5c\u65f6\uff0c\u5b83\u53ea\u53d1\u51faIO\u6307\u4ee4\uff0c\u5e76\u4e0d\u7b49\u5f85IO\u7ed3\u679c\uff0c\u7136\u540e\u5c31\u53bb\u6267\u884c\u5176\u4ed6\u4ee3\u7801\u4e86\u3002\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5f53IO\u8fd4\u56de\u7ed3\u679c\u65f6\uff0c\u518d\u901a\u77e5CPU\u8fdb\u884c\u5904\u7406 \u5f02\u6b65IO\u6a21\u578b\u9700\u8981\u4e00\u4e2a\u6d88\u606f\u5faa\u73af\uff0c\u5728\u6d88\u606f\u5faa\u73af\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u4e0d\u65ad\u5730\u91cd\u590d\u201c\u8bfb\u53d6\u6d88\u606f-\u5904\u7406\u6d88\u606f\u201d\u8fd9\u4e00\u8fc7\u7a0b loop = get_event_loop () while True : event = loop . get_event () process_event ( event )","title":"\u5f02\u6b65IO"},{"location":"python/py_coroutine/#coroutine","text":"\u4f7f\u7528yield\u7684\u51fd\u6570,\u82e5\u7528send\u6765\u63a7\u5236,\u5c31\u7b97coroutine\u4e86,\u82e5\u7528for\u5faa\u73af\u6765\u63a7\u5236,\u5c31\u7b97generator\u6216\u8005iterator,\u4f7f\u7528\u65b9\u6cd5\u5927\u591a\u89c1\u4e8e decorator, \u5982tornado\u4e2d\u7684gen.coroutine\u3002 def consumer (): r = while True : n = yield r if not n : return print ( [CONSUMER] Consuming %s ... % n ) r = 200 OK def produce ( c ): c . send ( None ) n = 0 while n 5 : n = n + 1 print ( [PRODUCER] Producing %s ... % n ) r = c . send ( n ) print ( [PRODUCER] Consumer return: %s % r ) c . close () c = consumer () produce ( c ) [PRODUCER] Producing 1... [CONSUMER] Consuming 1... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 2... [CONSUMER] Consuming 2... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 3... [CONSUMER] Consuming 3... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 4... [CONSUMER] Consuming 4... [PRODUCER] Consumer return: 200 OK [PRODUCER] Producing 5... [CONSUMER] Consuming 5... [PRODUCER] Consumer return: 200 OK \u6ce8\u610f\u5230consumer\u51fd\u6570\u662f\u4e00\u4e2agenerator\uff0c\u628a\u4e00\u4e2aconsumer\u4f20\u5165produce\u540e\uff1a \u9996\u5148\u8c03\u7528c.send(None)\u542f\u52a8\u751f\u6210\u5668\uff1b \u7136\u540e\uff0c\u4e00\u65e6\u751f\u4ea7\u4e86\u4e1c\u897f\uff0c\u901a\u8fc7c.send(n)\u5207\u6362\u5230consumer\u6267\u884c\uff1b consumer\u901a\u8fc7yield\u62ff\u5230\u6d88\u606f\uff0c\u5904\u7406\uff0c\u53c8\u901a\u8fc7yield\u628a\u7ed3\u679c\u4f20\u56de\uff1b produce\u62ff\u5230consumer\u5904\u7406\u7684\u7ed3\u679c\uff0c\u7ee7\u7eed\u751f\u4ea7\u4e0b\u4e00\u6761\u6d88\u606f\uff1b produce\u51b3\u5b9a\u4e0d\u751f\u4ea7\u4e86\uff0c\u901a\u8fc7c.close()\u5173\u95edconsumer\uff0c\u6574\u4e2a\u8fc7\u7a0b\u7ed3\u675f\u3002 \u6574\u4e2a\u6d41\u7a0b\u65e0\u9501\uff0c\u7531\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\uff0cproduce\u548cconsumer\u534f\u4f5c\u5b8c\u6210\u4efb\u52a1\uff0c\u6240\u4ee5\u79f0\u4e3a\u201c\u534f\u7a0b\u201d\uff0c\u800c\u975e\u7ebf\u7a0b\u7684\u62a2\u5360\u5f0f\u591a\u4efb\u52a1 https://docs.python.org/3/library/asyncio-task.html http://blog.ez2learn.com/2010/07/17/talk-about-coroutine-and-gevent/ http://www.oschina.net/translate/improve-your-python-yield-and-generators-explained","title":"coroutine \u534f\u7a0b"},{"location":"python/py_coroutine/#asyncio","text":"asyncio\u662fPython 3.4\u7248\u672c\u5f15\u5165\u7684\u6807\u51c6\u5e93\uff0c\u76f4\u63a5\u5185\u7f6e\u4e86\u5bf9\u5f02\u6b65IO\u7684\u652f\u6301\u3002 asyncio\u7684\u7f16\u7a0b\u6a21\u578b\u5c31\u662f\u4e00\u4e2a\u6d88\u606f\u5faa\u73af\u3002\u6211\u4eec\u4eceasyncio\u6a21\u5757\u4e2d\u76f4\u63a5\u83b7\u53d6\u4e00\u4e2aEventLoop\u7684\u5f15\u7528\uff0c\u7136\u540e\u628a\u9700\u8981\u6267\u884c\u7684\u534f\u7a0b\u6254\u5230EventLoop\u4e2d\u6267\u884c\uff0c\u5c31\u5b9e\u73b0\u4e86\u5f02\u6b65IO\u3002 \u7528asyncio\u5b9e\u73b0Hello world\u4ee3\u7801\u5982\u4e0b\uff1a import asyncio @asyncio.coroutine def hello (): print ( Hello world! ) # \u5f02\u6b65\u8c03\u7528asyncio.sleep(1): r = yield from asyncio . sleep ( 1 ) print ( \\ Hello again! \\ ) # \u83b7\u53d6EventLoop: loop = asyncio . get_event_loop () # \u6267\u884ccoroutine loop . run_until_complete ( hello ()) loop . close () @asyncio.coroutine \u628a\u4e00\u4e2a generator \u6807\u8bb0\u4e3a coroutine \u7c7b\u578b\uff0c\u7136\u540e\uff0c\u6211\u4eec\u5c31\u628a\u8fd9\u4e2a coroutine \u6254\u5230 EventLoop \u4e2d\u6267\u884c\u3002 hello()\u4f1a\u9996\u5148\u6253\u5370\u51faHello world!\uff0c\u7136\u540e\uff0cyield from\u8bed\u6cd5\u53ef\u4ee5\u8ba9\u6211\u4eec\u65b9\u4fbf\u5730\u8c03\u7528\u53e6\u4e00\u4e2agenerator\u3002\u7531\u4e8easyncio.sleep()\u4e5f\u662f\u4e00\u4e2acoroutine\uff0c\u6240\u4ee5\u7ebf\u7a0b\u4e0d\u4f1a\u7b49\u5f85asyncio.sleep()\uff0c\u800c\u662f\u76f4\u63a5\u4e2d\u65ad\u5e76\u6267\u884c\u4e0b\u4e00\u4e2a\u6d88\u606f\u5faa\u73af\u3002\u5f53asyncio.sleep()\u8fd4\u56de\u65f6\uff0c\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4eceyield from\u62ff\u5230\u8fd4\u56de\u503c\uff08\u6b64\u5904\u662fNone\uff09\uff0c\u7136\u540e\u63a5\u7740\u6267\u884c\u4e0b\u4e00\u884c\u8bed\u53e5\u3002 \u628aasyncio.sleep(1)\u770b\u6210\u662f\u4e00\u4e2a\u8017\u65f61\u79d2\u7684IO\u64cd\u4f5c\uff0c\u5728\u6b64\u671f\u95f4\uff0c\u4e3b\u7ebf\u7a0b\u5e76\u672a\u7b49\u5f85\uff0c\u800c\u662f\u53bb\u6267\u884cEventLoop\u4e2d\u5176\u4ed6\u53ef\u4ee5\u6267\u884c\u7684coroutine\u4e86\uff0c\u56e0\u6b64\u53ef\u4ee5\u5b9e\u73b0\u5e76\u53d1\u6267\u884c\u3002 \u6211\u4eec\u7528Task\u5c01\u88c5\u4e24\u4e2acoroutine\u8bd5\u8bd5\uff1a import threading import asyncio @asyncio.coroutine def hello (): print ( Hello world! ( %s ) % threading . currentThread ()) yield from asyncio . sleep ( 1 ) print ( Hello again! ( %s ) % threading . currentThread ()) loop = asyncio . get_event_loop () tasks = [ hello (), hello ()] loop . run_until_complete ( asyncio . wait ( tasks )) loop . close () Hello world! ( _MainThread(MainThread, started 140735195337472) ) Hello world! ( _MainThread(MainThread, started 140735195337472) ) (\u6682\u505c\u7ea61\u79d2) Hello again! ( _MainThread(MainThread, started 140735195337472) ) Hello again! ( _MainThread(MainThread, started 140735195337472) ) \u7531\u6253\u5370\u7684\u5f53\u524d\u7ebf\u7a0b\u540d\u79f0\u53ef\u4ee5\u770b\u51fa\uff0c\u4e24\u4e2acoroutine\u662f\u7531\u540c\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u7684\u3002 \u5982\u679c\u628aasyncio.sleep()\u6362\u6210\u771f\u6b63\u7684IO\u64cd\u4f5c\uff0c\u5219\u591a\u4e2acoroutine\u5c31\u53ef\u4ee5\u7531\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\u3002 \u6211\u4eec\u7528asyncio\u7684\u5f02\u6b65\u7f51\u7edc\u8fde\u63a5\u6765\u83b7\u53d6sina\u3001sohu\u548c163\u7684\u7f51\u7ad9\u9996\u9875\uff1a import asyncio @asyncio.coroutine def wget ( host ): print ( wget %s ... % host ) connect = asyncio . open_connection ( host , 80 ) reader , writer = yield from connect header = GET / HTTP/1.0 \\r\\n Host: %s \\r\\n\\r\\n % host writer . write ( header . encode ( utf-8 )) yield from writer . drain () while True : line = yield from reader . readline () if line == b \\r\\n : break print ( %s header %s % ( host , line . decode ( utf-8 ) . rstrip ())) # Ignore the body, close the socket writer . close () loop = asyncio . get_event_loop () tasks = [ wget ( host ) for host in [ www.sina.com.cn , www.sohu.com , www.163.com ]] loop . run_until_complete ( asyncio . wait ( tasks )) loop . close () wget www.sohu.com... wget www.sina.com.cn... wget www.163.com... (\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4) (\u6253\u5370\u51fasohu\u7684header) www.sohu.com header HTTP/1.1 200 OK www.sohu.com header Content-Type: text/html ... (\u6253\u5370\u51fasina\u7684header) www.sina.com.cn header HTTP/1.1 200 OK www.sina.com.cn header Date: Wed, 20 May 2015 04:56:33 GMT ... (\u6253\u5370\u51fa163\u7684header) www.163.com header HTTP/1.0 302 Moved Temporarily www.163.com header Server: Cdn Cache Server V2.0","title":"asyncio"},{"location":"python/py_coroutine/#asyncawait","text":"\u7528asyncio\u63d0\u4f9b\u7684@asyncio.coroutine\u53ef\u4ee5\u628a\u4e00\u4e2agenerator\u6807\u8bb0\u4e3acoroutine\u7c7b\u578b\uff0c\u7136\u540e\u5728coroutine\u5185\u90e8\u7528yield from\u8c03\u7528\u53e6\u4e00\u4e2acoroutine\u5b9e\u73b0\u5f02\u6b65\u64cd\u4f5c\u3002 \u4e3a\u4e86\u7b80\u5316\u5e76\u66f4\u597d\u5730\u6807\u8bc6\u5f02\u6b65IO\uff0c\u4ecePython 3.5\u5f00\u59cb\u5f15\u5165\u4e86\u65b0\u7684\u8bed\u6cd5async\u548cawait\uff0c\u53ef\u4ee5\u8ba9coroutine\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\u6613\u8bfb\u3002 \u8bf7\u6ce8\u610f\uff0casync\u548cawait\u662f\u9488\u5bf9coroutine\u7684\u65b0\u8bed\u6cd5\uff0c\u8981\u4f7f\u7528\u65b0\u7684\u8bed\u6cd5\uff0c\u53ea\u9700\u8981\u505a\u4e24\u6b65\u7b80\u5355\u7684\u66ff\u6362\uff1a \u628a@asyncio.coroutine\u66ff\u6362\u4e3aasync\uff1b \u628ayield from\u66ff\u6362\u4e3aawait\u3002 \u8ba9\u6211\u4eec\u5bf9\u6bd4\u4e00\u4e0b\u4e0a\u4e00\u8282\u7684\u4ee3\u7801\uff1a @asyncio.coroutine def hello (): print ( Hello world! ) r = yield from asyncio . sleep ( 1 ) print ( Hello again! ) \u7528\u65b0\u8bed\u6cd5\u91cd\u65b0\u7f16\u5199\u5982\u4e0b\uff1a async def hello (): print ( Hello world! ) r = await asyncio . sleep ( 1 ) print ( Hello again! )","title":"async/await"},{"location":"python/py_diff2/","text":"Python 2.7.x \u548c Python 3.x \u7684\u4e3b\u8981\u533a\u522b \u8bb8\u591a Python \u521d\u5b66\u8005\u60f3\u77e5\u9053\u4ed6\u4eec\u5e94\u8be5\u4ece Python \u7684\u54ea\u4e2a\u7248\u672c\u5f00\u59cb\u5b66\u4e60\u3002\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\u6211\u7684\u7b54\u6848\u662f \u201c\u4f60\u5b66\u4e60\u4f60\u559c\u6b22\u7684\u6559\u7a0b\u7684\u7248\u672c\uff0c\u7136\u540e\u68c0\u67e5\u4ed6\u4eec\u4e4b\u95f4\u7684\u4e0d\u540c\u3002\" \u4f46\u662f\u5982\u679c\u4f60\u5f00\u59cb\u4e00\u4e2a\u65b0\u9879\u76ee\uff0c\u5e76\u4e14\u6709\u9009\u62e9\u6743\uff1f\u6211\u60f3\u8bf4\u7684\u662f\u76ee\u524d\u6ca1\u6709\u5bf9\u9519\uff0c\u53ea\u8981\u4f60\u8ba1\u5212\u4f7f\u7528\u7684\u5e93 Python 2.7.x \u548c Python 3.x \u53cc\u65b9\u90fd\u652f\u6301\u7684\u8bdd\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5f53\u5728\u7f16\u5199\u5b83\u4eec\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u7684\u4ee3\u7801\uff0c\u6216\u8005\u662f\u4f60\u8ba1\u5212\u79fb\u690d\u4f60\u7684\u9879\u76ee\u7684\u65f6\u5019\uff0c\u662f\u975e\u5e38\u503c\u5f97\u770b\u770b\u8fd9\u4e24\u4e2a\u4e3b\u8981\u6d41\u884c\u7684 Python \u7248\u672c\u4e4b\u95f4\u7684\u5dee\u522b\u7684\uff0c\u4ee5\u4fbf\u907f\u514d\u5e38\u89c1\u7684\u9677\u9631\u3002 \u4f7f\u7528 future \u6a21\u5757 \u7528\u9014:\u5728 Python 2 \u91cc\u5bfc\u5165\u90a3\u4e9b\u5728 Python 3 \u91cc\u624d\u751f\u6548\u7684\u6a21\u5757\u548c\u51fd\u6570: from __future__ import division print \u51fd\u6570 \u5f88\u7410\u788e\uff0c\u800c print \u8bed\u6cd5\u7684\u53d8\u5316\u53ef\u80fd\u662f\u6700\u5e7f\u4e3a\u4eba\u77e5\u7684\u4e86\uff0c\u4f46\u662f\u4ecd\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff1a Python 2 \u7684 print \u58f0\u660e\u5df2\u7ecf\u88ab print() \u51fd\u6570\u53d6\u4ee3\u4e86\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5fc5\u987b\u5305\u88c5\u6211\u4eec\u60f3\u6253\u5370\u5728\u5c0f\u62ec\u53f7\u4e2d\u7684\u5bf9\u8c61\u3002 Python 2 \u4e0d\u5177\u6709\u989d\u5916\u7684\u5c0f\u62ec\u53f7\u95ee\u9898\u3002\u4f46\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u6309\u7167 Python 2 \u7684\u65b9\u5f0f\u4e0d\u4f7f\u7528\u5c0f\u62ec\u53f7\u8c03\u7528 print \u51fd\u6570\uff0cPython 3 \u5c06\u629b\u51fa\u4e00\u4e2a\u8bed\u6cd5\u5f02\u5e38\uff08SyntaxError\uff09\u3002 Python 2 print Python , python_version () print Hello, World! print ( Hello, World! ) print text , ; print print more text on the same line Python 3 print ( Python , python_version ()) print ( Hello, World! ) print ( some text, , end = ) print ( print more text on the same line ) \u6574\u9664 Integer division \u5982\u679c\u4f60\u6b63\u5728\u79fb\u690d\u4ee3\u7801\uff0c\u8fd9\u4e2a\u53d8\u5316\u662f\u7279\u522b\u5371\u9669\u7684\u3002\u6216\u8005\u4f60\u5728 Python 2 \u4e0a\u6267\u884c Python 3 \u7684\u4ee3\u7801\u3002\u56e0\u4e3a\u8fd9\u4e2a\u6574\u9664\u7684\u53d8\u5316\u8868\u73b0\u5728\u5b83\u4f1a\u88ab\u5ffd\u89c6\uff08\u5373\u5b83\u4e0d\u4f1a\u629b\u51fa\u8bed\u6cd5\u5f02\u5e38\uff09\u3002 \u56e0\u6b64\uff0c\u6211\u8fd8\u662f\u503e\u5411\u4e8e\u4f7f\u7528\u4e00\u4e2a float(3)/2 \u6216 3/2.0 \u4ee3\u66ff\u5728\u6211\u7684 Python 3 \u811a\u672c\u4fdd\u5b58\u5728 Python 2 \u4e2d\u7684 3/2 \u7684\u4e00\u4e9b\u9ebb\u70e6\uff08\u5e76\u4e14\u53cd\u800c\u8fc7\u6765\u4e5f\u4e00\u6837\uff0c\u6211\u5efa\u8bae\u5728\u4f60\u7684 Python 2 \u811a\u672c\u4e2d\u4f7f\u7528 from future import division\uff09 Python 2 print Python , python_version () print 3 / 2 = , 3 / 2 print 3 // 2 = , 3 // 2 print 3 / 2.0 = , 3 / 2.0 print 3 // 2.0 = , 3 // 2.0 Python 2.7.6 3 / 2 = 1 3 // 2 = 1 3 / 2.0 = 1.5 3 // 2.0 = 1.0 Python 3 print ( Python , python_version ()) print ( 3 / 2 = , 3 / 2 ) print ( 3 // 2 = , 3 // 2 ) print ( 3 / 2.0 = , 3 / 2.0 ) print ( 3 // 2.0 = , 3 // 2.0 ) Python 3.4.1 3 / 2 = 1.5 3 // 2 = 1 3 / 2.0 = 1.5 3 // 2.0 = 1.0 Unicode Python 2 \u6709 ASCII str() \u7c7b\u578b\uff0c unicode() \u662f\u5355\u72ec\u7684\uff0c\u4e0d\u662f byte \u7c7b\u578b\u3002 \u73b0\u5728\uff0c \u5728 Python 3\uff0c\u6211\u4eec\u6700\u7ec8\u6709\u4e86 Unicode (utf-8) \u5b57\u7b26\u4e32\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5b57\u8282\u7c7b\uff1a byte \u548c bytearrays \u3002 Python 2 print type ( unicode ( this is like a python3 str type )) output is : type unicode print type ( b byte type does not exist ) output is : type str print they are really + b the same output is :they are really the same print type ( bytearray ( b bytearray oddly does exist though )) output is : type bytearray Python 3 print ( Python , python_version (), end = ) print ( has , type ( b bytes for storing data )) Python 3.4.1 has class bytes print ( and Python , python_version (), end = ) print ( also has , type ( bytearray ( b bytearrays ))) and Python 3.4.1 also has class bytearray xrange Python 2 \u91cc\u7684range() \u548c xrange() \u8fd8\u662f\u6709\u70b9\u533a\u522b\u7684. xrange() \u66f4\u50cf\u4e00\u4e2a\u751f\u6210\u5668.range()\u751f\u6210\u7684\u662flist. Python 3 \u91cc\u53d6\u6d88\u4e86xrange() \u4ee3\u4e4b\u4ee5range() \u5b9e\u9645\u4e0a Python 3 \u628a\u5f88\u591a\u8fd4\u56de\u4e3aList\u7684\u6539\u6210\u4e86itrable. Raising exceptions python2 raise IOError , file error python3 raise ( IOError , file error ) Handling exceptions python2 try : let_us_cause_a_NameError except NameError , err : print err , -- our error message python3 try : let_us_cause_a_NameError except NameError as err : print ( err , -- our error message ) next() \u51fd\u6570 \u548c .next() \u65b9\u6cd5 .next() \u5728python\u4e2d\u88ab\u79fb\u9664,\u4e24\u4e2a\u7248\u672c\u90fd\u53ef\u4ee5\u7528 next() python2 my_generator = ( letter for letter in abcdefg ) next ( my_generator ) my_generator . next () python3 my_generator = ( letter for letter in abcdefg ) next ( my_generator ) For \u5faa\u73af\u53d8\u91cf\u548c\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u6cc4\u6f0f \u5728 Python 3.x \u4e2d for \u5faa\u73af\u53d8\u91cf\u4e0d\u4f1a\u518d\u5bfc\u81f4\u547d\u540d\u7a7a\u95f4\u6cc4\u6f0f python2 i = 1 print before: i = , i print comprehension: , [ i for i in range ( 5 )] print after: i = , i before: i = 1 comprehension: [0, 1, 2, 3, 4] after: i = 4 python3 i = 1 print ( before: i = , i ) print ( comprehension: , [ i for i in range ( 5 )]) print ( after: i = , i ) before: i = 1 comprehension: [0, 1, 2, 3, 4] after: i = 1 \u6bd4\u8f83\u4e0d\u53ef\u6392\u5e8f\u7c7b\u578b \u5728 Python 3 \u4e2d\u7684\u53e6\u5916\u4e00\u4e2a\u53d8\u5316\u5c31\u662f\u5f53\u5bf9\u4e0d\u53ef\u6392\u5e8f\u7c7b\u578b\u505a\u6bd4\u8f83\u7684\u65f6\u5019\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u7c7b\u578b\u9519\u8bef\u3002 python2 print (1, 2) foo = , ( 1 , 2 ) foo (1, 2) foo = True python3 print ( [1, 2] foo = , [ 1 , 2 ] foo ) TypeError \u901a\u8fc7 input() \u89e3\u6790\u7528\u6237\u7684\u8f93\u5165 python 2\u91cc \u6211\u4eec\u6709 input() \u548c raw_input() ,\u533a\u522b\u662f raw_input() \u4f1a\u8bb2\u8f93\u5165\u8fd4\u56destr.\u800ci nput() \u4f1a\u8bd5\u56fe\u6267\u884c\u8f93\u5165. Python 3 \u91cc\u7684 input() \u8fd4\u56de\u5b57\u7b26\u4e32,\u4e0d\u518d\u6709 raw_input() ,\u5982\u679c\u60f3\u6267\u884c\u8f93\u5165,\u53ef\u4ee5 eval(input()) \u8fd4\u56de\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u5217\u8868 Python 2 print Python , python_version () print range ( 3 ) print type ( range ( 3 )) Python 2.7.6 [0, 1, 2] type list Python 3 print ( Python , python_version ()) print ( range ( 3 )) print ( type ( range ( 3 ))) print ( list ( range ( 3 ))) Python 3.4.1 range(0, 3) class range [0, 1, 2] \u5728 Python 3 \u4e2d\u4e00\u4e9b\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u4e0d\u518d\u8fd4\u56de\u5217\u8868\u7684\u51fd\u6570\u548c\u65b9\u6cd5\uff1a + zip() + map() + filter() + dictionary's .keys() method + dictionary's .values() method + dictionary's .items() method Link What\u2019s New In Python 3.0?","title":"python2/3\u5bf9\u6bd4"},{"location":"python/py_diff2/#python-27x-python-3x","text":"\u8bb8\u591a Python \u521d\u5b66\u8005\u60f3\u77e5\u9053\u4ed6\u4eec\u5e94\u8be5\u4ece Python \u7684\u54ea\u4e2a\u7248\u672c\u5f00\u59cb\u5b66\u4e60\u3002\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\u6211\u7684\u7b54\u6848\u662f \u201c\u4f60\u5b66\u4e60\u4f60\u559c\u6b22\u7684\u6559\u7a0b\u7684\u7248\u672c\uff0c\u7136\u540e\u68c0\u67e5\u4ed6\u4eec\u4e4b\u95f4\u7684\u4e0d\u540c\u3002\" \u4f46\u662f\u5982\u679c\u4f60\u5f00\u59cb\u4e00\u4e2a\u65b0\u9879\u76ee\uff0c\u5e76\u4e14\u6709\u9009\u62e9\u6743\uff1f\u6211\u60f3\u8bf4\u7684\u662f\u76ee\u524d\u6ca1\u6709\u5bf9\u9519\uff0c\u53ea\u8981\u4f60\u8ba1\u5212\u4f7f\u7528\u7684\u5e93 Python 2.7.x \u548c Python 3.x \u53cc\u65b9\u90fd\u652f\u6301\u7684\u8bdd\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5f53\u5728\u7f16\u5199\u5b83\u4eec\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u7684\u4ee3\u7801\uff0c\u6216\u8005\u662f\u4f60\u8ba1\u5212\u79fb\u690d\u4f60\u7684\u9879\u76ee\u7684\u65f6\u5019\uff0c\u662f\u975e\u5e38\u503c\u5f97\u770b\u770b\u8fd9\u4e24\u4e2a\u4e3b\u8981\u6d41\u884c\u7684 Python \u7248\u672c\u4e4b\u95f4\u7684\u5dee\u522b\u7684\uff0c\u4ee5\u4fbf\u907f\u514d\u5e38\u89c1\u7684\u9677\u9631\u3002","title":"Python 2.7.x \u548c Python 3.x \u7684\u4e3b\u8981\u533a\u522b"},{"location":"python/py_diff2/#future","text":"\u7528\u9014:\u5728 Python 2 \u91cc\u5bfc\u5165\u90a3\u4e9b\u5728 Python 3 \u91cc\u624d\u751f\u6548\u7684\u6a21\u5757\u548c\u51fd\u6570: from __future__ import division","title":"\u4f7f\u7528 future \u6a21\u5757"},{"location":"python/py_diff2/#print","text":"\u5f88\u7410\u788e\uff0c\u800c print \u8bed\u6cd5\u7684\u53d8\u5316\u53ef\u80fd\u662f\u6700\u5e7f\u4e3a\u4eba\u77e5\u7684\u4e86\uff0c\u4f46\u662f\u4ecd\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff1a Python 2 \u7684 print \u58f0\u660e\u5df2\u7ecf\u88ab print() \u51fd\u6570\u53d6\u4ee3\u4e86\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5fc5\u987b\u5305\u88c5\u6211\u4eec\u60f3\u6253\u5370\u5728\u5c0f\u62ec\u53f7\u4e2d\u7684\u5bf9\u8c61\u3002 Python 2 \u4e0d\u5177\u6709\u989d\u5916\u7684\u5c0f\u62ec\u53f7\u95ee\u9898\u3002\u4f46\u5bf9\u6bd4\u4e00\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u6309\u7167 Python 2 \u7684\u65b9\u5f0f\u4e0d\u4f7f\u7528\u5c0f\u62ec\u53f7\u8c03\u7528 print \u51fd\u6570\uff0cPython 3 \u5c06\u629b\u51fa\u4e00\u4e2a\u8bed\u6cd5\u5f02\u5e38\uff08SyntaxError\uff09\u3002","title":"print \u51fd\u6570"},{"location":"python/py_diff2/#python-2","text":"print Python , python_version () print Hello, World! print ( Hello, World! ) print text , ; print print more text on the same line","title":"Python 2"},{"location":"python/py_diff2/#python-3","text":"print ( Python , python_version ()) print ( Hello, World! ) print ( some text, , end = ) print ( print more text on the same line )","title":"Python 3"},{"location":"python/py_diff2/#integer-division","text":"\u5982\u679c\u4f60\u6b63\u5728\u79fb\u690d\u4ee3\u7801\uff0c\u8fd9\u4e2a\u53d8\u5316\u662f\u7279\u522b\u5371\u9669\u7684\u3002\u6216\u8005\u4f60\u5728 Python 2 \u4e0a\u6267\u884c Python 3 \u7684\u4ee3\u7801\u3002\u56e0\u4e3a\u8fd9\u4e2a\u6574\u9664\u7684\u53d8\u5316\u8868\u73b0\u5728\u5b83\u4f1a\u88ab\u5ffd\u89c6\uff08\u5373\u5b83\u4e0d\u4f1a\u629b\u51fa\u8bed\u6cd5\u5f02\u5e38\uff09\u3002 \u56e0\u6b64\uff0c\u6211\u8fd8\u662f\u503e\u5411\u4e8e\u4f7f\u7528\u4e00\u4e2a float(3)/2 \u6216 3/2.0 \u4ee3\u66ff\u5728\u6211\u7684 Python 3 \u811a\u672c\u4fdd\u5b58\u5728 Python 2 \u4e2d\u7684 3/2 \u7684\u4e00\u4e9b\u9ebb\u70e6\uff08\u5e76\u4e14\u53cd\u800c\u8fc7\u6765\u4e5f\u4e00\u6837\uff0c\u6211\u5efa\u8bae\u5728\u4f60\u7684 Python 2 \u811a\u672c\u4e2d\u4f7f\u7528 from future import division\uff09","title":"\u6574\u9664 Integer division"},{"location":"python/py_diff2/#python-2_1","text":"print Python , python_version () print 3 / 2 = , 3 / 2 print 3 // 2 = , 3 // 2 print 3 / 2.0 = , 3 / 2.0 print 3 // 2.0 = , 3 // 2.0 Python 2.7.6 3 / 2 = 1 3 // 2 = 1 3 / 2.0 = 1.5 3 // 2.0 = 1.0","title":"Python 2"},{"location":"python/py_diff2/#python-3_1","text":"print ( Python , python_version ()) print ( 3 / 2 = , 3 / 2 ) print ( 3 // 2 = , 3 // 2 ) print ( 3 / 2.0 = , 3 / 2.0 ) print ( 3 // 2.0 = , 3 // 2.0 ) Python 3.4.1 3 / 2 = 1.5 3 // 2 = 1 3 / 2.0 = 1.5 3 // 2.0 = 1.0","title":"Python 3"},{"location":"python/py_diff2/#unicode","text":"Python 2 \u6709 ASCII str() \u7c7b\u578b\uff0c unicode() \u662f\u5355\u72ec\u7684\uff0c\u4e0d\u662f byte \u7c7b\u578b\u3002 \u73b0\u5728\uff0c \u5728 Python 3\uff0c\u6211\u4eec\u6700\u7ec8\u6709\u4e86 Unicode (utf-8) \u5b57\u7b26\u4e32\uff0c\u4ee5\u53ca\u4e00\u4e2a\u5b57\u8282\u7c7b\uff1a byte \u548c bytearrays \u3002","title":"Unicode"},{"location":"python/py_diff2/#python-2_2","text":"print type ( unicode ( this is like a python3 str type )) output is : type unicode print type ( b byte type does not exist ) output is : type str print they are really + b the same output is :they are really the same print type ( bytearray ( b bytearray oddly does exist though )) output is : type bytearray","title":"Python 2"},{"location":"python/py_diff2/#python-3_2","text":"print ( Python , python_version (), end = ) print ( has , type ( b bytes for storing data )) Python 3.4.1 has class bytes print ( and Python , python_version (), end = ) print ( also has , type ( bytearray ( b bytearrays ))) and Python 3.4.1 also has class bytearray","title":"Python 3"},{"location":"python/py_diff2/#xrange","text":"Python 2 \u91cc\u7684range() \u548c xrange() \u8fd8\u662f\u6709\u70b9\u533a\u522b\u7684. xrange() \u66f4\u50cf\u4e00\u4e2a\u751f\u6210\u5668.range()\u751f\u6210\u7684\u662flist. Python 3 \u91cc\u53d6\u6d88\u4e86xrange() \u4ee3\u4e4b\u4ee5range() \u5b9e\u9645\u4e0a Python 3 \u628a\u5f88\u591a\u8fd4\u56de\u4e3aList\u7684\u6539\u6210\u4e86itrable.","title":"xrange"},{"location":"python/py_diff2/#raising-exceptions","text":"","title":"Raising exceptions"},{"location":"python/py_diff2/#python2","text":"raise IOError , file error","title":"python2"},{"location":"python/py_diff2/#python3","text":"raise ( IOError , file error )","title":"python3"},{"location":"python/py_diff2/#handling-exceptions","text":"","title":"Handling exceptions"},{"location":"python/py_diff2/#python2_1","text":"try : let_us_cause_a_NameError except NameError , err : print err , -- our error message","title":"python2"},{"location":"python/py_diff2/#python3_1","text":"try : let_us_cause_a_NameError except NameError as err : print ( err , -- our error message )","title":"python3"},{"location":"python/py_diff2/#next-next","text":".next() \u5728python\u4e2d\u88ab\u79fb\u9664,\u4e24\u4e2a\u7248\u672c\u90fd\u53ef\u4ee5\u7528 next()","title":"next() \u51fd\u6570 \u548c .next() \u65b9\u6cd5"},{"location":"python/py_diff2/#python2_2","text":"my_generator = ( letter for letter in abcdefg ) next ( my_generator ) my_generator . next ()","title":"python2"},{"location":"python/py_diff2/#python3_2","text":"my_generator = ( letter for letter in abcdefg ) next ( my_generator )","title":"python3"},{"location":"python/py_diff2/#for","text":"\u5728 Python 3.x \u4e2d for \u5faa\u73af\u53d8\u91cf\u4e0d\u4f1a\u518d\u5bfc\u81f4\u547d\u540d\u7a7a\u95f4\u6cc4\u6f0f","title":"For \u5faa\u73af\u53d8\u91cf\u548c\u5168\u5c40\u547d\u540d\u7a7a\u95f4\u6cc4\u6f0f"},{"location":"python/py_diff2/#python2_3","text":"i = 1 print before: i = , i print comprehension: , [ i for i in range ( 5 )] print after: i = , i before: i = 1 comprehension: [0, 1, 2, 3, 4] after: i = 4","title":"python2"},{"location":"python/py_diff2/#python3_3","text":"i = 1 print ( before: i = , i ) print ( comprehension: , [ i for i in range ( 5 )]) print ( after: i = , i ) before: i = 1 comprehension: [0, 1, 2, 3, 4] after: i = 1","title":"python3"},{"location":"python/py_diff2/#_1","text":"\u5728 Python 3 \u4e2d\u7684\u53e6\u5916\u4e00\u4e2a\u53d8\u5316\u5c31\u662f\u5f53\u5bf9\u4e0d\u53ef\u6392\u5e8f\u7c7b\u578b\u505a\u6bd4\u8f83\u7684\u65f6\u5019\uff0c\u4f1a\u629b\u51fa\u4e00\u4e2a\u7c7b\u578b\u9519\u8bef\u3002","title":"\u6bd4\u8f83\u4e0d\u53ef\u6392\u5e8f\u7c7b\u578b"},{"location":"python/py_diff2/#python2_4","text":"print (1, 2) foo = , ( 1 , 2 ) foo (1, 2) foo = True","title":"python2"},{"location":"python/py_diff2/#python3_4","text":"print ( [1, 2] foo = , [ 1 , 2 ] foo ) TypeError","title":"python3"},{"location":"python/py_diff2/#input","text":"python 2\u91cc \u6211\u4eec\u6709 input() \u548c raw_input() ,\u533a\u522b\u662f raw_input() \u4f1a\u8bb2\u8f93\u5165\u8fd4\u56destr.\u800ci nput() \u4f1a\u8bd5\u56fe\u6267\u884c\u8f93\u5165. Python 3 \u91cc\u7684 input() \u8fd4\u56de\u5b57\u7b26\u4e32,\u4e0d\u518d\u6709 raw_input() ,\u5982\u679c\u60f3\u6267\u884c\u8f93\u5165,\u53ef\u4ee5 eval(input())","title":"\u901a\u8fc7 input()\u89e3\u6790\u7528\u6237\u7684\u8f93\u5165"},{"location":"python/py_diff2/#_2","text":"","title":"\u8fd4\u56de\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u5217\u8868"},{"location":"python/py_diff2/#python-2_3","text":"print Python , python_version () print range ( 3 ) print type ( range ( 3 )) Python 2.7.6 [0, 1, 2] type list","title":"Python 2"},{"location":"python/py_diff2/#python-3_3","text":"print ( Python , python_version ()) print ( range ( 3 )) print ( type ( range ( 3 ))) print ( list ( range ( 3 ))) Python 3.4.1 range(0, 3) class range [0, 1, 2] \u5728 Python 3 \u4e2d\u4e00\u4e9b\u7ecf\u5e38\u4f7f\u7528\u5230\u7684\u4e0d\u518d\u8fd4\u56de\u5217\u8868\u7684\u51fd\u6570\u548c\u65b9\u6cd5\uff1a + zip() + map() + filter() + dictionary's .keys() method + dictionary's .values() method + dictionary's .items() method","title":"Python 3"},{"location":"python/py_diff2/#link","text":"What\u2019s New In Python 3.0?","title":"Link"},{"location":"python/py_django/","text":"python django django \u5b89\u88c5 pip install django django \u7ed3\u6784 \u5efa\u7acb\u4e00\u4e2a\u7f51\u7ad9\u6a21\u677f django-admin startproject mysite \u7ed3\u6784\u5982\u4e0b mysite manage.py mysite __init__.py settings.py urls.py wsgi.py django-admin \u548c manage.py manage.py #\u6839\u636e mysite/settings.py\u7684\u914d\u7f6e\u52a0\u8f7d\u4f9d\u8d56\u5e93\u548c\u6587\u4ef6 python manage.py migrate --run-syncdb #\u542f\u52a8\u670d\u52a1\u5668 python manage.py runserver 8000 --noreload django \u914d\u7f6e DATABASES \u9ed8\u8ba4\u7528sqllite \u9ed8\u8ba4\u7528sqllite DATABASES = { default : { ENGINE : django.db.backends.sqlite3 , NAME : mydatabase , } } PostgreSQL\u914d\u7f6e: DATABASES = { default : { ENGINE : django.db.backends.postgresql_psycopg2 , NAME : mydatabase , USER : mydatabaseuser , PASSWORD : mypassword , HOST : 127.0.0.1 , PORT : 5432 , } } \u5176\u4ed6ENGINE: django.db.backends.postgresql_psycopg2 django.db.backends.mysql django.db.backends.sqlite3 django.db.backends.oracle","title":"django"},{"location":"python/py_django/#python-django","text":"","title":"python django"},{"location":"python/py_django/#django","text":"pip install django","title":"django \u5b89\u88c5"},{"location":"python/py_django/#django_1","text":"\u5efa\u7acb\u4e00\u4e2a\u7f51\u7ad9\u6a21\u677f django-admin startproject mysite \u7ed3\u6784\u5982\u4e0b mysite manage.py mysite __init__.py settings.py urls.py wsgi.py","title":"django \u7ed3\u6784"},{"location":"python/py_django/#django-admin-managepy","text":"","title":"django-admin \u548c manage.py"},{"location":"python/py_django/#managepy","text":"#\u6839\u636e mysite/settings.py\u7684\u914d\u7f6e\u52a0\u8f7d\u4f9d\u8d56\u5e93\u548c\u6587\u4ef6 python manage.py migrate --run-syncdb #\u542f\u52a8\u670d\u52a1\u5668 python manage.py runserver 8000 --noreload","title":"manage.py"},{"location":"python/py_django/#django_2","text":"DATABASES \u9ed8\u8ba4\u7528sqllite \u9ed8\u8ba4\u7528sqllite DATABASES = { default : { ENGINE : django.db.backends.sqlite3 , NAME : mydatabase , } } PostgreSQL\u914d\u7f6e: DATABASES = { default : { ENGINE : django.db.backends.postgresql_psycopg2 , NAME : mydatabase , USER : mydatabaseuser , PASSWORD : mypassword , HOST : 127.0.0.1 , PORT : 5432 , } } \u5176\u4ed6ENGINE: django.db.backends.postgresql_psycopg2 django.db.backends.mysql django.db.backends.sqlite3 django.db.backends.oracle","title":"django \u914d\u7f6e"},{"location":"python/py_enum/","text":"python \u679a\u4e3e,\u5143\u7c7b \u679a\u4e3e \u5c06\u6211\u4eec\u8981\u5b9a\u4e49\u5e38\u91cf\u7ec4\u65f6\u5e38\u89c4\u7684\u505a\u6cd5\u662f\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u53d8\u91cf,\u867d\u7136\u7b80\u5355\u4f46\u8fd9\u6837\u4e0d\u5229\u4e8e\u7ba1\u7406,\u5982: blue,red,green=1,2,3 ,\u66f4\u597d\u7684\u505a\u6cd5\u662f\u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e:Python\u63d0\u4f9b\u4e86 Enum \u7c7b\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd. from enum import Enum #Enum( \u679a\u4e3e\u540d\u5b57 ,( \u679a\u4e3e\u5b57\u6bb5\u6807\u8bc6 )) Color = Enum ( Color ,( blue , red , green )) print ( Color . blue . value ) for name , member in Color . __members__ . items (): print ( name , = , member , , , member . value ) 1 ( blue , = , Color.blue: 1 , , , 1) ( red , = , Color.red: 2 , , , 2) ( green , = , Color.green: 3 , , , 3) value \u503c\u662f\u81ea\u52a8\u9644\u52a0\u7684\u5c5e\u6027\u9ed8\u8ba4\u4ece 1 \u5f00\u59cb\u8ba1\u6570,\u5982\u679c\u8981\u66f4\u52a0\u7cbe\u786e\u5730\u63a7\u5236\u6211\u4eec\u53ef\u4ee5\u7ee7\u627f\u81ea Enum \u81ea\u5b9a\u4e49\u7c7b: from enum import Enum , unique @unique class Color ( Enum ): blue = 0 # blue\u7684value\u4e3a0 red = 1 green = 2 print ( Color . blue . value ) unique \u88c5\u9970\u5668\u9650\u5b9a\u6ca1\u6709\u91cd\u590d\u503c metaclass metaclass \u5143\u7c7b\u7528\u4e8e\u52a8\u6001\u6539\u53d8\u7c7b\u7684\u7684\u521b\u5efa\u884c\u4e3a class ListMetaclass ( type ): def __new__ ( cls , name , base , attrs ): attrs [ add ] = lambda self , value : self . append ( value ) return type . __new__ ( cls , name , base , attrs ) class MyList ( list , metaclass = ListMetaclass ): #python2 # __metaclass__ = ListMetaclass docstring for MyList def __init__ ( self ): super ( MyList , self ) . __init__ () mylist = MyList () mylist . add ( 1 ) print ( mylist )","title":"\u679a\u4e3e"},{"location":"python/py_enum/#python","text":"","title":"python \u679a\u4e3e,\u5143\u7c7b"},{"location":"python/py_enum/#_1","text":"\u5c06\u6211\u4eec\u8981\u5b9a\u4e49\u5e38\u91cf\u7ec4\u65f6\u5e38\u89c4\u7684\u505a\u6cd5\u662f\u5b9a\u4e49\u4e00\u7cfb\u5217\u7684\u53d8\u91cf,\u867d\u7136\u7b80\u5355\u4f46\u8fd9\u6837\u4e0d\u5229\u4e8e\u7ba1\u7406,\u5982: blue,red,green=1,2,3 ,\u66f4\u597d\u7684\u505a\u6cd5\u662f\u5b9a\u4e49\u4e00\u4e2a\u679a\u4e3e:Python\u63d0\u4f9b\u4e86 Enum \u7c7b\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd. from enum import Enum #Enum( \u679a\u4e3e\u540d\u5b57 ,( \u679a\u4e3e\u5b57\u6bb5\u6807\u8bc6 )) Color = Enum ( Color ,( blue , red , green )) print ( Color . blue . value ) for name , member in Color . __members__ . items (): print ( name , = , member , , , member . value ) 1 ( blue , = , Color.blue: 1 , , , 1) ( red , = , Color.red: 2 , , , 2) ( green , = , Color.green: 3 , , , 3) value \u503c\u662f\u81ea\u52a8\u9644\u52a0\u7684\u5c5e\u6027\u9ed8\u8ba4\u4ece 1 \u5f00\u59cb\u8ba1\u6570,\u5982\u679c\u8981\u66f4\u52a0\u7cbe\u786e\u5730\u63a7\u5236\u6211\u4eec\u53ef\u4ee5\u7ee7\u627f\u81ea Enum \u81ea\u5b9a\u4e49\u7c7b: from enum import Enum , unique @unique class Color ( Enum ): blue = 0 # blue\u7684value\u4e3a0 red = 1 green = 2 print ( Color . blue . value ) unique \u88c5\u9970\u5668\u9650\u5b9a\u6ca1\u6709\u91cd\u590d\u503c","title":"\u679a\u4e3e"},{"location":"python/py_enum/#metaclass","text":"metaclass \u5143\u7c7b\u7528\u4e8e\u52a8\u6001\u6539\u53d8\u7c7b\u7684\u7684\u521b\u5efa\u884c\u4e3a class ListMetaclass ( type ): def __new__ ( cls , name , base , attrs ): attrs [ add ] = lambda self , value : self . append ( value ) return type . __new__ ( cls , name , base , attrs ) class MyList ( list , metaclass = ListMetaclass ): #python2 # __metaclass__ = ListMetaclass docstring for MyList def __init__ ( self ): super ( MyList , self ) . __init__ () mylist = MyList () mylist . add ( 1 ) print ( mylist )","title":"metaclass"},{"location":"python/py_error/","text":"python \u5f02\u5e38\u5904\u7406 \u5f02\u5e38\u6355\u6349 \u5f02\u5e38\u6355\u6349\u53ef\u4ee5\u4f7f\u6211\u4eec\u7684\u7a0b\u5e8f\u66f4\u52a0\u5065\u58ee \u5f53\u6211\u4eec\u8ba4\u4e3a\u67d0\u4e9b\u4ee3\u7801\u53ef\u80fd\u4f1a\u51fa\u9519\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528 try \u6765\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5982\u679c\u6267\u884c\u51fa\u9519\uff0c\u5219\u540e\u7eed\u4ee3\u7801\u4e0d\u4f1a\u7ee7\u7eed\u6267\u884c\uff0c\u800c\u662f\u76f4\u63a5\u8df3\u8f6c\u81f3\u9519\u8bef\u5904\u7406\u4ee3\u7801\uff0c\u5373 except \u8bed\u53e5\u5757\uff0c\u6267\u884c\u5b8c except \u540e\uff0c\u5982\u679c\u6709 finally \u8bed\u53e5\u5757\uff0c\u5219\u6267\u884c finally \u8bed\u53e5\u5757\uff0c\u81f3\u6b64\uff0c\u6267\u884c\u5b8c\u6bd5 try : print ( try... ) r = 10 / int ( a ) print ( result: , r ) except ValueError as e : print ( ValueError: , e ) except ZeroDivisionError as e : print ( ZeroDivisionError: , e ) else : print ( no error! ) finally : print ( finally... ) print ( END ) try... ValueError: invalid literal for int() with base 10: a finally... END \u8bb0\u5f55\u9519\u8bef traceback :\u5806\u6808\u4fe1\u606f logging :\u65e5\u5fd7\u8bb0\u5f55 import logging , traceback def foo ( s ): return 10 / int ( s ) def bar ( s ): return foo ( s ) * 2 def main (): try : bar ( 0 ) except Exception as e : print ( traceback . print_exc () ) # logging.exception(e) main () print ( END ) \u629b\u51fa\u9519\u8bef \u81ea\u5b9a\u4e49 error \u7c7b\u7ee7\u627fPython\u5df2\u6709\u7684\u5185\u7f6e\u7684\u9519\u8bef\u7c7b\u578b\uff08\u6bd4\u5982ValueError\uff0cTypeError\uff09, raise \u8bed\u53e5\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u7684\u5b9e\u4f8b class SelfError ( ValueError ): pass def foo ( s ): n = int ( s ) if n == 0 : raise SelfError ( invalid value: %s % s ) return n foo ( 0 )","title":"\u5f02\u5e38\u6355\u6349"},{"location":"python/py_error/#python","text":"","title":"python \u5f02\u5e38\u5904\u7406"},{"location":"python/py_error/#_1","text":"\u5f02\u5e38\u6355\u6349\u53ef\u4ee5\u4f7f\u6211\u4eec\u7684\u7a0b\u5e8f\u66f4\u52a0\u5065\u58ee \u5f53\u6211\u4eec\u8ba4\u4e3a\u67d0\u4e9b\u4ee3\u7801\u53ef\u80fd\u4f1a\u51fa\u9519\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528 try \u6765\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5982\u679c\u6267\u884c\u51fa\u9519\uff0c\u5219\u540e\u7eed\u4ee3\u7801\u4e0d\u4f1a\u7ee7\u7eed\u6267\u884c\uff0c\u800c\u662f\u76f4\u63a5\u8df3\u8f6c\u81f3\u9519\u8bef\u5904\u7406\u4ee3\u7801\uff0c\u5373 except \u8bed\u53e5\u5757\uff0c\u6267\u884c\u5b8c except \u540e\uff0c\u5982\u679c\u6709 finally \u8bed\u53e5\u5757\uff0c\u5219\u6267\u884c finally \u8bed\u53e5\u5757\uff0c\u81f3\u6b64\uff0c\u6267\u884c\u5b8c\u6bd5 try : print ( try... ) r = 10 / int ( a ) print ( result: , r ) except ValueError as e : print ( ValueError: , e ) except ZeroDivisionError as e : print ( ZeroDivisionError: , e ) else : print ( no error! ) finally : print ( finally... ) print ( END ) try... ValueError: invalid literal for int() with base 10: a finally... END","title":"\u5f02\u5e38\u6355\u6349"},{"location":"python/py_error/#_2","text":"traceback :\u5806\u6808\u4fe1\u606f logging :\u65e5\u5fd7\u8bb0\u5f55 import logging , traceback def foo ( s ): return 10 / int ( s ) def bar ( s ): return foo ( s ) * 2 def main (): try : bar ( 0 ) except Exception as e : print ( traceback . print_exc () ) # logging.exception(e) main () print ( END )","title":"\u8bb0\u5f55\u9519\u8bef"},{"location":"python/py_error/#_3","text":"\u81ea\u5b9a\u4e49 error \u7c7b\u7ee7\u627fPython\u5df2\u6709\u7684\u5185\u7f6e\u7684\u9519\u8bef\u7c7b\u578b\uff08\u6bd4\u5982ValueError\uff0cTypeError\uff09, raise \u8bed\u53e5\u629b\u51fa\u4e00\u4e2a\u9519\u8bef\u7684\u5b9e\u4f8b class SelfError ( ValueError ): pass def foo ( s ): n = int ( s ) if n == 0 : raise SelfError ( invalid value: %s % s ) return n foo ( 0 )","title":"\u629b\u51fa\u9519\u8bef"},{"location":"python/py_exceptions/","text":"Python \u7591\u96be\u6742\u75c7 Consider a more secure location (set with .set_extraction_path or the PYTHON_EGG_CACHE environment variable) chmod g-wx,o-wx . /home/far/.python-eggs/ InsecurePlatformWarning: A true SSLContext object is not available. pip install pyopenssl ndg-httpsclient pyasn1 pip cache location %USERPROFILE%\\AppData\\Local\\pip\\cache python\u5b89\u88c5easy_install\u5931\u8d25\u7684\u89e3\u51b3\u529e\u6cd5 \u9519\u8bef\u8be6\u60c5: File C:\\Python27\\lib\\mimetypes.py , line 249, in enum_types ctype = ctype.encode(default_encoding) # omit in 3.x! UnicodeDecodeError: ascii codec can t decode byte 0xd7 in position 9: ordinal not in range(128) \u89e3\u51b3: \u5728python\u5b89\u88c5\u76ee\u5f55Lib\u7684 mimetypes.py \u4e2d\uff0c default_encoding = sys.getdefaultencoding() \u8fd9\u53e5\u4e4b\u524d\u52a0\u4e0a\u8bbe\u7f6e\u9ed8\u8ba4\u7f16\u7801\uff0c\u6dfb\u52a0\u5982\u4e0b\u8bed\u53e5\uff1a reload ( sys ) sys . setdefaultencoding ( cp936 ) \u517c\u5bb9python2\u548cpython3 2to3 python C:\\Python33\\Tools\\Scripts\\2to3.py -w 2to3Test.py ImportError: No module named _sqlite3 \u62a5\u9519\u89e3\u51b3\u65b9\u6cd5 #centos yum -y install sqlite-devel #\u91cd\u65b0\u5b89\u88c5 yum install python #mac brew install sqlite3 #\u91cd\u65b0\u5b89\u88c5 brew install 2 .7.9","title":"\u7591\u96be\u6742\u75c7"},{"location":"python/py_exceptions/#python","text":"","title":"Python \u7591\u96be\u6742\u75c7"},{"location":"python/py_exceptions/#consider-a-more-secure-location-set-with-set_extraction_path-or-the-python_egg_cache-environment-variable","text":"chmod g-wx,o-wx . /home/far/.python-eggs/","title":"Consider a more secure location (set with .set_extraction_path or the PYTHON_EGG_CACHE environment variable)"},{"location":"python/py_exceptions/#insecureplatformwarning-a-true-sslcontext-object-is-not-available","text":"pip install pyopenssl ndg-httpsclient pyasn1","title":"InsecurePlatformWarning: A true SSLContext object is not available."},{"location":"python/py_exceptions/#pip-cache-location","text":"%USERPROFILE%\\AppData\\Local\\pip\\cache","title":"pip cache location"},{"location":"python/py_exceptions/#pythoneasy_install","text":"\u9519\u8bef\u8be6\u60c5: File C:\\Python27\\lib\\mimetypes.py , line 249, in enum_types ctype = ctype.encode(default_encoding) # omit in 3.x! UnicodeDecodeError: ascii codec can t decode byte 0xd7 in position 9: ordinal not in range(128) \u89e3\u51b3: \u5728python\u5b89\u88c5\u76ee\u5f55Lib\u7684 mimetypes.py \u4e2d\uff0c default_encoding = sys.getdefaultencoding() \u8fd9\u53e5\u4e4b\u524d\u52a0\u4e0a\u8bbe\u7f6e\u9ed8\u8ba4\u7f16\u7801\uff0c\u6dfb\u52a0\u5982\u4e0b\u8bed\u53e5\uff1a reload ( sys ) sys . setdefaultencoding ( cp936 )","title":"python\u5b89\u88c5easy_install\u5931\u8d25\u7684\u89e3\u51b3\u529e\u6cd5"},{"location":"python/py_exceptions/#python2python3","text":"","title":"\u517c\u5bb9python2\u548cpython3"},{"location":"python/py_exceptions/#2to3","text":"python C:\\Python33\\Tools\\Scripts\\2to3.py -w 2to3Test.py","title":"2to3"},{"location":"python/py_exceptions/#importerror-no-module-named-_sqlite3","text":"#centos yum -y install sqlite-devel #\u91cd\u65b0\u5b89\u88c5 yum install python #mac brew install sqlite3 #\u91cd\u65b0\u5b89\u88c5 brew install 2 .7.9","title":"ImportError: No module named _sqlite3 \u62a5\u9519\u89e3\u51b3\u65b9\u6cd5"},{"location":"python/py_fileio/","text":"python \u6587\u4ef6io \u6587\u4ef6\u8bfb\u5199 \u6587\u4ef6\u8bfb\u53d6 o_file = open ( os . path . realpath ( python.txt ), r , encoding = GBK ) print ( o_file . read ()) o_file . close () os.path.realpath\u3000\u62ff\u5230\u5f53\u524d\u811a\u672c\u7684\u76ee\u5f55. r \u8bbe\u7f6e\u5c5e\u6027\uff0c\u53ea\u8bfb\uff0cmode=\u2019rb\u2019\u8bfb\u53d6\u4e3a\u4e8c\u8fdb\u5236\u6570\u636e encoding \u6307\u5b9a\u7f16\u7801\u65b9\u5f0f o_file.close()\u3000 \u663e\u5f0f\u5730\u5173\u95ed\u6587\u4ef6\uff0c\u4f46\u662f\u672a\u9500\u6bc1\u6587\u4ef6\u5bf9\u8c61\uff0c\u800c\u4e14\u5728\u51fa\u73b0\u5f02\u5e38\u65f6\u4e0d\u4e00\u5b9a\u80fd\u5173\u95ed\u6587\u4ef6\u6d41\uff0c\u6240\u6709python3\u6709\u53e6\u4e00\u79cd\u5199\u6cd5 \u7528with\u6765\u521b\u5efa\u8fd0\u884c\u65f6\u73af\u5883\uff0c\u4e0d\u7ba1\u662f\u5426\u6709\u5f02\u5e38\u5728with\u5757\u7ed3\u675f\u540e\u6587\u4ef6\u90fd\u4f1a\u5173\u95ed\uff0c\u7c7b\u4f3c\u4e8e\u51fd\u6570\u4f5c\u7528\u57df\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf with open ( os . path . realpath ( python.txt ), r , encoding = GBK ) as o_file : print ( o_file . read ()) \u6bcf\u6b21\u8bfb\u53d6\u4e00\u884c: line_number = 0 with open ( os . path . realpath ( python.txt ), r , encoding = GBK ) as o_file : for a_line in o_file : line_number += 1 print ( {0} \\t {1} . format ( line_number , a_line . rstrip ())) \u56e0\u4e3a\u6d41\u5bf9\u8c61\u4e5f\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528for\u5faa\u73af\u6765\u8bfb\u53d6\uff0cpython\u4f1a\u81ea\u52a8\u8bc6\u522b\u884c\u7ed3\u675f\u7b26\u3002rstrip()\u662f\u53bb\u7a7a\u767d\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5. \u4f7f\u7528 readlines : f = open ( python.txt , r ) for line in f . readlines (): print ( line . strip ()) # \u628a\u672b\u5c3e\u7684 \\n \u5220\u6389 f . close () \u5199\u5165\u6587\u672c with open ( os . path . realpath ( python.txt ), mode = w ) as o_file : o_file . write ( test success \\n ) with open ( os . path . realpath ( python.txt ), r , encoding = GBK ) as o_file : print ( o_file . read ()) \u4e0e\u8bfb\u53d6\u6587\u672c\u65b9\u5f0f\u76f8\u540c\uff0cmode=\u2019w\u2019\u4ee3\u8868\u8986\u76d6\uff0cmode=\u2019a\u2019\u4ee3\u8868\u8ffd\u52a0 \u3002 StringIO \u5185\u5b58\u4e2d\u7684\u5b57\u7b26\u7f13\u51b2\u6d41 from io import StringIO f = StringIO () f . write ( hello \\n ) f . write ( far ) print ( f . getvalue ()) f . close () BytesIO \u5185\u5b58\u4e2d\u7684\u5b57\u8282\u7f13\u51b2\u6d41 from io import BytesIO f = BytesIO () f . write ( \u4e2d\u6587 . encode ( utf-8 )) print ( f . getvalue ()) f . close () XML\u64cd\u4f5c \u89e3\u6790XML python\u89e3\u6790\u6709Dom\u548cSax\u89e3\u6790\u5668\uff0c\u73b0\u5728\u6211\u4eec\u6765\u7528\u53e6\u5916\u4e00\u4e2a\u5e93:xml.etree.ElementTree\u6765\u89e3\u6790 data name id= 1 wujiyu /name name id= 2 wujiyu /name /data import os import xml.etree.ElementTree as etree tree = etree . parse ( os . path . realpath ( py.xml )) root = tree . getroot () print ( root ) # Element data at 0x02B1A330 print ( root [ 0 ] . tag ) #name print ( root [ 0 ] . attrib [ id ]) #1 print ( len ( root . findall ( name ))) #2 \u6240\u6709\u8282\u70b9\u90fd\u4e3a\u5217\u8868\uff0c\u6240\u6709\u5c5e\u6027\u90fd\u4e3a\u5b57\u5178,findall\u7528\u6765\u67e5\u627e\u5143\u7d20\uff0c\u53ef\u5d4c\u5957\u67e5\u627e\u3002 \u5bf9\u4e8e\u5927\u578bxml\u53ef\u7528lxml\u6765\u4ee3\u66ffElementTree,lxml\u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7684\u5f00\u6e90\u5e93\uff0cfindall\u67e5\u627e\u8bed\u6cd5\u66f4\u5f3a\u5927,api\u4e0eElementTree\u76f8\u540c \u521b\u5efaxml \u6211\u4eec\u7528\u4e0blxml\u5427\uff0clxml\u662f\u7b2c\u4e09\u65b9\u5e93\uff0c\u9700\u8981\u5b89\u88c5\uff0c\u5730\u5740: http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml \u770b\u51c6\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u7248\u672c \u5f00\u59cb\u521b\u5efaxml from lxml import etree import os newfeed = etree . Element ( feed ) names = etree . SubElement ( newfeed , name , attrib = { old : yes , id : 1 }) names . text = wujiyu print ( etree . tostring ( newfeed )) tutorial\uff1a http://lxml.de/tutorial.html ## \u6587\u4ef6\u8def\u5f84\u64cd\u4f5c import os # \u5217\u51fa\u5f53\u524d\u76ee\u5f55\u6587\u4ef6 print ( os . listdir ( path = . )) # [ python.txt , init.py ] # \u5207\u5272\u5730\u5740 print ( os . path . split ( ab/a.txt )) # ( ab , a.txt ) # \u628a\u6587\u4ef6\u540d\u5206\u6210\u6587\u4ef6\u540d\u79f0\u548c\u6269\u5c55\u540d print ( os . path . splitext ( ab/a.txt )) # ( ab/a , .txt ) # \u6587\u4ef6+\u6269\u5c55\u540d print ( os . path . basename ( bcd/abc )) # abc # \u521b\u5efa\u4e00\u7ea7\u76ee\u5f55 os . mkdir ( test1 ) # \u521b\u5efa\u591a\u7ea7\u76ee\u5f55 os . makedirs ( test2/test ) # \u5220\u9664\u4e00\u4e2a\u76ee\u5f55\u4e0b\u6240\u6709\u4e1c\u897f os . removedirs ( path ) # \u5220\u9664\u4e00\u4e2a\u76ee\u5f55\uff0c\u800c\u4e14\u4e00\u5b9a\u8981\u7a7a\uff0c\u5426\u5219os.errer os . rmdir ( path ) \u76f8\u5bf9\u8def\u5f84,\u7edd\u5bf9\u8def\u5f84 print( sys.path: +sys.path[0]) print( sys.argv: +sys.argv[0]) print( __file__: +__file__) print( os.getcwd(): +os.getcwd()) print( os.path.realpath(): +os.path.realpath(__file__)) print( (os.path.abspath(__file__)): +os.path.abspath(__file__)) print( os.path.dirname(os.path.realpath()): +os.path.dirname(os.path.realpath(__file__))) print( os.path.dirname(os.path.abspath(__file__)): +os.path.dirname(os.path.abspath(__file__))) \u7ed3\u679c: sys.path:/Users/far/Develop/git/py_search/cloudapps/auto_sign sys.argv:/Users/far/Develop/git/py_search/cloudapps/auto_sign/test.py __file__:/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu/zumuzu_tv.py os.getcwd():/Users/far/Develop/git/py_search/cloudapps/auto_sign os.path.realpath():/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu/zumuzu_tv.py (os.path.abspath(__file__)):/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu/zumuzu_tv.py os.path.dirname(os.path.realpath()):/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu os.path.dirname(os.path.abspath(__file__)):/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu [Finished in 0.1s] \u5e8f\u5217\u5316 pickle dump : \u5c06\u5bf9\u8c61\u7cfb\u5217\u5316\u5230\u6587\u4ef6\u4e2d load : \u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d\u7cfb\u5217\u5316\u4fe1\u606f import pickle t = { name : far } with open ( dump.txt , wb ) as f : pickle . dump ( t , f ) with open ( dump.txt , rb ) as f : d = pickle . load ( f ) print ( d ) { name : far } json \u57fa\u7840 dumps :\u5c06\u5bf9\u8c61\u8f6c\u5316\u6210\u5b57\u7b26\u4e32 loads :\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u5bf9\u8c61 load :\u52a0\u8f7d\u6587\u4ef6\u5bf9\u8c61\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u5bf9\u8c61 import json t = { name : far } t_str = json . dumps ( t ) print ( t_str ) d = json . loads ( t_str ) print ( d ) d = json . load ( open ( dump.json , r )) print ( d ) { name : far } { name : far } { name : far } \u8f6c\u6362\u7c7b\u5bf9\u8c61 import json class Student ( object ): def __init__ ( self , name , age , score ): self . name = name self . age = age self . score = score #\u8f6c\u6362\u6210\u53ef\u89e3\u6790\u5b57\u7b26\u4e32\u5bf9\u8c61 def student2dict ( std ): return { name : std . name , age : std . age , score : std . score } #\u8f6c\u6362\u6210\u5bf9\u8c61 def dict2student ( d ): return Student ( d [ name ], d [ age ], d [ score ]) s = Student ( Bob , 20 , 88 ) d = json . dumps ( s , default = student2dict ) #\u81ea\u5b9a\u4e49\u4e00\u4e2a\u8f6c\u6362\u51fd\u6570 print ( d ) d = json . dumps ( s , default = lambda obj : obj . __dict__ ) #\u4f7f\u7528\u5bf9\u8c61\u7684dict\u5c5e\u6027 print ( d ) s1 = json . loads ( d , object_hook = dict2student ) print ( s1 . name , s1 . age , s1 . score ) { score : 88, name : Bob , age : 20} { score : 88, age : 20, name : Bob } Bob 20 88","title":"\u6587\u4ef6io"},{"location":"python/py_fileio/#python-io","text":"","title":"python  \u6587\u4ef6io"},{"location":"python/py_fileio/#_1","text":"","title":"\u6587\u4ef6\u8bfb\u5199"},{"location":"python/py_fileio/#_2","text":"o_file = open ( os . path . realpath ( python.txt ), r , encoding = GBK ) print ( o_file . read ()) o_file . close () os.path.realpath\u3000\u62ff\u5230\u5f53\u524d\u811a\u672c\u7684\u76ee\u5f55. r \u8bbe\u7f6e\u5c5e\u6027\uff0c\u53ea\u8bfb\uff0cmode=\u2019rb\u2019\u8bfb\u53d6\u4e3a\u4e8c\u8fdb\u5236\u6570\u636e encoding \u6307\u5b9a\u7f16\u7801\u65b9\u5f0f o_file.close()\u3000 \u663e\u5f0f\u5730\u5173\u95ed\u6587\u4ef6\uff0c\u4f46\u662f\u672a\u9500\u6bc1\u6587\u4ef6\u5bf9\u8c61\uff0c\u800c\u4e14\u5728\u51fa\u73b0\u5f02\u5e38\u65f6\u4e0d\u4e00\u5b9a\u80fd\u5173\u95ed\u6587\u4ef6\u6d41\uff0c\u6240\u6709python3\u6709\u53e6\u4e00\u79cd\u5199\u6cd5 \u7528with\u6765\u521b\u5efa\u8fd0\u884c\u65f6\u73af\u5883\uff0c\u4e0d\u7ba1\u662f\u5426\u6709\u5f02\u5e38\u5728with\u5757\u7ed3\u675f\u540e\u6587\u4ef6\u90fd\u4f1a\u5173\u95ed\uff0c\u7c7b\u4f3c\u4e8e\u51fd\u6570\u4f5c\u7528\u57df\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf with open ( os . path . realpath ( python.txt ), r , encoding = GBK ) as o_file : print ( o_file . read ()) \u6bcf\u6b21\u8bfb\u53d6\u4e00\u884c: line_number = 0 with open ( os . path . realpath ( python.txt ), r , encoding = GBK ) as o_file : for a_line in o_file : line_number += 1 print ( {0} \\t {1} . format ( line_number , a_line . rstrip ())) \u56e0\u4e3a\u6d41\u5bf9\u8c61\u4e5f\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528for\u5faa\u73af\u6765\u8bfb\u53d6\uff0cpython\u4f1a\u81ea\u52a8\u8bc6\u522b\u884c\u7ed3\u675f\u7b26\u3002rstrip()\u662f\u53bb\u7a7a\u767d\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5. \u4f7f\u7528 readlines : f = open ( python.txt , r ) for line in f . readlines (): print ( line . strip ()) # \u628a\u672b\u5c3e\u7684 \\n \u5220\u6389 f . close ()","title":"\u6587\u4ef6\u8bfb\u53d6"},{"location":"python/py_fileio/#_3","text":"with open ( os . path . realpath ( python.txt ), mode = w ) as o_file : o_file . write ( test success \\n ) with open ( os . path . realpath ( python.txt ), r , encoding = GBK ) as o_file : print ( o_file . read ()) \u4e0e\u8bfb\u53d6\u6587\u672c\u65b9\u5f0f\u76f8\u540c\uff0cmode=\u2019w\u2019\u4ee3\u8868\u8986\u76d6\uff0cmode=\u2019a\u2019\u4ee3\u8868\u8ffd\u52a0 \u3002","title":"\u5199\u5165\u6587\u672c"},{"location":"python/py_fileio/#stringio","text":"\u5185\u5b58\u4e2d\u7684\u5b57\u7b26\u7f13\u51b2\u6d41 from io import StringIO f = StringIO () f . write ( hello \\n ) f . write ( far ) print ( f . getvalue ()) f . close ()","title":"StringIO"},{"location":"python/py_fileio/#bytesio","text":"\u5185\u5b58\u4e2d\u7684\u5b57\u8282\u7f13\u51b2\u6d41 from io import BytesIO f = BytesIO () f . write ( \u4e2d\u6587 . encode ( utf-8 )) print ( f . getvalue ()) f . close ()","title":"BytesIO"},{"location":"python/py_fileio/#xml","text":"","title":"XML\u64cd\u4f5c"},{"location":"python/py_fileio/#xml_1","text":"python\u89e3\u6790\u6709Dom\u548cSax\u89e3\u6790\u5668\uff0c\u73b0\u5728\u6211\u4eec\u6765\u7528\u53e6\u5916\u4e00\u4e2a\u5e93:xml.etree.ElementTree\u6765\u89e3\u6790 data name id= 1 wujiyu /name name id= 2 wujiyu /name /data import os import xml.etree.ElementTree as etree tree = etree . parse ( os . path . realpath ( py.xml )) root = tree . getroot () print ( root ) # Element data at 0x02B1A330 print ( root [ 0 ] . tag ) #name print ( root [ 0 ] . attrib [ id ]) #1 print ( len ( root . findall ( name ))) #2 \u6240\u6709\u8282\u70b9\u90fd\u4e3a\u5217\u8868\uff0c\u6240\u6709\u5c5e\u6027\u90fd\u4e3a\u5b57\u5178,findall\u7528\u6765\u67e5\u627e\u5143\u7d20\uff0c\u53ef\u5d4c\u5957\u67e5\u627e\u3002 \u5bf9\u4e8e\u5927\u578bxml\u53ef\u7528lxml\u6765\u4ee3\u66ffElementTree,lxml\u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7684\u5f00\u6e90\u5e93\uff0cfindall\u67e5\u627e\u8bed\u6cd5\u66f4\u5f3a\u5927,api\u4e0eElementTree\u76f8\u540c","title":"\u89e3\u6790XML"},{"location":"python/py_fileio/#xml_2","text":"\u6211\u4eec\u7528\u4e0blxml\u5427\uff0clxml\u662f\u7b2c\u4e09\u65b9\u5e93\uff0c\u9700\u8981\u5b89\u88c5\uff0c\u5730\u5740: http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml \u770b\u51c6\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u7248\u672c \u5f00\u59cb\u521b\u5efaxml from lxml import etree import os newfeed = etree . Element ( feed ) names = etree . SubElement ( newfeed , name , attrib = { old : yes , id : 1 }) names . text = wujiyu print ( etree . tostring ( newfeed )) tutorial\uff1a http://lxml.de/tutorial.html ## \u6587\u4ef6\u8def\u5f84\u64cd\u4f5c import os # \u5217\u51fa\u5f53\u524d\u76ee\u5f55\u6587\u4ef6 print ( os . listdir ( path = . )) # [ python.txt , init.py ] # \u5207\u5272\u5730\u5740 print ( os . path . split ( ab/a.txt )) # ( ab , a.txt ) # \u628a\u6587\u4ef6\u540d\u5206\u6210\u6587\u4ef6\u540d\u79f0\u548c\u6269\u5c55\u540d print ( os . path . splitext ( ab/a.txt )) # ( ab/a , .txt ) # \u6587\u4ef6+\u6269\u5c55\u540d print ( os . path . basename ( bcd/abc )) # abc # \u521b\u5efa\u4e00\u7ea7\u76ee\u5f55 os . mkdir ( test1 ) # \u521b\u5efa\u591a\u7ea7\u76ee\u5f55 os . makedirs ( test2/test ) # \u5220\u9664\u4e00\u4e2a\u76ee\u5f55\u4e0b\u6240\u6709\u4e1c\u897f os . removedirs ( path ) # \u5220\u9664\u4e00\u4e2a\u76ee\u5f55\uff0c\u800c\u4e14\u4e00\u5b9a\u8981\u7a7a\uff0c\u5426\u5219os.errer os . rmdir ( path )","title":"\u521b\u5efaxml"},{"location":"python/py_fileio/#_4","text":"print( sys.path: +sys.path[0]) print( sys.argv: +sys.argv[0]) print( __file__: +__file__) print( os.getcwd(): +os.getcwd()) print( os.path.realpath(): +os.path.realpath(__file__)) print( (os.path.abspath(__file__)): +os.path.abspath(__file__)) print( os.path.dirname(os.path.realpath()): +os.path.dirname(os.path.realpath(__file__))) print( os.path.dirname(os.path.abspath(__file__)): +os.path.dirname(os.path.abspath(__file__))) \u7ed3\u679c: sys.path:/Users/far/Develop/git/py_search/cloudapps/auto_sign sys.argv:/Users/far/Develop/git/py_search/cloudapps/auto_sign/test.py __file__:/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu/zumuzu_tv.py os.getcwd():/Users/far/Develop/git/py_search/cloudapps/auto_sign os.path.realpath():/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu/zumuzu_tv.py (os.path.abspath(__file__)):/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu/zumuzu_tv.py os.path.dirname(os.path.realpath()):/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu os.path.dirname(os.path.abspath(__file__)):/Users/far/Develop/git/py_search/cloudapps/auto_sign/zimuzu [Finished in 0.1s]","title":"\u76f8\u5bf9\u8def\u5f84,\u7edd\u5bf9\u8def\u5f84"},{"location":"python/py_fileio/#_5","text":"","title":"\u5e8f\u5217\u5316"},{"location":"python/py_fileio/#pickle","text":"dump : \u5c06\u5bf9\u8c61\u7cfb\u5217\u5316\u5230\u6587\u4ef6\u4e2d load : \u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d\u7cfb\u5217\u5316\u4fe1\u606f import pickle t = { name : far } with open ( dump.txt , wb ) as f : pickle . dump ( t , f ) with open ( dump.txt , rb ) as f : d = pickle . load ( f ) print ( d ) { name : far }","title":"pickle"},{"location":"python/py_fileio/#json","text":"","title":"json"},{"location":"python/py_fileio/#_6","text":"dumps :\u5c06\u5bf9\u8c61\u8f6c\u5316\u6210\u5b57\u7b26\u4e32 loads :\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u5bf9\u8c61 load :\u52a0\u8f7d\u6587\u4ef6\u5bf9\u8c61\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u5bf9\u8c61 import json t = { name : far } t_str = json . dumps ( t ) print ( t_str ) d = json . loads ( t_str ) print ( d ) d = json . load ( open ( dump.json , r )) print ( d ) { name : far } { name : far } { name : far }","title":"\u57fa\u7840"},{"location":"python/py_fileio/#_7","text":"import json class Student ( object ): def __init__ ( self , name , age , score ): self . name = name self . age = age self . score = score #\u8f6c\u6362\u6210\u53ef\u89e3\u6790\u5b57\u7b26\u4e32\u5bf9\u8c61 def student2dict ( std ): return { name : std . name , age : std . age , score : std . score } #\u8f6c\u6362\u6210\u5bf9\u8c61 def dict2student ( d ): return Student ( d [ name ], d [ age ], d [ score ]) s = Student ( Bob , 20 , 88 ) d = json . dumps ( s , default = student2dict ) #\u81ea\u5b9a\u4e49\u4e00\u4e2a\u8f6c\u6362\u51fd\u6570 print ( d ) d = json . dumps ( s , default = lambda obj : obj . __dict__ ) #\u4f7f\u7528\u5bf9\u8c61\u7684dict\u5c5e\u6027 print ( d ) s1 = json . loads ( d , object_hook = dict2student ) print ( s1 . name , s1 . age , s1 . score ) { score : 88, name : Bob , age : 20} { score : 88, age : 20, name : Bob } Bob 20 88","title":"\u8f6c\u6362\u7c7b\u5bf9\u8c61"},{"location":"python/py_gui/","text":"GUI\u56fe\u5f62\u7f16\u7a0b Python\u652f\u6301\u591a\u79cd\u56fe\u5f62\u754c\u9762\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u5305\u62ec\uff1a Tk wxWidgets Qt GTK Tkinter from tkinter import * import tkinter.messagebox as messagebox class Application ( Frame ): def __init__ ( self , master = None ): Frame . __init__ ( self , master ) self . pack () self . createWidgets () def createWidgets ( self ): self . nameInput = Entry ( self ) self . nameInput . pack () self . alertButton = Button ( self , text = Hello , command = self . hello ) self . alertButton . pack () def hello ( self ): name = self . nameInput . get () or world messagebox . showinfo ( Message , Hello, %s % name ) app = Application () # \u8bbe\u7f6e\u7a97\u53e3\u6807\u9898: app . master . title ( Hello World ) # \u4e3b\u6d88\u606f\u5faa\u73af: app . mainloop () \u521b\u5efa\u4e00\u4e2a\u7a97\u4f53,\u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u89e6\u53d1 hello() \uff0c\u901a\u8fc7 self.nameInput.get() \u83b7\u5f97\u7528\u6237\u8f93\u5165\u7684\u6587\u672c\u540e\uff0c\u4f7f\u7528 tkMessageBox.showinfo() \u53ef\u4ee5\u5f39\u51fa\u6d88\u606f\u5bf9\u8bdd\u6846","title":"\u56fe\u5f62\u754c\u9762\u7f16\u7a0b"},{"location":"python/py_gui/#gui","text":"Python\u652f\u6301\u591a\u79cd\u56fe\u5f62\u754c\u9762\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u5305\u62ec\uff1a Tk wxWidgets Qt GTK","title":"GUI\u56fe\u5f62\u7f16\u7a0b"},{"location":"python/py_gui/#tkinter","text":"from tkinter import * import tkinter.messagebox as messagebox class Application ( Frame ): def __init__ ( self , master = None ): Frame . __init__ ( self , master ) self . pack () self . createWidgets () def createWidgets ( self ): self . nameInput = Entry ( self ) self . nameInput . pack () self . alertButton = Button ( self , text = Hello , command = self . hello ) self . alertButton . pack () def hello ( self ): name = self . nameInput . get () or world messagebox . showinfo ( Message , Hello, %s % name ) app = Application () # \u8bbe\u7f6e\u7a97\u53e3\u6807\u9898: app . master . title ( Hello World ) # \u4e3b\u6d88\u606f\u5faa\u73af: app . mainloop () \u521b\u5efa\u4e00\u4e2a\u7a97\u4f53,\u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u89e6\u53d1 hello() \uff0c\u901a\u8fc7 self.nameInput.get() \u83b7\u5f97\u7528\u6237\u8f93\u5165\u7684\u6587\u672c\u540e\uff0c\u4f7f\u7528 tkMessageBox.showinfo() \u53ef\u4ee5\u5f39\u51fa\u6d88\u606f\u5bf9\u8bdd\u6846","title":"Tkinter"},{"location":"python/py_inmodule/","text":"\u5e38\u7528\u5185\u5efa\u6a21\u5757 re\u6a21\u5757(\u6b63\u5219) match \u5224\u5b9a\u662f\u5426\u6709\u5339\u914d import re test = qqq print ( re . match ( r q , test )) print ( re . match ( r s , test )) _sre.SRE_Match object at 0x01D07A30 None split \u7a7a\u683c\u5206\u5272 re . split ( r \\s+ , a b c ) [ a , b , c ] \u5206\u7ec4\u63d0\u53d6 () \u7528\u4e8e\u5206\u7ec4,\u4e0b\u9762\u662f\u63d0\u53d6\u533a\u53f7\u548c\u7535\u8bdd\u53f7\u7801 group(0) \u8fd4\u56de\u539f\u59cb\u5b57\u7b26\u4e32 m = re . match ( r ^(\\d{3})-(\\d{3,8})$ , 010-12345 ) print ( m . group ( 0 ), m . group ( 1 ), m . group ( 2 )) ( 010-12345 , 010 , 12345 ) \u8d2a\u5a6a\u5339\u914d ? \u4e3a\u975e\u8d2a\u5a6a\u5339\u914d re . match ( r ^(\\d+)(0*)$ , 102300 ) . groups () re . match ( r ^(\\d+?)(0*)$ , 102300 ) . groups () ( 102300 , ) ( 1023 , 00 ) \u9884\u7f16\u8bd1\u6b63\u5219\u8868\u8fbe\u5f0f re_telephone = re . compile ( r ^(\\d{3})-(\\d{3,8})$ ) re_telephone . match ( 010-12345 ) . groups () datetime(\u65f6\u95f4\u5904\u7406) from datetime import datetime , timedelta , timezone print ( datetime . now ()) #\u6307\u5b9a\u65f6\u95f4\u521b\u5efa\u5bf9\u8c61 dt = datetime ( 2016 , 7 , 26 , 12 , 0 , 0 ) print ( type ( dt ), dt ) #datetime\u8f6c\u6362\u4e3atimestamp #1970\u5e741\u67081\u65e5 00:00:00 UTC+00:00\u65f6\u533a\u7684\u65f6\u523b\u79f0\u4e3aepoch time\uff0c\u8bb0\u4e3a0 print ( datetime\u8f6c\u6362\u4e3atimestamp ) print ( dt . timestamp ()) #timestamp\u8f6c\u6362\u4e3adatetime print ( timestamp\u8f6c\u6362\u4e3adatetime ) t = 1469505600 print ( datetime . fromtimestamp ( t )) # \u672c\u5730\u65f6\u95f4,\u4e1c\u516b\u533a print ( datetime . utcfromtimestamp ( t )) # UTC\u65f6\u95f4 #str\u8f6c\u6362\u4e3adatetime print ( str\u8f6c\u6362\u4e3adatetime ) cday = datetime . strptime ( 2016-7-26 12:00:00 , %Y-%m- %d %H:%M:%S ) print ( cday ) # datetime\u8f6c\u6362\u4e3astr print ( datetime\u8f6c\u6362\u4e3astr ) now = datetime . now () print ( now . strftime ( %Y-%m- %d %H:%M:%S )) #datetime\u52a0\u51cf print ( datetime\u52a0\u51cf ) now = datetime . now () print ( now ) now = now + timedelta ( days = 2 , hours = 12 ) print ( now ) print ( \u65f6\u533a\u8f6c\u6362 ) # \u62ff\u5230UTC\u65f6\u95f4\uff0c\u5e76\u5f3a\u5236\u8bbe\u7f6e\u65f6\u533a\u4e3aUTC+0:00: utc_dt = datetime . utcnow () . replace ( tzinfo = timezone . utc ) print ( utc_dt ) # astimezone()\u5c06\u8f6c\u6362\u65f6\u533a\u4e3a\u5317\u4eac\u65f6\u95f4: bj_dt = utc_dt . astimezone ( timezone ( timedelta ( hours = 8 ))) print ( bj_dt ) # astimezone()\u5c06\u8f6c\u6362\u65f6\u533a\u4e3a\u4e1c\u4eac\u65f6\u95f4: tokyo_dt = utc_dt . astimezone ( timezone ( timedelta ( hours = 9 ))) print ( tokyo_dt ) # astimezone()\u5c06bj_dt\u8f6c\u6362\u65f6\u533a\u4e3a\u4e1c\u4eac\u65f6\u95f4: tokyo_dt2 = bj_dt . astimezone ( timezone ( timedelta ( hours = 9 ))) print ( tokyo_dt2 ) 2016-07-27 12:46:08.216245 class datetime.datetime 2016-07-26 12:00:00 datetime\u8f6c\u6362\u4e3atimestamp 1469505600.0 timestamp\u8f6c\u6362\u4e3adatetime 2016-07-26 12:00:00 2016-07-26 04:00:00 str\u8f6c\u6362\u4e3adatetime 2016-07-26 12:00:00 datetime\u8f6c\u6362\u4e3astr 2016-07-27 12:46:08 datetime\u52a0\u51cf 2016-07-27 12:46:08.235246 2016-07-30 00:46:08.235246 \u65f6\u533a\u8f6c\u6362 2016-07-27 04:46:08.236246+00:00 2016-07-27 12:46:08.236246+08:00 2016-07-27 13:46:08.236246+09:00 2016-07-27 13:46:08.236246+09:00 collections namedtuple namedtuple \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7528\u6765\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 tuple \u5bf9\u8c61\uff0c\u5e76\u4e14\u89c4\u5b9a\u4e86 tuple \u5143\u7d20\u7684\u4e2a\u6570\uff0c\u5e76\u53ef\u4ee5\u7528\u5c5e\u6027\u800c\u4e0d\u662f\u7d22\u5f15\u6765\u5f15\u7528 tuple \u7684\u67d0\u4e2a\u5143\u7d20 from collections import namedtuple Point = namedtuple ( Point , [ x , y ]) p = Point ( 1 , 2 ) print ( p , p . x , p . y ) print ( isinstance ( p , Point )) print ( isinstance ( p , tuple )) Point(x=1, y=2) 1 2 True True deque deque\u662f\u4e3a\u4e86\u9ad8\u6548\u5b9e\u73b0\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u53cc\u5411\u5217\u8868\uff0c\u9002\u5408\u7528\u4e8e\u961f\u5217\u548c\u6808 from collections import deque q = deque ([ a , b , c ]) q . pop () q . popleft () q . append ( x ) q . appendleft ( y ) print ( q ) deque([ y , b , x ]) defaultdict \u4f7f\u7528dict\u65f6\uff0c\u5982\u679c\u5f15\u7528\u7684Key\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u629b\u51faKeyError\u3002\u5982\u679c\u5e0c\u671bkey\u4e0d\u5b58\u5728\u65f6\uff0c\u8fd4\u56de\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u5c31\u53ef\u4ee5\u7528defaultdict\uff1a from collections import defaultdict dd = defaultdict ( lambda : N/A ) dd [ key1 ] = abc print ( dd [ key1 ] ) print ( dd [ key2 ] ) abc N/A OrderedDict \u4f7f\u7528dict\u65f6\uff0cKey\u662f\u65e0\u5e8f\u7684,\u4f7f\u7528dict\u65f6\uff0cKey\u662f\u65e0\u5e8f\u7684,OrderedDict\u4fdd\u8bc1\u4e86\u63d2\u5165\u987a\u5e8f from collections import OrderedDict d = dict ([( a , 1 ), ( b , 2 ), ( c , 3 )]) od = OrderedDict ([( a , 1 ), ( b , 2 ), ( c , 3 )]) print ( d . keys ()) print ( od . keys ()) dict_keys([ a , c , b ]) odict_keys([ a , b , c ]) Counter Counter \u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u6570\u5668 from collections import Counter c = Counter () for ch in programming : c [ ch ] = c [ ch ] + 1 print ( c ) Counter({ m : 2, g : 2, r : 2, n : 1, i : 1, o : 1, a : 1, p : 1}) base64 import base64 b = base64 . b64encode ( b binary \\x00 string ) print ( b ) s = base64 . b64decode ( b ) print ( s ) #\u7531\u4e8e\u6807\u51c6\u7684Base64\u7f16\u7801\u540e\u53ef\u80fd\u51fa\u73b0\u5b57\u7b26+\u548c/\uff0c\u5728URL\u4e2d\u5c31\u4e0d\u80fd\u76f4\u63a5\u4f5c\u4e3a\u53c2\u6570\uff0c\u6240\u4ee5\u53c8\u6709\u4e00\u79cd url safe \u7684base64\u7f16\u7801\uff0c\u5176\u5b9e\u5c31\u662f\u628a\u5b57\u7b26+\u548c/\u5206\u522b\u53d8\u6210-\u548c_\uff1a bu = base64 . urlsafe_b64encode ( b i \\xb7\\x1d\\xfb\\xef\\xff ) print ( bu ) su = base64 . urlsafe_b64decode ( bu ) print ( su ) struct(\u8fdb\u5236\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362) \u8868\u793a\u5b57\u8282\u987a\u5e8f\u662f big-endian \uff0c\u4e5f\u5c31\u662f\u7f51\u7edc\u5e8f\uff0c I \u8868\u793a4\u5b57\u8282\u65e0\u7b26\u53f7\u6574\u6570 import struct b = struct . pack ( I , 10240099 ) print ( b ) v = struct . unpack ( I , b ) print ( v ) b \\x00\\x9c@c (10240099,) struct\u6a21\u5757\u5b9a\u4e49\u7684\u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u53c2\u8003Python\u5b98\u65b9\u6587\u6863\uff1a https://docs.python.org/3/library/struct.html#format-characters hashlib import hashlib md5 = hashlib . md5 () md5 . update ( hello . encode ( utf-8 )) md5 . update ( world . encode ( utf-8 )) print ( md5 . hexdigest ()) #sha1 sha1 = hashlib . sha1 () sha1 . update ( how to use sha1 in . encode ( utf-8 )) sha1 . update ( python hashlib? . encode ( utf-8 )) print ( sha1 . hexdigest ()) fc5e038d38a57032085441e7fe7010b0 2c76b57293ce30acef38d98f6046927161b46a44 itertools import itertools #\u521b\u5efa\u65e0\u9650\u8fed\u4ee3\u5668 na = itertools . count ( 1 ) for x in na : print ( x ) pass 12345... #\u5faa\u73af\u91cd\u590d\u8fed\u4ee3 cs = itertools . cycle ( ABC ) ABCABC #\u6307\u5b9a\u6b21\u6570\u91cd\u590d ns = itertools . repeat ( A , 4 ) for x in ns : print ( x ) pass AAAA #\u8fed\u4ee3\u5bf9\u8c61\u4e32\u8054\u8d77\u6765 for c in itertools . chain ( ABC , XYZ ): print ( c ) ABCXYZ #\u76f8\u90bb\u7684\u91cd\u590d\u5143\u7d20\u5206\u7ea7 for key , group in itertools . groupby ( AaBBAA , lambda c : c . upper ()): print ( key , list ( group )) A [ A , a ] B [ B , B ] A [ A , A ]","title":"\u6a21\u5757"},{"location":"python/py_inmodule/#_1","text":"","title":"\u5e38\u7528\u5185\u5efa\u6a21\u5757"},{"location":"python/py_inmodule/#re","text":"","title":"re\u6a21\u5757(\u6b63\u5219)"},{"location":"python/py_inmodule/#match","text":"import re test = qqq print ( re . match ( r q , test )) print ( re . match ( r s , test )) _sre.SRE_Match object at 0x01D07A30 None","title":"match\u5224\u5b9a\u662f\u5426\u6709\u5339\u914d"},{"location":"python/py_inmodule/#split","text":"\u7a7a\u683c\u5206\u5272 re . split ( r \\s+ , a b c ) [ a , b , c ]","title":"split"},{"location":"python/py_inmodule/#_2","text":"() \u7528\u4e8e\u5206\u7ec4,\u4e0b\u9762\u662f\u63d0\u53d6\u533a\u53f7\u548c\u7535\u8bdd\u53f7\u7801 group(0) \u8fd4\u56de\u539f\u59cb\u5b57\u7b26\u4e32 m = re . match ( r ^(\\d{3})-(\\d{3,8})$ , 010-12345 ) print ( m . group ( 0 ), m . group ( 1 ), m . group ( 2 )) ( 010-12345 , 010 , 12345 )","title":"\u5206\u7ec4\u63d0\u53d6"},{"location":"python/py_inmodule/#_3","text":"? \u4e3a\u975e\u8d2a\u5a6a\u5339\u914d re . match ( r ^(\\d+)(0*)$ , 102300 ) . groups () re . match ( r ^(\\d+?)(0*)$ , 102300 ) . groups () ( 102300 , ) ( 1023 , 00 )","title":"\u8d2a\u5a6a\u5339\u914d"},{"location":"python/py_inmodule/#_4","text":"re_telephone = re . compile ( r ^(\\d{3})-(\\d{3,8})$ ) re_telephone . match ( 010-12345 ) . groups ()","title":"\u9884\u7f16\u8bd1\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"python/py_inmodule/#datetime","text":"from datetime import datetime , timedelta , timezone print ( datetime . now ()) #\u6307\u5b9a\u65f6\u95f4\u521b\u5efa\u5bf9\u8c61 dt = datetime ( 2016 , 7 , 26 , 12 , 0 , 0 ) print ( type ( dt ), dt ) #datetime\u8f6c\u6362\u4e3atimestamp #1970\u5e741\u67081\u65e5 00:00:00 UTC+00:00\u65f6\u533a\u7684\u65f6\u523b\u79f0\u4e3aepoch time\uff0c\u8bb0\u4e3a0 print ( datetime\u8f6c\u6362\u4e3atimestamp ) print ( dt . timestamp ()) #timestamp\u8f6c\u6362\u4e3adatetime print ( timestamp\u8f6c\u6362\u4e3adatetime ) t = 1469505600 print ( datetime . fromtimestamp ( t )) # \u672c\u5730\u65f6\u95f4,\u4e1c\u516b\u533a print ( datetime . utcfromtimestamp ( t )) # UTC\u65f6\u95f4 #str\u8f6c\u6362\u4e3adatetime print ( str\u8f6c\u6362\u4e3adatetime ) cday = datetime . strptime ( 2016-7-26 12:00:00 , %Y-%m- %d %H:%M:%S ) print ( cday ) # datetime\u8f6c\u6362\u4e3astr print ( datetime\u8f6c\u6362\u4e3astr ) now = datetime . now () print ( now . strftime ( %Y-%m- %d %H:%M:%S )) #datetime\u52a0\u51cf print ( datetime\u52a0\u51cf ) now = datetime . now () print ( now ) now = now + timedelta ( days = 2 , hours = 12 ) print ( now ) print ( \u65f6\u533a\u8f6c\u6362 ) # \u62ff\u5230UTC\u65f6\u95f4\uff0c\u5e76\u5f3a\u5236\u8bbe\u7f6e\u65f6\u533a\u4e3aUTC+0:00: utc_dt = datetime . utcnow () . replace ( tzinfo = timezone . utc ) print ( utc_dt ) # astimezone()\u5c06\u8f6c\u6362\u65f6\u533a\u4e3a\u5317\u4eac\u65f6\u95f4: bj_dt = utc_dt . astimezone ( timezone ( timedelta ( hours = 8 ))) print ( bj_dt ) # astimezone()\u5c06\u8f6c\u6362\u65f6\u533a\u4e3a\u4e1c\u4eac\u65f6\u95f4: tokyo_dt = utc_dt . astimezone ( timezone ( timedelta ( hours = 9 ))) print ( tokyo_dt ) # astimezone()\u5c06bj_dt\u8f6c\u6362\u65f6\u533a\u4e3a\u4e1c\u4eac\u65f6\u95f4: tokyo_dt2 = bj_dt . astimezone ( timezone ( timedelta ( hours = 9 ))) print ( tokyo_dt2 ) 2016-07-27 12:46:08.216245 class datetime.datetime 2016-07-26 12:00:00 datetime\u8f6c\u6362\u4e3atimestamp 1469505600.0 timestamp\u8f6c\u6362\u4e3adatetime 2016-07-26 12:00:00 2016-07-26 04:00:00 str\u8f6c\u6362\u4e3adatetime 2016-07-26 12:00:00 datetime\u8f6c\u6362\u4e3astr 2016-07-27 12:46:08 datetime\u52a0\u51cf 2016-07-27 12:46:08.235246 2016-07-30 00:46:08.235246 \u65f6\u533a\u8f6c\u6362 2016-07-27 04:46:08.236246+00:00 2016-07-27 12:46:08.236246+08:00 2016-07-27 13:46:08.236246+09:00 2016-07-27 13:46:08.236246+09:00","title":"datetime(\u65f6\u95f4\u5904\u7406)"},{"location":"python/py_inmodule/#collections","text":"","title":"collections"},{"location":"python/py_inmodule/#namedtuple","text":"namedtuple \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7528\u6765\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 tuple \u5bf9\u8c61\uff0c\u5e76\u4e14\u89c4\u5b9a\u4e86 tuple \u5143\u7d20\u7684\u4e2a\u6570\uff0c\u5e76\u53ef\u4ee5\u7528\u5c5e\u6027\u800c\u4e0d\u662f\u7d22\u5f15\u6765\u5f15\u7528 tuple \u7684\u67d0\u4e2a\u5143\u7d20 from collections import namedtuple Point = namedtuple ( Point , [ x , y ]) p = Point ( 1 , 2 ) print ( p , p . x , p . y ) print ( isinstance ( p , Point )) print ( isinstance ( p , tuple )) Point(x=1, y=2) 1 2 True True","title":"namedtuple"},{"location":"python/py_inmodule/#deque","text":"deque\u662f\u4e3a\u4e86\u9ad8\u6548\u5b9e\u73b0\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u7684\u53cc\u5411\u5217\u8868\uff0c\u9002\u5408\u7528\u4e8e\u961f\u5217\u548c\u6808 from collections import deque q = deque ([ a , b , c ]) q . pop () q . popleft () q . append ( x ) q . appendleft ( y ) print ( q ) deque([ y , b , x ])","title":"deque"},{"location":"python/py_inmodule/#defaultdict","text":"\u4f7f\u7528dict\u65f6\uff0c\u5982\u679c\u5f15\u7528\u7684Key\u4e0d\u5b58\u5728\uff0c\u5c31\u4f1a\u629b\u51faKeyError\u3002\u5982\u679c\u5e0c\u671bkey\u4e0d\u5b58\u5728\u65f6\uff0c\u8fd4\u56de\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u5c31\u53ef\u4ee5\u7528defaultdict\uff1a from collections import defaultdict dd = defaultdict ( lambda : N/A ) dd [ key1 ] = abc print ( dd [ key1 ] ) print ( dd [ key2 ] ) abc N/A","title":"defaultdict"},{"location":"python/py_inmodule/#ordereddict","text":"\u4f7f\u7528dict\u65f6\uff0cKey\u662f\u65e0\u5e8f\u7684,\u4f7f\u7528dict\u65f6\uff0cKey\u662f\u65e0\u5e8f\u7684,OrderedDict\u4fdd\u8bc1\u4e86\u63d2\u5165\u987a\u5e8f from collections import OrderedDict d = dict ([( a , 1 ), ( b , 2 ), ( c , 3 )]) od = OrderedDict ([( a , 1 ), ( b , 2 ), ( c , 3 )]) print ( d . keys ()) print ( od . keys ()) dict_keys([ a , c , b ]) odict_keys([ a , b , c ])","title":"OrderedDict"},{"location":"python/py_inmodule/#counter","text":"Counter \u662f\u4e00\u4e2a\u7b80\u5355\u7684\u8ba1\u6570\u5668 from collections import Counter c = Counter () for ch in programming : c [ ch ] = c [ ch ] + 1 print ( c ) Counter({ m : 2, g : 2, r : 2, n : 1, i : 1, o : 1, a : 1, p : 1})","title":"Counter"},{"location":"python/py_inmodule/#base64","text":"import base64 b = base64 . b64encode ( b binary \\x00 string ) print ( b ) s = base64 . b64decode ( b ) print ( s ) #\u7531\u4e8e\u6807\u51c6\u7684Base64\u7f16\u7801\u540e\u53ef\u80fd\u51fa\u73b0\u5b57\u7b26+\u548c/\uff0c\u5728URL\u4e2d\u5c31\u4e0d\u80fd\u76f4\u63a5\u4f5c\u4e3a\u53c2\u6570\uff0c\u6240\u4ee5\u53c8\u6709\u4e00\u79cd url safe \u7684base64\u7f16\u7801\uff0c\u5176\u5b9e\u5c31\u662f\u628a\u5b57\u7b26+\u548c/\u5206\u522b\u53d8\u6210-\u548c_\uff1a bu = base64 . urlsafe_b64encode ( b i \\xb7\\x1d\\xfb\\xef\\xff ) print ( bu ) su = base64 . urlsafe_b64decode ( bu ) print ( su )","title":"base64"},{"location":"python/py_inmodule/#struct","text":"\u8868\u793a\u5b57\u8282\u987a\u5e8f\u662f big-endian \uff0c\u4e5f\u5c31\u662f\u7f51\u7edc\u5e8f\uff0c I \u8868\u793a4\u5b57\u8282\u65e0\u7b26\u53f7\u6574\u6570 import struct b = struct . pack ( I , 10240099 ) print ( b ) v = struct . unpack ( I , b ) print ( v ) b \\x00\\x9c@c (10240099,) struct\u6a21\u5757\u5b9a\u4e49\u7684\u6570\u636e\u7c7b\u578b\u53ef\u4ee5\u53c2\u8003Python\u5b98\u65b9\u6587\u6863\uff1a https://docs.python.org/3/library/struct.html#format-characters","title":"struct(\u8fdb\u5236\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362)"},{"location":"python/py_inmodule/#hashlib","text":"import hashlib md5 = hashlib . md5 () md5 . update ( hello . encode ( utf-8 )) md5 . update ( world . encode ( utf-8 )) print ( md5 . hexdigest ()) #sha1 sha1 = hashlib . sha1 () sha1 . update ( how to use sha1 in . encode ( utf-8 )) sha1 . update ( python hashlib? . encode ( utf-8 )) print ( sha1 . hexdigest ()) fc5e038d38a57032085441e7fe7010b0 2c76b57293ce30acef38d98f6046927161b46a44","title":"hashlib"},{"location":"python/py_inmodule/#itertools","text":"import itertools #\u521b\u5efa\u65e0\u9650\u8fed\u4ee3\u5668 na = itertools . count ( 1 ) for x in na : print ( x ) pass 12345... #\u5faa\u73af\u91cd\u590d\u8fed\u4ee3 cs = itertools . cycle ( ABC ) ABCABC #\u6307\u5b9a\u6b21\u6570\u91cd\u590d ns = itertools . repeat ( A , 4 ) for x in ns : print ( x ) pass AAAA #\u8fed\u4ee3\u5bf9\u8c61\u4e32\u8054\u8d77\u6765 for c in itertools . chain ( ABC , XYZ ): print ( c ) ABCXYZ #\u76f8\u90bb\u7684\u91cd\u590d\u5143\u7d20\u5206\u7ea7 for key , group in itertools . groupby ( AaBBAA , lambda c : c . upper ()): print ( key , list ( group )) A [ A , a ] B [ B , B ] A [ A , A ]","title":"itertools"},{"location":"python/py_module_manager/","text":"Python \u6a21\u5757\u7ba1\u7406 Python \u5305\u7ba1\u7406\u5de5\u5177 distutils python \u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c2000\u5e74\u53d1\u5e03\u3002\u4f7f\u7528\u5b83\u80fd\u591f\u8fdb\u884cpython\u6a21\u5757\u7684\u5b89\u88c5\u548c\u53d1\u5e03setup.py\u5c31\u662f\u5229\u7528distutils\u7684\u529f\u80fd\u5199\u6210. \u7b80\u5355\u6253\u5305\u793a\u4f8b:\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6test.py\u548csetup.py,setup.py\u5185\u7a7a\u5982\u4e0b: from distutils.core import setup setup ( name = test , version = 1.0 , author = far , author_email = wujiyu115@gmail.com , url = htt://www.farwmarth.com , py_modules = [ test ], ) \u8fd0\u884c python setup.py sdist ,\u4f1a\u751f\u6210\u4e00\u4e2a\"test-1.0.zip\"\u5305.\u89e3\u538b\u7f29\u4f7f\u7528 python setup.py install \u5c31\u53ef\u4ee5\u5b89\u88c5\u5e76\u4f7f\u7528test\u6a21\u5757\u4e86 distutils\u5305\u7ba1\u7406 #\u5b89\u88c5\u5305 python setup.py install #\u6253\u5305\u6210\u538b\u7f29\u6587\u4ef6 python setup.py sdist #\u6253\u5305\u6210exe\u5b89\u88c5 python setup.py bdist_wininst setuptools,distribute \u4e00\u4e2a\u4e3a\u4e86\u589e\u5f3a distutils \u800c\u5f00\u53d1\u7684\u96c6\u5408\uff0c2004\u5e74\u53d1\u5e03\u3002\u5b83\u5305\u542b\u4e86 easy_install \u8fd9\u4e2a\u5de5\u5177setuptools\u662f\u4e00\u4e2a\u9879\u76ee\u7684\u540d\u79f0,\u662f\u57fa\u7840\u7ec4\u4ef6,\u800c easy_install \u662f\u8fd9\u4e2a\u9879\u76ee\u4e2d\u63d0\u4f9b\u7684\u5de5\u5177,\u5b83\u4f9d\u8d56\u57fa\u7840\u7ec4\u4ef6\u5de5\u4f5c.setuptools\u4f7f\u7528\u4e86\u4e00\u79cd\u65b0\u7684\u6587\u4ef6\u683c\u5f0f\uff08.egg\uff09\uff0c\u53ef\u4ee5\u4e3aPython\u5305\u521b\u5efa egg\u6587\u4ef6\u3002setuptools \u53ef\u4ee5\u8bc6\u522b.egg\u6587\u4ef6\uff0c\u5e76\u89e3\u6790\u3001\u5b89\u88c5\u5b83. \u81f3\u4e8edistribute\uff0c\u5b83\u662fsetuptools\u7684\u4e00\u4e2a\u5206\u652f\u7248\u672c\u3002\u5206\u652f\u7684\u539f\u56e0\u662f\u6709\u4e00\u90e8\u5206\u5f00\u53d1\u8005\u8ba4\u4e3a setuptools \u5f00\u53d1\u592a\u6162\u3002\u4f46\u73b0\u5728\uff0cdistribute \u53c8\u5408\u5e76\u56de\u4e86 setuptools \u4e2d\uff0c\u6240\u4ee5\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u4eec\u662f\u540c\u4e00\u4e2a\u4e1c\u897f. \u603b\u7684\u6765\u8bf4: setuptools/distribute \u90fd\u6269\u5c55\u4e86 distutils\uff0c\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u529f\u80fd easy_install\u662f\u57fa\u4e8esetuptools/distribute\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u65b9\u4fbf\u4e86\u5305\u7684\u5b89\u88c5\u548c\u7701\u7ea7 setuptools\u5305 \u5b89\u88c5 #windows \u5b89\u88c5 :\u4e0b\u8f7d https://bootstrap.pypa.io/ez_setup.py \u5e76\u6267\u884cpython #linux wget https://bootstrap.pypa.io/ez_setup.py -O - | python #mac curl https://bootstrap.pypa.io/ez_setup.py -o - | python \u53cd\u5b89\u88c5 \u5728windows\u4e0a\u5982\u679c\u7528exe\u6216\u8005\u662fmsi\u5b89\u88c5\u7684,\u7528\u5b89\u88c5\u5305\u6dfb\u52a0/\u5220\u9664\u9879\u6765\u8fdb\u884c\u53cd\u5b89\u88c5 \u5176\u4ed6\u60c5\u51b5\u5148\u5220\u9664\u6240\u6709\u5728 site-packages \u76ee\u5f55\u548c sys.pyath \u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5e26 setuptools* \u548c distribute* \u6587\u4ef6,\u7136\u540e\u79fb\u9664\u5728 scripts \u76ee\u5f55\u7684 easy_install \u548c easy_install-x.x \u53ef\u6267\u884c\u6587\u4ef6 \u7528easy_install\u7ba1\u7406\u5305 installing-easy-install #\u7248\u672c easy_install --version #\u6839\u636e\u5305\u540d\u5b89\u88c5 easy_install SQLObject #\u5b89\u88c5\u89e3\u538b\u7684\u76ee\u5f55 easy_install . #\u5b89\u88c5egg,\u7f51\u5740\u6216\u8005\u672c\u5730\u8def\u5f84 easy_install http://example.com/downloads/ExamplePackage-2.0-py2.4.egg #\u5347\u7ea7 easy_install --upgrade PyProtocols easy_install SomePackage==2.0 #\u79fb\u9664 easy_install -m PackageName pip \u5b89\u88c5pip ##\u5b89\u88c5pip easy_install pip ## \u5b89\u88c5pip2 curl https://bootstrap.pypa.io/get-pip.py | python pip\u5305\u7ba1\u7406 #\u5b89\u88c5: pip install SomePackage #\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u53f7 pip install SomePackage == 1 .0.4 #\u6307\u5b9a\u6e90\u5b89\u88c5 pip install SomePackage -i https://pypi.doubanio.com/ #\u6743\u9650 sudo pip install pyspider --user -U -i https://pypi.doubanio.com/simple/ #\u5347\u7ea7 pip install --upgrade SomePackage #\u5378\u8f7d: pip uninstall SomePackage #\u67e5\u770b\u5df2\u5b89\u88c5 pip list #\u67e5\u770b\u53ef\u5347\u7ea7 pip list --outdated #\u67e5\u770b\u5b89\u88c5\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u4fe1\u606f pip show --files SomePackage # \u4f7f\u7528pip\u5bfc\u51fa\u4f9d\u8d56\u6587\u4ef6\u5217\u8868 pip freeze requirements.txt # \u6839\u636e\u4f9d\u8d56\u6587\u4ef6\u5217\u8868\uff0c\u81ea\u52a8\u5b89\u88c5\u5bf9\u5e94\u7684\u8f6f\u4ef6\u5305 pip install -r requirements.txt \u663e\u793apython\u5b89\u88c5\u7684\u6a21\u5757 #\u5728pyhton\u73af\u5883\u4e2d\u8f93\u5165 help ( modules ) #\u5217\u51fa\u67d0\u4e00\u6a21\u5757\u7248\u672c import yaml ; print ( yaml.__version__ ) \u663e\u793apython\u5e93\u8def\u5f84 python -c import sys;print(sys.path) \u4e0d\u540c\u73af\u5883pip\u5b89\u88c5 python3 -m pip install xxx wheel,eggs wheel doc wheel \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a zip \u5305\u683c\u5f0f\uff0c\u5b83\u4f7f\u7528 .whl \u6269\u5c55\u540d\uff0c\u7528\u4e8e python \u6a21\u5757\u7684\u5b89\u88c5\uff0c\u5b83\u7684\u51fa\u73b0\u662f\u4e3a\u4e86\u66ff\u4ee3 Eggs\u3002 \u5bf9\u7eafpython\u6216\u8005c\u6269\u5c55\u5b89\u88c5\u901f\u5ea6\u66f4\u5feb \u4e0d\u7528\u6267\u610f\u4efb\u610f\u4ee3\u7801\u5982:setup.py \u5728win\u6216\u8005mac\u4e0a\u5b89\u88c5c\u6269\u5c55\u4e0d\u9700\u8981\u7f16\u8bd1\u73af\u5883 \u6d4b\u8bd5\u548c\u6301\u7eed\u96c6\u6210\u63d0\u4f9b\u66f4\u597d\u7684\u7f13\u5b58 \u521b\u5efapyc\u6587\u4ef6\u6709\u6765\u5339\u914d\u7f16\u8bd1\u5668 \u66f4\u597d\u7684\u8de8\u5e73\u53f0\u5b89\u88c5\u80fd\u529b \u4f7f\u7528 # Make sure you have the latest pip that supports wheel pip install --upgrade pip # Install wheel pip install wheel # Build a directory of wheels for pyramid and all its dependencies pip wheel --wheel-dir=/tmp/wheelhouse pyramid # Install from cached wheels pip install --use-wheel --no-index --find-links=/tmp/wheelhouse pyramid # Install from cached wheels remotely pip install --use-wheel --no-index --find-links=https://wheelhouse.example.com/ pyramid Python \u865a\u62df\u73af\u5883 virtualenv virtualenv\u7528\u4e8e\u521b\u5efa\u72ec\u7acb\u7684Python\u73af\u5883\uff0c\u591a\u4e2aPython\u76f8\u4e92\u72ec\u7acb\uff0c\u4e92\u4e0d\u5f71\u54cd. \u5b9e\u6d4b\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u865a\u62df\u73af\u5883\u4e0d\u4f1a\u4f9d\u8d56\u7cfb\u7edf\u73af\u5883\u7684global site-packages\u3002\u6bd4\u5982\u7cfb\u7edf\u73af\u5883\u91cc\u5b89\u88c5\u4e86MySQLdb\u6a21\u5757\uff0c\u5728\u865a\u62df\u73af\u5883\u91ccimport MySQLdb\u4f1a\u63d0\u793aImportError\u3002\u5982\u679c\u60f3\u4f9d\u8d56\u7cfb\u7edf\u73af\u5883\u7684\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5305\uff0c\u53ef\u4ee5\u4f7f\u7528\u53c2\u6570 --system-site-packages \u5b89\u88c5 sudo apt-get install python-virtualenv #or pip install virtualenv \u4f7f\u7528 #\u521b\u5efa virtualenv test #\u542f\u52a8\u865a\u62df\u73af\u5883 cd test source ./bin/activate #\u9000\u51fa\u865a\u62df\u73af\u5883 deactivate Virtualenvwrapper Virtaulenvwrapper\u662fvirtualenv\u7684\u6269\u5c55\u5305\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u521b\u5efa\u3001\u5220\u9664\u3001\u590d\u5236\u3001\u5207\u6362\u4e0d\u540c\u7684\u865a\u62df\u73af\u5883\u3002 \u5b89\u88c5 sudo easy_install virtualenvwrapper mkdir $HOME /.virtualenvs #\u5728~/.bashrc\u4e2d\u6dfb\u52a0\u884c\uff1a export WORKON_HOME = $HOME /.virtualenvs #\u5728~/.bashrc\u4e2d\u6dfb\u52a0\u884c\uff1a source /usr/local/bin/virtualenvwrapper.sh #\u8fd0\u884c\uff1a source ~/.bashrc \u4f7f\u7528 #\u5217\u51fa\u865a\u62df\u73af\u5883\u5217\u8868 workon #\u4e5f\u53ef\u4ee5\u4f7f\u7528 lsvirtualenv #\u65b0\u5efa\u865a\u62df\u73af\u5883 mkvirtualenv [ \u865a\u62df\u73af\u5883\u540d\u79f0 ] #\u542f\u52a8/\u5207\u6362\u865a\u62df\u73af\u5883 workon [ \u865a\u62df\u73af\u5883\u540d\u79f0 ] #\u5220\u9664\u865a\u62df\u73af\u5883 rmvirtualenv [ \u865a\u62df\u73af\u5883\u540d\u79f0 ] #\u79bb\u5f00\u865a\u62df\u73af\u5883 deactivate python \u591a\u7248\u672c\u7ba1\u7406 pyenv \u7248\u672c\u7ba1\u7406 pyenv\u547d\u4ee4: commands \u5217\u51fa\u6240\u6709pyenv\u547d\u4ee4 local \u8bbe\u7f6e\u6216\u8005\u663e\u793alocal\u7684python\u7248\u672c global \u8bbe\u7f6e\u6216\u8005\u663e\u793aglobal\u7684python\u7248\u672c shell \u8bbe\u7f6e\u6216\u8005\u663e\u793ashell\u7684python\u7248\u672c install \u5b89\u88c5\u4e00\u4e2apython\u7248\u672c uninstall \u5378\u8f7d\u4e00\u4e2apython\u7248\u672c rehash Rehash pyenv shims ( run this after installing executables ) version \u663e\u793a\u5f53\u524d\u7248\u672c versions \u663e\u793a\u6240\u6709python\u7248\u672c which \u663e\u793a\u53ef\u6267\u884cpython\u7684\u8def\u5f84 whence \u663e\u793a\u5e26\u6267\u884c\u8def\u5f84\u7684\u6240\u6709\u7248\u672c ########\u5b89\u88c5\u5176\u4ed6\u7248\u672c\u7684python #\u4f9d\u8d56 sudo brew install homebrew/dupes/zlib bash brew install readline ; brew link readline ; #\u5b89\u88c5 CFLAGS = -g -O2 CFLAGS = -I $( xcrun --show-sdk-path ) /usr/include CFLAGS = -I $( brew --prefix openssl ) /include \\ LDFLAGS = -L $( brew --prefix openssl ) /lib \\ pyenv install 2 .7.5 #\u73af\u5883\u53d8\u91cf export PYENV_ROOT = $HOME /.pyenv export PATH = ${ PATH } : $PYENV_ROOT /bin: $PATH eval $( pyenv init - ) #\u79fb\u9664\u7248\u672c rm -rf .pyenv/versions/2.7.5 https://github.com/mitsuhiko/python-modernize http://haoluobo.com/2013/01/python2and3/ http://www.jianshu.com/p/4646dedaaff5","title":"\u6a21\u5757\u7ba1\u7406"},{"location":"python/py_module_manager/#python","text":"","title":"Python \u6a21\u5757\u7ba1\u7406"},{"location":"python/py_module_manager/#python_1","text":"","title":"Python \u5305\u7ba1\u7406\u5de5\u5177"},{"location":"python/py_module_manager/#distutils","text":"python \u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c2000\u5e74\u53d1\u5e03\u3002\u4f7f\u7528\u5b83\u80fd\u591f\u8fdb\u884cpython\u6a21\u5757\u7684\u5b89\u88c5\u548c\u53d1\u5e03setup.py\u5c31\u662f\u5229\u7528distutils\u7684\u529f\u80fd\u5199\u6210. \u7b80\u5355\u6253\u5305\u793a\u4f8b:\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6test.py\u548csetup.py,setup.py\u5185\u7a7a\u5982\u4e0b: from distutils.core import setup setup ( name = test , version = 1.0 , author = far , author_email = wujiyu115@gmail.com , url = htt://www.farwmarth.com , py_modules = [ test ], ) \u8fd0\u884c python setup.py sdist ,\u4f1a\u751f\u6210\u4e00\u4e2a\"test-1.0.zip\"\u5305.\u89e3\u538b\u7f29\u4f7f\u7528 python setup.py install \u5c31\u53ef\u4ee5\u5b89\u88c5\u5e76\u4f7f\u7528test\u6a21\u5757\u4e86","title":"distutils"},{"location":"python/py_module_manager/#distutils_1","text":"#\u5b89\u88c5\u5305 python setup.py install #\u6253\u5305\u6210\u538b\u7f29\u6587\u4ef6 python setup.py sdist #\u6253\u5305\u6210exe\u5b89\u88c5 python setup.py bdist_wininst","title":"distutils\u5305\u7ba1\u7406"},{"location":"python/py_module_manager/#setuptoolsdistribute","text":"\u4e00\u4e2a\u4e3a\u4e86\u589e\u5f3a distutils \u800c\u5f00\u53d1\u7684\u96c6\u5408\uff0c2004\u5e74\u53d1\u5e03\u3002\u5b83\u5305\u542b\u4e86 easy_install \u8fd9\u4e2a\u5de5\u5177setuptools\u662f\u4e00\u4e2a\u9879\u76ee\u7684\u540d\u79f0,\u662f\u57fa\u7840\u7ec4\u4ef6,\u800c easy_install \u662f\u8fd9\u4e2a\u9879\u76ee\u4e2d\u63d0\u4f9b\u7684\u5de5\u5177,\u5b83\u4f9d\u8d56\u57fa\u7840\u7ec4\u4ef6\u5de5\u4f5c.setuptools\u4f7f\u7528\u4e86\u4e00\u79cd\u65b0\u7684\u6587\u4ef6\u683c\u5f0f\uff08.egg\uff09\uff0c\u53ef\u4ee5\u4e3aPython\u5305\u521b\u5efa egg\u6587\u4ef6\u3002setuptools \u53ef\u4ee5\u8bc6\u522b.egg\u6587\u4ef6\uff0c\u5e76\u89e3\u6790\u3001\u5b89\u88c5\u5b83. \u81f3\u4e8edistribute\uff0c\u5b83\u662fsetuptools\u7684\u4e00\u4e2a\u5206\u652f\u7248\u672c\u3002\u5206\u652f\u7684\u539f\u56e0\u662f\u6709\u4e00\u90e8\u5206\u5f00\u53d1\u8005\u8ba4\u4e3a setuptools \u5f00\u53d1\u592a\u6162\u3002\u4f46\u73b0\u5728\uff0cdistribute \u53c8\u5408\u5e76\u56de\u4e86 setuptools \u4e2d\uff0c\u6240\u4ee5\u53ef\u4ee5\u8ba4\u4e3a\u5b83\u4eec\u662f\u540c\u4e00\u4e2a\u4e1c\u897f. \u603b\u7684\u6765\u8bf4: setuptools/distribute \u90fd\u6269\u5c55\u4e86 distutils\uff0c\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u529f\u80fd easy_install\u662f\u57fa\u4e8esetuptools/distribute\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u65b9\u4fbf\u4e86\u5305\u7684\u5b89\u88c5\u548c\u7701\u7ea7 setuptools\u5305","title":"setuptools,distribute"},{"location":"python/py_module_manager/#_1","text":"#windows \u5b89\u88c5 :\u4e0b\u8f7d https://bootstrap.pypa.io/ez_setup.py \u5e76\u6267\u884cpython #linux wget https://bootstrap.pypa.io/ez_setup.py -O - | python #mac curl https://bootstrap.pypa.io/ez_setup.py -o - | python","title":"\u5b89\u88c5"},{"location":"python/py_module_manager/#_2","text":"\u5728windows\u4e0a\u5982\u679c\u7528exe\u6216\u8005\u662fmsi\u5b89\u88c5\u7684,\u7528\u5b89\u88c5\u5305\u6dfb\u52a0/\u5220\u9664\u9879\u6765\u8fdb\u884c\u53cd\u5b89\u88c5 \u5176\u4ed6\u60c5\u51b5\u5148\u5220\u9664\u6240\u6709\u5728 site-packages \u76ee\u5f55\u548c sys.pyath \u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5e26 setuptools* \u548c distribute* \u6587\u4ef6,\u7136\u540e\u79fb\u9664\u5728 scripts \u76ee\u5f55\u7684 easy_install \u548c easy_install-x.x \u53ef\u6267\u884c\u6587\u4ef6","title":"\u53cd\u5b89\u88c5"},{"location":"python/py_module_manager/#easy_install","text":"installing-easy-install #\u7248\u672c easy_install --version #\u6839\u636e\u5305\u540d\u5b89\u88c5 easy_install SQLObject #\u5b89\u88c5\u89e3\u538b\u7684\u76ee\u5f55 easy_install . #\u5b89\u88c5egg,\u7f51\u5740\u6216\u8005\u672c\u5730\u8def\u5f84 easy_install http://example.com/downloads/ExamplePackage-2.0-py2.4.egg #\u5347\u7ea7 easy_install --upgrade PyProtocols easy_install SomePackage==2.0 #\u79fb\u9664 easy_install -m PackageName","title":"\u7528easy_install\u7ba1\u7406\u5305"},{"location":"python/py_module_manager/#pip","text":"","title":"pip"},{"location":"python/py_module_manager/#pip_1","text":"##\u5b89\u88c5pip easy_install pip ## \u5b89\u88c5pip2 curl https://bootstrap.pypa.io/get-pip.py | python","title":"\u5b89\u88c5pip"},{"location":"python/py_module_manager/#pip_2","text":"#\u5b89\u88c5: pip install SomePackage #\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u53f7 pip install SomePackage == 1 .0.4 #\u6307\u5b9a\u6e90\u5b89\u88c5 pip install SomePackage -i https://pypi.doubanio.com/ #\u6743\u9650 sudo pip install pyspider --user -U -i https://pypi.doubanio.com/simple/ #\u5347\u7ea7 pip install --upgrade SomePackage #\u5378\u8f7d: pip uninstall SomePackage #\u67e5\u770b\u5df2\u5b89\u88c5 pip list #\u67e5\u770b\u53ef\u5347\u7ea7 pip list --outdated #\u67e5\u770b\u5b89\u88c5\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u4fe1\u606f pip show --files SomePackage # \u4f7f\u7528pip\u5bfc\u51fa\u4f9d\u8d56\u6587\u4ef6\u5217\u8868 pip freeze requirements.txt # \u6839\u636e\u4f9d\u8d56\u6587\u4ef6\u5217\u8868\uff0c\u81ea\u52a8\u5b89\u88c5\u5bf9\u5e94\u7684\u8f6f\u4ef6\u5305 pip install -r requirements.txt","title":"pip\u5305\u7ba1\u7406"},{"location":"python/py_module_manager/#python_2","text":"#\u5728pyhton\u73af\u5883\u4e2d\u8f93\u5165 help ( modules ) #\u5217\u51fa\u67d0\u4e00\u6a21\u5757\u7248\u672c import yaml ; print ( yaml.__version__ )","title":"\u663e\u793apython\u5b89\u88c5\u7684\u6a21\u5757"},{"location":"python/py_module_manager/#python_3","text":"python -c import sys;print(sys.path)","title":"\u663e\u793apython\u5e93\u8def\u5f84"},{"location":"python/py_module_manager/#pip_3","text":"python3 -m pip install xxx","title":"\u4e0d\u540c\u73af\u5883pip\u5b89\u88c5"},{"location":"python/py_module_manager/#wheeleggs","text":"wheel doc wheel \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a zip \u5305\u683c\u5f0f\uff0c\u5b83\u4f7f\u7528 .whl \u6269\u5c55\u540d\uff0c\u7528\u4e8e python \u6a21\u5757\u7684\u5b89\u88c5\uff0c\u5b83\u7684\u51fa\u73b0\u662f\u4e3a\u4e86\u66ff\u4ee3 Eggs\u3002 \u5bf9\u7eafpython\u6216\u8005c\u6269\u5c55\u5b89\u88c5\u901f\u5ea6\u66f4\u5feb \u4e0d\u7528\u6267\u610f\u4efb\u610f\u4ee3\u7801\u5982:setup.py \u5728win\u6216\u8005mac\u4e0a\u5b89\u88c5c\u6269\u5c55\u4e0d\u9700\u8981\u7f16\u8bd1\u73af\u5883 \u6d4b\u8bd5\u548c\u6301\u7eed\u96c6\u6210\u63d0\u4f9b\u66f4\u597d\u7684\u7f13\u5b58 \u521b\u5efapyc\u6587\u4ef6\u6709\u6765\u5339\u914d\u7f16\u8bd1\u5668 \u66f4\u597d\u7684\u8de8\u5e73\u53f0\u5b89\u88c5\u80fd\u529b","title":"wheel,eggs"},{"location":"python/py_module_manager/#_3","text":"# Make sure you have the latest pip that supports wheel pip install --upgrade pip # Install wheel pip install wheel # Build a directory of wheels for pyramid and all its dependencies pip wheel --wheel-dir=/tmp/wheelhouse pyramid # Install from cached wheels pip install --use-wheel --no-index --find-links=/tmp/wheelhouse pyramid # Install from cached wheels remotely pip install --use-wheel --no-index --find-links=https://wheelhouse.example.com/ pyramid","title":"\u4f7f\u7528"},{"location":"python/py_module_manager/#python_4","text":"","title":"Python \u865a\u62df\u73af\u5883"},{"location":"python/py_module_manager/#virtualenv","text":"virtualenv\u7528\u4e8e\u521b\u5efa\u72ec\u7acb\u7684Python\u73af\u5883\uff0c\u591a\u4e2aPython\u76f8\u4e92\u72ec\u7acb\uff0c\u4e92\u4e0d\u5f71\u54cd. \u5b9e\u6d4b\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u865a\u62df\u73af\u5883\u4e0d\u4f1a\u4f9d\u8d56\u7cfb\u7edf\u73af\u5883\u7684global site-packages\u3002\u6bd4\u5982\u7cfb\u7edf\u73af\u5883\u91cc\u5b89\u88c5\u4e86MySQLdb\u6a21\u5757\uff0c\u5728\u865a\u62df\u73af\u5883\u91ccimport MySQLdb\u4f1a\u63d0\u793aImportError\u3002\u5982\u679c\u60f3\u4f9d\u8d56\u7cfb\u7edf\u73af\u5883\u7684\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5305\uff0c\u53ef\u4ee5\u4f7f\u7528\u53c2\u6570 --system-site-packages \u5b89\u88c5 sudo apt-get install python-virtualenv #or pip install virtualenv \u4f7f\u7528 #\u521b\u5efa virtualenv test #\u542f\u52a8\u865a\u62df\u73af\u5883 cd test source ./bin/activate #\u9000\u51fa\u865a\u62df\u73af\u5883 deactivate","title":"virtualenv"},{"location":"python/py_module_manager/#virtualenvwrapper","text":"Virtaulenvwrapper\u662fvirtualenv\u7684\u6269\u5c55\u5305\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u521b\u5efa\u3001\u5220\u9664\u3001\u590d\u5236\u3001\u5207\u6362\u4e0d\u540c\u7684\u865a\u62df\u73af\u5883\u3002 \u5b89\u88c5 sudo easy_install virtualenvwrapper mkdir $HOME /.virtualenvs #\u5728~/.bashrc\u4e2d\u6dfb\u52a0\u884c\uff1a export WORKON_HOME = $HOME /.virtualenvs #\u5728~/.bashrc\u4e2d\u6dfb\u52a0\u884c\uff1a source /usr/local/bin/virtualenvwrapper.sh #\u8fd0\u884c\uff1a source ~/.bashrc \u4f7f\u7528 #\u5217\u51fa\u865a\u62df\u73af\u5883\u5217\u8868 workon #\u4e5f\u53ef\u4ee5\u4f7f\u7528 lsvirtualenv #\u65b0\u5efa\u865a\u62df\u73af\u5883 mkvirtualenv [ \u865a\u62df\u73af\u5883\u540d\u79f0 ] #\u542f\u52a8/\u5207\u6362\u865a\u62df\u73af\u5883 workon [ \u865a\u62df\u73af\u5883\u540d\u79f0 ] #\u5220\u9664\u865a\u62df\u73af\u5883 rmvirtualenv [ \u865a\u62df\u73af\u5883\u540d\u79f0 ] #\u79bb\u5f00\u865a\u62df\u73af\u5883 deactivate","title":"Virtualenvwrapper"},{"location":"python/py_module_manager/#python_5","text":"","title":"python \u591a\u7248\u672c\u7ba1\u7406"},{"location":"python/py_module_manager/#pyenv","text":"pyenv\u547d\u4ee4: commands \u5217\u51fa\u6240\u6709pyenv\u547d\u4ee4 local \u8bbe\u7f6e\u6216\u8005\u663e\u793alocal\u7684python\u7248\u672c global \u8bbe\u7f6e\u6216\u8005\u663e\u793aglobal\u7684python\u7248\u672c shell \u8bbe\u7f6e\u6216\u8005\u663e\u793ashell\u7684python\u7248\u672c install \u5b89\u88c5\u4e00\u4e2apython\u7248\u672c uninstall \u5378\u8f7d\u4e00\u4e2apython\u7248\u672c rehash Rehash pyenv shims ( run this after installing executables ) version \u663e\u793a\u5f53\u524d\u7248\u672c versions \u663e\u793a\u6240\u6709python\u7248\u672c which \u663e\u793a\u53ef\u6267\u884cpython\u7684\u8def\u5f84 whence \u663e\u793a\u5e26\u6267\u884c\u8def\u5f84\u7684\u6240\u6709\u7248\u672c ########\u5b89\u88c5\u5176\u4ed6\u7248\u672c\u7684python #\u4f9d\u8d56 sudo brew install homebrew/dupes/zlib bash brew install readline ; brew link readline ; #\u5b89\u88c5 CFLAGS = -g -O2 CFLAGS = -I $( xcrun --show-sdk-path ) /usr/include CFLAGS = -I $( brew --prefix openssl ) /include \\ LDFLAGS = -L $( brew --prefix openssl ) /lib \\ pyenv install 2 .7.5 #\u73af\u5883\u53d8\u91cf export PYENV_ROOT = $HOME /.pyenv export PATH = ${ PATH } : $PYENV_ROOT /bin: $PATH eval $( pyenv init - ) #\u79fb\u9664\u7248\u672c rm -rf .pyenv/versions/2.7.5 https://github.com/mitsuhiko/python-modernize http://haoluobo.com/2013/01/python2and3/ http://www.jianshu.com/p/4646dedaaff5","title":"pyenv \u7248\u672c\u7ba1\u7406"},{"location":"python/py_modules/","text":"python\u6a21\u5757\u4f7f\u7528 requests #requests \u81ea\u5e26 session\u3002 #http://docs.python-requests.org/en/latest/user/advanced/#session-objects #\u5982\u679c\u60f3\u66f4\u6539\u67d0\u4e2a cookie\u3002 def update_cookie ( cookiejar , cookie ): _cookies = requests . cookies _cookies . remove_cookie_by_name ( cookiejar , cookie_name ) cookiejar . set_cookie ( _cookies . create_cookie ( cookie_name , cookie , ** { domain : .example.com })) MySQLdb MySQLdb \u662fpython\u662f\u7684mysql driver. MySQLdb Sourceforge win\u4e0b\u8f7d\u5bf9\u5e94\u7684exe\u7248\u672c: https://pypi.python.org/pypi/MySQL-python/1.2.5 \u5b89\u88c5 pip install mysql-python \u5e2e\u52a9 \u7248\u672c\u4fe1\u606f #\u67e5\u770bping\u5bf9\u8c61\u5e2e\u52a9 import MySQLdb ; help ( MySQLdb . _mysql . connection . ping ) #\u67e5\u770b\u7248\u672c print ( MySQLdb . _mysql . __version__ ) \u57fa\u7840\u51fd\u6570 import MySQLdb if __name__ == __main__ : print ( dir ( MySQLdb . _mysql )) print ( dir ( MySQLdb . _mysql . connection )) ## \u8f93\u51fa #mysql\u5bf9\u8c61 [ DataError , DatabaseError , Error , IntegrityError , InterfaceError , InternalError , MySQLError , NULL , NotSupportedError , OperationalError , ProgrammingError , Warning , connect , connection , debug , escape , escape_dict , escape_sequence , escape_string , get_client_info , result , server_end , server_init , string_literal , thread_safe , version_info ] #connection\u5bf9\u8c61 [ affected_rows , autocommit , change_user , character_set_name , client_flag , close , commit , converter , dump_debug_info , errno , error , escape , escape_string , field_count , get_autocommit , get_character_set_info , get_host_info , get_proto_info , get_server_info , info , insert_id , kill , next_result , open , ping , port , query , rollback , select_db , server_capabilities , set_character_set , set_server_option , shutdown , sqlstate , stat , store_result , string_literal , thread_id , use_result , warning_count ] \u57fa\u672c\u7528\u4f8b select \u67e5\u8be2 cur = conn . cursor ( cursorclass = MySQLdb . cursors . DictCursor ) cur . execute ( sql ) result = cur . fetchall () cur . close () \u6267\u884c\u5176\u4ed6sql conn . autocommit ( True ) cur = conn . cursor () result = cur . execute ( sql ) cur . close () \u89e3\u51b3mysql has gone away\u95ee\u9898 def build_conn ( self ): ret = None try : ret = MySQLdb . connect ( host = self . host , user = self . user , passwd = self . passwd , db = self . db , port = self . port , charset = utf8 , connect_timeout = 20 ) except Exception , e : writeLog ( traceback . format_exc ()) return ret def get_conn ( self ): if self . conn == None : self . conn = self . build_conn () else : try : # fix reconnect self . conn . ping () except Exception , e : self . close_conn () # print( error ,e) writeLog ( traceback . format_exc ()) self . conn = self . build_conn () return self . conn def close_conn ( self ): if self . conn : self . conn . close () self . conn = None \u5b8c\u6574util import MySQLdb import traceback from mylog import writeLog class mymysqldb ( object ): def __init__ ( self , host , user , passwd , db , port ): self . host = str ( host ) self . user = str ( user ) self . passwd = str ( passwd ) self . db = str ( db ) self . port = int ( port ) self . conn = None def build_conn ( self ): ret = None try : ret = MySQLdb . connect ( host = self . host , user = self . user , passwd = self . passwd , db = self . db , port = self . port , charset = utf8 , connect_timeout = 20 ) except Exception , e : writeLog ( traceback . format_exc ()) return ret def get_conn ( self ): if self . conn == None : self . conn = self . build_conn () else : try : # fix reconnect self . conn . ping () except Exception , e : self . close_conn () # print( error ,e) writeLog ( traceback . format_exc ()) self . conn = self . build_conn () return self . conn def close_conn ( self ): if self . conn : self . conn . close () self . conn = None def excute_sql ( self , sql ): conn = self . get_conn () if conn == None : return 0 try : conn . autocommit ( True ) cur = conn . cursor () result = cur . execute ( sql ) cur . close () return result except : writeLog ( traceback . format_exc ()) self . close_conn () return 0 return 0 def select_sql ( self , sql ): conn = self . get_conn () if conn == None : return None try : cur = conn . cursor ( cursorclass = MySQLdb . cursors . DictCursor ) cur . execute ( sql ) result = cur . fetchall () cur . close () return result except : writeLog ( traceback . format_exc ()) self . close_conn () return None return None def escape_string ( self , string ): result = for c in string : escape = None char_num = ord ( c ) if char_num == 0 : escape = 0 elif char_num == ord ( \\ ): escape = \\ elif char_num == ord ( ): escape = elif char_num == ord ( \\b ): escape = b elif char_num == ord ( \\n ): escape = n elif char_num == ord ( \\r ): escape = r elif char_num == ord ( \\t ): escape = t elif char_num == 26 : escape = Z elif char_num == ord ( \\\\ ): escape = \\\\ elif char_num == ord ( % ): escape = % if escape : result = result + \\\\ + escape else : result = result + c return result #---------------------------------------------------------------------- # testing reconnect , in mysql setting, set global wait_timeout=5; trigger the error of MySQL has gone away #---------------------------------------------------------------------- import time if __name__ == __main__ : db = mymysqldb ( 127.0.0.1 , root , 12345678 , t_log , 3306 ) print ( result , db . select_sql ( SELECT * FROM t_visit )) time . sleep ( 6 ) print ( result111 , db . select_sql ( SELECT * FROM t_visit )) # time.sleep(6) print ( result2222 , db . select_sql ( SELECT * FROM t_visit ))","title":"\u5e38\u7528\u5e93"},{"location":"python/py_modules/#python","text":"","title":"python\u6a21\u5757\u4f7f\u7528"},{"location":"python/py_modules/#requests","text":"#requests \u81ea\u5e26 session\u3002 #http://docs.python-requests.org/en/latest/user/advanced/#session-objects #\u5982\u679c\u60f3\u66f4\u6539\u67d0\u4e2a cookie\u3002 def update_cookie ( cookiejar , cookie ): _cookies = requests . cookies _cookies . remove_cookie_by_name ( cookiejar , cookie_name ) cookiejar . set_cookie ( _cookies . create_cookie ( cookie_name , cookie , ** { domain : .example.com }))","title":"requests"},{"location":"python/py_modules/#mysqldb","text":"MySQLdb \u662fpython\u662f\u7684mysql driver. MySQLdb Sourceforge win\u4e0b\u8f7d\u5bf9\u5e94\u7684exe\u7248\u672c: https://pypi.python.org/pypi/MySQL-python/1.2.5","title":"MySQLdb"},{"location":"python/py_modules/#_1","text":"pip install mysql-python","title":"\u5b89\u88c5"},{"location":"python/py_modules/#_2","text":"\u7248\u672c\u4fe1\u606f #\u67e5\u770bping\u5bf9\u8c61\u5e2e\u52a9 import MySQLdb ; help ( MySQLdb . _mysql . connection . ping ) #\u67e5\u770b\u7248\u672c print ( MySQLdb . _mysql . __version__ ) \u57fa\u7840\u51fd\u6570 import MySQLdb if __name__ == __main__ : print ( dir ( MySQLdb . _mysql )) print ( dir ( MySQLdb . _mysql . connection )) ## \u8f93\u51fa #mysql\u5bf9\u8c61 [ DataError , DatabaseError , Error , IntegrityError , InterfaceError , InternalError , MySQLError , NULL , NotSupportedError , OperationalError , ProgrammingError , Warning , connect , connection , debug , escape , escape_dict , escape_sequence , escape_string , get_client_info , result , server_end , server_init , string_literal , thread_safe , version_info ] #connection\u5bf9\u8c61 [ affected_rows , autocommit , change_user , character_set_name , client_flag , close , commit , converter , dump_debug_info , errno , error , escape , escape_string , field_count , get_autocommit , get_character_set_info , get_host_info , get_proto_info , get_server_info , info , insert_id , kill , next_result , open , ping , port , query , rollback , select_db , server_capabilities , set_character_set , set_server_option , shutdown , sqlstate , stat , store_result , string_literal , thread_id , use_result , warning_count ]","title":"\u5e2e\u52a9"},{"location":"python/py_modules/#_3","text":"select \u67e5\u8be2 cur = conn . cursor ( cursorclass = MySQLdb . cursors . DictCursor ) cur . execute ( sql ) result = cur . fetchall () cur . close () \u6267\u884c\u5176\u4ed6sql conn . autocommit ( True ) cur = conn . cursor () result = cur . execute ( sql ) cur . close ()","title":"\u57fa\u672c\u7528\u4f8b"},{"location":"python/py_modules/#mysql-has-gone-away","text":"def build_conn ( self ): ret = None try : ret = MySQLdb . connect ( host = self . host , user = self . user , passwd = self . passwd , db = self . db , port = self . port , charset = utf8 , connect_timeout = 20 ) except Exception , e : writeLog ( traceback . format_exc ()) return ret def get_conn ( self ): if self . conn == None : self . conn = self . build_conn () else : try : # fix reconnect self . conn . ping () except Exception , e : self . close_conn () # print( error ,e) writeLog ( traceback . format_exc ()) self . conn = self . build_conn () return self . conn def close_conn ( self ): if self . conn : self . conn . close () self . conn = None","title":"\u89e3\u51b3mysql has gone away\u95ee\u9898"},{"location":"python/py_modules/#util","text":"import MySQLdb import traceback from mylog import writeLog class mymysqldb ( object ): def __init__ ( self , host , user , passwd , db , port ): self . host = str ( host ) self . user = str ( user ) self . passwd = str ( passwd ) self . db = str ( db ) self . port = int ( port ) self . conn = None def build_conn ( self ): ret = None try : ret = MySQLdb . connect ( host = self . host , user = self . user , passwd = self . passwd , db = self . db , port = self . port , charset = utf8 , connect_timeout = 20 ) except Exception , e : writeLog ( traceback . format_exc ()) return ret def get_conn ( self ): if self . conn == None : self . conn = self . build_conn () else : try : # fix reconnect self . conn . ping () except Exception , e : self . close_conn () # print( error ,e) writeLog ( traceback . format_exc ()) self . conn = self . build_conn () return self . conn def close_conn ( self ): if self . conn : self . conn . close () self . conn = None def excute_sql ( self , sql ): conn = self . get_conn () if conn == None : return 0 try : conn . autocommit ( True ) cur = conn . cursor () result = cur . execute ( sql ) cur . close () return result except : writeLog ( traceback . format_exc ()) self . close_conn () return 0 return 0 def select_sql ( self , sql ): conn = self . get_conn () if conn == None : return None try : cur = conn . cursor ( cursorclass = MySQLdb . cursors . DictCursor ) cur . execute ( sql ) result = cur . fetchall () cur . close () return result except : writeLog ( traceback . format_exc ()) self . close_conn () return None return None def escape_string ( self , string ): result = for c in string : escape = None char_num = ord ( c ) if char_num == 0 : escape = 0 elif char_num == ord ( \\ ): escape = \\ elif char_num == ord ( ): escape = elif char_num == ord ( \\b ): escape = b elif char_num == ord ( \\n ): escape = n elif char_num == ord ( \\r ): escape = r elif char_num == ord ( \\t ): escape = t elif char_num == 26 : escape = Z elif char_num == ord ( \\\\ ): escape = \\\\ elif char_num == ord ( % ): escape = % if escape : result = result + \\\\ + escape else : result = result + c return result #---------------------------------------------------------------------- # testing reconnect , in mysql setting, set global wait_timeout=5; trigger the error of MySQL has gone away #---------------------------------------------------------------------- import time if __name__ == __main__ : db = mymysqldb ( 127.0.0.1 , root , 12345678 , t_log , 3306 ) print ( result , db . select_sql ( SELECT * FROM t_visit )) time . sleep ( 6 ) print ( result111 , db . select_sql ( SELECT * FROM t_visit )) # time.sleep(6) print ( result2222 , db . select_sql ( SELECT * FROM t_visit ))","title":"\u5b8c\u6574util"},{"location":"python/py_mq/","text":"\u6d88\u606f\u961f\u5217 zeromq zeromq\u662f\u4e00\u4e2a\u4e3a\u53ef\u4f38\u7f29\u7684\u5206\u5e03\u5f0f\u6216\u5e76\u53d1\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u9ad8\u6027\u80fd\u5f02\u6b65\u6d88\u606f\u5e93\u3002\u5b83\u63d0\u4f9b\u4e00\u4e2a\u6d88\u606f\u961f\u5217, \u4f46\u662f\u4e0e\u9762\u5411\u6d88\u606f\u7684\u4e2d\u95f4\u4ef6\u4e0d\u540c\uff0cZeroMQ\u7684\u8fd0\u884c\u4e0d\u9700\u8981\u4e13\u95e8\u7684\u6d88\u606f\u4ee3\u7406\uff08message broker\uff09\u3002\u8be5\u5e93\u8bbe\u8ba1\u6210\u5e38\u89c1\u7684\u5957\u63a5\u5b57\u98ce\u683c\u7684API \u652f\u6301\u9ad8\u5e76\u53d1\u7684\u5f02\u6b65 Socket \u6846\u67b6 \u534f\u8bae\u6bd4 TCP \u66f4\u5feb\u3001\u9002\u7528\u4e8e\u5927\u578b\u96c6\u7fa4\u548c\u5206\u5e03\u5f0f\u8ba1\u7b97 \u63d0\u4f9b\u591a\u79cd\u6d88\u606f\u4f20\u9012\u673a\u5236\uff0c\u5982 inproc/IPC/TCP/multicast \u7b49 \u5185\u7f6e\u4e30\u5bcc\u7684\u7ec4\u5408\u6a21\u5f0f\uff0c\u53ef\u7528\u4e8e\u7b80\u5316\u5927\u578b\u5206\u6b65\u5f0f\u8ba1\u7b97\u67b6\u6784 \u63d0\u4f9b\u5f02\u6b65 I/O \u6a21\u5f0f\uff0c\u9002\u7528\u4e8e\u53ef\u6269\u5c55\u7684\u591a\u6838\u5e94\u7528\u5f00\u53d1 \u62e5\u6709\u6d3b\u8dc3\u7684\u5f00\u53d1\u8005\u793e\u533a\u63d0\u4f9b\u6280\u672f\u652f\u6301\uff0c\u53d1\u5c55\u76f8\u5f53\u8fc5\u901f \u652f\u6301\u8d85\u8fc7 30 \u79cd\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5982 C/C++/Java/.NET/Python/PHP \u7b49 \u826f\u597d\u7684\u8de8\u5e73\u53f0\u6027\uff0c\u652f\u6301\u591a\u79cd OS\uff0c\u5982 Linux/Windows/OS X \u7b49 \u62e5\u6709 iMatix \u516c\u53f8\u7684\u5546\u4e1a\u7ea7\u522b\u652f\u6301\uff0c\u5374\u662f\u5b8c\u5168\u514d\u8d39\u7684 http://zeromq.org/intro:get-the-software \u7f16\u8bd1zeromq git clone https://github.com/zeromq/libzmq ./autogen.sh ./configure make -j 4 make check make install sudo ldconfig #autogen\u9700\u8981libtool apt-get install libtool pyzmq\u5b89\u88c5 pip install pyzmq \u68c0\u6d4b\u5b89\u88c5 import zmq print ( version is %s % zmq . zmq_version ()) \u534f\u8bae\u652f\u6301 INPROC an In-Process communication model IPC an Inter-Process communication model MULTICAST multicast via PGM, possibly encapsulated in UDP TCP a network based transport \u5efa\u7acb\u57fa\u7840 \u7531\u4e8e\u5728\u7f51\u7edc\u4e2d\u4e24\u4e2a\u7aef\u70b9\u662f\u76f8\u5bf9\u52a8\u6001\u7684\uff0c\u5f88\u96be\u6709\u4e00\u4e2a\u7a33\u5b9a\u7684\u5355\u4e00\u8fde\u63a5\u70b9\u3002 \u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528\u75310MQ\u63d0\u4f9b\u7684\u8f6c\u53d1\u8bbe\u5907\u3002 \u8f6c\u53d1\u8bbe\u5907\u53ef\u4ee5\u7ed1\u5b9a2\u4e2a\u4e0d\u540c\u7aef\u53e3\uff0c\u5e76\u4e14\u8f6c\u53d1\u6d88\u606f\u4ece\u4e00\u4e2a\u7aef\u70b9\u5230\u53e6\u4e00\u4e2a\u7aef\u70b9\u3002 \u8fd9\u6837\u505a\u7684\u8bdd\uff0c\u5728\u7f51\u7edc\u4e2d\u8f6c\u53d1\u8bbe\u5907\u80fd\u591f\u53d8\u6210\u4e00\u4e2a\u7a33\u5b9a\u7684\u70b9\uff0c\u5176\u5b83\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u53bb\u8fde\u63a5\u3002 0MQ\u63d0\u4f9b\u4e863\u79cd\u7c7b\u578b\u7684\u8bbe\u5907 QUEUE , a forwarder for the request/response messaging pattern FORWARDER , a forwarder for the publish/subscribe messaging pattern STREAMER , a forwarder for the pipelined messaging pattern \u591a\u8def\u590d\u7528\u6a21\u5f0f select\uff08\u652f\u6301unix/windows\uff09 poll\uff08\u652f\u6301unix\uff09 epoll\uff08\u652f\u6301linux\uff09 kqueue\uff08\u652f\u6301freebsd\uff09 devpoll\uff08zmq\u81ea\u7814\u7684poll\uff09 \u5176\u4e2d,Linux \u4e0b\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f epoll \u65b9\u5f0f \u901a\u8baf\u6a21\u5f0f REQUEST/REPLY , bidirectional, load balanced and state based PUBLISH/SUBSCRIBE , publish to multiple recipients at once UPSTREAM / DOWNSTREAM , distribute data to nodes arranged in a pipeline PAIR , communication exclusively between peers \u5e94\u7b54\u6a21\u5f0f(REQUEST/REPLY) \u7531\u8bf7\u6c42\u7aef\u53d1\u8d77\u8bf7\u6c42\uff0c\u5e76\u7b49\u5f85\u56de\u5e94\u7aef\u56de\u5e94\u8bf7\u6c42 \u666e\u901a\u5e94\u7b54\u6a21\u5f0f server.py import zmq import time context = zmq . Context () socket = context . socket ( zmq . REP ) socket . bind ( tcp://*:5555 ) while True : # Wait for next request from client message = socket . recv () print Received request: , message # Do some work time . sleep ( 1 ) # Do some work # Send reply back to client socket . send ( World ) client.py: import zmq context = zmq . Context () # Socket to talk to server print Connecting to hello world server... socket = context . socket ( zmq . REQ ) socket . connect ( tcp://localhost:5555 ) # Do 10 requests, waiting each time for a response for request in range ( 1 , 10 ): print Sending request , request , ... socket . send ( Hello ) # Get the reply. message = socket . recv () print Received reply , request , [ , message , ] \u8d1f\u8f7d\u5747\u8861 client \u7684\u8bf7\u6c42\u4f1a\u88ab\u5747\u8861\u7684\u5206\u914d\u7ed9\u591a\u4e2a server \u4e2d server1.py import zmq import time context = zmq . Context () socket = context . socket ( zmq . REP ) socket . bind ( tcp://*:5555 ) while True : # Wait for next request from client message = socket . recv () print Received request server1: , message # Do some work time . sleep ( 1 ) # Do some work # Send reply back to client socket . send ( World ) server2.py import zmq import time context = zmq . Context () socket = context . socket ( zmq . REP ) socket . bind ( tcp://*:5556 ) while True : # Wait for next request from client message = socket . recv () print Received request server2: , message # Do some work time . sleep ( 1 ) # Do some work # Send reply back to client socket . send ( World ) client.py: import zmq context = zmq . Context () # Socket to talk to server print Connecting to hello world server... socket = context . socket ( zmq . REQ ) socket . connect ( tcp://localhost:5555 ) socket . connect ( tcp://localhost:5556 ) # Do 10 requests, waiting each time for a response for request in range ( 1 , 10 ): print Sending request , request , ... socket . send ( Hello ) # Get the reply. message = socket . recv () print Received reply , request , [ , message , ] \u53d1\u5e03\u8ba2\u9605\u6a21\u578b(PUBLISH/SUBSCRIBE) \u53d1\u5e03\u8ba2\u9605\u6a21\u578b,\u6709\u4e00\u4e2a\u53d1\u5e03\u6d88\u606f\u7684\u670d\u52a1\u7aef,\u6709\u82e5\u5e72\u63a5\u6536\u7aef,\u63a5\u6536\u7aef\u53ea\u5173\u6ce8\u611f\u5174\u8da3\u7684\u4e8b\u4ef6.\u5728\u7f16\u7a0b\u6a21\u578b\u4e2d\u65e9\u88ab\u5927\u91cf\u5e94\u7528,\u5982\u6d88\u606f\u63a8\u9001\u7b49,\u5728\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\u4e2d\u7684\u7ec4\u4ef6\u662f\u677e\u6563\u8026\u5408\u7684,\u53d1\u5e03\u7aef\u4e0d\u9700\u8981\u5173\u5fc3\u8ba2\u9605\u7aef,\u5c31\u50cf\u4e00\u4e2a\u5e7f\u64ad\u7535\u53f0\u4e00\u6837,\u63a5\u6536\u7aef\u5c31\u50cf\u6536\u97f3\u673a.\u6240\u4ee5\u53d1\u5e03\u7aef\u53d1\u5e03\u8fc7\u7684\u6d88\u606f\u5982\u679c\u5728\u8ba2\u9605\u4e4b\u524d\u662f\u6ca1\u529e\u6cd5\u83b7\u53d6\u7684. pubserver.py: import zmq import time from random import choice context = zmq . Context () socket = context . socket ( zmq . PUB ) socket . bind ( tcp://127.0.0.1:5000 ) countries = [ netherlands , brazil , germany , portugal ] events = [ yellow card , red card , goal , corner , foul ] def print_t ( * args ): from time import gmtime , strftime t = strftime ( %Y-%m- %d %H:%M:%S , gmtime ()) print ( t , args ) while True : msg = choice ( countries ) + + choice ( events ) print_t ( - , msg ) time . sleep ( 1 ) socket . send ( msg ) pubclient.py: import zmq context = zmq . Context () socket = context . socket ( zmq . SUB ) socket . connect ( tcp://127.0.0.1:5000 ) socket . setsockopt ( zmq . SUBSCRIBE , netherlands ) socket . setsockopt ( zmq . SUBSCRIBE , germany ) def print_t ( * args ): from time import gmtime , strftime t = strftime ( %Y-%m- %d %H:%M:%S , gmtime ()) print ( t , args ) while True : print_t ( socket . recv ()) pubclient2.py: import zmq context = zmq . Context () socket = context . socket ( zmq . SUB ) socket . connect ( tcp://127.0.0.1:5000 ) socket . setsockopt ( zmq . SUBSCRIBE , brazil ) socket . setsockopt ( zmq . SUBSCRIBE , portugal ) def print_t ( * args ): from time import gmtime , strftime t = strftime ( %Y-%m- %d %H:%M:%S , gmtime ()) print ( t , args ) while True : print_t ( socket . recv ()) \u7ba1\u9053\u6a21\u578b \u7ba1\u9053\u6a21\u578b\u548c\u5e94\u7b54\u6a21\u5f0f\u5f88\u7c7b\u4f3c,\u4e0d\u540c\u7684\u662f\u670d\u52a1\u7aef\u5e76\u4e0d\u76f4\u63a5\u628a\u4fe1\u606f\u56de\u9988\u7ed9\u8bf7\u6c42\u8005. pipeline_ventilator.py import zmq import random import time try : raw_input except NameError : # Python 3 raw_input = input context = zmq . Context () # Socket to send messages on sender = context . socket ( zmq . PUSH ) sender . bind ( tcp://*:5557 ) # Socket with direct access to the sink: used to syncronize start of batch sink = context . socket ( zmq . PUSH ) sink . connect ( tcp://localhost:5558 ) print ( Press Enter when the workers are ready: ) _ = raw_input () print ( Sending tasks to workers\u2026 ) # The first message is 0 and signals start of batch sink . send ( b 0 ) # Initialize random number generator random . seed () # Send 100 tasks total_msec = 0 for task_nbr in range ( 100 ): # Random workload from 1 to 100 msecs workload = random . randint ( 1 , 100 ) total_msec += workload sender . send_string ( u %i % workload ) print ( Total expected cost: %s msec % total_msec ) # Give 0MQ time to deliver time . sleep ( 1 ) pipeline_worker.py import sys import time import zmq context = zmq . Context () # Socket to receive messages on receiver = context . socket ( zmq . PULL ) receiver . connect ( tcp://localhost:5557 ) # Socket to send messages to sender = context . socket ( zmq . PUSH ) sender . connect ( tcp://localhost:5558 ) # Process tasks forever while True : s = receiver . recv () # Simple progress indicator for the viewer sys . stdout . write ( . ) sys . stdout . flush () # Do the work time . sleep ( int ( s ) * 0.001 ) # Send results to sink sender . send ( b ) pipeline_sink.py import sys import time import zmq context = zmq . Context () # Socket to receive messages on receiver = context . socket ( zmq . PULL ) receiver . bind ( tcp://*:5558 ) # Wait for start of batch s = receiver . recv () # Start our clock now tstart = time . time () # Process 100 confirmations for task_nbr in range ( 100 ): s = receiver . recv () if task_nbr % 10 == 0 : sys . stdout . write ( : ) else : sys . stdout . write ( . ) sys . stdout . flush () # Calculate and report duration of batch tend = time . time () print ( Total elapsed time: %d msec % (( tend - tstart ) * 1000 )) \u542f\u52a8 pipeline_sink --- pipeline_ventilator --- pipeline_worker ,\u542f\u52a8\u591a\u4e2a work \u6d88\u8017\u65f6\u95f4\u660e\u663e\u6bd4\u5355 work \u8981\u5c0f PAIR\u6a21\u578b PAIR \u6a21\u5f0f\u5176\u5b9e\u4e5f\u5c31\u662f\u4f20\u7edf\u7684 socket \u8fde\u63a5\u65b9\u5f0f\uff0c\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u901a\u8fc7\u70b9\u5bf9\u70b9\u7684\u8fdb\u884c\u901a\u8baf,\u901a\u8baf\u662f\u53cc\u5411\u7684,\u65e0\u72b6\u6001,\u5ba2\u6237\u7aef\u901a\u8fc7\u670d\u52a1\u7aef\u76d1\u542c\u7684\u7aef\u53e3\u4e0e\u4e4b\u901a\u8baf. pair_server.py import zmq context = zmq . Context () socket = context . socket ( zmq . PAIR ) socket . bind ( tcp://127.0.0.1:5555 ) pair_client.py context = zmq . Context () socket = context . socket ( zmq . PAIR ) socket . connect ( tcp://127.0.0.1:5555 ) http://nichol.as/zeromq-an-introduction http://zguide.zeromq.org/page:all http://iyuan.iteye.com/blog/982185","title":"\u6d88\u606f\u961f\u5217"},{"location":"python/py_mq/#_1","text":"","title":"\u6d88\u606f\u961f\u5217"},{"location":"python/py_mq/#zeromq","text":"zeromq\u662f\u4e00\u4e2a\u4e3a\u53ef\u4f38\u7f29\u7684\u5206\u5e03\u5f0f\u6216\u5e76\u53d1\u5e94\u7528\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u9ad8\u6027\u80fd\u5f02\u6b65\u6d88\u606f\u5e93\u3002\u5b83\u63d0\u4f9b\u4e00\u4e2a\u6d88\u606f\u961f\u5217, \u4f46\u662f\u4e0e\u9762\u5411\u6d88\u606f\u7684\u4e2d\u95f4\u4ef6\u4e0d\u540c\uff0cZeroMQ\u7684\u8fd0\u884c\u4e0d\u9700\u8981\u4e13\u95e8\u7684\u6d88\u606f\u4ee3\u7406\uff08message broker\uff09\u3002\u8be5\u5e93\u8bbe\u8ba1\u6210\u5e38\u89c1\u7684\u5957\u63a5\u5b57\u98ce\u683c\u7684API \u652f\u6301\u9ad8\u5e76\u53d1\u7684\u5f02\u6b65 Socket \u6846\u67b6 \u534f\u8bae\u6bd4 TCP \u66f4\u5feb\u3001\u9002\u7528\u4e8e\u5927\u578b\u96c6\u7fa4\u548c\u5206\u5e03\u5f0f\u8ba1\u7b97 \u63d0\u4f9b\u591a\u79cd\u6d88\u606f\u4f20\u9012\u673a\u5236\uff0c\u5982 inproc/IPC/TCP/multicast \u7b49 \u5185\u7f6e\u4e30\u5bcc\u7684\u7ec4\u5408\u6a21\u5f0f\uff0c\u53ef\u7528\u4e8e\u7b80\u5316\u5927\u578b\u5206\u6b65\u5f0f\u8ba1\u7b97\u67b6\u6784 \u63d0\u4f9b\u5f02\u6b65 I/O \u6a21\u5f0f\uff0c\u9002\u7528\u4e8e\u53ef\u6269\u5c55\u7684\u591a\u6838\u5e94\u7528\u5f00\u53d1 \u62e5\u6709\u6d3b\u8dc3\u7684\u5f00\u53d1\u8005\u793e\u533a\u63d0\u4f9b\u6280\u672f\u652f\u6301\uff0c\u53d1\u5c55\u76f8\u5f53\u8fc5\u901f \u652f\u6301\u8d85\u8fc7 30 \u79cd\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5982 C/C++/Java/.NET/Python/PHP \u7b49 \u826f\u597d\u7684\u8de8\u5e73\u53f0\u6027\uff0c\u652f\u6301\u591a\u79cd OS\uff0c\u5982 Linux/Windows/OS X \u7b49 \u62e5\u6709 iMatix \u516c\u53f8\u7684\u5546\u4e1a\u7ea7\u522b\u652f\u6301\uff0c\u5374\u662f\u5b8c\u5168\u514d\u8d39\u7684 http://zeromq.org/intro:get-the-software","title":"zeromq"},{"location":"python/py_mq/#zeromq_1","text":"git clone https://github.com/zeromq/libzmq ./autogen.sh ./configure make -j 4 make check make install sudo ldconfig #autogen\u9700\u8981libtool apt-get install libtool","title":"\u7f16\u8bd1zeromq"},{"location":"python/py_mq/#pyzmq","text":"pip install pyzmq \u68c0\u6d4b\u5b89\u88c5 import zmq print ( version is %s % zmq . zmq_version ())","title":"pyzmq\u5b89\u88c5"},{"location":"python/py_mq/#_2","text":"INPROC an In-Process communication model IPC an Inter-Process communication model MULTICAST multicast via PGM, possibly encapsulated in UDP TCP a network based transport","title":"\u534f\u8bae\u652f\u6301"},{"location":"python/py_mq/#_3","text":"\u7531\u4e8e\u5728\u7f51\u7edc\u4e2d\u4e24\u4e2a\u7aef\u70b9\u662f\u76f8\u5bf9\u52a8\u6001\u7684\uff0c\u5f88\u96be\u6709\u4e00\u4e2a\u7a33\u5b9a\u7684\u5355\u4e00\u8fde\u63a5\u70b9\u3002 \u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528\u75310MQ\u63d0\u4f9b\u7684\u8f6c\u53d1\u8bbe\u5907\u3002 \u8f6c\u53d1\u8bbe\u5907\u53ef\u4ee5\u7ed1\u5b9a2\u4e2a\u4e0d\u540c\u7aef\u53e3\uff0c\u5e76\u4e14\u8f6c\u53d1\u6d88\u606f\u4ece\u4e00\u4e2a\u7aef\u70b9\u5230\u53e6\u4e00\u4e2a\u7aef\u70b9\u3002 \u8fd9\u6837\u505a\u7684\u8bdd\uff0c\u5728\u7f51\u7edc\u4e2d\u8f6c\u53d1\u8bbe\u5907\u80fd\u591f\u53d8\u6210\u4e00\u4e2a\u7a33\u5b9a\u7684\u70b9\uff0c\u5176\u5b83\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u53bb\u8fde\u63a5\u3002 0MQ\u63d0\u4f9b\u4e863\u79cd\u7c7b\u578b\u7684\u8bbe\u5907 QUEUE , a forwarder for the request/response messaging pattern FORWARDER , a forwarder for the publish/subscribe messaging pattern STREAMER , a forwarder for the pipelined messaging pattern","title":"\u5efa\u7acb\u57fa\u7840"},{"location":"python/py_mq/#_4","text":"select\uff08\u652f\u6301unix/windows\uff09 poll\uff08\u652f\u6301unix\uff09 epoll\uff08\u652f\u6301linux\uff09 kqueue\uff08\u652f\u6301freebsd\uff09 devpoll\uff08zmq\u81ea\u7814\u7684poll\uff09 \u5176\u4e2d,Linux \u4e0b\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f epoll \u65b9\u5f0f","title":"\u591a\u8def\u590d\u7528\u6a21\u5f0f"},{"location":"python/py_mq/#_5","text":"REQUEST/REPLY , bidirectional, load balanced and state based PUBLISH/SUBSCRIBE , publish to multiple recipients at once UPSTREAM / DOWNSTREAM , distribute data to nodes arranged in a pipeline PAIR , communication exclusively between peers","title":"\u901a\u8baf\u6a21\u5f0f"},{"location":"python/py_mq/#requestreply","text":"\u7531\u8bf7\u6c42\u7aef\u53d1\u8d77\u8bf7\u6c42\uff0c\u5e76\u7b49\u5f85\u56de\u5e94\u7aef\u56de\u5e94\u8bf7\u6c42 \u666e\u901a\u5e94\u7b54\u6a21\u5f0f server.py import zmq import time context = zmq . Context () socket = context . socket ( zmq . REP ) socket . bind ( tcp://*:5555 ) while True : # Wait for next request from client message = socket . recv () print Received request: , message # Do some work time . sleep ( 1 ) # Do some work # Send reply back to client socket . send ( World ) client.py: import zmq context = zmq . Context () # Socket to talk to server print Connecting to hello world server... socket = context . socket ( zmq . REQ ) socket . connect ( tcp://localhost:5555 ) # Do 10 requests, waiting each time for a response for request in range ( 1 , 10 ): print Sending request , request , ... socket . send ( Hello ) # Get the reply. message = socket . recv () print Received reply , request , [ , message , ] \u8d1f\u8f7d\u5747\u8861 client \u7684\u8bf7\u6c42\u4f1a\u88ab\u5747\u8861\u7684\u5206\u914d\u7ed9\u591a\u4e2a server \u4e2d server1.py import zmq import time context = zmq . Context () socket = context . socket ( zmq . REP ) socket . bind ( tcp://*:5555 ) while True : # Wait for next request from client message = socket . recv () print Received request server1: , message # Do some work time . sleep ( 1 ) # Do some work # Send reply back to client socket . send ( World ) server2.py import zmq import time context = zmq . Context () socket = context . socket ( zmq . REP ) socket . bind ( tcp://*:5556 ) while True : # Wait for next request from client message = socket . recv () print Received request server2: , message # Do some work time . sleep ( 1 ) # Do some work # Send reply back to client socket . send ( World ) client.py: import zmq context = zmq . Context () # Socket to talk to server print Connecting to hello world server... socket = context . socket ( zmq . REQ ) socket . connect ( tcp://localhost:5555 ) socket . connect ( tcp://localhost:5556 ) # Do 10 requests, waiting each time for a response for request in range ( 1 , 10 ): print Sending request , request , ... socket . send ( Hello ) # Get the reply. message = socket . recv () print Received reply , request , [ , message , ]","title":"\u5e94\u7b54\u6a21\u5f0f(REQUEST/REPLY)"},{"location":"python/py_mq/#publishsubscribe","text":"\u53d1\u5e03\u8ba2\u9605\u6a21\u578b,\u6709\u4e00\u4e2a\u53d1\u5e03\u6d88\u606f\u7684\u670d\u52a1\u7aef,\u6709\u82e5\u5e72\u63a5\u6536\u7aef,\u63a5\u6536\u7aef\u53ea\u5173\u6ce8\u611f\u5174\u8da3\u7684\u4e8b\u4ef6.\u5728\u7f16\u7a0b\u6a21\u578b\u4e2d\u65e9\u88ab\u5927\u91cf\u5e94\u7528,\u5982\u6d88\u606f\u63a8\u9001\u7b49,\u5728\u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f\u4e2d\u7684\u7ec4\u4ef6\u662f\u677e\u6563\u8026\u5408\u7684,\u53d1\u5e03\u7aef\u4e0d\u9700\u8981\u5173\u5fc3\u8ba2\u9605\u7aef,\u5c31\u50cf\u4e00\u4e2a\u5e7f\u64ad\u7535\u53f0\u4e00\u6837,\u63a5\u6536\u7aef\u5c31\u50cf\u6536\u97f3\u673a.\u6240\u4ee5\u53d1\u5e03\u7aef\u53d1\u5e03\u8fc7\u7684\u6d88\u606f\u5982\u679c\u5728\u8ba2\u9605\u4e4b\u524d\u662f\u6ca1\u529e\u6cd5\u83b7\u53d6\u7684. pubserver.py: import zmq import time from random import choice context = zmq . Context () socket = context . socket ( zmq . PUB ) socket . bind ( tcp://127.0.0.1:5000 ) countries = [ netherlands , brazil , germany , portugal ] events = [ yellow card , red card , goal , corner , foul ] def print_t ( * args ): from time import gmtime , strftime t = strftime ( %Y-%m- %d %H:%M:%S , gmtime ()) print ( t , args ) while True : msg = choice ( countries ) + + choice ( events ) print_t ( - , msg ) time . sleep ( 1 ) socket . send ( msg ) pubclient.py: import zmq context = zmq . Context () socket = context . socket ( zmq . SUB ) socket . connect ( tcp://127.0.0.1:5000 ) socket . setsockopt ( zmq . SUBSCRIBE , netherlands ) socket . setsockopt ( zmq . SUBSCRIBE , germany ) def print_t ( * args ): from time import gmtime , strftime t = strftime ( %Y-%m- %d %H:%M:%S , gmtime ()) print ( t , args ) while True : print_t ( socket . recv ()) pubclient2.py: import zmq context = zmq . Context () socket = context . socket ( zmq . SUB ) socket . connect ( tcp://127.0.0.1:5000 ) socket . setsockopt ( zmq . SUBSCRIBE , brazil ) socket . setsockopt ( zmq . SUBSCRIBE , portugal ) def print_t ( * args ): from time import gmtime , strftime t = strftime ( %Y-%m- %d %H:%M:%S , gmtime ()) print ( t , args ) while True : print_t ( socket . recv ())","title":"\u53d1\u5e03\u8ba2\u9605\u6a21\u578b(PUBLISH/SUBSCRIBE)"},{"location":"python/py_mq/#_6","text":"\u7ba1\u9053\u6a21\u578b\u548c\u5e94\u7b54\u6a21\u5f0f\u5f88\u7c7b\u4f3c,\u4e0d\u540c\u7684\u662f\u670d\u52a1\u7aef\u5e76\u4e0d\u76f4\u63a5\u628a\u4fe1\u606f\u56de\u9988\u7ed9\u8bf7\u6c42\u8005. pipeline_ventilator.py import zmq import random import time try : raw_input except NameError : # Python 3 raw_input = input context = zmq . Context () # Socket to send messages on sender = context . socket ( zmq . PUSH ) sender . bind ( tcp://*:5557 ) # Socket with direct access to the sink: used to syncronize start of batch sink = context . socket ( zmq . PUSH ) sink . connect ( tcp://localhost:5558 ) print ( Press Enter when the workers are ready: ) _ = raw_input () print ( Sending tasks to workers\u2026 ) # The first message is 0 and signals start of batch sink . send ( b 0 ) # Initialize random number generator random . seed () # Send 100 tasks total_msec = 0 for task_nbr in range ( 100 ): # Random workload from 1 to 100 msecs workload = random . randint ( 1 , 100 ) total_msec += workload sender . send_string ( u %i % workload ) print ( Total expected cost: %s msec % total_msec ) # Give 0MQ time to deliver time . sleep ( 1 ) pipeline_worker.py import sys import time import zmq context = zmq . Context () # Socket to receive messages on receiver = context . socket ( zmq . PULL ) receiver . connect ( tcp://localhost:5557 ) # Socket to send messages to sender = context . socket ( zmq . PUSH ) sender . connect ( tcp://localhost:5558 ) # Process tasks forever while True : s = receiver . recv () # Simple progress indicator for the viewer sys . stdout . write ( . ) sys . stdout . flush () # Do the work time . sleep ( int ( s ) * 0.001 ) # Send results to sink sender . send ( b ) pipeline_sink.py import sys import time import zmq context = zmq . Context () # Socket to receive messages on receiver = context . socket ( zmq . PULL ) receiver . bind ( tcp://*:5558 ) # Wait for start of batch s = receiver . recv () # Start our clock now tstart = time . time () # Process 100 confirmations for task_nbr in range ( 100 ): s = receiver . recv () if task_nbr % 10 == 0 : sys . stdout . write ( : ) else : sys . stdout . write ( . ) sys . stdout . flush () # Calculate and report duration of batch tend = time . time () print ( Total elapsed time: %d msec % (( tend - tstart ) * 1000 )) \u542f\u52a8 pipeline_sink --- pipeline_ventilator --- pipeline_worker ,\u542f\u52a8\u591a\u4e2a work \u6d88\u8017\u65f6\u95f4\u660e\u663e\u6bd4\u5355 work \u8981\u5c0f","title":"\u7ba1\u9053\u6a21\u578b"},{"location":"python/py_mq/#pair","text":"PAIR \u6a21\u5f0f\u5176\u5b9e\u4e5f\u5c31\u662f\u4f20\u7edf\u7684 socket \u8fde\u63a5\u65b9\u5f0f\uff0c\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u901a\u8fc7\u70b9\u5bf9\u70b9\u7684\u8fdb\u884c\u901a\u8baf,\u901a\u8baf\u662f\u53cc\u5411\u7684,\u65e0\u72b6\u6001,\u5ba2\u6237\u7aef\u901a\u8fc7\u670d\u52a1\u7aef\u76d1\u542c\u7684\u7aef\u53e3\u4e0e\u4e4b\u901a\u8baf. pair_server.py import zmq context = zmq . Context () socket = context . socket ( zmq . PAIR ) socket . bind ( tcp://127.0.0.1:5555 ) pair_client.py context = zmq . Context () socket = context . socket ( zmq . PAIR ) socket . connect ( tcp://127.0.0.1:5555 ) http://nichol.as/zeromq-an-introduction http://zguide.zeromq.org/page:all http://iyuan.iteye.com/blog/982185","title":"PAIR\u6a21\u578b"},{"location":"python/py_qt/","text":"\u5f00\u59cb\u7528pyqt\u9020\u7a97\u4f53 \u4f9d\u8d56\u73af\u5883 qt5.5.1 python3.4 pyqt pycharm qt designer \u5b89\u88c5 windows\u4e0b\u7684\u5b89\u88c5\u8fc7\u7a0b\u5c31\u4e0d\u518d\u7d2f\u8d58\u4e86\uff0c\u8bb2\u4e0bmac\u4e0b\u7684pyqt\u5b89\u88c5 \u9996\u5148\u5b89\u88c5 sip #sip\u5b89\u88c5\uff1a python configure.py make make install \u7f16\u8bd1pyqt #\u5982\u679cqt\u5b89\u88c5\u540e\u6ca1\u6709\u52a0\u5165\u73af\u5883\u53d8\u91cf\uff0c\u6307\u5b9aqmake\u8def\u5f84 python configure.py --qmake /Users/far/Qt5.5.1/5.5/clang_64/bin/qmake make make install \u7f16\u8bd1\u5230\u6700\u540e\u4f1a\u62a5\u9519\u627e\u4e0d\u5230qpeolocation.h\uff0c\u89e3\u51b3\u529e\u6cd5\u662f\u4ecegithub\u4e0a\u4e0b\u8f7d\u4e00\u4e2a\u5934\u6587\u4ef6\u5230PyQt-gpl-5.5.1/QtPositioning/qgeolocation.h\uff0c \u5730\u5740 \u5de5\u5177\u914d\u7f6e pycharm\u7834\u89e3 \u6ce8\u518c\u65f6\u9009\u62e9\u5728\u7ebf\u670d\u52a1\u5668\u6ce8\u518c\uff0c\u586b\u5165: http://idea.lanyus.com/ \u914d\u7f6epycharm \u914d\u7f6eqtdesigner\u5de5\u5177,\u7528qtdesigner\u6253\u5f00 .ui \u6587\u4ef6 \u914d\u7f6epyuic\u5de5\u5177,\u5c06 .ui \u6587\u4ef6\u8f6c\u6362\u6210 .py \u6587\u4ef6 \u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u7684\u5916\u7f6e\u5de5\u5177\u6765\u7f16\u8f91 .ui \u6587\u4ef6\u4e86 \u5f00\u59cb\u6109\u5feb\u5730\u5199\u4ee3\u7801 http://zetcode.com/gui/pyqt5/introduction/ #!/usr/bin/env python # -*- coding: utf-8 -*- # @Author: anchen # @Date: 2015-07-27 20:19:33 # @Last Modified by: anchen # @Last Modified time: 2015-07-27 20:26:29 import sys from PyQt5.QtWidgets import QApplication , QWidget from PyQt5.QtGui import QIcon if __name__ == __main__ : app = QApplication ( sys . argv ) w = QWidget () w . resize ( 250 , 150 ) w . move ( 300 , 300 ) w . setWindowTitle ( simpel window ) w . setWindowIcon ( QIcon ( icon.png )) w . show () sys . exit ( app . exec_ ())","title":"pyqt\u4f7f\u7528"},{"location":"python/py_qt/#pyqt","text":"","title":"\u5f00\u59cb\u7528pyqt\u9020\u7a97\u4f53"},{"location":"python/py_qt/#_1","text":"qt5.5.1 python3.4 pyqt pycharm qt designer","title":"\u4f9d\u8d56\u73af\u5883"},{"location":"python/py_qt/#_2","text":"windows\u4e0b\u7684\u5b89\u88c5\u8fc7\u7a0b\u5c31\u4e0d\u518d\u7d2f\u8d58\u4e86\uff0c\u8bb2\u4e0bmac\u4e0b\u7684pyqt\u5b89\u88c5 \u9996\u5148\u5b89\u88c5 sip #sip\u5b89\u88c5\uff1a python configure.py make make install \u7f16\u8bd1pyqt #\u5982\u679cqt\u5b89\u88c5\u540e\u6ca1\u6709\u52a0\u5165\u73af\u5883\u53d8\u91cf\uff0c\u6307\u5b9aqmake\u8def\u5f84 python configure.py --qmake /Users/far/Qt5.5.1/5.5/clang_64/bin/qmake make make install \u7f16\u8bd1\u5230\u6700\u540e\u4f1a\u62a5\u9519\u627e\u4e0d\u5230qpeolocation.h\uff0c\u89e3\u51b3\u529e\u6cd5\u662f\u4ecegithub\u4e0a\u4e0b\u8f7d\u4e00\u4e2a\u5934\u6587\u4ef6\u5230PyQt-gpl-5.5.1/QtPositioning/qgeolocation.h\uff0c \u5730\u5740","title":"\u5b89\u88c5"},{"location":"python/py_qt/#_3","text":"pycharm\u7834\u89e3 \u6ce8\u518c\u65f6\u9009\u62e9\u5728\u7ebf\u670d\u52a1\u5668\u6ce8\u518c\uff0c\u586b\u5165: http://idea.lanyus.com/ \u914d\u7f6epycharm \u914d\u7f6eqtdesigner\u5de5\u5177,\u7528qtdesigner\u6253\u5f00 .ui \u6587\u4ef6 \u914d\u7f6epyuic\u5de5\u5177,\u5c06 .ui \u6587\u4ef6\u8f6c\u6362\u6210 .py \u6587\u4ef6 \u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u7684\u5916\u7f6e\u5de5\u5177\u6765\u7f16\u8f91 .ui \u6587\u4ef6\u4e86","title":"\u5de5\u5177\u914d\u7f6e"},{"location":"python/py_qt/#_4","text":"http://zetcode.com/gui/pyqt5/introduction/ #!/usr/bin/env python # -*- coding: utf-8 -*- # @Author: anchen # @Date: 2015-07-27 20:19:33 # @Last Modified by: anchen # @Last Modified time: 2015-07-27 20:26:29 import sys from PyQt5.QtWidgets import QApplication , QWidget from PyQt5.QtGui import QIcon if __name__ == __main__ : app = QApplication ( sys . argv ) w = QWidget () w . resize ( 250 , 150 ) w . move ( 300 , 300 ) w . setWindowTitle ( simpel window ) w . setWindowIcon ( QIcon ( icon.png )) w . show () sys . exit ( app . exec_ ())","title":"\u5f00\u59cb\u6109\u5feb\u5730\u5199\u4ee3\u7801"},{"location":"python/py_scope/","text":"python \u53d8\u91cf\u4f5c\u7528\u57df \u4f5c\u7528\u57df \u4f5c\u7528\u57df\uff08scope\uff0c\u6216\u8bd1\u4f5c\u6709\u6548\u8303\u56f4\uff09\u662f\u540d\u5b57\uff08name\uff09\u4e0e\u5b9e\u4f53\uff08entity\uff09\u7684\u7ed1\u5b9a\uff08binding\uff09\u4fdd\u6301\u6709\u6548\u7684\u90a3\u90e8\u5206\u8ba1\u7b97\u673a\u7a0b\u5e8f\u3002\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u4f5c\u7528\u57df\u548c\u540d\u5b57\u89e3\u6790 \u9759\u6001\u8bed\u8a00\uff08 C \u3001 Java \u3001 C# \u7b49\uff09\uff0c\u52a8\u6001\u8bed\u8a00( lua ) \u5177\u6709\u5757\u7ea7\u522b\uff08block level\uff0c\u5305\u542bif\u3001while\u3001for\u3001switch\u3001\u51fd\u6570\u7b49\uff09\u7684\u53d8\u91cf\u4f5c\u7528\u57df\uff1b \u52a8\u6001\u8bed\u8a00( Javascript \u3001 Python \u3001 Ruby )\u53ea\u5177\u6709\u51fd\u6570\u7ea7\u522b\uff08function level\uff09\u7684\u53d8\u91cf\u4f5c\u7528\u57df lua \u5757\u7ea7\u4f5c\u7528\u57df\u6f14\u793a: local function t1 ( ) if true then local i = 1 print ( block value , i ) end print ( has value: , i ) end t1 () --[[ block value 1 has value: nil ]] \u5728\u6267\u884c if \u4ee3\u7801\u5757\u65f6\uff0c\u4f1a\u65b0\u521b\u5efa\u4e00\u4e2a\u73af\u5883\uff08\u79f0\u4e3aE1\uff0c\u5176\u5916\u56f4\u73af\u5883\u4e3a\u5168\u5c40\u73af\u5883E0\u3002\u89c1\u4e0b\u56fe\uff09\uff0c\u7136\u540e\u5728 E1 \u4e2d\u5b9a\u4e49\u53d8\u91cfi\uff0c\u5728 if \u4ee3\u7801\u5757\u7ed3\u675f\u540e\uff0cE1 \u8fd9\u4e2a\u73af\u5883\u5c31\u4f1a\u88ab\u5220\u9664\uff0c\u8fd9\u65f6 main \u51fd\u6570\u540e\u9762\u7684\u7a0b\u5e8f\u5c31\u65e0\u6cd5\u8bbf\u95ee if \u4ee3\u7801\u5757\u7684\u53d8\u91cf\u4e86\u3002 \u800c python \u4e2d\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df, if \u4ee3\u7801\u5757\u548c\u5168\u5c40\u73af\u5883\u5171\u7528 def t1 (): if True : i = 1 print ( block value , i ) print ( has value: , i ) t1 () ( block value , 1) ( has value: , 1) \u53d8\u91cf\u7684\u52a8\u6001\u4f5c\u7528\u57df(dynamic scope)\u548c\u9759\u6001\u4f5c\u7528\u57df(static scope) \u8fd9\u91cc\u7684\u52a8\u6001\u4f5c\u7528\u57df\u548c\u9759\u6001\u4f5c\u7528\u57df\u662f\u6307\u7684\u53d8\u91cf\u4f5c\u7528\u57df\uff0c\u8981\u548c\u9759\u6001\u52a8\u6001\u8bed\u8a00\u533a\u53e6\u5206\u6765 \u5f15\u7528 wiki : \u9759\u6001\u4f5c\u7528\u57df\u53c8\u53eb\u505a\u8bcd\u6cd5\u4f5c\u7528\u57df(lexical scoping)\uff0c\u91c7\u7528\u8bcd\u6cd5\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u53eb\u8bcd\u6cd5\u53d8\u91cf\u3002\u8bcd\u6cd5\u53d8\u91cf\u6709\u4e00\u4e2a\u5728\u7f16\u8bd1\u65f6\u9759\u6001\u786e\u5b9a\u7684\u4f5c\u7528\u57df\u3002\u8bcd\u6cd5\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u6216\u4e00\u6bb5\u4ee3\u7801\uff0c\u8be5\u53d8\u91cf\u5728\u8fd9\u6bb5\u4ee3\u7801\u533a\u57df\u5185\u53ef\u89c1\uff08visibility\uff09\uff1b\u5728\u8fd9\u6bb5\u533a\u57df\u4ee5\u5916\u8be5\u53d8\u91cf\u4e0d\u53ef\u89c1\uff08\u6216\u65e0\u6cd5\u8bbf\u95ee\uff09\u3002\u8bcd\u6cd5\u4f5c\u7528\u57df\u91cc\uff0c\u53d6\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u4f1a\u68c0\u67e5\u51fd\u6570\u5b9a\u4e49\u65f6\u7684\u6587\u672c\u73af\u5883\uff0c\u6355\u6349\u51fd\u6570\u5b9a\u4e49\u65f6\u5bf9\u8be5\u53d8\u91cf\u7684\u7ed1\u5b9a\u3002 \u76f8\u53cd\uff0c\u91c7\u7528\u52a8\u6001\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u53eb\u505a\u52a8\u6001\u53d8\u91cf\u3002\u53ea\u8981\u7a0b\u5e8f\u6b63\u5728\u6267\u884c\u5b9a\u4e49\u4e86\u52a8\u6001\u53d8\u91cf\u7684\u4ee3\u7801\u6bb5\uff0c\u90a3\u4e48\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\uff0c\u8be5\u53d8\u91cf\u4e00\u76f4\u5b58\u5728\uff1b\u4ee3\u7801\u6bb5\u6267\u884c\u7ed3\u675f\uff0c\u8be5\u53d8\u91cf\u4fbf\u6d88\u5931\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u6709\u4e2a\u51fd\u6570f\uff0c\u91cc\u9762\u8c03\u7528\u4e86\u51fd\u6570g\uff0c\u90a3\u4e48\u5728\u6267\u884cg\u7684\u65f6\u5019\uff0cf\u91cc\u7684\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u90fd\u4f1a\u88abg\u8bbf\u95ee\u5230\u3002\u800c\u5728\u9759\u6001\u4f5c\u7528\u57df\u7684\u60c5\u51b5\u4e0b\uff0cg\u4e0d\u80fd\u8bbf\u95eef\u7684\u53d8\u91cf\u3002\u52a8\u6001\u4f5c\u7528\u57df\u91cc\uff0c\u53d6\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u4f1a\u7531\u5185\u5411\u5916\u9010\u5c42\u68c0\u67e5\u51fd\u6570\u7684\u8c03\u7528\u94fe\uff0c\u5e76\u6253\u5370\u7b2c\u4e00\u6b21\u9047\u5230\u7684\u90a3\u4e2a\u7ed1\u5b9a\u7684\u503c\u3002\u663e\u7136\uff0c\u6700\u5916\u5c42\u7684\u7ed1\u5b9a\u5373\u662f\u5168\u5c40\u72b6\u6001\u4e0b\u7684\u90a3\u4e2a\u503c\u3002 \u5927\u591a\u6570\u73b0\u5728\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u90fd\u662f\u91c7\u7528\u9759\u6001\u4f5c\u7528\u57df\u89c4\u5219\uff0c\u5982C/C++\u3001C#\u3001Python\u3001Java\u3001JavaScript\u3001Lua \u91c7\u7528\u52a8\u6001\u4f5c\u7528\u57df\u7684\u8bed\u8a00\u6709Pascal\u3001Emacs Lisp\u3001Common Lisp\uff08\u517c\u6709\u9759\u6001\u4f5c\u7528\u57df\uff09\u3001Perl\uff08\u517c\u6709\u9759\u6001\u4f5c\u7528\u57df\uff09\u3002C/C++\u662f\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u5728\u5b8f\u4e2d\u7528\u5230\u7684\u540d\u5b57\uff0c\u4e5f\u662f\u52a8\u6001\u4f5c\u7528\u57df\u3002 // start pseudo-code var y = global ; function print_y () { console . log ( y ); } function test_scope () { var y = local ; print_y (); } test_scope (); // statically scoped languages print global // dynamically languages print local print_y (); // all languages should print global // end pseudo-code \u4e0a\u9762\u7684 js \u4ee3\u7801\u662f statically scoped \u6240\u4ee5 print_y \u4e2d\u7684 y \u5728\u8fd0\u884c\u524d\u5df2\u7ecf\u786e\u5b9a\u4e86\u503c\u4e3a\u5168\u5c40\u53d8\u91cf global ,\u5728 test_scope \u4e2d\u91cd\u65b0\u5b9a\u4e49 var y = \"local\" \u5e76\u4e0d\u80fd\u6539\u53d8 print_y \u4f5c\u7528\u57df\u7684 y \u503c\u3002\u6240\u4ee5\u8f93\u51fa\u662f\u4e24\u4e2a global . \u5982\u679c\u6362\u4f5c\u662f Lip \u8fd9\u6837\u7684 dynamic scope \u60c5\u51b5\u4f1a\u53d1\u751f\u53d8\u5316: test_scope \u4e2d\u7684\u91cd\u65b0\u5b9a\u4e49\u4f1a\u5728\u8fd0\u884c\u65f6\u624d\u786e\u5b9a print_y \u4e2d\u7684 y \u503c,\u6700\u7ec8\u4f1a\u8f93\u51fa local , global python \u9759\u6001\u4f5c\u7528\u57df: y = global def print_y (): print ( y ) def redefine_y (): y = local print_y () redefine_y () print ( y ) global global lua \u9759\u6001\u4f5c\u7528\u57df: local y = gloal local function print_y ( ) print ( y ) end local function redefine_y ( ) local y = local print_y () end redefine_y () print ( y ) --[[ global global ]] (\u53d8\u91cf\u63d0\u5347)hoisting x = 2 def foo (): print ( x ) x = 5 \u4e0a\u9762\u7684python\u4ee3\u7801\u6309\u6211\u4eec\u7684\u6b63\u5e38\u601d\u7ef4\u4f1a\u8f93\u51fa 2 \uff0c\u5b9e\u9645\u4e0a\u4f1a\u62a5\u9519 UnboundLocalError: local variable 'x' referenced before assignment \u8fd9\u79cd\u884c\u4e3a\u548cjavascript\u7684 Hoisting(\u53d8\u91cf\u63d0\u5347) \u6709\u70b9\u7c7b\u4f3c. \u6211\u4eec\u53ef\u4ee5\u6765\u770b\u4e00\u6bb5js\u4ee3\u7801: var x = 2 ; function foo (){ console . log ( x ); var x = 5 ; } \u6309\u6b63\u5e38\u7684\u903b\u8f91\u6765\u8bf4\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u8f93\u51fa 2 \u624d\u5bf9,\u7136\u800c\u5e76\u6ca1\u6709,\u8f93\u51fa\u662f undefined \u4e0a\u9762\u7684\u4ee3\u7801\u53d1\u751f\u4e86\u4ec0\u4e48: var x = 2 ; function foo (){ var x // \u53d8\u91cf\u63d0\u5347 console . log ( x ); var x = 5 ; } \u5176\u5b9e\u662f\u56e0\u4e3a\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\u65f6\u53d8\u91cf\u58f0\u660e\u4f1a\u63d0\u524d\u5230\u51fd\u6570\u7b2c\u4e00\u884c,\u800c\u6309\u53d8\u91cf\u57df\u641c\u7d22\u8def\u5f84\u5c40\u90e8\u53d8\u91cf\u7684 x \u4f18\u5148\u7ea7\u9ad8\u4e86 var x=2 \u6240\u4ee5\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002 python \u7684\u884c\u4e3a\u4e5f\u662f\u540c\u7406 hositing\u8bbe\u8ba1\u7684\u521d\u8877: \u8fd9\u8981\u8ffd\u6eaf\u5230 Javascript \u8bed\u8a00\u8bbe\u8ba1\u8005\u7684\u521d\u8877\u4e86\uff0cBrendan Eich \u5728\u521b\u9020\u8fd9\u95e8\u4e16\u754c\u7ea7\u8bed\u8a00\u65f6\uff0c\u4e00\u5f00\u59cb\u6253\u7b97\u7528 Scheme \u7684\u601d\u60f3\u6765\u5b9e\u73b0\uff0c\u800c\u4e14\u5f53\u65f6 Brendan \u4e5f\u662f\u5728\u770b SICP \u8fd9\u672c\u4e66\uff0cSICP 4.1.6 \u5728\u4ecb\u7ecd\u5185\u90e8\u5b9a\u4e49\u65f6\uff0c\u7ed9\u51fa\u4e86\u89e3\u51b3\u53d8\u91cf\u540c\u4e00\u65f6\u523b\u5b9a\u4e49\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u5f0f\uff1a\u5c06\u6240\u6709\u7684\u53d8\u91cf\u540d\u63d0\u524d\u3002\u8fd9\u6837\u540c\u4e00\u73af\u5883\u4e2d\u7684\u5176\u4ed6\u5730\u65b9\u5c31\u80fd\u591f\u4f7f\u7528\u6240\u6709\u7684\u5b9a\u4e49\u4e86\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u53ea\u662f\u5c06\u53d8\u91cf\u540d\u63d0\u524d\uff0c\u8d4b\u503c\u7684\u52a8\u4f5c\u4e0d\u53d8\uff0c\u663e\u7136\uff0cJavascript \u91c7\u7528\u4e86\u8fd9\u4e00\u601d\u60f3\uff08\u8fd9\u5176\u5b9e\u662fforward_declaration \u6280\u672f\u7684\u4e00\u79cd\u5b9e\u73b0\u624b\u6bb5\uff09 Python \u4e2d\u7684\u53d8\u91cf\u4f5c\u7528\u57df \u51c6\u786e\u6765\u8bf4\uff0cPython \u91cc\u9762\u6709\u56db\u79cd\u4f5c\u7528\u57df\uff1a function , module , global \u548c class \u4f5c\u7528\u57df\u3002\u7531\u4e8e Python \u4e0d\u533a\u5206\u53d8\u91cf\u7684\u58f0\u660e\uff0c\u6240\u4ee5\u5728\u7b2c\u4e00\u6b21\u521d\u59cb\u5316\u53d8\u91cf\u65f6\uff08\u5fc5\u987b\u4e3a\u8d4b\u503c\u64cd\u4f5c\uff09\u5c06\u53d8\u91cf\u52a0\u5165\u5f53\u524d\u73af\u5883\u4e2d\u3002\u5982\u679c\u5728\u6ca1\u5bf9\u53d8\u91cf\u8fdb\u884c\u521d\u59cb\u5316\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u8be5\u53d8\u91cf\u5c31\u4f1a\u62a5\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u4f46\u5982\u679c\u4ec5\u4ec5\u662f\u8bbf\u95ee\uff08\u5e76\u4e0d\u8d4b\u503c\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u67e5\u627e\u53d8\u91cf\u7684\u987a\u5e8f\u4f1a\u6309\u7167 LEGB \u89c4\u5219 (Local, Enclosing, Global, Built-in) python\u80fd\u591f\u6539\u53d8\u53d8\u91cf\u4f5c\u7528\u57df\u7684\u4ee3\u7801\u6bb5\u662fdef\u3001class\u3001lamda s = hello def foo (): s += world return s foo () # UnboundLocalError: local variable s referenced before assignment \u7531\u4e8e\u5728\u51fd\u6570 foo \u4e2d\u5728\u6ca1\u6709\u5bf9 s \u521d\u59cb\u5316\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u4e86\u8be5\u503c\uff0c\u6240\u4ee5\u8fd9\u91cc\u4f1a\u62a5\u5f02\u5e38\uff0c\u89e3\u51b3\u7684\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 global \u5173\u952e\u5b57\uff1a s = hello def foo (): global s s += world return s foo () # return hello world \u4f46\u7531\u4e8e global \u5173\u952e\u5b57\u53ea\u80fd\u9650\u5b9a\u5728global\u4f5c\u7528\u57df\u5185\u67e5\u627e\u53d8\u91cf\uff0c\u5728\u6709\u5d4c\u5957\u5b9a\u4e49\u7684\u65f6\u5019\u5c31\u6709\u95ee\u9898\u4e86\uff0c\u6bd4\u5982\uff1a def foo (): s = hello def bar (): global s # NameError: global name s is not defined s += world return s return bar foo ()() Python 3 \u4e2d\u5f15\u5165\u4e86 nonlocal \u5173\u952e\u5b57\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\uff1a def foo (): s = hello def bar (): nonlocal s s += world return s return bar foo ()() # return hello world \u5728 Python 2 \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165\u4e00\u53ef\u53d8\u5bb9\u5668\u89e3\u51b3\uff08\u5176\u5b9e\u5c31\u662f\u7ed5\u8fc7\u76f4\u63a5\u4fee\u6539 s \u7684\u503c\uff09 def foo (): s = [ hello ] def bar (): s [ 0 ] += world return s [ 0 ] return bar foo ()() # return hello world \u7c7b\u7ea7\u522b\u4f5c\u7528\u57df class Foo ( object ): username = Foo def say_hello ( self ): print Hello %s % username foo = Foo () foo . say_hello () # NameError: global name username is not defined username\u662f\u5b9a\u4e49\u5728Foo\u7c7b\u7ea7\u522b\u7684\uff0c\u5185\u90e8\u7684say_hello\u65b9\u6cd5\u5728\u67e5\u627e\u81ea\u7531\u53d8\u91cfusername\u7684\u4f5c\u7528\u57df\u4f1a\u6309\u7167\u4e0a\u9762\u8bf4\u7684LEGB \u89c4\u5219 (Local, Enclosing, Global, Built-in)\uff0c\u5e76\u4e0d\u4f1a\u53bb\u67e5\u627e\u7c7b\u7ea7\u522b\u4f5c\u7528\u57df\u7684\u53d8\u91cf\uff0c\u6240\u6709\u8fd9\u91cc\u4f1a\u62a5\u9519\u3002\u4fee\u6539\u7684\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff1a def say_hello ( self ): print Hello %s % Foo . username \u53ef\u4ee5\u770b\u5230\uff0cPython \u5728\u8bd5\u56fe\u7701\u7565\u6389\u53d8\u91cf\u58f0\u660e\u7684\u540c\u65f6\uff0c\u53cd\u800c\u9020\u6210\u4e86\u66f4\u590d\u6742\u7684\u60c5\u51b5\uff0c\u76f8\u5173\u8ba8\u8bba\u5728 Python mail-list \u91cc\u9762\u8ba8\u8bba\u4e5f\u5f88\u706b\u70ed\uff0c\u6709\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\uff1a PEP 3104 \u2014 Access to Names in Outer Scopes \u4f5c\u7528\u57df\u6f14\u793a name = global name class Man ( object ): name = class name docstring for Man def __init__ ( self ): super ( Man , self ) . __init__ () self . name = self name def sayName ( self ): print ( Man . name ) print ( self . name ) # print(name) name = local name print ( name ) def doaction (): man = Man () man . sayName () print ( name ) doaction () class name self name local name global name \u95ed\u5305 function add ( x ) { return function ( y ) { return x + y ; } } var add3 = add ( 3 ); alert ( add3 ( 4 )); // return 7 \u8fd9\u91cc\u7684add3\u5c31\u662f\u4e00\u95ed\u5305\u5bf9\u8c61\uff0c\u5b83\u5305\u62ec\u4e24\u90e8\u5206\uff0c\u4e00\u4e2a\u51fd\u6570\u4e0e\u58f0\u660e\u51fd\u6570\u65f6\u7684\u73af\u5883\u3002\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u6838\u5fc3\uff0c\u6ca1\u6709\u4efb\u4f55\u795e\u5947\u7684\u5730\u65b9\uff0c\u95ed\u5305\u5c31\u662f\u89e3\u51b3\u81ea\u7531\u53d8\u91cf\u53d8\u91cf\u4f5c\u7528\u57df\u7684\u95ee\u9898\u3002 \u53c2\u8003 : https://en.wikipedia.org/wiki/Scope_(computer_science) https://segmentfault.com/a/1190000003114255 http://liujiacai.net/blog/2016/05/28/scope-closure/ http://www.cnblogs.com/isaboy/p/javascript_function.html http://magicalboy.com/python-scope-legb/ https://blog.mozilla.org/webdev/2011/01/31/python-scoping-understanding-legb/","title":"\u53d8\u91cf\u4f5c\u7528\u57df"},{"location":"python/py_scope/#python","text":"","title":"python \u53d8\u91cf\u4f5c\u7528\u57df"},{"location":"python/py_scope/#_1","text":"\u4f5c\u7528\u57df\uff08scope\uff0c\u6216\u8bd1\u4f5c\u6709\u6548\u8303\u56f4\uff09\u662f\u540d\u5b57\uff08name\uff09\u4e0e\u5b9e\u4f53\uff08entity\uff09\u7684\u7ed1\u5b9a\uff08binding\uff09\u4fdd\u6301\u6709\u6548\u7684\u90a3\u90e8\u5206\u8ba1\u7b97\u673a\u7a0b\u5e8f\u3002\u4e0d\u540c\u7684\u7f16\u7a0b\u8bed\u8a00\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u4f5c\u7528\u57df\u548c\u540d\u5b57\u89e3\u6790 \u9759\u6001\u8bed\u8a00\uff08 C \u3001 Java \u3001 C# \u7b49\uff09\uff0c\u52a8\u6001\u8bed\u8a00( lua ) \u5177\u6709\u5757\u7ea7\u522b\uff08block level\uff0c\u5305\u542bif\u3001while\u3001for\u3001switch\u3001\u51fd\u6570\u7b49\uff09\u7684\u53d8\u91cf\u4f5c\u7528\u57df\uff1b \u52a8\u6001\u8bed\u8a00( Javascript \u3001 Python \u3001 Ruby )\u53ea\u5177\u6709\u51fd\u6570\u7ea7\u522b\uff08function level\uff09\u7684\u53d8\u91cf\u4f5c\u7528\u57df lua \u5757\u7ea7\u4f5c\u7528\u57df\u6f14\u793a: local function t1 ( ) if true then local i = 1 print ( block value , i ) end print ( has value: , i ) end t1 () --[[ block value 1 has value: nil ]] \u5728\u6267\u884c if \u4ee3\u7801\u5757\u65f6\uff0c\u4f1a\u65b0\u521b\u5efa\u4e00\u4e2a\u73af\u5883\uff08\u79f0\u4e3aE1\uff0c\u5176\u5916\u56f4\u73af\u5883\u4e3a\u5168\u5c40\u73af\u5883E0\u3002\u89c1\u4e0b\u56fe\uff09\uff0c\u7136\u540e\u5728 E1 \u4e2d\u5b9a\u4e49\u53d8\u91cfi\uff0c\u5728 if \u4ee3\u7801\u5757\u7ed3\u675f\u540e\uff0cE1 \u8fd9\u4e2a\u73af\u5883\u5c31\u4f1a\u88ab\u5220\u9664\uff0c\u8fd9\u65f6 main \u51fd\u6570\u540e\u9762\u7684\u7a0b\u5e8f\u5c31\u65e0\u6cd5\u8bbf\u95ee if \u4ee3\u7801\u5757\u7684\u53d8\u91cf\u4e86\u3002 \u800c python \u4e2d\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df, if \u4ee3\u7801\u5757\u548c\u5168\u5c40\u73af\u5883\u5171\u7528 def t1 (): if True : i = 1 print ( block value , i ) print ( has value: , i ) t1 () ( block value , 1) ( has value: , 1)","title":"\u4f5c\u7528\u57df"},{"location":"python/py_scope/#dynamic-scopestatic-scope","text":"\u8fd9\u91cc\u7684\u52a8\u6001\u4f5c\u7528\u57df\u548c\u9759\u6001\u4f5c\u7528\u57df\u662f\u6307\u7684\u53d8\u91cf\u4f5c\u7528\u57df\uff0c\u8981\u548c\u9759\u6001\u52a8\u6001\u8bed\u8a00\u533a\u53e6\u5206\u6765 \u5f15\u7528 wiki : \u9759\u6001\u4f5c\u7528\u57df\u53c8\u53eb\u505a\u8bcd\u6cd5\u4f5c\u7528\u57df(lexical scoping)\uff0c\u91c7\u7528\u8bcd\u6cd5\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u53eb\u8bcd\u6cd5\u53d8\u91cf\u3002\u8bcd\u6cd5\u53d8\u91cf\u6709\u4e00\u4e2a\u5728\u7f16\u8bd1\u65f6\u9759\u6001\u786e\u5b9a\u7684\u4f5c\u7528\u57df\u3002\u8bcd\u6cd5\u53d8\u91cf\u7684\u4f5c\u7528\u57df\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u6216\u4e00\u6bb5\u4ee3\u7801\uff0c\u8be5\u53d8\u91cf\u5728\u8fd9\u6bb5\u4ee3\u7801\u533a\u57df\u5185\u53ef\u89c1\uff08visibility\uff09\uff1b\u5728\u8fd9\u6bb5\u533a\u57df\u4ee5\u5916\u8be5\u53d8\u91cf\u4e0d\u53ef\u89c1\uff08\u6216\u65e0\u6cd5\u8bbf\u95ee\uff09\u3002\u8bcd\u6cd5\u4f5c\u7528\u57df\u91cc\uff0c\u53d6\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u4f1a\u68c0\u67e5\u51fd\u6570\u5b9a\u4e49\u65f6\u7684\u6587\u672c\u73af\u5883\uff0c\u6355\u6349\u51fd\u6570\u5b9a\u4e49\u65f6\u5bf9\u8be5\u53d8\u91cf\u7684\u7ed1\u5b9a\u3002 \u76f8\u53cd\uff0c\u91c7\u7528\u52a8\u6001\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u53eb\u505a\u52a8\u6001\u53d8\u91cf\u3002\u53ea\u8981\u7a0b\u5e8f\u6b63\u5728\u6267\u884c\u5b9a\u4e49\u4e86\u52a8\u6001\u53d8\u91cf\u7684\u4ee3\u7801\u6bb5\uff0c\u90a3\u4e48\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\uff0c\u8be5\u53d8\u91cf\u4e00\u76f4\u5b58\u5728\uff1b\u4ee3\u7801\u6bb5\u6267\u884c\u7ed3\u675f\uff0c\u8be5\u53d8\u91cf\u4fbf\u6d88\u5931\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u6709\u4e2a\u51fd\u6570f\uff0c\u91cc\u9762\u8c03\u7528\u4e86\u51fd\u6570g\uff0c\u90a3\u4e48\u5728\u6267\u884cg\u7684\u65f6\u5019\uff0cf\u91cc\u7684\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u90fd\u4f1a\u88abg\u8bbf\u95ee\u5230\u3002\u800c\u5728\u9759\u6001\u4f5c\u7528\u57df\u7684\u60c5\u51b5\u4e0b\uff0cg\u4e0d\u80fd\u8bbf\u95eef\u7684\u53d8\u91cf\u3002\u52a8\u6001\u4f5c\u7528\u57df\u91cc\uff0c\u53d6\u53d8\u91cf\u7684\u503c\u65f6\uff0c\u4f1a\u7531\u5185\u5411\u5916\u9010\u5c42\u68c0\u67e5\u51fd\u6570\u7684\u8c03\u7528\u94fe\uff0c\u5e76\u6253\u5370\u7b2c\u4e00\u6b21\u9047\u5230\u7684\u90a3\u4e2a\u7ed1\u5b9a\u7684\u503c\u3002\u663e\u7136\uff0c\u6700\u5916\u5c42\u7684\u7ed1\u5b9a\u5373\u662f\u5168\u5c40\u72b6\u6001\u4e0b\u7684\u90a3\u4e2a\u503c\u3002 \u5927\u591a\u6570\u73b0\u5728\u7a0b\u5e8f\u8bbe\u8ba1\u8bed\u8a00\u90fd\u662f\u91c7\u7528\u9759\u6001\u4f5c\u7528\u57df\u89c4\u5219\uff0c\u5982C/C++\u3001C#\u3001Python\u3001Java\u3001JavaScript\u3001Lua \u91c7\u7528\u52a8\u6001\u4f5c\u7528\u57df\u7684\u8bed\u8a00\u6709Pascal\u3001Emacs Lisp\u3001Common Lisp\uff08\u517c\u6709\u9759\u6001\u4f5c\u7528\u57df\uff09\u3001Perl\uff08\u517c\u6709\u9759\u6001\u4f5c\u7528\u57df\uff09\u3002C/C++\u662f\u9759\u6001\u4f5c\u7528\u57df\u8bed\u8a00\uff0c\u4f46\u5728\u5b8f\u4e2d\u7528\u5230\u7684\u540d\u5b57\uff0c\u4e5f\u662f\u52a8\u6001\u4f5c\u7528\u57df\u3002 // start pseudo-code var y = global ; function print_y () { console . log ( y ); } function test_scope () { var y = local ; print_y (); } test_scope (); // statically scoped languages print global // dynamically languages print local print_y (); // all languages should print global // end pseudo-code \u4e0a\u9762\u7684 js \u4ee3\u7801\u662f statically scoped \u6240\u4ee5 print_y \u4e2d\u7684 y \u5728\u8fd0\u884c\u524d\u5df2\u7ecf\u786e\u5b9a\u4e86\u503c\u4e3a\u5168\u5c40\u53d8\u91cf global ,\u5728 test_scope \u4e2d\u91cd\u65b0\u5b9a\u4e49 var y = \"local\" \u5e76\u4e0d\u80fd\u6539\u53d8 print_y \u4f5c\u7528\u57df\u7684 y \u503c\u3002\u6240\u4ee5\u8f93\u51fa\u662f\u4e24\u4e2a global . \u5982\u679c\u6362\u4f5c\u662f Lip \u8fd9\u6837\u7684 dynamic scope \u60c5\u51b5\u4f1a\u53d1\u751f\u53d8\u5316: test_scope \u4e2d\u7684\u91cd\u65b0\u5b9a\u4e49\u4f1a\u5728\u8fd0\u884c\u65f6\u624d\u786e\u5b9a print_y \u4e2d\u7684 y \u503c,\u6700\u7ec8\u4f1a\u8f93\u51fa local , global python \u9759\u6001\u4f5c\u7528\u57df: y = global def print_y (): print ( y ) def redefine_y (): y = local print_y () redefine_y () print ( y ) global global lua \u9759\u6001\u4f5c\u7528\u57df: local y = gloal local function print_y ( ) print ( y ) end local function redefine_y ( ) local y = local print_y () end redefine_y () print ( y ) --[[ global global ]]","title":"\u53d8\u91cf\u7684\u52a8\u6001\u4f5c\u7528\u57df(dynamic scope)\u548c\u9759\u6001\u4f5c\u7528\u57df(static scope)"},{"location":"python/py_scope/#hoisting","text":"x = 2 def foo (): print ( x ) x = 5 \u4e0a\u9762\u7684python\u4ee3\u7801\u6309\u6211\u4eec\u7684\u6b63\u5e38\u601d\u7ef4\u4f1a\u8f93\u51fa 2 \uff0c\u5b9e\u9645\u4e0a\u4f1a\u62a5\u9519 UnboundLocalError: local variable 'x' referenced before assignment \u8fd9\u79cd\u884c\u4e3a\u548cjavascript\u7684 Hoisting(\u53d8\u91cf\u63d0\u5347) \u6709\u70b9\u7c7b\u4f3c. \u6211\u4eec\u53ef\u4ee5\u6765\u770b\u4e00\u6bb5js\u4ee3\u7801: var x = 2 ; function foo (){ console . log ( x ); var x = 5 ; } \u6309\u6b63\u5e38\u7684\u903b\u8f91\u6765\u8bf4\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u8f93\u51fa 2 \u624d\u5bf9,\u7136\u800c\u5e76\u6ca1\u6709,\u8f93\u51fa\u662f undefined \u4e0a\u9762\u7684\u4ee3\u7801\u53d1\u751f\u4e86\u4ec0\u4e48: var x = 2 ; function foo (){ var x // \u53d8\u91cf\u63d0\u5347 console . log ( x ); var x = 5 ; } \u5176\u5b9e\u662f\u56e0\u4e3a\u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df\u65f6\u53d8\u91cf\u58f0\u660e\u4f1a\u63d0\u524d\u5230\u51fd\u6570\u7b2c\u4e00\u884c,\u800c\u6309\u53d8\u91cf\u57df\u641c\u7d22\u8def\u5f84\u5c40\u90e8\u53d8\u91cf\u7684 x \u4f18\u5148\u7ea7\u9ad8\u4e86 var x=2 \u6240\u4ee5\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002 python \u7684\u884c\u4e3a\u4e5f\u662f\u540c\u7406 hositing\u8bbe\u8ba1\u7684\u521d\u8877: \u8fd9\u8981\u8ffd\u6eaf\u5230 Javascript \u8bed\u8a00\u8bbe\u8ba1\u8005\u7684\u521d\u8877\u4e86\uff0cBrendan Eich \u5728\u521b\u9020\u8fd9\u95e8\u4e16\u754c\u7ea7\u8bed\u8a00\u65f6\uff0c\u4e00\u5f00\u59cb\u6253\u7b97\u7528 Scheme \u7684\u601d\u60f3\u6765\u5b9e\u73b0\uff0c\u800c\u4e14\u5f53\u65f6 Brendan \u4e5f\u662f\u5728\u770b SICP \u8fd9\u672c\u4e66\uff0cSICP 4.1.6 \u5728\u4ecb\u7ecd\u5185\u90e8\u5b9a\u4e49\u65f6\uff0c\u7ed9\u51fa\u4e86\u89e3\u51b3\u53d8\u91cf\u540c\u4e00\u65f6\u523b\u5b9a\u4e49\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u5f0f\uff1a\u5c06\u6240\u6709\u7684\u53d8\u91cf\u540d\u63d0\u524d\u3002\u8fd9\u6837\u540c\u4e00\u73af\u5883\u4e2d\u7684\u5176\u4ed6\u5730\u65b9\u5c31\u80fd\u591f\u4f7f\u7528\u6240\u6709\u7684\u5b9a\u4e49\u4e86\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u53ea\u662f\u5c06\u53d8\u91cf\u540d\u63d0\u524d\uff0c\u8d4b\u503c\u7684\u52a8\u4f5c\u4e0d\u53d8\uff0c\u663e\u7136\uff0cJavascript \u91c7\u7528\u4e86\u8fd9\u4e00\u601d\u60f3\uff08\u8fd9\u5176\u5b9e\u662fforward_declaration \u6280\u672f\u7684\u4e00\u79cd\u5b9e\u73b0\u624b\u6bb5\uff09","title":"(\u53d8\u91cf\u63d0\u5347)hoisting"},{"location":"python/py_scope/#python_1","text":"\u51c6\u786e\u6765\u8bf4\uff0cPython \u91cc\u9762\u6709\u56db\u79cd\u4f5c\u7528\u57df\uff1a function , module , global \u548c class \u4f5c\u7528\u57df\u3002\u7531\u4e8e Python \u4e0d\u533a\u5206\u53d8\u91cf\u7684\u58f0\u660e\uff0c\u6240\u4ee5\u5728\u7b2c\u4e00\u6b21\u521d\u59cb\u5316\u53d8\u91cf\u65f6\uff08\u5fc5\u987b\u4e3a\u8d4b\u503c\u64cd\u4f5c\uff09\u5c06\u53d8\u91cf\u52a0\u5165\u5f53\u524d\u73af\u5883\u4e2d\u3002\u5982\u679c\u5728\u6ca1\u5bf9\u53d8\u91cf\u8fdb\u884c\u521d\u59cb\u5316\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u8be5\u53d8\u91cf\u5c31\u4f1a\u62a5\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u4f46\u5982\u679c\u4ec5\u4ec5\u662f\u8bbf\u95ee\uff08\u5e76\u4e0d\u8d4b\u503c\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u67e5\u627e\u53d8\u91cf\u7684\u987a\u5e8f\u4f1a\u6309\u7167 LEGB \u89c4\u5219 (Local, Enclosing, Global, Built-in) python\u80fd\u591f\u6539\u53d8\u53d8\u91cf\u4f5c\u7528\u57df\u7684\u4ee3\u7801\u6bb5\u662fdef\u3001class\u3001lamda s = hello def foo (): s += world return s foo () # UnboundLocalError: local variable s referenced before assignment \u7531\u4e8e\u5728\u51fd\u6570 foo \u4e2d\u5728\u6ca1\u6709\u5bf9 s \u521d\u59cb\u5316\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u4e86\u8be5\u503c\uff0c\u6240\u4ee5\u8fd9\u91cc\u4f1a\u62a5\u5f02\u5e38\uff0c\u89e3\u51b3\u7684\u529e\u6cd5\u5c31\u662f\u4f7f\u7528 global \u5173\u952e\u5b57\uff1a s = hello def foo (): global s s += world return s foo () # return hello world \u4f46\u7531\u4e8e global \u5173\u952e\u5b57\u53ea\u80fd\u9650\u5b9a\u5728global\u4f5c\u7528\u57df\u5185\u67e5\u627e\u53d8\u91cf\uff0c\u5728\u6709\u5d4c\u5957\u5b9a\u4e49\u7684\u65f6\u5019\u5c31\u6709\u95ee\u9898\u4e86\uff0c\u6bd4\u5982\uff1a def foo (): s = hello def bar (): global s # NameError: global name s is not defined s += world return s return bar foo ()() Python 3 \u4e2d\u5f15\u5165\u4e86 nonlocal \u5173\u952e\u5b57\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\uff1a def foo (): s = hello def bar (): nonlocal s s += world return s return bar foo ()() # return hello world \u5728 Python 2 \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165\u4e00\u53ef\u53d8\u5bb9\u5668\u89e3\u51b3\uff08\u5176\u5b9e\u5c31\u662f\u7ed5\u8fc7\u76f4\u63a5\u4fee\u6539 s \u7684\u503c\uff09 def foo (): s = [ hello ] def bar (): s [ 0 ] += world return s [ 0 ] return bar foo ()() # return hello world","title":"Python \u4e2d\u7684\u53d8\u91cf\u4f5c\u7528\u57df"},{"location":"python/py_scope/#_2","text":"class Foo ( object ): username = Foo def say_hello ( self ): print Hello %s % username foo = Foo () foo . say_hello () # NameError: global name username is not defined username\u662f\u5b9a\u4e49\u5728Foo\u7c7b\u7ea7\u522b\u7684\uff0c\u5185\u90e8\u7684say_hello\u65b9\u6cd5\u5728\u67e5\u627e\u81ea\u7531\u53d8\u91cfusername\u7684\u4f5c\u7528\u57df\u4f1a\u6309\u7167\u4e0a\u9762\u8bf4\u7684LEGB \u89c4\u5219 (Local, Enclosing, Global, Built-in)\uff0c\u5e76\u4e0d\u4f1a\u53bb\u67e5\u627e\u7c7b\u7ea7\u522b\u4f5c\u7528\u57df\u7684\u53d8\u91cf\uff0c\u6240\u6709\u8fd9\u91cc\u4f1a\u62a5\u9519\u3002\u4fee\u6539\u7684\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff1a def say_hello ( self ): print Hello %s % Foo . username \u53ef\u4ee5\u770b\u5230\uff0cPython \u5728\u8bd5\u56fe\u7701\u7565\u6389\u53d8\u91cf\u58f0\u660e\u7684\u540c\u65f6\uff0c\u53cd\u800c\u9020\u6210\u4e86\u66f4\u590d\u6742\u7684\u60c5\u51b5\uff0c\u76f8\u5173\u8ba8\u8bba\u5728 Python mail-list \u91cc\u9762\u8ba8\u8bba\u4e5f\u5f88\u706b\u70ed\uff0c\u6709\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u53c2\u8003\uff1a PEP 3104 \u2014 Access to Names in Outer Scopes","title":"\u7c7b\u7ea7\u522b\u4f5c\u7528\u57df"},{"location":"python/py_scope/#_3","text":"name = global name class Man ( object ): name = class name docstring for Man def __init__ ( self ): super ( Man , self ) . __init__ () self . name = self name def sayName ( self ): print ( Man . name ) print ( self . name ) # print(name) name = local name print ( name ) def doaction (): man = Man () man . sayName () print ( name ) doaction () class name self name local name global name","title":"\u4f5c\u7528\u57df\u6f14\u793a"},{"location":"python/py_scope/#_4","text":"function add ( x ) { return function ( y ) { return x + y ; } } var add3 = add ( 3 ); alert ( add3 ( 4 )); // return 7 \u8fd9\u91cc\u7684add3\u5c31\u662f\u4e00\u95ed\u5305\u5bf9\u8c61\uff0c\u5b83\u5305\u62ec\u4e24\u90e8\u5206\uff0c\u4e00\u4e2a\u51fd\u6570\u4e0e\u58f0\u660e\u51fd\u6570\u65f6\u7684\u73af\u5883\u3002\u8fd9\u5c31\u662f\u95ed\u5305\u7684\u6838\u5fc3\uff0c\u6ca1\u6709\u4efb\u4f55\u795e\u5947\u7684\u5730\u65b9\uff0c\u95ed\u5305\u5c31\u662f\u89e3\u51b3\u81ea\u7531\u53d8\u91cf\u53d8\u91cf\u4f5c\u7528\u57df\u7684\u95ee\u9898\u3002 \u53c2\u8003 : https://en.wikipedia.org/wiki/Scope_(computer_science) https://segmentfault.com/a/1190000003114255 http://liujiacai.net/blog/2016/05/28/scope-closure/ http://www.cnblogs.com/isaboy/p/javascript_function.html http://magicalboy.com/python-scope-legb/ https://blog.mozilla.org/webdev/2011/01/31/python-scoping-understanding-legb/","title":"\u95ed\u5305"},{"location":"python/py_selenium/","text":"selenium\u7b80\u4ecb Selenium \u7b80\u4ecb Selenium\u662f\u4e00\u4e2a\u7528\u4e8eWeb\u5e94\u7528\u7a0b\u5e8f\u6d4b\u8bd5\u7684\u5de5\u5177\u3002Selenium\u6d4b\u8bd5\u76f4\u63a5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u4e2d\uff0c\u5c31\u50cf\u771f\u6b63\u7684\u7528\u6237\u5728\u64cd\u4f5c\u4e00\u6837\u3002\u652f\u6301\u7684\u6d4f\u89c8\u5668\u5305\u62ecIE\u3001Mozilla Firefox\u3001Mozilla Suite\u7b49\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u4e3b\u8981\u529f\u80fd\u5305\u62ec\uff1a\u6d4b\u8bd5\u4e0e\u6d4f\u89c8\u5668\u7684\u517c\u5bb9\u6027\u2014\u2014\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u770b\u662f\u5426\u80fd\u591f\u5f88\u597d\u5f97\u5de5\u4f5c\u5728\u4e0d\u540c\u6d4f\u89c8\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\u3002\u6d4b\u8bd5\u7cfb\u7edf\u529f\u80fd\u2014\u2014\u521b\u5efa\u8870\u9000\u6d4b\u8bd5\u68c0\u9a8c\u8f6f\u4ef6\u529f\u80fd\u548c\u7528\u6237\u9700\u6c42\u3002\u652f\u6301\u81ea\u52a8\u5f55\u5236\u52a8\u4f5c\u548c\u81ea\u52a8\u751f\u6210\u3002Net\u3001Java\u3001Perl\u7b49\u4e0d\u540c\u8bed\u8a00\u7684\u6d4b\u8bd5\u811a\u672c\u3002Selenium \u662fThoughtWorks\u4e13\u95e8\u4e3aWeb\u5e94\u7528\u7a0b\u5e8f\u7f16\u5199\u7684\u4e00\u4e2a\u9a8c\u6536\u6d4b\u8bd5\u5de5\u5177 Selenium Python\u73af\u5883\u5b89\u88c5 pip install selenium #\u5982\u679c\u662ffriefox\u4e0b\u8f7dwebdriver\u52a0\u5165\u73af\u5883\u53d8\u91cf https://github.com/mozilla/geckodriver/releases \u7b80\u5355\u622a\u56fe\u529f\u80fd # -*- coding: utf-8 -*- \u6307\u5b9a\u7f16\u7801 #\u884c\u6ce8\u91ca Created on 2016\u5e7410\u670817\u65e5 @author: far from selenium import webdriver from selenium.webdriver.firefox.firefox_binary import FirefoxBinary binary = FirefoxBinary ( r D:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe ) brower = webdriver . Firefox ( firefox_binary = binary ) url = http://www.baidu.com brower . set_window_size ( 1200 , 900 ) brower . get ( url ) brower . save_screenshot ( test.png ) brower . close ()","title":"\u81ea\u52a8\u5316\u6d4b\u8bd5"},{"location":"python/py_selenium/#selenium","text":"","title":"selenium\u7b80\u4ecb"},{"location":"python/py_selenium/#selenium_1","text":"Selenium\u662f\u4e00\u4e2a\u7528\u4e8eWeb\u5e94\u7528\u7a0b\u5e8f\u6d4b\u8bd5\u7684\u5de5\u5177\u3002Selenium\u6d4b\u8bd5\u76f4\u63a5\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u4e2d\uff0c\u5c31\u50cf\u771f\u6b63\u7684\u7528\u6237\u5728\u64cd\u4f5c\u4e00\u6837\u3002\u652f\u6301\u7684\u6d4f\u89c8\u5668\u5305\u62ecIE\u3001Mozilla Firefox\u3001Mozilla Suite\u7b49\u3002\u8fd9\u4e2a\u5de5\u5177\u7684\u4e3b\u8981\u529f\u80fd\u5305\u62ec\uff1a\u6d4b\u8bd5\u4e0e\u6d4f\u89c8\u5668\u7684\u517c\u5bb9\u6027\u2014\u2014\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u770b\u662f\u5426\u80fd\u591f\u5f88\u597d\u5f97\u5de5\u4f5c\u5728\u4e0d\u540c\u6d4f\u89c8\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u4e4b\u4e0a\u3002\u6d4b\u8bd5\u7cfb\u7edf\u529f\u80fd\u2014\u2014\u521b\u5efa\u8870\u9000\u6d4b\u8bd5\u68c0\u9a8c\u8f6f\u4ef6\u529f\u80fd\u548c\u7528\u6237\u9700\u6c42\u3002\u652f\u6301\u81ea\u52a8\u5f55\u5236\u52a8\u4f5c\u548c\u81ea\u52a8\u751f\u6210\u3002Net\u3001Java\u3001Perl\u7b49\u4e0d\u540c\u8bed\u8a00\u7684\u6d4b\u8bd5\u811a\u672c\u3002Selenium \u662fThoughtWorks\u4e13\u95e8\u4e3aWeb\u5e94\u7528\u7a0b\u5e8f\u7f16\u5199\u7684\u4e00\u4e2a\u9a8c\u6536\u6d4b\u8bd5\u5de5\u5177","title":"Selenium \u7b80\u4ecb"},{"location":"python/py_selenium/#selenium-python","text":"pip install selenium #\u5982\u679c\u662ffriefox\u4e0b\u8f7dwebdriver\u52a0\u5165\u73af\u5883\u53d8\u91cf https://github.com/mozilla/geckodriver/releases","title":"Selenium Python\u73af\u5883\u5b89\u88c5"},{"location":"python/py_selenium/#_1","text":"# -*- coding: utf-8 -*- \u6307\u5b9a\u7f16\u7801 #\u884c\u6ce8\u91ca Created on 2016\u5e7410\u670817\u65e5 @author: far from selenium import webdriver from selenium.webdriver.firefox.firefox_binary import FirefoxBinary binary = FirefoxBinary ( r D:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe ) brower = webdriver . Firefox ( firefox_binary = binary ) url = http://www.baidu.com brower . set_window_size ( 1200 , 900 ) brower . get ( url ) brower . save_screenshot ( test.png ) brower . close ()","title":"\u7b80\u5355\u622a\u56fe\u529f\u80fd"},{"location":"python/py_socket/","text":"socket\u7f51\u7edc\u7f16\u7a0b","title":"Py socket"},{"location":"python/py_socket/#socket","text":"","title":"socket\u7f51\u7edc\u7f16\u7a0b"},{"location":"python/py_spider/","text":"python\u722c\u866b\u521d\u63a2 pyspider github : https://github.com/binux/pyspider \u5176\u4ed6\u6587\u6863 + http://docs.pyspider.org/en/latest/ + http://blog.binux.me/2015/01/pyspider-tutorial-level-1-html-and-css-selector/ \u5b89\u88c5 \u5b89\u88c5\u4f9d\u8d56\u73af\u5883\u548cpython sudo apt-get install python python-dev python-distribute python-pip libcurl4-openssl-dev libxml2-dev libxslt1-dev python-lxml sudo apt-get install python-pip \u5b89\u88c5PhantomJS \u5b98\u7f51: http://phantomjs.org/ PhantomJS\u662f\u4e00\u4e2a\u57fa\u4e8e WebKit \u7684\u975e\u754c\u9762\u6e32\u67d3html\u7684\u5f15\u64ce,\u7528\u4e8e \u9875\u9762\u81ea\u52a8\u5316 \uff0c \u7f51\u7edc\u76d1\u6d4b \uff0c \u7f51\u9875\u622a\u5c4f \uff0c\u4ee5\u53ca \u65e0\u754c\u9762\u6d4b\u8bd5 \u7b49 sudo apt-get install phantomjs \u5b89\u88c5pyspider pip install pyspider \u9519\u8bef connect to scheduler rpc error: error(111, 'Connection refused') pip install -U supernova \u542f\u52a8 pyspider \u521b\u5efa\u9879\u76ee \u6253\u5f00 localhost:5000 \u6253\u5f00 dashboard , create new project \u521b\u5efa\u811a\u672c:\u6211\u8fd9\u91cc\u4ee5\u6293\u53d6\u4e00\u4e0b\u4e91\u98ce\u7684\u6240\u6709\u535a\u6587\u94fe\u63a5\u4e3a\u4f8b: # -*- coding: utf-8 -*- from pyspider.libs.base_handler import * import re class Handler ( BaseHandler ): crawl_config = { message_queue : redis://localhost:6379/db } #\u5f00\u542f\u542f\u52a8\u4efb\u52a1\u5165\u53e3,\u4e00\u822c\u4e3a\u4e3b\u9875 @every ( minutes = 24 * 60 ) def on_start ( self ): self . crawl ( http://blog.codingnow.com/ , callback = self . index_page ) #\u6839\u636e\u6807\u7b7e\u8fc7\u6ee4,\u9875\u9762\u4e0a\u6709\u4e2a[enable css selector helper]\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d @config ( age = 10 * 24 * 60 * 60 ) def index_page ( self , response ): for each in response . doc ( .module-archives li a[href^= http ] ) . items (): if re . match ( ^http://blog.codingnow.com.*/$ , each . attr . href ): self . crawl ( each . attr . href , callback = self . second_index_page ) #\u6211\u8fd9\u91cc\u505a\u4e86\u4e00\u4e2a\u4e8c\u7ea7\u6293\u53d6,\u7b2c\u4e00\u7ea7\u4e3a\u65e5\u671f\u5206\u7c7b @config ( age = 10 * 24 * 60 * 60 ) def second_index_page ( self , response ): for each in response . doc ( .permalink[href^= http ] ) . items (): if re . match ( ^http://blog.codingnow.com , each . attr . href ): self . crawl ( each . attr . href , callback = self . detail_page ) #\u8be6\u60c5\u9875\u6211\u53ea\u6293\u4e86title\u548curl.\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u5206\u6790\u6b63\u6587 @config ( priority = 2 ) def detail_page ( self , response ): return { url : response . url , title : response . doc ( title ) . text (), } http://demo.pyspider.org/ scrapy doc : http://doc.scrapy.org/en/0.24/ \u5b89\u88c5scrapy liux\u5b89\u88c5 pip install scrapy windows\u4e0a\u5b89\u88c5 Twisted lxml #Twisted\uff0c lxml\u5148\u4e0b\u8f7d\u7f16\u8bd1\u597d\u7684\u5305\u5b89\u88c5\u518d\u5b89\u88c5scrapy pip install scrapy \u521b\u5efa\u5de5\u7a0b scrapy startproject codeingnow \u7ed3\u6784\u5982\u4e0b: codeingnow \u2502 scrapy.cfg # \u9879\u76ee\u914d\u7f6e\u6587\u4ef6 \u2514\u2500codeingnow \u2502 items.py #\u9879\u76eeitems\u6587\u4ef6 \u2502 pipelines.py #\u9879\u76ee\u7ba1\u9053\u6587\u4ef6 \u2502 settings.py #\u9879\u76ee\u914d\u7f6e\u6587\u4ef6 \u2514\u2500spiders \u5728 spiders \u521b\u5efa\u722c\u866b\u7a0b\u5e8f codeingnow_scrapy.py # -*- coding: utf-8 -*- import scrapy class CodeingNowSpider ( scrapy . Spider ): name = codeingnow start_urls = [ http://blog.codingnow.com/ ] def parse ( self , response ): for url in response . css ( div[class*=module-archives] a::attr(href) ) . re ( ^http://blog.codingnow.com.*/$ ): yield scrapy . Request ( url , self . parse_content_url ) # break def parse_content_url ( self , response ): for content_url in response . css ( a[class*=permalink]::attr(href) ) . extract (): yield { content_url : content_url } \u76f4\u63a5\u8fd0\u884cspider: scrapy runspider codeingnow_scrapy.py \u5728\u5de5\u7a0b\u76ee\u5f55\u4e2d\u8fd0\u884c,\u5e76\u5bfc\u51fa\u6570\u636e\u4e3ajson scrapy crawl codeingnow -o items.json -t json \u7ed3\u679c:","title":"\u722c\u866b"},{"location":"python/py_spider/#python","text":"","title":"python\u722c\u866b\u521d\u63a2"},{"location":"python/py_spider/#pyspider","text":"github : https://github.com/binux/pyspider \u5176\u4ed6\u6587\u6863 + http://docs.pyspider.org/en/latest/ + http://blog.binux.me/2015/01/pyspider-tutorial-level-1-html-and-css-selector/","title":"pyspider"},{"location":"python/py_spider/#_1","text":"","title":"\u5b89\u88c5"},{"location":"python/py_spider/#python_1","text":"sudo apt-get install python python-dev python-distribute python-pip libcurl4-openssl-dev libxml2-dev libxslt1-dev python-lxml sudo apt-get install python-pip","title":"\u5b89\u88c5\u4f9d\u8d56\u73af\u5883\u548cpython"},{"location":"python/py_spider/#phantomjs","text":"\u5b98\u7f51: http://phantomjs.org/ PhantomJS\u662f\u4e00\u4e2a\u57fa\u4e8e WebKit \u7684\u975e\u754c\u9762\u6e32\u67d3html\u7684\u5f15\u64ce,\u7528\u4e8e \u9875\u9762\u81ea\u52a8\u5316 \uff0c \u7f51\u7edc\u76d1\u6d4b \uff0c \u7f51\u9875\u622a\u5c4f \uff0c\u4ee5\u53ca \u65e0\u754c\u9762\u6d4b\u8bd5 \u7b49 sudo apt-get install phantomjs","title":"\u5b89\u88c5PhantomJS"},{"location":"python/py_spider/#pyspider_1","text":"pip install pyspider","title":"\u5b89\u88c5pyspider"},{"location":"python/py_spider/#_2","text":"connect to scheduler rpc error: error(111, 'Connection refused') pip install -U supernova","title":"\u9519\u8bef"},{"location":"python/py_spider/#_3","text":"pyspider","title":"\u542f\u52a8"},{"location":"python/py_spider/#_4","text":"\u6253\u5f00 localhost:5000 \u6253\u5f00 dashboard , create new project \u521b\u5efa\u811a\u672c:\u6211\u8fd9\u91cc\u4ee5\u6293\u53d6\u4e00\u4e0b\u4e91\u98ce\u7684\u6240\u6709\u535a\u6587\u94fe\u63a5\u4e3a\u4f8b: # -*- coding: utf-8 -*- from pyspider.libs.base_handler import * import re class Handler ( BaseHandler ): crawl_config = { message_queue : redis://localhost:6379/db } #\u5f00\u542f\u542f\u52a8\u4efb\u52a1\u5165\u53e3,\u4e00\u822c\u4e3a\u4e3b\u9875 @every ( minutes = 24 * 60 ) def on_start ( self ): self . crawl ( http://blog.codingnow.com/ , callback = self . index_page ) #\u6839\u636e\u6807\u7b7e\u8fc7\u6ee4,\u9875\u9762\u4e0a\u6709\u4e2a[enable css selector helper]\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d @config ( age = 10 * 24 * 60 * 60 ) def index_page ( self , response ): for each in response . doc ( .module-archives li a[href^= http ] ) . items (): if re . match ( ^http://blog.codingnow.com.*/$ , each . attr . href ): self . crawl ( each . attr . href , callback = self . second_index_page ) #\u6211\u8fd9\u91cc\u505a\u4e86\u4e00\u4e2a\u4e8c\u7ea7\u6293\u53d6,\u7b2c\u4e00\u7ea7\u4e3a\u65e5\u671f\u5206\u7c7b @config ( age = 10 * 24 * 60 * 60 ) def second_index_page ( self , response ): for each in response . doc ( .permalink[href^= http ] ) . items (): if re . match ( ^http://blog.codingnow.com , each . attr . href ): self . crawl ( each . attr . href , callback = self . detail_page ) #\u8be6\u60c5\u9875\u6211\u53ea\u6293\u4e86title\u548curl.\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u5206\u6790\u6b63\u6587 @config ( priority = 2 ) def detail_page ( self , response ): return { url : response . url , title : response . doc ( title ) . text (), } http://demo.pyspider.org/","title":"\u521b\u5efa\u9879\u76ee"},{"location":"python/py_spider/#scrapy","text":"doc : http://doc.scrapy.org/en/0.24/","title":"scrapy"},{"location":"python/py_spider/#scrapy_1","text":"liux\u5b89\u88c5 pip install scrapy windows\u4e0a\u5b89\u88c5 Twisted lxml #Twisted\uff0c lxml\u5148\u4e0b\u8f7d\u7f16\u8bd1\u597d\u7684\u5305\u5b89\u88c5\u518d\u5b89\u88c5scrapy pip install scrapy","title":"\u5b89\u88c5scrapy"},{"location":"python/py_spider/#_5","text":"scrapy startproject codeingnow \u7ed3\u6784\u5982\u4e0b: codeingnow \u2502 scrapy.cfg # \u9879\u76ee\u914d\u7f6e\u6587\u4ef6 \u2514\u2500codeingnow \u2502 items.py #\u9879\u76eeitems\u6587\u4ef6 \u2502 pipelines.py #\u9879\u76ee\u7ba1\u9053\u6587\u4ef6 \u2502 settings.py #\u9879\u76ee\u914d\u7f6e\u6587\u4ef6 \u2514\u2500spiders \u5728 spiders \u521b\u5efa\u722c\u866b\u7a0b\u5e8f codeingnow_scrapy.py # -*- coding: utf-8 -*- import scrapy class CodeingNowSpider ( scrapy . Spider ): name = codeingnow start_urls = [ http://blog.codingnow.com/ ] def parse ( self , response ): for url in response . css ( div[class*=module-archives] a::attr(href) ) . re ( ^http://blog.codingnow.com.*/$ ): yield scrapy . Request ( url , self . parse_content_url ) # break def parse_content_url ( self , response ): for content_url in response . css ( a[class*=permalink]::attr(href) ) . extract (): yield { content_url : content_url } \u76f4\u63a5\u8fd0\u884cspider: scrapy runspider codeingnow_scrapy.py \u5728\u5de5\u7a0b\u76ee\u5f55\u4e2d\u8fd0\u884c,\u5e76\u5bfc\u51fa\u6570\u636e\u4e3ajson scrapy crawl codeingnow -o items.json -t json \u7ed3\u679c:","title":"\u521b\u5efa\u5de5\u7a0b"},{"location":"python/py_test/","text":"python \u6d4b\u8bd5\u4e0e\u8c03\u8bd5 \u8c03\u8bd5 \u53c2\u8003: https://www.ibm.com/developerworks/cn/linux/l-cn-pythondebugger/ \u521a\u5199\u51fa\u6765\u7684\u7a0b\u5e8f\u4e0d\u53ef\u80fd100%\u6ca1\u6709\u9519\u8bef,\u8bed\u6cd5\u9519\u8bef\u53ef\u4ee5\u5728\u9519\u8bef\u4fe1\u606f\u4e2d\u5b9a\u4f4d\u5230,\u903b\u8f91\u9519\u8bef\u5219\u9700\u8981\u4e00\u5b9a\u7684\u8c03\u8bd5\u6280\u5de7. print print \u662f\u6240\u6709\u8bed\u8a00\u6700\u7b80\u5355\u7c97\u66b4\u7684\u8c03\u8bd5\u65b9\u5f0f,\u5728\u7a0b\u5e8f\u903b\u8f91\u5404\u5904\u52a0\u4e0a\u6253\u5370,\u770b\u8f93\u51fa def foo ( s ): n = int ( s ) print ( n = %d % n ) return 10 / n def main (): foo ( 0 ) main () \u65ad\u8a00 assert \u7684\u610f\u601d\u662f\uff0c\u8868\u8fbe\u5f0f\u7ed3\u679c\u5e94\u8be5\u662f True \uff0c\u5426\u5219\u62a5\u9519 def foo ( s ): n = int ( s ) assert n != 0 , n is zero! return 10 / n def main (): foo ( 0 ) main () pdb pdb\u662fpython\u81ea\u5e26\u7684\u8c03\u8bd5\u5668,\u53ef\u4ee5\u5355\u6b65\u8c03\u8bd5,\u67e5\u770b\u5355\u6b65\u4e2d\u7684\u72b6\u6001 python3 -m pdb test.py \u542f\u52a8pdb\u8c03\u8bd5, \u547d\u4ee4 \u89e3\u91ca break \u6216 b \u8bbe\u7f6e\u65ad\u70b9 \u8bbe\u7f6e\u65ad\u70b9 continue \u6216 c \u7ee7\u7eed\u6267\u884c\u7a0b\u5e8f list \u6216 l \u67e5\u770b\u5f53\u524d\u884c\u7684\u4ee3\u7801\u6bb5 step \u6216 s \u8fdb\u5165\u51fd\u6570 return \u6216 r \u6267\u884c\u4ee3\u7801\u76f4\u5230\u4ece\u5f53\u524d\u51fd\u6570\u8fd4\u56de exit \u6216 q \u4e2d\u6b62\u5e76\u9000\u51fa next \u6216 n \u6267\u884c\u4e0b\u4e00\u884c pp \u6253\u5370\u53d8\u91cf\u7684\u503c help \u5e2e\u52a9 ide PyCharm PyDev \u5355\u5143\u6d4b\u8bd5 \u5355\u5143\u6d4b\u8bd5\u662f\u7528\u6765\u5bf9\u4e00\u4e2a\u6a21\u5757\u3001\u4e00\u4e2a\u51fd\u6570\u6216\u8005\u4e00\u4e2a\u7c7b\u6765\u8fdb\u884c\u6b63\u786e\u6027\u68c0\u9a8c\u7684\u6d4b\u8bd5\u5de5\u4f5c \u4e3a\u4e86\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165Python\u81ea\u5e26\u7684 unittest \u6a21\u5757 assertEqual :\u662f\u5426\u76f8\u7b49 assertTrue :\u6761\u4ef6\u662f\u5426\u6ee1\u8db3 setUp :\u6bcf\u8c03\u7528\u4e00\u4e2a\u6d4b\u8bd5\u65b9\u6cd5\u524d\u6267\u884c tearDown :\u6bcf\u8c03\u7528\u4e00\u4e2a\u6d4b\u8bd5\u65b9\u6cd5\u540e\u6267\u884c import unittest class Logic ( object ): docstring for Logic def __init__ ( self , arg ): super ( Logic , self ) . __init__ () self . arg = arg class Test ( unittest . TestCase ): def test_init ( self ): l = Logic ( 1 ) self . assertEqual ( l . arg , 2 ) if __name__ == __main__ : unittest . main () \u8fd0\u884c\u6d4b\u8bd5: python3 -m unittest test python test.py","title":"\u8c03\u8bd5"},{"location":"python/py_test/#python","text":"","title":"python \u6d4b\u8bd5\u4e0e\u8c03\u8bd5"},{"location":"python/py_test/#_1","text":"\u53c2\u8003: https://www.ibm.com/developerworks/cn/linux/l-cn-pythondebugger/ \u521a\u5199\u51fa\u6765\u7684\u7a0b\u5e8f\u4e0d\u53ef\u80fd100%\u6ca1\u6709\u9519\u8bef,\u8bed\u6cd5\u9519\u8bef\u53ef\u4ee5\u5728\u9519\u8bef\u4fe1\u606f\u4e2d\u5b9a\u4f4d\u5230,\u903b\u8f91\u9519\u8bef\u5219\u9700\u8981\u4e00\u5b9a\u7684\u8c03\u8bd5\u6280\u5de7.","title":"\u8c03\u8bd5"},{"location":"python/py_test/#print","text":"print \u662f\u6240\u6709\u8bed\u8a00\u6700\u7b80\u5355\u7c97\u66b4\u7684\u8c03\u8bd5\u65b9\u5f0f,\u5728\u7a0b\u5e8f\u903b\u8f91\u5404\u5904\u52a0\u4e0a\u6253\u5370,\u770b\u8f93\u51fa def foo ( s ): n = int ( s ) print ( n = %d % n ) return 10 / n def main (): foo ( 0 ) main ()","title":"print"},{"location":"python/py_test/#_2","text":"assert \u7684\u610f\u601d\u662f\uff0c\u8868\u8fbe\u5f0f\u7ed3\u679c\u5e94\u8be5\u662f True \uff0c\u5426\u5219\u62a5\u9519 def foo ( s ): n = int ( s ) assert n != 0 , n is zero! return 10 / n def main (): foo ( 0 ) main ()","title":"\u65ad\u8a00"},{"location":"python/py_test/#pdb","text":"pdb\u662fpython\u81ea\u5e26\u7684\u8c03\u8bd5\u5668,\u53ef\u4ee5\u5355\u6b65\u8c03\u8bd5,\u67e5\u770b\u5355\u6b65\u4e2d\u7684\u72b6\u6001 python3 -m pdb test.py \u542f\u52a8pdb\u8c03\u8bd5, \u547d\u4ee4 \u89e3\u91ca break \u6216 b \u8bbe\u7f6e\u65ad\u70b9 \u8bbe\u7f6e\u65ad\u70b9 continue \u6216 c \u7ee7\u7eed\u6267\u884c\u7a0b\u5e8f list \u6216 l \u67e5\u770b\u5f53\u524d\u884c\u7684\u4ee3\u7801\u6bb5 step \u6216 s \u8fdb\u5165\u51fd\u6570 return \u6216 r \u6267\u884c\u4ee3\u7801\u76f4\u5230\u4ece\u5f53\u524d\u51fd\u6570\u8fd4\u56de exit \u6216 q \u4e2d\u6b62\u5e76\u9000\u51fa next \u6216 n \u6267\u884c\u4e0b\u4e00\u884c pp \u6253\u5370\u53d8\u91cf\u7684\u503c help \u5e2e\u52a9","title":"pdb"},{"location":"python/py_test/#ide","text":"","title":"ide"},{"location":"python/py_test/#pycharm","text":"","title":"PyCharm"},{"location":"python/py_test/#pydev","text":"","title":"PyDev"},{"location":"python/py_test/#_3","text":"\u5355\u5143\u6d4b\u8bd5\u662f\u7528\u6765\u5bf9\u4e00\u4e2a\u6a21\u5757\u3001\u4e00\u4e2a\u51fd\u6570\u6216\u8005\u4e00\u4e2a\u7c7b\u6765\u8fdb\u884c\u6b63\u786e\u6027\u68c0\u9a8c\u7684\u6d4b\u8bd5\u5de5\u4f5c \u4e3a\u4e86\u7f16\u5199\u5355\u5143\u6d4b\u8bd5\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165Python\u81ea\u5e26\u7684 unittest \u6a21\u5757 assertEqual :\u662f\u5426\u76f8\u7b49 assertTrue :\u6761\u4ef6\u662f\u5426\u6ee1\u8db3 setUp :\u6bcf\u8c03\u7528\u4e00\u4e2a\u6d4b\u8bd5\u65b9\u6cd5\u524d\u6267\u884c tearDown :\u6bcf\u8c03\u7528\u4e00\u4e2a\u6d4b\u8bd5\u65b9\u6cd5\u540e\u6267\u884c import unittest class Logic ( object ): docstring for Logic def __init__ ( self , arg ): super ( Logic , self ) . __init__ () self . arg = arg class Test ( unittest . TestCase ): def test_init ( self ): l = Logic ( 1 ) self . assertEqual ( l . arg , 2 ) if __name__ == __main__ : unittest . main () \u8fd0\u884c\u6d4b\u8bd5: python3 -m unittest test python test.py","title":"\u5355\u5143\u6d4b\u8bd5"},{"location":"python/py_thread/","text":"\u8fdb\u7a0b\u4e0e\u7ebf\u7a0b \u8fdb\u7a0b \u8fdb\u7a0b\u662f\u4e00\u79cd\u53e4\u8001\u800c\u5178\u578b\u7684\u4e0a\u4e0b\u6587\u7cfb\u7edf\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u8d44\u6e90\u53e5\u67c4\uff0c\u4ed6\u4eec\u4e92\u76f8\u4e4b\u95f4\u4e0d\u53d1\u751f\u5e72\u6270\u3002 \u6bcf\u4e2a\u8fdb\u7a0b\u5728\u5185\u6838\u4e2d\u4f1a\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u8fdb\u884c\u63cf\u8ff0\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u3002\u8fd9\u4e9b\u63cf\u8ff0\u7b26\u5305\u542b\u4e86\u7cfb\u7edf\u7ba1\u7406\u8fdb\u7a0b\u6240\u9700\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u653e\u5728\u4e00\u4e2a\u53eb\u505a\u4efb\u52a1\u961f\u5217\u7684\u961f\u5217\u91cc\u9762\u3002\u5f53\u65b0\u5efa\u8fdb\u7a0b\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5206\u914d\u65b0\u7684\u8fdb\u7a0b\u63cf\u8ff0\u7b26\uff0c\u5e76\u4e14\u5206\u914d\u65b0\u7684\u5730\u5740\u7a7a\u95f4(\u548c\u7236\u5730\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u4fdd\u6301\u4e00\u81f4\uff0c\u4f46\u662f\u4e24\u8005\u540c\u65f6\u8fdb\u5165COW\u72b6\u6001)\u3002\u8fd9\u4e9b\u8fc7\u7a0b\u9700\u8981\u4e00\u5b9a\u7684\u5f00\u9500\u3002 \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6700\u6838\u5fc3\u7684\u6982\u5ff5\u662f\u8fdb\u7a0b\uff0c\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u7684\u95ee\u9898\u662f\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002 \u8fdb\u7a0b\u662f\u201c\u7a0b\u5e8f\u6267\u884c\u7684\u4e00\u4e2a\u5b9e\u4f8b\u201d\uff0c\u62c5\u5f53\u5206\u914d\u7cfb\u7edf\u8d44\u6e90\u7684\u5b9e\u4f53\u3002\u8fdb\u7a0b\u521b\u5efa\u5fc5\u987b\u5206\u914d\u4e00\u4e2a\u5b8c\u6574\u7684\u72ec\u7acb\u5730\u5740\u7a7a\u95f4\u3002 \u8fdb\u7a0b\u5207\u6362\u53ea\u53d1\u751f\u5728\u5185\u6838\u6001\uff0c\u4e24\u6b65\uff1a \u5207\u6362\u9875\u5168\u5c40\u76ee\u5f55\u4ee5\u5b89\u88c5\u4e00\u4e2a\u65b0\u7684\u5730\u5740\u7a7a\u95f4\uff1b \u5207\u6362\u5185\u6838\u6001\u5806\u6808\u548c\u786c\u4ef6\u4e0a\u4e0b\u6587\u3002 \u8fdb\u7a0b\u72b6\u6001 \u5ffd\u7565\u53bblinux\u5185\u6838\u590d\u6742\u7684\u72b6\u6001\u8f6c\u79fb\u8868\uff0c\u6211\u4eec\u5b9e\u9645\u4e0a\u53ef\u4ee5\u628a\u8fdb\u7a0b\u72b6\u6001\u5f52\u7ed3\u4e3a\u4e09\u4e2a\u6700\u4e3b\u8981\u7684\u72b6\u6001\uff1a \u5c31\u7eea\u6001 \uff0c \u8fd0\u884c\u6001 \uff0c \u7761\u7720\u6001 \u3002\u8fd9\u5c31\u662f\u4efb\u4f55\u4e00\u672c\u7cfb\u7edf\u4e66\u4e0a\u90fd\u6709\u7684\u4e09\u6001\u8f6c\u6362\u56fe\u3002 \u5c31\u7eea\u548c\u6267\u884c\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\uff0c\u57fa\u672c\u8fd9\u5c31\u662f\u8c03\u5ea6\u7684\u8fc7\u7a0b\u3002\u800c\u5f53\u6267\u884c\u6001\u7a0b\u5e8f\u9700\u8981\u7b49\u5f85\u67d0\u4e9b\u6761\u4ef6(\u6700\u5178\u578b\u5c31\u662fIO)\u65f6\uff0c\u5c31\u4f1a\u9677\u5165\u7761\u7720\u6001\u3002\u800c\u6761\u4ef6\u8fbe\u6210\u540e\uff0c\u4e00\u822c\u4f1a\u81ea\u52a8\u8fdb\u5165\u5c31\u7eea\u3002 \u4e0a\u4e0b\u6587 \u6307\u7684\u662f\u7a0b\u5e8f\u5728\u6267\u884c\u4e2d\u7684\u4e00\u4e2a\u72b6\u6001\u3002\u901a\u5e38\u6211\u4eec\u4f1a\u7528\u8c03\u7528\u6808\u6765\u8868\u793a\u8fd9\u4e2a\u72b6\u6001\u2014\u2014\u6808\u8bb0\u8f7d\u4e86\u6bcf\u4e2a\u8c03\u7528\u5c42\u7ea7\u6267\u884c\u5230\u54ea\u91cc\uff0c\u8fd8\u6709\u6267\u884c\u65f6\u7684\u73af\u5883\u60c5\u51b5\u7b49\u6240\u6709\u6709\u5173\u7684\u4fe1\u606f \u963b\u585e \u5f53\u8fdb\u7a0b\u9700\u8981\u5728\u67d0\u4e2a\u6587\u4ef6\u53e5\u67c4\u4e0a\u505aIO\uff0c\u8fd9\u4e2afd\u53c8\u6ca1\u6709\u6570\u636e\u7ed9\u4ed6\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u53d1\u751f\u963b\u585e\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u8bb0\u5f55XX\u8fdb\u7a0b\u963b\u585e\u5728\u4e86XX fd\u4e0a\uff0c\u7136\u540e\u5c06\u8fdb\u7a0b\u6807\u8bb0\u4e3a\u7761\u7720\u6001\uff0c\u5e76\u8c03\u5ea6\u51fa\u53bb\u3002\u5f53fd\u4e0a\u6709\u6570\u636e\u65f6(\u4f8b\u5982\u5bf9\u7aef\u53d1\u9001\u7684\u6570\u636e\u5230\u8fbe)\uff0c\u5c31\u4f1a\u5524\u9192\u963b\u585e\u5728fd\u4e0a\u7684\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u4f1a\u968f\u540e\u8fdb\u5165\u5c31\u7eea\u961f\u5217\uff0c\u7b49\u5f85\u5408\u9002\u7684\u65f6\u95f4\u88ab\u8c03\u5ea6\u3002 \u963b\u585e\u540e\u7684\u5524\u9192\u4e5f\u662f\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u8bdd\u9898\u3002\u5f53\u591a\u4e2a\u4e0a\u4e0b\u6587\u963b\u585e\u5728\u4e00\u4e2afd\u4e0a(\u867d\u7136\u4e0d\u591a\u89c1\uff0c\u4f46\u662f\u540e\u9762\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u4f8b\u5b50)\uff0c\u800c\u4e14fd\u5c31\u7eea\u65f6\uff0c\u5e94\u8be5\u5524\u9192\u591a\u5c11\u4e2a\u4e0a\u4e0b\u6587\u5462\uff1f\u4f20\u7edf\u4e0a\u5e94\u5f53\u5524\u9192\u6240\u6709\u4e0a\u4e0b\u6587\uff0c\u56e0\u4e3a\u5982\u679c\u4ec5\u5524\u9192\u4e00\u4e2a\uff0c\u800c\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u53c8\u4e0d\u80fd\u6d88\u8d39\u6240\u6709\u6570\u636e\u65f6\uff0c\u5c31\u4f1a\u4f7f\u5f97\u5176\u4ed6\u4e0a\u4e0b\u6587\u5904\u4e8e\u65e0\u8c13\u7684\u6b7b\u9501\u4e2d\u3002 \u4f46\u662f\u6709\u4e2a\u8457\u540d\u7684\u4f8b\u5b50\u2014\u2014accept\uff0c\u4e5f\u662f\u4f7f\u7528\u8bfb\u5c31\u7eea\u6765\u8868\u793a\u6536\u5230\u7684\u3002\u5982\u679c\u8bd5\u56fe\u7528\u591a\u4e2a\u7ebf\u7a0b\u6765accept\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u5f53\u6709\u65b0\u8fde\u63a5\u65f6\uff0c\u6240\u6709\u4e0a\u4e0b\u6587\u90fd\u4f1a\u5c31\u7eea\uff0c\u4f46\u662f\u53ea\u6709\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u9645\u83b7\u5f97fd\uff0c\u5176\u4ed6\u7684\u88ab\u8c03\u5ea6\u540e\u53c8\u7acb\u523b\u963b\u585e\u3002\u8fd9\u5c31\u662f\u60ca\u7fa4\u95ee\u9898thundering herd problem\u3002 \u73b0\u4ee3linux\u5185\u6838\u5df2\u7ecf\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u65b9\u6cd5\u60ca\u4eba\u7684\u7b80\u5355\u2014\u2014accept\u65b9\u6cd5\u52a0\u9501\u3002 \u5e76\u53d1\u548c\u5e76\u884c \u5728\u8fd9\u91cc\u5728\u591a\u8bb2\u4e00\u4e9b,\u5e76\u53d1\u548c\u5e76\u884c\u662f\u5f97\u4ece\u7269\u7406\u786c\u4ef6\u65b9\u9762\u6765\u8003\u8651.\u5728\u4ee5\u524d\u7535\u8111\u662f\u5355\u6838\u7684\u65f6\u5019,\u4e00\u4e2acup\u6838\u5fc3\u53ea\u80fd\u8fdb\u884c\u5355\u4e2a\u4efb\u52a1,\u5c06\u5355\u4e2acup\u8fd0\u884c\u65f6\u95f4\u5206\u914d\u7ed9\u591a\u4e2a\u4efb\u52a1\u8fd0\u884c,\u8fd9\u5c31\u662f\u5e76\u53d1,\u8ba9\u4f60\u770b\u8d77\u6765\u50cf\u662f\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u6267\u884c,\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u4efb\u52a1\u4e00\u4e2a\u4efb\u52a1\u7684\u6267\u884c. \u800c\u5e76\u884c,\u662f\u5728\u591a\u6838cup\u7535\u8111\u4e0a,\u4e3a\u6bcf\u4e00\u4e2acup\u6838\u5fc3\u5206\u914d\u4e00\u4e2a\u4efb\u52a1,\u662f\u771f\u6b63\u7684\u591a\u4efb\u52a1\u6267\u884c. \u540c\u6b65,\u5f02\u6b65,\u56de\u8c03 \u540c\u6b65 \u540c\u6b65\u5462.\u5c31\u662f\u7a0b\u5e8f\u4e00\u4e2a\u8bed\u53e5\u4e00\u4e2a\u8bed\u53e5\u987a\u5e8f\u6267\u884c,\u5f88\u7b26\u5408\u4eba\u5f97\u601d\u7ef4,\u662f\u7ebf\u6027\u6267\u884c. \u5f02\u6b65 \u5f02\u6b65\u7684\u7279\u6027\u5c31\u662f\u6267\u884c\u8d77\u6765\u4e0d\u4f1a\u963b\u585e \u56de\u8c03 \u56de\u8c03\u662f\u5728\u7b49\u5f85\u67d0\u4e00\u4ef6\u4e8b\u60c5\u5b8c\u6210\u4e4b\u540e,\u5728\u8fd0\u884c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570 python\u8fdb\u7a0b multiprocessing from multiprocessing import Process import os # \u5b50\u8fdb\u7a0b\u8981\u6267\u884c\u7684\u4ee3\u7801 def run_proc ( name ): print ( Run child process %s ( %s )... % ( name , os . getpid ())) if __name__ == __main__ : print ( Parent process %s . % os . getpid ()) p = Process ( target = run_proc , args = ( test ,)) print ( Child process will start. ) p . start () p . join () print ( Child process end. ) Parent process 928. Process will start. Run child process test (929)... Process end. \u8fdb\u7a0b\u6c60(Pool) from multiprocessing import Pool import os , time , random def long_time_task ( name ): print ( Run task %s ( %s )... % ( name , os . getpid ())) start = time . time () time . sleep ( random . random () * 3 ) end = time . time () print ( Task %s runs %0.2f seconds. % ( name , ( end - start ))) if __name__ == __main__ : print ( Parent process %s . % os . getpid ()) p = Pool ( 4 ) for i in range ( 5 ): p . apply_async ( long_time_task , args = ( i ,)) print ( Waiting for all subprocesses done... ) p . close () p . join () print ( All subprocesses done. ) Parent process 669. Waiting for all subprocesses done... Run task 0 (671)... Run task 1 (672)... Run task 2 (673)... Run task 3 (674)... Task 2 runs 0.14 seconds. Run task 4 (673)... Task 1 runs 0.27 seconds. Task 3 runs 0.86 seconds. Task 0 runs 1.41 seconds. Task 4 runs 1.91 seconds. All subprocesses done. \u5b50\u8fdb\u7a0b subprocess \u6211\u4eec\u90fd\u662f\u5728\u521b\u5efa\u5e76\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b\u3002\u50cfLinux\u8fdb\u7a0b\u90a3\u6837\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5fork\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5e76\u8ba9\u8fd9\u4e2a\u5b50\u8fdb\u7a0bexec\u53e6\u5916\u4e00\u4e2a\u7a0b\u5e8f\u3002\u5728Python\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u6807\u51c6\u5e93\u4e2d\u7684subprocess\u5305\u6765fork\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5e76\u8fd0\u884c\u4e00\u4e2a\u5916\u90e8\u7684\u7a0b\u5e8f os.fork \u4e5f\u53ef\u4ee5\u5728Python\u7a0b\u5e8f\u4e2d\u8f7b\u677e\u521b\u5efa\u5b50\u8fdb\u7a0b import subprocess print ( $ nslookup www.python.org ) r = subprocess . call ([ nslookup , www.python.org ]) print ( Exit code: , r ) \u8fdb\u7a0b\u95f4\u901a\u4fe1 Queue from multiprocessing import Process , Queue import os , time , random # \u5199\u6570\u636e\u8fdb\u7a0b\u6267\u884c\u7684\u4ee3\u7801: def write ( q ): print ( Process to write: %s % os . getpid ()) for value in [ A , B , C ]: print ( Put %s to queue... % value ) q . put ( value ) time . sleep ( random . random ()) # \u8bfb\u6570\u636e\u8fdb\u7a0b\u6267\u884c\u7684\u4ee3\u7801: def read ( q ): print ( Process to read: %s % os . getpid ()) while True : value = q . get ( True ) print ( Get %s from queue. % value ) if __name__ == __main__ : # \u7236\u8fdb\u7a0b\u521b\u5efaQueue\uff0c\u5e76\u4f20\u7ed9\u5404\u4e2a\u5b50\u8fdb\u7a0b\uff1a q = Queue () pw = Process ( target = write , args = ( q ,)) pr = Process ( target = read , args = ( q ,)) # \u542f\u52a8\u5b50\u8fdb\u7a0bpw\uff0c\u5199\u5165: pw . start () # \u542f\u52a8\u5b50\u8fdb\u7a0bpr\uff0c\u8bfb\u53d6: pr . start () # \u7b49\u5f85pw\u7ed3\u675f: pw . join () # pr\u8fdb\u7a0b\u91cc\u662f\u6b7b\u5faa\u73af\uff0c\u65e0\u6cd5\u7b49\u5f85\u5176\u7ed3\u675f\uff0c\u53ea\u80fd\u5f3a\u884c\u7ec8\u6b62: pr . terminate () Process to write: 50563 Put A to queue... Process to read: 50564 Get A from queue. Put B to queue... Get B from queue. Put C to queue... Get C from queue. \u5728Unix/Linux\u4e0b\uff0cmultiprocessing\u6a21\u5757\u5c01\u88c5\u4e86fork()\u8c03\u7528\uff0c\u4f7f\u6211\u4eec\u4e0d\u9700\u8981\u5173\u6ce8fork()\u7684\u7ec6\u8282\u3002\u7531\u4e8eWindows\u6ca1\u6709fork\u8c03\u7528\uff0c\u56e0\u6b64\uff0cmultiprocessing\u9700\u8981\u201c\u6a21\u62df\u201d\u51fafork\u7684\u6548\u679c\uff0c\u7236\u8fdb\u7a0b\u6240\u6709Python\u5bf9\u8c61\u90fd\u5fc5\u987b\u901a\u8fc7pickle\u5e8f\u5217\u5316\u518d\u4f20\u5230\u5b50\u8fdb\u7a0b\u53bb\uff0c\u6240\u6709\uff0c\u5982\u679cmultiprocessing\u5728Windows\u4e0b\u8c03\u7528\u5931\u8d25\u4e86\uff0c\u8981\u5148\u8003\u8651\u662f\u4e0d\u662fpickle\u5931\u8d25\u4e86 \u5206\u5e03\u5f0f\u8fdb\u7a0b Python\u7684multiprocessing\u6a21\u5757\u4e0d\u4f46\u652f\u6301\u591a\u8fdb\u7a0b\uff0c\u5176\u4e2dmanagers\u5b50\u6a21\u5757\u8fd8\u652f\u6301\u628a\u591a\u8fdb\u7a0b\u5206\u5e03\u5230\u591a\u53f0\u673a\u5668\u4e0a\u3002\u4e00\u4e2a\u670d\u52a1\u8fdb\u7a0b\u53ef\u4ee5\u4f5c\u4e3a\u8c03\u5ea6\u8005\uff0c\u5c06\u4efb\u52a1\u5206\u5e03\u5230\u5176\u4ed6\u591a\u4e2a\u8fdb\u7a0b\u4e2d\uff0c\u4f9d\u9760\u7f51\u7edc\u901a\u4fe1\u3002\u7531\u4e8emanagers\u6a21\u5757\u5c01\u88c5\u5f88\u597d\uff0c\u4e0d\u5fc5\u4e86\u89e3\u7f51\u7edc\u901a\u4fe1\u7684\u7ec6\u8282\uff0c\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7f16\u5199\u5206\u5e03\u5f0f\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u6709\u4e00\u4e2a\u901a\u8fc7Queue\u901a\u4fe1\u7684\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u73b0\u5728\uff0c\u7531\u4e8e\u5904\u7406\u4efb\u52a1\u7684\u8fdb\u7a0b\u4efb\u52a1\u7e41\u91cd\uff0c\u5e0c\u671b\u628a\u53d1\u9001\u4efb\u52a1\u7684\u8fdb\u7a0b\u548c\u5904\u7406\u4efb\u52a1\u7684\u8fdb\u7a0b\u5206\u5e03\u5230\u4e24\u53f0\u673a\u5668\u4e0a\u3002\u600e\u4e48\u7528\u5206\u5e03\u5f0f\u8fdb\u7a0b\u5b9e\u73b0\uff1f \u539f\u6709\u7684Queue\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\uff0c\u4f46\u662f\uff0c\u901a\u8fc7managers\u6a21\u5757\u628aQueue\u901a\u8fc7\u7f51\u7edc\u66b4\u9732\u51fa\u53bb\uff0c\u5c31\u53ef\u4ee5\u8ba9\u5176\u4ed6\u673a\u5668\u7684\u8fdb\u7a0b\u8bbf\u95eeQueue\u4e86\u3002 \u6211\u4eec\u5148\u770b\u670d\u52a1\u8fdb\u7a0b\uff0c\u670d\u52a1\u8fdb\u7a0b\u8d1f\u8d23\u542f\u52a8Queue\uff0c\u628aQueue\u6ce8\u518c\u5230\u7f51\u7edc\u4e0a\uff0c\u7136\u540e\u5f80Queue\u91cc\u9762\u5199\u5165\u4efb\u52a1 # task_master.py import random , time , queue from multiprocessing.managers import BaseManager # \u53d1\u9001\u4efb\u52a1\u7684\u961f\u5217: task_queue = queue . Queue () # \u63a5\u6536\u7ed3\u679c\u7684\u961f\u5217: result_queue = queue . Queue () # \u4eceBaseManager\u7ee7\u627f\u7684QueueManager: class QueueManager ( BaseManager ): pass # \u628a\u4e24\u4e2aQueue\u90fd\u6ce8\u518c\u5230\u7f51\u7edc\u4e0a, callable\u53c2\u6570\u5173\u8054\u4e86Queue\u5bf9\u8c61: QueueManager . register ( get_task_queue , callable = lambda : task_queue ) QueueManager . register ( get_result_queue , callable = lambda : result_queue ) # \u7ed1\u5b9a\u7aef\u53e35000, \u8bbe\u7f6e\u9a8c\u8bc1\u7801 abc : manager = QueueManager ( address = ( , 5000 ), authkey = b abc ) # \u542f\u52a8Queue: manager . start () # \u83b7\u5f97\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u7684Queue\u5bf9\u8c61: task = manager . get_task_queue () result = manager . get_result_queue () # \u653e\u51e0\u4e2a\u4efb\u52a1\u8fdb\u53bb: for i in range ( 10 ): n = random . randint ( 0 , 10000 ) print ( Put task %d ... % n ) task . put ( n ) # \u4eceresult\u961f\u5217\u8bfb\u53d6\u7ed3\u679c: print ( Try get results... ) for i in range ( 10 ): r = result . get ( timeout = 10 ) print ( Result: %s % r ) # \u5173\u95ed: manager . shutdown () print ( master exit. ) \u8bf7\u6ce8\u610f\uff0c\u5f53\u6211\u4eec\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5199\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u65f6\uff0c\u521b\u5efa\u7684Queue\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u7528\uff0c\u4f46\u662f\uff0c\u5728\u5206\u5e03\u5f0f\u591a\u8fdb\u7a0b\u73af\u5883\u4e0b\uff0c\u6dfb\u52a0\u4efb\u52a1\u5230Queue\u4e0d\u53ef\u4ee5\u76f4\u63a5\u5bf9\u539f\u59cb\u7684task_queue\u8fdb\u884c\u64cd\u4f5c\uff0c\u90a3\u6837\u5c31\u7ed5\u8fc7\u4e86QueueManager\u7684\u5c01\u88c5\uff0c\u5fc5\u987b\u901a\u8fc7manager.get_task_queue()\u83b7\u5f97\u7684Queue\u63a5\u53e3\u6dfb\u52a0\u3002 \u7136\u540e\uff0c\u5728\u53e6\u4e00\u53f0\u673a\u5668\u4e0a\u542f\u52a8\u4efb\u52a1\u8fdb\u7a0b\uff08\u672c\u673a\u4e0a\u542f\u52a8\u4e5f\u53ef\u4ee5\uff09\uff1a # task_worker.py import time , sys , queue from multiprocessing.managers import BaseManager # \u521b\u5efa\u7c7b\u4f3c\u7684QueueManager: class QueueManager ( BaseManager ): pass # \u7531\u4e8e\u8fd9\u4e2aQueueManager\u53ea\u4ece\u7f51\u7edc\u4e0a\u83b7\u53d6Queue\uff0c\u6240\u4ee5\u6ce8\u518c\u65f6\u53ea\u63d0\u4f9b\u540d\u5b57: QueueManager . register ( get_task_queue ) QueueManager . register ( get_result_queue ) # \u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u4e5f\u5c31\u662f\u8fd0\u884ctask_master.py\u7684\u673a\u5668: server_addr = 127.0.0.1 print ( Connect to server %s ... % server_addr ) # \u7aef\u53e3\u548c\u9a8c\u8bc1\u7801\u6ce8\u610f\u4fdd\u6301\u4e0etask_master.py\u8bbe\u7f6e\u7684\u5b8c\u5168\u4e00\u81f4: m = QueueManager ( address = ( server_addr , 5000 ), authkey = b abc ) # \u4ece\u7f51\u7edc\u8fde\u63a5: m . connect () # \u83b7\u53d6Queue\u7684\u5bf9\u8c61: task = m . get_task_queue () result = m . get_result_queue () # \u4ecetask\u961f\u5217\u53d6\u4efb\u52a1,\u5e76\u628a\u7ed3\u679c\u5199\u5165result\u961f\u5217: for i in range ( 10 ): try : n = task . get ( timeout = 1 ) print ( run task %d * %d ... % ( n , n )) r = %d * %d = %d % ( n , n , n * n ) time . sleep ( 1 ) result . put ( r ) except Queue . Empty : print ( task queue is empty. ) # \u5904\u7406\u7ed3\u675f: print ( worker exit. ) \u4efb\u52a1\u8fdb\u7a0b\u8981\u901a\u8fc7\u7f51\u7edc\u8fde\u63a5\u5230\u670d\u52a1\u8fdb\u7a0b\uff0c\u6240\u4ee5\u8981\u6307\u5b9a\u670d\u52a1\u8fdb\u7a0b\u7684IP\u3002 \u73b0\u5728\uff0c\u53ef\u4ee5\u8bd5\u8bd5\u5206\u5e03\u5f0f\u8fdb\u7a0b\u7684\u5de5\u4f5c\u6548\u679c\u4e86\u3002\u5148\u542f\u52a8task_master.py\u670d\u52a1\u8fdb\u7a0b\uff1a $ python3 task_master.py Put task 3411 ... Put task 1605 ... Put task 1398 ... Put task 4729 ... Put task 5300 ... Put task 7471 ... Put task 68 ... Put task 4219 ... Put task 339 ... Put task 7866 ... Try get results... task_master.py \u8fdb\u7a0b\u53d1\u9001\u5b8c\u4efb\u52a1\u540e\uff0c\u5f00\u59cb\u7b49\u5f85result\u961f\u5217\u7684\u7ed3\u679c\u3002\u73b0\u5728\u542f\u52a8 task_worker.py \u8fdb\u7a0b\uff1a $ python3 task_worker.py Connect to server 127 .0.0.1... run task 3411 * 3411 ... run task 1605 * 1605 ... run task 1398 * 1398 ... run task 4729 * 4729 ... run task 5300 * 5300 ... run task 7471 * 7471 ... run task 68 * 68 ... run task 4219 * 4219 ... run task 339 * 339 ... run task 7866 * 7866 ... worker exit. task_worker.py \u8fdb\u7a0b\u7ed3\u675f\uff0c\u5728 task_master.py \u8fdb\u7a0b\u4e2d\u4f1a\u7ee7\u7eed\u6253\u5370\u51fa\u7ed3\u679c\uff1a Result: 3411 * 3411 = 11634921 Result: 1605 * 1605 = 2576025 Result: 1398 * 1398 = 1954404 Result: 4729 * 4729 = 22363441 Result: 5300 * 5300 = 28090000 Result: 7471 * 7471 = 55815841 Result: 68 * 68 = 4624 Result: 4219 * 4219 = 17799961 Result: 339 * 339 = 114921 Result: 7866 * 7866 = 61873956 \u4e2a\u7b80\u5355\u7684Master/Worker\u6a21\u578b\u6709\u4ec0\u4e48\u7528\uff1f\u5176\u5b9e\u8fd9\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u4f46\u771f\u6b63\u7684\u5206\u5e03\u5f0f\u8ba1\u7b97\uff0c\u628a\u4ee3\u7801\u7a0d\u52a0\u6539\u9020\uff0c\u542f\u52a8\u591a\u4e2aworker\uff0c\u5c31\u53ef\u4ee5\u628a\u4efb\u52a1\u5206\u5e03\u5230\u51e0\u53f0\u751a\u81f3\u51e0\u5341\u53f0\u673a\u5668\u4e0a\uff0c\u6bd4\u5982\u628a\u8ba1\u7b97n*n\u7684\u4ee3\u7801\u6362\u6210\u53d1\u9001\u90ae\u4ef6\uff0c\u5c31\u5b9e\u73b0\u4e86\u90ae\u4ef6\u961f\u5217\u7684\u5f02\u6b65\u53d1\u9001\u3002 Queue\u5bf9\u8c61\u5b58\u50a8\u5728\u54ea\uff1f\u6ce8\u610f\u5230task_worker.py\u4e2d\u6839\u672c\u6ca1\u6709\u521b\u5efaQueue\u7684\u4ee3\u7801\uff0c\u6240\u4ee5\uff0cQueue\u5bf9\u8c61\u5b58\u50a8\u5728task_master.py\u8fdb\u7a0b\u4e2d\uff1a \u800c Queue \u4e4b\u6240\u4ee5\u80fd\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\uff0c\u5c31\u662f\u901a\u8fc7 QueueManager \u5b9e\u73b0\u7684\u3002\u7531\u4e8e QueueManager \u7ba1\u7406\u7684\u4e0d\u6b62\u4e00\u4e2a Queue \uff0c\u6240\u4ee5\uff0c\u8981\u7ed9\u6bcf\u4e2a Queue \u7684\u7f51\u7edc\u8c03\u7528\u63a5\u53e3\u8d77\u4e2a\u540d\u5b57\uff0c\u6bd4\u5982 get_task_queue \u3002 authkey \u6709\u4ec0\u4e48\u7528\uff1f\u8fd9\u662f\u4e3a\u4e86\u4fdd\u8bc1\u4e24\u53f0\u673a\u5668\u6b63\u5e38\u901a\u4fe1\uff0c\u4e0d\u88ab\u5176\u4ed6\u673a\u5668\u6076\u610f\u5e72\u6270\u3002\u5982\u679c task_worker.py \u7684 authkey \u548c task_master.py \u7684 authkey \u4e0d\u4e00\u81f4\uff0c\u80af\u5b9a\u8fde\u63a5\u4e0d\u4e0a\u3002 \u7ebf\u7a0b \u7ebf\u7a0b\u662f\u4e00\u79cd\u8f7b\u91cf\u8fdb\u7a0b\uff0c\u5b9e\u9645\u4e0a\u5728linux\u5185\u6838\u4e2d\uff0c\u4e24\u8005\u51e0\u4e4e\u6ca1\u6709\u5dee\u522b\uff0c\u9664\u4e86\u4e00\u70b9\u2014\u2014 \u7ebf\u7a0b\u5e76\u4e0d\u4ea7\u751f\u65b0\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\u63cf\u8ff0\u7b26\u8868\uff0c\u800c\u662f\u590d\u7528\u7236\u8fdb\u7a0b\u7684 \u3002 \u4f46\u662f\u65e0\u8bba\u5982\u4f55\uff0c\u7ebf\u7a0b\u7684\u8c03\u5ea6\u548c\u8fdb\u7a0b\u4e00\u6837\uff0c\u5fc5\u987b\u9677\u5165\u5185\u6838\u6001\u3002 \u7ebf\u7a0b\u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\uff0c\u800c\u8fdb\u7a0b\u7531\u81f3\u5c11\u4e00\u4e2a\u7ebf\u7a0b\u7ec4\u6210\u3002\u5982\u4f55\u8c03\u5ea6\u8fdb\u7a0b\u548c\u7ebf\u7a0b\uff0c\u5b8c\u5168\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\uff0c\u7a0b\u5e8f\u81ea\u5df1\u4e0d\u80fd\u51b3\u5b9a\u4ec0\u4e48\u65f6\u5019\u6267\u884c\uff0c\u6267\u884c\u591a\u957f\u65f6\u95f4\u3002 \u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u4e2a\u6267\u884c\u6d41\uff0c\u72ec\u7acb\u6267\u884c\u5b83\u81ea\u5df1\u7684\u7a0b\u5e8f\u4ee3\u7801\u3002\u7ebf\u7a0b\uff08thread\uff09\u662f\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u8fdb\u884c\u8fd0\u7b97\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\u3002 \u7ebf\u7a0b\u4e0a\u4e0b\u6587\u4e00\u822c\u53ea\u5305\u542bCPU\u4e0a\u4e0b\u6587\u53ca\u5176\u4ed6\u7684\u7ebf\u7a0b\u7ba1\u7406\u4fe1\u606f\u3002\u7ebf\u7a0b\u521b\u5efa\u7684\u5f00\u9500\u4e3b\u8981\u53d6\u51b3\u4e8e\u4e3a\u7ebf\u7a0b\u5806\u6808\u7684\u5efa\u7acb\u800c\u5206\u914d\u5185\u5b58\u7684\u5f00\u9500\uff0c\u8fd9\u4e9b\u5f00\u9500\u5e76\u4e0d\u5927\u3002\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u53d1\u751f\u5728\u4e24\u4e2a\u7ebf\u7a0b\u9700\u8981\u540c\u6b65\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u8fdb\u5165\u5171\u4eab\u6570\u636e\u6bb5\u3002\u5207\u6362\u53eaCPU\u5bc4\u5b58\u5668\u503c\u9700\u8981\u5b58\u50a8\uff0c\u5e76\u968f\u540e\u7528\u5c06\u8981\u5207\u6362\u5230\u7684\u7ebf\u7a0b\u7684\u539f\u5148\u5b58\u50a8\u7684\u503c\u91cd\u65b0\u52a0\u8f7d\u5230CPU\u5bc4\u5b58\u5668\u4e2d\u53bb\u3002 \u7528\u6237\u7ea7\u7ebf\u7a0b\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u5bf9\u5f15\u8d77\u963b\u585e\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u8c03\u7528\u4f1a\u7acb\u5373\u963b\u585e\u8be5\u7ebf\u7a0b\u6240\u5c5e\u7684\u6574\u4e2a\u8fdb\u7a0b\u3002\u5185\u6838\u5b9e\u73b0\u7ebf\u7a0b\u5219\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u8ddf\u8fdb\u7a0b\u4e00\u6837\u5927\uff0c\u6240\u4ee5\u6298\u8877\u7684\u65b9\u6cd5\u662f\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff08Lightweight\uff09\u3002\u5728 Linux \u4e2d\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u7ec4\u57fa\u672c\u4e0a\u5c31\u662f\u5b9e\u73b0\u4e86\u591a\u7ebf\u7a0b\u5e94\u7528\u7684\u4e00\u7ec4\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u4e2d\u5b58\u5728\u7528\u6237\u7ebf\u7a0b\u3001\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u3001\u5185\u6838\u7ebf\u7a0b\u3002 \u8bed\u8a00\u5c42\u9762\u5b9e\u73b0\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u7684\u6bd4\u8f83\u5c11\uff0cstackless python\uff0cerlang \u652f\u6301\uff0cjava \u5e76\u4e0d\u652f\u6301\u3002 python\u7ebf\u7a0b Python\u7684\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u4e24\u4e2a\u6a21\u5757\uff1a _thread \u548c threading \uff0c_ thread \u662f\u4f4e\u7ea7\u6a21\u5757\uff0c threading \u662f\u9ad8\u7ea7\u6a21\u5757\uff0c\u5bf9 _thread \u8fdb\u884c\u4e86\u5c01\u88c5\u3002\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f7f\u7528 threading \u8fd9\u4e2a\u9ad8\u7ea7\u6a21\u5757 class FetchUrls ( threading . Thread ): \u4e0b\u8f7dURL\u5185\u5bb9\u7684\u7ebf\u7a0b def __init__ ( self , urls , output ): \u6784\u9020\u5668 @param urls \u9700\u8981\u4e0b\u8f7d\u7684URL\u5217\u8868 @param output \u5199URL\u5185\u5bb9\u7684\u8f93\u51fa\u6587\u4ef6 threading . Thread . __init__ ( self ) self . urls = urls self . output = output def run ( self ): \u5b9e\u73b0\u7236\u7c7bThread\u7684run\u65b9\u6cd5\uff0c\u6253\u5f00URL\uff0c\u5e76\u4e14\u4e00\u4e2a\u4e00\u4e2a\u7684\u4e0b\u8f7dURL\u7684\u5185\u5bb9 while self . urls : url = self . urls . pop () req = urllib2 . Request ( url ) try : d = urllib2 . urlopen ( req ) except urllib2 . URLError , e : print URL %s failed: %s % ( url , e . reason ) self . output . write ( d . read ()) print write done by %s % self . name print URL %s fetched by %s % ( url , self . name ) def main (): # URL\u5217\u88681 urls1 = [ http://www.google.com , http://www.facebook.com ] # URL\u5217\u88682 urls2 = [ http://www.yahoo.com , http://www.youtube.com ] f = open ( output.txt , w+ ) t1 = FetchUrls ( urls1 , f ) t2 = FetchUrls ( urls2 , f ) t1 . start () t2 . start () t1 . join () t2 . join () f . close () if __name__ == __main__ : main () FetchUrls \u7ee7\u627f\u81ea threading.Thread \u542f\u52a8\u4e24\u4e2a FetchUrls \u7ebf\u7a0b\u4f7f\u7528\u4e0d\u540c\u7684urls\u5217\u8868\u5199\u540c\u4e00\u4efd\u6587\u4ef6,\u56e0\u4e3a\u7ebf\u7a0b\u8c03\u5ea6\u4e0d\u4e00\u6837\u5199\u6587\u4ef6\u4f1a\u51fa\u73b0\u672a\u5199\u5b8c\u4e00\u6b21 response \u5207\u6362\u5230\u53e6\u5916\u4e00\u4e2a response ,\u8981\u4fdd\u8bc1\u5199\u6709\u5e8f\u53ef\u5f15\u5165\u9501\u673a\u5236 Lock(\u9501\u673a\u5236) \u591a\u7ebf\u7a0b\u4e2d\uff0c\u6240\u6709\u53d8\u91cf\u90fd\u7531\u6240\u6709\u7ebf\u7a0b\u5171\u4eab,\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u6700\u5927\u7684\u5371\u9669\u5728\u4e8e\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6539\u4e00\u4e2a\u53d8\u91cf,\u6240\u4ee5\u51fa\u73b0\u4e86\u9501\u673a\u5236 \u9501\u6709\u4e24\u79cd\u72b6\u6001\uff1a\u88ab\u9501\uff08 locked \uff09\u548c\u6ca1\u6709\u88ab\u9501\uff08 unlocked \uff09\u3002\u62e5\u6709 acquire() \u548c release() \u4e24\u79cd\u65b9\u6cd5\uff0c\u5e76\u4e14\u9075\u5faa\u4e00\u4e0b\u7684\u89c4\u5219\uff1a \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662funlocked\uff0c\u8c03\u7528acquire()\u65b9\u6cd5\u6539\u53d8\u5b83\u7684\u72b6\u6001\u4e3alocked\uff1b \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662flocked\uff0cacquire()\u65b9\u6cd5\u5c06\u4f1a\u963b\u585e\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528release()\u65b9\u6cd5\u91ca\u653e\u4e86\u9501\uff1b \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662funlocked\u8c03\u7528release()\u4f1a\u629b\u51faRuntimeError\u5f02\u5e38\uff1b \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662flocked\uff0c\u8c03\u7528release()\u65b9\u6cd5\u6539\u53d8\u5b83\u7684\u72b6\u6001\u4e3aunlocked\u3002 \u89e3\u51b3\u4e0a\u9762\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5199\u4e00\u4e2a\u6587\u4ef6\u7684\u95ee\u9898\u7684\u65b9\u6cd5\u5c31\u662f\uff1a\u6211\u4eec\u7ed9\u7c7bFetchUrls\u7684\u6784\u9020\u5668\u4e2d\u4f20\u5165\u4e00\u4e2a\u9501\uff08lock\uff09\uff0c\u4f7f\u7528\u8fd9\u4e2a\u9501\u6765\u4fdd\u62a4\u6587\u4ef6\u64cd\u4f5c\uff0c\u5b9e\u73b0\u5728\u7ed9\u5b9a\u7684\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5199\u6587\u4ef6 import time import urllib2 import threading class FetchUrls ( threading . Thread ): Thread checking URLs. def __init__ ( self , urls , output , lock ): Constructor. @param urls list of urls to check @param output file to write urls output threading . Thread . __init__ ( self ) self . urls = urls self . output = output self . lock = lock def run ( self ): Thread run method. Check URLs one by one. while self . urls : url = self . urls . pop () req = urllib2 . Request ( url ) try : d = urllib2 . urlopen ( req ) except urllib2 . URLError , e : print URL %s failed: %s % ( url , e . reason ) self . lock . acquire () print lock acquired by %s % self . name self . output . write ( d . read ()) print write done by %s % self . name print lock released by %s % self . name self . lock . release () print URL %s fetched by %s % ( url , self . name ) def main (): # list 1 of urls to fetch urls1 = [ http://www.google.com , http://www.facebook.com ] # list 2 of urls to fetch urls2 = [ http://www.yahoo.com , http://www.youtube.com ] lock = threading . Lock () f = open ( output.txt , w+ ) t1 = FetchUrls ( urls1 , f , lock ) t2 = FetchUrls ( urls2 , f , lock ) t1 . start () t2 . start () t1 . join () t2 . join () f . close () if __name__ == __main__ : main () lock acquired by Thread-2 write done by Thread-2 lock released by Thread-2 URL http://www.youtube.com fetched by Thread-2 lock acquired by Thread-1 write done by Thread-1 lock released by Thread-1 URL http://www.facebook.com fetched by Thread-1 lock acquired by Thread-2 write done by Thread-2 lock released by Thread-2 URL http://www.yahoo.com fetched by Thread-2 lock acquired by Thread-1 write done by Thread-1 lock released by Thread-1 URL http://www.google.com fetched by Thread-1 \u53ef\u91cd\u5165\u9501\uff08RLock\uff09 RLock\u662f\u53ef\u91cd\u5165\u9501\uff08reentrant lock\uff09\uff0cacquire()\u80fd\u591f\u4e0d\u88ab\u963b\u585e\u7684\u88ab\u540c\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u591a\u6b21\u3002\u8981\u6ce8\u610f\u7684\u662frelease()\u9700\u8981\u8c03\u7528\u4e0eacquire()\u76f8\u540c\u7684\u6b21\u6570\u624d\u80fd\u91ca\u653e\u9501\u3002 \u4f7f\u7528Lock\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u7b2c\u4e8c\u6b21\u8c03\u7528acquire()\u65f6\u5c06\u88ab\u963b\u585e\uff1a lock = threading . Lock () lock . acquire () lock . acquire () \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fRLock\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u7b2c\u4e8c\u6b21\u8c03\u7528acquire()\u4e0d\u4f1a\u88ab\u963b\u585e: rlock = threading . RLock () rlock . acquire () rlock . acquire () RLock\u4f7f\u7528\u7684\u540c\u6837\u662fthread.allocate_lock()\uff0c\u4e0d\u540c\u7684\u662f\u4ed6\u8ddf\u8e2a\u5bbf\u4e3b\u7ebf\u7a0b\uff08the owner thread\uff09\u6765\u5b9e\u73b0\u53ef\u91cd\u5165\u7684\u7279\u6027\u3002\u4e0b\u9762\u662fRLock\u7684acquire()\u5b9e\u73b0\u3002\u5982\u679c\u8c03\u7528acquire()\u7684\u7ebf\u7a0b\u662f\u8d44\u6e90\u7684\u6240\u6709\u8005\uff0c\u8bb0\u5f55\u8c03\u7528acquire()\u6b21\u6570\u7684\u8ba1\u6570\u5668\u5c31\u4f1a\u52a01\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u5c06\u8bd5\u56fe\u53bb\u83b7\u53d6\u9501\u3002\u7ebf\u7a0b\u7b2c\u4e00\u6b21\u83b7\u5f97\u9501\u65f6\uff0c\u9501\u7684\u62e5\u6709\u8005\u5c06\u4f1a\u88ab\u4fdd\u5b58\uff0c\u540c\u65f6\u8ba1\u6570\u5668\u521d\u59cb\u5316\u4e3a1\u3002 def acquire ( self , blocking = 1 ): me = _get_ident () if self . __owner == me : self . __count = self . __count + 1 ... return 1 rc = self . __block . acquire ( blocking ) if rc : self . __owner = me self . __count = 1 ... ... return rc \u53ef\u91cd\u5165\u9501\uff08RLock\uff09\u7684release()\u65b9\u6cd5\u3002\u9996\u5148\u5b83\u4f1a\u53bb\u786e\u8ba4\u8c03\u7528\u8005\u662f\u5426\u662f\u9501\u7684\u62e5\u6709\u8005\u3002\u5982\u679c\u662f\u7684\u8bdd\uff0c\u8ba1\u6570\u5668\u51cf1\uff1b\u5982\u679c\u8ba1\u6570\u5668\u4e3a0\uff0c\u90a3\u4e48\u9501\u5c06\u4f1a\u88ab\u91ca\u653e\uff0c\u8fd9\u65f6\u5176\u4ed6\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u53bb\u83b7\u53d6\u9501\u4e86 def release ( self ): if self . __owner != _get_ident (): raise RuntimeError ( cannot release un-acquired lock ) self . __count = count = self . __count - 1 if not count : self . __owner = None self . __block . release () ... ... \u6761\u4ef6(Condition) \u6761\u4ef6\u540c\u6b65\u673a\u5236\u662f\u6307\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u7279\u5b9a\u6761\u4ef6\uff0c\u800c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53d1\u51fa\u7279\u5b9a\u6761\u4ef6\u6ee1\u8db3\u7684\u4fe1\u53f7\u3002 \u89e3\u91ca\u6761\u4ef6\u540c\u6b65\u673a\u5236\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u5c31\u662f\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\uff08producer/consumer\uff09\u6a21\u578b\u3002\u751f\u4ea7\u8005\u968f\u673a\u7684\u5f80\u5217\u8868\u4e2d\u201c\u751f\u4ea7\u201d\u4e00\u4e2a\u968f\u673a\u6574\u6570\uff0c\u800c\u6d88\u8d39\u8005\u4ece\u5217\u8868\u4e2d\u201c\u6d88\u8d39\u201d\u6574\u6570\u3002\u5b8c\u6574\u7684\u6e90\u7801\u53ef\u4ee5\u5728threads/condition.py\u4e2d\u627e\u5230 \u5728producer\u7c7b\u4e2d\uff0cproducer\u83b7\u5f97\u9501\uff0c\u751f\u4ea7\u4e00\u4e2a\u968f\u673a\u6574\u6570\uff0c\u901a\u77e5\u6d88\u8d39\u8005\u6709\u4e86\u53ef\u7528\u7684\u201c\u5546\u54c1\u201d\uff0c\u5e76\u4e14\u91ca\u653e\u9501\u3002producer\u65e0\u9650\u5730\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u6574\u6570\uff0c\u540c\u65f6\u5728\u4e24\u4e2a\u6dfb\u52a0\u64cd\u4f5c\u4e2d\u95f4\u968f\u673a\u7684\u505c\u987f\u4e00\u4f1a\u513f\u3002 import time import urllib2 import threading import random class Producer ( threading . Thread ): Produces random integers to a list def __init__ ( self , integers , condition ): Constructor. @param integers list of integers @param condition condition synchronization object threading . Thread . __init__ ( self ) self . integers = integers self . condition = condition def run ( self ): Thread run method. Append random integers to the integers list at random time. for i in range ( 10 ): integer = random . randint ( 0 , 256 ) self . condition . acquire () print condition acquired by %s % self . name self . integers . append ( integer ) print %d appended to list by %s % ( integer , self . name ) print condition notified by %s % self . name self . condition . notify () print condition released by %s % self . name self . condition . release () time . sleep ( 1 ) class Consumer ( threading . Thread ): Consumes random integers from a list def __init__ ( self , integers , condition ): Constructor. @param integers list of integers @param condition condition synchronization object threading . Thread . __init__ ( self ) self . integers = integers self . condition = condition def run ( self ): Thread run method. Consumes integers from list while True : self . condition . acquire () print condition acquired by %s % self . name while True : if self . integers : integer = self . integers . pop () print %d popped from list by %s % ( integer , self . name ) break print condition wait by %s % self . name self . condition . wait () print condition released by %s % self . name self . condition . release () def main (): integers = [] condition = threading . Condition () t1 = Producer ( integers , condition ) t2 = Consumer ( integers , condition ) t1 . start () t2 . start () t1 . join () t2 . join () if __name__ == __main__ : main () condition acquired by Thread-1 159 appended to list by Thread-1 condition notified by Thread-1 condition released by Thread-1 condition acquired by Thread-2 159 popped from list by Thread-2 condition released by Thread-2 condition acquired by Thread-2 condition wait by Thread-2 condition acquired by Thread-1 116 appended to list by Thread-1 condition notified by Thread-1 condition released by Thread-1 116 popped from list by Thread-2 condition released by Thread-2 condition acquired by Thread-2 condition wait by Thread-2 \u5728producer\u7c7b\u4e2d\uff0cproducer\u83b7\u5f97\u9501\uff0c\u751f\u4ea7\u4e00\u4e2a\u968f\u673a\u6574\u6570\uff0c\u901a\u77e5\u6d88\u8d39\u8005\u6709\u4e86\u53ef\u7528\u7684\u201c\u5546\u54c1\u201d\uff0c\u5e76\u4e14\u91ca\u653e\u9501\u3002producer\u65e0\u9650\u5730\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u6574\u6570\uff0c\u540c\u65f6\u5728\u4e24\u4e2a\u6dfb\u52a0\u64cd\u4f5c\u4e2d\u95f4\u968f\u673a\u7684\u505c\u987f\u4e00\u4f1a\u513f \u6d88\u8d39\u8005\uff08consumer\uff09\u7c7b\u3002\u5b83\u83b7\u53d6\u9501\uff0c\u68c0\u67e5\u5217\u8868\u4e2d\u662f\u5426\u6709\u6574\u6570\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u7b49\u5f85\u751f\u4ea7\u8005\u7684\u901a\u77e5\u3002\u5f53\u6d88\u8d39\u8005\u83b7\u53d6\u6574\u6570\u4e4b\u540e\uff0c\u91ca\u653e\u9501\u3002 \u6ce8\u610f\u5728wait()\u65b9\u6cd5\u4e2d\u4f1a\u91ca\u653e\u9501\uff0c\u8fd9\u6837\u751f\u4ea7\u8005\u5c31\u80fd\u83b7\u5f97\u8d44\u6e90\u5e76\u4e14\u751f\u4ea7\u201c\u5546\u54c1\u201d\u3002 Thread-1\u6dfb\u52a0159\u5230\u5217\u8868\u4e2d\uff0c\u901a\u77e5\u6d88\u8d39\u8005\u540c\u65f6\u91ca\u653e\u9501\uff0cThread-2\u83b7\u5f97\u9501\uff0c\u53d6\u56de159\uff0c\u5e76\u4e14\u91ca\u653e\u9501\u3002\u6b64\u65f6\u56e0\u4e3a\u6267\u884ctime.sleep(1)\uff0c\u751f\u4ea7\u8005\u6b63\u5728\u7761\u7720\uff0c\u5f53\u6d88\u8d39\u8005\u518d\u6b21\u8bd5\u56fe\u83b7\u53d6\u6574\u6570\u65f6\uff0c\u5217\u8868\u4e2d\u5e76\u6ca1\u6709\u6574\u6570\uff0c\u8fd9\u65f6\u6d88\u8d39\u8005\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u7b49\u5f85\u751f\u4ea7\u8005\u7684\u901a\u77e5\u3002\u5f53wait()\u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u91ca\u653e\u8d44\u6e90\uff0c\u4ece\u800c\u751f\u4ea7\u8005\u80fd\u591f\u5229\u7528\u8d44\u6e90\u751f\u4ea7\u6574\u6570\u3002 \u4e0b\u9762\u6211\u4eec\u770b\u4e00\u4e0bPython\u5185\u90e8\u662f\u5982\u4f55\u5b9e\u73b0\u6761\u4ef6\u540c\u6b65\u673a\u5236\u7684\u3002\u5982\u679c\u7528\u6237\u6ca1\u6709\u4f20\u5165\u9501\uff08lock\uff09\u5bf9\u8c61\uff0ccondition\u7c7b\u7684\u6784\u9020\u5668\u521b\u5efa\u4e00\u4e2a\u53ef\u91cd\u5165\u9501\uff08RLock\uff09\uff0c\u8fd9\u4e2a\u9501\u5c06\u4f1a\u5728\u8c03\u7528acquire()\u548crelease()\u65f6\u4f7f\u7528 class _Condition ( _Verbose ): def __init__ ( self , lock = None , verbose = None ): _Verbose . __init__ ( self , verbose ) if lock is None : lock = RLock () self . __lock = lock \u63a5\u4e0b\u6765\u662fwait()\u65b9\u6cd5\u3002\u4e3a\u4e86\u7b80\u5316\u8bf4\u660e\uff0c\u6211\u4eec\u5047\u5b9a\u5728\u8c03\u7528wait()\u65b9\u6cd5\u65f6\u4e0d\u4f7f\u7528timeout\u53c2\u6570\u3002wait()\u65b9\u6cd5\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3awaiter\u7684\u9501\uff0c\u5e76\u4e14\u8bbe\u7f6e\u9501\u7684\u72b6\u6001\u4e3alocked\u3002\u8fd9\u4e2awaiter\u9501\u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u901a\u8baf\uff0c\u8fd9\u6837\u751f\u4ea7\u8005\uff08\u5728\u751f\u4ea7\u5b8c\u6574\u6570\u4e4b\u540e\uff09\u5c31\u53ef\u4ee5\u901a\u77e5\u6d88\u8d39\u8005\u91ca\u653ewaiter()\u9501\u3002\u9501\u5bf9\u8c61\u5c06\u4f1a\u88ab\u6dfb\u52a0\u5230\u7b49\u5f85\u8005\u5217\u8868\uff0c\u5e76\u4e14\u5728\u8c03\u7528waiter.acquire()\u65f6\u88ab\u963b\u585e\u3002\u4e00\u5f00\u59cbcondition\u9501\u7684\u72b6\u6001\u88ab\u4fdd\u5b58\uff0c\u5e76\u4e14\u5728wait()\u7ed3\u675f\u65f6\u88ab\u6062\u590d\u3002 def wait ( self , timeout = None ): ... waiter = _allocate_lock () waiter . acquire () self . __waiters . append ( waiter ) saved_state = self . _release_save () try : # \u65e0\u8bba\u5982\u4f55\u6062\u590d\u72b6\u6001 (\u4f8b\u5982, KeyboardInterrupt) if timeout is None : waiter . acquire () ... ... finally : self . _acquire_restore ( saved_state ) \u5f53\u751f\u4ea7\u8005\u8c03\u7528notify()\u65b9\u6cd5\u65f6\uff0cnotify()\u91ca\u653ewaiter\u9501\uff0c\u5524\u9192\u88ab\u963b\u585e\u7684\u6d88\u8d39\u8005\u3002 def notify ( self , n = 1 ): ... __waiters = self . __waiters waiters = __waiters [: n ] ... for waiter in waiters : waiter . release () try : __waiters . remove ( waiter ) except ValueError : pass \u540c\u6837Condition\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u548c\u201cwith\u201d\u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u8fd9\u6837\u201cwith\u201d\u8bed\u53e5\u4e0a\u4e0b\u6587\u4f1a\u5e2e\u6211\u4eec\u8c03\u7528acquire()\u548crelease()\u65b9\u6cd5\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u4f7f\u7528\u201cwith\u201d\u8bed\u53e5\u6539\u5199\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7c7b\u3002 class Producer ( threading . Thread ): ... def run ( self ): while True : integer = random . randint ( 0 , 256 ) with self . condition : print condition acquired by %s % self . name self . integers . append ( integer ) print %d appended to list by %s % ( integer , self . name ) print condition notified by %s % self . name self . condition . notify () print condition released by %s % self . name time . sleep ( 1 ) class Consumer ( threading . Thread ): ... def run ( self ): while True : with self . condition : print condition acquired by %s % self . name while True : if self . integers : integer = self . integers . pop () print %d popped from list by %s % ( integer , self . name ) break print condition wait by %s % self . name self . condition . wait () print condition released by %s % self . name \u4fe1\u53f7\u91cf\uff08Semaphore\uff09 \u4fe1\u53f7\u91cf\u540c\u6b65\u57fa\u4e8e\u5185\u90e8\u8ba1\u6570\u5668\uff0c\u6bcf\u8c03\u7528\u4e00\u6b21acquire()\uff0c\u8ba1\u6570\u5668\u51cf1\uff1b\u6bcf\u8c03\u7528\u4e00\u6b21release()\uff0c\u8ba1\u6570\u5668\u52a01.\u5f53\u8ba1\u6570\u5668\u4e3a0\u65f6\uff0cacquire()\u8c03\u7528\u88ab\u963b\u585e\u3002\u8fd9\u662f\u8fea\u79d1\u65af\u5f7b\uff08Dijkstra\uff09\u4fe1\u53f7\u91cf\u6982\u5ff5P()\u548cV()\u7684Python\u5b9e\u73b0\u3002\u4fe1\u53f7\u91cf\u540c\u6b65\u673a\u5236\u9002\u7528\u4e8e\u8bbf\u95ee\u50cf\u670d\u52a1\u5668\u8fd9\u6837\u7684\u6709\u9650\u8d44\u6e90\u3002 \u4fe1\u53f7\u91cf\u540c\u6b65\u7684\u4f8b\u5b50\uff1a semaphore = threading . Semaphore () semaphore . acquire () # \u4f7f\u7528\u5171\u4eab\u8d44\u6e90 ... semaphore . release () \u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u4fe1\u53f7\u91cf\u540c\u6b65\u5728Python\u5185\u90e8\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002\u6784\u9020\u5668\u4f7f\u7528\u53c2\u6570value\u6765\u8868\u793a\u8ba1\u6570\u5668\u7684\u521d\u59cb\u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a1\u3002\u4e00\u4e2a\u6761\u4ef6\u9501\u5b9e\u4f8b\u7528\u4e8e\u4fdd\u62a4\u8ba1\u6570\u5668\uff0c\u540c\u65f6\u5f53\u4fe1\u53f7\u91cf\u88ab\u91ca\u653e\u65f6\u901a\u77e5\u5176\u4ed6\u7ebf\u7a0b\u3002 lass _Semaphore ( _Verbose ): ... def __init__ ( self , value = 1 , verbose = None ): _Verbose . __init__ ( self , verbose ) self . __cond = Condition ( Lock ()) self . __value = value acquire()\u65b9\u6cd5\u3002\u5982\u679c\u4fe1\u53f7\u91cf\u4e3a0\uff0c\u7ebf\u7a0b\u88ab\u6761\u4ef6\u9501\u7684wait()\u65b9\u6cd5\u963b\u585e\uff0c\u76f4\u5230\u88ab\u5176\u4ed6\u7ebf\u7a0b\u5524\u9192\uff1b\u5982\u679c\u8ba1\u6570\u5668\u5927\u4e8e0\uff0c\u8c03\u7528acquire()\u4f7f\u8ba1\u6570\u5668\u51cf1\u3002 def acquire ( self , blocking = 1 ): rc = False self . __cond . acquire () while self . __value == 0 : ... self . __cond . wait () else : self . __value = self . __value - 1 rc = True self . __cond . release () return rc \u4fe1\u53f7\u91cf\u7c7b\u7684release()\u65b9\u6cd5\u589e\u52a0\u8ba1\u6570\u5668\u7684\u503c\u5e76\u4e14\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u3002 def release ( self ): self . __cond . acquire () self . __value = self . __value + 1 self . __cond . notify () self . __cond . release () \u8fd8\u6709\u4e00\u4e2a\u201c\u6709\u9650\u201d(bounded)\u4fe1\u53f7\u91cf\u7c7b\uff0c\u53ef\u4ee5\u786e\u4fddrelease()\u65b9\u6cd5\u7684\u8c03\u7528\u6b21\u6570\u4e0d\u80fd\u8d85\u8fc7\u7ed9\u5b9a\u7684\u521d\u59cb\u4fe1\u53f7\u91cf\u6570\u503c(value\u53c2\u6570)\uff0c\u4e0b\u9762\u662f\u201c\u6709\u9650\u201d\u4fe1\u53f7\u91cf\u7c7b\u7684Python\u4ee3\u7801\uff1a class _BoundedSemaphore ( _Semaphore ): \u68c0\u67e5release()\u7684\u8c03\u7528\u6b21\u6570\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8eacquire()\u6b21\u6570 def __init__ ( self , value = 1 , verbose = None ): _Semaphore . __init__ ( self , value , verbose ) self . _initial_value = value def release ( self ): if self . _Semaphore__value = self . _initial_value : raise ValueError , Semaphore released too many times return _Semaphore . release ( self ) \u540c\u6837\u4fe1\u53f7\u91cf(Semaphore)\u5bf9\u8c61\u53ef\u4ee5\u548c\u201cwith\u201d\u4e00\u8d77\u4f7f\u7528\uff1a semaphore = threading . Semaphore () with semaphore : # \u4f7f\u7528\u5171\u4eab\u8d44\u6e90 ... \u4e8b\u4ef6\uff08Event\uff09 \u57fa\u4e8e\u4e8b\u4ef6\u7684\u540c\u6b65\u662f\u6307\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u53d1\u9001/\u4f20\u9012\u4e8b\u4ef6\uff0c\u53e6\u5916\u7684\u7ebf\u7a0b\u7b49\u5f85\u4e8b\u4ef6\u7684\u89e6\u53d1\u3002 \u8ba9\u6211\u4eec\u518d\u6765\u770b\u770b\u524d\u9762\u7684\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u4f8b\u5b50\uff0c\u73b0\u5728\u6211\u4eec\u628a\u5b83\u8f6c\u6362\u6210\u4f7f\u7528\u4e8b\u4ef6\u540c\u6b65\u800c\u4e0d\u662f\u6761\u4ef6\u540c\u6b65\u3002\u5b8c\u6574\u7684\u6e90\u7801\u53ef\u4ee5\u5728threads/event.py\u91cc\u9762\u627e\u5230\u3002 \u9996\u5148\u662f\u751f\u4ea7\u8005\u7c7b\uff0c\u6211\u4eec\u4f20\u5165\u4e00\u4e2aEvent\u5b9e\u4f8b\u7ed9\u6784\u9020\u5668\u800c\u4e0d\u662fCondition\u5b9e\u4f8b\u3002\u4e00\u65e6\u6574\u6570\u88ab\u6dfb\u52a0\u8fdb\u5217\u8868\uff0c\u4e8b\u4ef6(event)\u88ab\u8bbe\u7f6e\u548c\u53d1\u9001\u53bb\u5524\u9192\u6d88\u8d39\u8005\u3002\u6ce8\u610f\u4e8b\u4ef6(event)\u5b9e\u4f8b\u9ed8\u8ba4\u662f\u88ab\u53d1\u9001\u7684\u3002 class Producer ( threading . Thread ): \u5411\u5217\u8868\u4e2d\u751f\u4ea7\u968f\u673a\u6574\u6570 def __init__ ( self , integers , event ): \u6784\u9020\u5668 @param integers \u6574\u6570\u5217\u8868 @param event \u4e8b\u4ef6\u540c\u6b65\u5bf9\u8c61 threading . Thread . __init__ ( self ) self . integers = integers self . event = event def run ( self ): \u5b9e\u73b0Thread\u7684run\u65b9\u6cd5\u3002\u5728\u968f\u673a\u65f6\u95f4\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u968f\u673a\u6574\u6570 while True : integer = random . randint ( 0 , 256 ) self . integers . append ( integer ) print %d appended to list by %s % ( integer , self . name ) print event set by %s % self . name self . event . set () #\u8bbe\u7f6e\u4e8b\u4ef6 self . event . clear () #\u53d1\u9001\u4e8b\u4ef6 print event cleared by %s % self . name time . sleep ( 1 ) \u4e8b\u4ef6\u9501\u7684Python\u5185\u90e8\u5b9e\u73b0\uff0c\u9996\u5148\u662fEvent\u9501\u7684\u6784\u9020\u5668\u3002\u6784\u9020\u5668\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a\u6761\u4ef6\uff08Condition\uff09\u9501\uff0c\u6765\u4fdd\u62a4\u4e8b\u4ef6\u6807\u5fd7\uff08event flag\uff09,\u540c\u4e8b\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u5f53\u4e8b\u4ef6\u88ab\u8bbe\u7f6e\u65f6\u3002 class _Event ( _Verbose ): def __init__ ( self , verbose = None ): _Verbose . __init__ ( self , verbose ) self . __cond = Condition ( Lock ()) self . __flag = False \u63a5\u4e0b\u6765\u662fset()\u65b9\u6cd5\uff0c\u5b83\u8bbe\u7f6e\u4e8b\u4ef6\u6807\u5fd7\u4e3aTrue\uff0c\u5e76\u4e14\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u3002\u6761\u4ef6\u9501\u5bf9\u8c61\u4fdd\u62a4\u7a0b\u5e8f\u4fee\u6539\u4e8b\u4ef6\u6807\u5fd7\u72b6\u6001\u7684\u5173\u952e\u90e8\u5206\u3002 def set ( self ): self . __cond . acquire () try : self . __flag = True self . __cond . notify_all () finally : self . __cond . release () \u800cclear()\u65b9\u6cd5\u6b63\u597d\u76f8\u53cd\uff0c\u5b83\u8bbe\u7f6e\u65f6\u95f4\u6807\u5fd7\u4e3aFalse\u3002 def clear ( self ): self . __cond . acquire () try : self . __flag = False finally : self . __cond . release () \u6700\u540e\uff0cwait()\u65b9\u6cd5\u5c06\u963b\u585e\u76f4\u5230\u8c03\u7528\u4e86set()\u65b9\u6cd5\uff0c\u5f53\u4e8b\u4ef6\u6807\u5fd7\u4e3aTrue\u65f6\uff0cwait()\u65b9\u6cd5\u5c31\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002 def wait ( self , timeout = None ): self . __cond . acquire () try : if not self . __flag : #\u5982\u679cflag\u4e0d\u4e3a\u771f self . __cond . wait ( timeout ) finally : self . __cond . release () \u961f\u5217\uff08Queue\uff09 \u961f\u5217\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\uff0c\u4f7f\u7528\u961f\u5217\u6211\u4eec\u4e0d\u7528\u5173\u5fc3\u9501\uff0c\u961f\u5217\u4f1a\u4e3a\u6211\u4eec\u5904\u7406\u9501\u7684\u95ee\u9898\u3002 \u961f\u5217(Queue)\u6709\u4ee5\u4e0b4\u4e2a\u7528\u6237\u611f\u5174\u8da3\u7684\u65b9\u6cd5\uff1a put: \u5411\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u9879\uff1b get: \u4ece\u961f\u5217\u4e2d\u5220\u9664\u5e76\u8fd4\u56de\u4e00\u4e2a\u9879\uff1b task_done: \u5f53\u67d0\u4e00\u9879\u4efb\u52a1\u5b8c\u6210\u65f6\u8c03\u7528\uff1b join: \u963b\u585e\u77e5\u9053\u6240\u6709\u7684\u9879\u76ee\u90fd\u88ab\u5904\u7406\u5b8c \u4e0b\u9762\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\u7684\u4f8b\u5b50\u8f6c\u6362\u6210\u4f7f\u7528\u961f\u5217\u3002\u6e90\u4ee3\u7801\u53ef\u4ee5\u5728threads/queue.py\u4e2d\u627e\u5230\u3002 \u9996\u5148\u662f\u751f\u4ea7\u8005\u7c7b\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u6574\u6570\u5217\u8868\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u961f\u5217\u5c31\u53ef\u4ee5\u5b58\u50a8\u751f\u6210\u7684\u6574\u6570\u3002\u751f\u4ea7\u8005\u7ebf\u7a0b\u5728\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\u4e2d\u751f\u6210\u6574\u6570\u5e76\u5c06\u751f\u6210\u7684\u6574\u6570\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\u3002 import time import threading import random import Queue class Producer ( threading . Thread ): Produces random integers to a list def __init__ ( self , queue ): Constructor. @param integers list of integers @param queue queue synchronization object threading . Thread . __init__ ( self ) self . queue = queue def run ( self ): Thread run method. Append random integers to the integers list at random time. while True : integer = random . randint ( 0 , 256 ) self . queue . put ( integer ) print %d put to queue by %s % ( integer , self . name ) time . sleep ( 1 ) class Consumer ( threading . Thread ): Consumes random integers from a list def __init__ ( self , queue ): Constructor. @param integers list of integers @param queue queue synchronization object threading . Thread . __init__ ( self ) self . queue = queue def run ( self ): Thread run method. Consumes integers from list while True : integer = self . queue . get () print %d popped from list by %s % ( integer , self . name ) self . queue . task_done () def main (): integers = [] queue = Queue . Queue () t1 = Producer ( queue ) t2 = Consumer ( queue ) t1 . start () t2 . start () t1 . join () t2 . join () if __name__ == __main__ : main () \u961f\u5217\u540c\u6b65\u7684\u6700\u5927\u597d\u5904\u5c31\u662f\u961f\u5217\u5e2e\u6211\u4eec\u5904\u7406\u4e86\u9501\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u53bb\u770b\u770b\u5728Python\u5185\u90e8\u662f\u5982\u4f55\u5b9e\u73b0\u961f\u5217\u540c\u6b65\u673a\u5236\u7684\u3002 \u961f\u5217\uff08Queue\uff09\u6784\u9020\u5668\u521b\u5efa\u4e00\u4e2a\u9501\uff0c\u4fdd\u62a4\u961f\u5217\u5143\u7d20\u7684\u6dfb\u52a0\u548c\u5220\u9664\u64cd\u4f5c\u3002\u540c\u65f6\u521b\u5efa\u4e86\u4e00\u4e9b\u6761\u4ef6\u9501\u5bf9\u8c61\u5904\u7406\u961f\u5217\u4e8b\u4ef6\uff0c\u6bd4\u5982\u961f\u5217\u4e0d\u7a7a\u4e8b\u4ef6\uff08\u524a\u9664get()\u7684\u963b\u585e\uff09\uff0c\u961f\u5217\u4e0d\u6ee1\u4e8b\u4ef6\uff08\u524a\u9664put()\u7684\u963b\u585e\uff09\u548c\u6240\u6709\u9879\u76ee\u90fd\u88ab\u5904\u7406\u5b8c\u4e8b\u4ef6\uff08\u524a\u9664join()\u7684\u963b\u585e\uff09\u3002 class Queue : def __init__ ( self , maxsize = 0 ): ... self . mutex = threading . Lock () self . not_empty = threading . Condition ( self . mutex ) self . not_full = threading . Condition ( self . mutex ) self . all_tasks_done = threading . Condition ( self . mutex ) self . unfinished_tasks = 0 put()\u65b9\u6cd5\u5411\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u9879\uff0c\u6216\u8005\u963b\u585e\u5982\u679c\u961f\u5217\u5df2\u6ee1\u3002\u8fd9\u65f6\u961f\u5217\u975e\u7a7a\uff0c\u5b83\u5524\u9192\u963b\u585e\u5728get()\u65b9\u6cd5\u4e2d\u7684\u7ebf\u7a0b\u3002\u66f4\u591a\u5173\u4e8eCondition\u9501\u7684\u5185\u5bb9\u8bf7\u67e5\u770b\u4e0a\u9762\u7684\u8bb2\u89e3\u3002 def put ( self , item , block = True , timeout = None ): ... self . not_full . acquire () try : if self . maxsize 0 : ... elif timeout is None : while self . _qsize () == self . maxsize : self . not_full . wait () self . _put ( item ) self . unfinished_tasks += 1 self . not_empty . notify () finally : self . not_full . release () get()\u65b9\u6cd5\u4ece\u961f\u5217\u4e2d\u83b7\u5f97\u5e76\u5220\u9664\u4e00\u4e2a\u9879\uff0c\u6216\u8005\u963b\u585e\u5f53\u961f\u5217\u4e3a\u7a7a\u65f6\u3002\u8fd9\u65f6\u961f\u5217\u4e0d\u6ee1\uff0c\u4ed6\u5524\u9192\u963b\u585e\u5728put()\u65b9\u6cd5\u4e2d\u7684\u7ebf\u7a0b\u3002 def get ( self , block = True , timeout = None ): ... self . not_empty . acquire () try : ... elif timeout is None : while not self . _qsize (): self . not_empty . wait () item = self . _get () self . not_full . notify () return item finally : self . not_empty . release () \u5f53\u8c03\u7528task_done()\u65b9\u6cd5\u65f6\uff0c\u672a\u5b8c\u6210\u4efb\u52a1\u7684\u6570\u91cf\u51cf1\u3002\u5982\u679c\u672a\u5b8c\u6210\u4efb\u52a1\u7684\u6570\u91cf\u4e3a0\uff0c\u7ebf\u7a0b\u7b49\u5f85\u961f\u5217\u5b8c\u6210join()\u65b9\u6cd5\u3002 def task_done ( self ): self . all_tasks_done . acquire () try : unfinished = self . unfinished_tasks - 1 if unfinished = 0 : if unfinished 0 : raise ValueError ( task_done() called too many times ) self . all_tasks_done . notify_all () self . unfinished_tasks = unfinished finally : self . all_tasks_done . release () def join ( self ): self . all_tasks_done . acquire () try : while self . unfinished_tasks : self . all_tasks_done . wait () finally : self . all_tasks_done . release () ThreadLocal import threading # \u521b\u5efa\u5168\u5c40ThreadLocal\u5bf9\u8c61: local_school = threading . local () def process_student (): # \u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u5173\u8054\u7684student: std = local_school . student print ( Hello, %s (in %s ) % ( std , threading . current_thread () . name )) def process_thread ( name ): # \u7ed1\u5b9aThreadLocal\u7684student: local_school . student = name process_student () t1 = threading . Thread ( target = process_thread , args = ( Alice ,), name = Thread-A ) t2 = threading . Thread ( target = process_thread , args = ( Bob ,), name = Thread-B ) t1 . start () t2 . start () t1 . join () t2 . join () Hello, Alice (in Thread-A) Hello, Bob (in Thread-B) \u5168\u5c40\u53d8\u91cflocal_school\u5c31\u662f\u4e00\u4e2aThreadLocal\u5bf9\u8c61\uff0c\u6bcf\u4e2aThread\u5bf9\u5b83\u90fd\u53ef\u4ee5\u8bfb\u5199student\u5c5e\u6027\uff0c\u4f46\u4e92\u4e0d\u5f71\u54cd\u3002\u4f60\u53ef\u4ee5\u628alocal_school\u770b\u6210\u5168\u5c40\u53d8\u91cf\uff0c\u4f46\u6bcf\u4e2a\u5c5e\u6027\u5982local_school.student\u90fd\u662f\u7ebf\u7a0b\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u53ef\u4ee5\u4efb\u610f\u8bfb\u5199\u800c\u4e92\u4e0d\u5e72\u6270\uff0c\u4e5f\u4e0d\u7528\u7ba1\u7406\u9501\u7684\u95ee\u9898\uff0cThreadLocal\u5185\u90e8\u4f1a\u5904\u7406 \u591a\u6838cpu \u5982\u679c\u4f60\u4e0d\u5e78\u62e5\u6709\u4e00\u4e2a\u591a\u6838CPU\uff0c\u4f60\u80af\u5b9a\u5728\u60f3\uff0c\u591a\u6838\u5e94\u8be5\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u591a\u4e2a\u7ebf\u7a0b\u3002 \u5982\u679c\u5199\u4e00\u4e2a\u6b7b\u5faa\u73af\u7684\u8bdd\uff0c\u4f1a\u51fa\u73b0\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f \u6253\u5f00Mac OS X\u7684Activity Monitor\uff0c\u6216\u8005Windows\u7684Task Manager\uff0c\u90fd\u53ef\u4ee5\u76d1\u63a7\u67d0\u4e2a\u8fdb\u7a0b\u7684CPU\u4f7f\u7528\u7387\u3002 \u6211\u4eec\u53ef\u4ee5\u76d1\u63a7\u5230\u4e00\u4e2a\u6b7b\u5faa\u73af\u7ebf\u7a0b\u4f1a100%\u5360\u7528\u4e00\u4e2aCPU\u3002 \u5982\u679c\u6709\u4e24\u4e2a\u6b7b\u5faa\u73af\u7ebf\u7a0b\uff0c\u5728\u591a\u6838CPU\u4e2d\uff0c\u53ef\u4ee5\u76d1\u63a7\u5230\u4f1a\u5360\u7528200%\u7684CPU\uff0c\u4e5f\u5c31\u662f\u5360\u7528\u4e24\u4e2aCPU\u6838\u5fc3\u3002 \u8981\u60f3\u628aN\u6838CPU\u7684\u6838\u5fc3\u5168\u90e8\u8dd1\u6ee1\uff0c\u5c31\u5fc5\u987b\u542f\u52a8N\u4e2a\u6b7b\u5faa\u73af\u7ebf\u7a0b\u3002 \u8bd5\u8bd5\u7528Python\u5199\u4e2a\u6b7b\u5faa\u73af\uff1a import threading , multiprocessing def loop (): x = 0 while True : x = x ^ 1 for i in range ( multiprocessing . cpu_count ()): t = threading . Thread ( target = loop ) t . start () \u542f\u52a8\u4e0eCPU\u6838\u5fc3\u6570\u91cf\u76f8\u540c\u7684N\u4e2a\u7ebf\u7a0b\uff0c\u57284\u6838CPU\u4e0a\u53ef\u4ee5\u76d1\u63a7\u5230CPU\u5360\u7528\u7387\u4ec5\u6709102%\uff0c\u4e5f\u5c31\u662f\u4ec5\u4f7f\u7528\u4e86\u4e00\u6838\u3002 \u4f46\u662f\u7528C\u3001C++\u6216Java\u6765\u6539\u5199\u76f8\u540c\u7684\u6b7b\u5faa\u73af\uff0c\u76f4\u63a5\u53ef\u4ee5\u628a\u5168\u90e8\u6838\u5fc3\u8dd1\u6ee1\uff0c4\u6838\u5c31\u8dd1\u5230400%\uff0c8\u6838\u5c31\u8dd1\u5230800%\uff0c\u4e3a\u4ec0\u4e48Python\u4e0d\u884c\u5462\uff1f \u56e0\u4e3aPython\u7684\u7ebf\u7a0b\u867d\u7136\u662f\u771f\u6b63\u7684\u7ebf\u7a0b\uff0c\u4f46\u89e3\u91ca\u5668\u6267\u884c\u4ee3\u7801\u65f6\uff0c\u6709\u4e00\u4e2aGIL\u9501\uff1aGlobal Interpreter Lock\uff0c\u4efb\u4f55Python\u7ebf\u7a0b\u6267\u884c\u524d\uff0c\u5fc5\u987b\u5148\u83b7\u5f97GIL\u9501\uff0c\u7136\u540e\uff0c\u6bcf\u6267\u884c100\u6761\u5b57\u8282\u7801\uff0c\u89e3\u91ca\u5668\u5c31\u81ea\u52a8\u91ca\u653eGIL\u9501\uff0c\u8ba9\u522b\u7684\u7ebf\u7a0b\u6709\u673a\u4f1a\u6267\u884c\u3002\u8fd9\u4e2aGIL\u5168\u5c40\u9501\u5b9e\u9645\u4e0a\u628a\u6240\u6709\u7ebf\u7a0b\u7684\u6267\u884c\u4ee3\u7801\u90fd\u7ed9\u4e0a\u4e86\u9501\uff0c\u6240\u4ee5\uff0c\u591a\u7ebf\u7a0b\u5728Python\u4e2d\u53ea\u80fd\u4ea4\u66ff\u6267\u884c\uff0c\u5373\u4f7f100\u4e2a\u7ebf\u7a0b\u8dd1\u5728100\u6838CPU\u4e0a\uff0c\u4e5f\u53ea\u80fd\u7528\u52301\u4e2a\u6838\u3002 GIL\u662fPython\u89e3\u91ca\u5668\u8bbe\u8ba1\u7684\u5386\u53f2\u9057\u7559\u95ee\u9898\uff0c\u901a\u5e38\u6211\u4eec\u7528\u7684\u89e3\u91ca\u5668\u662f\u5b98\u65b9\u5b9e\u73b0\u7684CPython\uff0c\u8981\u771f\u6b63\u5229\u7528\u591a\u6838\uff0c\u9664\u975e\u91cd\u5199\u4e00\u4e2a\u4e0d\u5e26GIL\u7684\u89e3\u91ca\u5668\u3002 \u6240\u4ee5\uff0c\u5728Python\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a\u7ebf\u7a0b\uff0c\u4f46\u4e0d\u8981\u6307\u671b\u80fd\u6709\u6548\u5229\u7528\u591a\u6838\u3002\u5982\u679c\u4e00\u5b9a\u8981\u901a\u8fc7\u591a\u7ebf\u7a0b\u5229\u7528\u591a\u6838\uff0c\u90a3\u53ea\u80fd\u901a\u8fc7C\u6269\u5c55\u6765\u5b9e\u73b0\uff0c\u4e0d\u8fc7\u8fd9\u6837\u5c31\u5931\u53bb\u4e86Python\u7b80\u5355\u6613\u7528\u7684\u7279\u70b9\u3002 \u4e0d\u8fc7\uff0c\u4e5f\u4e0d\u7528\u8fc7\u4e8e\u62c5\u5fc3\uff0cPython\u867d\u7136\u4e0d\u80fd\u5229\u7528\u591a\u7ebf\u7a0b\u5b9e\u73b0\u591a\u6838\u4efb\u52a1\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u591a\u8fdb\u7a0b\u5b9e\u73b0\u591a\u6838\u4efb\u52a1\u3002\u591a\u4e2aPython\u8fdb\u7a0b\u6709\u5404\u81ea\u72ec\u7acb\u7684GIL\u9501\uff0c\u4e92\u4e0d\u5f71\u54cd \u8ba1\u7b97\u5bc6\u96c6\u578b vs. IO\u5bc6\u96c6\u578b \u662f\u5426\u91c7\u7528\u591a\u4efb\u52a1\u7684\u7b2c\u4e8c\u4e2a\u8003\u8651\u662f\u4efb\u52a1\u7684\u7c7b\u578b\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u4efb\u52a1\u5206\u4e3a\u8ba1\u7b97\u5bc6\u96c6\u578b\u548cIO\u5bc6\u96c6\u578b\u3002 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u7684\u7279\u70b9\u662f\u8981\u8fdb\u884c\u5927\u91cf\u7684\u8ba1\u7b97\uff0c\u6d88\u8017CPU\u8d44\u6e90\uff0c\u6bd4\u5982\u8ba1\u7b97\u5706\u5468\u7387\u3001\u5bf9\u89c6\u9891\u8fdb\u884c\u9ad8\u6e05\u89e3\u7801\u7b49\u7b49\uff0c\u5168\u9760CPU\u7684\u8fd0\u7b97\u80fd\u529b\u3002\u8fd9\u79cd\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u867d\u7136\u4e5f\u53ef\u4ee5\u7528\u591a\u4efb\u52a1\u5b8c\u6210\uff0c\u4f46\u662f\u4efb\u52a1\u8d8a\u591a\uff0c\u82b1\u5728\u4efb\u52a1\u5207\u6362\u7684\u65f6\u95f4\u5c31\u8d8a\u591a\uff0cCPU\u6267\u884c\u4efb\u52a1\u7684\u6548\u7387\u5c31\u8d8a\u4f4e\uff0c\u6240\u4ee5\uff0c\u8981\u6700\u9ad8\u6548\u5730\u5229\u7528CPU\uff0c\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u540c\u65f6\u8fdb\u884c\u7684\u6570\u91cf\u5e94\u5f53\u7b49\u4e8eCPU\u7684\u6838\u5fc3\u6570\u3002 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u7531\u4e8e\u4e3b\u8981\u6d88\u8017CPU\u8d44\u6e90\uff0c\u56e0\u6b64\uff0c\u4ee3\u7801\u8fd0\u884c\u6548\u7387\u81f3\u5173\u91cd\u8981\u3002Python\u8fd9\u6837\u7684\u811a\u672c\u8bed\u8a00\u8fd0\u884c\u6548\u7387\u5f88\u4f4e\uff0c\u5b8c\u5168\u4e0d\u9002\u5408\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u5bf9\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6700\u597d\u7528C\u8bed\u8a00\u7f16\u5199\u3002 \u7b2c\u4e8c\u79cd\u4efb\u52a1\u7684\u7c7b\u578b\u662fIO\u5bc6\u96c6\u578b\uff0c\u6d89\u53ca\u5230\u7f51\u7edc\u3001\u78c1\u76d8IO\u7684\u4efb\u52a1\u90fd\u662fIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u8fd9\u7c7b\u4efb\u52a1\u7684\u7279\u70b9\u662fCPU\u6d88\u8017\u5f88\u5c11\uff0c\u4efb\u52a1\u7684\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u5728\u7b49\u5f85IO\u64cd\u4f5c\u5b8c\u6210\uff08\u56e0\u4e3aIO\u7684\u901f\u5ea6\u8fdc\u8fdc\u4f4e\u4e8eCPU\u548c\u5185\u5b58\u7684\u901f\u5ea6\uff09\u3002\u5bf9\u4e8eIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u4efb\u52a1\u8d8a\u591a\uff0cCPU\u6548\u7387\u8d8a\u9ad8\uff0c\u4f46\u4e5f\u6709\u4e00\u4e2a\u9650\u5ea6\u3002\u5e38\u89c1\u7684\u5927\u90e8\u5206\u4efb\u52a1\u90fd\u662fIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6bd4\u5982Web\u5e94\u7528\u3002 IO\u5bc6\u96c6\u578b\u4efb\u52a1\u6267\u884c\u671f\u95f4\uff0c99%\u7684\u65f6\u95f4\u90fd\u82b1\u5728IO\u4e0a\uff0c\u82b1\u5728CPU\u4e0a\u7684\u65f6\u95f4\u5f88\u5c11\uff0c\u56e0\u6b64\uff0c\u7528\u8fd0\u884c\u901f\u5ea6\u6781\u5feb\u7684C\u8bed\u8a00\u66ff\u6362\u7528Python\u8fd9\u6837\u8fd0\u884c\u901f\u5ea6\u6781\u4f4e\u7684\u811a\u672c\u8bed\u8a00\uff0c\u5b8c\u5168\u65e0\u6cd5\u63d0\u5347\u8fd0\u884c\u6548\u7387\u3002\u5bf9\u4e8eIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6700\u5408\u9002\u7684\u8bed\u8a00\u5c31\u662f\u5f00\u53d1\u6548\u7387\u6700\u9ad8\uff08\u4ee3\u7801\u91cf\u6700\u5c11\uff09\u7684\u8bed\u8a00\uff0c\u811a\u672c\u8bed\u8a00\u662f\u9996\u9009\uff0cC\u8bed\u8a00\u6700\u5dee\u3002 \u534f\u7a0b \u534f\u7a0b\u662f\u8f7b\u91cf\u7ea7\u7684\u7ebf\u7a0b\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u8f7b\u677e\u521b\u5efa\u6570\u5341\u4e07\u8ba1\u7684\u534f\u7a0b\u3002\u4ece\u7ef4\u57fa\u767e\u79d1\u4e0a\u770b\uff0c\u4eceKnuth\u8001\u7237\u5b50\u7684\u57fa\u672c\u7b97\u6cd5\u5377\u4e0a\u770b\u201c\u5b50\u7a0b\u5e8f\u5176\u5b9e\u662f\u534f\u7a0b\u7684\u7279\u4f8b\u201d\u3002\u5b50\u7a0b\u5e8f\u662f\u4ec0\u4e48\uff1f\u5b50\u7a0b\u5e8f\uff08Subroutine, procedure, function, routine, method, subprogram\uff09\uff0c\u5c31\u662f\u51fd\u6570\u561b\uff01\u6240\u4ee5\u534f\u7a0b\u4e5f\u6ca1\u4ec0\u4e48\u4e86\u4e0d\u8d77\u7684\uff0c\u5c31\u662f\u66f4\u4e00\u822c\u610f\u4e49\u7684\u7a0b\u5e8f\u7ec4\u4ef6\uff0c\u90a3\u4f60\u5185\u5b58\u7a7a\u95f4\u591f\u5927\uff0c\u521b\u5efa\u591a\u5c11\u4e2a\u51fd\u6570\u8fd8\u4e0d\u662f\u968f\u4f60\u5417\uff1f \u534f\u7a0b\u53ef\u4ee5\u901a\u8fc7yield\u6765\u8c03\u7528\u5176\u5b83\u534f\u7a0b\u3002\u901a\u8fc7yield\u65b9\u5f0f\u8f6c\u79fb\u6267\u884c\u6743\u7684\u534f\u7a0b\u4e4b\u95f4\u4e0d\u662f\u8c03\u7528\u8005\u4e0e\u88ab\u8c03\u7528\u8005\u7684\u5173\u7cfb\uff0c\u800c\u662f\u5f7c\u6b64\u5bf9\u79f0\u3001\u5e73\u7b49\u7684\u3002\u534f\u7a0b\u7684\u8d77\u59cb\u5904\u662f\u7b2c\u4e00\u4e2a\u5165\u53e3\u70b9\uff0c\u5728\u534f\u7a0b\u91cc\uff0c\u8fd4\u56de\u70b9\u4e4b\u540e\u662f\u63a5\u4e0b\u6765\u7684\u5165\u53e3\u70b9\u3002\u5b50\u4f8b\u7a0b\u7684\u751f\u547d\u671f\u9075\u5faa\u540e\u8fdb\u5148\u51fa\uff08\u6700\u540e\u4e00\u4e2a\u88ab\u8c03\u7528\u7684\u5b50\u4f8b\u7a0b\u6700\u5148\u8fd4\u56de\uff09\uff1b\u76f8\u53cd\uff0c\u534f\u7a0b\u7684\u751f\u547d\u671f\u5b8c\u5168\u7531\u4ed6\u4eec\u7684\u4f7f\u7528\u7684\u9700\u8981\u51b3\u5b9a\u3002 \u7ebf\u7a0b\u548c\u534f\u7a0b\u7684\u533a\u522b \u4e00\u65e6\u521b\u5efa\u5b8c\u7ebf\u7a0b\uff0c\u4f60\u5c31\u65e0\u6cd5\u51b3\u5b9a\u4ed6\u4ec0\u4e48\u65f6\u5019\u83b7\u5f97\u65f6\u95f4\u7247\uff0c\u4ec0\u4e48\u65f6\u5019\u8ba9\u51fa\u65f6\u95f4\u7247\u4e86\uff0c\u4f60\u628a\u5b83\u4ea4\u7ed9\u4e86\u5185\u6838\u3002\u800c\u534f\u7a0b\u7f16\u5199\u8005\uff0c\u4e00\u662f\u53ef\u63a7\u7684\u5207\u6362\u65f6\u673a\uff0c\u4e8c\u662f\u5f88\u5c0f\u7684\u5207\u6362\u4ee3\u4ef7\u3002\u4ece\u64cd\u4f5c\u7cfb\u7edf\u6709\u6ca1\u6709\u8c03\u5ea6\u6743\u4e0a\u770b\uff0c\u534f\u7a0b\u5c31\u662f\u56e0\u4e3a\u4e0d\u9700\u8981\u8fdb\u884c\u5185\u6838\u6001\u7684\u5207\u6362\uff0c\u6240\u4ee5\u4f1a\u4f7f\u7528\u5b83 \u4e3a\u4ec0\u4e48\u8981\u7528\u534f\u7a0b \u72b6\u6001\u673a:\u5728\u4e00\u4e2a\u5b50\u4f8b\u7a0b\u91cc\u5b9e\u73b0\u72b6\u6001\u673a\uff0c\u8fd9\u91cc\u72b6\u6001\u7531\u8be5\u8fc7\u7a0b\u5f53\u524d\u7684\u51fa\u53e3\uff0f\u5165\u53e3\u70b9\u786e\u5b9a\uff1b\u8fd9\u53ef\u4ee5\u4ea7\u751f\u53ef\u8bfb\u6027\u66f4\u9ad8\u7684\u4ee3\u7801\u3002 \u89d2\u8272\u6a21\u578b:\u5e76\u884c\u7684\u89d2\u8272\u6a21\u578b\uff0c\u4f8b\u5982\u8ba1\u7b97\u673a\u6e38\u620f\u3002\u6bcf\u4e2a\u89d2\u8272\u6709\u81ea\u5df1\u7684\u8fc7\u7a0b\uff08\u8fd9\u53c8\u5728\u903b\u8f91\u4e0a\u5206\u79bb\u4e86\u4ee3\u7801\uff09\uff0c\u4f46\u4ed6\u4eec\u81ea\u613f\u5730\u5411\u987a\u5e8f\u6267\u884c\u5404\u89d2\u8272\u8fc7\u7a0b\u7684 \u4e2d\u592e\u8c03\u5ea6\u5668\u4ea4\u51fa\u63a7\u5236\uff08\u8fd9\u662f\u5408\u4f5c\u5f0f\u591a\u4efb\u52a1\u7684\u4e00\u79cd\u5f62\u5f0f\uff09\u3002 \u4ea7\u751f\u5668:\u5b83\u6709\u52a9\u4e8e\u8f93\u5165\uff0f\u8f93\u51fa\u548c\u5bf9\u6570\u636e\u7ed3\u6784\u7684\u901a\u7528\u904d\u5386\u3002 \u7f16\u7a0b\u8bed\u8a00\u534f\u7a0b\u5b9e\u73b0 \u8bed\u8a00/\u5e73\u53f0 \u5b9e\u73b0\u7248\u672c \u534f\u7a0b\u540d\u79f0 \u5907\u6ce8 GoLang \u539f\u751f\u652f\u6301 goroutine Erlang \u539f\u751f\u652f\u6301 process \u51fd\u6570\u5f0f\u7f16\u7a0b Scala \u539f\u751f\u652f\u6301 actor \u51fd\u6570\u5f0f\u7f16\u7a0b Python 2.5 \u7248\u672c\u540e coroutine \u5b98\u65b9 Python\u4e0d\u5b8c\u5168\u5b9e\u73b0\uff0cStackless Perl 6.0 \u7248\u672c\u540e coroutine Ruby 1.9 \u7248\u672c\u540e fiber Lua \u539f\u751f\u652f\u6301 coroutine C# .Net 2.0 \u7248\u672c\u540e fiber https://segmentfault.com/a/1190000001813992 http://boolan.com/lecture/1000001045 http://www.cnblogs.com/shenguanpu/archive/2013/05/05/3060616.html http://yoyzhou.github.io/blog/2013/02/28/python-threads-synchronization-locks/","title":"\u7ebf\u7a0b"},{"location":"python/py_thread/#_1","text":"","title":"\u8fdb\u7a0b\u4e0e\u7ebf\u7a0b"},{"location":"python/py_thread/#_2","text":"\u8fdb\u7a0b\u662f\u4e00\u79cd\u53e4\u8001\u800c\u5178\u578b\u7684\u4e0a\u4e0b\u6587\u7cfb\u7edf\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u72ec\u7acb\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u8d44\u6e90\u53e5\u67c4\uff0c\u4ed6\u4eec\u4e92\u76f8\u4e4b\u95f4\u4e0d\u53d1\u751f\u5e72\u6270\u3002 \u6bcf\u4e2a\u8fdb\u7a0b\u5728\u5185\u6838\u4e2d\u4f1a\u6709\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u8fdb\u884c\u63cf\u8ff0\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u3002\u8fd9\u4e9b\u63cf\u8ff0\u7b26\u5305\u542b\u4e86\u7cfb\u7edf\u7ba1\u7406\u8fdb\u7a0b\u6240\u9700\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u653e\u5728\u4e00\u4e2a\u53eb\u505a\u4efb\u52a1\u961f\u5217\u7684\u961f\u5217\u91cc\u9762\u3002\u5f53\u65b0\u5efa\u8fdb\u7a0b\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5206\u914d\u65b0\u7684\u8fdb\u7a0b\u63cf\u8ff0\u7b26\uff0c\u5e76\u4e14\u5206\u914d\u65b0\u7684\u5730\u5740\u7a7a\u95f4(\u548c\u7236\u5730\u5740\u7a7a\u95f4\u7684\u6620\u5c04\u4fdd\u6301\u4e00\u81f4\uff0c\u4f46\u662f\u4e24\u8005\u540c\u65f6\u8fdb\u5165COW\u72b6\u6001)\u3002\u8fd9\u4e9b\u8fc7\u7a0b\u9700\u8981\u4e00\u5b9a\u7684\u5f00\u9500\u3002 \u64cd\u4f5c\u7cfb\u7edf\u4e2d\u6700\u6838\u5fc3\u7684\u6982\u5ff5\u662f\u8fdb\u7a0b\uff0c\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u6700\u91cd\u8981\u7684\u95ee\u9898\u662f\u8fdb\u7a0b\u95f4\u901a\u4fe1\u3002 \u8fdb\u7a0b\u662f\u201c\u7a0b\u5e8f\u6267\u884c\u7684\u4e00\u4e2a\u5b9e\u4f8b\u201d\uff0c\u62c5\u5f53\u5206\u914d\u7cfb\u7edf\u8d44\u6e90\u7684\u5b9e\u4f53\u3002\u8fdb\u7a0b\u521b\u5efa\u5fc5\u987b\u5206\u914d\u4e00\u4e2a\u5b8c\u6574\u7684\u72ec\u7acb\u5730\u5740\u7a7a\u95f4\u3002 \u8fdb\u7a0b\u5207\u6362\u53ea\u53d1\u751f\u5728\u5185\u6838\u6001\uff0c\u4e24\u6b65\uff1a \u5207\u6362\u9875\u5168\u5c40\u76ee\u5f55\u4ee5\u5b89\u88c5\u4e00\u4e2a\u65b0\u7684\u5730\u5740\u7a7a\u95f4\uff1b \u5207\u6362\u5185\u6838\u6001\u5806\u6808\u548c\u786c\u4ef6\u4e0a\u4e0b\u6587\u3002","title":"\u8fdb\u7a0b"},{"location":"python/py_thread/#_3","text":"\u5ffd\u7565\u53bblinux\u5185\u6838\u590d\u6742\u7684\u72b6\u6001\u8f6c\u79fb\u8868\uff0c\u6211\u4eec\u5b9e\u9645\u4e0a\u53ef\u4ee5\u628a\u8fdb\u7a0b\u72b6\u6001\u5f52\u7ed3\u4e3a\u4e09\u4e2a\u6700\u4e3b\u8981\u7684\u72b6\u6001\uff1a \u5c31\u7eea\u6001 \uff0c \u8fd0\u884c\u6001 \uff0c \u7761\u7720\u6001 \u3002\u8fd9\u5c31\u662f\u4efb\u4f55\u4e00\u672c\u7cfb\u7edf\u4e66\u4e0a\u90fd\u6709\u7684\u4e09\u6001\u8f6c\u6362\u56fe\u3002 \u5c31\u7eea\u548c\u6267\u884c\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\uff0c\u57fa\u672c\u8fd9\u5c31\u662f\u8c03\u5ea6\u7684\u8fc7\u7a0b\u3002\u800c\u5f53\u6267\u884c\u6001\u7a0b\u5e8f\u9700\u8981\u7b49\u5f85\u67d0\u4e9b\u6761\u4ef6(\u6700\u5178\u578b\u5c31\u662fIO)\u65f6\uff0c\u5c31\u4f1a\u9677\u5165\u7761\u7720\u6001\u3002\u800c\u6761\u4ef6\u8fbe\u6210\u540e\uff0c\u4e00\u822c\u4f1a\u81ea\u52a8\u8fdb\u5165\u5c31\u7eea\u3002","title":"\u8fdb\u7a0b\u72b6\u6001"},{"location":"python/py_thread/#_4","text":"\u6307\u7684\u662f\u7a0b\u5e8f\u5728\u6267\u884c\u4e2d\u7684\u4e00\u4e2a\u72b6\u6001\u3002\u901a\u5e38\u6211\u4eec\u4f1a\u7528\u8c03\u7528\u6808\u6765\u8868\u793a\u8fd9\u4e2a\u72b6\u6001\u2014\u2014\u6808\u8bb0\u8f7d\u4e86\u6bcf\u4e2a\u8c03\u7528\u5c42\u7ea7\u6267\u884c\u5230\u54ea\u91cc\uff0c\u8fd8\u6709\u6267\u884c\u65f6\u7684\u73af\u5883\u60c5\u51b5\u7b49\u6240\u6709\u6709\u5173\u7684\u4fe1\u606f","title":"\u4e0a\u4e0b\u6587"},{"location":"python/py_thread/#_5","text":"\u5f53\u8fdb\u7a0b\u9700\u8981\u5728\u67d0\u4e2a\u6587\u4ef6\u53e5\u67c4\u4e0a\u505aIO\uff0c\u8fd9\u4e2afd\u53c8\u6ca1\u6709\u6570\u636e\u7ed9\u4ed6\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u53d1\u751f\u963b\u585e\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u8bb0\u5f55XX\u8fdb\u7a0b\u963b\u585e\u5728\u4e86XX fd\u4e0a\uff0c\u7136\u540e\u5c06\u8fdb\u7a0b\u6807\u8bb0\u4e3a\u7761\u7720\u6001\uff0c\u5e76\u8c03\u5ea6\u51fa\u53bb\u3002\u5f53fd\u4e0a\u6709\u6570\u636e\u65f6(\u4f8b\u5982\u5bf9\u7aef\u53d1\u9001\u7684\u6570\u636e\u5230\u8fbe)\uff0c\u5c31\u4f1a\u5524\u9192\u963b\u585e\u5728fd\u4e0a\u7684\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u4f1a\u968f\u540e\u8fdb\u5165\u5c31\u7eea\u961f\u5217\uff0c\u7b49\u5f85\u5408\u9002\u7684\u65f6\u95f4\u88ab\u8c03\u5ea6\u3002 \u963b\u585e\u540e\u7684\u5524\u9192\u4e5f\u662f\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u8bdd\u9898\u3002\u5f53\u591a\u4e2a\u4e0a\u4e0b\u6587\u963b\u585e\u5728\u4e00\u4e2afd\u4e0a(\u867d\u7136\u4e0d\u591a\u89c1\uff0c\u4f46\u662f\u540e\u9762\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u4f8b\u5b50)\uff0c\u800c\u4e14fd\u5c31\u7eea\u65f6\uff0c\u5e94\u8be5\u5524\u9192\u591a\u5c11\u4e2a\u4e0a\u4e0b\u6587\u5462\uff1f\u4f20\u7edf\u4e0a\u5e94\u5f53\u5524\u9192\u6240\u6709\u4e0a\u4e0b\u6587\uff0c\u56e0\u4e3a\u5982\u679c\u4ec5\u5524\u9192\u4e00\u4e2a\uff0c\u800c\u8fd9\u4e2a\u4e0a\u4e0b\u6587\u53c8\u4e0d\u80fd\u6d88\u8d39\u6240\u6709\u6570\u636e\u65f6\uff0c\u5c31\u4f1a\u4f7f\u5f97\u5176\u4ed6\u4e0a\u4e0b\u6587\u5904\u4e8e\u65e0\u8c13\u7684\u6b7b\u9501\u4e2d\u3002 \u4f46\u662f\u6709\u4e2a\u8457\u540d\u7684\u4f8b\u5b50\u2014\u2014accept\uff0c\u4e5f\u662f\u4f7f\u7528\u8bfb\u5c31\u7eea\u6765\u8868\u793a\u6536\u5230\u7684\u3002\u5982\u679c\u8bd5\u56fe\u7528\u591a\u4e2a\u7ebf\u7a0b\u6765accept\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u5f53\u6709\u65b0\u8fde\u63a5\u65f6\uff0c\u6240\u6709\u4e0a\u4e0b\u6587\u90fd\u4f1a\u5c31\u7eea\uff0c\u4f46\u662f\u53ea\u6709\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u9645\u83b7\u5f97fd\uff0c\u5176\u4ed6\u7684\u88ab\u8c03\u5ea6\u540e\u53c8\u7acb\u523b\u963b\u585e\u3002\u8fd9\u5c31\u662f\u60ca\u7fa4\u95ee\u9898thundering herd problem\u3002 \u73b0\u4ee3linux\u5185\u6838\u5df2\u7ecf\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u65b9\u6cd5\u60ca\u4eba\u7684\u7b80\u5355\u2014\u2014accept\u65b9\u6cd5\u52a0\u9501\u3002","title":"\u963b\u585e"},{"location":"python/py_thread/#_6","text":"\u5728\u8fd9\u91cc\u5728\u591a\u8bb2\u4e00\u4e9b,\u5e76\u53d1\u548c\u5e76\u884c\u662f\u5f97\u4ece\u7269\u7406\u786c\u4ef6\u65b9\u9762\u6765\u8003\u8651.\u5728\u4ee5\u524d\u7535\u8111\u662f\u5355\u6838\u7684\u65f6\u5019,\u4e00\u4e2acup\u6838\u5fc3\u53ea\u80fd\u8fdb\u884c\u5355\u4e2a\u4efb\u52a1,\u5c06\u5355\u4e2acup\u8fd0\u884c\u65f6\u95f4\u5206\u914d\u7ed9\u591a\u4e2a\u4efb\u52a1\u8fd0\u884c,\u8fd9\u5c31\u662f\u5e76\u53d1,\u8ba9\u4f60\u770b\u8d77\u6765\u50cf\u662f\u591a\u4e2a\u4efb\u52a1\u540c\u65f6\u6267\u884c,\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u4e2a\u4efb\u52a1\u4e00\u4e2a\u4efb\u52a1\u7684\u6267\u884c. \u800c\u5e76\u884c,\u662f\u5728\u591a\u6838cup\u7535\u8111\u4e0a,\u4e3a\u6bcf\u4e00\u4e2acup\u6838\u5fc3\u5206\u914d\u4e00\u4e2a\u4efb\u52a1,\u662f\u771f\u6b63\u7684\u591a\u4efb\u52a1\u6267\u884c.","title":"\u5e76\u53d1\u548c\u5e76\u884c"},{"location":"python/py_thread/#_7","text":"\u540c\u6b65 \u540c\u6b65\u5462.\u5c31\u662f\u7a0b\u5e8f\u4e00\u4e2a\u8bed\u53e5\u4e00\u4e2a\u8bed\u53e5\u987a\u5e8f\u6267\u884c,\u5f88\u7b26\u5408\u4eba\u5f97\u601d\u7ef4,\u662f\u7ebf\u6027\u6267\u884c. \u5f02\u6b65 \u5f02\u6b65\u7684\u7279\u6027\u5c31\u662f\u6267\u884c\u8d77\u6765\u4e0d\u4f1a\u963b\u585e \u56de\u8c03 \u56de\u8c03\u662f\u5728\u7b49\u5f85\u67d0\u4e00\u4ef6\u4e8b\u60c5\u5b8c\u6210\u4e4b\u540e,\u5728\u8fd0\u884c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570","title":"\u540c\u6b65,\u5f02\u6b65,\u56de\u8c03"},{"location":"python/py_thread/#python","text":"","title":"python\u8fdb\u7a0b"},{"location":"python/py_thread/#multiprocessing","text":"from multiprocessing import Process import os # \u5b50\u8fdb\u7a0b\u8981\u6267\u884c\u7684\u4ee3\u7801 def run_proc ( name ): print ( Run child process %s ( %s )... % ( name , os . getpid ())) if __name__ == __main__ : print ( Parent process %s . % os . getpid ()) p = Process ( target = run_proc , args = ( test ,)) print ( Child process will start. ) p . start () p . join () print ( Child process end. ) Parent process 928. Process will start. Run child process test (929)... Process end.","title":"multiprocessing"},{"location":"python/py_thread/#pool","text":"from multiprocessing import Pool import os , time , random def long_time_task ( name ): print ( Run task %s ( %s )... % ( name , os . getpid ())) start = time . time () time . sleep ( random . random () * 3 ) end = time . time () print ( Task %s runs %0.2f seconds. % ( name , ( end - start ))) if __name__ == __main__ : print ( Parent process %s . % os . getpid ()) p = Pool ( 4 ) for i in range ( 5 ): p . apply_async ( long_time_task , args = ( i ,)) print ( Waiting for all subprocesses done... ) p . close () p . join () print ( All subprocesses done. ) Parent process 669. Waiting for all subprocesses done... Run task 0 (671)... Run task 1 (672)... Run task 2 (673)... Run task 3 (674)... Task 2 runs 0.14 seconds. Run task 4 (673)... Task 1 runs 0.27 seconds. Task 3 runs 0.86 seconds. Task 0 runs 1.41 seconds. Task 4 runs 1.91 seconds. All subprocesses done.","title":"\u8fdb\u7a0b\u6c60(Pool)"},{"location":"python/py_thread/#subprocess","text":"\u6211\u4eec\u90fd\u662f\u5728\u521b\u5efa\u5e76\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b\u3002\u50cfLinux\u8fdb\u7a0b\u90a3\u6837\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5fork\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5e76\u8ba9\u8fd9\u4e2a\u5b50\u8fdb\u7a0bexec\u53e6\u5916\u4e00\u4e2a\u7a0b\u5e8f\u3002\u5728Python\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u6807\u51c6\u5e93\u4e2d\u7684subprocess\u5305\u6765fork\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5e76\u8fd0\u884c\u4e00\u4e2a\u5916\u90e8\u7684\u7a0b\u5e8f os.fork \u4e5f\u53ef\u4ee5\u5728Python\u7a0b\u5e8f\u4e2d\u8f7b\u677e\u521b\u5efa\u5b50\u8fdb\u7a0b import subprocess print ( $ nslookup www.python.org ) r = subprocess . call ([ nslookup , www.python.org ]) print ( Exit code: , r )","title":"\u5b50\u8fdb\u7a0b subprocess"},{"location":"python/py_thread/#_8","text":"Queue from multiprocessing import Process , Queue import os , time , random # \u5199\u6570\u636e\u8fdb\u7a0b\u6267\u884c\u7684\u4ee3\u7801: def write ( q ): print ( Process to write: %s % os . getpid ()) for value in [ A , B , C ]: print ( Put %s to queue... % value ) q . put ( value ) time . sleep ( random . random ()) # \u8bfb\u6570\u636e\u8fdb\u7a0b\u6267\u884c\u7684\u4ee3\u7801: def read ( q ): print ( Process to read: %s % os . getpid ()) while True : value = q . get ( True ) print ( Get %s from queue. % value ) if __name__ == __main__ : # \u7236\u8fdb\u7a0b\u521b\u5efaQueue\uff0c\u5e76\u4f20\u7ed9\u5404\u4e2a\u5b50\u8fdb\u7a0b\uff1a q = Queue () pw = Process ( target = write , args = ( q ,)) pr = Process ( target = read , args = ( q ,)) # \u542f\u52a8\u5b50\u8fdb\u7a0bpw\uff0c\u5199\u5165: pw . start () # \u542f\u52a8\u5b50\u8fdb\u7a0bpr\uff0c\u8bfb\u53d6: pr . start () # \u7b49\u5f85pw\u7ed3\u675f: pw . join () # pr\u8fdb\u7a0b\u91cc\u662f\u6b7b\u5faa\u73af\uff0c\u65e0\u6cd5\u7b49\u5f85\u5176\u7ed3\u675f\uff0c\u53ea\u80fd\u5f3a\u884c\u7ec8\u6b62: pr . terminate () Process to write: 50563 Put A to queue... Process to read: 50564 Get A from queue. Put B to queue... Get B from queue. Put C to queue... Get C from queue. \u5728Unix/Linux\u4e0b\uff0cmultiprocessing\u6a21\u5757\u5c01\u88c5\u4e86fork()\u8c03\u7528\uff0c\u4f7f\u6211\u4eec\u4e0d\u9700\u8981\u5173\u6ce8fork()\u7684\u7ec6\u8282\u3002\u7531\u4e8eWindows\u6ca1\u6709fork\u8c03\u7528\uff0c\u56e0\u6b64\uff0cmultiprocessing\u9700\u8981\u201c\u6a21\u62df\u201d\u51fafork\u7684\u6548\u679c\uff0c\u7236\u8fdb\u7a0b\u6240\u6709Python\u5bf9\u8c61\u90fd\u5fc5\u987b\u901a\u8fc7pickle\u5e8f\u5217\u5316\u518d\u4f20\u5230\u5b50\u8fdb\u7a0b\u53bb\uff0c\u6240\u6709\uff0c\u5982\u679cmultiprocessing\u5728Windows\u4e0b\u8c03\u7528\u5931\u8d25\u4e86\uff0c\u8981\u5148\u8003\u8651\u662f\u4e0d\u662fpickle\u5931\u8d25\u4e86","title":"\u8fdb\u7a0b\u95f4\u901a\u4fe1"},{"location":"python/py_thread/#_9","text":"Python\u7684multiprocessing\u6a21\u5757\u4e0d\u4f46\u652f\u6301\u591a\u8fdb\u7a0b\uff0c\u5176\u4e2dmanagers\u5b50\u6a21\u5757\u8fd8\u652f\u6301\u628a\u591a\u8fdb\u7a0b\u5206\u5e03\u5230\u591a\u53f0\u673a\u5668\u4e0a\u3002\u4e00\u4e2a\u670d\u52a1\u8fdb\u7a0b\u53ef\u4ee5\u4f5c\u4e3a\u8c03\u5ea6\u8005\uff0c\u5c06\u4efb\u52a1\u5206\u5e03\u5230\u5176\u4ed6\u591a\u4e2a\u8fdb\u7a0b\u4e2d\uff0c\u4f9d\u9760\u7f51\u7edc\u901a\u4fe1\u3002\u7531\u4e8emanagers\u6a21\u5757\u5c01\u88c5\u5f88\u597d\uff0c\u4e0d\u5fc5\u4e86\u89e3\u7f51\u7edc\u901a\u4fe1\u7684\u7ec6\u8282\uff0c\u5c31\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u7f16\u5199\u5206\u5e03\u5f0f\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u6709\u4e00\u4e2a\u901a\u8fc7Queue\u901a\u4fe1\u7684\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\uff0c\u73b0\u5728\uff0c\u7531\u4e8e\u5904\u7406\u4efb\u52a1\u7684\u8fdb\u7a0b\u4efb\u52a1\u7e41\u91cd\uff0c\u5e0c\u671b\u628a\u53d1\u9001\u4efb\u52a1\u7684\u8fdb\u7a0b\u548c\u5904\u7406\u4efb\u52a1\u7684\u8fdb\u7a0b\u5206\u5e03\u5230\u4e24\u53f0\u673a\u5668\u4e0a\u3002\u600e\u4e48\u7528\u5206\u5e03\u5f0f\u8fdb\u7a0b\u5b9e\u73b0\uff1f \u539f\u6709\u7684Queue\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\uff0c\u4f46\u662f\uff0c\u901a\u8fc7managers\u6a21\u5757\u628aQueue\u901a\u8fc7\u7f51\u7edc\u66b4\u9732\u51fa\u53bb\uff0c\u5c31\u53ef\u4ee5\u8ba9\u5176\u4ed6\u673a\u5668\u7684\u8fdb\u7a0b\u8bbf\u95eeQueue\u4e86\u3002 \u6211\u4eec\u5148\u770b\u670d\u52a1\u8fdb\u7a0b\uff0c\u670d\u52a1\u8fdb\u7a0b\u8d1f\u8d23\u542f\u52a8Queue\uff0c\u628aQueue\u6ce8\u518c\u5230\u7f51\u7edc\u4e0a\uff0c\u7136\u540e\u5f80Queue\u91cc\u9762\u5199\u5165\u4efb\u52a1 # task_master.py import random , time , queue from multiprocessing.managers import BaseManager # \u53d1\u9001\u4efb\u52a1\u7684\u961f\u5217: task_queue = queue . Queue () # \u63a5\u6536\u7ed3\u679c\u7684\u961f\u5217: result_queue = queue . Queue () # \u4eceBaseManager\u7ee7\u627f\u7684QueueManager: class QueueManager ( BaseManager ): pass # \u628a\u4e24\u4e2aQueue\u90fd\u6ce8\u518c\u5230\u7f51\u7edc\u4e0a, callable\u53c2\u6570\u5173\u8054\u4e86Queue\u5bf9\u8c61: QueueManager . register ( get_task_queue , callable = lambda : task_queue ) QueueManager . register ( get_result_queue , callable = lambda : result_queue ) # \u7ed1\u5b9a\u7aef\u53e35000, \u8bbe\u7f6e\u9a8c\u8bc1\u7801 abc : manager = QueueManager ( address = ( , 5000 ), authkey = b abc ) # \u542f\u52a8Queue: manager . start () # \u83b7\u5f97\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\u7684Queue\u5bf9\u8c61: task = manager . get_task_queue () result = manager . get_result_queue () # \u653e\u51e0\u4e2a\u4efb\u52a1\u8fdb\u53bb: for i in range ( 10 ): n = random . randint ( 0 , 10000 ) print ( Put task %d ... % n ) task . put ( n ) # \u4eceresult\u961f\u5217\u8bfb\u53d6\u7ed3\u679c: print ( Try get results... ) for i in range ( 10 ): r = result . get ( timeout = 10 ) print ( Result: %s % r ) # \u5173\u95ed: manager . shutdown () print ( master exit. ) \u8bf7\u6ce8\u610f\uff0c\u5f53\u6211\u4eec\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u5199\u591a\u8fdb\u7a0b\u7a0b\u5e8f\u65f6\uff0c\u521b\u5efa\u7684Queue\u53ef\u4ee5\u76f4\u63a5\u62ff\u6765\u7528\uff0c\u4f46\u662f\uff0c\u5728\u5206\u5e03\u5f0f\u591a\u8fdb\u7a0b\u73af\u5883\u4e0b\uff0c\u6dfb\u52a0\u4efb\u52a1\u5230Queue\u4e0d\u53ef\u4ee5\u76f4\u63a5\u5bf9\u539f\u59cb\u7684task_queue\u8fdb\u884c\u64cd\u4f5c\uff0c\u90a3\u6837\u5c31\u7ed5\u8fc7\u4e86QueueManager\u7684\u5c01\u88c5\uff0c\u5fc5\u987b\u901a\u8fc7manager.get_task_queue()\u83b7\u5f97\u7684Queue\u63a5\u53e3\u6dfb\u52a0\u3002 \u7136\u540e\uff0c\u5728\u53e6\u4e00\u53f0\u673a\u5668\u4e0a\u542f\u52a8\u4efb\u52a1\u8fdb\u7a0b\uff08\u672c\u673a\u4e0a\u542f\u52a8\u4e5f\u53ef\u4ee5\uff09\uff1a # task_worker.py import time , sys , queue from multiprocessing.managers import BaseManager # \u521b\u5efa\u7c7b\u4f3c\u7684QueueManager: class QueueManager ( BaseManager ): pass # \u7531\u4e8e\u8fd9\u4e2aQueueManager\u53ea\u4ece\u7f51\u7edc\u4e0a\u83b7\u53d6Queue\uff0c\u6240\u4ee5\u6ce8\u518c\u65f6\u53ea\u63d0\u4f9b\u540d\u5b57: QueueManager . register ( get_task_queue ) QueueManager . register ( get_result_queue ) # \u8fde\u63a5\u5230\u670d\u52a1\u5668\uff0c\u4e5f\u5c31\u662f\u8fd0\u884ctask_master.py\u7684\u673a\u5668: server_addr = 127.0.0.1 print ( Connect to server %s ... % server_addr ) # \u7aef\u53e3\u548c\u9a8c\u8bc1\u7801\u6ce8\u610f\u4fdd\u6301\u4e0etask_master.py\u8bbe\u7f6e\u7684\u5b8c\u5168\u4e00\u81f4: m = QueueManager ( address = ( server_addr , 5000 ), authkey = b abc ) # \u4ece\u7f51\u7edc\u8fde\u63a5: m . connect () # \u83b7\u53d6Queue\u7684\u5bf9\u8c61: task = m . get_task_queue () result = m . get_result_queue () # \u4ecetask\u961f\u5217\u53d6\u4efb\u52a1,\u5e76\u628a\u7ed3\u679c\u5199\u5165result\u961f\u5217: for i in range ( 10 ): try : n = task . get ( timeout = 1 ) print ( run task %d * %d ... % ( n , n )) r = %d * %d = %d % ( n , n , n * n ) time . sleep ( 1 ) result . put ( r ) except Queue . Empty : print ( task queue is empty. ) # \u5904\u7406\u7ed3\u675f: print ( worker exit. ) \u4efb\u52a1\u8fdb\u7a0b\u8981\u901a\u8fc7\u7f51\u7edc\u8fde\u63a5\u5230\u670d\u52a1\u8fdb\u7a0b\uff0c\u6240\u4ee5\u8981\u6307\u5b9a\u670d\u52a1\u8fdb\u7a0b\u7684IP\u3002 \u73b0\u5728\uff0c\u53ef\u4ee5\u8bd5\u8bd5\u5206\u5e03\u5f0f\u8fdb\u7a0b\u7684\u5de5\u4f5c\u6548\u679c\u4e86\u3002\u5148\u542f\u52a8task_master.py\u670d\u52a1\u8fdb\u7a0b\uff1a $ python3 task_master.py Put task 3411 ... Put task 1605 ... Put task 1398 ... Put task 4729 ... Put task 5300 ... Put task 7471 ... Put task 68 ... Put task 4219 ... Put task 339 ... Put task 7866 ... Try get results... task_master.py \u8fdb\u7a0b\u53d1\u9001\u5b8c\u4efb\u52a1\u540e\uff0c\u5f00\u59cb\u7b49\u5f85result\u961f\u5217\u7684\u7ed3\u679c\u3002\u73b0\u5728\u542f\u52a8 task_worker.py \u8fdb\u7a0b\uff1a $ python3 task_worker.py Connect to server 127 .0.0.1... run task 3411 * 3411 ... run task 1605 * 1605 ... run task 1398 * 1398 ... run task 4729 * 4729 ... run task 5300 * 5300 ... run task 7471 * 7471 ... run task 68 * 68 ... run task 4219 * 4219 ... run task 339 * 339 ... run task 7866 * 7866 ... worker exit. task_worker.py \u8fdb\u7a0b\u7ed3\u675f\uff0c\u5728 task_master.py \u8fdb\u7a0b\u4e2d\u4f1a\u7ee7\u7eed\u6253\u5370\u51fa\u7ed3\u679c\uff1a Result: 3411 * 3411 = 11634921 Result: 1605 * 1605 = 2576025 Result: 1398 * 1398 = 1954404 Result: 4729 * 4729 = 22363441 Result: 5300 * 5300 = 28090000 Result: 7471 * 7471 = 55815841 Result: 68 * 68 = 4624 Result: 4219 * 4219 = 17799961 Result: 339 * 339 = 114921 Result: 7866 * 7866 = 61873956 \u4e2a\u7b80\u5355\u7684Master/Worker\u6a21\u578b\u6709\u4ec0\u4e48\u7528\uff1f\u5176\u5b9e\u8fd9\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u4f46\u771f\u6b63\u7684\u5206\u5e03\u5f0f\u8ba1\u7b97\uff0c\u628a\u4ee3\u7801\u7a0d\u52a0\u6539\u9020\uff0c\u542f\u52a8\u591a\u4e2aworker\uff0c\u5c31\u53ef\u4ee5\u628a\u4efb\u52a1\u5206\u5e03\u5230\u51e0\u53f0\u751a\u81f3\u51e0\u5341\u53f0\u673a\u5668\u4e0a\uff0c\u6bd4\u5982\u628a\u8ba1\u7b97n*n\u7684\u4ee3\u7801\u6362\u6210\u53d1\u9001\u90ae\u4ef6\uff0c\u5c31\u5b9e\u73b0\u4e86\u90ae\u4ef6\u961f\u5217\u7684\u5f02\u6b65\u53d1\u9001\u3002 Queue\u5bf9\u8c61\u5b58\u50a8\u5728\u54ea\uff1f\u6ce8\u610f\u5230task_worker.py\u4e2d\u6839\u672c\u6ca1\u6709\u521b\u5efaQueue\u7684\u4ee3\u7801\uff0c\u6240\u4ee5\uff0cQueue\u5bf9\u8c61\u5b58\u50a8\u5728task_master.py\u8fdb\u7a0b\u4e2d\uff1a \u800c Queue \u4e4b\u6240\u4ee5\u80fd\u901a\u8fc7\u7f51\u7edc\u8bbf\u95ee\uff0c\u5c31\u662f\u901a\u8fc7 QueueManager \u5b9e\u73b0\u7684\u3002\u7531\u4e8e QueueManager \u7ba1\u7406\u7684\u4e0d\u6b62\u4e00\u4e2a Queue \uff0c\u6240\u4ee5\uff0c\u8981\u7ed9\u6bcf\u4e2a Queue \u7684\u7f51\u7edc\u8c03\u7528\u63a5\u53e3\u8d77\u4e2a\u540d\u5b57\uff0c\u6bd4\u5982 get_task_queue \u3002 authkey \u6709\u4ec0\u4e48\u7528\uff1f\u8fd9\u662f\u4e3a\u4e86\u4fdd\u8bc1\u4e24\u53f0\u673a\u5668\u6b63\u5e38\u901a\u4fe1\uff0c\u4e0d\u88ab\u5176\u4ed6\u673a\u5668\u6076\u610f\u5e72\u6270\u3002\u5982\u679c task_worker.py \u7684 authkey \u548c task_master.py \u7684 authkey \u4e0d\u4e00\u81f4\uff0c\u80af\u5b9a\u8fde\u63a5\u4e0d\u4e0a\u3002","title":"\u5206\u5e03\u5f0f\u8fdb\u7a0b"},{"location":"python/py_thread/#_10","text":"\u7ebf\u7a0b\u662f\u4e00\u79cd\u8f7b\u91cf\u8fdb\u7a0b\uff0c\u5b9e\u9645\u4e0a\u5728linux\u5185\u6838\u4e2d\uff0c\u4e24\u8005\u51e0\u4e4e\u6ca1\u6709\u5dee\u522b\uff0c\u9664\u4e86\u4e00\u70b9\u2014\u2014 \u7ebf\u7a0b\u5e76\u4e0d\u4ea7\u751f\u65b0\u7684\u5730\u5740\u7a7a\u95f4\u548c\u8d44\u6e90\u63cf\u8ff0\u7b26\u8868\uff0c\u800c\u662f\u590d\u7528\u7236\u8fdb\u7a0b\u7684 \u3002 \u4f46\u662f\u65e0\u8bba\u5982\u4f55\uff0c\u7ebf\u7a0b\u7684\u8c03\u5ea6\u548c\u8fdb\u7a0b\u4e00\u6837\uff0c\u5fc5\u987b\u9677\u5165\u5185\u6838\u6001\u3002 \u7ebf\u7a0b\u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\uff0c\u800c\u8fdb\u7a0b\u7531\u81f3\u5c11\u4e00\u4e2a\u7ebf\u7a0b\u7ec4\u6210\u3002\u5982\u4f55\u8c03\u5ea6\u8fdb\u7a0b\u548c\u7ebf\u7a0b\uff0c\u5b8c\u5168\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\uff0c\u7a0b\u5e8f\u81ea\u5df1\u4e0d\u80fd\u51b3\u5b9a\u4ec0\u4e48\u65f6\u5019\u6267\u884c\uff0c\u6267\u884c\u591a\u957f\u65f6\u95f4\u3002 \u7ebf\u7a0b\u662f\u8fdb\u7a0b\u7684\u4e00\u4e2a\u6267\u884c\u6d41\uff0c\u72ec\u7acb\u6267\u884c\u5b83\u81ea\u5df1\u7684\u7a0b\u5e8f\u4ee3\u7801\u3002\u7ebf\u7a0b\uff08thread\uff09\u662f\u64cd\u4f5c\u7cfb\u7edf\u80fd\u591f\u8fdb\u884c\u8fd0\u7b97\u8c03\u5ea6\u7684\u6700\u5c0f\u5355\u4f4d\u3002 \u7ebf\u7a0b\u4e0a\u4e0b\u6587\u4e00\u822c\u53ea\u5305\u542bCPU\u4e0a\u4e0b\u6587\u53ca\u5176\u4ed6\u7684\u7ebf\u7a0b\u7ba1\u7406\u4fe1\u606f\u3002\u7ebf\u7a0b\u521b\u5efa\u7684\u5f00\u9500\u4e3b\u8981\u53d6\u51b3\u4e8e\u4e3a\u7ebf\u7a0b\u5806\u6808\u7684\u5efa\u7acb\u800c\u5206\u914d\u5185\u5b58\u7684\u5f00\u9500\uff0c\u8fd9\u4e9b\u5f00\u9500\u5e76\u4e0d\u5927\u3002\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u53d1\u751f\u5728\u4e24\u4e2a\u7ebf\u7a0b\u9700\u8981\u540c\u6b65\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u8fdb\u5165\u5171\u4eab\u6570\u636e\u6bb5\u3002\u5207\u6362\u53eaCPU\u5bc4\u5b58\u5668\u503c\u9700\u8981\u5b58\u50a8\uff0c\u5e76\u968f\u540e\u7528\u5c06\u8981\u5207\u6362\u5230\u7684\u7ebf\u7a0b\u7684\u539f\u5148\u5b58\u50a8\u7684\u503c\u91cd\u65b0\u52a0\u8f7d\u5230CPU\u5bc4\u5b58\u5668\u4e2d\u53bb\u3002 \u7528\u6237\u7ea7\u7ebf\u7a0b\u4e3b\u8981\u7f3a\u70b9\u5728\u4e8e\u5bf9\u5f15\u8d77\u963b\u585e\u7684\u7cfb\u7edf\u8c03\u7528\u7684\u8c03\u7528\u4f1a\u7acb\u5373\u963b\u585e\u8be5\u7ebf\u7a0b\u6240\u5c5e\u7684\u6574\u4e2a\u8fdb\u7a0b\u3002\u5185\u6838\u5b9e\u73b0\u7ebf\u7a0b\u5219\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u7684\u5f00\u9500\u8ddf\u8fdb\u7a0b\u4e00\u6837\u5927\uff0c\u6240\u4ee5\u6298\u8877\u7684\u65b9\u6cd5\u662f\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\uff08Lightweight\uff09\u3002\u5728 Linux \u4e2d\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u7ec4\u57fa\u672c\u4e0a\u5c31\u662f\u5b9e\u73b0\u4e86\u591a\u7ebf\u7a0b\u5e94\u7528\u7684\u4e00\u7ec4\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u3002\u8fdb\u7a0b\u4e2d\u5b58\u5728\u7528\u6237\u7ebf\u7a0b\u3001\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u3001\u5185\u6838\u7ebf\u7a0b\u3002 \u8bed\u8a00\u5c42\u9762\u5b9e\u73b0\u8f7b\u91cf\u7ea7\u8fdb\u7a0b\u7684\u6bd4\u8f83\u5c11\uff0cstackless python\uff0cerlang \u652f\u6301\uff0cjava \u5e76\u4e0d\u652f\u6301\u3002","title":"\u7ebf\u7a0b"},{"location":"python/py_thread/#python_1","text":"Python\u7684\u6807\u51c6\u5e93\u63d0\u4f9b\u4e86\u4e24\u4e2a\u6a21\u5757\uff1a _thread \u548c threading \uff0c_ thread \u662f\u4f4e\u7ea7\u6a21\u5757\uff0c threading \u662f\u9ad8\u7ea7\u6a21\u5757\uff0c\u5bf9 _thread \u8fdb\u884c\u4e86\u5c01\u88c5\u3002\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f7f\u7528 threading \u8fd9\u4e2a\u9ad8\u7ea7\u6a21\u5757 class FetchUrls ( threading . Thread ): \u4e0b\u8f7dURL\u5185\u5bb9\u7684\u7ebf\u7a0b def __init__ ( self , urls , output ): \u6784\u9020\u5668 @param urls \u9700\u8981\u4e0b\u8f7d\u7684URL\u5217\u8868 @param output \u5199URL\u5185\u5bb9\u7684\u8f93\u51fa\u6587\u4ef6 threading . Thread . __init__ ( self ) self . urls = urls self . output = output def run ( self ): \u5b9e\u73b0\u7236\u7c7bThread\u7684run\u65b9\u6cd5\uff0c\u6253\u5f00URL\uff0c\u5e76\u4e14\u4e00\u4e2a\u4e00\u4e2a\u7684\u4e0b\u8f7dURL\u7684\u5185\u5bb9 while self . urls : url = self . urls . pop () req = urllib2 . Request ( url ) try : d = urllib2 . urlopen ( req ) except urllib2 . URLError , e : print URL %s failed: %s % ( url , e . reason ) self . output . write ( d . read ()) print write done by %s % self . name print URL %s fetched by %s % ( url , self . name ) def main (): # URL\u5217\u88681 urls1 = [ http://www.google.com , http://www.facebook.com ] # URL\u5217\u88682 urls2 = [ http://www.yahoo.com , http://www.youtube.com ] f = open ( output.txt , w+ ) t1 = FetchUrls ( urls1 , f ) t2 = FetchUrls ( urls2 , f ) t1 . start () t2 . start () t1 . join () t2 . join () f . close () if __name__ == __main__ : main () FetchUrls \u7ee7\u627f\u81ea threading.Thread \u542f\u52a8\u4e24\u4e2a FetchUrls \u7ebf\u7a0b\u4f7f\u7528\u4e0d\u540c\u7684urls\u5217\u8868\u5199\u540c\u4e00\u4efd\u6587\u4ef6,\u56e0\u4e3a\u7ebf\u7a0b\u8c03\u5ea6\u4e0d\u4e00\u6837\u5199\u6587\u4ef6\u4f1a\u51fa\u73b0\u672a\u5199\u5b8c\u4e00\u6b21 response \u5207\u6362\u5230\u53e6\u5916\u4e00\u4e2a response ,\u8981\u4fdd\u8bc1\u5199\u6709\u5e8f\u53ef\u5f15\u5165\u9501\u673a\u5236","title":"python\u7ebf\u7a0b"},{"location":"python/py_thread/#lock","text":"\u591a\u7ebf\u7a0b\u4e2d\uff0c\u6240\u6709\u53d8\u91cf\u90fd\u7531\u6240\u6709\u7ebf\u7a0b\u5171\u4eab,\u7ebf\u7a0b\u4e4b\u95f4\u5171\u4eab\u6570\u636e\u6700\u5927\u7684\u5371\u9669\u5728\u4e8e\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6539\u4e00\u4e2a\u53d8\u91cf,\u6240\u4ee5\u51fa\u73b0\u4e86\u9501\u673a\u5236 \u9501\u6709\u4e24\u79cd\u72b6\u6001\uff1a\u88ab\u9501\uff08 locked \uff09\u548c\u6ca1\u6709\u88ab\u9501\uff08 unlocked \uff09\u3002\u62e5\u6709 acquire() \u548c release() \u4e24\u79cd\u65b9\u6cd5\uff0c\u5e76\u4e14\u9075\u5faa\u4e00\u4e0b\u7684\u89c4\u5219\uff1a \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662funlocked\uff0c\u8c03\u7528acquire()\u65b9\u6cd5\u6539\u53d8\u5b83\u7684\u72b6\u6001\u4e3alocked\uff1b \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662flocked\uff0cacquire()\u65b9\u6cd5\u5c06\u4f1a\u963b\u585e\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528release()\u65b9\u6cd5\u91ca\u653e\u4e86\u9501\uff1b \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662funlocked\u8c03\u7528release()\u4f1a\u629b\u51faRuntimeError\u5f02\u5e38\uff1b \u5982\u679c\u4e00\u4e2a\u9501\u7684\u72b6\u6001\u662flocked\uff0c\u8c03\u7528release()\u65b9\u6cd5\u6539\u53d8\u5b83\u7684\u72b6\u6001\u4e3aunlocked\u3002 \u89e3\u51b3\u4e0a\u9762\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5199\u4e00\u4e2a\u6587\u4ef6\u7684\u95ee\u9898\u7684\u65b9\u6cd5\u5c31\u662f\uff1a\u6211\u4eec\u7ed9\u7c7bFetchUrls\u7684\u6784\u9020\u5668\u4e2d\u4f20\u5165\u4e00\u4e2a\u9501\uff08lock\uff09\uff0c\u4f7f\u7528\u8fd9\u4e2a\u9501\u6765\u4fdd\u62a4\u6587\u4ef6\u64cd\u4f5c\uff0c\u5b9e\u73b0\u5728\u7ed9\u5b9a\u7684\u65f6\u95f4\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u5199\u6587\u4ef6 import time import urllib2 import threading class FetchUrls ( threading . Thread ): Thread checking URLs. def __init__ ( self , urls , output , lock ): Constructor. @param urls list of urls to check @param output file to write urls output threading . Thread . __init__ ( self ) self . urls = urls self . output = output self . lock = lock def run ( self ): Thread run method. Check URLs one by one. while self . urls : url = self . urls . pop () req = urllib2 . Request ( url ) try : d = urllib2 . urlopen ( req ) except urllib2 . URLError , e : print URL %s failed: %s % ( url , e . reason ) self . lock . acquire () print lock acquired by %s % self . name self . output . write ( d . read ()) print write done by %s % self . name print lock released by %s % self . name self . lock . release () print URL %s fetched by %s % ( url , self . name ) def main (): # list 1 of urls to fetch urls1 = [ http://www.google.com , http://www.facebook.com ] # list 2 of urls to fetch urls2 = [ http://www.yahoo.com , http://www.youtube.com ] lock = threading . Lock () f = open ( output.txt , w+ ) t1 = FetchUrls ( urls1 , f , lock ) t2 = FetchUrls ( urls2 , f , lock ) t1 . start () t2 . start () t1 . join () t2 . join () f . close () if __name__ == __main__ : main () lock acquired by Thread-2 write done by Thread-2 lock released by Thread-2 URL http://www.youtube.com fetched by Thread-2 lock acquired by Thread-1 write done by Thread-1 lock released by Thread-1 URL http://www.facebook.com fetched by Thread-1 lock acquired by Thread-2 write done by Thread-2 lock released by Thread-2 URL http://www.yahoo.com fetched by Thread-2 lock acquired by Thread-1 write done by Thread-1 lock released by Thread-1 URL http://www.google.com fetched by Thread-1","title":"Lock(\u9501\u673a\u5236)"},{"location":"python/py_thread/#rlock","text":"RLock\u662f\u53ef\u91cd\u5165\u9501\uff08reentrant lock\uff09\uff0cacquire()\u80fd\u591f\u4e0d\u88ab\u963b\u585e\u7684\u88ab\u540c\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u591a\u6b21\u3002\u8981\u6ce8\u610f\u7684\u662frelease()\u9700\u8981\u8c03\u7528\u4e0eacquire()\u76f8\u540c\u7684\u6b21\u6570\u624d\u80fd\u91ca\u653e\u9501\u3002 \u4f7f\u7528Lock\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u7b2c\u4e8c\u6b21\u8c03\u7528acquire()\u65f6\u5c06\u88ab\u963b\u585e\uff1a lock = threading . Lock () lock . acquire () lock . acquire () \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fRLock\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u7b2c\u4e8c\u6b21\u8c03\u7528acquire()\u4e0d\u4f1a\u88ab\u963b\u585e: rlock = threading . RLock () rlock . acquire () rlock . acquire () RLock\u4f7f\u7528\u7684\u540c\u6837\u662fthread.allocate_lock()\uff0c\u4e0d\u540c\u7684\u662f\u4ed6\u8ddf\u8e2a\u5bbf\u4e3b\u7ebf\u7a0b\uff08the owner thread\uff09\u6765\u5b9e\u73b0\u53ef\u91cd\u5165\u7684\u7279\u6027\u3002\u4e0b\u9762\u662fRLock\u7684acquire()\u5b9e\u73b0\u3002\u5982\u679c\u8c03\u7528acquire()\u7684\u7ebf\u7a0b\u662f\u8d44\u6e90\u7684\u6240\u6709\u8005\uff0c\u8bb0\u5f55\u8c03\u7528acquire()\u6b21\u6570\u7684\u8ba1\u6570\u5668\u5c31\u4f1a\u52a01\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u5c06\u8bd5\u56fe\u53bb\u83b7\u53d6\u9501\u3002\u7ebf\u7a0b\u7b2c\u4e00\u6b21\u83b7\u5f97\u9501\u65f6\uff0c\u9501\u7684\u62e5\u6709\u8005\u5c06\u4f1a\u88ab\u4fdd\u5b58\uff0c\u540c\u65f6\u8ba1\u6570\u5668\u521d\u59cb\u5316\u4e3a1\u3002 def acquire ( self , blocking = 1 ): me = _get_ident () if self . __owner == me : self . __count = self . __count + 1 ... return 1 rc = self . __block . acquire ( blocking ) if rc : self . __owner = me self . __count = 1 ... ... return rc \u53ef\u91cd\u5165\u9501\uff08RLock\uff09\u7684release()\u65b9\u6cd5\u3002\u9996\u5148\u5b83\u4f1a\u53bb\u786e\u8ba4\u8c03\u7528\u8005\u662f\u5426\u662f\u9501\u7684\u62e5\u6709\u8005\u3002\u5982\u679c\u662f\u7684\u8bdd\uff0c\u8ba1\u6570\u5668\u51cf1\uff1b\u5982\u679c\u8ba1\u6570\u5668\u4e3a0\uff0c\u90a3\u4e48\u9501\u5c06\u4f1a\u88ab\u91ca\u653e\uff0c\u8fd9\u65f6\u5176\u4ed6\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u53bb\u83b7\u53d6\u9501\u4e86 def release ( self ): if self . __owner != _get_ident (): raise RuntimeError ( cannot release un-acquired lock ) self . __count = count = self . __count - 1 if not count : self . __owner = None self . __block . release () ... ...","title":"\u53ef\u91cd\u5165\u9501\uff08RLock\uff09"},{"location":"python/py_thread/#condition","text":"\u6761\u4ef6\u540c\u6b65\u673a\u5236\u662f\u6307\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u7b49\u5f85\u7279\u5b9a\u6761\u4ef6\uff0c\u800c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u53d1\u51fa\u7279\u5b9a\u6761\u4ef6\u6ee1\u8db3\u7684\u4fe1\u53f7\u3002 \u89e3\u91ca\u6761\u4ef6\u540c\u6b65\u673a\u5236\u7684\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u5c31\u662f\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\uff08producer/consumer\uff09\u6a21\u578b\u3002\u751f\u4ea7\u8005\u968f\u673a\u7684\u5f80\u5217\u8868\u4e2d\u201c\u751f\u4ea7\u201d\u4e00\u4e2a\u968f\u673a\u6574\u6570\uff0c\u800c\u6d88\u8d39\u8005\u4ece\u5217\u8868\u4e2d\u201c\u6d88\u8d39\u201d\u6574\u6570\u3002\u5b8c\u6574\u7684\u6e90\u7801\u53ef\u4ee5\u5728threads/condition.py\u4e2d\u627e\u5230 \u5728producer\u7c7b\u4e2d\uff0cproducer\u83b7\u5f97\u9501\uff0c\u751f\u4ea7\u4e00\u4e2a\u968f\u673a\u6574\u6570\uff0c\u901a\u77e5\u6d88\u8d39\u8005\u6709\u4e86\u53ef\u7528\u7684\u201c\u5546\u54c1\u201d\uff0c\u5e76\u4e14\u91ca\u653e\u9501\u3002producer\u65e0\u9650\u5730\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u6574\u6570\uff0c\u540c\u65f6\u5728\u4e24\u4e2a\u6dfb\u52a0\u64cd\u4f5c\u4e2d\u95f4\u968f\u673a\u7684\u505c\u987f\u4e00\u4f1a\u513f\u3002 import time import urllib2 import threading import random class Producer ( threading . Thread ): Produces random integers to a list def __init__ ( self , integers , condition ): Constructor. @param integers list of integers @param condition condition synchronization object threading . Thread . __init__ ( self ) self . integers = integers self . condition = condition def run ( self ): Thread run method. Append random integers to the integers list at random time. for i in range ( 10 ): integer = random . randint ( 0 , 256 ) self . condition . acquire () print condition acquired by %s % self . name self . integers . append ( integer ) print %d appended to list by %s % ( integer , self . name ) print condition notified by %s % self . name self . condition . notify () print condition released by %s % self . name self . condition . release () time . sleep ( 1 ) class Consumer ( threading . Thread ): Consumes random integers from a list def __init__ ( self , integers , condition ): Constructor. @param integers list of integers @param condition condition synchronization object threading . Thread . __init__ ( self ) self . integers = integers self . condition = condition def run ( self ): Thread run method. Consumes integers from list while True : self . condition . acquire () print condition acquired by %s % self . name while True : if self . integers : integer = self . integers . pop () print %d popped from list by %s % ( integer , self . name ) break print condition wait by %s % self . name self . condition . wait () print condition released by %s % self . name self . condition . release () def main (): integers = [] condition = threading . Condition () t1 = Producer ( integers , condition ) t2 = Consumer ( integers , condition ) t1 . start () t2 . start () t1 . join () t2 . join () if __name__ == __main__ : main () condition acquired by Thread-1 159 appended to list by Thread-1 condition notified by Thread-1 condition released by Thread-1 condition acquired by Thread-2 159 popped from list by Thread-2 condition released by Thread-2 condition acquired by Thread-2 condition wait by Thread-2 condition acquired by Thread-1 116 appended to list by Thread-1 condition notified by Thread-1 condition released by Thread-1 116 popped from list by Thread-2 condition released by Thread-2 condition acquired by Thread-2 condition wait by Thread-2 \u5728producer\u7c7b\u4e2d\uff0cproducer\u83b7\u5f97\u9501\uff0c\u751f\u4ea7\u4e00\u4e2a\u968f\u673a\u6574\u6570\uff0c\u901a\u77e5\u6d88\u8d39\u8005\u6709\u4e86\u53ef\u7528\u7684\u201c\u5546\u54c1\u201d\uff0c\u5e76\u4e14\u91ca\u653e\u9501\u3002producer\u65e0\u9650\u5730\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u6574\u6570\uff0c\u540c\u65f6\u5728\u4e24\u4e2a\u6dfb\u52a0\u64cd\u4f5c\u4e2d\u95f4\u968f\u673a\u7684\u505c\u987f\u4e00\u4f1a\u513f \u6d88\u8d39\u8005\uff08consumer\uff09\u7c7b\u3002\u5b83\u83b7\u53d6\u9501\uff0c\u68c0\u67e5\u5217\u8868\u4e2d\u662f\u5426\u6709\u6574\u6570\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u7b49\u5f85\u751f\u4ea7\u8005\u7684\u901a\u77e5\u3002\u5f53\u6d88\u8d39\u8005\u83b7\u53d6\u6574\u6570\u4e4b\u540e\uff0c\u91ca\u653e\u9501\u3002 \u6ce8\u610f\u5728wait()\u65b9\u6cd5\u4e2d\u4f1a\u91ca\u653e\u9501\uff0c\u8fd9\u6837\u751f\u4ea7\u8005\u5c31\u80fd\u83b7\u5f97\u8d44\u6e90\u5e76\u4e14\u751f\u4ea7\u201c\u5546\u54c1\u201d\u3002 Thread-1\u6dfb\u52a0159\u5230\u5217\u8868\u4e2d\uff0c\u901a\u77e5\u6d88\u8d39\u8005\u540c\u65f6\u91ca\u653e\u9501\uff0cThread-2\u83b7\u5f97\u9501\uff0c\u53d6\u56de159\uff0c\u5e76\u4e14\u91ca\u653e\u9501\u3002\u6b64\u65f6\u56e0\u4e3a\u6267\u884ctime.sleep(1)\uff0c\u751f\u4ea7\u8005\u6b63\u5728\u7761\u7720\uff0c\u5f53\u6d88\u8d39\u8005\u518d\u6b21\u8bd5\u56fe\u83b7\u53d6\u6574\u6570\u65f6\uff0c\u5217\u8868\u4e2d\u5e76\u6ca1\u6709\u6574\u6570\uff0c\u8fd9\u65f6\u6d88\u8d39\u8005\u8fdb\u5165\u7b49\u5f85\u72b6\u6001\uff0c\u7b49\u5f85\u751f\u4ea7\u8005\u7684\u901a\u77e5\u3002\u5f53wait()\u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u91ca\u653e\u8d44\u6e90\uff0c\u4ece\u800c\u751f\u4ea7\u8005\u80fd\u591f\u5229\u7528\u8d44\u6e90\u751f\u4ea7\u6574\u6570\u3002 \u4e0b\u9762\u6211\u4eec\u770b\u4e00\u4e0bPython\u5185\u90e8\u662f\u5982\u4f55\u5b9e\u73b0\u6761\u4ef6\u540c\u6b65\u673a\u5236\u7684\u3002\u5982\u679c\u7528\u6237\u6ca1\u6709\u4f20\u5165\u9501\uff08lock\uff09\u5bf9\u8c61\uff0ccondition\u7c7b\u7684\u6784\u9020\u5668\u521b\u5efa\u4e00\u4e2a\u53ef\u91cd\u5165\u9501\uff08RLock\uff09\uff0c\u8fd9\u4e2a\u9501\u5c06\u4f1a\u5728\u8c03\u7528acquire()\u548crelease()\u65f6\u4f7f\u7528 class _Condition ( _Verbose ): def __init__ ( self , lock = None , verbose = None ): _Verbose . __init__ ( self , verbose ) if lock is None : lock = RLock () self . __lock = lock \u63a5\u4e0b\u6765\u662fwait()\u65b9\u6cd5\u3002\u4e3a\u4e86\u7b80\u5316\u8bf4\u660e\uff0c\u6211\u4eec\u5047\u5b9a\u5728\u8c03\u7528wait()\u65b9\u6cd5\u65f6\u4e0d\u4f7f\u7528timeout\u53c2\u6570\u3002wait()\u65b9\u6cd5\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3awaiter\u7684\u9501\uff0c\u5e76\u4e14\u8bbe\u7f6e\u9501\u7684\u72b6\u6001\u4e3alocked\u3002\u8fd9\u4e2awaiter\u9501\u7528\u4e8e\u7ebf\u7a0b\u95f4\u7684\u901a\u8baf\uff0c\u8fd9\u6837\u751f\u4ea7\u8005\uff08\u5728\u751f\u4ea7\u5b8c\u6574\u6570\u4e4b\u540e\uff09\u5c31\u53ef\u4ee5\u901a\u77e5\u6d88\u8d39\u8005\u91ca\u653ewaiter()\u9501\u3002\u9501\u5bf9\u8c61\u5c06\u4f1a\u88ab\u6dfb\u52a0\u5230\u7b49\u5f85\u8005\u5217\u8868\uff0c\u5e76\u4e14\u5728\u8c03\u7528waiter.acquire()\u65f6\u88ab\u963b\u585e\u3002\u4e00\u5f00\u59cbcondition\u9501\u7684\u72b6\u6001\u88ab\u4fdd\u5b58\uff0c\u5e76\u4e14\u5728wait()\u7ed3\u675f\u65f6\u88ab\u6062\u590d\u3002 def wait ( self , timeout = None ): ... waiter = _allocate_lock () waiter . acquire () self . __waiters . append ( waiter ) saved_state = self . _release_save () try : # \u65e0\u8bba\u5982\u4f55\u6062\u590d\u72b6\u6001 (\u4f8b\u5982, KeyboardInterrupt) if timeout is None : waiter . acquire () ... ... finally : self . _acquire_restore ( saved_state ) \u5f53\u751f\u4ea7\u8005\u8c03\u7528notify()\u65b9\u6cd5\u65f6\uff0cnotify()\u91ca\u653ewaiter\u9501\uff0c\u5524\u9192\u88ab\u963b\u585e\u7684\u6d88\u8d39\u8005\u3002 def notify ( self , n = 1 ): ... __waiters = self . __waiters waiters = __waiters [: n ] ... for waiter in waiters : waiter . release () try : __waiters . remove ( waiter ) except ValueError : pass \u540c\u6837Condition\u5bf9\u8c61\u4e5f\u53ef\u4ee5\u548c\u201cwith\u201d\u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u8fd9\u6837\u201cwith\u201d\u8bed\u53e5\u4e0a\u4e0b\u6587\u4f1a\u5e2e\u6211\u4eec\u8c03\u7528acquire()\u548crelease()\u65b9\u6cd5\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u4f7f\u7528\u201cwith\u201d\u8bed\u53e5\u6539\u5199\u4e86\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7c7b\u3002 class Producer ( threading . Thread ): ... def run ( self ): while True : integer = random . randint ( 0 , 256 ) with self . condition : print condition acquired by %s % self . name self . integers . append ( integer ) print %d appended to list by %s % ( integer , self . name ) print condition notified by %s % self . name self . condition . notify () print condition released by %s % self . name time . sleep ( 1 ) class Consumer ( threading . Thread ): ... def run ( self ): while True : with self . condition : print condition acquired by %s % self . name while True : if self . integers : integer = self . integers . pop () print %d popped from list by %s % ( integer , self . name ) break print condition wait by %s % self . name self . condition . wait () print condition released by %s % self . name","title":"\u6761\u4ef6(Condition)"},{"location":"python/py_thread/#semaphore","text":"\u4fe1\u53f7\u91cf\u540c\u6b65\u57fa\u4e8e\u5185\u90e8\u8ba1\u6570\u5668\uff0c\u6bcf\u8c03\u7528\u4e00\u6b21acquire()\uff0c\u8ba1\u6570\u5668\u51cf1\uff1b\u6bcf\u8c03\u7528\u4e00\u6b21release()\uff0c\u8ba1\u6570\u5668\u52a01.\u5f53\u8ba1\u6570\u5668\u4e3a0\u65f6\uff0cacquire()\u8c03\u7528\u88ab\u963b\u585e\u3002\u8fd9\u662f\u8fea\u79d1\u65af\u5f7b\uff08Dijkstra\uff09\u4fe1\u53f7\u91cf\u6982\u5ff5P()\u548cV()\u7684Python\u5b9e\u73b0\u3002\u4fe1\u53f7\u91cf\u540c\u6b65\u673a\u5236\u9002\u7528\u4e8e\u8bbf\u95ee\u50cf\u670d\u52a1\u5668\u8fd9\u6837\u7684\u6709\u9650\u8d44\u6e90\u3002 \u4fe1\u53f7\u91cf\u540c\u6b65\u7684\u4f8b\u5b50\uff1a semaphore = threading . Semaphore () semaphore . acquire () # \u4f7f\u7528\u5171\u4eab\u8d44\u6e90 ... semaphore . release () \u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u4fe1\u53f7\u91cf\u540c\u6b65\u5728Python\u5185\u90e8\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002\u6784\u9020\u5668\u4f7f\u7528\u53c2\u6570value\u6765\u8868\u793a\u8ba1\u6570\u5668\u7684\u521d\u59cb\u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a1\u3002\u4e00\u4e2a\u6761\u4ef6\u9501\u5b9e\u4f8b\u7528\u4e8e\u4fdd\u62a4\u8ba1\u6570\u5668\uff0c\u540c\u65f6\u5f53\u4fe1\u53f7\u91cf\u88ab\u91ca\u653e\u65f6\u901a\u77e5\u5176\u4ed6\u7ebf\u7a0b\u3002 lass _Semaphore ( _Verbose ): ... def __init__ ( self , value = 1 , verbose = None ): _Verbose . __init__ ( self , verbose ) self . __cond = Condition ( Lock ()) self . __value = value acquire()\u65b9\u6cd5\u3002\u5982\u679c\u4fe1\u53f7\u91cf\u4e3a0\uff0c\u7ebf\u7a0b\u88ab\u6761\u4ef6\u9501\u7684wait()\u65b9\u6cd5\u963b\u585e\uff0c\u76f4\u5230\u88ab\u5176\u4ed6\u7ebf\u7a0b\u5524\u9192\uff1b\u5982\u679c\u8ba1\u6570\u5668\u5927\u4e8e0\uff0c\u8c03\u7528acquire()\u4f7f\u8ba1\u6570\u5668\u51cf1\u3002 def acquire ( self , blocking = 1 ): rc = False self . __cond . acquire () while self . __value == 0 : ... self . __cond . wait () else : self . __value = self . __value - 1 rc = True self . __cond . release () return rc \u4fe1\u53f7\u91cf\u7c7b\u7684release()\u65b9\u6cd5\u589e\u52a0\u8ba1\u6570\u5668\u7684\u503c\u5e76\u4e14\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u3002 def release ( self ): self . __cond . acquire () self . __value = self . __value + 1 self . __cond . notify () self . __cond . release () \u8fd8\u6709\u4e00\u4e2a\u201c\u6709\u9650\u201d(bounded)\u4fe1\u53f7\u91cf\u7c7b\uff0c\u53ef\u4ee5\u786e\u4fddrelease()\u65b9\u6cd5\u7684\u8c03\u7528\u6b21\u6570\u4e0d\u80fd\u8d85\u8fc7\u7ed9\u5b9a\u7684\u521d\u59cb\u4fe1\u53f7\u91cf\u6570\u503c(value\u53c2\u6570)\uff0c\u4e0b\u9762\u662f\u201c\u6709\u9650\u201d\u4fe1\u53f7\u91cf\u7c7b\u7684Python\u4ee3\u7801\uff1a class _BoundedSemaphore ( _Semaphore ): \u68c0\u67e5release()\u7684\u8c03\u7528\u6b21\u6570\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8eacquire()\u6b21\u6570 def __init__ ( self , value = 1 , verbose = None ): _Semaphore . __init__ ( self , value , verbose ) self . _initial_value = value def release ( self ): if self . _Semaphore__value = self . _initial_value : raise ValueError , Semaphore released too many times return _Semaphore . release ( self ) \u540c\u6837\u4fe1\u53f7\u91cf(Semaphore)\u5bf9\u8c61\u53ef\u4ee5\u548c\u201cwith\u201d\u4e00\u8d77\u4f7f\u7528\uff1a semaphore = threading . Semaphore () with semaphore : # \u4f7f\u7528\u5171\u4eab\u8d44\u6e90 ...","title":"\u4fe1\u53f7\u91cf\uff08Semaphore\uff09"},{"location":"python/py_thread/#event","text":"\u57fa\u4e8e\u4e8b\u4ef6\u7684\u540c\u6b65\u662f\u6307\uff1a\u4e00\u4e2a\u7ebf\u7a0b\u53d1\u9001/\u4f20\u9012\u4e8b\u4ef6\uff0c\u53e6\u5916\u7684\u7ebf\u7a0b\u7b49\u5f85\u4e8b\u4ef6\u7684\u89e6\u53d1\u3002 \u8ba9\u6211\u4eec\u518d\u6765\u770b\u770b\u524d\u9762\u7684\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u4f8b\u5b50\uff0c\u73b0\u5728\u6211\u4eec\u628a\u5b83\u8f6c\u6362\u6210\u4f7f\u7528\u4e8b\u4ef6\u540c\u6b65\u800c\u4e0d\u662f\u6761\u4ef6\u540c\u6b65\u3002\u5b8c\u6574\u7684\u6e90\u7801\u53ef\u4ee5\u5728threads/event.py\u91cc\u9762\u627e\u5230\u3002 \u9996\u5148\u662f\u751f\u4ea7\u8005\u7c7b\uff0c\u6211\u4eec\u4f20\u5165\u4e00\u4e2aEvent\u5b9e\u4f8b\u7ed9\u6784\u9020\u5668\u800c\u4e0d\u662fCondition\u5b9e\u4f8b\u3002\u4e00\u65e6\u6574\u6570\u88ab\u6dfb\u52a0\u8fdb\u5217\u8868\uff0c\u4e8b\u4ef6(event)\u88ab\u8bbe\u7f6e\u548c\u53d1\u9001\u53bb\u5524\u9192\u6d88\u8d39\u8005\u3002\u6ce8\u610f\u4e8b\u4ef6(event)\u5b9e\u4f8b\u9ed8\u8ba4\u662f\u88ab\u53d1\u9001\u7684\u3002 class Producer ( threading . Thread ): \u5411\u5217\u8868\u4e2d\u751f\u4ea7\u968f\u673a\u6574\u6570 def __init__ ( self , integers , event ): \u6784\u9020\u5668 @param integers \u6574\u6570\u5217\u8868 @param event \u4e8b\u4ef6\u540c\u6b65\u5bf9\u8c61 threading . Thread . __init__ ( self ) self . integers = integers self . event = event def run ( self ): \u5b9e\u73b0Thread\u7684run\u65b9\u6cd5\u3002\u5728\u968f\u673a\u65f6\u95f4\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u968f\u673a\u6574\u6570 while True : integer = random . randint ( 0 , 256 ) self . integers . append ( integer ) print %d appended to list by %s % ( integer , self . name ) print event set by %s % self . name self . event . set () #\u8bbe\u7f6e\u4e8b\u4ef6 self . event . clear () #\u53d1\u9001\u4e8b\u4ef6 print event cleared by %s % self . name time . sleep ( 1 ) \u4e8b\u4ef6\u9501\u7684Python\u5185\u90e8\u5b9e\u73b0\uff0c\u9996\u5148\u662fEvent\u9501\u7684\u6784\u9020\u5668\u3002\u6784\u9020\u5668\u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a\u6761\u4ef6\uff08Condition\uff09\u9501\uff0c\u6765\u4fdd\u62a4\u4e8b\u4ef6\u6807\u5fd7\uff08event flag\uff09,\u540c\u4e8b\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u5f53\u4e8b\u4ef6\u88ab\u8bbe\u7f6e\u65f6\u3002 class _Event ( _Verbose ): def __init__ ( self , verbose = None ): _Verbose . __init__ ( self , verbose ) self . __cond = Condition ( Lock ()) self . __flag = False \u63a5\u4e0b\u6765\u662fset()\u65b9\u6cd5\uff0c\u5b83\u8bbe\u7f6e\u4e8b\u4ef6\u6807\u5fd7\u4e3aTrue\uff0c\u5e76\u4e14\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u3002\u6761\u4ef6\u9501\u5bf9\u8c61\u4fdd\u62a4\u7a0b\u5e8f\u4fee\u6539\u4e8b\u4ef6\u6807\u5fd7\u72b6\u6001\u7684\u5173\u952e\u90e8\u5206\u3002 def set ( self ): self . __cond . acquire () try : self . __flag = True self . __cond . notify_all () finally : self . __cond . release () \u800cclear()\u65b9\u6cd5\u6b63\u597d\u76f8\u53cd\uff0c\u5b83\u8bbe\u7f6e\u65f6\u95f4\u6807\u5fd7\u4e3aFalse\u3002 def clear ( self ): self . __cond . acquire () try : self . __flag = False finally : self . __cond . release () \u6700\u540e\uff0cwait()\u65b9\u6cd5\u5c06\u963b\u585e\u76f4\u5230\u8c03\u7528\u4e86set()\u65b9\u6cd5\uff0c\u5f53\u4e8b\u4ef6\u6807\u5fd7\u4e3aTrue\u65f6\uff0cwait()\u65b9\u6cd5\u5c31\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002 def wait ( self , timeout = None ): self . __cond . acquire () try : if not self . __flag : #\u5982\u679cflag\u4e0d\u4e3a\u771f self . __cond . wait ( timeout ) finally : self . __cond . release ()","title":"\u4e8b\u4ef6\uff08Event\uff09"},{"location":"python/py_thread/#queue","text":"\u961f\u5217\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u7ebf\u7a0b\u540c\u6b65\u673a\u5236\uff0c\u4f7f\u7528\u961f\u5217\u6211\u4eec\u4e0d\u7528\u5173\u5fc3\u9501\uff0c\u961f\u5217\u4f1a\u4e3a\u6211\u4eec\u5904\u7406\u9501\u7684\u95ee\u9898\u3002 \u961f\u5217(Queue)\u6709\u4ee5\u4e0b4\u4e2a\u7528\u6237\u611f\u5174\u8da3\u7684\u65b9\u6cd5\uff1a put: \u5411\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u9879\uff1b get: \u4ece\u961f\u5217\u4e2d\u5220\u9664\u5e76\u8fd4\u56de\u4e00\u4e2a\u9879\uff1b task_done: \u5f53\u67d0\u4e00\u9879\u4efb\u52a1\u5b8c\u6210\u65f6\u8c03\u7528\uff1b join: \u963b\u585e\u77e5\u9053\u6240\u6709\u7684\u9879\u76ee\u90fd\u88ab\u5904\u7406\u5b8c \u4e0b\u9762\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\u7684\u4f8b\u5b50\u8f6c\u6362\u6210\u4f7f\u7528\u961f\u5217\u3002\u6e90\u4ee3\u7801\u53ef\u4ee5\u5728threads/queue.py\u4e2d\u627e\u5230\u3002 \u9996\u5148\u662f\u751f\u4ea7\u8005\u7c7b\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u6574\u6570\u5217\u8868\uff0c\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u961f\u5217\u5c31\u53ef\u4ee5\u5b58\u50a8\u751f\u6210\u7684\u6574\u6570\u3002\u751f\u4ea7\u8005\u7ebf\u7a0b\u5728\u4e00\u4e2a\u65e0\u9650\u5faa\u73af\u4e2d\u751f\u6210\u6574\u6570\u5e76\u5c06\u751f\u6210\u7684\u6574\u6570\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\u3002 import time import threading import random import Queue class Producer ( threading . Thread ): Produces random integers to a list def __init__ ( self , queue ): Constructor. @param integers list of integers @param queue queue synchronization object threading . Thread . __init__ ( self ) self . queue = queue def run ( self ): Thread run method. Append random integers to the integers list at random time. while True : integer = random . randint ( 0 , 256 ) self . queue . put ( integer ) print %d put to queue by %s % ( integer , self . name ) time . sleep ( 1 ) class Consumer ( threading . Thread ): Consumes random integers from a list def __init__ ( self , queue ): Constructor. @param integers list of integers @param queue queue synchronization object threading . Thread . __init__ ( self ) self . queue = queue def run ( self ): Thread run method. Consumes integers from list while True : integer = self . queue . get () print %d popped from list by %s % ( integer , self . name ) self . queue . task_done () def main (): integers = [] queue = Queue . Queue () t1 = Producer ( queue ) t2 = Consumer ( queue ) t1 . start () t2 . start () t1 . join () t2 . join () if __name__ == __main__ : main () \u961f\u5217\u540c\u6b65\u7684\u6700\u5927\u597d\u5904\u5c31\u662f\u961f\u5217\u5e2e\u6211\u4eec\u5904\u7406\u4e86\u9501\u3002\u73b0\u5728\u8ba9\u6211\u4eec\u53bb\u770b\u770b\u5728Python\u5185\u90e8\u662f\u5982\u4f55\u5b9e\u73b0\u961f\u5217\u540c\u6b65\u673a\u5236\u7684\u3002 \u961f\u5217\uff08Queue\uff09\u6784\u9020\u5668\u521b\u5efa\u4e00\u4e2a\u9501\uff0c\u4fdd\u62a4\u961f\u5217\u5143\u7d20\u7684\u6dfb\u52a0\u548c\u5220\u9664\u64cd\u4f5c\u3002\u540c\u65f6\u521b\u5efa\u4e86\u4e00\u4e9b\u6761\u4ef6\u9501\u5bf9\u8c61\u5904\u7406\u961f\u5217\u4e8b\u4ef6\uff0c\u6bd4\u5982\u961f\u5217\u4e0d\u7a7a\u4e8b\u4ef6\uff08\u524a\u9664get()\u7684\u963b\u585e\uff09\uff0c\u961f\u5217\u4e0d\u6ee1\u4e8b\u4ef6\uff08\u524a\u9664put()\u7684\u963b\u585e\uff09\u548c\u6240\u6709\u9879\u76ee\u90fd\u88ab\u5904\u7406\u5b8c\u4e8b\u4ef6\uff08\u524a\u9664join()\u7684\u963b\u585e\uff09\u3002 class Queue : def __init__ ( self , maxsize = 0 ): ... self . mutex = threading . Lock () self . not_empty = threading . Condition ( self . mutex ) self . not_full = threading . Condition ( self . mutex ) self . all_tasks_done = threading . Condition ( self . mutex ) self . unfinished_tasks = 0 put()\u65b9\u6cd5\u5411\u961f\u5217\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u9879\uff0c\u6216\u8005\u963b\u585e\u5982\u679c\u961f\u5217\u5df2\u6ee1\u3002\u8fd9\u65f6\u961f\u5217\u975e\u7a7a\uff0c\u5b83\u5524\u9192\u963b\u585e\u5728get()\u65b9\u6cd5\u4e2d\u7684\u7ebf\u7a0b\u3002\u66f4\u591a\u5173\u4e8eCondition\u9501\u7684\u5185\u5bb9\u8bf7\u67e5\u770b\u4e0a\u9762\u7684\u8bb2\u89e3\u3002 def put ( self , item , block = True , timeout = None ): ... self . not_full . acquire () try : if self . maxsize 0 : ... elif timeout is None : while self . _qsize () == self . maxsize : self . not_full . wait () self . _put ( item ) self . unfinished_tasks += 1 self . not_empty . notify () finally : self . not_full . release () get()\u65b9\u6cd5\u4ece\u961f\u5217\u4e2d\u83b7\u5f97\u5e76\u5220\u9664\u4e00\u4e2a\u9879\uff0c\u6216\u8005\u963b\u585e\u5f53\u961f\u5217\u4e3a\u7a7a\u65f6\u3002\u8fd9\u65f6\u961f\u5217\u4e0d\u6ee1\uff0c\u4ed6\u5524\u9192\u963b\u585e\u5728put()\u65b9\u6cd5\u4e2d\u7684\u7ebf\u7a0b\u3002 def get ( self , block = True , timeout = None ): ... self . not_empty . acquire () try : ... elif timeout is None : while not self . _qsize (): self . not_empty . wait () item = self . _get () self . not_full . notify () return item finally : self . not_empty . release () \u5f53\u8c03\u7528task_done()\u65b9\u6cd5\u65f6\uff0c\u672a\u5b8c\u6210\u4efb\u52a1\u7684\u6570\u91cf\u51cf1\u3002\u5982\u679c\u672a\u5b8c\u6210\u4efb\u52a1\u7684\u6570\u91cf\u4e3a0\uff0c\u7ebf\u7a0b\u7b49\u5f85\u961f\u5217\u5b8c\u6210join()\u65b9\u6cd5\u3002 def task_done ( self ): self . all_tasks_done . acquire () try : unfinished = self . unfinished_tasks - 1 if unfinished = 0 : if unfinished 0 : raise ValueError ( task_done() called too many times ) self . all_tasks_done . notify_all () self . unfinished_tasks = unfinished finally : self . all_tasks_done . release () def join ( self ): self . all_tasks_done . acquire () try : while self . unfinished_tasks : self . all_tasks_done . wait () finally : self . all_tasks_done . release ()","title":"\u961f\u5217\uff08Queue\uff09"},{"location":"python/py_thread/#threadlocal","text":"import threading # \u521b\u5efa\u5168\u5c40ThreadLocal\u5bf9\u8c61: local_school = threading . local () def process_student (): # \u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u5173\u8054\u7684student: std = local_school . student print ( Hello, %s (in %s ) % ( std , threading . current_thread () . name )) def process_thread ( name ): # \u7ed1\u5b9aThreadLocal\u7684student: local_school . student = name process_student () t1 = threading . Thread ( target = process_thread , args = ( Alice ,), name = Thread-A ) t2 = threading . Thread ( target = process_thread , args = ( Bob ,), name = Thread-B ) t1 . start () t2 . start () t1 . join () t2 . join () Hello, Alice (in Thread-A) Hello, Bob (in Thread-B) \u5168\u5c40\u53d8\u91cflocal_school\u5c31\u662f\u4e00\u4e2aThreadLocal\u5bf9\u8c61\uff0c\u6bcf\u4e2aThread\u5bf9\u5b83\u90fd\u53ef\u4ee5\u8bfb\u5199student\u5c5e\u6027\uff0c\u4f46\u4e92\u4e0d\u5f71\u54cd\u3002\u4f60\u53ef\u4ee5\u628alocal_school\u770b\u6210\u5168\u5c40\u53d8\u91cf\uff0c\u4f46\u6bcf\u4e2a\u5c5e\u6027\u5982local_school.student\u90fd\u662f\u7ebf\u7a0b\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u53ef\u4ee5\u4efb\u610f\u8bfb\u5199\u800c\u4e92\u4e0d\u5e72\u6270\uff0c\u4e5f\u4e0d\u7528\u7ba1\u7406\u9501\u7684\u95ee\u9898\uff0cThreadLocal\u5185\u90e8\u4f1a\u5904\u7406","title":"ThreadLocal"},{"location":"python/py_thread/#cpu","text":"\u5982\u679c\u4f60\u4e0d\u5e78\u62e5\u6709\u4e00\u4e2a\u591a\u6838CPU\uff0c\u4f60\u80af\u5b9a\u5728\u60f3\uff0c\u591a\u6838\u5e94\u8be5\u53ef\u4ee5\u540c\u65f6\u6267\u884c\u591a\u4e2a\u7ebf\u7a0b\u3002 \u5982\u679c\u5199\u4e00\u4e2a\u6b7b\u5faa\u73af\u7684\u8bdd\uff0c\u4f1a\u51fa\u73b0\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f \u6253\u5f00Mac OS X\u7684Activity Monitor\uff0c\u6216\u8005Windows\u7684Task Manager\uff0c\u90fd\u53ef\u4ee5\u76d1\u63a7\u67d0\u4e2a\u8fdb\u7a0b\u7684CPU\u4f7f\u7528\u7387\u3002 \u6211\u4eec\u53ef\u4ee5\u76d1\u63a7\u5230\u4e00\u4e2a\u6b7b\u5faa\u73af\u7ebf\u7a0b\u4f1a100%\u5360\u7528\u4e00\u4e2aCPU\u3002 \u5982\u679c\u6709\u4e24\u4e2a\u6b7b\u5faa\u73af\u7ebf\u7a0b\uff0c\u5728\u591a\u6838CPU\u4e2d\uff0c\u53ef\u4ee5\u76d1\u63a7\u5230\u4f1a\u5360\u7528200%\u7684CPU\uff0c\u4e5f\u5c31\u662f\u5360\u7528\u4e24\u4e2aCPU\u6838\u5fc3\u3002 \u8981\u60f3\u628aN\u6838CPU\u7684\u6838\u5fc3\u5168\u90e8\u8dd1\u6ee1\uff0c\u5c31\u5fc5\u987b\u542f\u52a8N\u4e2a\u6b7b\u5faa\u73af\u7ebf\u7a0b\u3002 \u8bd5\u8bd5\u7528Python\u5199\u4e2a\u6b7b\u5faa\u73af\uff1a import threading , multiprocessing def loop (): x = 0 while True : x = x ^ 1 for i in range ( multiprocessing . cpu_count ()): t = threading . Thread ( target = loop ) t . start () \u542f\u52a8\u4e0eCPU\u6838\u5fc3\u6570\u91cf\u76f8\u540c\u7684N\u4e2a\u7ebf\u7a0b\uff0c\u57284\u6838CPU\u4e0a\u53ef\u4ee5\u76d1\u63a7\u5230CPU\u5360\u7528\u7387\u4ec5\u6709102%\uff0c\u4e5f\u5c31\u662f\u4ec5\u4f7f\u7528\u4e86\u4e00\u6838\u3002 \u4f46\u662f\u7528C\u3001C++\u6216Java\u6765\u6539\u5199\u76f8\u540c\u7684\u6b7b\u5faa\u73af\uff0c\u76f4\u63a5\u53ef\u4ee5\u628a\u5168\u90e8\u6838\u5fc3\u8dd1\u6ee1\uff0c4\u6838\u5c31\u8dd1\u5230400%\uff0c8\u6838\u5c31\u8dd1\u5230800%\uff0c\u4e3a\u4ec0\u4e48Python\u4e0d\u884c\u5462\uff1f \u56e0\u4e3aPython\u7684\u7ebf\u7a0b\u867d\u7136\u662f\u771f\u6b63\u7684\u7ebf\u7a0b\uff0c\u4f46\u89e3\u91ca\u5668\u6267\u884c\u4ee3\u7801\u65f6\uff0c\u6709\u4e00\u4e2aGIL\u9501\uff1aGlobal Interpreter Lock\uff0c\u4efb\u4f55Python\u7ebf\u7a0b\u6267\u884c\u524d\uff0c\u5fc5\u987b\u5148\u83b7\u5f97GIL\u9501\uff0c\u7136\u540e\uff0c\u6bcf\u6267\u884c100\u6761\u5b57\u8282\u7801\uff0c\u89e3\u91ca\u5668\u5c31\u81ea\u52a8\u91ca\u653eGIL\u9501\uff0c\u8ba9\u522b\u7684\u7ebf\u7a0b\u6709\u673a\u4f1a\u6267\u884c\u3002\u8fd9\u4e2aGIL\u5168\u5c40\u9501\u5b9e\u9645\u4e0a\u628a\u6240\u6709\u7ebf\u7a0b\u7684\u6267\u884c\u4ee3\u7801\u90fd\u7ed9\u4e0a\u4e86\u9501\uff0c\u6240\u4ee5\uff0c\u591a\u7ebf\u7a0b\u5728Python\u4e2d\u53ea\u80fd\u4ea4\u66ff\u6267\u884c\uff0c\u5373\u4f7f100\u4e2a\u7ebf\u7a0b\u8dd1\u5728100\u6838CPU\u4e0a\uff0c\u4e5f\u53ea\u80fd\u7528\u52301\u4e2a\u6838\u3002 GIL\u662fPython\u89e3\u91ca\u5668\u8bbe\u8ba1\u7684\u5386\u53f2\u9057\u7559\u95ee\u9898\uff0c\u901a\u5e38\u6211\u4eec\u7528\u7684\u89e3\u91ca\u5668\u662f\u5b98\u65b9\u5b9e\u73b0\u7684CPython\uff0c\u8981\u771f\u6b63\u5229\u7528\u591a\u6838\uff0c\u9664\u975e\u91cd\u5199\u4e00\u4e2a\u4e0d\u5e26GIL\u7684\u89e3\u91ca\u5668\u3002 \u6240\u4ee5\uff0c\u5728Python\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a\u7ebf\u7a0b\uff0c\u4f46\u4e0d\u8981\u6307\u671b\u80fd\u6709\u6548\u5229\u7528\u591a\u6838\u3002\u5982\u679c\u4e00\u5b9a\u8981\u901a\u8fc7\u591a\u7ebf\u7a0b\u5229\u7528\u591a\u6838\uff0c\u90a3\u53ea\u80fd\u901a\u8fc7C\u6269\u5c55\u6765\u5b9e\u73b0\uff0c\u4e0d\u8fc7\u8fd9\u6837\u5c31\u5931\u53bb\u4e86Python\u7b80\u5355\u6613\u7528\u7684\u7279\u70b9\u3002 \u4e0d\u8fc7\uff0c\u4e5f\u4e0d\u7528\u8fc7\u4e8e\u62c5\u5fc3\uff0cPython\u867d\u7136\u4e0d\u80fd\u5229\u7528\u591a\u7ebf\u7a0b\u5b9e\u73b0\u591a\u6838\u4efb\u52a1\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u591a\u8fdb\u7a0b\u5b9e\u73b0\u591a\u6838\u4efb\u52a1\u3002\u591a\u4e2aPython\u8fdb\u7a0b\u6709\u5404\u81ea\u72ec\u7acb\u7684GIL\u9501\uff0c\u4e92\u4e0d\u5f71\u54cd","title":"\u591a\u6838cpu"},{"location":"python/py_thread/#vs-io","text":"\u662f\u5426\u91c7\u7528\u591a\u4efb\u52a1\u7684\u7b2c\u4e8c\u4e2a\u8003\u8651\u662f\u4efb\u52a1\u7684\u7c7b\u578b\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u4efb\u52a1\u5206\u4e3a\u8ba1\u7b97\u5bc6\u96c6\u578b\u548cIO\u5bc6\u96c6\u578b\u3002 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u7684\u7279\u70b9\u662f\u8981\u8fdb\u884c\u5927\u91cf\u7684\u8ba1\u7b97\uff0c\u6d88\u8017CPU\u8d44\u6e90\uff0c\u6bd4\u5982\u8ba1\u7b97\u5706\u5468\u7387\u3001\u5bf9\u89c6\u9891\u8fdb\u884c\u9ad8\u6e05\u89e3\u7801\u7b49\u7b49\uff0c\u5168\u9760CPU\u7684\u8fd0\u7b97\u80fd\u529b\u3002\u8fd9\u79cd\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u867d\u7136\u4e5f\u53ef\u4ee5\u7528\u591a\u4efb\u52a1\u5b8c\u6210\uff0c\u4f46\u662f\u4efb\u52a1\u8d8a\u591a\uff0c\u82b1\u5728\u4efb\u52a1\u5207\u6362\u7684\u65f6\u95f4\u5c31\u8d8a\u591a\uff0cCPU\u6267\u884c\u4efb\u52a1\u7684\u6548\u7387\u5c31\u8d8a\u4f4e\uff0c\u6240\u4ee5\uff0c\u8981\u6700\u9ad8\u6548\u5730\u5229\u7528CPU\uff0c\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u540c\u65f6\u8fdb\u884c\u7684\u6570\u91cf\u5e94\u5f53\u7b49\u4e8eCPU\u7684\u6838\u5fc3\u6570\u3002 \u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u7531\u4e8e\u4e3b\u8981\u6d88\u8017CPU\u8d44\u6e90\uff0c\u56e0\u6b64\uff0c\u4ee3\u7801\u8fd0\u884c\u6548\u7387\u81f3\u5173\u91cd\u8981\u3002Python\u8fd9\u6837\u7684\u811a\u672c\u8bed\u8a00\u8fd0\u884c\u6548\u7387\u5f88\u4f4e\uff0c\u5b8c\u5168\u4e0d\u9002\u5408\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u5bf9\u4e8e\u8ba1\u7b97\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6700\u597d\u7528C\u8bed\u8a00\u7f16\u5199\u3002 \u7b2c\u4e8c\u79cd\u4efb\u52a1\u7684\u7c7b\u578b\u662fIO\u5bc6\u96c6\u578b\uff0c\u6d89\u53ca\u5230\u7f51\u7edc\u3001\u78c1\u76d8IO\u7684\u4efb\u52a1\u90fd\u662fIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u8fd9\u7c7b\u4efb\u52a1\u7684\u7279\u70b9\u662fCPU\u6d88\u8017\u5f88\u5c11\uff0c\u4efb\u52a1\u7684\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u5728\u7b49\u5f85IO\u64cd\u4f5c\u5b8c\u6210\uff08\u56e0\u4e3aIO\u7684\u901f\u5ea6\u8fdc\u8fdc\u4f4e\u4e8eCPU\u548c\u5185\u5b58\u7684\u901f\u5ea6\uff09\u3002\u5bf9\u4e8eIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u4efb\u52a1\u8d8a\u591a\uff0cCPU\u6548\u7387\u8d8a\u9ad8\uff0c\u4f46\u4e5f\u6709\u4e00\u4e2a\u9650\u5ea6\u3002\u5e38\u89c1\u7684\u5927\u90e8\u5206\u4efb\u52a1\u90fd\u662fIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6bd4\u5982Web\u5e94\u7528\u3002 IO\u5bc6\u96c6\u578b\u4efb\u52a1\u6267\u884c\u671f\u95f4\uff0c99%\u7684\u65f6\u95f4\u90fd\u82b1\u5728IO\u4e0a\uff0c\u82b1\u5728CPU\u4e0a\u7684\u65f6\u95f4\u5f88\u5c11\uff0c\u56e0\u6b64\uff0c\u7528\u8fd0\u884c\u901f\u5ea6\u6781\u5feb\u7684C\u8bed\u8a00\u66ff\u6362\u7528Python\u8fd9\u6837\u8fd0\u884c\u901f\u5ea6\u6781\u4f4e\u7684\u811a\u672c\u8bed\u8a00\uff0c\u5b8c\u5168\u65e0\u6cd5\u63d0\u5347\u8fd0\u884c\u6548\u7387\u3002\u5bf9\u4e8eIO\u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u6700\u5408\u9002\u7684\u8bed\u8a00\u5c31\u662f\u5f00\u53d1\u6548\u7387\u6700\u9ad8\uff08\u4ee3\u7801\u91cf\u6700\u5c11\uff09\u7684\u8bed\u8a00\uff0c\u811a\u672c\u8bed\u8a00\u662f\u9996\u9009\uff0cC\u8bed\u8a00\u6700\u5dee\u3002","title":"\u8ba1\u7b97\u5bc6\u96c6\u578b vs. IO\u5bc6\u96c6\u578b"},{"location":"python/py_thread/#_11","text":"\u534f\u7a0b\u662f\u8f7b\u91cf\u7ea7\u7684\u7ebf\u7a0b\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u8f7b\u677e\u521b\u5efa\u6570\u5341\u4e07\u8ba1\u7684\u534f\u7a0b\u3002\u4ece\u7ef4\u57fa\u767e\u79d1\u4e0a\u770b\uff0c\u4eceKnuth\u8001\u7237\u5b50\u7684\u57fa\u672c\u7b97\u6cd5\u5377\u4e0a\u770b\u201c\u5b50\u7a0b\u5e8f\u5176\u5b9e\u662f\u534f\u7a0b\u7684\u7279\u4f8b\u201d\u3002\u5b50\u7a0b\u5e8f\u662f\u4ec0\u4e48\uff1f\u5b50\u7a0b\u5e8f\uff08Subroutine, procedure, function, routine, method, subprogram\uff09\uff0c\u5c31\u662f\u51fd\u6570\u561b\uff01\u6240\u4ee5\u534f\u7a0b\u4e5f\u6ca1\u4ec0\u4e48\u4e86\u4e0d\u8d77\u7684\uff0c\u5c31\u662f\u66f4\u4e00\u822c\u610f\u4e49\u7684\u7a0b\u5e8f\u7ec4\u4ef6\uff0c\u90a3\u4f60\u5185\u5b58\u7a7a\u95f4\u591f\u5927\uff0c\u521b\u5efa\u591a\u5c11\u4e2a\u51fd\u6570\u8fd8\u4e0d\u662f\u968f\u4f60\u5417\uff1f \u534f\u7a0b\u53ef\u4ee5\u901a\u8fc7yield\u6765\u8c03\u7528\u5176\u5b83\u534f\u7a0b\u3002\u901a\u8fc7yield\u65b9\u5f0f\u8f6c\u79fb\u6267\u884c\u6743\u7684\u534f\u7a0b\u4e4b\u95f4\u4e0d\u662f\u8c03\u7528\u8005\u4e0e\u88ab\u8c03\u7528\u8005\u7684\u5173\u7cfb\uff0c\u800c\u662f\u5f7c\u6b64\u5bf9\u79f0\u3001\u5e73\u7b49\u7684\u3002\u534f\u7a0b\u7684\u8d77\u59cb\u5904\u662f\u7b2c\u4e00\u4e2a\u5165\u53e3\u70b9\uff0c\u5728\u534f\u7a0b\u91cc\uff0c\u8fd4\u56de\u70b9\u4e4b\u540e\u662f\u63a5\u4e0b\u6765\u7684\u5165\u53e3\u70b9\u3002\u5b50\u4f8b\u7a0b\u7684\u751f\u547d\u671f\u9075\u5faa\u540e\u8fdb\u5148\u51fa\uff08\u6700\u540e\u4e00\u4e2a\u88ab\u8c03\u7528\u7684\u5b50\u4f8b\u7a0b\u6700\u5148\u8fd4\u56de\uff09\uff1b\u76f8\u53cd\uff0c\u534f\u7a0b\u7684\u751f\u547d\u671f\u5b8c\u5168\u7531\u4ed6\u4eec\u7684\u4f7f\u7528\u7684\u9700\u8981\u51b3\u5b9a\u3002","title":"\u534f\u7a0b"},{"location":"python/py_thread/#_12","text":"\u4e00\u65e6\u521b\u5efa\u5b8c\u7ebf\u7a0b\uff0c\u4f60\u5c31\u65e0\u6cd5\u51b3\u5b9a\u4ed6\u4ec0\u4e48\u65f6\u5019\u83b7\u5f97\u65f6\u95f4\u7247\uff0c\u4ec0\u4e48\u65f6\u5019\u8ba9\u51fa\u65f6\u95f4\u7247\u4e86\uff0c\u4f60\u628a\u5b83\u4ea4\u7ed9\u4e86\u5185\u6838\u3002\u800c\u534f\u7a0b\u7f16\u5199\u8005\uff0c\u4e00\u662f\u53ef\u63a7\u7684\u5207\u6362\u65f6\u673a\uff0c\u4e8c\u662f\u5f88\u5c0f\u7684\u5207\u6362\u4ee3\u4ef7\u3002\u4ece\u64cd\u4f5c\u7cfb\u7edf\u6709\u6ca1\u6709\u8c03\u5ea6\u6743\u4e0a\u770b\uff0c\u534f\u7a0b\u5c31\u662f\u56e0\u4e3a\u4e0d\u9700\u8981\u8fdb\u884c\u5185\u6838\u6001\u7684\u5207\u6362\uff0c\u6240\u4ee5\u4f1a\u4f7f\u7528\u5b83","title":"\u7ebf\u7a0b\u548c\u534f\u7a0b\u7684\u533a\u522b"},{"location":"python/py_thread/#_13","text":"\u72b6\u6001\u673a:\u5728\u4e00\u4e2a\u5b50\u4f8b\u7a0b\u91cc\u5b9e\u73b0\u72b6\u6001\u673a\uff0c\u8fd9\u91cc\u72b6\u6001\u7531\u8be5\u8fc7\u7a0b\u5f53\u524d\u7684\u51fa\u53e3\uff0f\u5165\u53e3\u70b9\u786e\u5b9a\uff1b\u8fd9\u53ef\u4ee5\u4ea7\u751f\u53ef\u8bfb\u6027\u66f4\u9ad8\u7684\u4ee3\u7801\u3002 \u89d2\u8272\u6a21\u578b:\u5e76\u884c\u7684\u89d2\u8272\u6a21\u578b\uff0c\u4f8b\u5982\u8ba1\u7b97\u673a\u6e38\u620f\u3002\u6bcf\u4e2a\u89d2\u8272\u6709\u81ea\u5df1\u7684\u8fc7\u7a0b\uff08\u8fd9\u53c8\u5728\u903b\u8f91\u4e0a\u5206\u79bb\u4e86\u4ee3\u7801\uff09\uff0c\u4f46\u4ed6\u4eec\u81ea\u613f\u5730\u5411\u987a\u5e8f\u6267\u884c\u5404\u89d2\u8272\u8fc7\u7a0b\u7684 \u4e2d\u592e\u8c03\u5ea6\u5668\u4ea4\u51fa\u63a7\u5236\uff08\u8fd9\u662f\u5408\u4f5c\u5f0f\u591a\u4efb\u52a1\u7684\u4e00\u79cd\u5f62\u5f0f\uff09\u3002 \u4ea7\u751f\u5668:\u5b83\u6709\u52a9\u4e8e\u8f93\u5165\uff0f\u8f93\u51fa\u548c\u5bf9\u6570\u636e\u7ed3\u6784\u7684\u901a\u7528\u904d\u5386\u3002","title":"\u4e3a\u4ec0\u4e48\u8981\u7528\u534f\u7a0b"},{"location":"python/py_thread/#_14","text":"\u8bed\u8a00/\u5e73\u53f0 \u5b9e\u73b0\u7248\u672c \u534f\u7a0b\u540d\u79f0 \u5907\u6ce8 GoLang \u539f\u751f\u652f\u6301 goroutine Erlang \u539f\u751f\u652f\u6301 process \u51fd\u6570\u5f0f\u7f16\u7a0b Scala \u539f\u751f\u652f\u6301 actor \u51fd\u6570\u5f0f\u7f16\u7a0b Python 2.5 \u7248\u672c\u540e coroutine \u5b98\u65b9 Python\u4e0d\u5b8c\u5168\u5b9e\u73b0\uff0cStackless Perl 6.0 \u7248\u672c\u540e coroutine Ruby 1.9 \u7248\u672c\u540e fiber Lua \u539f\u751f\u652f\u6301 coroutine C# .Net 2.0 \u7248\u672c\u540e fiber https://segmentfault.com/a/1190000001813992 http://boolan.com/lecture/1000001045 http://www.cnblogs.com/shenguanpu/archive/2013/05/05/3060616.html http://yoyzhou.github.io/blog/2013/02/28/python-threads-synchronization-locks/","title":"\u7f16\u7a0b\u8bed\u8a00\u534f\u7a0b\u5b9e\u73b0"},{"location":"python/py_tornado/","text":"python web\u6846\u67b6 tornado \u521d\u63a2 Tornado tornado \u662f\u4e00\u4e2a\u57fa\u4e8epython\u7684\u975e\u963b\u585e\u5f0f web \u670d\u52a1\u5668 Module Map Web framework tornado.web \u2014 RequestHandler and Application \u7c7b tornado.template \u2014 \u53ef\u6269\u5c55\u8f93\u51fa\u6a21\u677f tornado.escape \u2014 \u8f6c\u4e49\u548c\u5b57\u7b26\u4e32\u64cd\u4f5c tornado.locale \u2014 \u56fd\u9645\u5316\u652f\u6301 tornado.websocket \u2014 \u5229\u7528websocket\u53cc\u5411\u901a\u4fe1 HTTP servers and clients tornado.httpserver \u2014 \u975e\u963b\u585ehttp\u670d\u52a1\u5668 tornado.httpclient \u2014 \u5f02\u6b65http\u8bf7\u6c42 tornado.httputil \u2014 \u5904\u7406HTTP\u6807\u5934\u548cURL tornado.http1connection \u2013 HTTP/1.x \u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u5b9e\u73b0 Asynchronous networking tornado.ioloop \u2014 \u4e8b\u4ef6\u9a71\u52a8\u4e3b\u5faa\u73af tornado.iostream \u2014 \u975e\u963b\u585esocket\u5305\u88c5\u7c7b tornado.netutil \u2014 \u5176\u4ed6\u7f51\u7edc\u5de5\u5177 tornado.tcpclient \u2014\u57fa\u7840\u7684tcpclient tornado.tcpserver \u2014 \u57fa\u7840\u7684tcpserver Coroutines and concurrency tornado.gen \u2014 \u7b80\u5316\u5f02\u6b65\u4ee3\u7801\u7684\u6a21\u5757 tornado.concurrent \u2014 \u540c\u6b65\u76f8\u5173\u7684threads \u548c futures tornado.locks \u2013 \u540c\u6b65\u539f\u8bed tornado.queues \u2013 \u534f\u7a0b\u961f\u5217 tornado.process \u2014 \u591a\u5904\u7406\u5668\u5de5\u5177\u7c7b Integration with other services tornado.auth \u2014 \u767b\u5f55\u9a8c\u8bc1 tornado.wsgi \u2014 \u9002\u914d\u5176\u4ed6python,web\u6846\u67b6 tornado.platform.asyncio \u2014 \u548cpython3.4\u7684\u5f02\u6b65IO\u5e93asyncio\u505a\u9002\u914d tornado.platform.caresresolver \u2014 \u5f02\u6b65DNS\u89e3\u6790,C-Ares tornado.platform.twisted \u2014 \u9002\u914dTwisted\u6846\u67b6 Utilities tornado.autoreload \u2014 Automatically detect code changes in development tornado.log \u2014 \u65e5\u5fd7 tornado.options \u2014 \u547d\u4ee4\u884c\u9009\u9879 tornado.stack_context \u2014 \u5f02\u6b65\u56de\u8c03\u5f02\u5e38\u5904\u7406 tornado.testing \u2014 \u5f02\u6b65\u4ee3\u7801\u7684\u6d4b\u8bd5\u7528\u4f8b\u652f\u6301 tornado.util \u2014 \u5e38\u89c4\u5de5\u5177\u7c7b hello world import tornado.ioloop import tornado.web class MainHandler ( tornado . web . RequestHandler ): def get ( self ): self . write ( Hello, world, + subdomain ) def make_app (): return tornado . web . Application ([ ( r / , MainHandler ), ]) if __name__ == __main__ : app = make_app () app . listen ( 8888 ) tornado . ioloop . IOLoop . current () . start () #\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165`http://localhost:8888/` \u53ef\u4ee5\u770b\u5230`Hello,world`\u7684\u8f93\u51fa handler StaticFileHandler def make_app (): return tornado . web . Application ([ ( r /static/(.*) , tornado . web . StaticFileHandler , { path : C: \\\\ Users \\\\ Administrator.PC-20150720QKHJ \\\\ Desktop \\\\ static }), ]) # \u8f93\u5165: http://localhost:8888/static/a.txt \u53ef\u8bbf\u95eestatic\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5185\u5bb9 get_argument \u83b7\u53d6\u53c2\u6570 class MainHandler ( tornado . web . RequestHandler ): def get ( self ): self . write ( html body form action= / method= post input type= text name= message input type= submit value= Submit /form /body /html ) def post ( self ): self . set_header ( Content-Type , text/plain ) self . write ( You wrote + self . get_argument ( message )) arguments - \u6240\u6709\u7684 GET \u6216 POST \u7684\u53c2\u6570 files - \u6240\u6709\u901a\u8fc7 multipart/form-data POST \u8bf7\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6 path - \u8bf7\u6c42\u7684\u8def\u5f84\uff08 ? \u4e4b\u524d\u7684\u6240\u6709\u5185\u5bb9\uff09 headers - \u8bf7\u6c42\u7684\u5f00\u5934\u4fe1\u606f coroutine import tornado.ioloop import tornado.web from tornado import gen from tornado.httpclient import AsyncHTTPClient class MainHandler ( tornado . web . RequestHandler ): @gen.coroutine def get ( self ): response = yield self . fetch_json ( http://www.baidu.com ) self . write ( response ) @gen.coroutine def fetch_json ( self , url ): response = yield AsyncHTTPClient () . fetch ( url ) raise gen . Return ( response . body ) application = tornado . web . Application ([ ( r / , MainHandler ), ]) if __name__ == __main__ : application . listen ( 8888 ) tornado . ioloop . IOLoop . current () . start () tornado \u6cdb\u57df\u540d import tornado.ioloop import tornado.web class MainHandler ( tornado . web . RequestHandler ): def get ( self ): subdomain = self . request . host . split ( . )[ 0 ] self . write ( Hello, world, + subdomain ) class DomainHandler ( tornado . web . RequestHandler ): def get ( self ): self . write ( Hello, a.com ) def make_app (): return tornado . web . Application ([ ( r / , MainHandler ), ]) if __name__ == __main__ : app = make_app () app . add_handlers ( r ^(www\\.)?a\\.com$ , [ ( r / , DomainHandler ), ]) app . listen ( 8888 ) tornado . ioloop . IOLoop . current () . start () # \u5728Host\u4e2d\u52a0\u5165\u8fd9\u884c 127.0.0.1 a.com #\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165:http://a.com:8888 \u5219\u8f93\u51fa:Hello, a.com tornado ngnix \u53cd\u5411\u4ee3\u7406\u914d\u7f6e \u5982\u679c\u5728tornado\u5c42\u4e0d\u60f3\u505a\u6cdb\u57df\u540d\u89e3\u6790,\u53ef\u4ee5\u901a\u8fc7ngnix\u7684\u53cd\u5411\u4ee3\u7406\u6307\u5411tornado\u7684\u7aef\u53e3,ngnix\u914d\u7f6e\u5982\u4e0b: upstream tornado { server 127.0.0.1:8888 ; } server { listen 80 ; server_name test.com www.test.com ; location = /favicon.ico { rewrite (.*) /static/favicon.ico ; } location = / robots . txt { rewrite (.*) /static/robots.txt ; } location / { proxy_pass_header Server ; proxy_set_header Host $http_host ; proxy_redirect off ; proxy _set_header X-Real-IP $remote_addr ; proxy_set_header X-Scheme $scheme ; proxy_pass http : // tornado ; } } nginx\u53cd\u5411\u4ee3\u7406\u957f\u94fe\u63a5 upstream chat_cluster { ##\u591aserver\u8d1f\u8f7d,\u6839\u636eip_hash\u4f5c\u5206\u6d41\u4e5f\u53ef\u4ee5\u7528weight\u6743\u91cd\u5206\u6d41 server 127.0.0.1:10000 ; server 127.0.0.1:10001 ; ip_hash ; keepalive 1024 ; } server { listen 80 ; server_name chat.rootk.com ; location / { proxy_pass http : // chat_cluster ; proxy_http_version 1.1 ; # very important, nginx will waitting for the response from tornado # if the time have passed more than 7200, nginx send http 504 to client proxy_read_timeout 7200 ; proxy_set_header Connection ; proxy_set_header Host $host ; proxy_set_header X-Real-Ip $remote_addr ; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for ; } }","title":"tornado"},{"location":"python/py_tornado/#python-web-tornado","text":"","title":"python web\u6846\u67b6 tornado \u521d\u63a2"},{"location":"python/py_tornado/#tornado","text":"tornado \u662f\u4e00\u4e2a\u57fa\u4e8epython\u7684\u975e\u963b\u585e\u5f0f web \u670d\u52a1\u5668","title":"Tornado"},{"location":"python/py_tornado/#module-map","text":"Web framework tornado.web \u2014 RequestHandler and Application \u7c7b tornado.template \u2014 \u53ef\u6269\u5c55\u8f93\u51fa\u6a21\u677f tornado.escape \u2014 \u8f6c\u4e49\u548c\u5b57\u7b26\u4e32\u64cd\u4f5c tornado.locale \u2014 \u56fd\u9645\u5316\u652f\u6301 tornado.websocket \u2014 \u5229\u7528websocket\u53cc\u5411\u901a\u4fe1 HTTP servers and clients tornado.httpserver \u2014 \u975e\u963b\u585ehttp\u670d\u52a1\u5668 tornado.httpclient \u2014 \u5f02\u6b65http\u8bf7\u6c42 tornado.httputil \u2014 \u5904\u7406HTTP\u6807\u5934\u548cURL tornado.http1connection \u2013 HTTP/1.x \u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u5b9e\u73b0 Asynchronous networking tornado.ioloop \u2014 \u4e8b\u4ef6\u9a71\u52a8\u4e3b\u5faa\u73af tornado.iostream \u2014 \u975e\u963b\u585esocket\u5305\u88c5\u7c7b tornado.netutil \u2014 \u5176\u4ed6\u7f51\u7edc\u5de5\u5177 tornado.tcpclient \u2014\u57fa\u7840\u7684tcpclient tornado.tcpserver \u2014 \u57fa\u7840\u7684tcpserver Coroutines and concurrency tornado.gen \u2014 \u7b80\u5316\u5f02\u6b65\u4ee3\u7801\u7684\u6a21\u5757 tornado.concurrent \u2014 \u540c\u6b65\u76f8\u5173\u7684threads \u548c futures tornado.locks \u2013 \u540c\u6b65\u539f\u8bed tornado.queues \u2013 \u534f\u7a0b\u961f\u5217 tornado.process \u2014 \u591a\u5904\u7406\u5668\u5de5\u5177\u7c7b Integration with other services tornado.auth \u2014 \u767b\u5f55\u9a8c\u8bc1 tornado.wsgi \u2014 \u9002\u914d\u5176\u4ed6python,web\u6846\u67b6 tornado.platform.asyncio \u2014 \u548cpython3.4\u7684\u5f02\u6b65IO\u5e93asyncio\u505a\u9002\u914d tornado.platform.caresresolver \u2014 \u5f02\u6b65DNS\u89e3\u6790,C-Ares tornado.platform.twisted \u2014 \u9002\u914dTwisted\u6846\u67b6 Utilities tornado.autoreload \u2014 Automatically detect code changes in development tornado.log \u2014 \u65e5\u5fd7 tornado.options \u2014 \u547d\u4ee4\u884c\u9009\u9879 tornado.stack_context \u2014 \u5f02\u6b65\u56de\u8c03\u5f02\u5e38\u5904\u7406 tornado.testing \u2014 \u5f02\u6b65\u4ee3\u7801\u7684\u6d4b\u8bd5\u7528\u4f8b\u652f\u6301 tornado.util \u2014 \u5e38\u89c4\u5de5\u5177\u7c7b","title":"Module Map"},{"location":"python/py_tornado/#hello-world","text":"import tornado.ioloop import tornado.web class MainHandler ( tornado . web . RequestHandler ): def get ( self ): self . write ( Hello, world, + subdomain ) def make_app (): return tornado . web . Application ([ ( r / , MainHandler ), ]) if __name__ == __main__ : app = make_app () app . listen ( 8888 ) tornado . ioloop . IOLoop . current () . start () #\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165`http://localhost:8888/` \u53ef\u4ee5\u770b\u5230`Hello,world`\u7684\u8f93\u51fa","title":"hello world"},{"location":"python/py_tornado/#handler","text":"","title":"handler"},{"location":"python/py_tornado/#staticfilehandler","text":"def make_app (): return tornado . web . Application ([ ( r /static/(.*) , tornado . web . StaticFileHandler , { path : C: \\\\ Users \\\\ Administrator.PC-20150720QKHJ \\\\ Desktop \\\\ static }), ]) # \u8f93\u5165: http://localhost:8888/static/a.txt \u53ef\u8bbf\u95eestatic\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5185\u5bb9","title":"StaticFileHandler"},{"location":"python/py_tornado/#get_argument","text":"class MainHandler ( tornado . web . RequestHandler ): def get ( self ): self . write ( html body form action= / method= post input type= text name= message input type= submit value= Submit /form /body /html ) def post ( self ): self . set_header ( Content-Type , text/plain ) self . write ( You wrote + self . get_argument ( message )) arguments - \u6240\u6709\u7684 GET \u6216 POST \u7684\u53c2\u6570 files - \u6240\u6709\u901a\u8fc7 multipart/form-data POST \u8bf7\u6c42\u4e0a\u4f20\u7684\u6587\u4ef6 path - \u8bf7\u6c42\u7684\u8def\u5f84\uff08 ? \u4e4b\u524d\u7684\u6240\u6709\u5185\u5bb9\uff09 headers - \u8bf7\u6c42\u7684\u5f00\u5934\u4fe1\u606f","title":"get_argument \u83b7\u53d6\u53c2\u6570"},{"location":"python/py_tornado/#coroutine","text":"import tornado.ioloop import tornado.web from tornado import gen from tornado.httpclient import AsyncHTTPClient class MainHandler ( tornado . web . RequestHandler ): @gen.coroutine def get ( self ): response = yield self . fetch_json ( http://www.baidu.com ) self . write ( response ) @gen.coroutine def fetch_json ( self , url ): response = yield AsyncHTTPClient () . fetch ( url ) raise gen . Return ( response . body ) application = tornado . web . Application ([ ( r / , MainHandler ), ]) if __name__ == __main__ : application . listen ( 8888 ) tornado . ioloop . IOLoop . current () . start ()","title":"coroutine"},{"location":"python/py_tornado/#tornado_1","text":"import tornado.ioloop import tornado.web class MainHandler ( tornado . web . RequestHandler ): def get ( self ): subdomain = self . request . host . split ( . )[ 0 ] self . write ( Hello, world, + subdomain ) class DomainHandler ( tornado . web . RequestHandler ): def get ( self ): self . write ( Hello, a.com ) def make_app (): return tornado . web . Application ([ ( r / , MainHandler ), ]) if __name__ == __main__ : app = make_app () app . add_handlers ( r ^(www\\.)?a\\.com$ , [ ( r / , DomainHandler ), ]) app . listen ( 8888 ) tornado . ioloop . IOLoop . current () . start () # \u5728Host\u4e2d\u52a0\u5165\u8fd9\u884c 127.0.0.1 a.com #\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165:http://a.com:8888 \u5219\u8f93\u51fa:Hello, a.com","title":"tornado   \u6cdb\u57df\u540d"},{"location":"python/py_tornado/#tornado-ngnix","text":"\u5982\u679c\u5728tornado\u5c42\u4e0d\u60f3\u505a\u6cdb\u57df\u540d\u89e3\u6790,\u53ef\u4ee5\u901a\u8fc7ngnix\u7684\u53cd\u5411\u4ee3\u7406\u6307\u5411tornado\u7684\u7aef\u53e3,ngnix\u914d\u7f6e\u5982\u4e0b: upstream tornado { server 127.0.0.1:8888 ; } server { listen 80 ; server_name test.com www.test.com ; location = /favicon.ico { rewrite (.*) /static/favicon.ico ; } location = / robots . txt { rewrite (.*) /static/robots.txt ; } location / { proxy_pass_header Server ; proxy_set_header Host $http_host ; proxy_redirect off ; proxy _set_header X-Real-IP $remote_addr ; proxy_set_header X-Scheme $scheme ; proxy_pass http : // tornado ; } }","title":"tornado ngnix \u53cd\u5411\u4ee3\u7406\u914d\u7f6e"},{"location":"python/py_tornado/#nginx","text":"upstream chat_cluster { ##\u591aserver\u8d1f\u8f7d,\u6839\u636eip_hash\u4f5c\u5206\u6d41\u4e5f\u53ef\u4ee5\u7528weight\u6743\u91cd\u5206\u6d41 server 127.0.0.1:10000 ; server 127.0.0.1:10001 ; ip_hash ; keepalive 1024 ; } server { listen 80 ; server_name chat.rootk.com ; location / { proxy_pass http : // chat_cluster ; proxy_http_version 1.1 ; # very important, nginx will waitting for the response from tornado # if the time have passed more than 7200, nginx send http 504 to client proxy_read_timeout 7200 ; proxy_set_header Connection ; proxy_set_header Host $host ; proxy_set_header X-Real-Ip $remote_addr ; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for ; } }","title":"nginx\u53cd\u5411\u4ee3\u7406\u957f\u94fe\u63a5"},{"location":"python/py_urllib/","text":"\u7f51\u7edc\u8bf7\u6c42 request get from urllib import request req = request . Request ( https://coding.net/ ) req . add_header ( User-Agent , Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25 ) with request . urlopen ( req ) as f : data = f . read () print ( Status: , f . status , f . reason ) for k , v in f . getheaders (): print ( %s : %s % ( k , v )) print ( Data: , data . decode ( utf-8 )) post \u53ea\u9700\u8981\u628a\u53c2\u6570 data \u4ee5 bytes \u5f62\u5f0f\u4f20\u5165 from urllib import request , parse login_data = parse . urlencode ([ ( username , 1 ), ]) req = request . Request ( https://echo.getpostman.com/post ) req . add_header ( User-Agent , Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25 ) with request . urlopen ( req , data = login_data . encode ( utf-8 )) as f : print ( Status: , f . status , f . reason ) for k , v in f . getheaders (): print ( %s : %s % ( k , v )) print ( Data: , f . read () . decode ( utf-8 ))","title":"\u7f51\u7edc\u5e93"},{"location":"python/py_urllib/#_1","text":"","title":"\u7f51\u7edc\u8bf7\u6c42"},{"location":"python/py_urllib/#request","text":"","title":"request"},{"location":"python/py_urllib/#get","text":"from urllib import request req = request . Request ( https://coding.net/ ) req . add_header ( User-Agent , Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25 ) with request . urlopen ( req ) as f : data = f . read () print ( Status: , f . status , f . reason ) for k , v in f . getheaders (): print ( %s : %s % ( k , v )) print ( Data: , data . decode ( utf-8 ))","title":"get"},{"location":"python/py_urllib/#post","text":"\u53ea\u9700\u8981\u628a\u53c2\u6570 data \u4ee5 bytes \u5f62\u5f0f\u4f20\u5165 from urllib import request , parse login_data = parse . urlencode ([ ( username , 1 ), ]) req = request . Request ( https://echo.getpostman.com/post ) req . add_header ( User-Agent , Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25 ) with request . urlopen ( req , data = login_data . encode ( utf-8 )) as f : print ( Status: , f . status , f . reason ) for k , v in f . getheaders (): print ( %s : %s % ( k , v )) print ( Data: , f . read () . decode ( utf-8 ))","title":"post"},{"location":"python/py_with/","text":"Python \u4e2d\u7684\u5173\u952e\u5b57with\u8be6\u89e3 \u8f6c\u8f7d\u81ea:https://github.com/zgs225/yuezlog/blob/master/source/_posts/2016-09-10-python-zhong-de-guan-jian-zi-with-xiang-jie.markdown \u5728 Python 2.5 \u4e2d\uff0c with \u5173\u952e\u5b57\u88ab\u52a0\u5165\u3002\u5b83\u5c06\u5e38\u7528\u7684 try ... except ... finally ... \u6a21\u5f0f\u5f88\u65b9\u4fbf\u7684\u88ab\u590d\u7528\u3002\u770b\u4e00\u4e2a\u6700\u7ecf\u5178\u7684\u4f8b\u5b50\uff1a with open ( file.txt ) as f : content = f . read () \u5728\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c\u65e0\u8bba with \u4e2d\u7684\u4ee3\u7801\u5757\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4efb\u4f55\u60c5\u51b5\uff0c\u6587\u4ef6\u6700\u7ec8\u90fd\u4f1a\u88ab\u5173\u95ed\u3002\u5982\u679c\u4ee3\u7801\u5757\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u4e00\u4e2a\u5f02\u5e38\uff0c\u90a3\u4e48\u5728\u8fd9\u4e2a\u5f02\u5e38\u88ab\u629b\u51fa\u524d\uff0c\u7a0b\u5e8f\u4f1a\u5148\u5c06\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u5173\u95ed\u3002 \u518d\u770b\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002 \u5728\u53d1\u8d77\u4e00\u4e2a\u6570\u636e\u5e93\u4e8b\u52a1\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u7ecf\u5e38\u4f1a\u7528\u7c7b\u4f3c\u8fd9\u6837\u7684\u4ee3\u7801\uff1a db . begin () try : # do some actions except : db . rollback () raise finally : db . commit () \u5982\u679c\u5c06\u53d1\u8d77\u4e8b\u52a1\u8bf7\u6c42\u7684\u64cd\u4f5c\u53d8\u6210\u53ef\u4ee5\u652f\u6301 with \u5173\u952e\u5b57\u7684\uff0c\u90a3\u4e48\u7528\u50cf\u8fd9\u6837\u7684\u4ee3\u7801\u5c31\u53ef\u4ee5\u4e86\uff1a with transaction ( db ): # do some actions \u4e0b\u9762\uff0c\u8be6\u7ec6\u7684\u8bf4\u660e\u4e00\u4e0b with \u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u5e76\u7528\u4e24\u79cd\u5e38\u7528\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0a\u9762\u7684\u4ee3\u7801\u3002 with \u7684\u4e00\u822c\u6267\u884c\u8fc7\u7a0b \u4e00\u6bb5\u57fa\u672c\u7684 with \u8868\u8fbe\u5f0f\uff0c\u5176\u7ed3\u6784\u662f\u8fd9\u6837\u7684\uff1a with EXPR as VAR : BLOCK \u5176\u4e2d\uff1a EXPR \u53ef\u4ee5\u662f\u4efb\u610f\u8868\u8fbe\u5f0f\uff1b as VAR \u662f\u53ef\u9009\u7684\u3002\u5176\u4e00\u822c\u7684\u6267\u884c\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1a \u8ba1\u7b97 EXPR \uff0c\u5e76\u83b7\u53d6\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002 \u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __exit()__ \u65b9\u6cd5\u88ab\u4fdd\u5b58\u8d77\u6765\u7528\u4e8e\u4e4b\u540e\u7684\u8c03\u7528\u3002 \u8c03\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __enter()__ \u65b9\u6cd5\u3002 \u5982\u679c with \u8868\u8fbe\u5f0f\u5305\u542b as VAR \uff0c\u90a3\u4e48 EXPR \u7684\u8fd4\u56de\u503c\u88ab\u8d4b\u503c\u7ed9 VAR \u3002 \u6267\u884c BLOCK \u4e2d\u7684\u8868\u8fbe\u5f0f\u3002 \u8c03\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __exit()__ \u65b9\u6cd5\u3002\u5982\u679c BLOCK \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u4e00\u4e2a\u5f02\u5e38\u5bfc\u81f4\u7a0b\u5e8f\u9000\u51fa\uff0c\u90a3\u4e48\u5f02\u5e38\u7684 type \u3001 value \u548c traceback (\u5373 sys.exc_info() \u7684\u8fd4\u56de\u503c)\u5c06\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 __exit()__ \u65b9\u6cd5\u3002\u5426\u5219\uff0c\u5c06\u4f20\u9012\u4e09\u4e2a None \u3002 \u5c06\u8fd9\u4e2a\u8fc7\u7a0b\u7528\u4ee3\u7801\u8868\u793a\uff0c\u662f\u8fd9\u6837\u7684\uff1a mgr = ( EXPR ) exit = type ( mgr ) . __exit__ # \u8fd9\u91cc\u6ca1\u6709\u6267\u884c value = type ( mgr ) . __enter__ ( mgr ) exc = True try : try : VAR = value # \u5982\u679c\u6709 as VAR BLOCK except : exc = False if not exit ( mgr , * sys . exc_info ()): raise finally : if exc : exit ( mgr , None , None , None ) \u8fd9\u4e2a\u8fc7\u7a0b\u6709\u51e0\u4e2a\u7ec6\u8282\uff1a \u5982\u679c\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u4e2d\u6ca1\u6709 __enter()__ \u6216\u8005 __exit()__ \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u90a3\u4e48\u89e3\u91ca\u5668\u4f1a\u629b\u51fa\u4e00\u4e2a AttributeError \u3002 \u5728 BLOCK \u4e2d\u53d1\u751f\u5f02\u5e38\u540e\uff0c\u5982\u679c __exit()__ \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u53ef\u88ab\u770b\u6210\u662f True \u7684\u503c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5f02\u5e38\u5c31\u4e0d\u4f1a\u88ab\u629b\u51fa\uff0c\u540e\u9762\u7684\u4ee3\u7801\u4f1a\u7ee7\u7eed\u6267\u884c\u3002 \u63a5\u4e0b\u6765\uff0c\u7528\u4e24\u79cd\u65b9\u6cd5\u6765\u5b9e\u73b0\u4e0a\u9762\u6765\u5b9e\u73b0\u4e0a\u9762\u7684\u8fc7\u7a0b\u7684\u5427\u3002 \u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7c7b \u7b2c\u4e00\u79cd\u65b9\u6cd5\u662f\u5b9e\u73b0\u4e00\u4e2a\u7c7b\uff0c\u5176\u542b\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5c5e\u6027 db \u548c\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u6240\u9700\u8981\u7684\u65b9\u6cd5 __enter()__ \u548c __exit()__ \u3002 class transaction ( object ): def __init__ ( self , db ): self . db = db def __enter__ ( self ): self . db . begin () def __exit__ ( self , type , value , traceback ): if type is None : db . commit () else : db . rollback () \u4e86\u89e3 with \u7684\u6267\u884c\u8fc7\u7a0b\u540e\uff0c\u8fd9\u4e2a\u5b9e\u73b0\u65b9\u5f0f\u662f\u5f88\u5bb9\u6613\u7406\u89e3\u7684\u3002\u4e0b\u9762\u4ecb\u7ecd\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5176\u539f\u7406\u7406\u89e3\u8d77\u6765\u8981\u590d\u6742\u5f88\u591a\u3002 \u4f7f\u7528\u751f\u6210\u5668\u88c5\u9970\u5668 \u5728Python\u7684\u6807\u51c6\u5e93\u4e2d\uff0c\u6709\u4e00\u4e2a\u88c5\u9970\u5668\u53ef\u4ee5\u901a\u8fc7\u751f\u6210\u5668\u83b7\u53d6\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002\u4f7f\u7528\u751f\u6210\u5668\u88c5\u9970\u5668\u7684\u5b9e\u73b0\u8fc7\u7a0b\u5982\u4e0b\uff1a from contextlib import contextmanager @contextmanager def transaction ( db ): db . begin () try : yield db except : db . rollback () raise else : db . commit () \u7b2c\u4e00\u773c\u4e0a\u770b\u53bb\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u66f4\u4e3a\u7b80\u5355\uff0c\u4f46\u662f\u5176\u673a\u5236\u66f4\u4e3a\u590d\u6742\u3002\u770b\u4e00\u4e0b\u5176\u6267\u884c\u8fc7\u7a0b\u5427\uff1a Python\u89e3\u91ca\u5668\u8bc6\u522b\u5230 yield \u5173\u952e\u5b57\u540e\uff0c def \u4f1a\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\u66ff\u4ee3\u5e38\u89c4\u7684\u51fd\u6570\uff08\u5728\u7c7b\u5b9a\u4e49\u4e4b\u5916\u6211\u559c\u6b22\u7528\u51fd\u6570\u4ee3\u66ff\u65b9\u6cd5\uff09\u3002 \u88c5\u9970\u5668 contextmanager \u88ab\u8c03\u7528\u5e76\u8fd4\u56de\u4e00\u4e2a\u5e2e\u52a9\u51fd\u6570\uff0c\u8fd9\u4e2a\u5e2e\u52a9\u51fd\u6570\u5728\u88ab\u8c03\u7528\u540e\u4f1a\u751f\u6210\u4e00\u4e2a GeneratorContextManager \u5b9e\u4f8b\u3002\u6700\u7ec8 with \u8868\u8fbe\u5f0f\u4e2d\u7684 EXPR \u8c03\u7528\u7684\u662f\u7531 contentmanager \u88c5\u9970\u5668\u8fd4\u56de\u7684\u5e2e\u52a9\u51fd\u6570\u3002 with \u8868\u8fbe\u5f0f\u8c03\u7528 transaction(db) \uff0c\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u5e2e\u52a9\u51fd\u6570\u3002\u5e2e\u52a9\u51fd\u6570\u8c03\u7528\u751f\u6210\u5668\u51fd\u6570\uff0c\u751f\u6210\u5668\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u3002 \u5e2e\u52a9\u51fd\u6570\u5c06\u8fd9\u4e2a\u751f\u6210\u5668\u4f20\u9012\u7ed9 GeneratorContextManager \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a GeneratorContextManager \u7684\u5b9e\u4f8b\u5bf9\u8c61\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002 with \u8868\u8fbe\u5f0f\u8c03\u7528\u5b9e\u4f8b\u5bf9\u8c61\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __enter()__ \u65b9\u6cd5\u3002 __enter()__ \u65b9\u6cd5\u4e2d\u4f1a\u8c03\u7528\u8fd9\u4e2a\u751f\u6210\u5668\u7684 next() \u65b9\u6cd5\u3002\u8fd9\u65f6\u5019\uff0c\u751f\u6210\u5668\u65b9\u6cd5\u4f1a\u6267\u884c\u5230 yield db \u5904\u505c\u6b62\uff0c\u5e76\u5c06 db \u4f5c\u4e3a next() \u7684\u8fd4\u56de\u503c\u3002\u5982\u679c\u6709 as VAR \uff0c\u90a3\u4e48\u5b83\u5c06\u4f1a\u88ab\u8d4b\u503c\u7ed9 VAR \u3002 with \u4e2d\u7684 BLOCK \u88ab\u6267\u884c\u3002 BLOCK \u6267\u884c\u7ed3\u675f\u540e\uff0c\u8c03\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __exit()__ \u65b9\u6cd5\u3002 __exit()__ \u65b9\u6cd5\u4f1a\u518d\u6b21\u8c03\u7528\u751f\u6210\u5668\u7684 next() \u65b9\u6cd5\u3002\u5982\u679c\u53d1\u751f StopIteration \u5f02\u5e38\uff0c\u5219 pass \u3002 \u5982\u679c\u6ca1\u6709\u53d1\u751f\u5f02\u5e38\u751f\u6210\u5668\u65b9\u6cd5\u5c06\u4f1a\u6267\u884c db.commit() \uff0c\u5426\u5219\u4f1a\u6267\u884c db.rollback() \u3002 \u518d\u6b21\u770b\u770b\u4e0a\u8ff0\u8fc7\u7a0b\u7684\u4ee3\u7801\u5927\u81f4\u5b9e\u73b0\uff1a def contextmanager ( func ): def helper ( * args , ** kwargs ): return GeneratorContextManager ( func ( * args , ** kwargs )) return helper class GeneratorContextManager ( object ): def __init__ ( self , gen ): self . gen = gen def __enter__ ( self ): try : return self . gen . next () except StopIteration : raise RuntimeError ( generator didn t yield ) def __exit__ ( self , type , value , traceback ): if type is None : try : self . gen . next () except StopIteration : pass else : raise RuntimeError ( generator didn t stop ) else : try : self . gen . throw ( type , value , traceback ) raise RuntimeError ( generator didn t stop after throw() ) except StopIteration : return True except : if sys . exc_info ()[ 1 ] is not value : raise \u603b\u7ed3 Python\u7684 with \u8868\u8fbe\u5f0f\u5305\u542b\u4e86\u5f88\u591aPython\u7279\u6027\uff0c\u82b1\u70b9\u65f6\u95f4\u5403\u900f with \u662f\u4e00\u4ef6\u975e\u5e38\u503c\u5f97\u7684\u4e8b\u60c5\u3002 \u4e00\u4e9b\u5176\u4ed6\u7684\u4f8b\u5b50 ``` python \u9501\u673a\u5236 @contextmanager def locked(lock): lock.acquired() try: yield finally: lock.release() ``` python \u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411 @contextmanager def stdout_redirect(new_stdout): old_stdout = sys.stdout sys.stdout = new_stdout try: yield finally: sys.stdout = old_stdout with open( file.txt , w ) as f: with stdout_redirect(f): print hello world \u5f15\u7528 The Python \"with\" Statement by Example PEP 343","title":"with\u5173\u952e\u5b57"},{"location":"python/py_with/#python-with","text":"\u8f6c\u8f7d\u81ea:https://github.com/zgs225/yuezlog/blob/master/source/_posts/2016-09-10-python-zhong-de-guan-jian-zi-with-xiang-jie.markdown \u5728 Python 2.5 \u4e2d\uff0c with \u5173\u952e\u5b57\u88ab\u52a0\u5165\u3002\u5b83\u5c06\u5e38\u7528\u7684 try ... except ... finally ... \u6a21\u5f0f\u5f88\u65b9\u4fbf\u7684\u88ab\u590d\u7528\u3002\u770b\u4e00\u4e2a\u6700\u7ecf\u5178\u7684\u4f8b\u5b50\uff1a with open ( file.txt ) as f : content = f . read () \u5728\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c\u65e0\u8bba with \u4e2d\u7684\u4ee3\u7801\u5757\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4efb\u4f55\u60c5\u51b5\uff0c\u6587\u4ef6\u6700\u7ec8\u90fd\u4f1a\u88ab\u5173\u95ed\u3002\u5982\u679c\u4ee3\u7801\u5757\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u4e00\u4e2a\u5f02\u5e38\uff0c\u90a3\u4e48\u5728\u8fd9\u4e2a\u5f02\u5e38\u88ab\u629b\u51fa\u524d\uff0c\u7a0b\u5e8f\u4f1a\u5148\u5c06\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u5173\u95ed\u3002 \u518d\u770b\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\u3002 \u5728\u53d1\u8d77\u4e00\u4e2a\u6570\u636e\u5e93\u4e8b\u52a1\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u7ecf\u5e38\u4f1a\u7528\u7c7b\u4f3c\u8fd9\u6837\u7684\u4ee3\u7801\uff1a db . begin () try : # do some actions except : db . rollback () raise finally : db . commit () \u5982\u679c\u5c06\u53d1\u8d77\u4e8b\u52a1\u8bf7\u6c42\u7684\u64cd\u4f5c\u53d8\u6210\u53ef\u4ee5\u652f\u6301 with \u5173\u952e\u5b57\u7684\uff0c\u90a3\u4e48\u7528\u50cf\u8fd9\u6837\u7684\u4ee3\u7801\u5c31\u53ef\u4ee5\u4e86\uff1a with transaction ( db ): # do some actions \u4e0b\u9762\uff0c\u8be6\u7ec6\u7684\u8bf4\u660e\u4e00\u4e0b with \u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u5e76\u7528\u4e24\u79cd\u5e38\u7528\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e0a\u9762\u7684\u4ee3\u7801\u3002","title":"Python \u4e2d\u7684\u5173\u952e\u5b57with\u8be6\u89e3"},{"location":"python/py_with/#with","text":"\u4e00\u6bb5\u57fa\u672c\u7684 with \u8868\u8fbe\u5f0f\uff0c\u5176\u7ed3\u6784\u662f\u8fd9\u6837\u7684\uff1a with EXPR as VAR : BLOCK \u5176\u4e2d\uff1a EXPR \u53ef\u4ee5\u662f\u4efb\u610f\u8868\u8fbe\u5f0f\uff1b as VAR \u662f\u53ef\u9009\u7684\u3002\u5176\u4e00\u822c\u7684\u6267\u884c\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1a \u8ba1\u7b97 EXPR \uff0c\u5e76\u83b7\u53d6\u4e00\u4e2a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002 \u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __exit()__ \u65b9\u6cd5\u88ab\u4fdd\u5b58\u8d77\u6765\u7528\u4e8e\u4e4b\u540e\u7684\u8c03\u7528\u3002 \u8c03\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __enter()__ \u65b9\u6cd5\u3002 \u5982\u679c with \u8868\u8fbe\u5f0f\u5305\u542b as VAR \uff0c\u90a3\u4e48 EXPR \u7684\u8fd4\u56de\u503c\u88ab\u8d4b\u503c\u7ed9 VAR \u3002 \u6267\u884c BLOCK \u4e2d\u7684\u8868\u8fbe\u5f0f\u3002 \u8c03\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __exit()__ \u65b9\u6cd5\u3002\u5982\u679c BLOCK \u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u4e00\u4e2a\u5f02\u5e38\u5bfc\u81f4\u7a0b\u5e8f\u9000\u51fa\uff0c\u90a3\u4e48\u5f02\u5e38\u7684 type \u3001 value \u548c traceback (\u5373 sys.exc_info() \u7684\u8fd4\u56de\u503c)\u5c06\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 __exit()__ \u65b9\u6cd5\u3002\u5426\u5219\uff0c\u5c06\u4f20\u9012\u4e09\u4e2a None \u3002 \u5c06\u8fd9\u4e2a\u8fc7\u7a0b\u7528\u4ee3\u7801\u8868\u793a\uff0c\u662f\u8fd9\u6837\u7684\uff1a mgr = ( EXPR ) exit = type ( mgr ) . __exit__ # \u8fd9\u91cc\u6ca1\u6709\u6267\u884c value = type ( mgr ) . __enter__ ( mgr ) exc = True try : try : VAR = value # \u5982\u679c\u6709 as VAR BLOCK except : exc = False if not exit ( mgr , * sys . exc_info ()): raise finally : if exc : exit ( mgr , None , None , None ) \u8fd9\u4e2a\u8fc7\u7a0b\u6709\u51e0\u4e2a\u7ec6\u8282\uff1a \u5982\u679c\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u4e2d\u6ca1\u6709 __enter()__ \u6216\u8005 __exit()__ \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u90a3\u4e48\u89e3\u91ca\u5668\u4f1a\u629b\u51fa\u4e00\u4e2a AttributeError \u3002 \u5728 BLOCK \u4e2d\u53d1\u751f\u5f02\u5e38\u540e\uff0c\u5982\u679c __exit()__ \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u53ef\u88ab\u770b\u6210\u662f True \u7684\u503c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5f02\u5e38\u5c31\u4e0d\u4f1a\u88ab\u629b\u51fa\uff0c\u540e\u9762\u7684\u4ee3\u7801\u4f1a\u7ee7\u7eed\u6267\u884c\u3002 \u63a5\u4e0b\u6765\uff0c\u7528\u4e24\u79cd\u65b9\u6cd5\u6765\u5b9e\u73b0\u4e0a\u9762\u6765\u5b9e\u73b0\u4e0a\u9762\u7684\u8fc7\u7a0b\u7684\u5427\u3002","title":"with \u7684\u4e00\u822c\u6267\u884c\u8fc7\u7a0b"},{"location":"python/py_with/#_1","text":"\u7b2c\u4e00\u79cd\u65b9\u6cd5\u662f\u5b9e\u73b0\u4e00\u4e2a\u7c7b\uff0c\u5176\u542b\u6709\u4e00\u4e2a\u5b9e\u4f8b\u5c5e\u6027 db \u548c\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u6240\u9700\u8981\u7684\u65b9\u6cd5 __enter()__ \u548c __exit()__ \u3002 class transaction ( object ): def __init__ ( self , db ): self . db = db def __enter__ ( self ): self . db . begin () def __exit__ ( self , type , value , traceback ): if type is None : db . commit () else : db . rollback () \u4e86\u89e3 with \u7684\u6267\u884c\u8fc7\u7a0b\u540e\uff0c\u8fd9\u4e2a\u5b9e\u73b0\u65b9\u5f0f\u662f\u5f88\u5bb9\u6613\u7406\u89e3\u7684\u3002\u4e0b\u9762\u4ecb\u7ecd\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5176\u539f\u7406\u7406\u89e3\u8d77\u6765\u8981\u590d\u6742\u5f88\u591a\u3002","title":"\u5b9e\u73b0\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7c7b"},{"location":"python/py_with/#_2","text":"\u5728Python\u7684\u6807\u51c6\u5e93\u4e2d\uff0c\u6709\u4e00\u4e2a\u88c5\u9970\u5668\u53ef\u4ee5\u901a\u8fc7\u751f\u6210\u5668\u83b7\u53d6\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002\u4f7f\u7528\u751f\u6210\u5668\u88c5\u9970\u5668\u7684\u5b9e\u73b0\u8fc7\u7a0b\u5982\u4e0b\uff1a from contextlib import contextmanager @contextmanager def transaction ( db ): db . begin () try : yield db except : db . rollback () raise else : db . commit () \u7b2c\u4e00\u773c\u4e0a\u770b\u53bb\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u66f4\u4e3a\u7b80\u5355\uff0c\u4f46\u662f\u5176\u673a\u5236\u66f4\u4e3a\u590d\u6742\u3002\u770b\u4e00\u4e0b\u5176\u6267\u884c\u8fc7\u7a0b\u5427\uff1a Python\u89e3\u91ca\u5668\u8bc6\u522b\u5230 yield \u5173\u952e\u5b57\u540e\uff0c def \u4f1a\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u51fd\u6570\u66ff\u4ee3\u5e38\u89c4\u7684\u51fd\u6570\uff08\u5728\u7c7b\u5b9a\u4e49\u4e4b\u5916\u6211\u559c\u6b22\u7528\u51fd\u6570\u4ee3\u66ff\u65b9\u6cd5\uff09\u3002 \u88c5\u9970\u5668 contextmanager \u88ab\u8c03\u7528\u5e76\u8fd4\u56de\u4e00\u4e2a\u5e2e\u52a9\u51fd\u6570\uff0c\u8fd9\u4e2a\u5e2e\u52a9\u51fd\u6570\u5728\u88ab\u8c03\u7528\u540e\u4f1a\u751f\u6210\u4e00\u4e2a GeneratorContextManager \u5b9e\u4f8b\u3002\u6700\u7ec8 with \u8868\u8fbe\u5f0f\u4e2d\u7684 EXPR \u8c03\u7528\u7684\u662f\u7531 contentmanager \u88c5\u9970\u5668\u8fd4\u56de\u7684\u5e2e\u52a9\u51fd\u6570\u3002 with \u8868\u8fbe\u5f0f\u8c03\u7528 transaction(db) \uff0c\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u5e2e\u52a9\u51fd\u6570\u3002\u5e2e\u52a9\u51fd\u6570\u8c03\u7528\u751f\u6210\u5668\u51fd\u6570\uff0c\u751f\u6210\u5668\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u3002 \u5e2e\u52a9\u51fd\u6570\u5c06\u8fd9\u4e2a\u751f\u6210\u5668\u4f20\u9012\u7ed9 GeneratorContextManager \uff0c\u5e76\u521b\u5efa\u4e00\u4e2a GeneratorContextManager \u7684\u5b9e\u4f8b\u5bf9\u8c61\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u3002 with \u8868\u8fbe\u5f0f\u8c03\u7528\u5b9e\u4f8b\u5bf9\u8c61\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __enter()__ \u65b9\u6cd5\u3002 __enter()__ \u65b9\u6cd5\u4e2d\u4f1a\u8c03\u7528\u8fd9\u4e2a\u751f\u6210\u5668\u7684 next() \u65b9\u6cd5\u3002\u8fd9\u65f6\u5019\uff0c\u751f\u6210\u5668\u65b9\u6cd5\u4f1a\u6267\u884c\u5230 yield db \u5904\u505c\u6b62\uff0c\u5e76\u5c06 db \u4f5c\u4e3a next() \u7684\u8fd4\u56de\u503c\u3002\u5982\u679c\u6709 as VAR \uff0c\u90a3\u4e48\u5b83\u5c06\u4f1a\u88ab\u8d4b\u503c\u7ed9 VAR \u3002 with \u4e2d\u7684 BLOCK \u88ab\u6267\u884c\u3002 BLOCK \u6267\u884c\u7ed3\u675f\u540e\uff0c\u8c03\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u7684 __exit()__ \u65b9\u6cd5\u3002 __exit()__ \u65b9\u6cd5\u4f1a\u518d\u6b21\u8c03\u7528\u751f\u6210\u5668\u7684 next() \u65b9\u6cd5\u3002\u5982\u679c\u53d1\u751f StopIteration \u5f02\u5e38\uff0c\u5219 pass \u3002 \u5982\u679c\u6ca1\u6709\u53d1\u751f\u5f02\u5e38\u751f\u6210\u5668\u65b9\u6cd5\u5c06\u4f1a\u6267\u884c db.commit() \uff0c\u5426\u5219\u4f1a\u6267\u884c db.rollback() \u3002 \u518d\u6b21\u770b\u770b\u4e0a\u8ff0\u8fc7\u7a0b\u7684\u4ee3\u7801\u5927\u81f4\u5b9e\u73b0\uff1a def contextmanager ( func ): def helper ( * args , ** kwargs ): return GeneratorContextManager ( func ( * args , ** kwargs )) return helper class GeneratorContextManager ( object ): def __init__ ( self , gen ): self . gen = gen def __enter__ ( self ): try : return self . gen . next () except StopIteration : raise RuntimeError ( generator didn t yield ) def __exit__ ( self , type , value , traceback ): if type is None : try : self . gen . next () except StopIteration : pass else : raise RuntimeError ( generator didn t stop ) else : try : self . gen . throw ( type , value , traceback ) raise RuntimeError ( generator didn t stop after throw() ) except StopIteration : return True except : if sys . exc_info ()[ 1 ] is not value : raise","title":"\u4f7f\u7528\u751f\u6210\u5668\u88c5\u9970\u5668"},{"location":"python/py_with/#_3","text":"Python\u7684 with \u8868\u8fbe\u5f0f\u5305\u542b\u4e86\u5f88\u591aPython\u7279\u6027\uff0c\u82b1\u70b9\u65f6\u95f4\u5403\u900f with \u662f\u4e00\u4ef6\u975e\u5e38\u503c\u5f97\u7684\u4e8b\u60c5\u3002","title":"\u603b\u7ed3"},{"location":"python/py_with/#_4","text":"``` python \u9501\u673a\u5236 @contextmanager def locked(lock): lock.acquired() try: yield finally: lock.release() ``` python \u6807\u51c6\u8f93\u51fa\u91cd\u5b9a\u5411 @contextmanager def stdout_redirect(new_stdout): old_stdout = sys.stdout sys.stdout = new_stdout try: yield finally: sys.stdout = old_stdout with open( file.txt , w ) as f: with stdout_redirect(f): print hello world","title":"\u4e00\u4e9b\u5176\u4ed6\u7684\u4f8b\u5b50"},{"location":"python/py_with/#_5","text":"The Python \"with\" Statement by Example PEP 343","title":"\u5f15\u7528"},{"location":"swift/swift1_intro/","text":"swift\u57fa\u7840\u5165\u95e8 \u73af\u5883 PlayGround: Swift \u7684 playground \u5c31\u50cf\u662f\u4e00\u4e2a\u53ef\u4ea4\u4e92\u7684\u6587\u6863\uff0c\u5b83\u662f\u7528\u6765\u7ec3\u624b\u5b66swift,\u53ef\u5b9e\u65f6\u67e5\u770b\u4ee3\u7801\u6548\u679c,Xcode= File = New = Playground. \u57fa\u7840\u8bed\u6cd5 \u6ce8\u91ca //\u8fd9\u662f\u4e00\u884c\u6ce8\u91ca /* \u8fd9\u4e5f\u662f\u4e00\u6761\u6ce8\u91ca\uff0c \u4f46\u8de8\u8d8a\u591a\u884c */ /* \u8fd9\u662f\u7b2c\u4e00\u4e2a\u591a\u884c\u6ce8\u91ca\u7684\u5f00\u5934 /* \u8fd9\u662f\u5d4c\u5957\u7684\u7b2c\u4e8c\u4e2a\u591a\u884c\u6ce8\u91ca */ \u8fd9\u662f\u7b2c\u4e00\u4e2a\u591a\u884c\u6ce8\u91ca\u7684\u7ed3\u5c3e */ \u5206\u53f7 \u4e0e\u5176\u5b83\u8bed\u8a00\u4e0d\u540c\u7684\u662f,Swift\u4e0d\u8981\u6c42\u5728\u6bcf\u884c\u8bed\u53e5\u7684\u7ed3\u5c3e\u4f7f\u7528\u5206\u53f7(;),\u4f46\u5f53\u4f60\u5728\u540c\u4e00\u884c\u4e66\u5199\u591a\u6761\u8bed\u53e5\u65f6,\u5fc5\u987b\u7528\u5206\u53f7\u9694\u5f00\uff1a var myString = Hello, World! ; print(myString) Swift\u7f29\u8fdb Swift\u5bf9\u7a7a\u683c\u7684\u4f7f\u7528\u6709\u4e00\u5b9a\u7684\u8981\u6c42\uff0c\u4f46\u662f\u53c8\u4e0d\u50cfPython\u5bf9\u7f29\u8fdb\u7684\u8981\u6c42\u90a3\u4e48\u4e25\u683c\u3002 \u5728Swift\u4e2d\uff0c\u8fd0\u7b97\u7b26\u4e0d\u80fd\u76f4\u63a5\u8ddf\u5728\u53d8\u91cf\u6216\u5e38\u91cf\u7684\u540e\u9762\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u4f1a\u62a5\u9519\uff1a let a= 1 + 2 //error:prefix/postfix = is reserved \u8fd0\u7b97\u7b26\u4e0d\u80fd\u76f4\u63a5\u8ddf\u5728\u53d8\u91cf\u6216\u5e38\u91cf\u7684\u540e \u6b63\u786e\u5199\u6cd5: let a = 1 + 2 let c = a|b //error: | is not a postfix unary operator \u64cd\u4f5c\u7b26\u4e24\u8fb9\u9700\u8981\u7a7a\u683c \u6b63\u786e\u5199\u6cd5: let c = a | b \u6807\u8bc6\u7b26 \u533a\u5206\u5927\u5c0f\u5199\uff0cMyname\u4e0emyname\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6807\u8bc6\u7b26\uff1b \u6807\u8bc6\u7b26\u9996\u5b57\u7b26\u53ef\u4ee5\u4ee5\u4e0b\u5212\u7ebf\uff08_\uff09\u6216\u8005\u5b57\u6bcd\u5f00\u59cb\uff0c\u4f46\u4e0d\u80fd\u662f\u6570\u5b57\uff1b \u6807\u8bc6\u7b26\u4e2d\u5176\u4ed6\u5b57\u7b26\u53ef\u4ee5\u662f\u4e0b\u5212\u7ebf\uff08_\uff09\u3001\u5b57\u6bcd\u6216\u6570\u5b57\u3002 \u6570\u636e\u7c7b\u578b Int,UInt,Double,Float,Boolean,String \u53d8\u91cf\u5b9a\u4e49 let a = 1 //\u5e38\u91cf var b:int = 1 //\u53d8\u91cf typealias myint = int //\u522b\u540d\uff0c\u6709\u70b9\u50cf\u5b8f\u5b9a\u4e49 \u7c7b\u578b\u63a8\u65ad \u975e\u663e\u793a\u53d8\u91cf\u5b9a\u4e49\u65f6swift\u4f1a\u5904\u884c\u63a8\u65ad\u4f60\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5f53\u63a8\u65ad\u6d6e\u70b9\u6570\u7684\u7c7b\u578b\u65f6\uff0cSwift\u603b\u662f\u4f1a\u9009\u62e9Double\u800c\u4e0d\u662fFloat\u3002 Swift \u53ef\u9009(Optionals)\u7c7b\u578b \u7ed9\u65e0\u9ed8\u8ba4\u503c\u7684\u5305\u88c5\u4e00\u4e2ani\u9ed8\u8ba4\u503c var optionalInteger: Int? \u7b49\u4ef7\u4e8e var optionalInteger: Optional Int \u611f\u53f9\u53f7\uff08!\uff09\u5f3a\u5236\u89e3\u6790 var myString:String? myString = Hello, Swift! if myString != nil { // \u5f3a\u5236\u89e3\u6790 print( myString! ) }else{ print( myString \u503c\u4e3a nil ) } \u81ea\u52a8\u89e3\u6790(!) var myString:String! myString = Hello, Swift! if myString != nil { print(myString) }else{ print( myString \u503c\u4e3a nil ) } \u53ef\u9009\u7ed1\u5b9a \u4f7f\u7528\u53ef\u9009\u7ed1\u5b9a\uff08optional binding\uff09\u6765\u5224\u65ad\u53ef\u9009\u7c7b\u578b\u662f\u5426\u5305\u542b\u503c\uff0c\u5982\u679c\u5305\u542b\u5c31\u628a\u503c\u8d4b\u7ed9\u4e00\u4e2a\u4e34\u65f6\u5e38\u91cf\u6216\u8005\u53d8\u91cf\u3002\u53ef\u9009\u7ed1\u5b9a\u53ef\u4ee5\u7528\u5728if\u548cwhile\u8bed\u53e5\u4e2d\u6765\u5bf9\u53ef\u9009\u7c7b\u578b\u7684\u503c\u8fdb\u884c\u5224\u65ad\u5e76\u628a\u503c\u8d4b\u7ed9\u4e00\u4e2a\u5e38\u91cf\u6216\u8005\u53d8\u91cf\u3002 var myString:String? myString = Hello, Swift! if let yourString = myString { print( \u4f60\u7684\u5b57\u7b26\u4e32\u503c\u4e3a - \\(yourString) ) }else{ print( \u4f60\u7684\u5b57\u7b26\u4e32\u6ca1\u6709\u503c ) } \u63a7\u5236\u7b26 func a() - Bool { print( a ) return true } func b() - Bool { print( b ) return false } if (a() || b()) { print( c ) } error","title":"swift\u57fa\u7840\u5165\u95e8"},{"location":"swift/swift1_intro/#swift","text":"","title":"swift\u57fa\u7840\u5165\u95e8"},{"location":"swift/swift1_intro/#_1","text":"PlayGround: Swift \u7684 playground \u5c31\u50cf\u662f\u4e00\u4e2a\u53ef\u4ea4\u4e92\u7684\u6587\u6863\uff0c\u5b83\u662f\u7528\u6765\u7ec3\u624b\u5b66swift,\u53ef\u5b9e\u65f6\u67e5\u770b\u4ee3\u7801\u6548\u679c,Xcode= File = New = Playground.","title":"\u73af\u5883"},{"location":"swift/swift1_intro/#_2","text":"","title":"\u57fa\u7840\u8bed\u6cd5"},{"location":"swift/swift1_intro/#_3","text":"//\u8fd9\u662f\u4e00\u884c\u6ce8\u91ca /* \u8fd9\u4e5f\u662f\u4e00\u6761\u6ce8\u91ca\uff0c \u4f46\u8de8\u8d8a\u591a\u884c */ /* \u8fd9\u662f\u7b2c\u4e00\u4e2a\u591a\u884c\u6ce8\u91ca\u7684\u5f00\u5934 /* \u8fd9\u662f\u5d4c\u5957\u7684\u7b2c\u4e8c\u4e2a\u591a\u884c\u6ce8\u91ca */ \u8fd9\u662f\u7b2c\u4e00\u4e2a\u591a\u884c\u6ce8\u91ca\u7684\u7ed3\u5c3e */","title":"\u6ce8\u91ca"},{"location":"swift/swift1_intro/#_4","text":"\u4e0e\u5176\u5b83\u8bed\u8a00\u4e0d\u540c\u7684\u662f,Swift\u4e0d\u8981\u6c42\u5728\u6bcf\u884c\u8bed\u53e5\u7684\u7ed3\u5c3e\u4f7f\u7528\u5206\u53f7(;),\u4f46\u5f53\u4f60\u5728\u540c\u4e00\u884c\u4e66\u5199\u591a\u6761\u8bed\u53e5\u65f6,\u5fc5\u987b\u7528\u5206\u53f7\u9694\u5f00\uff1a var myString = Hello, World! ; print(myString)","title":"\u5206\u53f7"},{"location":"swift/swift1_intro/#swift_1","text":"Swift\u5bf9\u7a7a\u683c\u7684\u4f7f\u7528\u6709\u4e00\u5b9a\u7684\u8981\u6c42\uff0c\u4f46\u662f\u53c8\u4e0d\u50cfPython\u5bf9\u7f29\u8fdb\u7684\u8981\u6c42\u90a3\u4e48\u4e25\u683c\u3002 \u5728Swift\u4e2d\uff0c\u8fd0\u7b97\u7b26\u4e0d\u80fd\u76f4\u63a5\u8ddf\u5728\u53d8\u91cf\u6216\u5e38\u91cf\u7684\u540e\u9762\u3002\u4f8b\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u4f1a\u62a5\u9519\uff1a let a= 1 + 2 //error:prefix/postfix = is reserved \u8fd0\u7b97\u7b26\u4e0d\u80fd\u76f4\u63a5\u8ddf\u5728\u53d8\u91cf\u6216\u5e38\u91cf\u7684\u540e \u6b63\u786e\u5199\u6cd5: let a = 1 + 2 let c = a|b //error: | is not a postfix unary operator \u64cd\u4f5c\u7b26\u4e24\u8fb9\u9700\u8981\u7a7a\u683c \u6b63\u786e\u5199\u6cd5: let c = a | b","title":"Swift\u7f29\u8fdb"},{"location":"swift/swift1_intro/#_5","text":"\u533a\u5206\u5927\u5c0f\u5199\uff0cMyname\u4e0emyname\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6807\u8bc6\u7b26\uff1b \u6807\u8bc6\u7b26\u9996\u5b57\u7b26\u53ef\u4ee5\u4ee5\u4e0b\u5212\u7ebf\uff08_\uff09\u6216\u8005\u5b57\u6bcd\u5f00\u59cb\uff0c\u4f46\u4e0d\u80fd\u662f\u6570\u5b57\uff1b \u6807\u8bc6\u7b26\u4e2d\u5176\u4ed6\u5b57\u7b26\u53ef\u4ee5\u662f\u4e0b\u5212\u7ebf\uff08_\uff09\u3001\u5b57\u6bcd\u6216\u6570\u5b57\u3002","title":"\u6807\u8bc6\u7b26"},{"location":"swift/swift1_intro/#_6","text":"Int,UInt,Double,Float,Boolean,String","title":"\u6570\u636e\u7c7b\u578b"},{"location":"swift/swift1_intro/#_7","text":"let a = 1 //\u5e38\u91cf var b:int = 1 //\u53d8\u91cf typealias myint = int //\u522b\u540d\uff0c\u6709\u70b9\u50cf\u5b8f\u5b9a\u4e49","title":"\u53d8\u91cf\u5b9a\u4e49"},{"location":"swift/swift1_intro/#_8","text":"\u975e\u663e\u793a\u53d8\u91cf\u5b9a\u4e49\u65f6swift\u4f1a\u5904\u884c\u63a8\u65ad\u4f60\u7684\u6570\u636e\u7c7b\u578b\uff0c\u5f53\u63a8\u65ad\u6d6e\u70b9\u6570\u7684\u7c7b\u578b\u65f6\uff0cSwift\u603b\u662f\u4f1a\u9009\u62e9Double\u800c\u4e0d\u662fFloat\u3002","title":"\u7c7b\u578b\u63a8\u65ad"},{"location":"swift/swift1_intro/#swift-optionals","text":"\u7ed9\u65e0\u9ed8\u8ba4\u503c\u7684\u5305\u88c5\u4e00\u4e2ani\u9ed8\u8ba4\u503c var optionalInteger: Int? \u7b49\u4ef7\u4e8e var optionalInteger: Optional Int \u611f\u53f9\u53f7\uff08!\uff09\u5f3a\u5236\u89e3\u6790 var myString:String? myString = Hello, Swift! if myString != nil { // \u5f3a\u5236\u89e3\u6790 print( myString! ) }else{ print( myString \u503c\u4e3a nil ) } \u81ea\u52a8\u89e3\u6790(!) var myString:String! myString = Hello, Swift! if myString != nil { print(myString) }else{ print( myString \u503c\u4e3a nil ) } \u53ef\u9009\u7ed1\u5b9a \u4f7f\u7528\u53ef\u9009\u7ed1\u5b9a\uff08optional binding\uff09\u6765\u5224\u65ad\u53ef\u9009\u7c7b\u578b\u662f\u5426\u5305\u542b\u503c\uff0c\u5982\u679c\u5305\u542b\u5c31\u628a\u503c\u8d4b\u7ed9\u4e00\u4e2a\u4e34\u65f6\u5e38\u91cf\u6216\u8005\u53d8\u91cf\u3002\u53ef\u9009\u7ed1\u5b9a\u53ef\u4ee5\u7528\u5728if\u548cwhile\u8bed\u53e5\u4e2d\u6765\u5bf9\u53ef\u9009\u7c7b\u578b\u7684\u503c\u8fdb\u884c\u5224\u65ad\u5e76\u628a\u503c\u8d4b\u7ed9\u4e00\u4e2a\u5e38\u91cf\u6216\u8005\u53d8\u91cf\u3002 var myString:String? myString = Hello, Swift! if let yourString = myString { print( \u4f60\u7684\u5b57\u7b26\u4e32\u503c\u4e3a - \\(yourString) ) }else{ print( \u4f60\u7684\u5b57\u7b26\u4e32\u6ca1\u6709\u503c ) }","title":"Swift \u53ef\u9009(Optionals)\u7c7b\u578b"},{"location":"swift/swift1_intro/#_9","text":"func a() - Bool { print( a ) return true } func b() - Bool { print( b ) return false } if (a() || b()) { print( c ) }","title":"\u63a7\u5236\u7b26"},{"location":"swift/swift1_intro/#error","text":"","title":"error"},{"location":"versions/git_branch/","text":"git \u5206\u652f Git branch \u5206\u652f\u7ba1\u7406 \u5206\u652f\u7b80\u4ecb \u5206\u652f\u662f\u4e3a\u4e86\u5c06\u4fee\u6539\u8bb0\u5f55\u7684\u6574\u4f53\u6d41\u7a0b\u5206\u53c9\u4fdd\u5b58\u3002\u5206\u53c9\u540e\u7684\u5206\u652f\u4e0d\u53d7\u5176\u4ed6\u5206\u652f\u7684\u5f71\u54cd\uff0c\u6240\u4ee5\u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u91cc\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u591a\u4e2a\u4fee\u6539 git \u4e2d\u7684\u5206\u652f\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u53ef\u79fb\u52a8\u6307\u9488,\u6307\u5411\u63d0\u4ea4\u5bf9\u8c61 \u5206\u652f\u521b\u5efa #\u521b\u5efa\u5206\u652f git branch testing \u4e0a\u9762\u7684\u547d\u4ee4\u521b\u5efa\u4e86 testing \u5206\u652f,\u4f46\u662f\u5f53\u524d\u5206\u652f\u8fd8\u662f master git \u6709\u4e00\u4e2a\u540d\u4e3a HEAD \u7684\u7279\u6b8a\u6307\u9488\u6307\u5411\u5f53\u524d\u7684\u5206\u652f \u63d0\u4ea4\u65f6\u4f7f\u7528~(tilde)\u548c^(caret)\u5c31\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e2a\u63d0\u4ea4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u3002\u6700\u5e38\u7528\u7684\u5c31\u662f\u76f8\u5bf9\u4e8eHEAD\u7684\u4f4d\u7f6e\u3002HEAD\u540e\u9762\u52a0\u4e0a~(tilde\uff09\u53ef\u4ee5\u6307\u5b9aHEAD\u4e4b\u524d\u7684\u63d0\u4ea4\u8bb0\u5f55\u3002\u5408\u5e76\u5206\u652f\u4f1a\u6709\u591a\u4e2a\u6839\u8282\u70b9\uff0c\u60a8\u53ef\u4ee5\u7528^(caret) \u6765\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u4e3a\u6839\u8282\u70b9 git log --oneline --decorate \u7528\u4e8e\u67e5\u770b\u5404\u4e2a\u5206\u652f\u5f53\u524d\u6240\u6307\u7684\u5bf9\u8c61 12b9f27 ( HEAD - testing ) work d.txt 716cae2 ( tag: v1.0, origin/master, origin/HEAD, master ) branch 8 7c64b0b stash work 1 \u5206\u652f\u5207\u6362 \u5728\u5207\u6362\u5206\u652f\u65f6\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u4f60\u5de5\u4f5c\u76ee\u5f55\u91cc\u7684\u6587\u4ef6\u4f1a\u88ab\u6539\u53d8\u3002 \u5982\u679c\u662f\u5207\u6362\u5230\u4e00\u4e2a\u8f83\u65e7\u7684\u5206\u652f\uff0c\u4f60\u7684\u5de5\u4f5c\u76ee\u5f55\u4f1a\u6062\u590d\u5230\u8be5\u5206\u652f\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u65f6\u7684\u6837\u5b50\u3002 #\u5207\u6362\u5230testing\u5206\u652f git checkout testing #\u4ee5\u5f53\u524d\u5206\u652f\u72b6\u6001\u521b\u5efa\u5206\u652f\u5e76\u4e14\u5207\u6362\u5230\u65b0\u5206\u652f\u76f8\u5f53\u4e8egit branch iss53,git checkout iss53 git checkout -b iss53 Git merge\u5206\u652f\u5408\u5e76 merge \u547d\u4ee4\u628a\u4e0d\u540c\u5206\u652f\u5408\u5e76\u8d77\u6765\u3002\u5408\u5e76\u524d\uff0c\u7d22\u5f15\u5fc5\u987b\u548c\u5f53\u524d\u63d0\u4ea4\u76f8\u540c\u3002\u5982\u679c\u53e6\u4e00\u4e2a\u5206\u652f\u662f\u5f53\u524d\u63d0\u4ea4\u7684\u7956\u7236\u8282\u70b9\uff0c\u90a3\u4e48\u5408\u5e76\u547d\u4ee4\u5c06\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002 \u53e6\u4e00\u79cd\u60c5\u51b5\u662f\u5982\u679c\u5f53\u524d\u63d0\u4ea4\u662f\u53e6\u4e00\u4e2a\u5206\u652f\u7684\u7956\u7236\u8282\u70b9\uff0c\u5c31\u5bfc\u81f4fast-forward\u5408\u5e76\u3002\u6307\u5411\u53ea\u662f\u7b80\u5355\u7684\u79fb\u52a8\uff0c\u5e76\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u3002 \u5426\u5219\u5c31\u662f\u4e00\u6b21\u771f\u6b63\u7684\u5408\u5e76\u3002\u9ed8\u8ba4\u628a\u5f53\u524d\u63d0\u4ea4(ed489 \u5982\u4e0b\u6240\u793a)\u548c\u53e6\u4e00\u4e2a\u63d0\u4ea4(33104)\u4ee5\u53ca\u4ed6\u4eec\u7684\u5171\u540c\u7956\u7236\u8282\u70b9(b325c)\u8fdb\u884c\u4e00\u6b21\u4e09\u65b9\u5408\u5e76\u3002\u7ed3\u679c\u662f\u5148\u4fdd\u5b58\u5f53\u524d\u76ee\u5f55\u548c\u7d22\u5f15\uff0c\u7136\u540e\u548c\u7236\u8282\u70b933104\u4e00\u8d77\u505a\u4e00\u6b21\u65b0\u63d0\u4ea4\u3002 #\u5c06\u5206\u652f\u7684\u6240\u6709\u63d0\u4ea4\u5408\u5e76\u6210\u4e00\u6b21\u63d0\u4ea4\u5e76\u5165\u5f53\u524d\u5206\u652f git merge --squash \u5220\u9664\u5206\u652f git branch -d branchname Git rebase \u884d\u5408 \u662f\u5408\u5e76\u547d\u4ee4\u7684\u53e6\u4e00\u79cd\u9009\u62e9\u3002\u5408\u5e76\u628a\u4e24\u4e2a\u7236\u5206\u652f\u5408\u5e76\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\uff0c\u63d0\u4ea4\u5386\u53f2\u4e0d\u662f\u7ebf\u6027\u7684\u3002 \u884d\u5408 \u5728\u5f53\u524d\u5206\u652f\u4e0a\u91cd\u6f14\u53e6\u4e00\u4e2a\u5206\u652f\u7684\u5386\u53f2\uff0c\u63d0\u4ea4\u5386\u53f2\u662f\u7ebf\u6027\u7684\u3002 \u672c\u8d28\u4e0a\uff0c\u8fd9\u662f\u7ebf\u6027\u5316\u7684\u81ea\u52a8\u7684 cherry-pick \u4e0a\u9762\u7684\u547d\u4ee4\u90fd\u5728topic\u5206\u652f\u4e2d\u8fdb\u884c\uff0c\u800c\u4e0d\u662fmaster\u5206\u652f\uff0c\u5728master\u5206\u652f\u4e0a\u91cd\u6f14\uff0c\u5e76\u4e14\u628a\u5206\u652f\u6307\u5411\u65b0\u7684\u8282\u70b9\u3002\u6ce8\u610f\u65e7\u63d0\u4ea4\u6ca1\u6709\u88ab\u5f15\u7528\uff0c\u5c06\u88ab\u56de\u6536\u3002 \u8981\u9650\u5236\u56de\u6eda\u8303\u56f4\uff0c\u4f7f\u7528 --onto \u9009\u9879\u3002\u4e0b\u9762\u7684\u547d\u4ee4\u5728master\u5206\u652f\u4e0a\u91cd\u6f14\u5f53\u524d\u5206\u652f\u4ece169a6\u4ee5\u6765\u7684\u6700\u8fd1\u51e0\u4e2a\u63d0\u4ea4\uff0c\u53732c33a\u3002 \u540c\u6837\u6709 git rebase --interactive \u8ba9\u4f60\u66f4\u65b9\u4fbf\u7684\u5b8c\u6210\u4e00\u4e9b\u590d\u6742\u64cd\u4f5c\uff0c\u6bd4\u5982\u4e22\u5f03\u3001\u91cd\u6392\u3001\u4fee\u6539\u3001\u5408\u5e76\u63d0\u4ea4\u3002\u6ca1\u6709\u56fe\u7247\u4f53\u73b0\u8fd9\u4e9b \u5b8c\u6574\u5de5\u4f5c\u6d41 #git\u652f\u6301\u5f88\u591a\u79cd\u5de5\u4f5c\u6d41\u7a0b\uff0c\u6211\u4eec\u91c7\u7528\u7684\u4e00\u822c\u662f\u8fd9\u6837\uff0c\u8fdc\u7a0b\u521b\u5efa\u4e00\u4e2a\u4e3b\u5206\u652f\uff0c\u672c\u5730\u6bcf\u4eba\u521b\u5efa\u529f\u80fd\u5206\u652f\uff0c\u65e5\u5e38\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a #\u53bb\u81ea\u5df1\u7684\u5de5\u4f5c\u5206\u652f git checkout work #\u5de5\u4f5c .... #\u63d0\u4ea4\u5de5\u4f5c\u5206\u652f\u7684\u4fee\u6539 git commit -a #\u56de\u5230\u4e3b\u5206\u652f git checkout master #\u83b7\u53d6\u8fdc\u7a0b\u6700\u65b0\u7684\u4fee\u6539\uff0c\u6b64\u65f6\u4e0d\u4f1a\u4ea7\u751f\u51b2\u7a81 git pull #\u56de\u5230\u5de5\u4f5c\u5206\u652f git checkout work #\u7528rebase\u5408\u5e76\u4e3b\u5e72\u7684\u4fee\u6539\uff0c\u5982\u679c\u6709\u51b2\u7a81\u5728\u6b64\u65f6\u89e3\u51b3 git rebase master #\u89e3\u51b3\u51b2\u7a81\u540e git add . # --continue:\u5b8c\u6210rebase --abort \u4e2d\u65adrebase\u8fc7\u7a0b --skip\u5ffd\u7565\u51b2\u7a81 git rebase --continue #\u56de\u5230\u4e3b\u5206\u652f git checkout master #\u5408\u5e76\u5de5\u4f5c\u5206\u652f\u7684\u4fee\u6539\uff0c\u628a\u5206\u652f\u63d0\u4ea4\u5408\u5e76\u6210\u4e00\u4e2a git merge --squash work #\u63d0\u4ea4\u5230\u8fdc\u7a0b\u4e3b\u5e72 git push #\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\uff0c\u8fdc\u7a0b\u4e3b\u5e72\u4e0a\u7684\u5386\u53f2\u6c38\u8fdc\u662f\u7ebf\u6027\u7684\u3002\u6bcf\u4e2a\u4eba\u5728\u672c\u5730\u5206\u652f\u89e3\u51b3\u51b2\u7a81\uff0c\u4e0d\u4f1a\u5728\u4e3b\u5e72\u4e0a\u4ea7\u751f\u51b2\u7a81 \u5408\u5e76\u63d0\u4ea4 #\u8981\u5408\u5e76\u7684\u524d\u9762\u5168\u90e8\u6539\u6210s git rebase -i 51c5b4850060ff675f4541b8b7cd479f94b743e8 Git cherry cherry-pick\u547d\u4ee4\"\u590d\u5236\"\u4e00\u4e2a\u63d0\u4ea4\u8282\u70b9\u5e76\u5728\u5f53\u524d\u5206\u652f\u505a\u4e00\u6b21\u5b8c\u5168\u4e00\u6837\u7684\u65b0\u63d0\u4ea4\u3002 \u5220\u9664\u8fdc\u7a0b\u5206\u652f #\u5220\u9664\u672c\u5730\u5206\u652f git branch -D test #\u5220\u9664\u8fdc\u7a0b\u5206\u652f git push origin :test","title":"git\u5206\u652f\u7ba1\u7406"},{"location":"versions/git_branch/#git","text":"","title":"git \u5206\u652f"},{"location":"versions/git_branch/#git-branch","text":"","title":"Git branch \u5206\u652f\u7ba1\u7406"},{"location":"versions/git_branch/#_1","text":"\u5206\u652f\u662f\u4e3a\u4e86\u5c06\u4fee\u6539\u8bb0\u5f55\u7684\u6574\u4f53\u6d41\u7a0b\u5206\u53c9\u4fdd\u5b58\u3002\u5206\u53c9\u540e\u7684\u5206\u652f\u4e0d\u53d7\u5176\u4ed6\u5206\u652f\u7684\u5f71\u54cd\uff0c\u6240\u4ee5\u5728\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u91cc\u53ef\u4ee5\u540c\u65f6\u8fdb\u884c\u591a\u4e2a\u4fee\u6539 git \u4e2d\u7684\u5206\u652f\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u53ef\u79fb\u52a8\u6307\u9488,\u6307\u5411\u63d0\u4ea4\u5bf9\u8c61","title":"\u5206\u652f\u7b80\u4ecb"},{"location":"versions/git_branch/#_2","text":"#\u521b\u5efa\u5206\u652f git branch testing \u4e0a\u9762\u7684\u547d\u4ee4\u521b\u5efa\u4e86 testing \u5206\u652f,\u4f46\u662f\u5f53\u524d\u5206\u652f\u8fd8\u662f master git \u6709\u4e00\u4e2a\u540d\u4e3a HEAD \u7684\u7279\u6b8a\u6307\u9488\u6307\u5411\u5f53\u524d\u7684\u5206\u652f \u63d0\u4ea4\u65f6\u4f7f\u7528~(tilde)\u548c^(caret)\u5c31\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e2a\u63d0\u4ea4\u7684\u76f8\u5bf9\u4f4d\u7f6e\u3002\u6700\u5e38\u7528\u7684\u5c31\u662f\u76f8\u5bf9\u4e8eHEAD\u7684\u4f4d\u7f6e\u3002HEAD\u540e\u9762\u52a0\u4e0a~(tilde\uff09\u53ef\u4ee5\u6307\u5b9aHEAD\u4e4b\u524d\u7684\u63d0\u4ea4\u8bb0\u5f55\u3002\u5408\u5e76\u5206\u652f\u4f1a\u6709\u591a\u4e2a\u6839\u8282\u70b9\uff0c\u60a8\u53ef\u4ee5\u7528^(caret) \u6765\u6307\u5b9a\u4f7f\u7528\u54ea\u4e2a\u4e3a\u6839\u8282\u70b9 git log --oneline --decorate \u7528\u4e8e\u67e5\u770b\u5404\u4e2a\u5206\u652f\u5f53\u524d\u6240\u6307\u7684\u5bf9\u8c61 12b9f27 ( HEAD - testing ) work d.txt 716cae2 ( tag: v1.0, origin/master, origin/HEAD, master ) branch 8 7c64b0b stash work 1","title":"\u5206\u652f\u521b\u5efa"},{"location":"versions/git_branch/#_3","text":"\u5728\u5207\u6362\u5206\u652f\u65f6\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u4f60\u5de5\u4f5c\u76ee\u5f55\u91cc\u7684\u6587\u4ef6\u4f1a\u88ab\u6539\u53d8\u3002 \u5982\u679c\u662f\u5207\u6362\u5230\u4e00\u4e2a\u8f83\u65e7\u7684\u5206\u652f\uff0c\u4f60\u7684\u5de5\u4f5c\u76ee\u5f55\u4f1a\u6062\u590d\u5230\u8be5\u5206\u652f\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u65f6\u7684\u6837\u5b50\u3002 #\u5207\u6362\u5230testing\u5206\u652f git checkout testing #\u4ee5\u5f53\u524d\u5206\u652f\u72b6\u6001\u521b\u5efa\u5206\u652f\u5e76\u4e14\u5207\u6362\u5230\u65b0\u5206\u652f\u76f8\u5f53\u4e8egit branch iss53,git checkout iss53 git checkout -b iss53","title":"\u5206\u652f\u5207\u6362"},{"location":"versions/git_branch/#git-merge","text":"merge \u547d\u4ee4\u628a\u4e0d\u540c\u5206\u652f\u5408\u5e76\u8d77\u6765\u3002\u5408\u5e76\u524d\uff0c\u7d22\u5f15\u5fc5\u987b\u548c\u5f53\u524d\u63d0\u4ea4\u76f8\u540c\u3002\u5982\u679c\u53e6\u4e00\u4e2a\u5206\u652f\u662f\u5f53\u524d\u63d0\u4ea4\u7684\u7956\u7236\u8282\u70b9\uff0c\u90a3\u4e48\u5408\u5e76\u547d\u4ee4\u5c06\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002 \u53e6\u4e00\u79cd\u60c5\u51b5\u662f\u5982\u679c\u5f53\u524d\u63d0\u4ea4\u662f\u53e6\u4e00\u4e2a\u5206\u652f\u7684\u7956\u7236\u8282\u70b9\uff0c\u5c31\u5bfc\u81f4fast-forward\u5408\u5e76\u3002\u6307\u5411\u53ea\u662f\u7b80\u5355\u7684\u79fb\u52a8\uff0c\u5e76\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u3002 \u5426\u5219\u5c31\u662f\u4e00\u6b21\u771f\u6b63\u7684\u5408\u5e76\u3002\u9ed8\u8ba4\u628a\u5f53\u524d\u63d0\u4ea4(ed489 \u5982\u4e0b\u6240\u793a)\u548c\u53e6\u4e00\u4e2a\u63d0\u4ea4(33104)\u4ee5\u53ca\u4ed6\u4eec\u7684\u5171\u540c\u7956\u7236\u8282\u70b9(b325c)\u8fdb\u884c\u4e00\u6b21\u4e09\u65b9\u5408\u5e76\u3002\u7ed3\u679c\u662f\u5148\u4fdd\u5b58\u5f53\u524d\u76ee\u5f55\u548c\u7d22\u5f15\uff0c\u7136\u540e\u548c\u7236\u8282\u70b933104\u4e00\u8d77\u505a\u4e00\u6b21\u65b0\u63d0\u4ea4\u3002 #\u5c06\u5206\u652f\u7684\u6240\u6709\u63d0\u4ea4\u5408\u5e76\u6210\u4e00\u6b21\u63d0\u4ea4\u5e76\u5165\u5f53\u524d\u5206\u652f git merge --squash","title":"Git merge\u5206\u652f\u5408\u5e76"},{"location":"versions/git_branch/#_4","text":"git branch -d branchname","title":"\u5220\u9664\u5206\u652f"},{"location":"versions/git_branch/#git-rebase","text":"\u884d\u5408 \u662f\u5408\u5e76\u547d\u4ee4\u7684\u53e6\u4e00\u79cd\u9009\u62e9\u3002\u5408\u5e76\u628a\u4e24\u4e2a\u7236\u5206\u652f\u5408\u5e76\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\uff0c\u63d0\u4ea4\u5386\u53f2\u4e0d\u662f\u7ebf\u6027\u7684\u3002 \u884d\u5408 \u5728\u5f53\u524d\u5206\u652f\u4e0a\u91cd\u6f14\u53e6\u4e00\u4e2a\u5206\u652f\u7684\u5386\u53f2\uff0c\u63d0\u4ea4\u5386\u53f2\u662f\u7ebf\u6027\u7684\u3002 \u672c\u8d28\u4e0a\uff0c\u8fd9\u662f\u7ebf\u6027\u5316\u7684\u81ea\u52a8\u7684 cherry-pick \u4e0a\u9762\u7684\u547d\u4ee4\u90fd\u5728topic\u5206\u652f\u4e2d\u8fdb\u884c\uff0c\u800c\u4e0d\u662fmaster\u5206\u652f\uff0c\u5728master\u5206\u652f\u4e0a\u91cd\u6f14\uff0c\u5e76\u4e14\u628a\u5206\u652f\u6307\u5411\u65b0\u7684\u8282\u70b9\u3002\u6ce8\u610f\u65e7\u63d0\u4ea4\u6ca1\u6709\u88ab\u5f15\u7528\uff0c\u5c06\u88ab\u56de\u6536\u3002 \u8981\u9650\u5236\u56de\u6eda\u8303\u56f4\uff0c\u4f7f\u7528 --onto \u9009\u9879\u3002\u4e0b\u9762\u7684\u547d\u4ee4\u5728master\u5206\u652f\u4e0a\u91cd\u6f14\u5f53\u524d\u5206\u652f\u4ece169a6\u4ee5\u6765\u7684\u6700\u8fd1\u51e0\u4e2a\u63d0\u4ea4\uff0c\u53732c33a\u3002 \u540c\u6837\u6709 git rebase --interactive \u8ba9\u4f60\u66f4\u65b9\u4fbf\u7684\u5b8c\u6210\u4e00\u4e9b\u590d\u6742\u64cd\u4f5c\uff0c\u6bd4\u5982\u4e22\u5f03\u3001\u91cd\u6392\u3001\u4fee\u6539\u3001\u5408\u5e76\u63d0\u4ea4\u3002\u6ca1\u6709\u56fe\u7247\u4f53\u73b0\u8fd9\u4e9b","title":"Git rebase"},{"location":"versions/git_branch/#_5","text":"#git\u652f\u6301\u5f88\u591a\u79cd\u5de5\u4f5c\u6d41\u7a0b\uff0c\u6211\u4eec\u91c7\u7528\u7684\u4e00\u822c\u662f\u8fd9\u6837\uff0c\u8fdc\u7a0b\u521b\u5efa\u4e00\u4e2a\u4e3b\u5206\u652f\uff0c\u672c\u5730\u6bcf\u4eba\u521b\u5efa\u529f\u80fd\u5206\u652f\uff0c\u65e5\u5e38\u5de5\u4f5c\u6d41\u7a0b\u5982\u4e0b\uff1a #\u53bb\u81ea\u5df1\u7684\u5de5\u4f5c\u5206\u652f git checkout work #\u5de5\u4f5c .... #\u63d0\u4ea4\u5de5\u4f5c\u5206\u652f\u7684\u4fee\u6539 git commit -a #\u56de\u5230\u4e3b\u5206\u652f git checkout master #\u83b7\u53d6\u8fdc\u7a0b\u6700\u65b0\u7684\u4fee\u6539\uff0c\u6b64\u65f6\u4e0d\u4f1a\u4ea7\u751f\u51b2\u7a81 git pull #\u56de\u5230\u5de5\u4f5c\u5206\u652f git checkout work #\u7528rebase\u5408\u5e76\u4e3b\u5e72\u7684\u4fee\u6539\uff0c\u5982\u679c\u6709\u51b2\u7a81\u5728\u6b64\u65f6\u89e3\u51b3 git rebase master #\u89e3\u51b3\u51b2\u7a81\u540e git add . # --continue:\u5b8c\u6210rebase --abort \u4e2d\u65adrebase\u8fc7\u7a0b --skip\u5ffd\u7565\u51b2\u7a81 git rebase --continue #\u56de\u5230\u4e3b\u5206\u652f git checkout master #\u5408\u5e76\u5de5\u4f5c\u5206\u652f\u7684\u4fee\u6539\uff0c\u628a\u5206\u652f\u63d0\u4ea4\u5408\u5e76\u6210\u4e00\u4e2a git merge --squash work #\u63d0\u4ea4\u5230\u8fdc\u7a0b\u4e3b\u5e72 git push #\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\uff0c\u8fdc\u7a0b\u4e3b\u5e72\u4e0a\u7684\u5386\u53f2\u6c38\u8fdc\u662f\u7ebf\u6027\u7684\u3002\u6bcf\u4e2a\u4eba\u5728\u672c\u5730\u5206\u652f\u89e3\u51b3\u51b2\u7a81\uff0c\u4e0d\u4f1a\u5728\u4e3b\u5e72\u4e0a\u4ea7\u751f\u51b2\u7a81","title":"\u5b8c\u6574\u5de5\u4f5c\u6d41"},{"location":"versions/git_branch/#_6","text":"#\u8981\u5408\u5e76\u7684\u524d\u9762\u5168\u90e8\u6539\u6210s git rebase -i 51c5b4850060ff675f4541b8b7cd479f94b743e8","title":"\u5408\u5e76\u63d0\u4ea4"},{"location":"versions/git_branch/#git-cherry","text":"cherry-pick\u547d\u4ee4\"\u590d\u5236\"\u4e00\u4e2a\u63d0\u4ea4\u8282\u70b9\u5e76\u5728\u5f53\u524d\u5206\u652f\u505a\u4e00\u6b21\u5b8c\u5168\u4e00\u6837\u7684\u65b0\u63d0\u4ea4\u3002","title":"Git cherry"},{"location":"versions/git_branch/#_7","text":"#\u5220\u9664\u672c\u5730\u5206\u652f git branch -D test #\u5220\u9664\u8fdc\u7a0b\u5206\u652f git push origin :test","title":"\u5220\u9664\u8fdc\u7a0b\u5206\u652f"},{"location":"versions/git_error/","text":"git \u95ee\u9898\u8bb0\u5f55 \u9519\u8bef\u63d0\u793a\uff1afatal: remote origin already exists. git remote rm origin git remote add origin git@github.comxxx.git git push origin master \u9519\u8bef\u63d0\u793a\uff1aerror: failed to push som refs to git pull origin master //\u5148pull \u4e0b\u6765 \u518dpush \u4e0a\u53bb Cannot list the available branches. Reason: git+ssh://git@[host]:[...]/[...].git: Auth fail \u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u628a$HOME/.ssh\u5728\u539f\u8def\u5f84\u4e0b\u590d\u5236\u4e00\u4e2a\uff0c\u6539\u540d\u4e3assh\u5c31\u597d\u4e86\u3002Windows\u91cc\u4e5f\u662f\u4e00\u6837,\u8fd9\u6837\u5c31\u76f4\u63a5\u53ef\u4ee5\u56fe\u5f62\u4e0apush\u4e86 fatal:remote error:You can't push to git://github.com/user_name/user_repo.git fatal: could not read Username for 'https://github.com': Invalid argument git remote rm origin git remote add origin git@github.com:user_name/user_repo.git git push origin \u5982\u679c\u5728git clone\u7684\u65f6\u5019\u7528\u7684\u662fgit://github.com:xx/xxx.git \u7684\u5f62\u5f0f,\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\uff0c\u56e0\u4e3a\u8fd9\u4e2aprotocol\u662f\u4e0d\u652f\u6301push\u7684 Permission denied (publickey) ssh - keygen - t rsa - C wujiyu@163.com - f github_rsa \u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u4e0e\u9ed8\u8ba4\u7684\u4e0d\u7b26 \u66f4\u6539 ssh_config \u6587\u4ef6\u6307\u5b9a\u5bc6\u94a5\u6587\u4ef6\u540d Host github . com StrictHostKeyChecking no UserKnownHostsFile =/ dev / null IdentityFile =~/ . ssh / github_rsa cannot do a partial commit during a merge \u539f\u56e0\u662fmerge\u6709\u51b2\u7a81,\u624b\u52a8\u89e3\u51b3\u540e\u5982\u4e0b\u63d0\u4ea4\u5373\u53ef git commit -a","title":"git\u95ee\u9898\u8bb0\u5f55"},{"location":"versions/git_error/#git","text":"\u9519\u8bef\u63d0\u793a\uff1afatal: remote origin already exists. git remote rm origin git remote add origin git@github.comxxx.git git push origin master \u9519\u8bef\u63d0\u793a\uff1aerror: failed to push som refs to git pull origin master //\u5148pull \u4e0b\u6765 \u518dpush \u4e0a\u53bb Cannot list the available branches. Reason: git+ssh://git@[host]:[...]/[...].git: Auth fail \u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u628a$HOME/.ssh\u5728\u539f\u8def\u5f84\u4e0b\u590d\u5236\u4e00\u4e2a\uff0c\u6539\u540d\u4e3assh\u5c31\u597d\u4e86\u3002Windows\u91cc\u4e5f\u662f\u4e00\u6837,\u8fd9\u6837\u5c31\u76f4\u63a5\u53ef\u4ee5\u56fe\u5f62\u4e0apush\u4e86 fatal:remote error:You can't push to git://github.com/user_name/user_repo.git fatal: could not read Username for 'https://github.com': Invalid argument git remote rm origin git remote add origin git@github.com:user_name/user_repo.git git push origin \u5982\u679c\u5728git clone\u7684\u65f6\u5019\u7528\u7684\u662fgit://github.com:xx/xxx.git \u7684\u5f62\u5f0f,\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\uff0c\u56e0\u4e3a\u8fd9\u4e2aprotocol\u662f\u4e0d\u652f\u6301push\u7684 Permission denied (publickey) ssh - keygen - t rsa - C wujiyu@163.com - f github_rsa \u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u4e0e\u9ed8\u8ba4\u7684\u4e0d\u7b26 \u66f4\u6539 ssh_config \u6587\u4ef6\u6307\u5b9a\u5bc6\u94a5\u6587\u4ef6\u540d Host github . com StrictHostKeyChecking no UserKnownHostsFile =/ dev / null IdentityFile =~/ . ssh / github_rsa cannot do a partial commit during a merge \u539f\u56e0\u662fmerge\u6709\u51b2\u7a81,\u624b\u52a8\u89e3\u51b3\u540e\u5982\u4e0b\u63d0\u4ea4\u5373\u53ef git commit -a","title":"git \u95ee\u9898\u8bb0\u5f55"},{"location":"versions/git_intro/","text":"git \u7b80\u4ecb https://git-scm.com/book/zh/v2 http://blog.jobbole.com/tag/pro-git/ http://backlogtool.com/git-guide/cn/ https://www.zhihu.com/question/22932048 https://github.com/geeeeeeeeek/git-recipes/wiki/5.2-%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A%EF%BC%9AReset%E3%80%81Checkout%E3%80%81Revert%E7%9A%84%E9%80%89%E6%8B%A9 http://www.jianshu.com/p/43190d32bd4e https://git-scm.com/blog/2010/03/02/undoing-merges.html https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting/summary http://stackoverflow.com/questions/8358035/whats-the-difference-between-git-revert-checkout-and-reset https://marklodato.github.io/visual-git-guide/index-zh-cn.html git \u4e0esvn \u533a\u522b svn \u5c5e\u4e8e \u96c6\u4e2d\u5316\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7edf :\u5355\u4e00\u7684\u96c6\u4e2d\u7ba1\u7406\u7684\u670d\u52a1\u5668\uff0c\u4fdd\u5b58\u6240\u6709\u6587\u4ef6\u7684\u4fee\u8ba2\u7248\u672c\uff0c\u800c\u534f\u540c\u5de5\u4f5c\u7684\u4eba\u4eec\u90fd\u901a\u8fc7\u5ba2\u6237\u7aef\u8fde\u5230\u8fd9\u53f0\u670d\u52a1\u5668\uff0c\u53d6\u51fa\u6700\u65b0\u7684\u6587\u4ef6\u6216\u8005\u63d0\u4ea4\u66f4\u65b0.\u7f3a\u70b9\u662f\u4e2d\u592e\u670d\u52a1\u5668\u7684\u5355\u70b9\u6545\u969c\u3002\u5c31\u65e0\u6cd5\u534f\u540c\u5de5\u4f5c\u3002 \u5982\u679c\u4e2d\u5fc3\u6570\u636e\u5e93\u6240\u5728\u7684\u78c1\u76d8\u53d1\u751f\u635f\u574f\uff0c\u53c8\u6ca1\u6709\u505a\u6070\u5f53\u5907\u4efd\uff0c\u6beb\u65e0\u7591\u95ee\u4f60\u5c06\u4e22\u5931\u6240\u6709\u6570\u636e\u2014\u2014\u5305\u62ec\u9879\u76ee\u7684\u6574\u4e2a\u53d8\u66f4\u5386\u53f2 git \u5c5e\u4e8e \u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf :\u5ba2\u6237\u7aef\u5e76\u4e0d\u53ea\u63d0\u53d6\u6700\u65b0\u7248\u672c\u7684\u6587\u4ef6\u5feb\u7167\uff0c\u800c\u662f\u628a\u4ee3\u7801\u4ed3\u5e93\u5b8c\u6574\u5730\u955c\u50cf\u4e0b\u6765\u3002 \u8fd9\u4e48\u4e00\u6765\uff0c\u4efb\u4f55\u4e00\u5904\u534f\u540c\u5de5\u4f5c\u7528\u7684\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\uff0c\u4e8b\u540e\u90fd\u53ef\u4ee5\u7528\u4efb\u4f55\u4e00\u4e2a\u955c\u50cf\u51fa\u6765\u7684\u672c\u5730\u4ed3\u5e93\u6062\u590d\u3002 \u56e0\u4e3a\u6bcf\u4e00\u6b21\u7684\u514b\u9686\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a\u90fd\u662f\u4e00\u6b21\u5bf9\u4ee3\u7801\u4ed3\u5e93\u7684\u5b8c\u6574\u5907\u4efd\u3002 svn\u5de5\u4f5c\u6a21\u578b git\u5de5\u4f5c\u6a21\u578b repository \u4ed3\u5e93 the index \u6682\u5b58\u533a working tree \u5de5\u4f5c\u76ee\u5f55 commit \u63d0\u4ea4\u5bf9\u8c61 branch \u5206\u652f tag \u6807\u7b7e master \u4e3b\u5206\u652f HEAD \u5f53\u524d\u5206\u652f Git\u547d\u4ee4\u7ec3\u4e60 https://try.github.io/levels/1/challenges/1 http://learngitbranching.js.org/","title":"git\u7b80\u4ecb"},{"location":"versions/git_intro/#git","text":"https://git-scm.com/book/zh/v2 http://blog.jobbole.com/tag/pro-git/ http://backlogtool.com/git-guide/cn/ https://www.zhihu.com/question/22932048 https://github.com/geeeeeeeeek/git-recipes/wiki/5.2-%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A%EF%BC%9AReset%E3%80%81Checkout%E3%80%81Revert%E7%9A%84%E9%80%89%E6%8B%A9 http://www.jianshu.com/p/43190d32bd4e https://git-scm.com/blog/2010/03/02/undoing-merges.html https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting/summary http://stackoverflow.com/questions/8358035/whats-the-difference-between-git-revert-checkout-and-reset https://marklodato.github.io/visual-git-guide/index-zh-cn.html","title":"git \u7b80\u4ecb"},{"location":"versions/git_intro/#git-svn","text":"svn \u5c5e\u4e8e \u96c6\u4e2d\u5316\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7edf :\u5355\u4e00\u7684\u96c6\u4e2d\u7ba1\u7406\u7684\u670d\u52a1\u5668\uff0c\u4fdd\u5b58\u6240\u6709\u6587\u4ef6\u7684\u4fee\u8ba2\u7248\u672c\uff0c\u800c\u534f\u540c\u5de5\u4f5c\u7684\u4eba\u4eec\u90fd\u901a\u8fc7\u5ba2\u6237\u7aef\u8fde\u5230\u8fd9\u53f0\u670d\u52a1\u5668\uff0c\u53d6\u51fa\u6700\u65b0\u7684\u6587\u4ef6\u6216\u8005\u63d0\u4ea4\u66f4\u65b0.\u7f3a\u70b9\u662f\u4e2d\u592e\u670d\u52a1\u5668\u7684\u5355\u70b9\u6545\u969c\u3002\u5c31\u65e0\u6cd5\u534f\u540c\u5de5\u4f5c\u3002 \u5982\u679c\u4e2d\u5fc3\u6570\u636e\u5e93\u6240\u5728\u7684\u78c1\u76d8\u53d1\u751f\u635f\u574f\uff0c\u53c8\u6ca1\u6709\u505a\u6070\u5f53\u5907\u4efd\uff0c\u6beb\u65e0\u7591\u95ee\u4f60\u5c06\u4e22\u5931\u6240\u6709\u6570\u636e\u2014\u2014\u5305\u62ec\u9879\u76ee\u7684\u6574\u4e2a\u53d8\u66f4\u5386\u53f2 git \u5c5e\u4e8e \u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf :\u5ba2\u6237\u7aef\u5e76\u4e0d\u53ea\u63d0\u53d6\u6700\u65b0\u7248\u672c\u7684\u6587\u4ef6\u5feb\u7167\uff0c\u800c\u662f\u628a\u4ee3\u7801\u4ed3\u5e93\u5b8c\u6574\u5730\u955c\u50cf\u4e0b\u6765\u3002 \u8fd9\u4e48\u4e00\u6765\uff0c\u4efb\u4f55\u4e00\u5904\u534f\u540c\u5de5\u4f5c\u7528\u7684\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\uff0c\u4e8b\u540e\u90fd\u53ef\u4ee5\u7528\u4efb\u4f55\u4e00\u4e2a\u955c\u50cf\u51fa\u6765\u7684\u672c\u5730\u4ed3\u5e93\u6062\u590d\u3002 \u56e0\u4e3a\u6bcf\u4e00\u6b21\u7684\u514b\u9686\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a\u90fd\u662f\u4e00\u6b21\u5bf9\u4ee3\u7801\u4ed3\u5e93\u7684\u5b8c\u6574\u5907\u4efd\u3002","title":"git \u4e0esvn \u533a\u522b"},{"location":"versions/git_intro/#svn","text":"","title":"svn\u5de5\u4f5c\u6a21\u578b"},{"location":"versions/git_intro/#git_1","text":"","title":"git\u5de5\u4f5c\u6a21\u578b"},{"location":"versions/git_intro/#repository","text":"\u4ed3\u5e93","title":"repository"},{"location":"versions/git_intro/#the-index","text":"\u6682\u5b58\u533a","title":"the index"},{"location":"versions/git_intro/#working-tree","text":"\u5de5\u4f5c\u76ee\u5f55","title":"working tree"},{"location":"versions/git_intro/#commit","text":"\u63d0\u4ea4\u5bf9\u8c61","title":"commit"},{"location":"versions/git_intro/#branch","text":"\u5206\u652f","title":"branch"},{"location":"versions/git_intro/#tag","text":"\u6807\u7b7e","title":"tag"},{"location":"versions/git_intro/#master","text":"\u4e3b\u5206\u652f","title":"master"},{"location":"versions/git_intro/#head","text":"\u5f53\u524d\u5206\u652f","title":"HEAD"},{"location":"versions/git_intro/#git_2","text":"https://try.github.io/levels/1/challenges/1 http://learngitbranching.js.org/","title":"Git\u547d\u4ee4\u7ec3\u4e60"},{"location":"versions/git_oper/","text":"git \u64cd\u4f5c \u4ed3\u5e93\u3001\u7f13\u51b2\u533a\u3001\u5de5\u4f5c\u526f\u672c Git\u914d\u7f6e Git \u81ea\u5e26\u4e00\u4e2a git config \u7684\u5de5\u5177\u6765\u5e2e\u52a9\u8bbe\u7f6e\u63a7\u5236 Git \u5916\u89c2\u548c\u884c\u4e3a\u7684\u914d\u7f6e\u53d8\u91cf\u3002 \u8fd9\u4e9b\u53d8\u91cf\u5b58\u50a8\u5728\u4e09\u4e2a\u4e0d\u540c\u7684\u4f4d\u7f6e\uff1a --system \u4fee\u6539 /etc/gitconfig \u6587\u4ef6: \u6240\u6709\u7528\u6237\u5171\u7528 --global \u4fee\u6539 ~/.gitconfig \u6216 ~/.config/git/config \u6587\u4ef6\uff1a\u53ea\u9488\u5bf9\u5f53\u524d\u7528\u6237 \u5f53\u524d\u4ed3\u5e93\u7684 Git \u76ee\u5f55\u4e2d\u7684 config \u6587\u4ef6\uff08\u5c31\u662f .git/config \uff09\uff1a\u9488\u5bf9\u8be5\u4ed3\u5e93\u3002 \u4f18\u5148\u7ea7:\u5f53\u524d\u4ed3\u5e93 config \u5f53\u524d\u7528\u6237 \u6240\u6709\u7528\u6237 \u914d\u7f6e #\u4f5c\u8005 git config --global user.name John Doe git config --global user.email johndoe@example.com #\u6587\u672c\u4fe1\u606f git config --global core.editor emacs \u68c0\u67e5\u914d\u7f6e\u4fe1\u606f #\u67e5\u770b\u6240\u6709 git config --list #\u67e5\u770b\u67d0\u9879 git config user.name #\u79fb\u9664\u8bbe\u7f6e git config --unset user.name Git init \u521d\u59cb\u5316\u4ed3\u5e93\uff0c\u8be5\u547d\u4ee4\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a .git \u7684\u5b50\u76ee\u5f55\uff0c\u8fd9\u4e2a\u5b50\u76ee\u5f55\u542b\u6709\u4f60\u521d\u59cb\u5316\u7684 Git \u4ed3\u5e93\u4e2d\u6240\u6709\u7684\u5fc5\u987b\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u662f Git \u4ed3\u5e93\u7684\u9aa8\u5e72 Git status #\u663e\u793a\u72b6\u6001 git status #\u77ed\u683c\u5f0f\u663e\u793a git status -s \u72b6\u6001\u6807\u8bc6: ' ' = unmodified M = modified(\u5df2\u4fee\u6539) A = added(\u5df2\u6dfb\u52a0) D = deleted(\u5df2\u5220\u9664) R = renamed(\u5df2\u91cd\u547d\u540d) C = copied(\u5df2\u590d\u5236) U = updated but unmerged(\u5df2\u66f4\u65b0\u4f46\u672a\u5408\u5e76) X Y Meaning ------------------------------------------------- [ MD ] not updated M [ MD ] updated in index A [ MD ] added to index D [ M ] deleted from index R [ MD ] renamed in index C [ MD ] copied in index [ MARC ] index and work tree matches [ MARC ] M work tree changed since index [ MARC ] D deleted in work tree ------------------------------------------------- D D unmerged, both deleted A U unmerged, added by us U D unmerged, deleted by them U A unmerged, added by them D U unmerged, deleted by us A A unmerged, both added U U unmerged, both modified ------------------------------------------------- ? ? untracked ! ! ignored Git rm \u7528\u4e8e\u79fb\u9664\u4ed3\u5e93\u4e2d\u7684\u6587\u4ef6,\u5982 git rm *.txt \u79fb\u9664\u6240\u7684\u7684txt\u6587\u4ef6 Git mv git \u7cfb\u7edf\u4e2d\u79fb\u52a8\u4e00\u4e2a\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u76f8\u5f53\u4e8e shell \u547d\u4ee4 mv oldname newname git add newname git rm oldname Git show \u663e\u793a\u5bf9\u8c61\u7684\u66f4\u591a\u4fe1\u606f \u5bf9\u4e8ecommit,\u5c55\u793alog\u548c\u5dee\u5f02 \u5bf9\u4e8etag,\u663e\u793atag\u76f8\u5173\u4fe1\u606f \u5bf9\u4e8etree\u5bf9\u8c61,\u5217\u51fa\u6811\u7ed3\u6784\u540d\u5b57 \u5bf9\u4e8eblob\u5bf9\u8c61,\u663e\u793a\u6587\u4ef6\u5185\u5bb9 #\u663e\u793a\u63d0\u4ea4\u4fe1\u606f git show 716cae27bc24b0f56b0dff5039e6a2cf8ac3edac #\u663e\u793a\u5206\u652f\u7684\u4fe1\u606f git show v1.0.0 Git add \u628a\u5f53\u524d\u6587\u4ef6\u653e\u5165\u6682\u5b58\u533a\u57df Git commit \u63d0\u4ea4\u65f6\uff0cgit\u7528\u6682\u5b58\u533a\u57df\u7684\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\uff0c\u5e76\u628a\u6b64\u65f6\u7684\u8282\u70b9\u8bbe\u4e3a\u7236\u8282\u70b9\u3002\u7136\u540e\u628a\u5f53\u524d\u5206\u652f\u6307\u5411\u65b0\u7684\u63d0\u4ea4\u8282\u70b9\u3002\u4e0b\u56fe\u4e2d\uff0c\u5f53\u524d\u5206\u652f\u662fmaster\u3002 \u5728\u8fd0\u884c\u547d\u4ee4\u4e4b\u524d\uff0cmaster\u6307\u5411ed489\uff0c\u63d0\u4ea4\u540e\uff0cmaster\u6307\u5411\u65b0\u7684\u8282\u70b9f0cec\u5e76\u4ee5ed489\u4f5c\u4e3a\u7236\u8282\u70b9 \u5373\u4fbf\u5f53\u524d\u5206\u652f\u662f\u67d0\u6b21\u63d0\u4ea4\u7684\u7956\u7236\u8282\u70b9\uff0cgit\u4f1a\u540c\u6837\u64cd\u4f5c\u3002\u4e0b\u56fe\u4e2d\uff0c\u5728master\u5206\u652f\u7684\u7956\u7236\u8282\u70b9maint\u5206\u652f\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\uff0c\u751f\u6210\u4e861800b\u3002 \u8fd9\u6837\uff0cmaint\u5206\u652f\u5c31\u4e0d\u518d\u662fmaster\u5206\u652f\u7684\u7956\u7236\u8282\u70b9\u3002\u6b64\u65f6\uff0c\u5408\u5e76 (\u6216\u8005 \u884d\u5408) \u662f\u5fc5\u987b\u7684\u3002 \u5982\u679c\u60f3\u66f4\u6539\u4e00\u6b21\u63d0\u4ea4\uff0c\u4f7f\u7528 git commit --amend\u3002git\u4f1a\u4f7f\u7528\u4e0e\u5f53\u524d\u63d0\u4ea4\u76f8\u540c\u7684\u7236\u8282\u70b9\u8fdb\u884c\u4e00\u6b21\u65b0\u63d0\u4ea4\uff0c\u65e7\u7684\u63d0\u4ea4\u4f1a\u88ab\u53d6\u6d88\u3002 HEAD\u6807\u8bc6\u5904\u4e8e\u5206\u79bb\u72b6\u6001\u65f6\u7684\u63d0\u4ea4\u64cd\u4f5c \u5f53HEAD\u5904\u4e8e\u5206\u79bb\u72b6\u6001\uff08\u4e0d\u4f9d\u9644\u4e8e\u4efb\u4e00\u5206\u652f\uff09\u65f6\uff0c\u63d0\u4ea4\u64cd\u4f5c\u53ef\u4ee5\u6b63\u5e38\u8fdb\u884c\uff0c\u4f46\u662f\u4e0d\u4f1a\u66f4\u65b0\u4efb\u4f55\u5df2\u547d\u540d\u7684\u5206\u652f\u3002(\u4f60\u53ef\u4ee5\u8ba4\u4e3a\u8fd9\u662f\u5728\u66f4\u65b0\u4e00\u4e2a\u533f\u540d\u5206\u652f\u3002) \u4e00\u65e6\u6b64\u540e\u4f60\u5207\u6362\u5230\u522b\u7684\u5206\u652f\uff0c\u6bd4\u5982\u8bf4master\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63d0\u4ea4\u8282\u70b9\uff08\u53ef\u80fd\uff09\u518d\u4e5f\u4e0d\u4f1a\u88ab\u5f15\u7528\u5230\uff0c\u7136\u540e\u5c31\u4f1a\u88ab\u4e22\u5f03\u6389\u4e86\u3002\u6ce8\u610f\u8fd9\u4e2a\u547d\u4ee4\u4e4b\u540e\u5c31\u4e0d\u4f1a\u6709\u4e1c\u897f\u5f15\u75282eecb\u3002 \u4f46\u662f\uff0c\u5982\u679c\u4f60\u60f3\u4fdd\u5b58\u8fd9\u4e2a\u72b6\u6001\uff0c\u53ef\u4ee5\u7528\u547d\u4ee4git checkout -b name\u6765\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u3002 Git checkout checkout\u547d\u4ee4\u7528\u4e8e\u4ece\u5386\u53f2\u63d0\u4ea4\uff08\u6216\u8005\u6682\u5b58\u533a\u57df\uff09\u4e2d\u62f7\u8d1d\u6587\u4ef6\u5230\u5de5\u4f5c\u76ee\u5f55\uff0c\u4e5f\u53ef\u7528\u4e8e\u5207\u6362\u5206\u652f\u3002 git checkout HEAD a.txt :\u4ece \u63d0\u4ea4\u5feb\u7167 \u4e2d\u63d0\u53d6\u6587\u4ef6\u5230 \u6682\u5b58\u533a \u548c \u5de5\u4f5c\u7a7a\u95f4 \u4e2d git checkout a.txt :\u4ece \u6682\u5b58\u533a \u4e2d\u63d0\u53d6\u6587\u4ef6\u5230 \u5de5\u4f5c\u7a7a\u95f4 \u4e2d git checkout master :\u5207\u6362\u5206\u652f \u5f53\u7ed9\u5b9a\u67d0\u4e2a\u6587\u4ef6\u540d\uff08\u6216\u8005\u6253\u5f00-p\u9009\u9879\uff0c\u6216\u8005\u6587\u4ef6\u540d\u548c-p\u9009\u9879\u540c\u65f6\u6253\u5f00\uff09\u65f6\uff0cgit\u4f1a\u4ece\u6307\u5b9a\u7684\u63d0\u4ea4\u4e2d\u62f7\u8d1d\u6587\u4ef6\u5230\u6682\u5b58\u533a\u57df\u548c\u5de5\u4f5c\u76ee\u5f55\u3002\u6bd4\u5982\uff0cgit checkout HEAD~ foo.c\u4f1a\u5c06\u63d0\u4ea4\u8282\u70b9HEAD~(\u5373\u5f53\u524d\u63d0\u4ea4\u8282\u70b9\u7684\u7236\u8282\u70b9)\u4e2d\u7684foo.c\u590d\u5236\u5230\u5de5\u4f5c\u76ee\u5f55\u5e76\u4e14\u52a0\u5230\u6682\u5b58\u533a\u57df\u4e2d\u3002\uff08\u5982\u679c\u547d\u4ee4\u4e2d\u6ca1\u6709\u6307\u5b9a\u63d0\u4ea4\u8282\u70b9\uff0c\u5219\u4f1a\u4ece\u6682\u5b58\u533a\u57df\u4e2d\u62f7\u8d1d\u5185\u5bb9\u3002\uff09\u6ce8\u610f\u5f53\u524d\u5206\u652f\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316 \u5f53\u4e0d\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u800c\u662f\u7ed9\u51fa\u4e00\u4e2a\uff08\u672c\u5730\uff09\u5206\u652f\u65f6\uff0c\u90a3\u4e48HEAD\u6807\u8bc6\u4f1a\u79fb\u52a8\u5230\u90a3\u4e2a\u5206\u652f\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u201c\u5207\u6362\u201d\u5230\u90a3\u4e2a\u5206\u652f\u4e86\uff09\uff0c\u7136\u540e\u6682\u5b58\u533a\u57df\u548c\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\u4f1a\u548cHEAD\u5bf9\u5e94\u7684\u63d0\u4ea4\u8282\u70b9\u4e00\u81f4\u3002\u65b0\u63d0\u4ea4\u8282\u70b9\uff08\u4e0b\u56fe\u4e2d\u7684a47c3\uff09\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u90fd\u4f1a\u88ab\u590d\u5236\uff08\u5230\u6682\u5b58\u533a\u57df\u548c\u5de5\u4f5c\u76ee\u5f55\u4e2d\uff09\uff1b\u53ea\u5b58\u5728\u4e8e\u8001\u7684\u63d0\u4ea4\u8282\u70b9\uff08ed489\uff09\u4e2d\u7684\u6587\u4ef6\u4f1a\u88ab\u5220\u9664\uff1b\u4e0d\u5c5e\u4e8e\u4e0a\u8ff0\u4e24\u8005\u7684\u6587\u4ef6\u4f1a\u88ab\u5ffd\u7565\uff0c\u4e0d\u53d7\u5f71\u54cd\u3002 \u5982\u679c\u65e2\u6ca1\u6709\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u4e5f\u6ca1\u6709\u6307\u5b9a\u5206\u652f\u540d\uff0c\u800c\u662f\u4e00\u4e2a\u6807\u7b7e\u3001\u8fdc\u7a0b\u5206\u652f\u3001SHA-1\u503c\u6216\u8005\u662f\u50cfmaster~3\u7c7b\u4f3c\u7684\u4e1c\u897f\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533f\u540d\u5206\u652f\uff0c\u79f0\u4f5cdetached HEAD\uff08\u88ab\u5206\u79bb\u7684HEAD\u6807\u8bc6\uff09\u3002\u8fd9\u6837\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5728\u5386\u53f2\u7248\u672c\u4e4b\u95f4\u4e92\u76f8\u5207\u6362\u3002\u6bd4\u5982\u8bf4\u4f60\u60f3\u8981\u7f16\u8bd11.6.6.1\u7248\u672c\u7684git\uff0c\u4f60\u53ef\u4ee5\u8fd0\u884cgit checkout v1.6.6.1\uff08\u8fd9\u662f\u4e00\u4e2a\u6807\u7b7e\uff0c\u800c\u975e\u5206\u652f\u540d\uff09\uff0c\u7f16\u8bd1\uff0c\u5b89\u88c5\uff0c\u7136\u540e\u5207\u6362\u56de\u53e6\u4e00\u4e2a\u5206\u652f\uff0c\u6bd4\u5982\u8bf4git checkout master\u3002\u7136\u800c\uff0c\u5f53\u63d0\u4ea4\u64cd\u4f5c\u6d89\u53ca\u5230\u201c\u5206\u79bb\u7684HEAD\u201d\u65f6\uff0c\u5176\u884c\u4e3a\u4f1a\u7565\u6709\u4e0d\u540c\uff0c\u8be6\u60c5\u89c1\u5728\u4e0b\u9762\u3002 \u62c9\u53d6\u8fdc\u7a0b\u5206\u652f\u5e76\u65b0\u5efa\u672c\u5730\u5206\u652f git checkout -t origin/2.0.0 #\u6216\u8005 git checkout origin/remoteName -b localName Git reset reset\u547d\u4ee4\u628a\u5f53\u524d\u5206\u652f\u6307\u5411\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u5e76\u4e14\u6709\u9009\u62e9\u7684\u53d8\u52a8\u5de5\u4f5c\u76ee\u5f55\u548c\u7d22\u5f15\u3002\u4e5f\u7528\u6765\u5728\u4ece\u5386\u53f2\u4ed3\u5e93\u4e2d\u590d\u5236\u6587\u4ef6\u5230\u7d22\u5f15\uff0c\u800c\u4e0d\u52a8\u5de5\u4f5c\u76ee\u5f55\u3002 \u5982\u679c\u4e0d\u7ed9\u9009\u9879\uff0c\u90a3\u4e48\u5f53\u524d\u5206\u652f\u6307\u5411\u5230\u90a3\u4e2a\u63d0\u4ea4\u3002\u5982\u679c\u7528--hard\u9009\u9879\uff0c\u90a3\u4e48\u5de5\u4f5c\u76ee\u5f55\u4e5f\u66f4\u65b0\uff0c\u5982\u679c\u7528--soft\u9009\u9879\uff0c\u90a3\u4e48\u90fd\u4e0d\u53d8 \u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u63d0\u4ea4\u70b9\u7684\u7248\u672c\u53f7\uff0c\u90a3\u4e48\u9ed8\u8ba4\u7528HEAD\u3002\u8fd9\u6837\uff0c\u5206\u652f\u6307\u5411\u4e0d\u53d8\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u56de\u6eda\u5230\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\uff0c\u5982\u679c\u7528--hard\u9009\u9879\uff0c\u5de5\u4f5c\u76ee\u5f55\u4e5f\u540c\u6837\u3002 \u5982\u679c\u7ed9\u4e86\u6587\u4ef6\u540d(\u6216\u8005 -p\u9009\u9879), \u90a3\u4e48\u5de5\u4f5c\u6548\u679c\u548c\u5e26\u6587\u4ef6\u540d\u7684checkout\u5dee\u4e0d\u591a\uff0c\u9664\u4e86\u7d22\u5f15\u88ab\u66f4\u65b0\u3002 Git reset \u603b\u7ed3 #\u56de\u9000\u5230\u8fdc\u7a0b\u7248\u672c git reset --hard origin/master #\u4ece\u6682\u5b58\u533a\u79fb\u9664(add\u4e4b\u540e) git reset HEAD #\u53ef\u4ee5\u56de\u9000\u5230\u67d0\u4e2a\u63d0\u4ea4(commit\u4e4b\u540e) git reset --hard #\u5408\u5e76\u65f6\u9047\u5230\u51b2\u7a81\u60f3\u53d6\u6d88\u64cd\u4f5c\uff0c\u6062\u590dindex\uff0c\u7528git merge --abort #git 1.7\u4ee5\u6765\u53ef\u4ee5\u64a4\u6d88\u5408\u5e76 git reset --merge Git reset \u53cd\u64cd\u4f5c git reset HEAD~ git reset HEAD@{1} \u6216\u8005 git reset ORIG_HEAD Git revert \u4ee5\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u6765\u8986\u76d6\u4e4b\u524d\u7684\u4fee\u6539 #\u6062\u590d\u5230\u4e0a\u4e00\u4e2a\u7248\u672cHEAD\u63d0\u4ea4\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u8986\u76d6\u539f\u6709\u7684\u53d8\u66f4 git revert HEAD~ \u603b\u7ed3 git reset -- files \u7528\u6765\u64a4\u9500\u6700\u540e\u4e00\u6b21git add files\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528git reset \u64a4\u9500\u6240\u6709\u6682\u5b58\u533a\u57df\u6587\u4ef6\u3002 git checkout -- files \u628a\u6587\u4ef6\u4ece\u6682\u5b58\u533a\u57df\u590d\u5236\u5230\u5de5\u4f5c\u76ee\u5f55\uff0c\u7528\u6765\u4e22\u5f03\u672c\u5730\u4fee\u6539\u3002 Git clone \u5982\u679c\u4f60\u60f3\u83b7\u5f97\u4e00\u4efd\u5df2\u7ecf\u5b58\u5728\u4e86\u7684 Git \u4ed3\u5e93\u7684\u62f7\u8d1d\uff0c\u6bd4\u5982\u8bf4\uff0c\u4f60\u60f3\u4e3a\u67d0\u4e2a\u5f00\u6e90\u9879\u76ee\u8d21\u732e\u81ea\u5df1\u7684\u4e00\u4efd\u529b\uff0c\u8fd9\u65f6\u5c31\u8981\u7528\u5230 git clone \u547d\u4ee4\u3002 \u5982\u679c\u4f60\u5bf9\u5176\u5b83\u7684 VCS \u7cfb\u7edf\uff08\u6bd4\u5982\u8bf4Subversion\uff09\u5f88\u719f\u6089\uff0c\u8bf7\u7559\u5fc3\u4e00\u4e0b\u4f60\u6240\u4f7f\u7528\u7684\u547d\u4ee4\u662f\"clone\"\u800c\u4e0d\u662f\"checkout\" git clone https://github.com/libgit2/libgit2 Git fetch #\u53ea\u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u4fe1\u606f\u4e0d\u5408\u5e76 git fetch origin Git pull \u628a\u8fdc\u7a0b\u4ed3\u5e93\u66f4\u6539\u62c9\u53d6\u5e76\u4e14\u5408\u5e76\u5230\u672c\u5730\u5f53\u524d\u5206\u652f, git pull \u76f8\u5f53\u4e8e git fetch \u548c git merge FETCH_HEAD \u4e24\u6b65\u64cd\u4f5c #\u62c9\u53d6\u5e76\u5408\u5e76 git pull #\u62c9\u53d6\u8fdc\u7a0borigin\u5408\u5e76\u5230master git pull origin master Git push #\u5c06\u672c\u5730master\u5206\u652f\u63d0\u4ea4\u63a8\u9001\u5230\u8fdc\u7a0borigin git push orign master #\u8bbe\u7f6e\u9ed8\u8ba4\u63a8\u9001 git push --set-upstream origin master Git remote \u8fdc\u7a0b\u4ed3\u5e93\u7ba1\u7406 #\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u522b\u540d git remote #\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 git remote -v #\u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93 git remote add up https://git.coding.net/farwmarth/test_git.git #\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u8be6\u7ec6\u7684\u5206\u6790\u4fe1\u606f git remote show origin #\u628a pb \u6539\u6210 paul git remote rename pb paul #\u79fb\u9664\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5 git remote rm up # \u8bbe\u5b9aremote\u5206\u652f git remote add -t common ( \u5206\u652f\u540d ) origin ( \u8fdc\u7a0b\u522b\u540d ) https://git.coding.net/farwmarth/BnHServer.git Git tag Git \u67e5\u770b\u65e5\u5fd7 git log \u9ed8\u8ba4\u4e0d\u7528\u4efb\u4f55\u53c2\u6570\u7684\u8bdd\uff0cgit log \u4f1a\u6309\u63d0\u4ea4\u65f6\u95f4\u5217\u51fa\u6240\u6709\u7684\u66f4\u65b0\uff0c\u6700\u8fd1\u7684\u66f4\u65b0\u6392\u5728\u6700\u4e0a\u9762\u3002 \u6b63\u5982\u4f60\u6240\u770b\u5230\u7684\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u6bcf\u4e2a\u63d0\u4ea4\u7684 SHA-1 \u6821\u9a8c\u548c\u3001\u4f5c\u8005\u7684\u540d\u5b57\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3001\u63d0\u4ea4\u65f6\u95f4\u4ee5\u53ca\u63d0\u4ea4\u8bf4\u660e #\u67e5\u770b\u6700\u540e\u4e00\u6761\u63d0\u4ea4 git log -1 git log -n 1 #\u663e\u793a\u6700\u5f00\u59cb\u7684\u63d0\u4ea4 git log --reverse #\u67e5\u770b\u5185\u5bb9\u5dee\u5f02 git log -p #\u663e\u793a\u6240\u6709\u64cd\u4f5c,\u5305\u62ecreset git log -g ## \u4ec5\u5728\u63d0\u4ea4\u4fe1\u606f\u540e\u663e\u793a\u5df2\u4fee\u6539\u7684\u6587\u4ef6\u6e05\u5355\u3002 git log --name-only ## \u663e\u793a\u4fee\u6539\u6587\u4ef6\u53ca\u72b6\u6001 git log --name-status #\u67e5\u770b\u7edf\u8ba1\u4fe1\u606f git log --stat commit ca82a6dff817ec66f44342007202690a93763949 Author: Scott Chacon schacon@gee-mail.com Date: Mon Mar 17 21 :52:11 2008 -0700 changed the version number Rakefile | 2 +- 1 file changed, 1 insertion ( + ) , 1 deletion ( - ) #\u683c\u5de5\u5316log\u4e3a\u4e00\u884c\u663e\u793a git log --pretty = oneline #\u683c\u5de5\u5316log \u63d0\u4ea4\u5bf9\u8c61\u7684\u7b80\u77ed\u54c8\u5e0c\u5b57\u4e32-\u4f5c\u8005\u540d\u5b57,\u63d0\u4ea4\u65f6\u95f4:\u63d0\u4ea4\u8bf4\u660e git log --pretty = format: %h-%an,%ar:%s 716cae2-wujiyu,4 weeks ago:branch 8 7c64b0b-wujiyu,4 weeks ago:stash work 1 #\u663e\u793aASCII \u56fe\u5f62\u8868\u793a\u7684\u5206\u652f\u5408\u5e76\u5386\u53f2 git log --pretty = format: %h %s --graph \u4e00\u4e2a\u5b9e\u7528\u7684log git log --graph --pretty=format: %Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset --abbrev-commit --date=relative \u67e5\u770b\u5f53\u524d\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u6700\u540e\u63d0\u4ea4\u8005 git ls-tree -r --name-only HEAD | while read filename ; do echo $( git log -1 --format = %an %ae -- $filename ) $filename done \u5468\u62a5 git log --pretty = format: %Cred%ad%x09 %Cgreen%s --date = format: %Y/%m/%d %a --since = 1 week ago --until = now --reverse --author = $( git config user.name ) \u7b5b\u9009\u65e5\u5fd7 #\u65f6\u95f4\u70b9\u4ee5\u6765\u7684\u63d0\u4ea4 git log --since = 2016-10-16 #\u4f5c\u8005\u76f8\u5173\u63d0\u4ea4 git log --author = wujiyu git reflog \u5f53\u4f60 (\u5728\u4e00\u4e2a\u4ed3\u5e93\u4e0b) \u5de5\u4f5c\u65f6\uff0cGit \u4f1a\u5728\u4f60\u6bcf\u6b21\u4fee\u6539\u4e86 HEAD \u65f6\u6084\u6084\u5730\u5c06\u6539\u52a8\u8bb0\u5f55\u4e0b\u6765\u3002\u5f53\u4f60\u63d0\u4ea4\u6216\u4fee\u6539\u5206\u652f\u65f6\uff0creflog \u5c31\u4f1a\u66f4\u65b0. git reflog \u6709\u65f6\u5019\u53ef\u4ee5\u5e2e\u52a9\u4f60\u627e\u5230\u4e22\u5931\u6389\u7684commit\uff0c\u6bd4\u5982\u4f60\u5728\u67d0\u4e2adetached HEAD\uff08\u5373\u4e0d\u5728\u4efb\u4f55\u5206\u652f\u53ea\u662f\u5728\u67d0\u4e2a\u5386\u53f2\u7684commit\u7684\u8282\u70b9\u4e0a\uff09\u7684\u65f6\u5019\u8fdb\u884c\u4e86\u4e00\u6b21commit\uff0c\u7136\u540e\u4f60\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u5206\u652f\u60f3\u628a\u521a\u624d\u7684\u4e1c\u897f\u5408\u5e76\u8fdb\u6765\uff0c\u8fd9\u4e2a\u65f6\u5019\u7a81\u7136\u610f\u8bc6\u5230\u521a\u624d\u7684\u90a3\u6b21\u63d0\u4ea4\u627e\u4e0d\u5230\u4e86\uff0c\u8fd9\u65f6\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7HEAD@{1}\u5f15\u7528\u5230\u521a\u624d\u7684\u63d0\u4ea4\u4e86\uff0c\u6216\u8005\u901a\u8fc7git reflog\u627e\u5230\u5bf9\u5e94commit\u7684sha1\u503c\uff0c\u7136\u540e\u8fdb\u884cmerge #\u67e5\u770b\u4ee5\u5f80\u63d0\u4ea4\u5386\u53f2\uff08\u5305\u62ec \u64a4\u9500\u56de\u9000 \u8bb0\u5f55\uff09 git reflog gitk \u56fe\u5f62\u5316\u754c\u9762\u663e\u793alog Git fsck \u6b64\u547d\u4ee4\u4f1a\u68c0\u67e5\u4ed3\u5e93\u7684\u6570\u636e\u5b8c\u6574\u6027,\u6240\u6709\u672a\u5f15\u7528\u5230\u7684\u60ac\u7a7a\u5bf9\u8c61\u90fd\u4f1a\u663e\u793a\u51fa\u6765 git fsck dangling blob d670460b4b4aece5915caf5c68d12f560a9fe3e4 dangling commit ab1afef80fac8e34258ff41fc1b867c702daa24b Git\u67e5\u770b\u63d0\u4ea4\u53d8\u52a8 git diff :\u6bd4\u8f83 \u5de5\u4f5c\u533a \u548c \u6682\u5b58\u533a \u7684\u53d8\u5316 git diff --cached \u4e0e git diff --staged \u76f8\u540c :\u6bd4\u8f83 \u6682\u5b58\u533a \u4e0e \u63d0\u4ea4\u5feb\u7167 \u7684\u53d8\u5316 git diff HEAD :\u6bd4\u8f83 \u5de5\u4f5c\u533a \u4e0e \u63d0\u4ea4\u5feb\u7167 \u7684\u53d8\u5316 #\u6bd4\u8f83\u672c\u5730master\u5206\u652f\u548c\u8fdc\u7a0bmaster\u5206\u652f\u7684\u5dee\u5f02 git diff master origin/master #\u6bd4\u8f83\u8fdc\u7a0b\u5206\u652f\u4e0e\u672c\u5730\u6587\u4ef6\u5dee\u5f02 git diff origin/master a.txt Git Stash \u4fdd\u5b58\u5de5\u4f5c\u72b6\u6001 #\u4fdd\u5b58\u5f53\u524d\u4fee\u6539\u7684\u5de5\u4f5c\u7a7a\u95f4 git stash #\u5f39\u51fa\u4e00\u4e2a\u4fdd\u5b58\u7684\u5de5\u4f5c\u7a7a\u95f4 git stash pop #\u4e22\u5f03\u4e00\u4e2a\u4fdd\u5b58\u7684\u7a7a\u95f4 git stash drop stash { 1 } #\u6e05\u9664\u5168\u90e8\u4fdd\u5b58 git stash clear Git submodule Git submodule update git submodule update \u5e76\u4e0d\u4f1a\u5c06submodule\u5207\u5230\u4efb\u4f55 branch \u6709\u4e9b\u65f6\u5019\u4f60\u9700\u8981\u5bf9submodule\u505a\u4e00\u4e9b\u4fee\u6539\uff0c\u5f88\u5e38\u89c1\u7684\u505a\u6cd5\u5c31\u662f\u5207\u5230submodule\u7684\u76ee\u5f55\uff0c\u7136\u540e\u505a\u4fee\u6539\uff0c\u7136\u540ecommit\u548cpush\u3002 \u8fd9\u91cc\u7684\u5751\u5728\u4e8e\uff0c\u9ed8\u8ba4git submodule update\u5e76\u4e0d\u4f1a\u5c06submodule\u5207\u5230\u4efb\u4f55branch\uff0c\u6240\u4ee5\uff0c\u9ed8\u8ba4\u4e0bsubmodule\u7684HEAD\u662f\u5904\u4e8e\u6e38\u79bb\u72b6\u6001\u7684(\u2018detached HEAD\u2019 state)\u3002\u6240\u4ee5\u5728\u4fee\u6539\u524d\uff0c\u8bb0\u5f97\u4e00\u5b9a\u8981\u7528git checkout master\u5c06\u5f53\u524d\u7684submodule\u5206\u652f\u5207\u6362\u5230master\uff0c\u7136\u540e\u624d\u80fd\u505a\u4fee\u6539\u548c\u63d0\u4ea4\u3002 git submodule\u4e0b\u8fd8\u6709submodule git submodule foreach git submodule update #\u9012\u5f52\u66f4\u65b0 git submodule update --init --recursive # \u5220\u9664submodule git submodule deinit path_to_submodule-name git rm --cached path_to_submodule rm -rf .git/modules/ path_to_submodule Git clean # \u5220\u9664 untracked files git clean -f # \u8fde untracked \u7684\u76ee\u5f55\u4e5f\u4e00\u8d77\u5220\u6389 git clean -fd # \u8fde gitignore \u7684untrack \u6587\u4ef6/\u76ee\u5f55\u4e5f\u4e00\u8d77\u5220\u6389 \uff08\u614e\u7528\uff0c\u4e00\u822c\u8fd9\u4e2a\u662f\u7528\u6765\u5220\u6389\u7f16\u8bd1\u51fa\u6765\u7684 .o\u4e4b\u7c7b\u7684\u6587\u4ef6\u7528\u7684\uff09 git clean -xfd # \u5728\u7528\u4e0a\u8ff0 git clean \u524d\uff0c\u5899\u88c2\u5efa\u8bae\u52a0\u4e0a -n \u53c2\u6570\u6765\u5148\u770b\u770b\u4f1a\u5220\u6389\u54ea\u4e9b\u6587\u4ef6\uff0c\u9632\u6b62\u91cd\u8981\u6587\u4ef6\u88ab\u8bef\u5220 git clean -nxfd git clean -nf git clean -nfds \u63a8\u9001\u5230\u8fdc\u7a0b\u5206\u652f git push origin local_branch:remote_branch \u64cd\u4f5c\u5e8f\u5217\u9644\u52a0\u6307\u4ee4 --continue Continue the operation in progress using the information in .git/sequencer. Can be used to continue after resolving conflicts in a failed cherry-pick or revert. --quit Forget about the current operation in progress. Can be used to clear the sequencer state after a failed cherry-pick or revert. --abort Cancel the operation and return to the pre-sequence state.","title":"git\u64cd\u4f5c"},{"location":"versions/git_oper/#git","text":"","title":"git \u64cd\u4f5c"},{"location":"versions/git_oper/#_1","text":"","title":"\u4ed3\u5e93\u3001\u7f13\u51b2\u533a\u3001\u5de5\u4f5c\u526f\u672c"},{"location":"versions/git_oper/#git_1","text":"Git \u81ea\u5e26\u4e00\u4e2a git config \u7684\u5de5\u5177\u6765\u5e2e\u52a9\u8bbe\u7f6e\u63a7\u5236 Git \u5916\u89c2\u548c\u884c\u4e3a\u7684\u914d\u7f6e\u53d8\u91cf\u3002 \u8fd9\u4e9b\u53d8\u91cf\u5b58\u50a8\u5728\u4e09\u4e2a\u4e0d\u540c\u7684\u4f4d\u7f6e\uff1a --system \u4fee\u6539 /etc/gitconfig \u6587\u4ef6: \u6240\u6709\u7528\u6237\u5171\u7528 --global \u4fee\u6539 ~/.gitconfig \u6216 ~/.config/git/config \u6587\u4ef6\uff1a\u53ea\u9488\u5bf9\u5f53\u524d\u7528\u6237 \u5f53\u524d\u4ed3\u5e93\u7684 Git \u76ee\u5f55\u4e2d\u7684 config \u6587\u4ef6\uff08\u5c31\u662f .git/config \uff09\uff1a\u9488\u5bf9\u8be5\u4ed3\u5e93\u3002 \u4f18\u5148\u7ea7:\u5f53\u524d\u4ed3\u5e93 config \u5f53\u524d\u7528\u6237 \u6240\u6709\u7528\u6237","title":"Git\u914d\u7f6e"},{"location":"versions/git_oper/#_2","text":"#\u4f5c\u8005 git config --global user.name John Doe git config --global user.email johndoe@example.com #\u6587\u672c\u4fe1\u606f git config --global core.editor emacs","title":"\u914d\u7f6e"},{"location":"versions/git_oper/#_3","text":"#\u67e5\u770b\u6240\u6709 git config --list #\u67e5\u770b\u67d0\u9879 git config user.name #\u79fb\u9664\u8bbe\u7f6e git config --unset user.name","title":"\u68c0\u67e5\u914d\u7f6e\u4fe1\u606f"},{"location":"versions/git_oper/#git-init","text":"\u521d\u59cb\u5316\u4ed3\u5e93\uff0c\u8be5\u547d\u4ee4\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a .git \u7684\u5b50\u76ee\u5f55\uff0c\u8fd9\u4e2a\u5b50\u76ee\u5f55\u542b\u6709\u4f60\u521d\u59cb\u5316\u7684 Git \u4ed3\u5e93\u4e2d\u6240\u6709\u7684\u5fc5\u987b\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u662f Git \u4ed3\u5e93\u7684\u9aa8\u5e72","title":"Git init"},{"location":"versions/git_oper/#git-status","text":"#\u663e\u793a\u72b6\u6001 git status #\u77ed\u683c\u5f0f\u663e\u793a git status -s \u72b6\u6001\u6807\u8bc6: ' ' = unmodified M = modified(\u5df2\u4fee\u6539) A = added(\u5df2\u6dfb\u52a0) D = deleted(\u5df2\u5220\u9664) R = renamed(\u5df2\u91cd\u547d\u540d) C = copied(\u5df2\u590d\u5236) U = updated but unmerged(\u5df2\u66f4\u65b0\u4f46\u672a\u5408\u5e76) X Y Meaning ------------------------------------------------- [ MD ] not updated M [ MD ] updated in index A [ MD ] added to index D [ M ] deleted from index R [ MD ] renamed in index C [ MD ] copied in index [ MARC ] index and work tree matches [ MARC ] M work tree changed since index [ MARC ] D deleted in work tree ------------------------------------------------- D D unmerged, both deleted A U unmerged, added by us U D unmerged, deleted by them U A unmerged, added by them D U unmerged, deleted by us A A unmerged, both added U U unmerged, both modified ------------------------------------------------- ? ? untracked ! ! ignored","title":"Git status"},{"location":"versions/git_oper/#git-rm","text":"\u7528\u4e8e\u79fb\u9664\u4ed3\u5e93\u4e2d\u7684\u6587\u4ef6,\u5982 git rm *.txt \u79fb\u9664\u6240\u7684\u7684txt\u6587\u4ef6","title":"Git rm"},{"location":"versions/git_oper/#git-mv","text":"git \u7cfb\u7edf\u4e2d\u79fb\u52a8\u4e00\u4e2a\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u76f8\u5f53\u4e8e shell \u547d\u4ee4 mv oldname newname git add newname git rm oldname","title":"Git mv"},{"location":"versions/git_oper/#git-show","text":"\u663e\u793a\u5bf9\u8c61\u7684\u66f4\u591a\u4fe1\u606f \u5bf9\u4e8ecommit,\u5c55\u793alog\u548c\u5dee\u5f02 \u5bf9\u4e8etag,\u663e\u793atag\u76f8\u5173\u4fe1\u606f \u5bf9\u4e8etree\u5bf9\u8c61,\u5217\u51fa\u6811\u7ed3\u6784\u540d\u5b57 \u5bf9\u4e8eblob\u5bf9\u8c61,\u663e\u793a\u6587\u4ef6\u5185\u5bb9 #\u663e\u793a\u63d0\u4ea4\u4fe1\u606f git show 716cae27bc24b0f56b0dff5039e6a2cf8ac3edac #\u663e\u793a\u5206\u652f\u7684\u4fe1\u606f git show v1.0.0","title":"Git show"},{"location":"versions/git_oper/#git-add","text":"\u628a\u5f53\u524d\u6587\u4ef6\u653e\u5165\u6682\u5b58\u533a\u57df","title":"Git add"},{"location":"versions/git_oper/#git-commit","text":"\u63d0\u4ea4\u65f6\uff0cgit\u7528\u6682\u5b58\u533a\u57df\u7684\u6587\u4ef6\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\uff0c\u5e76\u628a\u6b64\u65f6\u7684\u8282\u70b9\u8bbe\u4e3a\u7236\u8282\u70b9\u3002\u7136\u540e\u628a\u5f53\u524d\u5206\u652f\u6307\u5411\u65b0\u7684\u63d0\u4ea4\u8282\u70b9\u3002\u4e0b\u56fe\u4e2d\uff0c\u5f53\u524d\u5206\u652f\u662fmaster\u3002 \u5728\u8fd0\u884c\u547d\u4ee4\u4e4b\u524d\uff0cmaster\u6307\u5411ed489\uff0c\u63d0\u4ea4\u540e\uff0cmaster\u6307\u5411\u65b0\u7684\u8282\u70b9f0cec\u5e76\u4ee5ed489\u4f5c\u4e3a\u7236\u8282\u70b9 \u5373\u4fbf\u5f53\u524d\u5206\u652f\u662f\u67d0\u6b21\u63d0\u4ea4\u7684\u7956\u7236\u8282\u70b9\uff0cgit\u4f1a\u540c\u6837\u64cd\u4f5c\u3002\u4e0b\u56fe\u4e2d\uff0c\u5728master\u5206\u652f\u7684\u7956\u7236\u8282\u70b9maint\u5206\u652f\u8fdb\u884c\u4e00\u6b21\u63d0\u4ea4\uff0c\u751f\u6210\u4e861800b\u3002 \u8fd9\u6837\uff0cmaint\u5206\u652f\u5c31\u4e0d\u518d\u662fmaster\u5206\u652f\u7684\u7956\u7236\u8282\u70b9\u3002\u6b64\u65f6\uff0c\u5408\u5e76 (\u6216\u8005 \u884d\u5408) \u662f\u5fc5\u987b\u7684\u3002 \u5982\u679c\u60f3\u66f4\u6539\u4e00\u6b21\u63d0\u4ea4\uff0c\u4f7f\u7528 git commit --amend\u3002git\u4f1a\u4f7f\u7528\u4e0e\u5f53\u524d\u63d0\u4ea4\u76f8\u540c\u7684\u7236\u8282\u70b9\u8fdb\u884c\u4e00\u6b21\u65b0\u63d0\u4ea4\uff0c\u65e7\u7684\u63d0\u4ea4\u4f1a\u88ab\u53d6\u6d88\u3002","title":"Git commit"},{"location":"versions/git_oper/#head","text":"\u5f53HEAD\u5904\u4e8e\u5206\u79bb\u72b6\u6001\uff08\u4e0d\u4f9d\u9644\u4e8e\u4efb\u4e00\u5206\u652f\uff09\u65f6\uff0c\u63d0\u4ea4\u64cd\u4f5c\u53ef\u4ee5\u6b63\u5e38\u8fdb\u884c\uff0c\u4f46\u662f\u4e0d\u4f1a\u66f4\u65b0\u4efb\u4f55\u5df2\u547d\u540d\u7684\u5206\u652f\u3002(\u4f60\u53ef\u4ee5\u8ba4\u4e3a\u8fd9\u662f\u5728\u66f4\u65b0\u4e00\u4e2a\u533f\u540d\u5206\u652f\u3002) \u4e00\u65e6\u6b64\u540e\u4f60\u5207\u6362\u5230\u522b\u7684\u5206\u652f\uff0c\u6bd4\u5982\u8bf4master\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63d0\u4ea4\u8282\u70b9\uff08\u53ef\u80fd\uff09\u518d\u4e5f\u4e0d\u4f1a\u88ab\u5f15\u7528\u5230\uff0c\u7136\u540e\u5c31\u4f1a\u88ab\u4e22\u5f03\u6389\u4e86\u3002\u6ce8\u610f\u8fd9\u4e2a\u547d\u4ee4\u4e4b\u540e\u5c31\u4e0d\u4f1a\u6709\u4e1c\u897f\u5f15\u75282eecb\u3002 \u4f46\u662f\uff0c\u5982\u679c\u4f60\u60f3\u4fdd\u5b58\u8fd9\u4e2a\u72b6\u6001\uff0c\u53ef\u4ee5\u7528\u547d\u4ee4git checkout -b name\u6765\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u3002","title":"HEAD\u6807\u8bc6\u5904\u4e8e\u5206\u79bb\u72b6\u6001\u65f6\u7684\u63d0\u4ea4\u64cd\u4f5c"},{"location":"versions/git_oper/#git-checkout","text":"checkout\u547d\u4ee4\u7528\u4e8e\u4ece\u5386\u53f2\u63d0\u4ea4\uff08\u6216\u8005\u6682\u5b58\u533a\u57df\uff09\u4e2d\u62f7\u8d1d\u6587\u4ef6\u5230\u5de5\u4f5c\u76ee\u5f55\uff0c\u4e5f\u53ef\u7528\u4e8e\u5207\u6362\u5206\u652f\u3002 git checkout HEAD a.txt :\u4ece \u63d0\u4ea4\u5feb\u7167 \u4e2d\u63d0\u53d6\u6587\u4ef6\u5230 \u6682\u5b58\u533a \u548c \u5de5\u4f5c\u7a7a\u95f4 \u4e2d git checkout a.txt :\u4ece \u6682\u5b58\u533a \u4e2d\u63d0\u53d6\u6587\u4ef6\u5230 \u5de5\u4f5c\u7a7a\u95f4 \u4e2d git checkout master :\u5207\u6362\u5206\u652f \u5f53\u7ed9\u5b9a\u67d0\u4e2a\u6587\u4ef6\u540d\uff08\u6216\u8005\u6253\u5f00-p\u9009\u9879\uff0c\u6216\u8005\u6587\u4ef6\u540d\u548c-p\u9009\u9879\u540c\u65f6\u6253\u5f00\uff09\u65f6\uff0cgit\u4f1a\u4ece\u6307\u5b9a\u7684\u63d0\u4ea4\u4e2d\u62f7\u8d1d\u6587\u4ef6\u5230\u6682\u5b58\u533a\u57df\u548c\u5de5\u4f5c\u76ee\u5f55\u3002\u6bd4\u5982\uff0cgit checkout HEAD~ foo.c\u4f1a\u5c06\u63d0\u4ea4\u8282\u70b9HEAD~(\u5373\u5f53\u524d\u63d0\u4ea4\u8282\u70b9\u7684\u7236\u8282\u70b9)\u4e2d\u7684foo.c\u590d\u5236\u5230\u5de5\u4f5c\u76ee\u5f55\u5e76\u4e14\u52a0\u5230\u6682\u5b58\u533a\u57df\u4e2d\u3002\uff08\u5982\u679c\u547d\u4ee4\u4e2d\u6ca1\u6709\u6307\u5b9a\u63d0\u4ea4\u8282\u70b9\uff0c\u5219\u4f1a\u4ece\u6682\u5b58\u533a\u57df\u4e2d\u62f7\u8d1d\u5185\u5bb9\u3002\uff09\u6ce8\u610f\u5f53\u524d\u5206\u652f\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316 \u5f53\u4e0d\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u800c\u662f\u7ed9\u51fa\u4e00\u4e2a\uff08\u672c\u5730\uff09\u5206\u652f\u65f6\uff0c\u90a3\u4e48HEAD\u6807\u8bc6\u4f1a\u79fb\u52a8\u5230\u90a3\u4e2a\u5206\u652f\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u201c\u5207\u6362\u201d\u5230\u90a3\u4e2a\u5206\u652f\u4e86\uff09\uff0c\u7136\u540e\u6682\u5b58\u533a\u57df\u548c\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\u4f1a\u548cHEAD\u5bf9\u5e94\u7684\u63d0\u4ea4\u8282\u70b9\u4e00\u81f4\u3002\u65b0\u63d0\u4ea4\u8282\u70b9\uff08\u4e0b\u56fe\u4e2d\u7684a47c3\uff09\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u90fd\u4f1a\u88ab\u590d\u5236\uff08\u5230\u6682\u5b58\u533a\u57df\u548c\u5de5\u4f5c\u76ee\u5f55\u4e2d\uff09\uff1b\u53ea\u5b58\u5728\u4e8e\u8001\u7684\u63d0\u4ea4\u8282\u70b9\uff08ed489\uff09\u4e2d\u7684\u6587\u4ef6\u4f1a\u88ab\u5220\u9664\uff1b\u4e0d\u5c5e\u4e8e\u4e0a\u8ff0\u4e24\u8005\u7684\u6587\u4ef6\u4f1a\u88ab\u5ffd\u7565\uff0c\u4e0d\u53d7\u5f71\u54cd\u3002 \u5982\u679c\u65e2\u6ca1\u6709\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u4e5f\u6ca1\u6709\u6307\u5b9a\u5206\u652f\u540d\uff0c\u800c\u662f\u4e00\u4e2a\u6807\u7b7e\u3001\u8fdc\u7a0b\u5206\u652f\u3001SHA-1\u503c\u6216\u8005\u662f\u50cfmaster~3\u7c7b\u4f3c\u7684\u4e1c\u897f\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533f\u540d\u5206\u652f\uff0c\u79f0\u4f5cdetached HEAD\uff08\u88ab\u5206\u79bb\u7684HEAD\u6807\u8bc6\uff09\u3002\u8fd9\u6837\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5728\u5386\u53f2\u7248\u672c\u4e4b\u95f4\u4e92\u76f8\u5207\u6362\u3002\u6bd4\u5982\u8bf4\u4f60\u60f3\u8981\u7f16\u8bd11.6.6.1\u7248\u672c\u7684git\uff0c\u4f60\u53ef\u4ee5\u8fd0\u884cgit checkout v1.6.6.1\uff08\u8fd9\u662f\u4e00\u4e2a\u6807\u7b7e\uff0c\u800c\u975e\u5206\u652f\u540d\uff09\uff0c\u7f16\u8bd1\uff0c\u5b89\u88c5\uff0c\u7136\u540e\u5207\u6362\u56de\u53e6\u4e00\u4e2a\u5206\u652f\uff0c\u6bd4\u5982\u8bf4git checkout master\u3002\u7136\u800c\uff0c\u5f53\u63d0\u4ea4\u64cd\u4f5c\u6d89\u53ca\u5230\u201c\u5206\u79bb\u7684HEAD\u201d\u65f6\uff0c\u5176\u884c\u4e3a\u4f1a\u7565\u6709\u4e0d\u540c\uff0c\u8be6\u60c5\u89c1\u5728\u4e0b\u9762\u3002","title":"Git checkout"},{"location":"versions/git_oper/#_4","text":"git checkout -t origin/2.0.0 #\u6216\u8005 git checkout origin/remoteName -b localName","title":"\u62c9\u53d6\u8fdc\u7a0b\u5206\u652f\u5e76\u65b0\u5efa\u672c\u5730\u5206\u652f"},{"location":"versions/git_oper/#git-reset","text":"reset\u547d\u4ee4\u628a\u5f53\u524d\u5206\u652f\u6307\u5411\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u5e76\u4e14\u6709\u9009\u62e9\u7684\u53d8\u52a8\u5de5\u4f5c\u76ee\u5f55\u548c\u7d22\u5f15\u3002\u4e5f\u7528\u6765\u5728\u4ece\u5386\u53f2\u4ed3\u5e93\u4e2d\u590d\u5236\u6587\u4ef6\u5230\u7d22\u5f15\uff0c\u800c\u4e0d\u52a8\u5de5\u4f5c\u76ee\u5f55\u3002 \u5982\u679c\u4e0d\u7ed9\u9009\u9879\uff0c\u90a3\u4e48\u5f53\u524d\u5206\u652f\u6307\u5411\u5230\u90a3\u4e2a\u63d0\u4ea4\u3002\u5982\u679c\u7528--hard\u9009\u9879\uff0c\u90a3\u4e48\u5de5\u4f5c\u76ee\u5f55\u4e5f\u66f4\u65b0\uff0c\u5982\u679c\u7528--soft\u9009\u9879\uff0c\u90a3\u4e48\u90fd\u4e0d\u53d8 \u5982\u679c\u6ca1\u6709\u7ed9\u51fa\u63d0\u4ea4\u70b9\u7684\u7248\u672c\u53f7\uff0c\u90a3\u4e48\u9ed8\u8ba4\u7528HEAD\u3002\u8fd9\u6837\uff0c\u5206\u652f\u6307\u5411\u4e0d\u53d8\uff0c\u4f46\u662f\u7d22\u5f15\u4f1a\u56de\u6eda\u5230\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\uff0c\u5982\u679c\u7528--hard\u9009\u9879\uff0c\u5de5\u4f5c\u76ee\u5f55\u4e5f\u540c\u6837\u3002 \u5982\u679c\u7ed9\u4e86\u6587\u4ef6\u540d(\u6216\u8005 -p\u9009\u9879), \u90a3\u4e48\u5de5\u4f5c\u6548\u679c\u548c\u5e26\u6587\u4ef6\u540d\u7684checkout\u5dee\u4e0d\u591a\uff0c\u9664\u4e86\u7d22\u5f15\u88ab\u66f4\u65b0\u3002","title":"Git reset"},{"location":"versions/git_oper/#git-reset_1","text":"#\u56de\u9000\u5230\u8fdc\u7a0b\u7248\u672c git reset --hard origin/master #\u4ece\u6682\u5b58\u533a\u79fb\u9664(add\u4e4b\u540e) git reset HEAD #\u53ef\u4ee5\u56de\u9000\u5230\u67d0\u4e2a\u63d0\u4ea4(commit\u4e4b\u540e) git reset --hard #\u5408\u5e76\u65f6\u9047\u5230\u51b2\u7a81\u60f3\u53d6\u6d88\u64cd\u4f5c\uff0c\u6062\u590dindex\uff0c\u7528git merge --abort #git 1.7\u4ee5\u6765\u53ef\u4ee5\u64a4\u6d88\u5408\u5e76 git reset --merge","title":"Git reset \u603b\u7ed3"},{"location":"versions/git_oper/#git-reset_2","text":"git reset HEAD~ git reset HEAD@{1} \u6216\u8005 git reset ORIG_HEAD","title":"Git reset  \u53cd\u64cd\u4f5c"},{"location":"versions/git_oper/#git-revert","text":"\u4ee5\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u6765\u8986\u76d6\u4e4b\u524d\u7684\u4fee\u6539 #\u6062\u590d\u5230\u4e0a\u4e00\u4e2a\u7248\u672cHEAD\u63d0\u4ea4\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u63d0\u4ea4\u8986\u76d6\u539f\u6709\u7684\u53d8\u66f4 git revert HEAD~","title":"Git revert"},{"location":"versions/git_oper/#_5","text":"git reset -- files \u7528\u6765\u64a4\u9500\u6700\u540e\u4e00\u6b21git add files\uff0c\u4f60\u4e5f\u53ef\u4ee5\u7528git reset \u64a4\u9500\u6240\u6709\u6682\u5b58\u533a\u57df\u6587\u4ef6\u3002 git checkout -- files \u628a\u6587\u4ef6\u4ece\u6682\u5b58\u533a\u57df\u590d\u5236\u5230\u5de5\u4f5c\u76ee\u5f55\uff0c\u7528\u6765\u4e22\u5f03\u672c\u5730\u4fee\u6539\u3002","title":"\u603b\u7ed3"},{"location":"versions/git_oper/#git-clone","text":"\u5982\u679c\u4f60\u60f3\u83b7\u5f97\u4e00\u4efd\u5df2\u7ecf\u5b58\u5728\u4e86\u7684 Git \u4ed3\u5e93\u7684\u62f7\u8d1d\uff0c\u6bd4\u5982\u8bf4\uff0c\u4f60\u60f3\u4e3a\u67d0\u4e2a\u5f00\u6e90\u9879\u76ee\u8d21\u732e\u81ea\u5df1\u7684\u4e00\u4efd\u529b\uff0c\u8fd9\u65f6\u5c31\u8981\u7528\u5230 git clone \u547d\u4ee4\u3002 \u5982\u679c\u4f60\u5bf9\u5176\u5b83\u7684 VCS \u7cfb\u7edf\uff08\u6bd4\u5982\u8bf4Subversion\uff09\u5f88\u719f\u6089\uff0c\u8bf7\u7559\u5fc3\u4e00\u4e0b\u4f60\u6240\u4f7f\u7528\u7684\u547d\u4ee4\u662f\"clone\"\u800c\u4e0d\u662f\"checkout\" git clone https://github.com/libgit2/libgit2","title":"Git clone"},{"location":"versions/git_oper/#git-fetch","text":"#\u53ea\u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u4fe1\u606f\u4e0d\u5408\u5e76 git fetch origin","title":"Git fetch"},{"location":"versions/git_oper/#git-pull","text":"\u628a\u8fdc\u7a0b\u4ed3\u5e93\u66f4\u6539\u62c9\u53d6\u5e76\u4e14\u5408\u5e76\u5230\u672c\u5730\u5f53\u524d\u5206\u652f, git pull \u76f8\u5f53\u4e8e git fetch \u548c git merge FETCH_HEAD \u4e24\u6b65\u64cd\u4f5c #\u62c9\u53d6\u5e76\u5408\u5e76 git pull #\u62c9\u53d6\u8fdc\u7a0borigin\u5408\u5e76\u5230master git pull origin master","title":"Git pull"},{"location":"versions/git_oper/#git-push","text":"#\u5c06\u672c\u5730master\u5206\u652f\u63d0\u4ea4\u63a8\u9001\u5230\u8fdc\u7a0borigin git push orign master #\u8bbe\u7f6e\u9ed8\u8ba4\u63a8\u9001 git push --set-upstream origin master","title":"Git push"},{"location":"versions/git_oper/#git-remote","text":"\u8fdc\u7a0b\u4ed3\u5e93\u7ba1\u7406 #\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u522b\u540d git remote #\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740 git remote -v #\u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93 git remote add up https://git.coding.net/farwmarth/test_git.git #\u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u8be6\u7ec6\u7684\u5206\u6790\u4fe1\u606f git remote show origin #\u628a pb \u6539\u6210 paul git remote rename pb paul #\u79fb\u9664\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5 git remote rm up # \u8bbe\u5b9aremote\u5206\u652f git remote add -t common ( \u5206\u652f\u540d ) origin ( \u8fdc\u7a0b\u522b\u540d ) https://git.coding.net/farwmarth/BnHServer.git","title":"Git remote"},{"location":"versions/git_oper/#git-tag","text":"","title":"Git tag"},{"location":"versions/git_oper/#git_2","text":"","title":"Git \u67e5\u770b\u65e5\u5fd7"},{"location":"versions/git_oper/#git-log","text":"\u9ed8\u8ba4\u4e0d\u7528\u4efb\u4f55\u53c2\u6570\u7684\u8bdd\uff0cgit log \u4f1a\u6309\u63d0\u4ea4\u65f6\u95f4\u5217\u51fa\u6240\u6709\u7684\u66f4\u65b0\uff0c\u6700\u8fd1\u7684\u66f4\u65b0\u6392\u5728\u6700\u4e0a\u9762\u3002 \u6b63\u5982\u4f60\u6240\u770b\u5230\u7684\uff0c\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u5217\u51fa\u6bcf\u4e2a\u63d0\u4ea4\u7684 SHA-1 \u6821\u9a8c\u548c\u3001\u4f5c\u8005\u7684\u540d\u5b57\u548c\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3001\u63d0\u4ea4\u65f6\u95f4\u4ee5\u53ca\u63d0\u4ea4\u8bf4\u660e #\u67e5\u770b\u6700\u540e\u4e00\u6761\u63d0\u4ea4 git log -1 git log -n 1 #\u663e\u793a\u6700\u5f00\u59cb\u7684\u63d0\u4ea4 git log --reverse #\u67e5\u770b\u5185\u5bb9\u5dee\u5f02 git log -p #\u663e\u793a\u6240\u6709\u64cd\u4f5c,\u5305\u62ecreset git log -g ## \u4ec5\u5728\u63d0\u4ea4\u4fe1\u606f\u540e\u663e\u793a\u5df2\u4fee\u6539\u7684\u6587\u4ef6\u6e05\u5355\u3002 git log --name-only ## \u663e\u793a\u4fee\u6539\u6587\u4ef6\u53ca\u72b6\u6001 git log --name-status #\u67e5\u770b\u7edf\u8ba1\u4fe1\u606f git log --stat commit ca82a6dff817ec66f44342007202690a93763949 Author: Scott Chacon schacon@gee-mail.com Date: Mon Mar 17 21 :52:11 2008 -0700 changed the version number Rakefile | 2 +- 1 file changed, 1 insertion ( + ) , 1 deletion ( - ) #\u683c\u5de5\u5316log\u4e3a\u4e00\u884c\u663e\u793a git log --pretty = oneline #\u683c\u5de5\u5316log \u63d0\u4ea4\u5bf9\u8c61\u7684\u7b80\u77ed\u54c8\u5e0c\u5b57\u4e32-\u4f5c\u8005\u540d\u5b57,\u63d0\u4ea4\u65f6\u95f4:\u63d0\u4ea4\u8bf4\u660e git log --pretty = format: %h-%an,%ar:%s 716cae2-wujiyu,4 weeks ago:branch 8 7c64b0b-wujiyu,4 weeks ago:stash work 1 #\u663e\u793aASCII \u56fe\u5f62\u8868\u793a\u7684\u5206\u652f\u5408\u5e76\u5386\u53f2 git log --pretty = format: %h %s --graph \u4e00\u4e2a\u5b9e\u7528\u7684log git log --graph --pretty=format: %Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset --abbrev-commit --date=relative \u67e5\u770b\u5f53\u524d\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u6700\u540e\u63d0\u4ea4\u8005 git ls-tree -r --name-only HEAD | while read filename ; do echo $( git log -1 --format = %an %ae -- $filename ) $filename done \u5468\u62a5 git log --pretty = format: %Cred%ad%x09 %Cgreen%s --date = format: %Y/%m/%d %a --since = 1 week ago --until = now --reverse --author = $( git config user.name )","title":"git log"},{"location":"versions/git_oper/#_6","text":"#\u65f6\u95f4\u70b9\u4ee5\u6765\u7684\u63d0\u4ea4 git log --since = 2016-10-16 #\u4f5c\u8005\u76f8\u5173\u63d0\u4ea4 git log --author = wujiyu","title":"\u7b5b\u9009\u65e5\u5fd7"},{"location":"versions/git_oper/#git-reflog","text":"\u5f53\u4f60 (\u5728\u4e00\u4e2a\u4ed3\u5e93\u4e0b) \u5de5\u4f5c\u65f6\uff0cGit \u4f1a\u5728\u4f60\u6bcf\u6b21\u4fee\u6539\u4e86 HEAD \u65f6\u6084\u6084\u5730\u5c06\u6539\u52a8\u8bb0\u5f55\u4e0b\u6765\u3002\u5f53\u4f60\u63d0\u4ea4\u6216\u4fee\u6539\u5206\u652f\u65f6\uff0creflog \u5c31\u4f1a\u66f4\u65b0. git reflog \u6709\u65f6\u5019\u53ef\u4ee5\u5e2e\u52a9\u4f60\u627e\u5230\u4e22\u5931\u6389\u7684commit\uff0c\u6bd4\u5982\u4f60\u5728\u67d0\u4e2adetached HEAD\uff08\u5373\u4e0d\u5728\u4efb\u4f55\u5206\u652f\u53ea\u662f\u5728\u67d0\u4e2a\u5386\u53f2\u7684commit\u7684\u8282\u70b9\u4e0a\uff09\u7684\u65f6\u5019\u8fdb\u884c\u4e86\u4e00\u6b21commit\uff0c\u7136\u540e\u4f60\u5207\u6362\u5230\u53e6\u4e00\u4e2a\u5206\u652f\u60f3\u628a\u521a\u624d\u7684\u4e1c\u897f\u5408\u5e76\u8fdb\u6765\uff0c\u8fd9\u4e2a\u65f6\u5019\u7a81\u7136\u610f\u8bc6\u5230\u521a\u624d\u7684\u90a3\u6b21\u63d0\u4ea4\u627e\u4e0d\u5230\u4e86\uff0c\u8fd9\u65f6\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7HEAD@{1}\u5f15\u7528\u5230\u521a\u624d\u7684\u63d0\u4ea4\u4e86\uff0c\u6216\u8005\u901a\u8fc7git reflog\u627e\u5230\u5bf9\u5e94commit\u7684sha1\u503c\uff0c\u7136\u540e\u8fdb\u884cmerge #\u67e5\u770b\u4ee5\u5f80\u63d0\u4ea4\u5386\u53f2\uff08\u5305\u62ec \u64a4\u9500\u56de\u9000 \u8bb0\u5f55\uff09 git reflog","title":"git reflog"},{"location":"versions/git_oper/#gitk","text":"\u56fe\u5f62\u5316\u754c\u9762\u663e\u793alog","title":"gitk"},{"location":"versions/git_oper/#git-fsck","text":"\u6b64\u547d\u4ee4\u4f1a\u68c0\u67e5\u4ed3\u5e93\u7684\u6570\u636e\u5b8c\u6574\u6027,\u6240\u6709\u672a\u5f15\u7528\u5230\u7684\u60ac\u7a7a\u5bf9\u8c61\u90fd\u4f1a\u663e\u793a\u51fa\u6765 git fsck dangling blob d670460b4b4aece5915caf5c68d12f560a9fe3e4 dangling commit ab1afef80fac8e34258ff41fc1b867c702daa24b","title":"Git fsck"},{"location":"versions/git_oper/#git_3","text":"git diff :\u6bd4\u8f83 \u5de5\u4f5c\u533a \u548c \u6682\u5b58\u533a \u7684\u53d8\u5316 git diff --cached \u4e0e git diff --staged \u76f8\u540c :\u6bd4\u8f83 \u6682\u5b58\u533a \u4e0e \u63d0\u4ea4\u5feb\u7167 \u7684\u53d8\u5316 git diff HEAD :\u6bd4\u8f83 \u5de5\u4f5c\u533a \u4e0e \u63d0\u4ea4\u5feb\u7167 \u7684\u53d8\u5316 #\u6bd4\u8f83\u672c\u5730master\u5206\u652f\u548c\u8fdc\u7a0bmaster\u5206\u652f\u7684\u5dee\u5f02 git diff master origin/master #\u6bd4\u8f83\u8fdc\u7a0b\u5206\u652f\u4e0e\u672c\u5730\u6587\u4ef6\u5dee\u5f02 git diff origin/master a.txt","title":"Git\u67e5\u770b\u63d0\u4ea4\u53d8\u52a8"},{"location":"versions/git_oper/#git-stash","text":"\u4fdd\u5b58\u5de5\u4f5c\u72b6\u6001 #\u4fdd\u5b58\u5f53\u524d\u4fee\u6539\u7684\u5de5\u4f5c\u7a7a\u95f4 git stash #\u5f39\u51fa\u4e00\u4e2a\u4fdd\u5b58\u7684\u5de5\u4f5c\u7a7a\u95f4 git stash pop #\u4e22\u5f03\u4e00\u4e2a\u4fdd\u5b58\u7684\u7a7a\u95f4 git stash drop stash { 1 } #\u6e05\u9664\u5168\u90e8\u4fdd\u5b58 git stash clear","title":"Git Stash"},{"location":"versions/git_oper/#git-submodule","text":"","title":"Git submodule"},{"location":"versions/git_oper/#git-submodule-update","text":"git submodule update \u5e76\u4e0d\u4f1a\u5c06submodule\u5207\u5230\u4efb\u4f55 branch \u6709\u4e9b\u65f6\u5019\u4f60\u9700\u8981\u5bf9submodule\u505a\u4e00\u4e9b\u4fee\u6539\uff0c\u5f88\u5e38\u89c1\u7684\u505a\u6cd5\u5c31\u662f\u5207\u5230submodule\u7684\u76ee\u5f55\uff0c\u7136\u540e\u505a\u4fee\u6539\uff0c\u7136\u540ecommit\u548cpush\u3002 \u8fd9\u91cc\u7684\u5751\u5728\u4e8e\uff0c\u9ed8\u8ba4git submodule update\u5e76\u4e0d\u4f1a\u5c06submodule\u5207\u5230\u4efb\u4f55branch\uff0c\u6240\u4ee5\uff0c\u9ed8\u8ba4\u4e0bsubmodule\u7684HEAD\u662f\u5904\u4e8e\u6e38\u79bb\u72b6\u6001\u7684(\u2018detached HEAD\u2019 state)\u3002\u6240\u4ee5\u5728\u4fee\u6539\u524d\uff0c\u8bb0\u5f97\u4e00\u5b9a\u8981\u7528git checkout master\u5c06\u5f53\u524d\u7684submodule\u5206\u652f\u5207\u6362\u5230master\uff0c\u7136\u540e\u624d\u80fd\u505a\u4fee\u6539\u548c\u63d0\u4ea4\u3002","title":"Git submodule update"},{"location":"versions/git_oper/#git-submodulesubmodule","text":"git submodule foreach git submodule update #\u9012\u5f52\u66f4\u65b0 git submodule update --init --recursive # \u5220\u9664submodule git submodule deinit path_to_submodule-name git rm --cached path_to_submodule rm -rf .git/modules/ path_to_submodule","title":"git submodule\u4e0b\u8fd8\u6709submodule"},{"location":"versions/git_oper/#git-clean","text":"# \u5220\u9664 untracked files git clean -f # \u8fde untracked \u7684\u76ee\u5f55\u4e5f\u4e00\u8d77\u5220\u6389 git clean -fd # \u8fde gitignore \u7684untrack \u6587\u4ef6/\u76ee\u5f55\u4e5f\u4e00\u8d77\u5220\u6389 \uff08\u614e\u7528\uff0c\u4e00\u822c\u8fd9\u4e2a\u662f\u7528\u6765\u5220\u6389\u7f16\u8bd1\u51fa\u6765\u7684 .o\u4e4b\u7c7b\u7684\u6587\u4ef6\u7528\u7684\uff09 git clean -xfd # \u5728\u7528\u4e0a\u8ff0 git clean \u524d\uff0c\u5899\u88c2\u5efa\u8bae\u52a0\u4e0a -n \u53c2\u6570\u6765\u5148\u770b\u770b\u4f1a\u5220\u6389\u54ea\u4e9b\u6587\u4ef6\uff0c\u9632\u6b62\u91cd\u8981\u6587\u4ef6\u88ab\u8bef\u5220 git clean -nxfd git clean -nf git clean -nfds","title":"Git clean"},{"location":"versions/git_oper/#_7","text":"git push origin local_branch:remote_branch","title":"\u63a8\u9001\u5230\u8fdc\u7a0b\u5206\u652f"},{"location":"versions/git_oper/#_8","text":"","title":"\u64cd\u4f5c\u5e8f\u5217\u9644\u52a0\u6307\u4ee4"},{"location":"versions/git_oper/#-continue","text":"Continue the operation in progress using the information in .git/sequencer. Can be used to continue after resolving conflicts in a failed cherry-pick or revert.","title":"--continue"},{"location":"versions/git_oper/#-quit","text":"Forget about the current operation in progress. Can be used to clear the sequencer state after a failed cherry-pick or revert.","title":"--quit"},{"location":"versions/git_oper/#-abort","text":"Cancel the operation and return to the pre-sequence state.","title":"--abort"},{"location":"versions/git_remark/","text":"Git \u5907\u5fd8\u5f55 \u4e0b\u9762\u662f\u4e00\u5f20\u5e38\u7528\u547d\u4ee4\u7684\u56fe\u89e3 \u53eacheckout\u90e8\u5206git\u6587\u4ef6 git remote add -f origin url git config core.sparsecheckout true echo sublime_windows .git/info/sparse-checkout echo sublime_linux .git/info/sparse-checkout \u63a8\u9001git\u9879\u76ee\u5230\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93 \u5982\u679c\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86ssh\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u5728\u5f00\u6e90\u4e2d\u56fd\u7684git\u6258\u7ba1\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a\u7684key\uff0c\u7136\u540e\u6253\u5f00github\u9879\u76ee\u4e2d\u4e2d\u7684.git/config\u6587\u4ef6 \u5728[remote origin ]\u8282\u70b9\u7684\u539f\u59cburl\u4e0b\u9762\u76f4\u63a5\u6dfb\u52a0\u5f00\u6e90\u4e2d\u56fdgit\u4e2d\u5bf9\u5e94\u9879\u76ee\u7684ssh\u5730\u5740\u5373\u53ef\uff0c\u4f8b\u5982\uff1a [remote origin ] url = git@github.com:codepiano/pull-all-git-project.git url = git@git.oschina.net:codepiano/pull-all-git-project.git fetch = +refs/heads/*:refs/remotes/origin/* \u5f53\u7136\uff0c\u4f7f\u7528\u547d\u4ee4\u884c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0\uff0c\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a git remote set-url --add origin git@git.oschina.net:codepiano/pull-all-git-project.git \u634b\u634b\u8fd9\u4e9b\u914d\u7f6e .gitconfig git\u7684\u5168\u5c40\u914d\u7f6e\u6587\u4ef6. [ user ] email = xxx@gmail.com name = xxx [push] default = simple [credential] helper = store .git-credentials \u8fd9\u4e2a\u4e5f\u662fgit\u7684push\u65f6\u4e0d\u7528\u591a\u6b21\u8f93\u5165\u5bc6\u7801\u7684\u914d\u7f6e. \u5b98\u65b9\u8bf4\u660e: https://git-scm.com/docs/git-credential-store \u5148\u5c06credential\u914d\u7f6e\u5230git\u5168\u5c40\u914d\u7f6e git config --global credential.helper store \u5728 %HOME% \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a .git-credentials \u8f93\u5165 https://username@gmail.com:pwd@git.coding.net _netrc _netrc\u8fd9\u4e2a\u914d\u7f6e\u662f\u7528\u6765\u81ea\u52a8\u5316ftp\u4e0a\u4f20\u4e0b\u8f7d\u7684. \u8bf4\u660e: http://www.mavetju.org/unix/netrc.php .\u9700\u8981600\u6743\u9650 chmod 600 .netrc. \u4e00\u822c\u53ea\u8981\u7528machine\u6bb5\u5c31\u53ef\u4ee5\u4e86.\u5e38\u7528\u4ed3\u5e93\u5982\u4e0b\u914d\u7f6e\u5728push\u65f6\u4e0d\u7528\u518d\u8f93\u5165\u5bc6\u7801. machine github.com login username password password machine bitbucket.org login username password password machine gitcafe.com login username password password known_hosts ssh\u4f1a\u628a\u4f60\u6bcf\u4e2a\u4f60\u8bbf\u95ee\u8fc7\u8ba1\u7b97\u673a\u7684\u516c\u94a5(public key)\u90fd\u8bb0\u5f55\u5728~/.ssh/known_hosts.\u5f53\u4e0b\u6b21\u8bbf\u95ee\u76f8\u540c\u8ba1\u7b97\u673a\u65f6,openssh\u4f1a\u6838\u5bf9\u516c\u94a5. github.com,192.30.252.128 ssh-rsa xxx(key) git.coding.net,61.179.108.67 ssh-rsa xxx(key) \u540c\u4e00\u53f0\u7535\u8111\u67092\u4e2agithub\u8d26\u53f7 \u6bd4\u5982\u6211\u670d\u52a1\u5668\u4e0a\u6a21\u62df\u76842\u4e2a\u7528\u6237 #monkeysuzie@gmail.com \u6211\u5728gitlab\u7684\u7b2c\u4e00\u4e2a\u8d26\u53f7suzie host gitlab.zjut.com hostname gitlab.zjut.com Port 65095 User suzie IdentityFile /home/suzie/.ssh/id_rsa # \u6211\u5728gitlab\u7684\u7b2c2\u4e2a\u8d26\u53f7test host gitlab-test.zjut.com hostname gitlab.zjut.com Port 65095 User test IdentityFile /home/suzie/.ssh/id_rsa_second #837368104@qq.com \u6211\u5728github\u7684\u8d26\u53f7 host github-osteach.com hostname github.com Port 22 User osteach IdentityFile /home/suzie/.ssh/id_rsa_second \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u51e0\u70b9\u6ce8\u610f 1.remote pull push\u7684\u65f6\u5019\u6709\u95ee\u9898\uff0c\u56e0\u4e3a\u8981\u8bbe\u7f6e\u90ae\u7bb1\u95ee\u9898\u4e86 pull\u7684\u65f6\u5019\u8bc6\u522b\u7684\u662f\u90ae\u7bb1\uff0c2\u4e2agithub\u8d26\u53f7\uff0c2\u4e2a\u90ae\u7bb1\uff0c\u6211\u4eec\u81ea\u7136\u4e0d\u80fd\u4f7f\u7528global\u7684user.email\u4e86 \u53d6\u6d88global git config --global --unset user.name git config --global --unset user.email 2.\u8bbe\u7f6e\u6bcf\u4e2a\u9879\u76eerepo\u7684\u81ea\u5df1\u7684user.email git config user.email xxxx@xx.com git config user.name suzie \u4e4b\u540epush pull\u5c31\u6728\u6709\u95ee\u9898\u4e86 git\u5de5\u4f5c\u6d41 \u5de5\u4f5c\u6d41 #\u63d0\u4ea4\u6d41\u7a0b git stash git pull -r git stash pop #\u89e3\u51b3\u51b2\u7a81 git commit -m xxx git push #\u5982\u679ccommit\u4e4b\u540epush\u53d1\u73b0\u6709\u4eba\u63d0\u4ea4 git reset --soft HEAD^ git pull -r \u5de5\u4f5c\u6d41\u4e8c git commit git pull -r \u89e3\u51b3\u51b2\u7a81 git pull -r git push \u5de5\u4f5c\u6d41\u4e09 1 .git pull -r 2 .A\u672c\u5730\u4fee\u6539\u51b2\u7a81\u7684\u8bddgit stash\uff0cB\u5df2\u7ecfcommit\u7684\u4fee\u6539\u51b2\u7a81git mergetool 3 .A\u518d\u6b21.git pull -r 4 .A git stash pop stash { 0 } 5 .A \u6709\u51b2\u7a81\u518d\u5408\u5e76git mergetool git \u88abpush -r \u4e22\u5931\u65e5\u5fd7 git reflog git log -g git cherry-pick commit_id #https://www.borfast.com/blog/2014/10/19/how-to-undo-a-git-push---force-and-undelete-things/ \u914d\u7f6e\u7981\u6b62 git push -r git config --global receive.denyNonFastForwards true \u4e0dcommit\u60c5\u51b5\u4e0bpull git stash git pull git stash pop git stash drop stash { 1 } git stash clear git stash clear \u540e\u6062\u590d git fsck --lost-found git show 8dd73fa8d14880182f11e24dc10bca570b6127d7 git merge 8dd73fa8d14880182f11e24dc10bca570b6127d7","title":"git\u5e94\u7528\u573a\u666f"},{"location":"versions/git_remark/#git","text":"","title":"Git \u5907\u5fd8\u5f55"},{"location":"versions/git_remark/#_1","text":"","title":"\u4e0b\u9762\u662f\u4e00\u5f20\u5e38\u7528\u547d\u4ee4\u7684\u56fe\u89e3"},{"location":"versions/git_remark/#checkoutgit","text":"git remote add -f origin url git config core.sparsecheckout true echo sublime_windows .git/info/sparse-checkout echo sublime_linux .git/info/sparse-checkout","title":"\u53eacheckout\u90e8\u5206git\u6587\u4ef6"},{"location":"versions/git_remark/#git_1","text":"\u5982\u679c\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86ssh\u9a8c\u8bc1\u65b9\u5f0f\uff0c\u5728\u5f00\u6e90\u4e2d\u56fd\u7684git\u6258\u7ba1\u4e5f\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4e2a\u7684key\uff0c\u7136\u540e\u6253\u5f00github\u9879\u76ee\u4e2d\u4e2d\u7684.git/config\u6587\u4ef6 \u5728[remote origin ]\u8282\u70b9\u7684\u539f\u59cburl\u4e0b\u9762\u76f4\u63a5\u6dfb\u52a0\u5f00\u6e90\u4e2d\u56fdgit\u4e2d\u5bf9\u5e94\u9879\u76ee\u7684ssh\u5730\u5740\u5373\u53ef\uff0c\u4f8b\u5982\uff1a [remote origin ] url = git@github.com:codepiano/pull-all-git-project.git url = git@git.oschina.net:codepiano/pull-all-git-project.git fetch = +refs/heads/*:refs/remotes/origin/* \u5f53\u7136\uff0c\u4f7f\u7528\u547d\u4ee4\u884c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0\uff0c\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a git remote set-url --add origin git@git.oschina.net:codepiano/pull-all-git-project.git","title":"\u63a8\u9001git\u9879\u76ee\u5230\u591a\u4e2a\u8fdc\u7a0b\u4ed3\u5e93"},{"location":"versions/git_remark/#_2","text":"","title":"\u634b\u634b\u8fd9\u4e9b\u914d\u7f6e"},{"location":"versions/git_remark/#gitconfig","text":"git\u7684\u5168\u5c40\u914d\u7f6e\u6587\u4ef6. [ user ] email = xxx@gmail.com name = xxx [push] default = simple [credential] helper = store","title":".gitconfig"},{"location":"versions/git_remark/#git-credentials","text":"\u8fd9\u4e2a\u4e5f\u662fgit\u7684push\u65f6\u4e0d\u7528\u591a\u6b21\u8f93\u5165\u5bc6\u7801\u7684\u914d\u7f6e. \u5b98\u65b9\u8bf4\u660e: https://git-scm.com/docs/git-credential-store \u5148\u5c06credential\u914d\u7f6e\u5230git\u5168\u5c40\u914d\u7f6e git config --global credential.helper store \u5728 %HOME% \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a .git-credentials \u8f93\u5165 https://username@gmail.com:pwd@git.coding.net","title":".git-credentials"},{"location":"versions/git_remark/#_netrc","text":"_netrc\u8fd9\u4e2a\u914d\u7f6e\u662f\u7528\u6765\u81ea\u52a8\u5316ftp\u4e0a\u4f20\u4e0b\u8f7d\u7684. \u8bf4\u660e: http://www.mavetju.org/unix/netrc.php .\u9700\u8981600\u6743\u9650 chmod 600 .netrc. \u4e00\u822c\u53ea\u8981\u7528machine\u6bb5\u5c31\u53ef\u4ee5\u4e86.\u5e38\u7528\u4ed3\u5e93\u5982\u4e0b\u914d\u7f6e\u5728push\u65f6\u4e0d\u7528\u518d\u8f93\u5165\u5bc6\u7801. machine github.com login username password password machine bitbucket.org login username password password machine gitcafe.com login username password password","title":"_netrc"},{"location":"versions/git_remark/#known_hosts","text":"ssh\u4f1a\u628a\u4f60\u6bcf\u4e2a\u4f60\u8bbf\u95ee\u8fc7\u8ba1\u7b97\u673a\u7684\u516c\u94a5(public key)\u90fd\u8bb0\u5f55\u5728~/.ssh/known_hosts.\u5f53\u4e0b\u6b21\u8bbf\u95ee\u76f8\u540c\u8ba1\u7b97\u673a\u65f6,openssh\u4f1a\u6838\u5bf9\u516c\u94a5. github.com,192.30.252.128 ssh-rsa xxx(key) git.coding.net,61.179.108.67 ssh-rsa xxx(key)","title":"known_hosts"},{"location":"versions/git_remark/#2github","text":"\u6bd4\u5982\u6211\u670d\u52a1\u5668\u4e0a\u6a21\u62df\u76842\u4e2a\u7528\u6237 #monkeysuzie@gmail.com \u6211\u5728gitlab\u7684\u7b2c\u4e00\u4e2a\u8d26\u53f7suzie host gitlab.zjut.com hostname gitlab.zjut.com Port 65095 User suzie IdentityFile /home/suzie/.ssh/id_rsa # \u6211\u5728gitlab\u7684\u7b2c2\u4e2a\u8d26\u53f7test host gitlab-test.zjut.com hostname gitlab.zjut.com Port 65095 User test IdentityFile /home/suzie/.ssh/id_rsa_second #837368104@qq.com \u6211\u5728github\u7684\u8d26\u53f7 host github-osteach.com hostname github.com Port 22 User osteach IdentityFile /home/suzie/.ssh/id_rsa_second \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u51e0\u70b9\u6ce8\u610f 1.remote pull push\u7684\u65f6\u5019\u6709\u95ee\u9898\uff0c\u56e0\u4e3a\u8981\u8bbe\u7f6e\u90ae\u7bb1\u95ee\u9898\u4e86 pull\u7684\u65f6\u5019\u8bc6\u522b\u7684\u662f\u90ae\u7bb1\uff0c2\u4e2agithub\u8d26\u53f7\uff0c2\u4e2a\u90ae\u7bb1\uff0c\u6211\u4eec\u81ea\u7136\u4e0d\u80fd\u4f7f\u7528global\u7684user.email\u4e86 \u53d6\u6d88global git config --global --unset user.name git config --global --unset user.email 2.\u8bbe\u7f6e\u6bcf\u4e2a\u9879\u76eerepo\u7684\u81ea\u5df1\u7684user.email git config user.email xxxx@xx.com git config user.name suzie \u4e4b\u540epush pull\u5c31\u6728\u6709\u95ee\u9898\u4e86","title":"\u540c\u4e00\u53f0\u7535\u8111\u67092\u4e2agithub\u8d26\u53f7"},{"location":"versions/git_remark/#git_2","text":"","title":"git\u5de5\u4f5c\u6d41"},{"location":"versions/git_remark/#_3","text":"#\u63d0\u4ea4\u6d41\u7a0b git stash git pull -r git stash pop #\u89e3\u51b3\u51b2\u7a81 git commit -m xxx git push #\u5982\u679ccommit\u4e4b\u540epush\u53d1\u73b0\u6709\u4eba\u63d0\u4ea4 git reset --soft HEAD^ git pull -r","title":"\u5de5\u4f5c\u6d41"},{"location":"versions/git_remark/#_4","text":"git commit git pull -r \u89e3\u51b3\u51b2\u7a81 git pull -r git push","title":"\u5de5\u4f5c\u6d41\u4e8c"},{"location":"versions/git_remark/#_5","text":"1 .git pull -r 2 .A\u672c\u5730\u4fee\u6539\u51b2\u7a81\u7684\u8bddgit stash\uff0cB\u5df2\u7ecfcommit\u7684\u4fee\u6539\u51b2\u7a81git mergetool 3 .A\u518d\u6b21.git pull -r 4 .A git stash pop stash { 0 } 5 .A \u6709\u51b2\u7a81\u518d\u5408\u5e76git mergetool","title":"\u5de5\u4f5c\u6d41\u4e09"},{"location":"versions/git_remark/#git-push-r","text":"git reflog git log -g git cherry-pick commit_id #https://www.borfast.com/blog/2014/10/19/how-to-undo-a-git-push---force-and-undelete-things/","title":"git \u88abpush -r \u4e22\u5931\u65e5\u5fd7"},{"location":"versions/git_remark/#git-push-r_1","text":"git config --global receive.denyNonFastForwards true","title":"\u914d\u7f6e\u7981\u6b62 git push -r"},{"location":"versions/git_remark/#commitpull","text":"git stash git pull git stash pop git stash drop stash { 1 } git stash clear","title":"\u4e0dcommit\u60c5\u51b5\u4e0bpull"},{"location":"versions/git_remark/#git-stash-clear","text":"git fsck --lost-found git show 8dd73fa8d14880182f11e24dc10bca570b6127d7 git merge 8dd73fa8d14880182f11e24dc10bca570b6127d7","title":"git stash clear \u540e\u6062\u590d"},{"location":"versions/git_tools/","text":"git \u5de5\u5177 \u5de5\u5177 GitHub Desktop Platforms: Windows, Mac Price: Free Tower Platforms : Windows, Mac Price : $79/user (Free 30 day trial) GitX-dev Platforms: Mac Price: Free Gitbox Platforms: Windows, Mac Price: $14.99 SourceTree Platforms: Windows Price: Free Git Extensions Platforms: Windows, Mac Price: Free SmartGit Platforms: Windows, Mac, Linux Price: $79/user / Free for non-commercial use git-cola Platforms: Windows, Mac, Linux Price: Free GitUp Platforms: Mac Price: Free GitEye Platforms: Windows, Mac, Linux Price: Free giggle Platforms: linux Price: Free gitg Platforms: Linux Price: Free GitKraken Platforms: Windows, Mac, Linux Price: Free Aurees Platforms: Windows Price: $69.99/user / Free for non-commercial use Fork Platforms: Mac Price: Free Windows Mac Linux gitk gitk \u662f\u4e00\u4e2a\u5386\u53f2\u8bb0\u5f55\u7684\u56fe\u5f62\u5316\u67e5\u770b\u5668\u3002 \u4f60\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c\u662f\u57fa\u4e8e git log \u548c git grep \u547d\u4ee4\u7684\u4e00\u4e2a\u5f3a\u5927\u7684\u56fe\u5f62\u64cd\u4f5c\u754c\u9762\u3002 \u5f53\u4f60\u9700\u8981\u67e5\u627e\u8fc7\u53bb\u53d1\u751f\u7684\u67d0\u6b21\u8bb0\u5f55\uff0c\u6216\u662f\u53ef\u89c6\u5316\u67e5\u770b\u9879\u76ee\u5386\u53f2\u7684\u65f6\u5019\uff0c\u4f60\u5c06\u4f1a\u7528\u5230\u8fd9\u4e2a\u5de5\u5177\u3002 GitStats GitStats \u662f\u4e00\u4e2agit\u4ed3\u5e93\u72b6\u6001\u5206\u6790\u5de5\u5177,\u4ee3\u7801\u884c\u6570,\u63d0\u4ea4\u8005\u5404\u81ea\u8d21\u732e\u4fe1\u606f ubuntu\u5408\u5e76\u5bf9\u6bd4\u5de5\u5177 #\u5b89\u88c5meld sudo apt-get install meld \u7f16\u8f91 ~/.gitconfig [ difftool ] prompt = false [ mergetool ] prompt = false [ diff ] tool = meld [ merge ] tool = meld \u4f7f\u7528 git difftool \u6587\u4ef6\u540d git megretool \u63d2\u4ef6 Eclipse EGit http://blog.csdn.net/luckarecs/article/details/7427605 https://git.wiki.kernel.org/index.php/Interfaces,_frontends,_and_tools#Graphical_Interfaces","title":"git\u5de5\u5177"},{"location":"versions/git_tools/#git","text":"","title":"git \u5de5\u5177"},{"location":"versions/git_tools/#_1","text":"","title":"\u5de5\u5177"},{"location":"versions/git_tools/#github-desktop","text":"Platforms: Windows, Mac Price: Free","title":"GitHub Desktop"},{"location":"versions/git_tools/#tower","text":"Platforms : Windows, Mac Price : $79/user (Free 30 day trial)","title":"Tower"},{"location":"versions/git_tools/#gitx-dev","text":"Platforms: Mac Price: Free","title":"GitX-dev"},{"location":"versions/git_tools/#gitbox","text":"Platforms: Windows, Mac Price: $14.99","title":"Gitbox"},{"location":"versions/git_tools/#sourcetree","text":"Platforms: Windows Price: Free","title":"SourceTree"},{"location":"versions/git_tools/#git-extensions","text":"Platforms: Windows, Mac Price: Free","title":"Git Extensions"},{"location":"versions/git_tools/#smartgit","text":"Platforms: Windows, Mac, Linux Price: $79/user / Free for non-commercial use","title":"SmartGit"},{"location":"versions/git_tools/#git-cola","text":"Platforms: Windows, Mac, Linux Price: Free","title":"git-cola"},{"location":"versions/git_tools/#gitup","text":"Platforms: Mac Price: Free","title":"GitUp"},{"location":"versions/git_tools/#giteye","text":"Platforms: Windows, Mac, Linux Price: Free","title":"GitEye"},{"location":"versions/git_tools/#giggle","text":"Platforms: linux Price: Free","title":"giggle"},{"location":"versions/git_tools/#gitg","text":"Platforms: Linux Price: Free","title":"gitg"},{"location":"versions/git_tools/#gitkraken","text":"Platforms: Windows, Mac, Linux Price: Free","title":"GitKraken"},{"location":"versions/git_tools/#aurees","text":"Platforms: Windows Price: $69.99/user / Free for non-commercial use","title":"Aurees"},{"location":"versions/git_tools/#fork","text":"Platforms: Mac Price: Free","title":"Fork"},{"location":"versions/git_tools/#windows","text":"","title":"Windows"},{"location":"versions/git_tools/#mac","text":"","title":"Mac"},{"location":"versions/git_tools/#linux","text":"","title":"Linux"},{"location":"versions/git_tools/#gitk","text":"gitk \u662f\u4e00\u4e2a\u5386\u53f2\u8bb0\u5f55\u7684\u56fe\u5f62\u5316\u67e5\u770b\u5668\u3002 \u4f60\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c\u662f\u57fa\u4e8e git log \u548c git grep \u547d\u4ee4\u7684\u4e00\u4e2a\u5f3a\u5927\u7684\u56fe\u5f62\u64cd\u4f5c\u754c\u9762\u3002 \u5f53\u4f60\u9700\u8981\u67e5\u627e\u8fc7\u53bb\u53d1\u751f\u7684\u67d0\u6b21\u8bb0\u5f55\uff0c\u6216\u662f\u53ef\u89c6\u5316\u67e5\u770b\u9879\u76ee\u5386\u53f2\u7684\u65f6\u5019\uff0c\u4f60\u5c06\u4f1a\u7528\u5230\u8fd9\u4e2a\u5de5\u5177\u3002","title":"gitk"},{"location":"versions/git_tools/#gitstats","text":"GitStats \u662f\u4e00\u4e2agit\u4ed3\u5e93\u72b6\u6001\u5206\u6790\u5de5\u5177,\u4ee3\u7801\u884c\u6570,\u63d0\u4ea4\u8005\u5404\u81ea\u8d21\u732e\u4fe1\u606f","title":"GitStats"},{"location":"versions/git_tools/#ubuntu","text":"#\u5b89\u88c5meld sudo apt-get install meld \u7f16\u8f91 ~/.gitconfig [ difftool ] prompt = false [ mergetool ] prompt = false [ diff ] tool = meld [ merge ] tool = meld \u4f7f\u7528 git difftool \u6587\u4ef6\u540d git megretool","title":"ubuntu\u5408\u5e76\u5bf9\u6bd4\u5de5\u5177"},{"location":"versions/git_tools/#_2","text":"","title":"\u63d2\u4ef6"},{"location":"versions/git_tools/#eclipse-egit","text":"http://blog.csdn.net/luckarecs/article/details/7427605 https://git.wiki.kernel.org/index.php/Interfaces,_frontends,_and_tools#Graphical_Interfaces","title":"Eclipse EGit"},{"location":"versions/github/","text":"github \u64cd\u4f5c \u8f6c\u81ea: https://github.com/tiimgreen/github-cheat-sheet GitHub\u79d8\u7c4d Git \u548c Github \u79d8\u7c4d\uff0c\u7075\u611f\u6765\u81ea\u4e8e Zach Holman \u5728 2012 \u5e74 Aloha Ruby Conference \u548c 2013 \u5e74 WDCNZ \u4e0a\u6240\u505a\u7684\u6f14\u8bb2\uff1a Git and GitHub Secrets ( slides ) \u548c More Git and GitHub Secrets ( slides )\u3002 \u76ee\u5f55 GitHub \u4e0d\u6bd4\u8f83\u7a7a\u767d\u5b57\u7b26 \u8c03\u6574 Tab \u5b57\u7b26\u6240\u4ee3\u8868\u7684\u7a7a\u683c\u6570 \u67e5\u770b\u67d0\u4e2a\u7528\u6237\u7684 Commit \u5386\u53f2 \u4ed3\u5e93\u514b\u9686 \u5206\u652f \u5c06\u67d0\u4e2a\u5206\u652f\u4e0e\u5176\u4ed6\u6240\u6709\u5206\u652f\u8fdb\u884c\u5bf9\u6bd4 \u6bd4\u8f83\u5206\u652f \u6bd4\u8f83\u4e0d\u540c\u6d3e\u751f\u5e93\u7684\u5206\u652f Gists Git.io \u952e\u76d8\u5feb\u6377\u952e \u6574\u884c\u9ad8\u4eae \u7528 Commit \u4fe1\u606f\u5173\u95ed Issue \u94fe\u63a5\u5176\u4ed6\u4ed3\u5e93\u7684 Issue \u9501\u5b9a\u9879\u76ee\u5bf9\u8bdd\u529f\u80fd \u8bbe\u7f6e CI \u5bf9\u6bcf\u6761 Pull Request \u90fd\u8fdb\u884c\u6784\u5efa Markdown \u6587\u4ef6\u8bed\u6cd5\u9ad8\u4eae \u8868\u60c5\u7b26 \u56fe\u7247 / GIF \u52a8\u753b \u5728 GitHub Wiki \u4e2d\u5f15\u7528\u56fe\u7247 \u5feb\u901f\u5f15\u7528 \u7c98\u8d34\u526a\u8d34\u677f\u4e2d\u7684\u56fe\u7247\u5230\u8bc4\u8bba \u5feb\u901f\u6dfb\u52a0\u8bb8\u53ef\u8bc1\u6587\u4ef6 \u4efb\u52a1\u5217\u8868 Markdown \u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u5217\u8868 \u76f8\u5bf9\u94fe\u63a5 GitHub Pages \u7684\u5143\u6570\u636e\u4e0e\u63d2\u4ef6\u652f\u6301 \u67e5\u770b YAML \u683c\u5f0f\u7684\u5143\u6570\u636e \u6e32\u67d3\u8868\u683c\u6570\u636e \u64a4\u9500 Pull Request Diffs \u53ef\u6e32\u67d3\u6587\u6863\u7684Diffs \u53ef\u6bd4\u8f83\u7684\u5730\u56fe\u6570\u636e \u5728 Diff \u4e2d\u5c55\u5f00\u67e5\u770b\u66f4\u591a\u7684\u4e0a\u4e0b\u6587 \u83b7\u53d6 Pull Request \u7684 diff \u6216 patch \u6587\u4ef6 \u663e\u793a\u56fe\u7247\u4ee5\u53ca\u6bd4\u8f83\u56fe\u7247 Hub \u8d21\u732e\u8005\u6307\u5357 Octicons GitHub \u8d44\u6e90 GitHub \u76f8\u5173\u6f14\u8bb2\u89c6\u9891 Git \u4ece\u5de5\u4f5c\u533a\u53bb\u9664\u5927\u91cf\u5df2\u5220\u9664\u6587\u4ef6 \u4e0a\u4e00\u4e2a\u5206\u652f \u53bb\u9664\u7a7a\u767d \u68c0\u51fa Pull Requests \u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u63d0\u4ea4 \u7f8e\u5316 Git Status \u7f8e\u5316 Git Log Git \u67e5\u8be2 \u5408\u5e76\u5206\u652f \u4fee\u590d\u6709\u95ee\u9898\u7684\u63d0\u4ea4\u4ee5\u53ca\u81ea\u52a8\u5408\u5e76 \u4ee5\u7f51\u7ad9\u65b9\u5f0f\u67e5\u770b\u672c\u5730\u4ed3\u5e93 Git \u914d\u7f6e Git \u547d\u4ee4\u81ea\u5b9a\u4e49\u522b\u540d \u81ea\u52a8\u66f4\u6b63 \u989c\u8272\u8f93\u51fa Git \u8d44\u6e90 Git \u53c2\u8003\u4e66\u7c4d GitHub \u5feb\u901f\u94fe\u63a5GitHub \u4e0d\u6bd4\u8f83\u7a7a\u767d\u5b57\u7b26 \u5728\u4efb\u610f diff \u9875\u9762\u7684 UR L\u540e\u52a0\u4e0a ?w=1 \uff0c\u53ef\u4ee5\u53bb\u6389\u90a3\u4e9b\u53ea\u662f\u7a7a\u767d\u5b57\u7b26\u7684\u6539\u52a8\uff0c\u4f7f\u4f60\u80fd\u66f4\u4e13\u6ce8\u4e8e\u4ee3\u7801\u6539\u52a8\u3002 \u8be6\u89c1 GitHub secrets. \u8c03\u6574 Tab \u5b57\u7b26\u6240\u4ee3\u8868\u7684\u7a7a\u683c\u6570 \u5728 diff \u6216\u6587\u4ef6\u7684 URL \u540e\u9762\u52a0\u4e0a ?ts=4 \uff0c\u8fd9\u6837\u5f53\u663e\u793a tab \u5b57\u7b26\u7684\u957f\u5ea6\u65f6\u5c31\u4f1a\u662f 4 \u4e2a\u7a7a\u683c\u7684\u957f\u5ea6\uff0c\u4e0d\u518d\u662f\u9ed8\u8ba4\u7684 8 \u4e2a\u7a7a\u683c\u3002 ts \u540e\u9762\u7684\u6570\u5b57\u8fd8\u53ef\u4ee5\u6839\u636e\u4f60\u4e2a\u4eba\u7684\u504f\u597d\u8fdb\u884c\u4fee\u6539\u3002\u8fd9\u4e2a\u6280\u5de7\u4e0d\u9002\u7528\u4e8e Gists\uff0c\u6216\u8005\u4ee5 Raw \u683c\u5f0f\u67e5\u770b\u6587\u4ef6\uff0c \u4f46\u6709\u6d4f\u89c8\u5668\u6269\u5c55\u63d2\u4ef6\u53ef\u4ee5\u5e2e\u4f60\u81ea\u52a8\u8c03\u6574: Chrome \u6269\u5c55 \uff0c Opera \u6269\u5c55 \u3002 \u4e0b\u9762\u4ee5\u4e00\u4e2a Go \u8bed\u8a00\u6e90\u6587\u4ef6\u4e3a\u4f8b\uff0c\u770b\u770b\u5728 URL \u91cc\u6dfb\u52a0 ?ts=4 \u53c2\u6570\u7684\u6548\u679c\u3002\u6dfb\u52a0\u524d\uff1a ... \u6dfb\u52a0\u540e\u7684\u6837\u5b50\uff1a \u67e5\u770b\u7528\u6237\u7684\u5168\u90e8 Commit \u5386\u53f2 \u5728 Commits \u9875\u9762 URL \u540e\u52a0\u4e0a ?author={user} \u67e5\u770b\u7528\u6237\u5168\u90e8\u7684\u63d0\u4ea4\u3002 https://github.com/rails/rails/commits/master?author=dhh \u6df1\u5165\u4e86\u89e3\u63d0\u4ea4\u89c6\u56fe\u4e4b\u95f4\u7684\u533a\u522b \u4ed3\u5e93\u514b\u9686 \u5f53\u514b\u9686\u4ed3\u5e93\u65f6\u53ef\u4ee5\u4e0d\u8981\u90a3\u4e2a .git \u540e\u7f00\u3002 $ git clone https://github.com/tiimgreen/github-cheat-sheet \u66f4\u591a\u5bf9 Git clone \u547d\u4ee4\u7684\u4ecb\u7ecd. \u5206\u652f \u5c06\u67d0\u4e2a\u5206\u652f\u4e0e\u5176\u4ed6\u6240\u6709\u5206\u652f\u8fdb\u884c\u5bf9\u6bd4 \u5f53\u4f60\u67e5\u770b\u67d0\u4e2a\u4ed3\u5e93\u7684\u5206\u652f\uff08Branches\uff09\u9875\u9762\uff08\u7d27\u6328\u7740 Commits \u94fe\u63a5\uff09\u65f6 https://github.com/{user}/{repo}/branches \u4f60\u4f1a\u770b\u5230\u4e00\u4e2a\u5305\u542b\u6240\u6709\u672a\u5408\u5e76\u7684\u5206\u652f\u7684\u5217\u8868\u3002 \u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u8bbf\u95ee\u5206\u652f\u6bd4\u8f83\u9875\u9762\u6216\u5220\u9664\u67d0\u4e2a\u5206\u652f\u3002 \u6bd4\u8f83\u5206\u652f \u5982\u679c\u8981\u5728 GitHub \u4e0a\u76f4\u63a5\u6bd4\u8f83\u4e24\u4e2a\u5206\u652f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u5f62\u5f0f\u7684 URL \uff1a https://github.com/{user}/{repo}/compare/{range} \u5176\u4e2d {range} = master...4-1-stable \u4f8b\u5982\uff1a https://github.com/rails/rails/compare/master...4-1-stable {range} \u53c2\u6570\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u5f62\u5f0f: https://github.com/rails/rails/compare/master@{1.day.ago}...master https://github.com/rails/rails/compare/master@{2014-10-04}...master \u65e5\u671f\u683c\u5f0f YYYY-MM-DD \u5728 diff \u548c patch \u9875\u9762\u91cc\u4e5f\u53ef\u4ee5\u6bd4\u8f83\u5206\u652f\uff1a https://github.com/rails/rails/compare/master...4-1-stable.diff https://github.com/rails/rails/compare/master...4-1-stable.patch \u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u57fa\u4e8e\u65f6\u95f4\u7684 Commit \u6bd4\u8f83. \u6bd4\u8f83\u4e0d\u540c\u6d3e\u751f\u5e93\u7684\u5206\u652f \u60f3\u8981\u5bf9\u6d3e\u751f\u4ed3\u5e93\uff08Forked Repository\uff09\u4e4b\u95f4\u7684\u5206\u652f\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u7684 URL\uff1a https://github.com/user/repo/compare/{foreign-user}:{branch}...{own-branch} \u4f8b\u5982\uff1a https://github.com/rails/rails/compare/byroot:master...master Gists Gists \u65b9\u4fbf\u6211\u4eec\u7ba1\u7406\u4ee3\u7801\u7247\u6bb5\uff0c\u4e0d\u5fc5\u4f7f\u7528\u529f\u80fd\u9f50\u5168\u7684\u4ed3\u5e93\u3002 Gist \u7684 URL \u540e\u52a0\u4e0a .pibb \uff08 \u50cf\u8fd9\u6837 \uff09\u53ef\u4ee5\u5f97\u5230\u4fbf\u4e8e\u5d4c\u5165\u5230\u5176\u4ed6\u7f51\u7ad9 \u7684 HTML \u4ee3\u7801\u3002 Gists \u53ef\u4ee5\u50cf\u4efb\u4f55\u6807\u51c6\u4ed3\u5e93\u4e00\u6837\u88ab\u514b\u9686\u3002 $ git clone https://gist.github.com/tiimgreen/10545817 \u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u50cf Github \u4ed3\u5e93\u4e00\u6837\u4fee\u6539\u548c\u66f4\u65b0 Gists : $ git commit $ git push Username for https://gist.github.com : Password for https://tiimgreen@gist.github.com : \u4f46\u662f\uff0c Gists \u4e0d\u652f\u6301\u76ee\u5f55\u3002\u6240\u6709\u6587\u4ef6\u90fd\u5fc5\u987b\u6dfb\u52a0\u5728\u4ed3\u5e93\u7684\u6839\u76ee\u5f55\u4e0b\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5982\u4f55\u521b\u5efa Gists. Git.io Git.io \u662f Github \u7684\u77ed\u7f51\u5740\u670d\u52a1\u3002 \u4f60\u53ef\u4ee5\u901a\u8fc7 Curl \u547d\u4ee4\u4ee5\u666e\u901a HTTP \u534f\u8bae\u4f7f\u7528\u5b83\uff1a $ curl -i http://git.io -F url=https://github.com/... HTTP/1.1 201 Created Location: http://git.io/abc123 $ curl -i http://git.io/abc123 HTTP/1.1 302 Found Location: https://github.com/... \u8fdb\u4e00\u6b65\u4e86\u89e3 Git.io. \u952e\u76d8\u5feb\u6377\u952e \u5728\u4ed3\u5e93\u9875\u9762\u4e0a\u63d0\u4f9b\u4e86\u5feb\u6377\u952e\u65b9\u4fbf\u5feb\u901f\u5bfc\u822a\u3002 \u6309 t \u952e\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u6d4f\u89c8\u5668\u3002 \u6309 w \u952e\u6253\u5f00\u5206\u652f\u9009\u62e9\u83dc\u5355\u3002 \u6309 s \u952e\u805a\u7126\u5149\u6807\u5230\u5f53\u524d\u4ed3\u5e93\u7684\u641c\u7d22\u6846\u3002\u6b64\u65f6\u6309\u9000\u683c\u952e\u5c31\u4f1a\u4ece\u641c\u7d22\u5f53\u524d\u4ed3\u5e93\u5207\u6362\u5230\u641c\u7d22\u6574\u4e2a Github \u7f51\u7ad9\u3002 \u6309 l \u952e\u7f16\u8f91 Issue \u5217\u8868\u9875\u7684\u6807\u7b7e\u3002 \u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u65f6 \uff08\u5982\uff1a https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.md \uff09\uff0c\u6309 y \u952e\u5c06\u4f1a\u51bb\u7ed3\u8fd9\u4e2a\u9875\u9762\uff0c\u8fd9\u6837\u5c31\u7b97\u4ee3\u7801\u88ab\u4fee\u6539\u4e86\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u4f60\u5f53\u524d\u770b\u5230\u7684\u3002 \u6309 ? \u67e5\u770b\u5f53\u524d\u9875\u9762\u652f\u6301\u7684\u5feb\u6377\u952e\u5217\u8868\uff1a \u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u7528\u7684\u641c\u7d22\u8bed\u6cd5. \u6574\u884c\u9ad8\u4eae \u5728\u4ee3\u7801\u6587\u4ef6\u5730\u5740 URL \u540e\u52a0\u4e0a #L52 \u6216\u8005\u5355\u51fb\u884c\u53f7 52 \u90fd\u4f1a\u5c06\u7b2c 52 \u884c\u4ee3\u7801\u9ad8\u4eae\u663e\u793a\u3002 \u591a\u884c\u9ad8\u4eae\u4e5f\u53ef\u4ee5\uff0c\u6bd4\u5982\u7528 #L53-L60 \u9009\u62e9\u8303\u56f4\uff0c\u6216\u8005\u6309\u4f4f shift \u952e\uff0c\u7136\u540e\u518d\u70b9\u51fb\u9009\u62e9\u7684\u4e24\u884c\u3002 https://github.com/rails/rails/blob/master/activemodel/lib/active_model.rb#L53-L60 \u7528 Commit \u4fe1\u606f\u5173\u95ed Issue \u5982\u679c\u67d0\u4e2a\u63d0\u4ea4\u4fee\u590d\u4e86\u4e00\u4e2a Issue\uff0c\u5f53\u63d0\u4ea4\u5230 master \u5206\u652f\u65f6\uff0c\u63d0\u4ea4\u4fe1\u606f\u91cc\u53ef\u4ee5\u4f7f\u7528 fix/fixes/fixed , close/closes/closed \u6216\u8005 resolve/resolves/resolved \u7b49\u5173\u952e\u8bcd\uff0c\u540e\u9762\u518d\u8ddf\u4e0a Issue \u53f7\uff0c\u8fd9\u6837\u5c31\u4f1a\u5173\u95ed\u8fd9\u4e2a Issue \u3002 $ git commit -m Fix screwup, fixes #12 \u8fd9\u5c06\u4f1a\u5173\u95ed Issue #12\uff0c\u5e76\u4e14\u5728 Issue \u8ba8\u8bba\u5217\u8868\u91cc\u5173\u8054\u5f15\u7528\u8fd9\u6b21\u63d0\u4ea4\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u901a\u8fc7\u63d0\u4ea4\u4fe1\u606f\u5173\u95ed Issue. \u94fe\u63a5\u5176\u4ed6\u4ed3\u5e93\u7684 Issue \u5982\u679c\u4f60\u60f3\u5f15\u7528\u5230\u540c\u4e00\u4e2a\u4ed3\u5e93\u4e2d\u7684\u4e00\u4e2a Issue\uff0c\u53ea\u9700\u4f7f\u7528\u4e95\u53f7 # \u52a0\u4e0a Issue \u53f7\uff0c\u8fd9\u6837\u5c31\u4f1a\u81ea\u52a8\u521b\u5efa\u5230\u6b64 Issue \u7684\u94fe\u63a5\u3002 \u8981\u94fe\u63a5\u5230\u5176\u4ed6\u4ed3\u5e93\u7684 Issue \uff0c\u5c31\u4f7f\u7528 {user}/{repo}#ISSUE_NUMBER \u7684\u65b9\u5f0f\uff0c\u4f8b\u5982 tiimgreen/toc#12 \u3002 \u9501\u5b9a\u9879\u76ee\u5bf9\u8bdd\u529f\u80fd \u73b0\u5728\u4ed3\u5e93\u7684\u7ba1\u7406\u5458\u548c\u5408\u4f5c\u8005\u53ef\u4ee5\u5c06 Pull Requests \u548c Issue \u7684\u8bc4\u8bba\u529f\u80fd\u5173\u95ed\u3002 \u8fd9\u6837\uff0c\u4e0d\u662f\u9879\u76ee\u5408\u4f5c\u8005\u7684\u7528\u6237\u5c31\u4e0d\u80fd\u5728\u8fd9\u4e2a\u9879\u76ee\u4e0a\u4f7f\u7528\u8bc4\u8bba\u529f\u80fd\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5bf9\u8bdd\u9501\u5b9a\u529f\u80fd. \u8bbe\u7f6e CI \u5bf9\u6bcf\u6761 Pull Request \u90fd\u8fdb\u884c\u6784\u5efa \u5982\u679c\u914d\u7f6e\u6b63\u786e\uff0c Travis CI \u4f1a\u4e3a\u6bcf\u4e2a\u4f60\u6536\u5230\u7684 Pull Request \u6267\u884c\u6784\u5efa\uff0c\u5c31\u50cf\u6bcf\u6b21\u63d0\u4ea4\u4e5f\u4f1a\u89e6\u53d1\u6784\u5efa\u4e00\u6837\u3002\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e Travis CI \u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 Travis CI\u5165\u95e8 \u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u63d0\u4ea4\u72b6\u6001 API. Markdown \u6587\u4ef6\u8bed\u6cd5\u9ad8\u4eae \u4f8b\u5982\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5728\u4f60\u7684 Markdown \u6587\u4ef6\u91cc\u4e3a Ruby \u4ee3\u7801\u6dfb\u52a0\u8bed\u6cd5\u9ad8\u4eae\uff1a ```ruby require tabbit table = Tabbit.new( Name , Email ) table.add_row( Tim Green , tiimgreen@gmail.com ) puts table.to_s ``` \u6548\u679c\u5982\u4e0b\uff1a require tabbit table = Tabbit . new ( Name , Email ) table . add_row ( Tim Green , tiimgreen@gmail.com ) puts table . to_s Github\u4f7f\u7528 Linguist \u505a\u8bed\u8a00\u8bc6\u522b\u548c\u8bed\u6cd5\u9ad8\u4eae\u3002\u4f60\u53ef\u4ee5\u4ed4\u7ec6\u9605\u8bfb languages YAML file \uff0c\u4e86\u89e3\u6709\u54ea\u4e9b\u53ef\u7528\u7684\u5173\u952e\u5b57\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 GitHub Flavored Markdown. \u8868\u60c5\u7b26 \u53ef\u4ee5\u5728 Pull Requests, Issues, \u63d0\u4ea4\u6d88\u606f, Markdown \u6587\u4ef6\u91cc\u52a0\u5165\u8868\u60c5\u7b26\u3002\u4f7f\u7528\u65b9\u6cd5 :name_of_emoji: :smile: \u5c06\u8f93\u51fa\u4e00\u4e2a\u7b11\u8138\uff1a :smile: Github \u652f\u6301\u7684\u5b8c\u6574\u8868\u60c5\u7b26\u53f7\u5217\u8868\u8be6\u89c1 emoji-cheat-sheet.com \u6216 scotch-io/All-Github-Emoji-Icons \u3002 Github \u4e0a\u4f7f\u7528\u6700\u591a\u76845\u4e2a\u8868\u60c5\u7b26\u53f7\u662f\uff1a :shipit: :sparkles: :-1: :+1: :clap: \u56fe\u7247 / GIF \u52a8\u753b \u6ce8\u91ca\u548cREADME\u7b49\u6587\u4ef6\u91cc\u4e5f\u53ef\u4ee5\u4f7f\u7528\u56fe\u7247\u548c GIF \u52a8\u753b\uff1a ! [ Alt Text ]( http : //www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif) \u4ed3\u5e93\u4e2d\u7684\u56fe\u7247\u53ef\u4ee5\u88ab\u76f4\u63a5\u5f15\u7528\uff1a ! [ Alt Text ]( https : //github.com/{user}/{repo}/raw/master/path/to/image.gif) \u6240\u6709\u56fe\u7247\u90fd\u7f13\u5b58\u5728 Github\uff0c\u4e0d\u7528\u62c5\u5fc3\u4f60\u7684\u7ad9\u70b9\u4e0d\u80fd\u8bbf\u95ee\u65f6\u5c31\u770b\u4e0d\u5230\u56fe\u7247\u4e86\u3002 \u5728 GitHub Wiki \u4e2d\u5f15\u7528\u56fe\u7247 \u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5728 Wiki \u9875\u9762\u91cc\u5d4c\u5165\u56fe\u7247\u3002\u65e2\u53ef\u4ee5\u50cf\u4e0a\u4e00\u6761\u91cc\u90a3\u6837\u4f7f\u7528\u6807\u51c6\u7684 Markdown \u8bed\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u6307\u5b9a\u56fe\u7247\u7684\u9ad8\u5ea6\u6216\u5bbd\u5ea6\uff1a [[ http://www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif | height = 100px ]] \u7ed3\u679c\uff1a \u5feb\u901f\u5f15\u7528 \u5728\u4e3b\u9898\u8bc4\u8bba\u4e2d\u5f15\u7528\u4e4b\u524d\u67d0\u4e2a\u4eba\u6240\u8bf4\u7684\uff0c\u53ea\u9700\u9009\u4e2d\u6587\u672c\uff0c\u7136\u540e\u6309 r \u952e\uff0c\u60f3\u8981\u7684\u5c31\u4f1a\u4ee5\u5f15\u7528\u7684\u5f62\u5f0f\u590d\u5236\u5230\u4f60\u7684\u8f93\u5165\u6846\u91cc\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5feb\u901f\u5f15\u7528. \u7c98\u8d34\u526a\u8d34\u677f\u4e2d\u7684\u56fe\u7247\u5230\u8bc4\u8bba \uff08\u4ec5\u9002\u7528\u4e8e Chrome \u6d4f\u89c8\u5668\uff09 \u5f53\u622a\u5c4f\u56fe\u7247\u590d\u5236\u5230\u526a\u8d34\u677f\u540e\uff08mac \u4e0a\u7528 cmd-ctrl-shift-4 \uff09\uff0c\u4f60\u53ef\u4ee5\u7528( cmd-v / ctrl-v )\u628a\u56fe\u7247\u7c98\u8d34\u5230\u8bc4\u8bba\u6846\u91cc\uff0c\u7136\u540e\u5b83\u5c31\u4f1a\u81ea\u52a8\u4e0a\u4f20\u5230 Github\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5728 issue \u4e2d\u4f7f\u7528\u9644\u4ef6 \u5feb\u901f\u6dfb\u52a0\u8bb8\u53ef\u8bc1\u6587\u4ef6 \u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u65f6\uff0cGithub\u4f1a\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a\u9884\u7f6e\u7684\u8f6f\u4ef6\u8bb8\u53ef\u5217\u8868\uff1a \u5bf9\u4e8e\u5df2\u6709\u7684\u4ed3\u5e93\uff0c\u53ef\u4ee5\u901a\u8fc7 web \u754c\u9762\u521b\u5efa\u6587\u4ef6\u6765\u6dfb\u52a0\u8f6f\u4ef6\u8bb8\u53ef\u3002\u8f93\u5165 LICENSE \u4f5c\u4e3a\u6587\u4ef6\u540d\u540e\uff0c\u540c\u6837\u53ef\u4ee5\u4ece\u9884\u7f6e\u7684\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u4f5c\u4e3a\u6a21\u677f\u3002 \u8fd9\u4e2a\u6280\u5de7\u4e5f\u9002\u7528\u4e8e .gitignore \u6587\u4ef6\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5f00\u6e90\u8bb8\u53ef\u8bc1 \u4efb\u52a1\u5217\u8868 Issues \u548c Pull requests \u91cc\u53ef\u4ee5\u6dfb\u52a0\u590d\u9009\u6846\uff0c\u8bed\u6cd5\u5982\u4e0b\uff08\u6ce8\u610f\u7a7a\u767d\u7b26\uff09\uff1a - [ ] Be awesome - [ ] Prepare dinner - [ ] Research recipe - [ ] Buy ingredients - [ ] Cook recipe - [ ] Sleep \u5f53\u9879\u76ee\u88ab\u9009\u4e2d\u65f6\uff0c\u5b83\u5bf9\u5e94\u7684 Markdown \u6e90\u7801\u4e5f\u88ab\u66f4\u65b0\u4e86\uff1a - [x] Be awesome - [ ] Prepare dinner - [x] Research recipe - [x] Buy ingredients - [ ] Cook recipe - [ ] Sleep \u8fdb\u4e00\u6b65\u4e86\u89e3\u4efb\u52a1\u5217\u8868. Markdown \u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u5217\u8868 \u5728\u5b8c\u5168\u9002\u914dMarkdown\u8bed\u6cd5\u7684\u6587\u4ef6\u4e2d\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u8bed\u6cd5\u52a0\u5165\u4e00\u4e2a \u53ea\u8bfb \u7684\u4efb\u52a1\u5217\u8868 - [ ] Mercury - [x] Venus - [x] Earth - [x] Moon - [x] Mars - [ ] Deimos - [ ] Phobos [ ] Mercury [x] Venus [x] Earth [x] Moon [x] Mars [ ] Deimos [ ] Phobos \u8fdb\u4e00\u6b65\u4e86\u89e3 Markdown \u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u5217\u8868 \u76f8\u5bf9\u94fe\u63a5 Markdown\u6587\u4ef6\u91cc\u94fe\u63a5\u5230\u5185\u90e8\u5185\u5bb9\u65f6\u63a8\u8350\u4f7f\u7528\u76f8\u5bf9\u94fe\u63a5\u3002 [Link to a header](#awesome-section) [Link to a file](docs/readme) \u7edd\u5bf9\u94fe\u63a5\u4f1a\u5728 URL \u6539\u53d8\u65f6\uff08\u4f8b\u5982\u91cd\u547d\u540d\u4ed3\u5e93\u3001\u7528\u6237\u540d\u6539\u53d8\uff0c\u5efa\u7acb\u5206\u652f\u9879\u76ee\uff09\u88ab\u66f4\u65b0\u3002\u4f7f\u7528\u76f8\u5bf9\u94fe\u63a5\u80fd\u591f\u4fdd\u8bc1\u4f60\u7684\u6587\u6863\u4e0d\u53d7\u6b64\u5f71\u54cd\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u76f8\u5bf9\u94fe\u63a5. GitHub Pages \u7684\u5143\u6570\u636e\u4e0e\u63d2\u4ef6\u652f\u6301 \u5728 Jekyll \u9875\u9762\u548c\u6587\u7ae0\u91cc\uff0c\u4ed3\u5e93\u4fe1\u606f\u53ef\u5728 site.github \u547d\u540d\u7a7a\u95f4\u4e0b\u627e\u5230\uff0c\u4e5f\u53ef\u4ee5\u663e\u793a\u51fa\u6765\uff0c\u4f8b\u5982\uff0c\u4f7f\u7528 {{ site.github.project_title }} \u663e\u793a\u9879\u76ee\u6807\u9898\u3002 Jemoji \u548c jekyll-mentions \u63d2\u4ef6\u4e3a\u4f60\u7684 Jekyll \u6587\u7ae0\u548c\u9875\u9762\u589e\u52a0\u4e86 emoji \u548c @mentions \u529f\u80fd\u3002 \u4e86\u89e3\u66f4\u591a GitHub Pages \u7684\u5143\u6570\u636e\u548c\u63d2\u4ef6\u652f\u6301. \u67e5\u770b YAML \u683c\u5f0f\u7684\u5143\u6570\u636e \u8bb8\u591a\u535a\u5ba2\u7ad9\u70b9\uff0c\u6bd4\u5982\u57fa\u4e8e Jekyll \u7684 GitHub Pages \uff0c\u90fd\u4f9d\u8d56\u4e8e\u4e00\u4e9b\u6587\u7ae0\u5934\u90e8\u7684 YAML \u683c\u5f0f\u7684\u5143\u6570\u636e\u3002 Github \u4f1a\u5c06\u5176\u6e32\u67d3\u6210\u4e00\u4e2a\u6c34\u5e73\u8868\u683c\uff0c\u65b9\u4fbf\u9605\u8bfb\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 \u5728\u6587\u6863\u91cc\u67e5\u770b YAML \u5143\u6570\u636e. \u6e32\u67d3\u8868\u683c\u6570\u636e GitHub \u652f\u6301\u5c06 .csv (\u9017\u53f7\u5206\u9694)\u548c .tsv (\u5236\u8868\u7b26\u5206\u9694)\u683c\u5f0f\u7684\u6587\u4ef6\u6e32\u67d3\u6210\u8868\u683c\u6570\u636e\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u6e32\u67d3\u8868\u683c\u6570\u636e. \u64a4\u9500 Pull Request \u5408\u5e76\u4e00\u4e2a Pull Request \u4e4b\u540e\uff0c\u4f60\u53ef\u80fd\u4f1a\u53cd\u6094\uff1a\u8981\u4e48\u662f\u8fd9\u6b21 Pull Request \u6ca1\u4ec0\u4e48\u7528\u5904\uff0c\u8981\u4e48\u662f\u8fd8\u4e0d\u5230\u5408\u5e76\u7684\u65f6\u5019\u3002 \u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7 Pull Request \u4e2d\u7684 Revert \u6309\u94ae\u6765\u64a4\u9500\u4e00\u4e2a\u5df2\u5408\u5e76\u7684 Pull Request \u4e2d\u7684 commit\u3002\u6309\u4e0b\u6309\u94ae\u540e\u5c06\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u8fdb\u884c\u9006\u64cd\u4f5c\u7684 Pull Request\u3002 *\u8fdb\u4e00\u6b65\u4e86\u89e3\u201c\u64a4\u9500\u201d\u6309\u94ae Diffs \u53ef\u6e32\u67d3\u6587\u6863\u7684Diffs Commit \u548c Pull Request \u91cc\u5305\u542b\u6709 Github \u652f\u6301\u7684\u53ef\u6e32\u67d3\u6587\u6863\uff08\u6bd4\u5982 Markdown\uff09\u4f1a\u63d0\u4f9b source \u548c rendered \u4e24\u4e2a\u89c6\u56fe\u529f\u80fd\u3002 \u70b9\u51fb \"rendered\" \u6309\u94ae\uff0c\u770b\u770b\u6539\u52a8\u5728\u6e32\u67d3\u540e\u7684\u663e\u793a\u6548\u679c\u3002\u5f53\u4f60\u6dfb\u52a0\u3001\u5220\u9664\u6216\u4fee\u6539\u6587\u672c\u65f6\uff0c\u6e32\u67d3\u7eaf\u6587\u672c\u89c6\u56fe\u975e\u5e38\u65b9\u4fbf\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u6e32\u67d3\u7eaf\u6587\u672c\u89c6\u56feDiffs. \u53ef\u6bd4\u8f83\u7684\u5730\u56fe\u6570\u636e \u5f53\u4f60\u5728GitHub\u4e0a\u67e5\u770b\u4e00\u4e2a\u5305\u542b\u5730\u7406\u6570\u636e\u7684 commit \u6216 pull request\u65f6\uff0cGithub \u5c06\u4ee5\u53ef\u89c6\u5316\u7684\u65b9\u5f0f\u5bf9\u6bd4\u7248\u672c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u6bd4\u8f83\u7684\u5730\u56fe\u6570\u636e. \u5728 Diff \u4e2d\u5c55\u5f00\u67e5\u770b\u66f4\u591a\u7684\u4e0a\u4e0b\u6587 \u4f60\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb diff \u8fb9\u680f\u91cc\u7684 unfold \u6309\u94ae\u6765\u591a\u663e\u793a\u51e0\u884c\u4e0a\u4e0b\u6587\u3002\u4f60\u53ef\u4ee5\u4e00\u76f4\u70b9\u51fb unfold \u6309\u94ae\u76f4\u5230\u663e\u793a\u4e86\u6587\u4ef6\u7684\u5168\u90e8\u5185\u5bb9\u3002\u8fd9\u4e2a\u529f\u80fd\u5728\u6240\u6709 GitHub \u7684 diff \u529f\u80fd\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5c55\u5f00 Diff \u4e0a\u4e0b\u6587. \u83b7\u53d6 Pull Request \u7684 diff \u6216 patch \u6587\u4ef6 \u5728 Pull Request \u7684 URL \u540e\u9762\u52a0\u4e0a .diff \u6216 .patch \u7684\u6269\u5c55\u540d\u5c31\u53ef\u4ee5\u5f97\u5230\u5b83\u7684 diff \u6216 patch \u6587\u4ef6\uff0c\u4f8b\u5982\uff1a https://github.com/tiimgreen/github-cheat-sheet/pull/15 https://github.com/tiimgreen/github-cheat-sheet/pull/15.diff https://github.com/tiimgreen/github-cheat-sheet/pull/15.patch .diff \u6269\u5c55\u4f1a\u4f7f\u7528\u666e\u901a\u6587\u672c\u683c\u5f0f\u663e\u793a\u5982\u4e0b\u5185\u5bb9\uff1a diff --git a/README.md b/README.md index 88fcf69..8614873 100644 --- a/README.md +++ b/README.md @@ -28,6 +28,7 @@ All the hidden and not hidden features of Git and GitHub. This cheat sheet was i - [Merged Branches](#merged-branches) - [Quick Licensing](#quick-licensing) - [TODO Lists](#todo-lists) +- [Relative Links](#relative-links) - [.gitconfig Recommendations](#gitconfig-recommendations) - [Aliases](#aliases) - [Auto-correct](#auto-correct) @@ -381,6 +382,19 @@ When they are clicked, they will be updated in the pure Markdown: - [ ] Sleep (...) \u663e\u793a\u56fe\u7247\u4ee5\u53ca\u6bd4\u8f83\u56fe\u7247 GitHub \u53ef\u4ee5\u663e\u793a\u5305\u62ec PNG\u3001JPG\u3001GIF\u3001PSD \u5728\u5185\u7684\u591a\u79cd\u56fe\u7247\u683c\u5f0f\u5e76\u63d0\u4f9b\u4e86\u51e0\u79cd\u65b9\u5f0f\u6765\u6bd4\u8f83\u8fd9\u4e9b\u683c\u5f0f\u7684\u56fe\u7247\u6587\u4ef6\u7248\u672c\u95f4\u7684\u4e0d\u540c\u3002 \u67e5\u770b\u66f4\u591a\u5173\u4e8e\u56fe\u7247\u663e\u793a\u548c\u6bd4\u8f83 Hub Hub \u662f\u4e00\u4e2a\u5bf9 Git \u8fdb\u884c\u4e86\u5c01\u88c5\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u65b9\u4fbf\u7684\u4f7f\u7528 Github\u3002 \u4f8b\u5982\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u8fdb\u884c\u514b\u9686\uff1a $ hub clone tiimgreen/toc \u67e5\u770b\u66f4\u591a Hub \u63d0\u4f9b\u7684\u8d85\u9177\u547d\u4ee4. \u8d21\u732e\u8005\u6307\u5357 \u5728\u4ed3\u5e93\u7684\u6839\u76ee\u5f55\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3a CONTRIBUTING \u7684\u6587\u4ef6\u540e\uff0c\u8d21\u732e\u8005\u5728\u65b0\u5efa Issue \u6216 Pull Request \u65f6\u4f1a\u770b\u5230\u4e00\u4e2a\u6307\u5411\u8fd9\u4e2a\u6587\u4ef6\u7684\u94fe\u63a5\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u8d21\u732e\u8005\u6307\u5357. Octicons GitHubs \u56fe\u6807\u5e93 (Octicons) \u73b0\u5df2\u5f00\u6e90\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 GitHub \u56fe\u6807\u5e93 GitHub \u8d44\u6e90 \u5185\u5bb9 \u94fe\u63a5 \u63a2\u7d22 GitHub https://github.com/explore GitHub \u535a\u5ba2 https://github.com/blog GitHub \u5e2e\u52a9 https://help.github.com/ GitHub \u57f9\u8bad http://training.github.com/ GitHub \u5f00\u53d1\u8005 https://developer.github.com/ GitHub \u76f8\u5173\u6f14\u8bb2\u89c6\u9891 \u5185\u5bb9 \u94fe\u63a5 How GitHub Uses GitHub to Build GitHub https://www.youtube.com/watch?v=qyz3jkOBbQY Introduction to Git with Scott Chacon of GitHub https://www.youtube.com/watch?v=ZDR433b0HJY How GitHub No Longer Works https://www.youtube.com/watch?v=gXD1ITW7iZI Git and GitHub Secrets https://www.youtube.com/watch?v=Foz9yvMkvlA More Git and GitHub Secrets https://www.youtube.com/watch?v=p50xsL-iVgU Git \u4ece\u5de5\u4f5c\u533a\u53bb\u9664\u5927\u91cf\u5df2\u5220\u9664\u6587\u4ef6 \u5f53\u7528 /bin/rm \u547d\u4ee4\u5220\u9664\u4e86\u5927\u91cf\u6587\u4ef6\u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u7528\u4e0b\u9762\u4e00\u6761\u547d\u4ee4\u4ece\u5de5\u4f5c\u533a\u548c\u7d22\u5f15\u4e2d\u53bb\u9664\u8fd9\u4e9b\u6587\u4ef6\uff0c\u4ee5\u514d\u4e00\u4e2a\u4e00\u4e2a\u7684\u5220\u9664\uff1a $ git rm $( git ls-files -d ) \u4f8b\u5982: $ git status On branch master Changes not staged for commit: deleted: a deleted: c $ git rm $( git ls-files -d ) rm a rm c $ git status On branch master Changes to be committed: deleted: a deleted: c \u4e0a\u4e00\u4e2a\u5206\u652f \u5feb\u901f\u68c0\u51fa\u4e0a\u4e00\u4e2a\u5206\u652f\uff1a $ git checkout - # Switched to branch master $ git checkout - # Switched to branch next $ git checkout - # Switched to branch master \u8fdb\u4e00\u6b65\u4e86\u89e3 Git \u5206\u652f. \u53bb\u9664\u7a7a\u767d Git Stripspace \u547d\u4ee4\u53ef\u4ee5: \u53bb\u6389\u884c\u5c3e\u7a7a\u767d\u7b26 \u591a\u4e2a\u7a7a\u884c\u538b\u7f29\u6210\u4e00\u884c \u5fc5\u8981\u65f6\u5728\u6587\u4ef6\u672b\u5c3e\u589e\u52a0\u4e00\u4e2a\u7a7a\u884c \u4f7f\u7528\u6b64\u547d\u4ee4\u65f6\u5fc5\u987b\u4f20\u5165\u4e00\u4e2a\u6587\u4ef6\uff0c\u50cf\u8fd9\u6837\uff1a $ git stripspace README.md \u8fdb\u4e00\u6b65\u4e86\u89e3 Git stripspace \u547d\u4ee4. \u68c0\u51fa Pull Requests \u5bf9 Github \u4ed3\u5e93\u6765\u8bf4\uff0cPull Request \u662f\u79cd\u7279\u6b8a\u5206\u652f\uff0c \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u591a\u79cd\u65b9\u5f0f\u53d6\u5230\u672c\u5730\uff1a \u53d6\u51fa\u67d0\u4e2a\u7279\u5b9a\u7684 Pull Request \u5e76\u4e34\u65f6\u4f5c\u4e3a\u672c\u5730\u7684 FETCH_HEAD \u4e2d\u4ee5\u4fbf\u8fdb\u884c\u5feb\u901f\u67e5\u770b\u66f4\u6539( diff )\u4ee5\u53ca\u5408\u5e76( merge )\uff1a $ git fetch origin refs/pull/ [ PR-Number ] /head \u901a\u8fc7 refspec \u83b7\u53d6\u6240\u6709\u7684 Pull Request \u4e3a\u672c\u5730\u5206\u652f\uff1a $ git fetch origin +refs/pull/*/head:refs/remotes/origin/pr/* \u6216\u5728\u4ed3\u5e93\u7684 .git/config \u4e2d\u52a0\u5165\u4e0b\u5217\u8bbe\u7f6e\u6765\u81ea\u52a8\u83b7\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684 Pull Request [remote origin ] fetch = +refs/heads/*:refs/remotes/origin/* url = git@github.com:tiimgreen/github-cheat-sheet.git [remote origin ] fetch = +refs/heads/*:refs/remotes/origin/* url = git@github.com:tiimgreen/github-cheat-sheet.git fetch = +refs/pull/*/head:refs/remotes/origin/pr/* \u5bf9\u57fa\u4e8e\u6d3e\u751f\u5e93\u7684 Pull Request\uff0c\u53ef\u4ee5\u901a\u8fc7\u5148 checkout \u4ee3\u8868\u6b64 Pull Request \u7684\u8fdc\u7aef\u5206\u652f\u518d\u7531\u6b64\u5206\u652f\u5efa\u7acb\u4e00\u4e2a\u672c\u5730\u5206\u652f\uff1a $ git checkout pr/42 pr-42 \u64cd\u4f5c\u591a\u4e2a\u4ed3\u5e93\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5728 Git \u4e2d\u8bbe\u7f6e\u83b7\u53d6 Pull Request \u7684\u5168\u5c40\u9009\u9879\u3002 git config --global --add remote.origin.fetch +refs/pull/*/head:refs/remotes/origin/pr/* \u6b64\u65f6\u53ef\u4ee5\u5728\u4efb\u610f\u4ed3\u5e93\u4e2d\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a git fetch origin git checkout pr/42 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5982\u4f55\u672c\u5730\u68c0\u51fa pull request. \u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u63d0\u4ea4 \u53ef\u4ee5\u4f7f\u7528 --allow-empty \u9009\u9879\u5f3a\u5236\u521b\u5efa\u4e00\u4e2a\u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u63d0\u4ea4\uff1a $ git commit -m Big-ass commit --allow-empty \u8fd9\u6837\u505a\u5728\u5982\u4e0b\u51e0\u79cd\u60c5\u51b5\u4e0b\u662f\u6709\u610f\u4e49\u7684\uff1a \u6807\u8bb0\u65b0\u7684\u5de5\u4f5c\u6216\u4e00\u4e2a\u65b0\u529f\u80fd\u7684\u5f00\u59cb\u3002 \u8bb0\u5f55\u5bf9\u9879\u76ee\u7684\u8ddf\u4ee3\u7801\u65e0\u5173\u7684\u6539\u52a8\u3002 \u8ddf\u4f7f\u7528\u4f60\u4ed3\u5e93\u7684\u5176\u4ed6\u4eba\u4ea4\u6d41\u3002 \u4f5c\u4e3a\u4ed3\u5e93\u7684\u7b2c\u4e00\u6b21\u63d0\u4ea4\uff0c\u56e0\u4e3a\u7b2c\u4e00\u6b21\u63d0\u4ea4\u540e\u4e0d\u80fd\u88ab rebase\uff1a git commit -m \"init repo\" --allow-empty . \u7f8e\u5316 Git Status \u5728\u547d\u4ee4\u884c\u8f93\u5165\u5982\u4e0b\u547d\u4ee4: $ git status \u53ef\u4ee5\u770b\u5230: \u52a0\u4e0a -sb \u9009\u9879: $ git status -sb \u8fd9\u4f1a\u5f97\u5230: \u8fdb\u4e00\u6b65\u4e86\u89e3 Git status \u547d\u4ee4. \u7f8e\u5316 Git Log \u8f93\u5165\u5982\u4e0b\u547d\u4ee4: $ git log --all --graph --pretty = format: %Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %an %Creset --abbrev-commit --date = relative \u53ef\u4ee5\u770b\u5230: \u8fd9\u8981\u5f52\u529f\u4e8e Palesz \u5728 stackoverflow \u7684\u56de\u7b54\u3002 \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u88ab\u7528\u4f5c\u522b\u540d\uff0c\u8be6\u7ec6\u505a\u6cd5\u89c1 \u8fd9\u91cc \u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 Git log \u547d\u4ee4. Git \u67e5\u8be2 Git \u67e5\u8be2\u8fd0\u884c\u4f60\u5728\u4e4b\u524d\u7684\u6240\u6709\u63d0\u4ea4\u4fe1\u606f\u91cc\u8fdb\u884c\u641c\u7d22\uff0c\u627e\u5230\u5176\u4e2d\u548c\u641c\u7d22\u6761\u4ef6\u76f8\u5339\u914d\u7684\u6700\u8fd1\u7684\u4e00\u6761\u3002 $ git show :/query \u8fd9\u91cc query \uff08\u533a\u522b\u5927\u5c0f\u5199\uff09\u662f\u4f60\u60f3\u8981\u641c\u7d22\u7684\u8bcd\u8bed\uff0c \u8fd9\u6761\u547d\u4ee4\u4f1a\u627e\u5230\u5305\u542b\u8fd9\u4e2a\u8bcd\u8bed\u7684\u6700\u540e\u90a3\u4e2a\u63d0\u4ea4\u5e76\u663e\u793a\u53d8\u52a8\u8be6\u60c5\u3002 $ git show :/typo \u6309 q \u952e\u9000\u51fa\u547d\u4ee4\u3002* \u5408\u5e76\u5206\u652f \u8f93\u5165\u547d\u4ee4: $ git branch --merged \u8fd9\u4f1a\u663e\u793a\u6240\u6709\u5df2\u7ecf\u5408\u5e76\u5230\u4f60\u5f53\u524d\u5206\u652f\u7684\u5206\u652f\u5217\u8868\u3002 \u76f8\u53cd\u5730\uff1a $ git branch --no-merged \u4f1a\u663e\u793a\u6240\u6709\u8fd8\u6ca1\u6709\u5408\u5e76\u5230\u4f60\u5f53\u524d\u5206\u652f\u7684\u5206\u652f\u5217\u8868\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 Git branch \u547d\u4ee4. \u4fee\u590d\u6709\u95ee\u9898\u7684\u63d0\u4ea4\u4ee5\u53ca\u81ea\u52a8\u5408\u5e76 \u5982\u679c\u4e0a\u4e00\u4e2a\u6216\u591a\u4e2a\u63d0\u4ea4\u5305\u542b\u4e86\u9519\u8bef\uff0c\u53ef\u4ee5\u5728\u4f60\u4fee\u590d\u95ee\u9898\u540e\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u5904\u7406\uff08\u5047\u8bbe\u8981\u4fee\u590d\u7684\u63d0\u4ea4\u7248\u672c\u662f abcde \uff09\uff1a $ git commit --fixup = abcde $ git rebase abcde^ --autosquash -i \u8fdb\u4e00\u6b65\u4e86\u89e3 Git commit \u547d\u4ee4. \u8fdb\u4e00\u6b65\u4e86\u89e3 Git rebase \u547d\u4ee4. \u4ee5\u7f51\u7ad9\u65b9\u5f0f\u67e5\u770b\u672c\u5730\u4ed3\u5e93 \u4f7f\u7528 Git \u7684 instaweb \u53ef\u4ee5\u7acb\u5373\u5728 gitweb \u4e2d\u6d4f\u89c8\u4f60\u7684\u5de5\u4f5c\u4ed3\u5e93\u3002\u8fd9\u4e2a\u547d\u4ee4\u662f\u4e2a\u7b80\u5355\u7684\u811a\u672c\uff0c\u914d\u7f6e\u4e86 gitweb \u548c\u7528\u6765\u6d4f\u89c8\u672c\u5730\u4ed3\u5e93\u7684Web\u670d\u52a1\u5668\u3002 \uff08\u8bd1\u8005\u6ce8\uff1a\u9ed8\u8ba4\u9700\u8981lighttpd\u652f\u6301\uff09 $ git instaweb \u6267\u884c\u540e\u6253\u5f00\uff1a \u8fdb\u4e00\u6b65\u4e86\u89e3 Git instaweb \u547d\u4ee4. Git \u914d\u7f6e \u6240\u6709 Git \u914d\u7f6e\u90fd\u4fdd\u5b58\u5728\u4f60\u7684 .gitconfig \u6587\u4ef6\u4e2d\u3002 Git \u547d\u4ee4\u81ea\u5b9a\u4e49\u522b\u540d \u522b\u540d\u7528\u6765\u5e2e\u52a9\u4f60\u5b9a\u4e49\u81ea\u5df1\u7684 git \u547d\u4ee4\u3002\u6bd4\u5982\u4f60\u53ef\u4ee5\u5b9a\u4e49 git a \u6765\u8fd0\u884c git add --all \u3002 \u8981\u6dfb\u52a0\u4e00\u4e2a\u522b\u540d\uff0c \u4e00\u79cd\u65b9\u6cd5\u662f\u6253\u5f00 ~/.gitconfig \u6587\u4ef6\u5e76\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a [alias] co = checkout cm = commit p = push # Show verbose output about tags, branches or remotes tags = tag -l branches = branch -a remotes = remote -v ...\u6216\u8005\u5728\u547d\u4ee4\u884c\u91cc\u952e\u5165\uff1a $ git config --global alias.new_alias git_function \u4f8b\u5982\uff1a $ git config --global alias.cm commit \u6307\u5411\u591a\u4e2a\u547d\u4ee4\u7684\u522b\u540d\u53ef\u4ee5\u7528\u5f15\u53f7\u6765\u5b9a\u4e49\uff1a $ git config --global alias.ac add -A . commit \u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u522b\u540d\uff1a \u522b\u540d Alias \u547d\u4ee4 Command \u5982\u4f55\u8bbe\u7f6e What to Type git cm git commit git config --global alias.cm commit git co git checkout git config --global alias.co checkout git ac git add . -A git commit git config --global alias.ac '!git add -A git commit' git st git status -sb git config --global alias.st 'status -sb' git tags git tag -l git config --global alias.tags 'tag -l' git branches git branch -a git config --global alias.branches 'branch -a' git cleanup git branch --merged | grep -v '*' | xargs git branch -d git config --global alias.cleanup \"!git branch --merged | grep -v '*' | xargs git branch -d\" git remotes git remote -v git config --global alias.remotes 'remote -v' git lg git log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %an %Creset' --abbrev-commit -- git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %an %Creset' --abbrev-commit --\" \u81ea\u52a8\u66f4\u6b63 \u5982\u679c\u952e\u5165 git comit \u4f60\u4f1a\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a $ git comit -m Message # git: comit is not a git command. See git --help . # Did you mean this? # commit \u4e3a\u4e86\u5728\u952e\u5165 comit \u8c03\u7528 commit \u547d\u4ee4\uff0c\u53ea\u9700\u542f\u7528\u81ea\u52a8\u7ea0\u9519\u529f\u80fd\uff1a $ git config --global help.autocorrect 1 \u73b0\u5728\u4f60\u5c31\u4f1a\u770b\u5230\uff1a $ git comit -m Message # WARNING: You called a Git command named comit , which does not exist. # Continuing under the assumption that you meant commit # in 0.1 seconds automatically... \u989c\u8272\u8f93\u51fa \u8981\u5728\u4f60\u7684 Git \u547d\u4ee4\u8f93\u51fa\u91cc\u52a0\u4e0a\u989c\u8272\u7684\u8bdd\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u547d\u4ee4\uff1a $ git config --global color.ui 1 \u8fdb\u4e00\u6b65\u4e86\u89e3 Git config \u547d\u4ee4. Git \u8d44\u6e90 Title Link Official Git Site http://git-scm.com/ Official Git Video Tutorials http://git-scm.com/videos Code School Try Git http://try.github.com/ Introductory Reference Tutorial for Git http://gitref.org/ Official Git Tutorial http://git-scm.com/docs/gittutorial Everyday Git http://git-scm.com/docs/everyday Git Immersion http://gitimmersion.com/ Ry's Git Tutorial http://rypress.com/tutorials/git/index.html Git for Computer Scientists http://eagain.net/articles/git-for-computer-scientists/ Git Magic http://www-cs-students.stanford.edu/~blynn/gitmagic/ GitHub Training Kit http://training.github.com/kit Git Visualization Playground http://onlywei.github.io/explain-git-with-d3/#freeplay Git \u53c2\u8003\u4e66\u7c4d Title Link Pragmatic Version Control Using Git http://www.pragprog.com/titles/tsgit/pragmatic-version-control-using-git Pro Git http://git-scm.com/book Git Internals Pluralsight https://github.com/pluralsight/git-internals-pdf Git in the Trenches http://cbx33.github.com/gitt/ Version Control with Git http://www.amazon.com/Version-Control-Git-collaborative-development/dp/1449316387 Pragmatic Guide to Git http://www.pragprog.com/titles/pg_git/pragmatic-guide-to-git Git: Version Control for Everyone http://www.packtpub.com/git-version-control-for-everyone/book","title":"github"},{"location":"versions/github/#github","text":"\u8f6c\u81ea: https://github.com/tiimgreen/github-cheat-sheet","title":"github \u64cd\u4f5c"},{"location":"versions/github/#github_1","text":"Git \u548c Github \u79d8\u7c4d\uff0c\u7075\u611f\u6765\u81ea\u4e8e Zach Holman \u5728 2012 \u5e74 Aloha Ruby Conference \u548c 2013 \u5e74 WDCNZ \u4e0a\u6240\u505a\u7684\u6f14\u8bb2\uff1a Git and GitHub Secrets ( slides ) \u548c More Git and GitHub Secrets ( slides )\u3002","title":"GitHub\u79d8\u7c4d"},{"location":"versions/github/#_1","text":"GitHub \u4e0d\u6bd4\u8f83\u7a7a\u767d\u5b57\u7b26 \u8c03\u6574 Tab \u5b57\u7b26\u6240\u4ee3\u8868\u7684\u7a7a\u683c\u6570 \u67e5\u770b\u67d0\u4e2a\u7528\u6237\u7684 Commit \u5386\u53f2 \u4ed3\u5e93\u514b\u9686 \u5206\u652f \u5c06\u67d0\u4e2a\u5206\u652f\u4e0e\u5176\u4ed6\u6240\u6709\u5206\u652f\u8fdb\u884c\u5bf9\u6bd4 \u6bd4\u8f83\u5206\u652f \u6bd4\u8f83\u4e0d\u540c\u6d3e\u751f\u5e93\u7684\u5206\u652f Gists Git.io \u952e\u76d8\u5feb\u6377\u952e \u6574\u884c\u9ad8\u4eae \u7528 Commit \u4fe1\u606f\u5173\u95ed Issue \u94fe\u63a5\u5176\u4ed6\u4ed3\u5e93\u7684 Issue \u9501\u5b9a\u9879\u76ee\u5bf9\u8bdd\u529f\u80fd \u8bbe\u7f6e CI \u5bf9\u6bcf\u6761 Pull Request \u90fd\u8fdb\u884c\u6784\u5efa Markdown \u6587\u4ef6\u8bed\u6cd5\u9ad8\u4eae \u8868\u60c5\u7b26 \u56fe\u7247 / GIF \u52a8\u753b \u5728 GitHub Wiki \u4e2d\u5f15\u7528\u56fe\u7247 \u5feb\u901f\u5f15\u7528 \u7c98\u8d34\u526a\u8d34\u677f\u4e2d\u7684\u56fe\u7247\u5230\u8bc4\u8bba \u5feb\u901f\u6dfb\u52a0\u8bb8\u53ef\u8bc1\u6587\u4ef6 \u4efb\u52a1\u5217\u8868 Markdown \u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u5217\u8868 \u76f8\u5bf9\u94fe\u63a5 GitHub Pages \u7684\u5143\u6570\u636e\u4e0e\u63d2\u4ef6\u652f\u6301 \u67e5\u770b YAML \u683c\u5f0f\u7684\u5143\u6570\u636e \u6e32\u67d3\u8868\u683c\u6570\u636e \u64a4\u9500 Pull Request Diffs \u53ef\u6e32\u67d3\u6587\u6863\u7684Diffs \u53ef\u6bd4\u8f83\u7684\u5730\u56fe\u6570\u636e \u5728 Diff \u4e2d\u5c55\u5f00\u67e5\u770b\u66f4\u591a\u7684\u4e0a\u4e0b\u6587 \u83b7\u53d6 Pull Request \u7684 diff \u6216 patch \u6587\u4ef6 \u663e\u793a\u56fe\u7247\u4ee5\u53ca\u6bd4\u8f83\u56fe\u7247 Hub \u8d21\u732e\u8005\u6307\u5357 Octicons GitHub \u8d44\u6e90 GitHub \u76f8\u5173\u6f14\u8bb2\u89c6\u9891 Git \u4ece\u5de5\u4f5c\u533a\u53bb\u9664\u5927\u91cf\u5df2\u5220\u9664\u6587\u4ef6 \u4e0a\u4e00\u4e2a\u5206\u652f \u53bb\u9664\u7a7a\u767d \u68c0\u51fa Pull Requests \u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u63d0\u4ea4 \u7f8e\u5316 Git Status \u7f8e\u5316 Git Log Git \u67e5\u8be2 \u5408\u5e76\u5206\u652f \u4fee\u590d\u6709\u95ee\u9898\u7684\u63d0\u4ea4\u4ee5\u53ca\u81ea\u52a8\u5408\u5e76 \u4ee5\u7f51\u7ad9\u65b9\u5f0f\u67e5\u770b\u672c\u5730\u4ed3\u5e93 Git \u914d\u7f6e Git \u547d\u4ee4\u81ea\u5b9a\u4e49\u522b\u540d \u81ea\u52a8\u66f4\u6b63 \u989c\u8272\u8f93\u51fa Git \u8d44\u6e90 Git \u53c2\u8003\u4e66\u7c4d","title":"\u76ee\u5f55"},{"location":"versions/github/#github_2","text":"","title":"GitHub"},{"location":"versions/github/#github_3","text":"","title":"\u5feb\u901f\u94fe\u63a5GitHub"},{"location":"versions/github/#_2","text":"\u5728\u4efb\u610f diff \u9875\u9762\u7684 UR L\u540e\u52a0\u4e0a ?w=1 \uff0c\u53ef\u4ee5\u53bb\u6389\u90a3\u4e9b\u53ea\u662f\u7a7a\u767d\u5b57\u7b26\u7684\u6539\u52a8\uff0c\u4f7f\u4f60\u80fd\u66f4\u4e13\u6ce8\u4e8e\u4ee3\u7801\u6539\u52a8\u3002 \u8be6\u89c1 GitHub secrets.","title":"\u4e0d\u6bd4\u8f83\u7a7a\u767d\u5b57\u7b26"},{"location":"versions/github/#tab","text":"\u5728 diff \u6216\u6587\u4ef6\u7684 URL \u540e\u9762\u52a0\u4e0a ?ts=4 \uff0c\u8fd9\u6837\u5f53\u663e\u793a tab \u5b57\u7b26\u7684\u957f\u5ea6\u65f6\u5c31\u4f1a\u662f 4 \u4e2a\u7a7a\u683c\u7684\u957f\u5ea6\uff0c\u4e0d\u518d\u662f\u9ed8\u8ba4\u7684 8 \u4e2a\u7a7a\u683c\u3002 ts \u540e\u9762\u7684\u6570\u5b57\u8fd8\u53ef\u4ee5\u6839\u636e\u4f60\u4e2a\u4eba\u7684\u504f\u597d\u8fdb\u884c\u4fee\u6539\u3002\u8fd9\u4e2a\u6280\u5de7\u4e0d\u9002\u7528\u4e8e Gists\uff0c\u6216\u8005\u4ee5 Raw \u683c\u5f0f\u67e5\u770b\u6587\u4ef6\uff0c \u4f46\u6709\u6d4f\u89c8\u5668\u6269\u5c55\u63d2\u4ef6\u53ef\u4ee5\u5e2e\u4f60\u81ea\u52a8\u8c03\u6574: Chrome \u6269\u5c55 \uff0c Opera \u6269\u5c55 \u3002 \u4e0b\u9762\u4ee5\u4e00\u4e2a Go \u8bed\u8a00\u6e90\u6587\u4ef6\u4e3a\u4f8b\uff0c\u770b\u770b\u5728 URL \u91cc\u6dfb\u52a0 ?ts=4 \u53c2\u6570\u7684\u6548\u679c\u3002\u6dfb\u52a0\u524d\uff1a ... \u6dfb\u52a0\u540e\u7684\u6837\u5b50\uff1a","title":"\u8c03\u6574 Tab \u5b57\u7b26\u6240\u4ee3\u8868\u7684\u7a7a\u683c\u6570"},{"location":"versions/github/#commit","text":"\u5728 Commits \u9875\u9762 URL \u540e\u52a0\u4e0a ?author={user} \u67e5\u770b\u7528\u6237\u5168\u90e8\u7684\u63d0\u4ea4\u3002 https://github.com/rails/rails/commits/master?author=dhh \u6df1\u5165\u4e86\u89e3\u63d0\u4ea4\u89c6\u56fe\u4e4b\u95f4\u7684\u533a\u522b","title":"\u67e5\u770b\u7528\u6237\u7684\u5168\u90e8 Commit \u5386\u53f2"},{"location":"versions/github/#_3","text":"\u5f53\u514b\u9686\u4ed3\u5e93\u65f6\u53ef\u4ee5\u4e0d\u8981\u90a3\u4e2a .git \u540e\u7f00\u3002 $ git clone https://github.com/tiimgreen/github-cheat-sheet \u66f4\u591a\u5bf9 Git clone \u547d\u4ee4\u7684\u4ecb\u7ecd.","title":"\u4ed3\u5e93\u514b\u9686"},{"location":"versions/github/#_4","text":"","title":"\u5206\u652f"},{"location":"versions/github/#_5","text":"\u5f53\u4f60\u67e5\u770b\u67d0\u4e2a\u4ed3\u5e93\u7684\u5206\u652f\uff08Branches\uff09\u9875\u9762\uff08\u7d27\u6328\u7740 Commits \u94fe\u63a5\uff09\u65f6 https://github.com/{user}/{repo}/branches \u4f60\u4f1a\u770b\u5230\u4e00\u4e2a\u5305\u542b\u6240\u6709\u672a\u5408\u5e76\u7684\u5206\u652f\u7684\u5217\u8868\u3002 \u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u8bbf\u95ee\u5206\u652f\u6bd4\u8f83\u9875\u9762\u6216\u5220\u9664\u67d0\u4e2a\u5206\u652f\u3002","title":"\u5c06\u67d0\u4e2a\u5206\u652f\u4e0e\u5176\u4ed6\u6240\u6709\u5206\u652f\u8fdb\u884c\u5bf9\u6bd4"},{"location":"versions/github/#_6","text":"\u5982\u679c\u8981\u5728 GitHub \u4e0a\u76f4\u63a5\u6bd4\u8f83\u4e24\u4e2a\u5206\u652f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u5f62\u5f0f\u7684 URL \uff1a https://github.com/{user}/{repo}/compare/{range} \u5176\u4e2d {range} = master...4-1-stable \u4f8b\u5982\uff1a https://github.com/rails/rails/compare/master...4-1-stable {range} \u53c2\u6570\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u5f62\u5f0f: https://github.com/rails/rails/compare/master@{1.day.ago}...master https://github.com/rails/rails/compare/master@{2014-10-04}...master \u65e5\u671f\u683c\u5f0f YYYY-MM-DD \u5728 diff \u548c patch \u9875\u9762\u91cc\u4e5f\u53ef\u4ee5\u6bd4\u8f83\u5206\u652f\uff1a https://github.com/rails/rails/compare/master...4-1-stable.diff https://github.com/rails/rails/compare/master...4-1-stable.patch \u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u57fa\u4e8e\u65f6\u95f4\u7684 Commit \u6bd4\u8f83.","title":"\u6bd4\u8f83\u5206\u652f"},{"location":"versions/github/#_7","text":"\u60f3\u8981\u5bf9\u6d3e\u751f\u4ed3\u5e93\uff08Forked Repository\uff09\u4e4b\u95f4\u7684\u5206\u652f\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u7684 URL\uff1a https://github.com/user/repo/compare/{foreign-user}:{branch}...{own-branch} \u4f8b\u5982\uff1a https://github.com/rails/rails/compare/byroot:master...master","title":"\u6bd4\u8f83\u4e0d\u540c\u6d3e\u751f\u5e93\u7684\u5206\u652f"},{"location":"versions/github/#gists","text":"Gists \u65b9\u4fbf\u6211\u4eec\u7ba1\u7406\u4ee3\u7801\u7247\u6bb5\uff0c\u4e0d\u5fc5\u4f7f\u7528\u529f\u80fd\u9f50\u5168\u7684\u4ed3\u5e93\u3002 Gist \u7684 URL \u540e\u52a0\u4e0a .pibb \uff08 \u50cf\u8fd9\u6837 \uff09\u53ef\u4ee5\u5f97\u5230\u4fbf\u4e8e\u5d4c\u5165\u5230\u5176\u4ed6\u7f51\u7ad9 \u7684 HTML \u4ee3\u7801\u3002 Gists \u53ef\u4ee5\u50cf\u4efb\u4f55\u6807\u51c6\u4ed3\u5e93\u4e00\u6837\u88ab\u514b\u9686\u3002 $ git clone https://gist.github.com/tiimgreen/10545817 \u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u50cf Github \u4ed3\u5e93\u4e00\u6837\u4fee\u6539\u548c\u66f4\u65b0 Gists : $ git commit $ git push Username for https://gist.github.com : Password for https://tiimgreen@gist.github.com : \u4f46\u662f\uff0c Gists \u4e0d\u652f\u6301\u76ee\u5f55\u3002\u6240\u6709\u6587\u4ef6\u90fd\u5fc5\u987b\u6dfb\u52a0\u5728\u4ed3\u5e93\u7684\u6839\u76ee\u5f55\u4e0b\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5982\u4f55\u521b\u5efa Gists.","title":"Gists"},{"location":"versions/github/#gitio","text":"Git.io \u662f Github \u7684\u77ed\u7f51\u5740\u670d\u52a1\u3002 \u4f60\u53ef\u4ee5\u901a\u8fc7 Curl \u547d\u4ee4\u4ee5\u666e\u901a HTTP \u534f\u8bae\u4f7f\u7528\u5b83\uff1a $ curl -i http://git.io -F url=https://github.com/... HTTP/1.1 201 Created Location: http://git.io/abc123 $ curl -i http://git.io/abc123 HTTP/1.1 302 Found Location: https://github.com/... \u8fdb\u4e00\u6b65\u4e86\u89e3 Git.io.","title":"Git.io"},{"location":"versions/github/#_8","text":"\u5728\u4ed3\u5e93\u9875\u9762\u4e0a\u63d0\u4f9b\u4e86\u5feb\u6377\u952e\u65b9\u4fbf\u5feb\u901f\u5bfc\u822a\u3002 \u6309 t \u952e\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u6d4f\u89c8\u5668\u3002 \u6309 w \u952e\u6253\u5f00\u5206\u652f\u9009\u62e9\u83dc\u5355\u3002 \u6309 s \u952e\u805a\u7126\u5149\u6807\u5230\u5f53\u524d\u4ed3\u5e93\u7684\u641c\u7d22\u6846\u3002\u6b64\u65f6\u6309\u9000\u683c\u952e\u5c31\u4f1a\u4ece\u641c\u7d22\u5f53\u524d\u4ed3\u5e93\u5207\u6362\u5230\u641c\u7d22\u6574\u4e2a Github \u7f51\u7ad9\u3002 \u6309 l \u952e\u7f16\u8f91 Issue \u5217\u8868\u9875\u7684\u6807\u7b7e\u3002 \u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u65f6 \uff08\u5982\uff1a https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.md \uff09\uff0c\u6309 y \u952e\u5c06\u4f1a\u51bb\u7ed3\u8fd9\u4e2a\u9875\u9762\uff0c\u8fd9\u6837\u5c31\u7b97\u4ee3\u7801\u88ab\u4fee\u6539\u4e86\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u4f60\u5f53\u524d\u770b\u5230\u7684\u3002 \u6309 ? \u67e5\u770b\u5f53\u524d\u9875\u9762\u652f\u6301\u7684\u5feb\u6377\u952e\u5217\u8868\uff1a \u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u7528\u7684\u641c\u7d22\u8bed\u6cd5.","title":"\u952e\u76d8\u5feb\u6377\u952e"},{"location":"versions/github/#_9","text":"\u5728\u4ee3\u7801\u6587\u4ef6\u5730\u5740 URL \u540e\u52a0\u4e0a #L52 \u6216\u8005\u5355\u51fb\u884c\u53f7 52 \u90fd\u4f1a\u5c06\u7b2c 52 \u884c\u4ee3\u7801\u9ad8\u4eae\u663e\u793a\u3002 \u591a\u884c\u9ad8\u4eae\u4e5f\u53ef\u4ee5\uff0c\u6bd4\u5982\u7528 #L53-L60 \u9009\u62e9\u8303\u56f4\uff0c\u6216\u8005\u6309\u4f4f shift \u952e\uff0c\u7136\u540e\u518d\u70b9\u51fb\u9009\u62e9\u7684\u4e24\u884c\u3002 https://github.com/rails/rails/blob/master/activemodel/lib/active_model.rb#L53-L60","title":"\u6574\u884c\u9ad8\u4eae"},{"location":"versions/github/#commit-issue","text":"\u5982\u679c\u67d0\u4e2a\u63d0\u4ea4\u4fee\u590d\u4e86\u4e00\u4e2a Issue\uff0c\u5f53\u63d0\u4ea4\u5230 master \u5206\u652f\u65f6\uff0c\u63d0\u4ea4\u4fe1\u606f\u91cc\u53ef\u4ee5\u4f7f\u7528 fix/fixes/fixed , close/closes/closed \u6216\u8005 resolve/resolves/resolved \u7b49\u5173\u952e\u8bcd\uff0c\u540e\u9762\u518d\u8ddf\u4e0a Issue \u53f7\uff0c\u8fd9\u6837\u5c31\u4f1a\u5173\u95ed\u8fd9\u4e2a Issue \u3002 $ git commit -m Fix screwup, fixes #12 \u8fd9\u5c06\u4f1a\u5173\u95ed Issue #12\uff0c\u5e76\u4e14\u5728 Issue \u8ba8\u8bba\u5217\u8868\u91cc\u5173\u8054\u5f15\u7528\u8fd9\u6b21\u63d0\u4ea4\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u901a\u8fc7\u63d0\u4ea4\u4fe1\u606f\u5173\u95ed Issue.","title":"\u7528 Commit \u4fe1\u606f\u5173\u95ed Issue"},{"location":"versions/github/#issue","text":"\u5982\u679c\u4f60\u60f3\u5f15\u7528\u5230\u540c\u4e00\u4e2a\u4ed3\u5e93\u4e2d\u7684\u4e00\u4e2a Issue\uff0c\u53ea\u9700\u4f7f\u7528\u4e95\u53f7 # \u52a0\u4e0a Issue \u53f7\uff0c\u8fd9\u6837\u5c31\u4f1a\u81ea\u52a8\u521b\u5efa\u5230\u6b64 Issue \u7684\u94fe\u63a5\u3002 \u8981\u94fe\u63a5\u5230\u5176\u4ed6\u4ed3\u5e93\u7684 Issue \uff0c\u5c31\u4f7f\u7528 {user}/{repo}#ISSUE_NUMBER \u7684\u65b9\u5f0f\uff0c\u4f8b\u5982 tiimgreen/toc#12 \u3002","title":"\u94fe\u63a5\u5176\u4ed6\u4ed3\u5e93\u7684 Issue"},{"location":"versions/github/#_10","text":"\u73b0\u5728\u4ed3\u5e93\u7684\u7ba1\u7406\u5458\u548c\u5408\u4f5c\u8005\u53ef\u4ee5\u5c06 Pull Requests \u548c Issue \u7684\u8bc4\u8bba\u529f\u80fd\u5173\u95ed\u3002 \u8fd9\u6837\uff0c\u4e0d\u662f\u9879\u76ee\u5408\u4f5c\u8005\u7684\u7528\u6237\u5c31\u4e0d\u80fd\u5728\u8fd9\u4e2a\u9879\u76ee\u4e0a\u4f7f\u7528\u8bc4\u8bba\u529f\u80fd\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5bf9\u8bdd\u9501\u5b9a\u529f\u80fd.","title":"\u9501\u5b9a\u9879\u76ee\u5bf9\u8bdd\u529f\u80fd"},{"location":"versions/github/#ci-pull-request","text":"\u5982\u679c\u914d\u7f6e\u6b63\u786e\uff0c Travis CI \u4f1a\u4e3a\u6bcf\u4e2a\u4f60\u6536\u5230\u7684 Pull Request \u6267\u884c\u6784\u5efa\uff0c\u5c31\u50cf\u6bcf\u6b21\u63d0\u4ea4\u4e5f\u4f1a\u89e6\u53d1\u6784\u5efa\u4e00\u6837\u3002\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e Travis CI \u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u8003 Travis CI\u5165\u95e8 \u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u63d0\u4ea4\u72b6\u6001 API.","title":"\u8bbe\u7f6e CI \u5bf9\u6bcf\u6761 Pull Request \u90fd\u8fdb\u884c\u6784\u5efa"},{"location":"versions/github/#markdown","text":"\u4f8b\u5982\uff0c\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5728\u4f60\u7684 Markdown \u6587\u4ef6\u91cc\u4e3a Ruby \u4ee3\u7801\u6dfb\u52a0\u8bed\u6cd5\u9ad8\u4eae\uff1a ```ruby require tabbit table = Tabbit.new( Name , Email ) table.add_row( Tim Green , tiimgreen@gmail.com ) puts table.to_s ``` \u6548\u679c\u5982\u4e0b\uff1a require tabbit table = Tabbit . new ( Name , Email ) table . add_row ( Tim Green , tiimgreen@gmail.com ) puts table . to_s Github\u4f7f\u7528 Linguist \u505a\u8bed\u8a00\u8bc6\u522b\u548c\u8bed\u6cd5\u9ad8\u4eae\u3002\u4f60\u53ef\u4ee5\u4ed4\u7ec6\u9605\u8bfb languages YAML file \uff0c\u4e86\u89e3\u6709\u54ea\u4e9b\u53ef\u7528\u7684\u5173\u952e\u5b57\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 GitHub Flavored Markdown.","title":"Markdown \u6587\u4ef6\u8bed\u6cd5\u9ad8\u4eae"},{"location":"versions/github/#_11","text":"\u53ef\u4ee5\u5728 Pull Requests, Issues, \u63d0\u4ea4\u6d88\u606f, Markdown \u6587\u4ef6\u91cc\u52a0\u5165\u8868\u60c5\u7b26\u3002\u4f7f\u7528\u65b9\u6cd5 :name_of_emoji: :smile: \u5c06\u8f93\u51fa\u4e00\u4e2a\u7b11\u8138\uff1a :smile: Github \u652f\u6301\u7684\u5b8c\u6574\u8868\u60c5\u7b26\u53f7\u5217\u8868\u8be6\u89c1 emoji-cheat-sheet.com \u6216 scotch-io/All-Github-Emoji-Icons \u3002 Github \u4e0a\u4f7f\u7528\u6700\u591a\u76845\u4e2a\u8868\u60c5\u7b26\u53f7\u662f\uff1a :shipit: :sparkles: :-1: :+1: :clap:","title":"\u8868\u60c5\u7b26"},{"location":"versions/github/#gif","text":"\u6ce8\u91ca\u548cREADME\u7b49\u6587\u4ef6\u91cc\u4e5f\u53ef\u4ee5\u4f7f\u7528\u56fe\u7247\u548c GIF \u52a8\u753b\uff1a ! [ Alt Text ]( http : //www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif) \u4ed3\u5e93\u4e2d\u7684\u56fe\u7247\u53ef\u4ee5\u88ab\u76f4\u63a5\u5f15\u7528\uff1a ! [ Alt Text ]( https : //github.com/{user}/{repo}/raw/master/path/to/image.gif) \u6240\u6709\u56fe\u7247\u90fd\u7f13\u5b58\u5728 Github\uff0c\u4e0d\u7528\u62c5\u5fc3\u4f60\u7684\u7ad9\u70b9\u4e0d\u80fd\u8bbf\u95ee\u65f6\u5c31\u770b\u4e0d\u5230\u56fe\u7247\u4e86\u3002","title":"\u56fe\u7247 / GIF \u52a8\u753b"},{"location":"versions/github/#github-wiki","text":"\u6709\u591a\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5728 Wiki \u9875\u9762\u91cc\u5d4c\u5165\u56fe\u7247\u3002\u65e2\u53ef\u4ee5\u50cf\u4e0a\u4e00\u6761\u91cc\u90a3\u6837\u4f7f\u7528\u6807\u51c6\u7684 Markdown \u8bed\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u6307\u5b9a\u56fe\u7247\u7684\u9ad8\u5ea6\u6216\u5bbd\u5ea6\uff1a [[ http://www.sheawong.com/wp-content/uploads/2013/08/keephatin.gif | height = 100px ]] \u7ed3\u679c\uff1a","title":"\u5728 GitHub Wiki \u4e2d\u5f15\u7528\u56fe\u7247"},{"location":"versions/github/#_12","text":"\u5728\u4e3b\u9898\u8bc4\u8bba\u4e2d\u5f15\u7528\u4e4b\u524d\u67d0\u4e2a\u4eba\u6240\u8bf4\u7684\uff0c\u53ea\u9700\u9009\u4e2d\u6587\u672c\uff0c\u7136\u540e\u6309 r \u952e\uff0c\u60f3\u8981\u7684\u5c31\u4f1a\u4ee5\u5f15\u7528\u7684\u5f62\u5f0f\u590d\u5236\u5230\u4f60\u7684\u8f93\u5165\u6846\u91cc\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5feb\u901f\u5f15\u7528.","title":"\u5feb\u901f\u5f15\u7528"},{"location":"versions/github/#_13","text":"\uff08\u4ec5\u9002\u7528\u4e8e Chrome \u6d4f\u89c8\u5668\uff09 \u5f53\u622a\u5c4f\u56fe\u7247\u590d\u5236\u5230\u526a\u8d34\u677f\u540e\uff08mac \u4e0a\u7528 cmd-ctrl-shift-4 \uff09\uff0c\u4f60\u53ef\u4ee5\u7528( cmd-v / ctrl-v )\u628a\u56fe\u7247\u7c98\u8d34\u5230\u8bc4\u8bba\u6846\u91cc\uff0c\u7136\u540e\u5b83\u5c31\u4f1a\u81ea\u52a8\u4e0a\u4f20\u5230 Github\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5728 issue \u4e2d\u4f7f\u7528\u9644\u4ef6","title":"\u7c98\u8d34\u526a\u8d34\u677f\u4e2d\u7684\u56fe\u7247\u5230\u8bc4\u8bba"},{"location":"versions/github/#_14","text":"\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u65f6\uff0cGithub\u4f1a\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a\u9884\u7f6e\u7684\u8f6f\u4ef6\u8bb8\u53ef\u5217\u8868\uff1a \u5bf9\u4e8e\u5df2\u6709\u7684\u4ed3\u5e93\uff0c\u53ef\u4ee5\u901a\u8fc7 web \u754c\u9762\u521b\u5efa\u6587\u4ef6\u6765\u6dfb\u52a0\u8f6f\u4ef6\u8bb8\u53ef\u3002\u8f93\u5165 LICENSE \u4f5c\u4e3a\u6587\u4ef6\u540d\u540e\uff0c\u540c\u6837\u53ef\u4ee5\u4ece\u9884\u7f6e\u7684\u5217\u8868\u4e2d\u9009\u62e9\u4e00\u4e2a\u4f5c\u4e3a\u6a21\u677f\u3002 \u8fd9\u4e2a\u6280\u5de7\u4e5f\u9002\u7528\u4e8e .gitignore \u6587\u4ef6\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5f00\u6e90\u8bb8\u53ef\u8bc1","title":"\u5feb\u901f\u6dfb\u52a0\u8bb8\u53ef\u8bc1\u6587\u4ef6"},{"location":"versions/github/#_15","text":"Issues \u548c Pull requests \u91cc\u53ef\u4ee5\u6dfb\u52a0\u590d\u9009\u6846\uff0c\u8bed\u6cd5\u5982\u4e0b\uff08\u6ce8\u610f\u7a7a\u767d\u7b26\uff09\uff1a - [ ] Be awesome - [ ] Prepare dinner - [ ] Research recipe - [ ] Buy ingredients - [ ] Cook recipe - [ ] Sleep \u5f53\u9879\u76ee\u88ab\u9009\u4e2d\u65f6\uff0c\u5b83\u5bf9\u5e94\u7684 Markdown \u6e90\u7801\u4e5f\u88ab\u66f4\u65b0\u4e86\uff1a - [x] Be awesome - [ ] Prepare dinner - [x] Research recipe - [x] Buy ingredients - [ ] Cook recipe - [ ] Sleep \u8fdb\u4e00\u6b65\u4e86\u89e3\u4efb\u52a1\u5217\u8868.","title":"\u4efb\u52a1\u5217\u8868"},{"location":"versions/github/#markdown_1","text":"\u5728\u5b8c\u5168\u9002\u914dMarkdown\u8bed\u6cd5\u7684\u6587\u4ef6\u4e2d\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u8bed\u6cd5\u52a0\u5165\u4e00\u4e2a \u53ea\u8bfb \u7684\u4efb\u52a1\u5217\u8868 - [ ] Mercury - [x] Venus - [x] Earth - [x] Moon - [x] Mars - [ ] Deimos - [ ] Phobos [ ] Mercury [x] Venus [x] Earth [x] Moon [x] Mars [ ] Deimos [ ] Phobos \u8fdb\u4e00\u6b65\u4e86\u89e3 Markdown \u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u5217\u8868","title":"Markdown \u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u5217\u8868"},{"location":"versions/github/#_16","text":"Markdown\u6587\u4ef6\u91cc\u94fe\u63a5\u5230\u5185\u90e8\u5185\u5bb9\u65f6\u63a8\u8350\u4f7f\u7528\u76f8\u5bf9\u94fe\u63a5\u3002 [Link to a header](#awesome-section) [Link to a file](docs/readme) \u7edd\u5bf9\u94fe\u63a5\u4f1a\u5728 URL \u6539\u53d8\u65f6\uff08\u4f8b\u5982\u91cd\u547d\u540d\u4ed3\u5e93\u3001\u7528\u6237\u540d\u6539\u53d8\uff0c\u5efa\u7acb\u5206\u652f\u9879\u76ee\uff09\u88ab\u66f4\u65b0\u3002\u4f7f\u7528\u76f8\u5bf9\u94fe\u63a5\u80fd\u591f\u4fdd\u8bc1\u4f60\u7684\u6587\u6863\u4e0d\u53d7\u6b64\u5f71\u54cd\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u76f8\u5bf9\u94fe\u63a5.","title":"\u76f8\u5bf9\u94fe\u63a5"},{"location":"versions/github/#github-pages","text":"\u5728 Jekyll \u9875\u9762\u548c\u6587\u7ae0\u91cc\uff0c\u4ed3\u5e93\u4fe1\u606f\u53ef\u5728 site.github \u547d\u540d\u7a7a\u95f4\u4e0b\u627e\u5230\uff0c\u4e5f\u53ef\u4ee5\u663e\u793a\u51fa\u6765\uff0c\u4f8b\u5982\uff0c\u4f7f\u7528 {{ site.github.project_title }} \u663e\u793a\u9879\u76ee\u6807\u9898\u3002 Jemoji \u548c jekyll-mentions \u63d2\u4ef6\u4e3a\u4f60\u7684 Jekyll \u6587\u7ae0\u548c\u9875\u9762\u589e\u52a0\u4e86 emoji \u548c @mentions \u529f\u80fd\u3002 \u4e86\u89e3\u66f4\u591a GitHub Pages \u7684\u5143\u6570\u636e\u548c\u63d2\u4ef6\u652f\u6301.","title":"GitHub Pages \u7684\u5143\u6570\u636e\u4e0e\u63d2\u4ef6\u652f\u6301"},{"location":"versions/github/#yaml","text":"\u8bb8\u591a\u535a\u5ba2\u7ad9\u70b9\uff0c\u6bd4\u5982\u57fa\u4e8e Jekyll \u7684 GitHub Pages \uff0c\u90fd\u4f9d\u8d56\u4e8e\u4e00\u4e9b\u6587\u7ae0\u5934\u90e8\u7684 YAML \u683c\u5f0f\u7684\u5143\u6570\u636e\u3002 Github \u4f1a\u5c06\u5176\u6e32\u67d3\u6210\u4e00\u4e2a\u6c34\u5e73\u8868\u683c\uff0c\u65b9\u4fbf\u9605\u8bfb\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 \u5728\u6587\u6863\u91cc\u67e5\u770b YAML \u5143\u6570\u636e.","title":"\u67e5\u770b YAML \u683c\u5f0f\u7684\u5143\u6570\u636e"},{"location":"versions/github/#_17","text":"GitHub \u652f\u6301\u5c06 .csv (\u9017\u53f7\u5206\u9694)\u548c .tsv (\u5236\u8868\u7b26\u5206\u9694)\u683c\u5f0f\u7684\u6587\u4ef6\u6e32\u67d3\u6210\u8868\u683c\u6570\u636e\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u6e32\u67d3\u8868\u683c\u6570\u636e.","title":"\u6e32\u67d3\u8868\u683c\u6570\u636e"},{"location":"versions/github/#pull-request","text":"\u5408\u5e76\u4e00\u4e2a Pull Request \u4e4b\u540e\uff0c\u4f60\u53ef\u80fd\u4f1a\u53cd\u6094\uff1a\u8981\u4e48\u662f\u8fd9\u6b21 Pull Request \u6ca1\u4ec0\u4e48\u7528\u5904\uff0c\u8981\u4e48\u662f\u8fd8\u4e0d\u5230\u5408\u5e76\u7684\u65f6\u5019\u3002 \u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7 Pull Request \u4e2d\u7684 Revert \u6309\u94ae\u6765\u64a4\u9500\u4e00\u4e2a\u5df2\u5408\u5e76\u7684 Pull Request \u4e2d\u7684 commit\u3002\u6309\u4e0b\u6309\u94ae\u540e\u5c06\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u8fdb\u884c\u9006\u64cd\u4f5c\u7684 Pull Request\u3002 *\u8fdb\u4e00\u6b65\u4e86\u89e3\u201c\u64a4\u9500\u201d\u6309\u94ae","title":"\u64a4\u9500 Pull Request"},{"location":"versions/github/#diffs","text":"","title":"Diffs"},{"location":"versions/github/#diffs_1","text":"Commit \u548c Pull Request \u91cc\u5305\u542b\u6709 Github \u652f\u6301\u7684\u53ef\u6e32\u67d3\u6587\u6863\uff08\u6bd4\u5982 Markdown\uff09\u4f1a\u63d0\u4f9b source \u548c rendered \u4e24\u4e2a\u89c6\u56fe\u529f\u80fd\u3002 \u70b9\u51fb \"rendered\" \u6309\u94ae\uff0c\u770b\u770b\u6539\u52a8\u5728\u6e32\u67d3\u540e\u7684\u663e\u793a\u6548\u679c\u3002\u5f53\u4f60\u6dfb\u52a0\u3001\u5220\u9664\u6216\u4fee\u6539\u6587\u672c\u65f6\uff0c\u6e32\u67d3\u7eaf\u6587\u672c\u89c6\u56fe\u975e\u5e38\u65b9\u4fbf\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u6e32\u67d3\u7eaf\u6587\u672c\u89c6\u56feDiffs.","title":"\u53ef\u6e32\u67d3\u6587\u6863\u7684Diffs"},{"location":"versions/github/#_18","text":"\u5f53\u4f60\u5728GitHub\u4e0a\u67e5\u770b\u4e00\u4e2a\u5305\u542b\u5730\u7406\u6570\u636e\u7684 commit \u6216 pull request\u65f6\uff0cGithub \u5c06\u4ee5\u53ef\u89c6\u5316\u7684\u65b9\u5f0f\u5bf9\u6bd4\u7248\u672c\u4e4b\u95f4\u7684\u5dee\u5f02\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u6bd4\u8f83\u7684\u5730\u56fe\u6570\u636e.","title":"\u53ef\u6bd4\u8f83\u7684\u5730\u56fe\u6570\u636e"},{"location":"versions/github/#diff","text":"\u4f60\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb diff \u8fb9\u680f\u91cc\u7684 unfold \u6309\u94ae\u6765\u591a\u663e\u793a\u51e0\u884c\u4e0a\u4e0b\u6587\u3002\u4f60\u53ef\u4ee5\u4e00\u76f4\u70b9\u51fb unfold \u6309\u94ae\u76f4\u5230\u663e\u793a\u4e86\u6587\u4ef6\u7684\u5168\u90e8\u5185\u5bb9\u3002\u8fd9\u4e2a\u529f\u80fd\u5728\u6240\u6709 GitHub \u7684 diff \u529f\u80fd\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5c55\u5f00 Diff \u4e0a\u4e0b\u6587.","title":"\u5728 Diff \u4e2d\u5c55\u5f00\u67e5\u770b\u66f4\u591a\u7684\u4e0a\u4e0b\u6587"},{"location":"versions/github/#pull-request-diff-patch","text":"\u5728 Pull Request \u7684 URL \u540e\u9762\u52a0\u4e0a .diff \u6216 .patch \u7684\u6269\u5c55\u540d\u5c31\u53ef\u4ee5\u5f97\u5230\u5b83\u7684 diff \u6216 patch \u6587\u4ef6\uff0c\u4f8b\u5982\uff1a https://github.com/tiimgreen/github-cheat-sheet/pull/15 https://github.com/tiimgreen/github-cheat-sheet/pull/15.diff https://github.com/tiimgreen/github-cheat-sheet/pull/15.patch .diff \u6269\u5c55\u4f1a\u4f7f\u7528\u666e\u901a\u6587\u672c\u683c\u5f0f\u663e\u793a\u5982\u4e0b\u5185\u5bb9\uff1a diff --git a/README.md b/README.md index 88fcf69..8614873 100644 --- a/README.md +++ b/README.md @@ -28,6 +28,7 @@ All the hidden and not hidden features of Git and GitHub. This cheat sheet was i - [Merged Branches](#merged-branches) - [Quick Licensing](#quick-licensing) - [TODO Lists](#todo-lists) +- [Relative Links](#relative-links) - [.gitconfig Recommendations](#gitconfig-recommendations) - [Aliases](#aliases) - [Auto-correct](#auto-correct) @@ -381,6 +382,19 @@ When they are clicked, they will be updated in the pure Markdown: - [ ] Sleep (...)","title":"\u83b7\u53d6 Pull Request \u7684 diff \u6216 patch \u6587\u4ef6"},{"location":"versions/github/#_19","text":"GitHub \u53ef\u4ee5\u663e\u793a\u5305\u62ec PNG\u3001JPG\u3001GIF\u3001PSD \u5728\u5185\u7684\u591a\u79cd\u56fe\u7247\u683c\u5f0f\u5e76\u63d0\u4f9b\u4e86\u51e0\u79cd\u65b9\u5f0f\u6765\u6bd4\u8f83\u8fd9\u4e9b\u683c\u5f0f\u7684\u56fe\u7247\u6587\u4ef6\u7248\u672c\u95f4\u7684\u4e0d\u540c\u3002 \u67e5\u770b\u66f4\u591a\u5173\u4e8e\u56fe\u7247\u663e\u793a\u548c\u6bd4\u8f83","title":"\u663e\u793a\u56fe\u7247\u4ee5\u53ca\u6bd4\u8f83\u56fe\u7247"},{"location":"versions/github/#hub","text":"Hub \u662f\u4e00\u4e2a\u5bf9 Git \u8fdb\u884c\u4e86\u5c01\u88c5\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u65b9\u4fbf\u7684\u4f7f\u7528 Github\u3002 \u4f8b\u5982\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u8fdb\u884c\u514b\u9686\uff1a $ hub clone tiimgreen/toc \u67e5\u770b\u66f4\u591a Hub \u63d0\u4f9b\u7684\u8d85\u9177\u547d\u4ee4.","title":"Hub"},{"location":"versions/github/#_20","text":"\u5728\u4ed3\u5e93\u7684\u6839\u76ee\u5f55\u6dfb\u52a0\u4e00\u4e2a\u540d\u4e3a CONTRIBUTING \u7684\u6587\u4ef6\u540e\uff0c\u8d21\u732e\u8005\u5728\u65b0\u5efa Issue \u6216 Pull Request \u65f6\u4f1a\u770b\u5230\u4e00\u4e2a\u6307\u5411\u8fd9\u4e2a\u6587\u4ef6\u7684\u94fe\u63a5\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3\u8d21\u732e\u8005\u6307\u5357.","title":"\u8d21\u732e\u8005\u6307\u5357"},{"location":"versions/github/#octicons","text":"GitHubs \u56fe\u6807\u5e93 (Octicons) \u73b0\u5df2\u5f00\u6e90\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 GitHub \u56fe\u6807\u5e93","title":"Octicons"},{"location":"versions/github/#github_4","text":"\u5185\u5bb9 \u94fe\u63a5 \u63a2\u7d22 GitHub https://github.com/explore GitHub \u535a\u5ba2 https://github.com/blog GitHub \u5e2e\u52a9 https://help.github.com/ GitHub \u57f9\u8bad http://training.github.com/ GitHub \u5f00\u53d1\u8005 https://developer.github.com/","title":"GitHub \u8d44\u6e90"},{"location":"versions/github/#github_5","text":"\u5185\u5bb9 \u94fe\u63a5 How GitHub Uses GitHub to Build GitHub https://www.youtube.com/watch?v=qyz3jkOBbQY Introduction to Git with Scott Chacon of GitHub https://www.youtube.com/watch?v=ZDR433b0HJY How GitHub No Longer Works https://www.youtube.com/watch?v=gXD1ITW7iZI Git and GitHub Secrets https://www.youtube.com/watch?v=Foz9yvMkvlA More Git and GitHub Secrets https://www.youtube.com/watch?v=p50xsL-iVgU","title":"GitHub \u76f8\u5173\u6f14\u8bb2\u89c6\u9891"},{"location":"versions/github/#git","text":"","title":"Git"},{"location":"versions/github/#_21","text":"\u5f53\u7528 /bin/rm \u547d\u4ee4\u5220\u9664\u4e86\u5927\u91cf\u6587\u4ef6\u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u7528\u4e0b\u9762\u4e00\u6761\u547d\u4ee4\u4ece\u5de5\u4f5c\u533a\u548c\u7d22\u5f15\u4e2d\u53bb\u9664\u8fd9\u4e9b\u6587\u4ef6\uff0c\u4ee5\u514d\u4e00\u4e2a\u4e00\u4e2a\u7684\u5220\u9664\uff1a $ git rm $( git ls-files -d ) \u4f8b\u5982: $ git status On branch master Changes not staged for commit: deleted: a deleted: c $ git rm $( git ls-files -d ) rm a rm c $ git status On branch master Changes to be committed: deleted: a deleted: c","title":"\u4ece\u5de5\u4f5c\u533a\u53bb\u9664\u5927\u91cf\u5df2\u5220\u9664\u6587\u4ef6"},{"location":"versions/github/#_22","text":"\u5feb\u901f\u68c0\u51fa\u4e0a\u4e00\u4e2a\u5206\u652f\uff1a $ git checkout - # Switched to branch master $ git checkout - # Switched to branch next $ git checkout - # Switched to branch master \u8fdb\u4e00\u6b65\u4e86\u89e3 Git \u5206\u652f.","title":"\u4e0a\u4e00\u4e2a\u5206\u652f"},{"location":"versions/github/#_23","text":"Git Stripspace \u547d\u4ee4\u53ef\u4ee5: \u53bb\u6389\u884c\u5c3e\u7a7a\u767d\u7b26 \u591a\u4e2a\u7a7a\u884c\u538b\u7f29\u6210\u4e00\u884c \u5fc5\u8981\u65f6\u5728\u6587\u4ef6\u672b\u5c3e\u589e\u52a0\u4e00\u4e2a\u7a7a\u884c \u4f7f\u7528\u6b64\u547d\u4ee4\u65f6\u5fc5\u987b\u4f20\u5165\u4e00\u4e2a\u6587\u4ef6\uff0c\u50cf\u8fd9\u6837\uff1a $ git stripspace README.md \u8fdb\u4e00\u6b65\u4e86\u89e3 Git stripspace \u547d\u4ee4.","title":"\u53bb\u9664\u7a7a\u767d"},{"location":"versions/github/#pull-requests","text":"\u5bf9 Github \u4ed3\u5e93\u6765\u8bf4\uff0cPull Request \u662f\u79cd\u7279\u6b8a\u5206\u652f\uff0c \u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u591a\u79cd\u65b9\u5f0f\u53d6\u5230\u672c\u5730\uff1a \u53d6\u51fa\u67d0\u4e2a\u7279\u5b9a\u7684 Pull Request \u5e76\u4e34\u65f6\u4f5c\u4e3a\u672c\u5730\u7684 FETCH_HEAD \u4e2d\u4ee5\u4fbf\u8fdb\u884c\u5feb\u901f\u67e5\u770b\u66f4\u6539( diff )\u4ee5\u53ca\u5408\u5e76( merge )\uff1a $ git fetch origin refs/pull/ [ PR-Number ] /head \u901a\u8fc7 refspec \u83b7\u53d6\u6240\u6709\u7684 Pull Request \u4e3a\u672c\u5730\u5206\u652f\uff1a $ git fetch origin +refs/pull/*/head:refs/remotes/origin/pr/* \u6216\u5728\u4ed3\u5e93\u7684 .git/config \u4e2d\u52a0\u5165\u4e0b\u5217\u8bbe\u7f6e\u6765\u81ea\u52a8\u83b7\u53d6\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684 Pull Request [remote origin ] fetch = +refs/heads/*:refs/remotes/origin/* url = git@github.com:tiimgreen/github-cheat-sheet.git [remote origin ] fetch = +refs/heads/*:refs/remotes/origin/* url = git@github.com:tiimgreen/github-cheat-sheet.git fetch = +refs/pull/*/head:refs/remotes/origin/pr/* \u5bf9\u57fa\u4e8e\u6d3e\u751f\u5e93\u7684 Pull Request\uff0c\u53ef\u4ee5\u901a\u8fc7\u5148 checkout \u4ee3\u8868\u6b64 Pull Request \u7684\u8fdc\u7aef\u5206\u652f\u518d\u7531\u6b64\u5206\u652f\u5efa\u7acb\u4e00\u4e2a\u672c\u5730\u5206\u652f\uff1a $ git checkout pr/42 pr-42 \u64cd\u4f5c\u591a\u4e2a\u4ed3\u5e93\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5728 Git \u4e2d\u8bbe\u7f6e\u83b7\u53d6 Pull Request \u7684\u5168\u5c40\u9009\u9879\u3002 git config --global --add remote.origin.fetch +refs/pull/*/head:refs/remotes/origin/pr/* \u6b64\u65f6\u53ef\u4ee5\u5728\u4efb\u610f\u4ed3\u5e93\u4e2d\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a git fetch origin git checkout pr/42 \u8fdb\u4e00\u6b65\u4e86\u89e3\u5982\u4f55\u672c\u5730\u68c0\u51fa pull request.","title":"\u68c0\u51fa Pull Requests"},{"location":"versions/github/#_24","text":"\u53ef\u4ee5\u4f7f\u7528 --allow-empty \u9009\u9879\u5f3a\u5236\u521b\u5efa\u4e00\u4e2a\u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u63d0\u4ea4\uff1a $ git commit -m Big-ass commit --allow-empty \u8fd9\u6837\u505a\u5728\u5982\u4e0b\u51e0\u79cd\u60c5\u51b5\u4e0b\u662f\u6709\u610f\u4e49\u7684\uff1a \u6807\u8bb0\u65b0\u7684\u5de5\u4f5c\u6216\u4e00\u4e2a\u65b0\u529f\u80fd\u7684\u5f00\u59cb\u3002 \u8bb0\u5f55\u5bf9\u9879\u76ee\u7684\u8ddf\u4ee3\u7801\u65e0\u5173\u7684\u6539\u52a8\u3002 \u8ddf\u4f7f\u7528\u4f60\u4ed3\u5e93\u7684\u5176\u4ed6\u4eba\u4ea4\u6d41\u3002 \u4f5c\u4e3a\u4ed3\u5e93\u7684\u7b2c\u4e00\u6b21\u63d0\u4ea4\uff0c\u56e0\u4e3a\u7b2c\u4e00\u6b21\u63d0\u4ea4\u540e\u4e0d\u80fd\u88ab rebase\uff1a git commit -m \"init repo\" --allow-empty .","title":"\u6ca1\u6709\u4efb\u4f55\u6539\u52a8\u7684\u63d0\u4ea4"},{"location":"versions/github/#git-status","text":"\u5728\u547d\u4ee4\u884c\u8f93\u5165\u5982\u4e0b\u547d\u4ee4: $ git status \u53ef\u4ee5\u770b\u5230: \u52a0\u4e0a -sb \u9009\u9879: $ git status -sb \u8fd9\u4f1a\u5f97\u5230: \u8fdb\u4e00\u6b65\u4e86\u89e3 Git status \u547d\u4ee4.","title":"\u7f8e\u5316 Git Status"},{"location":"versions/github/#git-log","text":"\u8f93\u5165\u5982\u4e0b\u547d\u4ee4: $ git log --all --graph --pretty = format: %Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %an %Creset --abbrev-commit --date = relative \u53ef\u4ee5\u770b\u5230: \u8fd9\u8981\u5f52\u529f\u4e8e Palesz \u5728 stackoverflow \u7684\u56de\u7b54\u3002 \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u88ab\u7528\u4f5c\u522b\u540d\uff0c\u8be6\u7ec6\u505a\u6cd5\u89c1 \u8fd9\u91cc \u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 Git log \u547d\u4ee4.","title":"\u7f8e\u5316 Git Log"},{"location":"versions/github/#git_1","text":"Git \u67e5\u8be2\u8fd0\u884c\u4f60\u5728\u4e4b\u524d\u7684\u6240\u6709\u63d0\u4ea4\u4fe1\u606f\u91cc\u8fdb\u884c\u641c\u7d22\uff0c\u627e\u5230\u5176\u4e2d\u548c\u641c\u7d22\u6761\u4ef6\u76f8\u5339\u914d\u7684\u6700\u8fd1\u7684\u4e00\u6761\u3002 $ git show :/query \u8fd9\u91cc query \uff08\u533a\u522b\u5927\u5c0f\u5199\uff09\u662f\u4f60\u60f3\u8981\u641c\u7d22\u7684\u8bcd\u8bed\uff0c \u8fd9\u6761\u547d\u4ee4\u4f1a\u627e\u5230\u5305\u542b\u8fd9\u4e2a\u8bcd\u8bed\u7684\u6700\u540e\u90a3\u4e2a\u63d0\u4ea4\u5e76\u663e\u793a\u53d8\u52a8\u8be6\u60c5\u3002 $ git show :/typo \u6309 q \u952e\u9000\u51fa\u547d\u4ee4\u3002*","title":"Git \u67e5\u8be2"},{"location":"versions/github/#_25","text":"\u8f93\u5165\u547d\u4ee4: $ git branch --merged \u8fd9\u4f1a\u663e\u793a\u6240\u6709\u5df2\u7ecf\u5408\u5e76\u5230\u4f60\u5f53\u524d\u5206\u652f\u7684\u5206\u652f\u5217\u8868\u3002 \u76f8\u53cd\u5730\uff1a $ git branch --no-merged \u4f1a\u663e\u793a\u6240\u6709\u8fd8\u6ca1\u6709\u5408\u5e76\u5230\u4f60\u5f53\u524d\u5206\u652f\u7684\u5206\u652f\u5217\u8868\u3002 \u8fdb\u4e00\u6b65\u4e86\u89e3 Git branch \u547d\u4ee4.","title":"\u5408\u5e76\u5206\u652f"},{"location":"versions/github/#_26","text":"\u5982\u679c\u4e0a\u4e00\u4e2a\u6216\u591a\u4e2a\u63d0\u4ea4\u5305\u542b\u4e86\u9519\u8bef\uff0c\u53ef\u4ee5\u5728\u4f60\u4fee\u590d\u95ee\u9898\u540e\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\u5904\u7406\uff08\u5047\u8bbe\u8981\u4fee\u590d\u7684\u63d0\u4ea4\u7248\u672c\u662f abcde \uff09\uff1a $ git commit --fixup = abcde $ git rebase abcde^ --autosquash -i \u8fdb\u4e00\u6b65\u4e86\u89e3 Git commit \u547d\u4ee4. \u8fdb\u4e00\u6b65\u4e86\u89e3 Git rebase \u547d\u4ee4.","title":"\u4fee\u590d\u6709\u95ee\u9898\u7684\u63d0\u4ea4\u4ee5\u53ca\u81ea\u52a8\u5408\u5e76"},{"location":"versions/github/#_27","text":"\u4f7f\u7528 Git \u7684 instaweb \u53ef\u4ee5\u7acb\u5373\u5728 gitweb \u4e2d\u6d4f\u89c8\u4f60\u7684\u5de5\u4f5c\u4ed3\u5e93\u3002\u8fd9\u4e2a\u547d\u4ee4\u662f\u4e2a\u7b80\u5355\u7684\u811a\u672c\uff0c\u914d\u7f6e\u4e86 gitweb \u548c\u7528\u6765\u6d4f\u89c8\u672c\u5730\u4ed3\u5e93\u7684Web\u670d\u52a1\u5668\u3002 \uff08\u8bd1\u8005\u6ce8\uff1a\u9ed8\u8ba4\u9700\u8981lighttpd\u652f\u6301\uff09 $ git instaweb \u6267\u884c\u540e\u6253\u5f00\uff1a \u8fdb\u4e00\u6b65\u4e86\u89e3 Git instaweb \u547d\u4ee4.","title":"\u4ee5\u7f51\u7ad9\u65b9\u5f0f\u67e5\u770b\u672c\u5730\u4ed3\u5e93"},{"location":"versions/github/#git_2","text":"\u6240\u6709 Git \u914d\u7f6e\u90fd\u4fdd\u5b58\u5728\u4f60\u7684 .gitconfig \u6587\u4ef6\u4e2d\u3002","title":"Git \u914d\u7f6e"},{"location":"versions/github/#git_3","text":"\u522b\u540d\u7528\u6765\u5e2e\u52a9\u4f60\u5b9a\u4e49\u81ea\u5df1\u7684 git \u547d\u4ee4\u3002\u6bd4\u5982\u4f60\u53ef\u4ee5\u5b9a\u4e49 git a \u6765\u8fd0\u884c git add --all \u3002 \u8981\u6dfb\u52a0\u4e00\u4e2a\u522b\u540d\uff0c \u4e00\u79cd\u65b9\u6cd5\u662f\u6253\u5f00 ~/.gitconfig \u6587\u4ef6\u5e76\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a [alias] co = checkout cm = commit p = push # Show verbose output about tags, branches or remotes tags = tag -l branches = branch -a remotes = remote -v ...\u6216\u8005\u5728\u547d\u4ee4\u884c\u91cc\u952e\u5165\uff1a $ git config --global alias.new_alias git_function \u4f8b\u5982\uff1a $ git config --global alias.cm commit \u6307\u5411\u591a\u4e2a\u547d\u4ee4\u7684\u522b\u540d\u53ef\u4ee5\u7528\u5f15\u53f7\u6765\u5b9a\u4e49\uff1a $ git config --global alias.ac add -A . commit \u4e0b\u9762\u5217\u51fa\u4e86\u4e00\u4e9b\u6709\u7528\u7684\u522b\u540d\uff1a \u522b\u540d Alias \u547d\u4ee4 Command \u5982\u4f55\u8bbe\u7f6e What to Type git cm git commit git config --global alias.cm commit git co git checkout git config --global alias.co checkout git ac git add . -A git commit git config --global alias.ac '!git add -A git commit' git st git status -sb git config --global alias.st 'status -sb' git tags git tag -l git config --global alias.tags 'tag -l' git branches git branch -a git config --global alias.branches 'branch -a' git cleanup git branch --merged | grep -v '*' | xargs git branch -d git config --global alias.cleanup \"!git branch --merged | grep -v '*' | xargs git branch -d\" git remotes git remote -v git config --global alias.remotes 'remote -v' git lg git log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %an %Creset' --abbrev-commit -- git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %an %Creset' --abbrev-commit --\"","title":"Git \u547d\u4ee4\u81ea\u5b9a\u4e49\u522b\u540d"},{"location":"versions/github/#_28","text":"\u5982\u679c\u952e\u5165 git comit \u4f60\u4f1a\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a $ git comit -m Message # git: comit is not a git command. See git --help . # Did you mean this? # commit \u4e3a\u4e86\u5728\u952e\u5165 comit \u8c03\u7528 commit \u547d\u4ee4\uff0c\u53ea\u9700\u542f\u7528\u81ea\u52a8\u7ea0\u9519\u529f\u80fd\uff1a $ git config --global help.autocorrect 1 \u73b0\u5728\u4f60\u5c31\u4f1a\u770b\u5230\uff1a $ git comit -m Message # WARNING: You called a Git command named comit , which does not exist. # Continuing under the assumption that you meant commit # in 0.1 seconds automatically...","title":"\u81ea\u52a8\u66f4\u6b63"},{"location":"versions/github/#_29","text":"\u8981\u5728\u4f60\u7684 Git \u547d\u4ee4\u8f93\u51fa\u91cc\u52a0\u4e0a\u989c\u8272\u7684\u8bdd\uff0c\u53ef\u4ee5\u7528\u5982\u4e0b\u547d\u4ee4\uff1a $ git config --global color.ui 1 \u8fdb\u4e00\u6b65\u4e86\u89e3 Git config \u547d\u4ee4.","title":"\u989c\u8272\u8f93\u51fa"},{"location":"versions/github/#git_4","text":"Title Link Official Git Site http://git-scm.com/ Official Git Video Tutorials http://git-scm.com/videos Code School Try Git http://try.github.com/ Introductory Reference Tutorial for Git http://gitref.org/ Official Git Tutorial http://git-scm.com/docs/gittutorial Everyday Git http://git-scm.com/docs/everyday Git Immersion http://gitimmersion.com/ Ry's Git Tutorial http://rypress.com/tutorials/git/index.html Git for Computer Scientists http://eagain.net/articles/git-for-computer-scientists/ Git Magic http://www-cs-students.stanford.edu/~blynn/gitmagic/ GitHub Training Kit http://training.github.com/kit Git Visualization Playground http://onlywei.github.io/explain-git-with-d3/#freeplay","title":"Git \u8d44\u6e90"},{"location":"versions/github/#git_5","text":"Title Link Pragmatic Version Control Using Git http://www.pragprog.com/titles/tsgit/pragmatic-version-control-using-git Pro Git http://git-scm.com/book Git Internals Pluralsight https://github.com/pluralsight/git-internals-pdf Git in the Trenches http://cbx33.github.com/gitt/ Version Control with Git http://www.amazon.com/Version-Control-Git-collaborative-development/dp/1449316387 Pragmatic Guide to Git http://www.pragprog.com/titles/pg_git/pragmatic-guide-to-git Git: Version Control for Everyone http://www.packtpub.com/git-version-control-for-everyone/book","title":"Git \u53c2\u8003\u4e66\u7c4d"}]}